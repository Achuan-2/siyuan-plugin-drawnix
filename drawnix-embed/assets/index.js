const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index3.js","assets/index.dom.js"])))=>i.map(i=>d[i]);
function J9(e,n){for(var i=0;i<n.length;i++){const r=n[i];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();var Ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yE={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD;function tR(){if(rD)return Qp;rD=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(r,o,a){var l=null;if(a!==void 0&&(l=""+a),o.key!==void 0&&(l=""+o.key),"key"in o){a={};for(var c in o)c!=="key"&&(a[c]=o[c])}else a=o;return o=a.ref,{$$typeof:e,type:r,key:l,ref:o!==void 0?o:null,props:a}}return Qp.Fragment=n,Qp.jsx=i,Qp.jsxs=i,Qp}var oD;function eR(){return oD||(oD=1,yE.exports=tR()),yE.exports}var O=eR(),wE={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD;function nR(){if(sD)return Xe;sD=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),w=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,b={};function B(F,J,tt){this.props=F,this.context=J,this.refs=b,this.updater=tt||T}B.prototype.isReactComponent={},B.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},B.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function A(){}A.prototype=B.prototype;function I(F,J,tt){this.props=F,this.context=J,this.refs=b,this.updater=tt||T}var R=I.prototype=new A;R.constructor=I,D(R,B.prototype),R.isPureReactComponent=!0;var k=Array.isArray;function W(){}var U={H:null,A:null,T:null,S:null},nt=Object.prototype.hasOwnProperty;function st(F,J,tt){var it=tt.ref;return{$$typeof:e,type:F,key:J,ref:it!==void 0?it:null,props:tt}}function ft(F,J){return st(F.type,J,F.props)}function Et(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function ct(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(tt){return J[tt]})}var mt=/\/+/g;function wt(F,J){return typeof F=="object"&&F!==null&&F.key!=null?ct(""+F.key):J.toString(36)}function V(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(W,W):(F.status="pending",F.then(function(J){F.status==="pending"&&(F.status="fulfilled",F.value=J)},function(J){F.status==="pending"&&(F.status="rejected",F.reason=J)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function P(F,J,tt,it,xt){var gt=typeof F;(gt==="undefined"||gt==="boolean")&&(F=null);var Lt=!1;if(F===null)Lt=!0;else switch(gt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(F.$$typeof){case e:case n:Lt=!0;break;case p:return Lt=F._init,P(Lt(F._payload),J,tt,it,xt)}}if(Lt)return xt=xt(F),Lt=it===""?"."+wt(F,0):it,k(xt)?(tt="",Lt!=null&&(tt=Lt.replace(mt,"$&/")+"/"),P(xt,J,tt,"",function(Pt){return Pt})):xt!=null&&(Et(xt)&&(xt=ft(xt,tt+(xt.key==null||F&&F.key===xt.key?"":(""+xt.key).replace(mt,"$&/")+"/")+Lt)),J.push(xt)),1;Lt=0;var $t=it===""?".":it+":";if(k(F))for(var ot=0;ot<F.length;ot++)it=F[ot],gt=$t+wt(it,ot),Lt+=P(it,J,tt,gt,xt);else if(ot=x(F),typeof ot=="function")for(F=ot.call(F),ot=0;!(it=F.next()).done;)it=it.value,gt=$t+wt(it,ot++),Lt+=P(it,J,tt,gt,xt);else if(gt==="object"){if(typeof F.then=="function")return P(V(F),J,tt,it,xt);throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function _(F,J,tt){if(F==null)return F;var it=[],xt=0;return P(F,it,"","",function(gt){return J.call(tt,gt,xt++)}),it}function N(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(tt){(F._status===0||F._status===-1)&&(F._status=1,F._result=tt)},function(tt){(F._status===0||F._status===-1)&&(F._status=2,F._result=tt)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var $=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Q={map:_,forEach:function(F,J,tt){_(F,function(){J.apply(this,arguments)},tt)},count:function(F){var J=0;return _(F,function(){J++}),J},toArray:function(F){return _(F,function(J){return J})||[]},only:function(F){if(!Et(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Xe.Activity=m,Xe.Children=Q,Xe.Component=B,Xe.Fragment=i,Xe.Profiler=o,Xe.PureComponent=I,Xe.StrictMode=r,Xe.Suspense=h,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return U.H.useMemoCache(F)}},Xe.cache=function(F){return function(){return F.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(F,J,tt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var it=D({},F.props),xt=F.key;if(J!=null)for(gt in J.key!==void 0&&(xt=""+J.key),J)!nt.call(J,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&J.ref===void 0||(it[gt]=J[gt]);var gt=arguments.length-2;if(gt===1)it.children=tt;else if(1<gt){for(var Lt=Array(gt),$t=0;$t<gt;$t++)Lt[$t]=arguments[$t+2];it.children=Lt}return st(F.type,xt,it)},Xe.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Xe.createElement=function(F,J,tt){var it,xt={},gt=null;if(J!=null)for(it in J.key!==void 0&&(gt=""+J.key),J)nt.call(J,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(xt[it]=J[it]);var Lt=arguments.length-2;if(Lt===1)xt.children=tt;else if(1<Lt){for(var $t=Array(Lt),ot=0;ot<Lt;ot++)$t[ot]=arguments[ot+2];xt.children=$t}if(F&&F.defaultProps)for(it in Lt=F.defaultProps,Lt)xt[it]===void 0&&(xt[it]=Lt[it]);return st(F,gt,xt)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(F){return{$$typeof:c,render:F}},Xe.isValidElement=Et,Xe.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:N}},Xe.memo=function(F,J){return{$$typeof:d,type:F,compare:J===void 0?null:J}},Xe.startTransition=function(F){var J=U.T,tt={};U.T=tt;try{var it=F(),xt=U.S;xt!==null&&xt(tt,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(W,$)}catch(gt){$(gt)}finally{J!==null&&tt.types!==null&&(J.types=tt.types),U.T=J}},Xe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Xe.use=function(F){return U.H.use(F)},Xe.useActionState=function(F,J,tt){return U.H.useActionState(F,J,tt)},Xe.useCallback=function(F,J){return U.H.useCallback(F,J)},Xe.useContext=function(F){return U.H.useContext(F)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(F,J){return U.H.useDeferredValue(F,J)},Xe.useEffect=function(F,J){return U.H.useEffect(F,J)},Xe.useEffectEvent=function(F){return U.H.useEffectEvent(F)},Xe.useId=function(){return U.H.useId()},Xe.useImperativeHandle=function(F,J,tt){return U.H.useImperativeHandle(F,J,tt)},Xe.useInsertionEffect=function(F,J){return U.H.useInsertionEffect(F,J)},Xe.useLayoutEffect=function(F,J){return U.H.useLayoutEffect(F,J)},Xe.useMemo=function(F,J){return U.H.useMemo(F,J)},Xe.useOptimistic=function(F,J){return U.H.useOptimistic(F,J)},Xe.useReducer=function(F,J,tt){return U.H.useReducer(F,J,tt)},Xe.useRef=function(F){return U.H.useRef(F)},Xe.useState=function(F){return U.H.useState(F)},Xe.useSyncExternalStore=function(F,J,tt){return U.H.useSyncExternalStore(F,J,tt)},Xe.useTransition=function(){return U.H.useTransition()},Xe.version="19.2.0",Xe}var aD;function tT(){return aD||(aD=1,wE.exports=nR()),wE.exports}var Y=tT();const Ae=hf(Y),iR=J9({__proto__:null,default:Ae},[Y]);var xE={exports:{}},Jp={},CE={exports:{}},EE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD;function rR(){return lD||(lD=1,function(e){function n(P,_){var N=P.length;P.push(_);t:for(;0<N;){var $=N-1>>>1,Q=P[$];if(0<o(Q,_))P[$]=_,P[N]=Q,N=$;else break t}}function i(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var _=P[0],N=P.pop();if(N!==_){P[0]=N;t:for(var $=0,Q=P.length,F=Q>>>1;$<F;){var J=2*($+1)-1,tt=P[J],it=J+1,xt=P[it];if(0>o(tt,N))it<Q&&0>o(xt,tt)?(P[$]=xt,P[it]=N,$=it):(P[$]=tt,P[J]=N,$=J);else if(it<Q&&0>o(xt,N))P[$]=xt,P[it]=N,$=it;else break t}}return _}function o(P,_){var N=P.sortIndex-_.sortIndex;return N!==0?N:P.id-_.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var h=[],d=[],p=1,m=null,w=3,x=!1,T=!1,D=!1,b=!1,B=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function R(P){for(var _=i(d);_!==null;){if(_.callback===null)r(d);else if(_.startTime<=P)r(d),_.sortIndex=_.expirationTime,n(h,_);else break;_=i(d)}}function k(P){if(D=!1,R(P),!T)if(i(h)!==null)T=!0,W||(W=!0,ct());else{var _=i(d);_!==null&&V(k,_.startTime-P)}}var W=!1,U=-1,nt=5,st=-1;function ft(){return b?!0:!(e.unstable_now()-st<nt)}function Et(){if(b=!1,W){var P=e.unstable_now();st=P;var _=!0;try{t:{T=!1,D&&(D=!1,A(U),U=-1),x=!0;var N=w;try{e:{for(R(P),m=i(h);m!==null&&!(m.expirationTime>P&&ft());){var $=m.callback;if(typeof $=="function"){m.callback=null,w=m.priorityLevel;var Q=$(m.expirationTime<=P);if(P=e.unstable_now(),typeof Q=="function"){m.callback=Q,R(P),_=!0;break e}m===i(h)&&r(h),R(P)}else r(h);m=i(h)}if(m!==null)_=!0;else{var F=i(d);F!==null&&V(k,F.startTime-P),_=!1}}break t}finally{m=null,w=N,x=!1}_=void 0}}finally{_?ct():W=!1}}}var ct;if(typeof I=="function")ct=function(){I(Et)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,wt=mt.port2;mt.port1.onmessage=Et,ct=function(){wt.postMessage(null)}}else ct=function(){B(Et,0)};function V(P,_){U=B(function(){P(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(P){switch(w){case 1:case 2:case 3:var _=3;break;default:_=w}var N=w;w=_;try{return P()}finally{w=N}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(P,_){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var N=w;w=P;try{return _()}finally{w=N}},e.unstable_scheduleCallback=function(P,_,N){var $=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?$+N:$):N=$,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=N+Q,P={id:p++,callback:_,priorityLevel:P,startTime:N,expirationTime:Q,sortIndex:-1},N>$?(P.sortIndex=N,n(d,P),i(h)===null&&P===i(d)&&(D?(A(U),U=-1):D=!0,V(k,N-$))):(P.sortIndex=Q,n(h,P),T||x||(T=!0,W||(W=!0,ct()))),P},e.unstable_shouldYield=ft,e.unstable_wrapCallback=function(P){var _=w;return function(){var N=w;w=_;try{return P.apply(this,arguments)}finally{w=N}}}}(EE)),EE}var uD;function oR(){return uD||(uD=1,CE.exports=rR()),CE.exports}var SE={exports:{}},Ur={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cD;function sR(){if(cD)return Ur;cD=1;var e=tT();function n(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(h,d,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:m==null?null:""+m,children:h,containerInfo:d,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ur.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ur.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(n(299));return a(h,d,null,p)},Ur.flushSync=function(h){var d=l.T,p=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=d,r.p=p,r.d.f()}},Ur.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},Ur.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ur.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,m=c(p,d.crossOrigin),w=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:w,fetchPriority:x}):p==="script"&&r.d.X(h,{crossOrigin:m,integrity:w,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ur.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},Ur.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,m=c(p,d.crossOrigin);r.d.L(h,p,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ur.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=c(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},Ur.requestFormReset=function(h){r.d.r(h)},Ur.unstable_batchedUpdates=function(h,d){return h(d)},Ur.useFormState=function(h,d,p){return l.H.useFormState(h,d,p)},Ur.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ur.version="19.2.0",Ur}var fD;function z8(){if(fD)return SE.exports;fD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),SE.exports=sR(),SE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hD;function aR(){if(hD)return Jp;hD=1;var e=oR(),n=tT(),i=z8();function r(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,f=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(f=u.return),s=u.return;while(s)}return u.tag===3?f:null}function l(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function c(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(r(188))}function d(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(r(188));return u!==s?null:s}for(var f=s,v=u;;){var C=f.return;if(C===null)break;var S=C.alternate;if(S===null){if(v=C.return,v!==null){f=v;continue}break}if(C.child===S.child){for(S=C.child;S;){if(S===f)return h(C),s;if(S===v)return h(C),u;S=S.sibling}throw Error(r(188))}if(f.return!==v.return)f=C,v=S;else{for(var L=!1,X=C.child;X;){if(X===f){L=!0,f=C,v=S;break}if(X===v){L=!0,v=C,f=S;break}X=X.sibling}if(!L){for(X=S.child;X;){if(X===f){L=!0,f=S,v=C;break}if(X===v){L=!0,v=S,f=C;break}X=X.sibling}if(!L)throw Error(r(189))}}if(f.alternate!==v)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:u}function p(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=p(s),u!==null)return u;s=s.sibling}return null}var m=Object.assign,w=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),st=Symbol.for("react.activity"),ft=Symbol.for("react.memo_cache_sentinel"),Et=Symbol.iterator;function ct(s){return s===null||typeof s!="object"?null:(s=Et&&s[Et]||s["@@iterator"],typeof s=="function"?s:null)}var mt=Symbol.for("react.client.reference");function wt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===mt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case B:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case W:return"SuspenseList";case st:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case T:return"Portal";case I:return s.displayName||"Context";case A:return(s._context.displayName||"Context")+".Consumer";case R:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case U:return u=s.displayName||null,u!==null?u:wt(s.type)||"Memo";case nt:u=s._payload,s=s._init;try{return wt(s(u))}catch{}}return null}var V=Array.isArray,P=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},$=[],Q=-1;function F(s){return{current:s}}function J(s){0>Q||(s.current=$[Q],$[Q]=null,Q--)}function tt(s,u){Q++,$[Q]=s.current,s.current=u}var it=F(null),xt=F(null),gt=F(null),Lt=F(null);function $t(s,u){switch(tt(gt,u),tt(xt,s),tt(it,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?bh(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=bh(u),s=zr(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}J(it),tt(it,s)}function ot(){J(it),J(xt),J(gt)}function Pt(s){s.memoizedState!==null&&tt(Lt,s);var u=it.current,f=zr(u,s.type);u!==f&&(tt(xt,s),tt(it,f))}function Rt(s){xt.current===s&&(J(it),J(xt)),Lt.current===s&&(J(Lt),kc._currentValue=N)}var It,he;function Nt(s){if(It===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);It=u&&u[1]||"",he=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+s+he}var ge=!1;function ae(s,u){if(!s||ge)return"";ge=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(Ot){var Bt=Ot}Reflect.construct(s,[],zt)}else{try{zt.call()}catch(Ot){Bt=Ot}s.call(zt.prototype)}}else{try{throw Error()}catch(Ot){Bt=Ot}(zt=s())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(Ot){if(Ot&&Bt&&typeof Ot.stack=="string")return[Ot.stack,Bt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=v.DetermineComponentFrameRoot(),L=S[0],X=S[1];if(L&&X){var at=L.split(`
`),bt=X.split(`
`);for(C=v=0;v<at.length&&!at[v].includes("DetermineComponentFrameRoot");)v++;for(;C<bt.length&&!bt[C].includes("DetermineComponentFrameRoot");)C++;if(v===at.length||C===bt.length)for(v=at.length-1,C=bt.length-1;1<=v&&0<=C&&at[v]!==bt[C];)C--;for(;1<=v&&0<=C;v--,C--)if(at[v]!==bt[C]){if(v!==1||C!==1)do if(v--,C--,0>C||at[v]!==bt[C]){var kt=`
`+at[v].replace(" at new "," at ");return s.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",s.displayName)),kt}while(1<=v&&0<=C);break}}}finally{ge=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Nt(f):""}function ee(s,u){switch(s.tag){case 26:case 27:case 5:return Nt(s.type);case 16:return Nt("Lazy");case 13:return s.child!==u&&u!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return ae(s.type,!1);case 11:return ae(s.type.render,!1);case 1:return ae(s.type,!0);case 31:return Nt("Activity");default:return""}}function xe(s){try{var u="",f=null;do u+=ee(s,f),f=s,s=s.return;while(s);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var le=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,me=e.unstable_cancelCallback,Qe=e.unstable_shouldYield,ei=e.unstable_requestPaint,Fn=e.unstable_now,Kn=e.unstable_getCurrentPriorityLevel,Br=e.unstable_ImmediatePriority,ji=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,Wn=e.unstable_LowPriority,Zr=e.unstable_IdlePriority,Js=e.log,ta=e.unstable_setDisableYieldValue,Qr=null,di=null;function Pr(s){if(typeof Js=="function"&&ta(s),di&&typeof di.setStrictMode=="function")try{di.setStrictMode(Qr,s)}catch{}}var Ei=Math.clz32?Math.clz32:e1,Ms=Math.log,wd=Math.LN2;function e1(s){return s>>>=0,s===0?32:31-(Ms(s)/wd|0)|0}var Jr=256,kl=262144,Il=4194304;function Rs(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function _u(s,u,f){var v=s.pendingLanes;if(v===0)return 0;var C=0,S=s.suspendedLanes,L=s.pingedLanes;s=s.warmLanes;var X=v&134217727;return X!==0?(v=X&~S,v!==0?C=Rs(v):(L&=X,L!==0?C=Rs(L):f||(f=X&~s,f!==0&&(C=Rs(f))))):(X=v&~S,X!==0?C=Rs(X):L!==0?C=Rs(L):f||(f=v&~s,f!==0&&(C=Rs(f)))),C===0?0:u!==0&&u!==C&&(u&S)===0&&(S=C&-C,f=u&-u,S>=f||S===32&&(f&4194048)!==0)?u:C}function Hl(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function n1(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cf(){var s=Il;return Il<<=1,(Il&62914560)===0&&(Il=4194304),s}function Ef(s){for(var u=[],f=0;31>f;f++)u.push(s);return u}function Nl(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function i1(s,u,f,v,C,S){var L=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var X=s.entanglements,at=s.expirationTimes,bt=s.hiddenUpdates;for(f=L&~f;0<f;){var kt=31-Ei(f),zt=1<<kt;X[kt]=0,at[kt]=-1;var Bt=bt[kt];if(Bt!==null)for(bt[kt]=null,kt=0;kt<Bt.length;kt++){var Ot=Bt[kt];Ot!==null&&(Ot.lane&=-536870913)}f&=~zt}v!==0&&Fu(s,v,0),S!==0&&C===0&&s.tag!==0&&(s.suspendedLanes|=S&~(L&~u))}function Fu(s,u,f){s.pendingLanes|=u,s.suspendedLanes&=~u;var v=31-Ei(u);s.entangledLanes|=u,s.entanglements[v]=s.entanglements[v]|1073741824|f&261930}function xd(s,u){var f=s.entangledLanes|=u;for(s=s.entanglements;f;){var v=31-Ei(f),C=1<<v;C&u|s[v]&u&&(s[v]|=u),f&=~C}}function ku(s,u){var f=u&-u;return f=(f&42)!==0?1:Iu(f),(f&(s.suspendedLanes|u))!==0?0:f}function Iu(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Sf(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Cd(){var s=_.p;return s!==0?s:(s=window.event,s===void 0?32:P2(s.type))}function Ed(s,u){var f=_.p;try{return _.p=s,u()}finally{_.p=f}}var Os=Math.random().toString(36).slice(2),ki="__reactFiber$"+Os,or="__reactProps$"+Os,Ha="__reactContainer$"+Os,Hu="__reactEvents$"+Os,r1="__reactListeners$"+Os,o1="__reactHandles$"+Os,Sd="__reactResources$"+Os,Gl="__reactMarker$"+Os;function Tf(s){delete s[ki],delete s[or],delete s[Hu],delete s[r1],delete s[o1]}function Na(s){var u=s[ki];if(u)return u;for(var f=s.parentNode;f;){if(u=f[Ha]||f[ki]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(s=h2(s);s!==null;){if(f=s[ki])return f;s=h2(s)}return u}s=f,f=s.parentNode}return null}function ts(s){if(s=s[ki]||s[Ha]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function Ga(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(r(33))}function mr(s){var u=s[Sd];return u||(u=s[Sd]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Si(s){s[Gl]=!0}var ea=new Set,Td={};function to(s,u){es(s,u),es(s+"Capture",u)}function es(s,u){for(Td[s]=u,s=0;s<u.length;s++)ea.add(u[s])}var Ad=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dd={},Nu={};function s1(s){return le.call(Nu,s)?!0:le.call(Dd,s)?!1:Ad.test(s)?Nu[s]=!0:(Dd[s]=!0,!1)}function Gu(s,u,f){if(s1(u))if(f===null)s.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+f)}}function K(s,u,f){if(f===null)s.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+f)}}function lt(s,u,f,v){if(v===null)s.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(u,f,""+v)}}function et(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function vt(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function St(s,u,f){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var C=v.get,S=v.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return C.call(this)},set:function(L){f=""+L,S.call(this,L)}}),Object.defineProperty(s,u,{enumerable:v.enumerable}),{getValue:function(){return f},setValue:function(L){f=""+L},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function pt(s){if(!s._valueTracker){var u=vt(s)?"checked":"value";s._valueTracker=St(s,u,""+s[u])}}function Ht(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var f=u.getValue(),v="";return s&&(v=vt(s)?s.checked?"true":"false":s.value),s=v,s!==f?(u.setValue(s),!0):!1}function Xt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Zt=/[\n"\\]/g;function qt(s){return s.replace(Zt,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Jt(s,u,f,v,C,S,L,X){s.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.type=L:s.removeAttribute("type"),u!=null?L==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+et(u)):s.value!==""+et(u)&&(s.value=""+et(u)):L!=="submit"&&L!=="reset"||s.removeAttribute("value"),u!=null?Ue(s,L,et(u)):f!=null?Ue(s,L,et(f)):v!=null&&s.removeAttribute("value"),C==null&&S!=null&&(s.defaultChecked=!!S),C!=null&&(s.checked=C&&typeof C!="function"&&typeof C!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?s.name=""+et(X):s.removeAttribute("name")}function ue(s,u,f,v,C,S,L,X){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),u!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||u!=null)){pt(s);return}f=f!=null?""+et(f):"",u=u!=null?""+et(u):f,X||u===s.value||(s.value=u),s.defaultValue=u}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=X?s.checked:!!v,s.defaultChecked=!!v,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(s.name=L),pt(s)}function Ue(s,u,f){u==="number"&&Xt(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function tn(s,u,f,v){if(s=s.options,u){u={};for(var C=0;C<f.length;C++)u["$"+f[C]]=!0;for(f=0;f<s.length;f++)C=u.hasOwnProperty("$"+s[f].value),s[f].selected!==C&&(s[f].selected=C),C&&v&&(s[f].defaultSelected=!0)}else{for(f=""+et(f),u=null,C=0;C<s.length;C++){if(s[C].value===f){s[C].selected=!0,v&&(s[C].defaultSelected=!0);return}u!==null||s[C].disabled||(u=s[C])}u!==null&&(u.selected=!0)}}function vn(s,u,f){if(u!=null&&(u=""+et(u),u!==s.value&&(s.value=u),f==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=f!=null?""+et(f):""}function Zn(s,u,f,v){if(u==null){if(v!=null){if(f!=null)throw Error(r(92));if(V(v)){if(1<v.length)throw Error(r(93));v=v[0]}f=v}f==null&&(f=""),u=f}f=et(u),s.defaultValue=f,v=s.textContent,v===f&&v!==""&&v!==null&&(s.value=v),pt(s)}function wn(s,u){if(u){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=u;return}}s.textContent=u}var vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function na(s,u,f){var v=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?v?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":v?s.setProperty(u,f):typeof f!="number"||f===0||vr.has(u)?u==="float"?s.cssFloat=f:s[u]=(""+f).trim():s[u]=f+"px"}function zu(s,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(s=s.style,f!=null){for(var v in f)!f.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var C in u)v=u[C],u.hasOwnProperty(C)&&f[C]!==v&&na(s,C,v)}else for(var S in u)u.hasOwnProperty(S)&&na(s,S,u[S])}function ju(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),a1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zl(s){return a1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ns(){}var $u=null;function l1(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jl=null,Vu=null;function Mv(s){var u=ts(s);if(u&&(s=u.stateNode)){var f=s[or]||null;t:switch(s=u.stateNode,u.type){case"input":if(Jt(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+qt(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var v=f[u];if(v!==s&&v.form===s.form){var C=v[or]||null;if(!C)throw Error(r(90));Jt(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<f.length;u++)v=f[u],v.form===s.form&&Ht(v)}break t;case"textarea":vn(s,f.value,f.defaultValue);break t;case"select":u=f.value,u!=null&&tn(s,!!f.multiple,u,!1)}}}var u1=!1;function Rv(s,u,f){if(u1)return s(u,f);u1=!0;try{var v=s(u);return v}finally{if(u1=!1,(jl!==null||Vu!==null)&&(P0(),jl&&(u=jl,s=Vu,Vu=jl=null,Mv(u),s)))for(u=0;u<s.length;u++)Mv(s[u])}}function Ul(s,u){var f=s.stateNode;if(f===null)return null;var v=f[or]||null;if(v===null)return null;f=v[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break t;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c1=!1;if(ia)try{var Af={};Object.defineProperty(Af,"passive",{get:function(){c1=!0}}),window.addEventListener("test",Af,Af),window.removeEventListener("test",Af,Af)}catch{c1=!1}var za=null,f1=null,kn=null;function Un(){if(kn)return kn;var s,u=f1,f=u.length,v,C="value"in za?za.value:za.textContent,S=C.length;for(s=0;s<f&&u[s]===C[s];s++);var L=f-s;for(v=1;v<=L&&u[f-v]===C[S-v];v++);return kn=C.slice(s,1<v?1-v:void 0)}function bd(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function Bd(){return!0}function Ov(){return!1}function Mr(s){function u(f,v,C,S,L){this._reactName=f,this._targetInst=C,this.type=v,this.nativeEvent=S,this.target=L,this.currentTarget=null;for(var X in s)s.hasOwnProperty(X)&&(f=s[X],this[X]=f?f(S):S[X]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Bd:Ov,this.isPropagationStopped=Ov,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Bd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Bd)},persist:function(){},isPersistent:Bd}),u}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=Mr($l),Wu=m({},$l,{view:0,detail:0}),yC=Mr(Wu),Ii,Df,is,bf=m({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==is&&(is&&s.type==="mousemove"?(Ii=s.screenX-is.screenX,Df=s.screenY-is.screenY):Df=Ii=0,is=s),Ii)},movementY:function(s){return"movementY"in s?s.movementY:Df}}),Md=Mr(bf),bo=m({},bf,{dataTransfer:0}),Lv=Mr(bo),_v=m({},Wu,{relatedTarget:0}),Rd=Mr(_v),Fv=m({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),kv=Mr(Fv),Iv=m({},$l,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),eo=Mr(Iv),wC=m({},$l,{data:0}),no=Mr(wC),xC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Od(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=ja[s])?!!u[s]:!1}function Bf(){return Od}var ni=m({},Wu,{key:function(s){if(s.key){var u=xC[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=bd(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Hv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(s){return s.type==="keypress"?bd(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?bd(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ua=Mr(ni),h1=m({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nv=Mr(h1),d1=m({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),CC=Mr(d1),EC=m({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),SC=Mr(EC),Gv=m({},bf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ld=Mr(Gv),Xu=m({},$l,{newState:0,oldState:0}),TC=Mr(Xu),zv=[9,13,27,32],_d=ia&&"CompositionEvent"in window,Vl=null;ia&&"documentMode"in document&&(Vl=document.documentMode);var g1=ia&&"TextEvent"in window&&!Vl,p1=ia&&(!_d||Vl&&8<Vl&&11>=Vl),jv=" ",Fd=!1;function kd(s,u){switch(s){case"keyup":return zv.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wl=!1;function io(s,u){switch(s){case"compositionend":return Uv(u);case"keypress":return u.which!==32?null:(Fd=!0,jv);case"textInput":return s=u.data,s===jv&&Fd?null:s;default:return null}}function m1(s,u){if(Wl)return s==="compositionend"||!_d&&kd(s,u)?(s=Un(),kn=f1=za=null,Wl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return p1&&u.locale!=="ko"?null:u.data;default:return null}}var Pf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v1(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!Pf[s.type]:u==="textarea"}function y1(s,u,f,v){jl?Vu?Vu.push(v):Vu=[v]:jl=v,u=Sh(u,"onChange"),0<u.length&&(f=new Pd("onChange","change",null,f,v),s.push({event:f,listeners:u}))}var Mf=null,Rf=null;function AC(s){i2(s,0)}function Id(s){var u=Ga(s);if(Ht(u))return s}function $v(s,u){if(s==="change")return u}var Xl=!1;if(ia){var w1;if(ia){var x1="oninput"in document;if(!x1){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),x1=typeof Hd.oninput=="function"}w1=x1}else w1=!1;Xl=w1&&(!document.documentMode||9<document.documentMode)}function C1(){Mf&&(Mf.detachEvent("onpropertychange",ra),Rf=Mf=null)}function ra(s){if(s.propertyName==="value"&&Id(Rf)){var u=[];y1(u,Rf,s,l1(s)),Rv(AC,u)}}function Nd(s,u,f){s==="focusin"?(C1(),Mf=u,Rf=f,Mf.attachEvent("onpropertychange",ra)):s==="focusout"&&C1()}function DC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Id(Rf)}function bC(s,u){if(s==="click")return Id(u)}function BC(s,u){if(s==="input"||s==="change")return Id(u)}function qu(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var ai=typeof Object.is=="function"?Object.is:qu;function Yu(s,u){if(ai(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var f=Object.keys(s),v=Object.keys(u);if(f.length!==v.length)return!1;for(v=0;v<f.length;v++){var C=f[v];if(!le.call(u,C)||!ai(s[C],u[C]))return!1}return!0}function Vv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Wv(s,u){var f=Vv(s);s=0;for(var v;f;){if(f.nodeType===3){if(v=s+f.textContent.length,s<=u&&v>=u)return{node:f,offset:u-s};s=v}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=Vv(f)}}function Xv(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?Xv(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function qv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=Xt(s.document);u instanceof s.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)s=u.contentWindow;else break;u=Xt(s.document)}return u}function E1(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var Ku=ia&&"documentMode"in document&&11>=document.documentMode,yt=null,Ft=null,Mt=null,oe=!1;function Ne(s,u,f){var v=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;oe||yt==null||yt!==Xt(v)||(v=yt,"selectionStart"in v&&E1(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Mt&&Yu(Mt,v)||(Mt=v,v=Sh(Ft,"onSelect"),0<v.length&&(u=new Pd("onSelect","select",null,u,f),s.push({event:u,listeners:v}),u.target=yt)))}function rn(s,u){var f={};return f[s.toLowerCase()]=u.toLowerCase(),f["Webkit"+s]="webkit"+u,f["Moz"+s]="moz"+u,f}var ii={animationend:rn("Animation","AnimationEnd"),animationiteration:rn("Animation","AnimationIteration"),animationstart:rn("Animation","AnimationStart"),transitionrun:rn("Transition","TransitionRun"),transitionstart:rn("Transition","TransitionStart"),transitioncancel:rn("Transition","TransitionCancel"),transitionend:rn("Transition","TransitionEnd")},Rn={},Gd={};ia&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function ql(s){if(Rn[s])return Rn[s];if(!ii[s])return s;var u=ii[s],f;for(f in u)if(u.hasOwnProperty(f)&&f in Gd)return Rn[s]=u[f];return s}var ro=ql("animationend"),Of=ql("animationiteration"),Yv=ql("animationstart"),Zu=ql("transitionrun"),zd=ql("transitionstart"),jd=ql("transitioncancel"),bn=ql("transitionend"),Kv=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function Rr(s,u){Kv.set(s,u),to(u,[s])}var $d=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Bo=[],Qu=0,Ju=0;function rs(){for(var s=Qu,u=Ju=Qu=0;u<s;){var f=Bo[u];Bo[u++]=null;var v=Bo[u];Bo[u++]=null;var C=Bo[u];Bo[u++]=null;var S=Bo[u];if(Bo[u++]=null,v!==null&&C!==null){var L=v.pending;L===null?C.next=C:(C.next=L.next,L.next=C),v.pending=C}S!==0&&S1(f,C,S)}}function Yl(s,u,f,v){Bo[Qu++]=s,Bo[Qu++]=u,Bo[Qu++]=f,Bo[Qu++]=v,Ju|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function Vd(s,u,f,v){return Yl(s,u,f,v),Lf(s)}function Ls(s,u){return Yl(s,null,null,u),Lf(s)}function S1(s,u,f){s.lanes|=f;var v=s.alternate;v!==null&&(v.lanes|=f);for(var C=!1,S=s.return;S!==null;)S.childLanes|=f,v=S.alternate,v!==null&&(v.childLanes|=f),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(C=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,C&&u!==null&&(C=31-Ei(f),s=S.hiddenUpdates,v=s[C],v===null?s[C]=[u]:v.push(u),u.lane=f|536870912),S):null}function Lf(s){if(50<mh)throw mh=0,Ep=null,Error(r(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var oa={};function Zv(s,u,f,v){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(s,u,f,v){return new Zv(s,u,f,v)}function sa(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Po(s,u){var f=s.alternate;return f===null?(f=Yi(s.tag,u,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=u,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,u=s.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function Qv(s,u){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,u=f.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function Wd(s,u,f,v,C,S){var L=0;if(v=s,typeof s=="function")sa(s)&&(L=1);else if(typeof s=="string")L=uE(s,f,it.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case st:return s=Yi(31,f,u,C),s.elementType=st,s.lanes=S,s;case D:return Kl(f.children,C,S,u);case b:L=8,C|=24;break;case B:return s=Yi(12,f,u,C|2),s.elementType=B,s.lanes=S,s;case k:return s=Yi(13,f,u,C),s.elementType=k,s.lanes=S,s;case W:return s=Yi(19,f,u,C),s.elementType=W,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:L=10;break t;case A:L=9;break t;case R:L=11;break t;case U:L=14;break t;case nt:L=16,v=null;break t}L=29,f=Error(r(130,s===null?"null":typeof s,"")),v=null}return u=Yi(L,f,u,C),u.elementType=s,u.type=v,u.lanes=S,u}function Kl(s,u,f,v){return s=Yi(7,s,v,u),s.lanes=f,s}function tc(s,u,f){return s=Yi(6,s,null,u),s.lanes=f,s}function _f(s){var u=Yi(18,null,null,0);return u.stateNode=s,u}function Ff(s,u,f){return u=Yi(4,s.children!==null?s.children:[],s.key,u),u.lanes=f,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var Jv=new WeakMap;function oo(s,u){if(typeof s=="object"&&s!==null){var f=Jv.get(s);return f!==void 0?f:(u={value:s,source:u,stack:xe(u)},Jv.set(s,u),u)}return{value:s,source:u,stack:xe(u)}}var ec=[],nc=0,gi=null,Pi=0,Mo=[],Ro=0,aa=null,_s=1,Oo="";function so(s,u){ec[nc++]=Pi,ec[nc++]=gi,gi=s,Pi=u}function Xd(s,u,f){Mo[Ro++]=_s,Mo[Ro++]=Oo,Mo[Ro++]=aa,aa=s;var v=_s;s=Oo;var C=32-Ei(v)-1;v&=~(1<<C),f+=1;var S=32-Ei(u)+C;if(30<S){var L=C-C%5;S=(v&(1<<L)-1).toString(32),v>>=L,C-=L,_s=1<<32-Ei(u)+C|f<<C|v,Oo=S+s}else _s=1<<S|f<<C|v,Oo=s}function $a(s){s.return!==null&&(so(s,1),Xd(s,1,0))}function Zl(s){for(;s===gi;)gi=ec[--nc],ec[nc]=null,Pi=ec[--nc],ec[nc]=null;for(;s===aa;)aa=Mo[--Ro],Mo[Ro]=null,Oo=Mo[--Ro],Mo[Ro]=null,_s=Mo[--Ro],Mo[Ro]=null}function ic(s,u){Mo[Ro++]=_s,Mo[Ro++]=Oo,Mo[Ro++]=aa,_s=u.id,Oo=u.overflow,aa=s}var Mi=null,Bn=null,hn=!1,Va=null,Lo=!1,T1=Error(r(519));function Wa(s){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qa(oo(u,s)),T1}function kf(s){var u=s.stateNode,f=s.type,v=s.memoizedProps;switch(u[ki]=s,u[or]=v,f){case"dialog":sn("cancel",u),sn("close",u);break;case"iframe":case"object":case"embed":sn("load",u);break;case"video":case"audio":for(f=0;f<Eh.length;f++)sn(Eh[f],u);break;case"source":sn("error",u);break;case"img":case"image":case"link":sn("error",u),sn("load",u);break;case"details":sn("toggle",u);break;case"input":sn("invalid",u),ue(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":sn("invalid",u);break;case"textarea":sn("invalid",u),Zn(u,v.value,v.defaultValue,v.children)}f=v.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||v.suppressHydrationWarning===!0||s2(u.textContent,f)?(v.popover!=null&&(sn("beforetoggle",u),sn("toggle",u)),v.onScroll!=null&&sn("scroll",u),v.onScrollEnd!=null&&sn("scrollend",u),v.onClick!=null&&(u.onclick=ns),u=!0):u=!1,u||Wa(s,!0)}function rc(s){for(Mi=s.return;Mi;)switch(Mi.tag){case 5:case 31:case 13:Lo=!1;return;case 27:case 3:Lo=!0;return;default:Mi=Mi.return}}function Ql(s){if(s!==Mi)return!1;if(!hn)return rc(s),hn=!0,!1;var u=s.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||cl(s.type,s.memoizedProps)),f=!f),f&&Bn&&Wa(s),rc(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Bn=f2(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Bn=f2(s)}else u===27?(u=Bn,Oe(s.type)?(s=jp,jp=null,Bn=s):Bn=u):Bn=Mi?Go(s.stateNode.nextSibling):null;return!0}function q(){Bn=Mi=null,hn=!1}function Xa(){var s=Va;return s!==null&&(Hr===null?Hr=s:Hr.push.apply(Hr,s),Va=null),s}function qa(s){Va===null?Va=[s]:Va.push(s)}var Or=F(null),$e=null,la=null;function Ya(s,u,f){tt(Or,u._currentValue),u._currentValue=f}function ua(s){s._currentValue=Or.current,J(Or)}function ca(s,u,f){for(;s!==null;){var v=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),s===f)break;s=s.return}}function A1(s,u,f,v){var C=s.child;for(C!==null&&(C.return=s);C!==null;){var S=C.dependencies;if(S!==null){var L=C.child;S=S.firstContext;t:for(;S!==null;){var X=S;S=C;for(var at=0;at<u.length;at++)if(X.context===u[at]){S.lanes|=f,X=S.alternate,X!==null&&(X.lanes|=f),ca(S.return,f,s),v||(L=null);break t}S=X.next}}else if(C.tag===18){if(L=C.return,L===null)throw Error(r(341));L.lanes|=f,S=L.alternate,S!==null&&(S.lanes|=f),ca(L,f,s),L=null}else L=C.child;if(L!==null)L.return=C;else for(L=C;L!==null;){if(L===s){L=null;break}if(C=L.sibling,C!==null){C.return=L.return,L=C;break}L=L.return}C=L}}function oc(s,u,f,v){s=null;for(var C=u,S=!1;C!==null;){if(!S){if((C.flags&524288)!==0)S=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var L=C.alternate;if(L===null)throw Error(r(387));if(L=L.memoizedProps,L!==null){var X=C.type;ai(C.pendingProps.value,L.value)||(s!==null?s.push(X):s=[X])}}else if(C===Lt.current){if(L=C.alternate,L===null)throw Error(r(387));L.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(s!==null?s.push(kc):s=[kc])}C=C.return}s!==null&&A1(u,s,f,v),u.flags|=262144}function qd(s){for(s=s.firstContext;s!==null;){if(!ai(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jl(s){$e=s,la=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ki(s){return ty($e,s)}function _o(s,u){return $e===null&&Jl(s),ty(s,u)}function ty(s,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},la===null){if(s===null)throw Error(r(308));la=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else la=la.next=u;return f}var PC=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(f,v){s.push(v)}};this.abort=function(){u.aborted=!0,s.forEach(function(f){return f()})}},MC=e.unstable_scheduleCallback,RC=e.unstable_NormalPriority,Ri={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function os(){return{controller:new PC,data:new Map,refCount:0}}function If(s){s.refCount--,s.refCount===0&&MC(RC,function(){s.controller.abort()})}var Hf=null,D1=0,sc=0,ac=null;function tu(s,u){if(Hf===null){var f=Hf=[];D1=0,sc=mo(),ac={status:"pending",value:void 0,then:function(v){f.push(v)}}}return D1++,u.then(ey,ey),u}function ey(){if(--D1===0&&Hf!==null){ac!==null&&(ac.status="fulfilled");var s=Hf;Hf=null,sc=0,ac=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function OC(s,u){var f=[],v={status:"pending",value:null,reason:null,then:function(C){f.push(C)}};return s.then(function(){v.status="fulfilled",v.value=u;for(var C=0;C<f.length;C++)(0,f[C])(u)},function(C){for(v.status="rejected",v.reason=C,C=0;C<f.length;C++)(0,f[C])(void 0)}),v}var Fo=P.S;P.S=function(s,u){Ny=Fn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&tu(s,u),Fo!==null&&Fo(s,u)};var eu=F(null);function b1(){var s=eu.current;return s!==null?s:Vn.pooledCache}function Yd(s,u){u===null?tt(eu,eu.current):tt(eu,u.pool)}function ny(){var s=b1();return s===null?null:{parent:Ri._currentValue,pool:s}}var lc=Error(r(460)),Kd=Error(r(474)),Nf=Error(r(542)),Zd={then:function(){}};function iy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qd(s,u,f){switch(f=s[f],f===void 0?s.push(u):f!==u&&(u.then(ns,ns),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,B1(s),s;default:if(typeof u.status=="string")u.then(ns,ns);else{if(s=Vn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=u,s.status="pending",s.then(function(v){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=v}},function(v){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,B1(s),s}throw Fs=u,lc}}function ss(s){try{var u=s._init;return u(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Fs=f,lc):f}}var Fs=null;function ry(){if(Fs===null)throw Error(r(459));var s=Fs;return Fs=null,s}function B1(s){if(s===lc||s===Nf)throw Error(r(483))}var uc=null,ao=0;function cc(s){var u=ao;return ao+=1,uc===null&&(uc=[]),Qd(uc,s,u)}function as(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function yr(s,u){throw u.$$typeof===w?Error(r(525)):(s=Object.prototype.toString.call(u),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function oy(s){function u(Ct,dt){if(s){var Dt=Ct.deletions;Dt===null?(Ct.deletions=[dt],Ct.flags|=16):Dt.push(dt)}}function f(Ct,dt){if(!s)return null;for(;dt!==null;)u(Ct,dt),dt=dt.sibling;return null}function v(Ct){for(var dt=new Map;Ct!==null;)Ct.key!==null?dt.set(Ct.key,Ct):dt.set(Ct.index,Ct),Ct=Ct.sibling;return dt}function C(Ct,dt){return Ct=Po(Ct,dt),Ct.index=0,Ct.sibling=null,Ct}function S(Ct,dt,Dt){return Ct.index=Dt,s?(Dt=Ct.alternate,Dt!==null?(Dt=Dt.index,Dt<dt?(Ct.flags|=67108866,dt):Dt):(Ct.flags|=67108866,dt)):(Ct.flags|=1048576,dt)}function L(Ct){return s&&Ct.alternate===null&&(Ct.flags|=67108866),Ct}function X(Ct,dt,Dt,Gt){return dt===null||dt.tag!==6?(dt=tc(Dt,Ct.mode,Gt),dt.return=Ct,dt):(dt=C(dt,Dt),dt.return=Ct,dt)}function at(Ct,dt,Dt,Gt){var Ee=Dt.type;return Ee===D?kt(Ct,dt,Dt.props.children,Gt,Dt.key):dt!==null&&(dt.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===nt&&ss(Ee)===dt.type)?(dt=C(dt,Dt.props),as(dt,Dt),dt.return=Ct,dt):(dt=Wd(Dt.type,Dt.key,Dt.props,null,Ct.mode,Gt),as(dt,Dt),dt.return=Ct,dt)}function bt(Ct,dt,Dt,Gt){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==Dt.containerInfo||dt.stateNode.implementation!==Dt.implementation?(dt=Ff(Dt,Ct.mode,Gt),dt.return=Ct,dt):(dt=C(dt,Dt.children||[]),dt.return=Ct,dt)}function kt(Ct,dt,Dt,Gt,Ee){return dt===null||dt.tag!==7?(dt=Kl(Dt,Ct.mode,Gt,Ee),dt.return=Ct,dt):(dt=C(dt,Dt),dt.return=Ct,dt)}function zt(Ct,dt,Dt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return dt=tc(""+dt,Ct.mode,Dt),dt.return=Ct,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case x:return Dt=Wd(dt.type,dt.key,dt.props,null,Ct.mode,Dt),as(Dt,dt),Dt.return=Ct,Dt;case T:return dt=Ff(dt,Ct.mode,Dt),dt.return=Ct,dt;case nt:return dt=ss(dt),zt(Ct,dt,Dt)}if(V(dt)||ct(dt))return dt=Kl(dt,Ct.mode,Dt,null),dt.return=Ct,dt;if(typeof dt.then=="function")return zt(Ct,cc(dt),Dt);if(dt.$$typeof===I)return zt(Ct,_o(Ct,dt),Dt);yr(Ct,dt)}return null}function Bt(Ct,dt,Dt,Gt){var Ee=dt!==null?dt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Ee!==null?null:X(Ct,dt,""+Dt,Gt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case x:return Dt.key===Ee?at(Ct,dt,Dt,Gt):null;case T:return Dt.key===Ee?bt(Ct,dt,Dt,Gt):null;case nt:return Dt=ss(Dt),Bt(Ct,dt,Dt,Gt)}if(V(Dt)||ct(Dt))return Ee!==null?null:kt(Ct,dt,Dt,Gt,null);if(typeof Dt.then=="function")return Bt(Ct,dt,cc(Dt),Gt);if(Dt.$$typeof===I)return Bt(Ct,dt,_o(Ct,Dt),Gt);yr(Ct,Dt)}return null}function Ot(Ct,dt,Dt,Gt,Ee){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return Ct=Ct.get(Dt)||null,X(dt,Ct,""+Gt,Ee);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case x:return Ct=Ct.get(Gt.key===null?Dt:Gt.key)||null,at(dt,Ct,Gt,Ee);case T:return Ct=Ct.get(Gt.key===null?Dt:Gt.key)||null,bt(dt,Ct,Gt,Ee);case nt:return Gt=ss(Gt),Ot(Ct,dt,Dt,Gt,Ee)}if(V(Gt)||ct(Gt))return Ct=Ct.get(Dt)||null,kt(dt,Ct,Gt,Ee,null);if(typeof Gt.then=="function")return Ot(Ct,dt,Dt,cc(Gt),Ee);if(Gt.$$typeof===I)return Ot(Ct,dt,Dt,_o(dt,Gt),Ee);yr(dt,Gt)}return null}function ce(Ct,dt,Dt,Gt){for(var Ee=null,Cn=null,pe=dt,Ke=dt=0,fn=null;pe!==null&&Ke<Dt.length;Ke++){pe.index>Ke?(fn=pe,pe=null):fn=pe.sibling;var En=Bt(Ct,pe,Dt[Ke],Gt);if(En===null){pe===null&&(pe=fn);break}s&&pe&&En.alternate===null&&u(Ct,pe),dt=S(En,dt,Ke),Cn===null?Ee=En:Cn.sibling=En,Cn=En,pe=fn}if(Ke===Dt.length)return f(Ct,pe),hn&&so(Ct,Ke),Ee;if(pe===null){for(;Ke<Dt.length;Ke++)pe=zt(Ct,Dt[Ke],Gt),pe!==null&&(dt=S(pe,dt,Ke),Cn===null?Ee=pe:Cn.sibling=pe,Cn=pe);return hn&&so(Ct,Ke),Ee}for(pe=v(pe);Ke<Dt.length;Ke++)fn=Ot(pe,Ct,Ke,Dt[Ke],Gt),fn!==null&&(s&&fn.alternate!==null&&pe.delete(fn.key===null?Ke:fn.key),dt=S(fn,dt,Ke),Cn===null?Ee=fn:Cn.sibling=fn,Cn=fn);return s&&pe.forEach(function(ml){return u(Ct,ml)}),hn&&so(Ct,Ke),Ee}function Be(Ct,dt,Dt,Gt){if(Dt==null)throw Error(r(151));for(var Ee=null,Cn=null,pe=dt,Ke=dt=0,fn=null,En=Dt.next();pe!==null&&!En.done;Ke++,En=Dt.next()){pe.index>Ke?(fn=pe,pe=null):fn=pe.sibling;var ml=Bt(Ct,pe,En.value,Gt);if(ml===null){pe===null&&(pe=fn);break}s&&pe&&ml.alternate===null&&u(Ct,pe),dt=S(ml,dt,Ke),Cn===null?Ee=ml:Cn.sibling=ml,Cn=ml,pe=fn}if(En.done)return f(Ct,pe),hn&&so(Ct,Ke),Ee;if(pe===null){for(;!En.done;Ke++,En=Dt.next())En=zt(Ct,En.value,Gt),En!==null&&(dt=S(En,dt,Ke),Cn===null?Ee=En:Cn.sibling=En,Cn=En);return hn&&so(Ct,Ke),Ee}for(pe=v(pe);!En.done;Ke++,En=Dt.next())En=Ot(pe,Ct,Ke,En.value,Gt),En!==null&&(s&&En.alternate!==null&&pe.delete(En.key===null?Ke:En.key),dt=S(En,dt,Ke),Cn===null?Ee=En:Cn.sibling=En,Cn=En);return s&&pe.forEach(function(vE){return u(Ct,vE)}),hn&&so(Ct,Ke),Ee}function Nn(Ct,dt,Dt,Gt){if(typeof Dt=="object"&&Dt!==null&&Dt.type===D&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case x:t:{for(var Ee=Dt.key;dt!==null;){if(dt.key===Ee){if(Ee=Dt.type,Ee===D){if(dt.tag===7){f(Ct,dt.sibling),Gt=C(dt,Dt.props.children),Gt.return=Ct,Ct=Gt;break t}}else if(dt.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===nt&&ss(Ee)===dt.type){f(Ct,dt.sibling),Gt=C(dt,Dt.props),as(Gt,Dt),Gt.return=Ct,Ct=Gt;break t}f(Ct,dt);break}else u(Ct,dt);dt=dt.sibling}Dt.type===D?(Gt=Kl(Dt.props.children,Ct.mode,Gt,Dt.key),Gt.return=Ct,Ct=Gt):(Gt=Wd(Dt.type,Dt.key,Dt.props,null,Ct.mode,Gt),as(Gt,Dt),Gt.return=Ct,Ct=Gt)}return L(Ct);case T:t:{for(Ee=Dt.key;dt!==null;){if(dt.key===Ee)if(dt.tag===4&&dt.stateNode.containerInfo===Dt.containerInfo&&dt.stateNode.implementation===Dt.implementation){f(Ct,dt.sibling),Gt=C(dt,Dt.children||[]),Gt.return=Ct,Ct=Gt;break t}else{f(Ct,dt);break}else u(Ct,dt);dt=dt.sibling}Gt=Ff(Dt,Ct.mode,Gt),Gt.return=Ct,Ct=Gt}return L(Ct);case nt:return Dt=ss(Dt),Nn(Ct,dt,Dt,Gt)}if(V(Dt))return ce(Ct,dt,Dt,Gt);if(ct(Dt)){if(Ee=ct(Dt),typeof Ee!="function")throw Error(r(150));return Dt=Ee.call(Dt),Be(Ct,dt,Dt,Gt)}if(typeof Dt.then=="function")return Nn(Ct,dt,cc(Dt),Gt);if(Dt.$$typeof===I)return Nn(Ct,dt,_o(Ct,Dt),Gt);yr(Ct,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,dt!==null&&dt.tag===6?(f(Ct,dt.sibling),Gt=C(dt,Dt),Gt.return=Ct,Ct=Gt):(f(Ct,dt),Gt=tc(Dt,Ct.mode,Gt),Gt.return=Ct,Ct=Gt),L(Ct)):f(Ct,dt)}return function(Ct,dt,Dt,Gt){try{ao=0;var Ee=Nn(Ct,dt,Dt,Gt);return uc=null,Ee}catch(pe){if(pe===lc||pe===Nf)throw pe;var Cn=Yi(29,pe,null,Ct.mode);return Cn.lanes=Gt,Cn.return=Ct,Cn}finally{}}}var Ka=oy(!0),P1=oy(!1),ko=!1;function ks(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jd(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Za(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ls(s,u,f){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Dn&2)!==0){var C=v.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),v.pending=u,u=Lf(s),S1(s,null,f),u}return Yl(s,v,u,f),Lf(s)}function Gf(s,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var v=u.lanes;v&=s.pendingLanes,f|=v,u.lanes=f,xd(s,f)}}function t0(s,u){var f=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,f===v)){var C=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var L={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?C=S=L:S=S.next=L,f=f.next}while(f!==null);S===null?C=S=u:S=S.next=u}else C=S=u;f={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:S,shared:v.shared,callbacks:v.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=u}var Hi=!1;function nu(){if(Hi){var s=ac;if(s!==null)throw s}}function fc(s,u,f,v){Hi=!1;var C=s.updateQueue;ko=!1;var S=C.firstBaseUpdate,L=C.lastBaseUpdate,X=C.shared.pending;if(X!==null){C.shared.pending=null;var at=X,bt=at.next;at.next=null,L===null?S=bt:L.next=bt,L=at;var kt=s.alternate;kt!==null&&(kt=kt.updateQueue,X=kt.lastBaseUpdate,X!==L&&(X===null?kt.firstBaseUpdate=bt:X.next=bt,kt.lastBaseUpdate=at))}if(S!==null){var zt=C.baseState;L=0,kt=bt=at=null,X=S;do{var Bt=X.lane&-536870913,Ot=Bt!==X.lane;if(Ot?(cn&Bt)===Bt:(v&Bt)===Bt){Bt!==0&&Bt===sc&&(Hi=!0),kt!==null&&(kt=kt.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});t:{var ce=s,Be=X;Bt=u;var Nn=f;switch(Be.tag){case 1:if(ce=Be.payload,typeof ce=="function"){zt=ce.call(Nn,zt,Bt);break t}zt=ce;break t;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=Be.payload,Bt=typeof ce=="function"?ce.call(Nn,zt,Bt):ce,Bt==null)break t;zt=m({},zt,Bt);break t;case 2:ko=!0}}Bt=X.callback,Bt!==null&&(s.flags|=64,Ot&&(s.flags|=8192),Ot=C.callbacks,Ot===null?C.callbacks=[Bt]:Ot.push(Bt))}else Ot={lane:Bt,tag:X.tag,payload:X.payload,callback:X.callback,next:null},kt===null?(bt=kt=Ot,at=zt):kt=kt.next=Ot,L|=Bt;if(X=X.next,X===null){if(X=C.shared.pending,X===null)break;Ot=X,X=Ot.next,Ot.next=null,C.lastBaseUpdate=Ot,C.shared.pending=null}}while(!0);kt===null&&(at=zt),C.baseState=at,C.firstBaseUpdate=bt,C.lastBaseUpdate=kt,S===null&&(C.shared.lanes=0),ol|=L,s.lanes=L,s.memoizedState=zt}}function us(s,u){if(typeof s!="function")throw Error(r(191,s));s.call(u)}function e0(s,u){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)us(f[s],u)}var fa=F(null),Is=F(0);function M1(s,u){s=ps,tt(Is,s),tt(fa,u),ps=s|u.baseLanes}function Zi(){tt(Is,ps),tt(fa,fa.current)}function zf(){ps=Is.current,J(fa),J(Is)}var lo=F(null),Io=null;function Qa(s){var u=s.alternate;tt(Ti,Ti.current&1),tt(lo,s),Io===null&&(u===null||fa.current!==null||u.memoizedState!==null)&&(Io=s)}function jf(s){tt(Ti,Ti.current),tt(lo,s),Io===null&&(Io=s)}function sy(s){s.tag===22?(tt(Ti,Ti.current),tt(lo,s),Io===null&&(Io=s)):Ho()}function Ho(){tt(Ti,Ti.current),tt(lo,lo.current)}function Lr(s){J(lo),Io===s&&(Io=null),J(Ti)}var Ti=F(0);function n0(s){for(var u=s;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||N0(f)||Mc(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var uo=0,Ve=null,In=null,pi=null,Uf=!1,hc=!1,iu=!1,i0=0,dc=0,Ja=null,LC=0;function ri(){throw Error(r(321))}function r0(s,u){if(u===null)return!1;for(var f=0;f<u.length&&f<s.length;f++)if(!ai(s[f],u[f]))return!1;return!0}function o0(s,u,f,v,C,S){return uo=S,Ve=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,P.H=s===null||s.memoizedState===null?vy:g0,iu=!1,S=f(v,C),iu=!1,hc&&(S=$f(u,f,v,C)),R1(s),S}function R1(s){P.H=el;var u=In!==null&&In.next!==null;if(uo=0,pi=In=Ve=null,Uf=!1,dc=0,Ja=null,u)throw Error(r(300));s===null||li||(s=s.dependencies,s!==null&&qd(s)&&(li=!0))}function $f(s,u,f,v){Ve=s;var C=0;do{if(hc&&(Ja=null),dc=0,hc=!1,25<=C)throw Error(r(301));if(C+=1,pi=In=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}P.H=Qf,S=u(f,v)}while(hc);return S}function _C(){var s=P.H,u=s.useState()[0];return u=typeof u.then=="function"?pc(u):u,s=s.useState()[0],(In!==null?In.memoizedState:null)!==s&&(Ve.flags|=1024),u}function s0(){var s=i0!==0;return i0=0,s}function a0(s,u,f){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~f}function O1(s){if(Uf){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Uf=!1}uo=0,pi=In=Ve=null,hc=!1,dc=i0=0,Ja=null}function sr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Ve.memoizedState=pi=s:pi=pi.next=s,pi}function Ai(){if(In===null){var s=Ve.alternate;s=s!==null?s.memoizedState:null}else s=In.next;var u=pi===null?Ve.memoizedState:pi.next;if(u!==null)pi=u,In=s;else{if(s===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));In=s,s={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},pi===null?Ve.memoizedState=pi=s:pi=pi.next=s}return pi}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(s){var u=dc;return dc+=1,Ja===null&&(Ja=[]),s=Qd(Ja,s,u),u=Ve,(pi===null?u.memoizedState:pi.next)===null&&(u=u.alternate,P.H=u===null||u.memoizedState===null?vy:g0),s}function mc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return pc(s);if(s.$$typeof===I)return Ki(s)}throw Error(r(438,String(s)))}function L1(s){var u=null,f=Ve.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var v=Ve.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=gc(),Ve.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(s),v=0;v<s;v++)f[v]=ft;return u.index++,f}function cs(s,u){return typeof u=="function"?u(s):u}function We(s){var u=Ai();return _1(u,In,s)}function _1(s,u,f){var v=s.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=f;var C=s.baseQueue,S=v.pending;if(S!==null){if(C!==null){var L=C.next;C.next=S.next,S.next=L}u.baseQueue=C=S,v.pending=null}if(S=s.baseState,C===null)s.memoizedState=S;else{u=C.next;var X=L=null,at=null,bt=u,kt=!1;do{var zt=bt.lane&-536870913;if(zt!==bt.lane?(cn&zt)===zt:(uo&zt)===zt){var Bt=bt.revertLane;if(Bt===0)at!==null&&(at=at.next={lane:0,revertLane:0,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),zt===sc&&(kt=!0);else if((uo&Bt)===Bt){bt=bt.next,Bt===sc&&(kt=!0);continue}else zt={lane:0,revertLane:bt.revertLane,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},at===null?(X=at=zt,L=S):at=at.next=zt,Ve.lanes|=Bt,ol|=Bt;zt=bt.action,iu&&f(S,zt),S=bt.hasEagerState?bt.eagerState:f(S,zt)}else Bt={lane:zt,revertLane:bt.revertLane,gesture:bt.gesture,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},at===null?(X=at=Bt,L=S):at=at.next=Bt,Ve.lanes|=zt,ol|=zt;bt=bt.next}while(bt!==null&&bt!==u);if(at===null?L=S:at.next=X,!ai(S,s.memoizedState)&&(li=!0,kt&&(f=ac,f!==null)))throw f;s.memoizedState=S,s.baseState=L,s.baseQueue=at,v.lastRenderedState=S}return C===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function F1(s){var u=Ai(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var v=f.dispatch,C=f.pending,S=u.memoizedState;if(C!==null){f.pending=null;var L=C=C.next;do S=s(S,L.action),L=L.next;while(L!==C);ai(S,u.memoizedState)||(li=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),f.lastRenderedState=S}return[S,v]}function vc(s,u,f){var v=Ve,C=Ai(),S=hn;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=u();var L=!ai((In||C).memoizedState,f);if(L&&(C.memoizedState=f,li=!0),C=C.queue,qf(ly.bind(null,v,C,s),[s]),C.getSnapshot!==u||L||pi!==null&&pi.memoizedState.tag&1){if(v.flags|=2048,fo(9,{destroy:void 0},ay.bind(null,v,C,f,u),null),Vn===null)throw Error(r(349));S||(uo&127)!==0||k1(v,u,f)}return f}function k1(s,u,f){s.flags|=16384,s={getSnapshot:u,value:f},u=Ve.updateQueue,u===null?(u=gc(),Ve.updateQueue=u,u.stores=[s]):(f=u.stores,f===null?u.stores=[s]:f.push(s))}function ay(s,u,f,v){u.value=f,u.getSnapshot=v,co(u)&&uy(s)}function ly(s,u,f){return f(function(){co(u)&&uy(s)})}function co(s){var u=s.getSnapshot;s=s.value;try{var f=u();return!ai(s,f)}catch{return!0}}function uy(s){var u=Ls(s,2);u!==null&&Nr(u,s,2)}function yc(s){var u=sr();if(typeof s=="function"){var f=s;if(s=f(),iu){Pr(!0);try{f()}finally{Pr(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:s},u}function l0(s,u,f,v){return s.baseState=f,_1(s,In,typeof v=="function"?v:cs)}function cy(s,u,f,v,C){if(Kf(s))throw Error(r(485));if(s=u.action,s!==null){var S={payload:C,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){S.listeners.push(L)}};P.T!==null?f(!0):S.isTransition=!1,v(S),f=u.pending,f===null?(S.next=u.pending=S,I1(u,S)):(S.next=f.next,u.pending=f.next=S)}}function I1(s,u){var f=u.action,v=u.payload,C=s.state;if(u.isTransition){var S=P.T,L={};P.T=L;try{var X=f(C,v),at=P.S;at!==null&&at(L,X),_r(s,u,X)}catch(bt){Vf(s,u,bt)}finally{S!==null&&L.types!==null&&(S.types=L.types),P.T=S}}else try{S=f(C,v),_r(s,u,S)}catch(bt){Vf(s,u,bt)}}function _r(s,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(v){ha(s,u,v)},function(v){return Vf(s,u,v)}):ha(s,u,f)}function ha(s,u,f){u.status="fulfilled",u.value=f,H1(u),s.state=f,u=s.pending,u!==null&&(f=u.next,f===u?s.pending=null:(f=f.next,u.next=f,I1(s,f)))}function Vf(s,u,f){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=f,H1(u),u=u.next;while(u!==v)}s.action=null}function H1(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function Wf(s,u){return u}function N1(s,u){if(hn){var f=Vn.formState;if(f!==null){t:{var v=Ve;if(hn){if(Bn){e:{for(var C=Bn,S=Lo;C.nodeType!==8;){if(!S){C=null;break e}if(C=Go(C.nextSibling),C===null){C=null;break e}}S=C.data,C=S==="F!"||S==="F"?C:null}if(C){Bn=Go(C.nextSibling),v=C.data==="F!";break t}}Wa(v)}v=!1}v&&(u=f[0])}}return f=sr(),f.memoizedState=f.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:u},f.queue=v,f=K1.bind(null,Ve,v),v.dispatch=f,v=yc(!1),S=xc.bind(null,Ve,!1,v.queue),v=sr(),C={state:u,dispatch:null,action:s,pending:null},v.queue=C,f=cy.bind(null,Ve,C,S,f),C.dispatch=f,v.memoizedState=s,[u,f,!1]}function u0(s){var u=Ai();return G1(u,In,s)}function G1(s,u,f){if(u=_1(s,u,Wf)[0],s=We(cs)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=pc(u)}catch(L){throw L===lc?Nf:L}else v=u;u=Ai();var C=u.queue,S=C.dispatch;return f!==u.memoizedState&&(Ve.flags|=2048,fo(9,{destroy:void 0},z1.bind(null,C,f),null)),[v,S,s]}function z1(s,u){s.action=u}function c0(s){var u=Ai(),f=In;if(f!==null)return G1(u,f,s);Ai(),u=u.memoizedState,f=Ai();var v=f.queue.dispatch;return f.memoizedState=s,[u,v,!1]}function fo(s,u,f,v){return s={tag:s,create:f,deps:v,inst:u,next:null},u=Ve.updateQueue,u===null&&(u=gc(),Ve.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=s.next=s:(v=f.next,f.next=s,s.next=v,u.lastEffect=s),s}function fy(){return Ai().memoizedState}function fs(s,u,f,v){var C=sr();Ve.flags|=s,C.memoizedState=fo(1|u,{destroy:void 0},f,v===void 0?null:v)}function Xf(s,u,f,v){var C=Ai();v=v===void 0?null:v;var S=C.memoizedState.inst;In!==null&&v!==null&&r0(v,In.memoizedState.deps)?C.memoizedState=fo(u,S,f,v):(Ve.flags|=s,C.memoizedState=fo(1|u,S,f,v))}function j1(s,u){fs(8390656,8,s,u)}function qf(s,u){Xf(2048,8,s,u)}function FC(s){Ve.flags|=4;var u=Ve.updateQueue;if(u===null)u=gc(),Ve.updateQueue=u,u.events=[s];else{var f=u.events;f===null?u.events=[s]:f.push(s)}}function hy(s){var u=Ai().memoizedState;return FC({ref:u,nextImpl:s}),function(){if((Dn&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function dy(s,u){return Xf(4,2,s,u)}function U1(s,u){return Xf(4,4,s,u)}function $1(s,u){if(typeof u=="function"){s=s();var f=u(s);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function gy(s,u,f){f=f!=null?f.concat([s]):null,Xf(4,4,$1.bind(null,u,s),f)}function f0(){}function V1(s,u){var f=Ai();u=u===void 0?null:u;var v=f.memoizedState;return u!==null&&r0(u,v[1])?v[0]:(f.memoizedState=[s,u],s)}function wr(s,u){var f=Ai();u=u===void 0?null:u;var v=f.memoizedState;if(u!==null&&r0(u,v[1]))return v[0];if(v=s(),iu){Pr(!0);try{s()}finally{Pr(!1)}}return f.memoizedState=[v,u],v}function No(s,u,f){return f===void 0||(uo&1073741824)!==0&&(cn&261930)===0?s.memoizedState=u:(s.memoizedState=f,s=zy(),Ve.lanes|=s,ol|=s,f)}function py(s,u,f,v){return ai(f,u)?f:fa.current!==null?(s=No(s,f,v),ai(s,u)||(li=!0),s):(uo&42)===0||(uo&1073741824)!==0&&(cn&261930)===0?(li=!0,s.memoizedState=f):(s=zy(),Ve.lanes|=s,ol|=s,u)}function my(s,u,f,v,C){var S=_.p;_.p=S!==0&&8>S?S:8;var L=P.T,X={};P.T=X,xc(s,!1,u,f);try{var at=C(),bt=P.S;if(bt!==null&&bt(X,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var kt=OC(at,v);wc(s,u,kt,po(s))}else wc(s,u,v,po(s))}catch(zt){wc(s,u,{then:function(){},status:"rejected",reason:zt},po())}finally{_.p=S,L!==null&&X.types!==null&&(L.types=X.types),P.T=L}}function h0(){}function tl(s,u,f,v){if(s.tag!==5)throw Error(r(476));var C=W1(s).queue;my(s,C,u,N,f===null?h0:function(){return X1(s),f(v)})}function W1(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:N},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:f},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function X1(s){var u=W1(s);u.next===null&&(u=s.alternate.memoizedState),wc(s,u.next.queue,{},po())}function q1(){return Ki(kc)}function Y1(){return Ai().memoizedState}function ru(){return Ai().memoizedState}function Yf(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var f=po();s=Za(f);var v=ls(u,s,f);v!==null&&(Nr(v,u,f),Gf(v,u,f)),u={cache:os()},s.payload=u;return}u=u.return}}function kC(s,u,f){var v=po();f={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Kf(s)?Zf(u,f):(f=Vd(s,u,f,v),f!==null&&(Nr(f,s,v),d0(f,u,v)))}function K1(s,u,f){var v=po();wc(s,u,f,v)}function wc(s,u,f,v){var C={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Kf(s))Zf(u,C);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var L=u.lastRenderedState,X=S(L,f);if(C.hasEagerState=!0,C.eagerState=X,ai(X,L))return Yl(s,u,C,0),Vn===null&&rs(),!1}catch{}finally{}if(f=Vd(s,u,C,v),f!==null)return Nr(f,s,v),d0(f,u,v),!0}return!1}function xc(s,u,f,v){if(v={lane:2,revertLane:mo(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Kf(s)){if(u)throw Error(r(479))}else u=Vd(s,f,v,2),u!==null&&Nr(u,s,2)}function Kf(s){var u=s.alternate;return s===Ve||u!==null&&u===Ve}function Zf(s,u){hc=Uf=!0;var f=s.pending;f===null?u.next=u:(u.next=f.next,f.next=u),s.pending=u}function d0(s,u,f){if((f&4194048)!==0){var v=u.lanes;v&=s.pendingLanes,f|=v,u.lanes=f,xd(s,f)}}var el={readContext:Ki,use:mc,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useLayoutEffect:ri,useInsertionEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useSyncExternalStore:ri,useId:ri,useHostTransitionStatus:ri,useFormState:ri,useActionState:ri,useOptimistic:ri,useMemoCache:ri,useCacheRefresh:ri};el.useEffectEvent=ri;var vy={readContext:Ki,use:mc,useCallback:function(s,u){return sr().memoizedState=[s,u===void 0?null:u],s},useContext:Ki,useEffect:j1,useImperativeHandle:function(s,u,f){f=f!=null?f.concat([s]):null,fs(4194308,4,$1.bind(null,u,s),f)},useLayoutEffect:function(s,u){return fs(4194308,4,s,u)},useInsertionEffect:function(s,u){fs(4,2,s,u)},useMemo:function(s,u){var f=sr();u=u===void 0?null:u;var v=s();if(iu){Pr(!0);try{s()}finally{Pr(!1)}}return f.memoizedState=[v,u],v},useReducer:function(s,u,f){var v=sr();if(f!==void 0){var C=f(u);if(iu){Pr(!0);try{f(u)}finally{Pr(!1)}}}else C=u;return v.memoizedState=v.baseState=C,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:C},v.queue=s,s=s.dispatch=kC.bind(null,Ve,s),[v.memoizedState,s]},useRef:function(s){var u=sr();return s={current:s},u.memoizedState=s},useState:function(s){s=yc(s);var u=s.queue,f=K1.bind(null,Ve,u);return u.dispatch=f,[s.memoizedState,f]},useDebugValue:f0,useDeferredValue:function(s,u){var f=sr();return No(f,s,u)},useTransition:function(){var s=yc(!1);return s=my.bind(null,Ve,s.queue,!0,!1),sr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,f){var v=Ve,C=sr();if(hn){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),Vn===null)throw Error(r(349));(cn&127)!==0||k1(v,u,f)}C.memoizedState=f;var S={value:f,getSnapshot:u};return C.queue=S,j1(ly.bind(null,v,S,s),[s]),v.flags|=2048,fo(9,{destroy:void 0},ay.bind(null,v,S,f,u),null),f},useId:function(){var s=sr(),u=Vn.identifierPrefix;if(hn){var f=Oo,v=_s;f=(v&~(1<<32-Ei(v)-1)).toString(32)+f,u="_"+u+"R_"+f,f=i0++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=LC++,u="_"+u+"r_"+f.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:q1,useFormState:N1,useActionState:N1,useOptimistic:function(s){var u=sr();u.memoizedState=u.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=xc.bind(null,Ve,!0,f),f.dispatch=u,[s,u]},useMemoCache:L1,useCacheRefresh:function(){return sr().memoizedState=Yf.bind(null,Ve)},useEffectEvent:function(s){var u=sr(),f={impl:s};return u.memoizedState=f,function(){if((Dn&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},g0={readContext:Ki,use:mc,useCallback:V1,useContext:Ki,useEffect:qf,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:U1,useMemo:wr,useReducer:We,useRef:fy,useState:function(){return We(cs)},useDebugValue:f0,useDeferredValue:function(s,u){var f=Ai();return py(f,In.memoizedState,s,u)},useTransition:function(){var s=We(cs)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:pc(s),u]},useSyncExternalStore:vc,useId:Y1,useHostTransitionStatus:q1,useFormState:u0,useActionState:u0,useOptimistic:function(s,u){var f=Ai();return l0(f,In,s,u)},useMemoCache:L1,useCacheRefresh:ru};g0.useEffectEvent=hy;var Qf={readContext:Ki,use:mc,useCallback:V1,useContext:Ki,useEffect:qf,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:U1,useMemo:wr,useReducer:F1,useRef:fy,useState:function(){return F1(cs)},useDebugValue:f0,useDeferredValue:function(s,u){var f=Ai();return In===null?No(f,s,u):py(f,In.memoizedState,s,u)},useTransition:function(){var s=F1(cs)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:pc(s),u]},useSyncExternalStore:vc,useId:Y1,useHostTransitionStatus:q1,useFormState:c0,useActionState:c0,useOptimistic:function(s,u){var f=Ai();return In!==null?l0(f,In,s,u):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:L1,useCacheRefresh:ru};Qf.useEffectEvent=hy;function p0(s,u,f,v){u=s.memoizedState,f=f(v,u),f=f==null?u:m({},u,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Jf={enqueueSetState:function(s,u,f){s=s._reactInternals;var v=po(),C=Za(v);C.payload=u,f!=null&&(C.callback=f),u=ls(s,C,v),u!==null&&(Nr(u,s,v),Gf(u,s,v))},enqueueReplaceState:function(s,u,f){s=s._reactInternals;var v=po(),C=Za(v);C.tag=1,C.payload=u,f!=null&&(C.callback=f),u=ls(s,C,v),u!==null&&(Nr(u,s,v),Gf(u,s,v))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var f=po(),v=Za(f);v.tag=2,u!=null&&(v.callback=u),u=ls(s,v,f),u!==null&&(Nr(u,s,f),Gf(u,s,f))}};function yy(s,u,f,v,C,S,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,S,L):u.prototype&&u.prototype.isPureReactComponent?!Yu(f,v)||!Yu(C,S):!0}function Z1(s,u,f,v){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,v),u.state!==s&&Jf.enqueueReplaceState(u,u.state,null)}function xr(s,u){var f=u;if("ref"in u){f={};for(var v in u)v!=="ref"&&(f[v]=u[v])}if(s=s.defaultProps){f===u&&(f=m({},f));for(var C in s)f[C]===void 0&&(f[C]=s[C])}return f}function Q1(s){$d(s)}function J1(s){console.error(s)}function wy(s){$d(s)}function th(s,u){try{var f=s.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function xy(s,u,f){try{var v=s.onCaughtError;v(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function tp(s,u,f){return f=Za(f),f.tag=3,f.payload={element:null},f.callback=function(){th(s,u)},f}function Hs(s){return s=Za(s),s.tag=3,s}function m0(s,u,f,v){var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var S=v.value;s.payload=function(){return C(S)},s.callback=function(){xy(u,f,v)}}var L=f.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(s.callback=function(){xy(u,f,v),typeof C!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var X=v.stack;this.componentDidCatch(v.value,{componentStack:X!==null?X:""})})}function ep(s,u,f,v,C){if(f.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=f.alternate,u!==null&&oc(u,f,C,!0),f=lo.current,f!==null){switch(f.tag){case 31:case 13:return Io===null?M0():f.alternate===null&&ui===0&&(ui=3),f.flags&=-257,f.flags|=65536,f.lanes=C,v===Zd?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([v]):u.add(v),Mp(s,v,C)),!1;case 22:return f.flags|=65536,v===Zd?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([v]):f.add(v)),Mp(s,v,C)),!1}throw Error(r(435,f.tag))}return Mp(s,v,C),M0(),!1}if(hn)return u=lo.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,v!==T1&&(s=Error(r(422),{cause:v}),qa(oo(s,f)))):(v!==T1&&(u=Error(r(423),{cause:v}),qa(oo(u,f))),s=s.current.alternate,s.flags|=65536,C&=-C,s.lanes|=C,v=oo(v,f),C=tp(s.stateNode,v,C),t0(s,C),ui!==4&&(ui=2)),!1;var S=Error(r(520),{cause:v});if(S=oo(S,f),gh===null?gh=[S]:gh.push(S),ui!==4&&(ui=2),u===null)return!0;v=oo(v,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,s=C&-C,f.lanes|=s,s=tp(f.stateNode,v,s),t0(f,s),!1;case 1:if(u=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(sl===null||!sl.has(S))))return f.flags|=65536,C&=-C,f.lanes|=C,C=Hs(C),m0(C,s,f,v),t0(f,C),!1}f=f.return}while(f!==null);return!1}var eh=Error(r(461)),li=!1;function mi(s,u,f,v){u.child=s===null?P1(u,null,f,v):Ka(u,s.child,f,v)}function De(s,u,f,v,C){f=f.render;var S=u.ref;if("ref"in v){var L={};for(var X in v)X!=="ref"&&(L[X]=v[X])}else L=v;return Jl(u),v=o0(s,u,f,L,S,C),X=s0(),s!==null&&!li?(a0(s,u,C),Ns(s,u,C)):(hn&&X&&$a(u),u.flags|=1,mi(s,u,v,C),u.child)}function nh(s,u,f,v,C){if(s===null){var S=f.type;return typeof S=="function"&&!sa(S)&&S.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=S,v0(s,u,S,v,C)):(s=Wd(f.type,null,v,u,u.mode,C),s.ref=u.ref,s.return=u,u.child=s)}if(S=s.child,!E0(s,C)){var L=S.memoizedProps;if(f=f.compare,f=f!==null?f:Yu,f(L,v)&&s.ref===u.ref)return Ns(s,u,C)}return u.flags|=1,s=Po(S,v),s.ref=u.ref,s.return=u,u.child=s}function v0(s,u,f,v,C){if(s!==null){var S=s.memoizedProps;if(Yu(S,v)&&s.ref===u.ref)if(li=!1,u.pendingProps=v=S,E0(s,C))(s.flags&131072)!==0&&(li=!0);else return u.lanes=s.lanes,Ns(s,u,C)}return x0(s,u,f,v,C)}function nl(s,u,f,v){var C=v.children,S=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((u.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,s!==null){for(v=u.child=s.child,C=0;v!==null;)C=C|v.lanes|v.childLanes,v=v.sibling;v=C&~S}else v=0,u.child=null;return y0(s,u,S,f,v)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&Yd(u,S!==null?S.cachePool:null),S!==null?M1(u,S):Zi(),sy(u);else return v=u.lanes=536870912,y0(s,u,S!==null?S.baseLanes|f:f,f,v)}else S!==null?(Yd(u,S.cachePool),M1(u,S),Ho(),u.memoizedState=null):(s!==null&&Yd(u,null),Zi(),Ho());return mi(s,u,C,f),u.child}function ih(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function y0(s,u,f,v,C){var S=b1();return S=S===null?null:{parent:Ri._currentValue,pool:S},u.memoizedState={baseLanes:f,cachePool:S},s!==null&&Yd(u,null),Zi(),sy(u),s!==null&&oc(s,u,v,!0),u.childLanes=C,null}function rh(s,u){return u=C0({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function Qi(s,u,f){return Ka(u,s.child,null,f),s=rh(u,u.pendingProps),s.flags|=2,Lr(u),u.memoizedState=null,s}function IC(s,u,f){var v=u.pendingProps,C=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(hn){if(v.mode==="hidden")return s=rh(u,v),u.lanes=536870912,ih(null,s);if(jf(u),(s=Bn)?(s=c2(s,Lo),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:aa!==null?{id:_s,overflow:Oo}:null,retryLane:536870912,hydrationErrors:null},f=_f(s),f.return=u,u.child=f,Mi=u,Bn=null)):s=null,s===null)throw Wa(u);return u.lanes=536870912,null}return rh(u,v)}var S=s.memoizedState;if(S!==null){var L=S.dehydrated;if(jf(u),C)if(u.flags&256)u.flags&=-257,u=Qi(s,u,f);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(r(558));else if(li||oc(s,u,f,!1),C=(f&s.childLanes)!==0,li||C){if(v=Vn,v!==null&&(L=ku(v,f),L!==0&&L!==S.retryLane))throw S.retryLane=L,Ls(s,L),Nr(v,s,L),eh;M0(),u=Qi(s,u,f)}else s=S.treeContext,Bn=Go(L.nextSibling),Mi=u,hn=!0,Va=null,Lo=!1,s!==null&&ic(u,s),u=rh(u,v),u.flags|=4096;return u}return s=Po(s.child,{mode:v.mode,children:v.children}),s.ref=u.ref,u.child=s,s.return=u,s}function w0(s,u){var f=u.ref;if(f===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(u.flags|=4194816)}}function x0(s,u,f,v,C){return Jl(u),f=o0(s,u,f,v,void 0,C),v=s0(),s!==null&&!li?(a0(s,u,C),Ns(s,u,C)):(hn&&v&&$a(u),u.flags|=1,mi(s,u,f,C),u.child)}function Cy(s,u,f,v,C,S){return Jl(u),u.updateQueue=null,f=$f(u,v,f,C),R1(s),v=s0(),s!==null&&!li?(a0(s,u,S),Ns(s,u,S)):(hn&&v&&$a(u),u.flags|=1,mi(s,u,f,S),u.child)}function np(s,u,f,v,C){if(Jl(u),u.stateNode===null){var S=oa,L=f.contextType;typeof L=="object"&&L!==null&&(S=Ki(L)),S=new f(v,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Jf,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=v,S.state=u.memoizedState,S.refs={},ks(u),L=f.contextType,S.context=typeof L=="object"&&L!==null?Ki(L):oa,S.state=u.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(p0(u,f,L,v),S.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(L=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),L!==S.state&&Jf.enqueueReplaceState(S,S.state,null),fc(u,v,S,C),nu(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(s===null){S=u.stateNode;var X=u.memoizedProps,at=xr(f,X);S.props=at;var bt=S.context,kt=f.contextType;L=oa,typeof kt=="object"&&kt!==null&&(L=Ki(kt));var zt=f.getDerivedStateFromProps;kt=typeof zt=="function"||typeof S.getSnapshotBeforeUpdate=="function",X=u.pendingProps!==X,kt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(X||bt!==L)&&Z1(u,S,v,L),ko=!1;var Bt=u.memoizedState;S.state=Bt,fc(u,v,S,C),nu(),bt=u.memoizedState,X||Bt!==bt||ko?(typeof zt=="function"&&(p0(u,f,zt,v),bt=u.memoizedState),(at=ko||yy(u,f,at,v,Bt,bt,L))?(kt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=bt),S.props=v,S.state=bt,S.context=L,v=at):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{S=u.stateNode,Jd(s,u),L=u.memoizedProps,kt=xr(f,L),S.props=kt,zt=u.pendingProps,Bt=S.context,bt=f.contextType,at=oa,typeof bt=="object"&&bt!==null&&(at=Ki(bt)),X=f.getDerivedStateFromProps,(bt=typeof X=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(L!==zt||Bt!==at)&&Z1(u,S,v,at),ko=!1,Bt=u.memoizedState,S.state=Bt,fc(u,v,S,C),nu();var Ot=u.memoizedState;L!==zt||Bt!==Ot||ko||s!==null&&s.dependencies!==null&&qd(s.dependencies)?(typeof X=="function"&&(p0(u,f,X,v),Ot=u.memoizedState),(kt=ko||yy(u,f,kt,v,Bt,Ot,at)||s!==null&&s.dependencies!==null&&qd(s.dependencies))?(bt||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(v,Ot,at),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(v,Ot,at)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=Ot),S.props=v,S.state=Ot,S.context=at,v=kt):(typeof S.componentDidUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(u.flags|=1024),v=!1)}return S=v,w0(s,u),v=(u.flags&128)!==0,S||v?(S=u.stateNode,f=v&&typeof f.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,s!==null&&v?(u.child=Ka(u,s.child,null,C),u.child=Ka(u,null,f,C)):mi(s,u,f,C),u.memoizedState=S.state,s=u.child):s=Ns(s,u,C),s}function Ey(s,u,f,v){return q(),u.flags|=256,mi(s,u,f,v),u.child}var ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rp(s){return{baseLanes:s,cachePool:ny()}}function hs(s,u,f){return s=s!==null?s.childLanes&~f:0,u&&(s|=go),s}function ar(s,u,f){var v=u.pendingProps,C=!1,S=(u.flags&128)!==0,L;if((L=S)||(L=s!==null&&s.memoizedState===null?!1:(Ti.current&2)!==0),L&&(C=!0,u.flags&=-129),L=(u.flags&32)!==0,u.flags&=-33,s===null){if(hn){if(C?Qa(u):Ho(),(s=Bn)?(s=c2(s,Lo),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:aa!==null?{id:_s,overflow:Oo}:null,retryLane:536870912,hydrationErrors:null},f=_f(s),f.return=u,u.child=f,Mi=u,Bn=null)):s=null,s===null)throw Wa(u);return Mc(s)?u.lanes=32:u.lanes=536870912,null}var X=v.children;return v=v.fallback,C?(Ho(),C=u.mode,X=C0({mode:"hidden",children:X},C),v=Kl(v,C,f,null),X.return=u,v.return=u,X.sibling=v,u.child=X,v=u.child,v.memoizedState=rp(f),v.childLanes=hs(s,L,f),u.memoizedState=ip,ih(null,v)):(Qa(u),oh(u,X))}var at=s.memoizedState;if(at!==null&&(X=at.dehydrated,X!==null)){if(S)u.flags&256?(Qa(u),u.flags&=-257,u=sh(s,u,f)):u.memoizedState!==null?(Ho(),u.child=s.child,u.flags|=128,u=null):(Ho(),X=v.fallback,C=u.mode,v=C0({mode:"visible",children:v.children},C),X=Kl(X,C,f,null),X.flags|=2,v.return=u,X.return=u,v.sibling=X,u.child=v,Ka(u,s.child,null,f),v=u.child,v.memoizedState=rp(f),v.childLanes=hs(s,L,f),u.memoizedState=ip,u=ih(null,v));else if(Qa(u),Mc(X)){if(L=X.nextSibling&&X.nextSibling.dataset,L)var bt=L.dgst;L=bt,v=Error(r(419)),v.stack="",v.digest=L,qa({value:v,source:null,stack:null}),u=sh(s,u,f)}else if(li||oc(s,u,f,!1),L=(f&s.childLanes)!==0,li||L){if(L=Vn,L!==null&&(v=ku(L,f),v!==0&&v!==at.retryLane))throw at.retryLane=v,Ls(s,v),Nr(L,s,v),eh;N0(X)||M0(),u=sh(s,u,f)}else N0(X)?(u.flags|=192,u.child=s.child,u=null):(s=at.treeContext,Bn=Go(X.nextSibling),Mi=u,hn=!0,Va=null,Lo=!1,s!==null&&ic(u,s),u=oh(u,v.children),u.flags|=4096);return u}return C?(Ho(),X=v.fallback,C=u.mode,at=s.child,bt=at.sibling,v=Po(at,{mode:"hidden",children:v.children}),v.subtreeFlags=at.subtreeFlags&65011712,bt!==null?X=Po(bt,X):(X=Kl(X,C,f,null),X.flags|=2),X.return=u,v.return=u,v.sibling=X,u.child=v,ih(null,v),v=u.child,X=s.child.memoizedState,X===null?X=rp(f):(C=X.cachePool,C!==null?(at=Ri._currentValue,C=C.parent!==at?{parent:at,pool:at}:C):C=ny(),X={baseLanes:X.baseLanes|f,cachePool:C}),v.memoizedState=X,v.childLanes=hs(s,L,f),u.memoizedState=ip,ih(s.child,v)):(Qa(u),f=s.child,s=f.sibling,f=Po(f,{mode:"visible",children:v.children}),f.return=u,f.sibling=null,s!==null&&(L=u.deletions,L===null?(u.deletions=[s],u.flags|=16):L.push(s)),u.child=f,u.memoizedState=null,f)}function oh(s,u){return u=C0({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function C0(s,u){return s=Yi(22,s,null,u),s.lanes=0,s}function sh(s,u,f){return Ka(u,s.child,null,f),s=oh(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function Sy(s,u,f){s.lanes|=u;var v=s.alternate;v!==null&&(v.lanes|=u),ca(s.return,u,f)}function op(s,u,f,v,C,S){var L=s.memoizedState;L===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:f,tailMode:C,treeForkCount:S}:(L.isBackwards=u,L.rendering=null,L.renderingStartTime=0,L.last=v,L.tail=f,L.tailMode=C,L.treeForkCount=S)}function Cc(s,u,f){var v=u.pendingProps,C=v.revealOrder,S=v.tail;v=v.children;var L=Ti.current,X=(L&2)!==0;if(X?(L=L&1|2,u.flags|=128):L&=1,tt(Ti,L),mi(s,u,v,f),v=hn?Pi:0,!X&&s!==null&&(s.flags&128)!==0)t:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Sy(s,f,u);else if(s.tag===19)Sy(s,f,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break t;for(;s.sibling===null;){if(s.return===null||s.return===u)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(C){case"forwards":for(f=u.child,C=null;f!==null;)s=f.alternate,s!==null&&n0(s)===null&&(C=f),f=f.sibling;f=C,f===null?(C=u.child,u.child=null):(C=f.sibling,f.sibling=null),op(u,!1,C,f,S,v);break;case"backwards":case"unstable_legacy-backwards":for(f=null,C=u.child,u.child=null;C!==null;){if(s=C.alternate,s!==null&&n0(s)===null){u.child=C;break}s=C.sibling,C.sibling=f,f=C,C=s}op(u,!0,f,null,S,v);break;case"together":op(u,!1,null,null,void 0,v);break;default:u.memoizedState=null}return u.child}function Ns(s,u,f){if(s!==null&&(u.dependencies=s.dependencies),ol|=u.lanes,(f&u.childLanes)===0)if(s!==null){if(oc(s,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(r(153));if(u.child!==null){for(s=u.child,f=Po(s,s.pendingProps),u.child=f,f.return=u;s.sibling!==null;)s=s.sibling,f=f.sibling=Po(s,s.pendingProps),f.return=u;f.sibling=null}return u.child}function E0(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&qd(s)))}function HC(s,u,f){switch(u.tag){case 3:$t(u,u.stateNode.containerInfo),Ya(u,Ri,s.memoizedState.cache),q();break;case 27:case 5:Pt(u);break;case 4:$t(u,u.stateNode.containerInfo);break;case 10:Ya(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,jf(u),null;break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(Qa(u),u.flags|=128,null):(f&u.child.childLanes)!==0?ar(s,u,f):(Qa(u),s=Ns(s,u,f),s!==null?s.sibling:null);Qa(u);break;case 19:var C=(s.flags&128)!==0;if(v=(f&u.childLanes)!==0,v||(oc(s,u,f,!1),v=(f&u.childLanes)!==0),C){if(v)return Cc(s,u,f);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),tt(Ti,Ti.current),v)break;return null;case 22:return u.lanes=0,nl(s,u,f,u.pendingProps);case 24:Ya(u,Ri,s.memoizedState.cache)}return Ns(s,u,f)}function Ty(s,u,f){if(s!==null)if(s.memoizedProps!==u.pendingProps)li=!0;else{if(!E0(s,f)&&(u.flags&128)===0)return li=!1,HC(s,u,f);li=(s.flags&131072)!==0}else li=!1,hn&&(u.flags&1048576)!==0&&Xd(u,Pi,u.index);switch(u.lanes=0,u.tag){case 16:t:{var v=u.pendingProps;if(s=ss(u.elementType),u.type=s,typeof s=="function")sa(s)?(v=xr(s,v),u.tag=1,u=np(null,u,s,v,f)):(u.tag=0,u=x0(null,u,s,v,f));else{if(s!=null){var C=s.$$typeof;if(C===R){u.tag=11,u=De(null,u,s,v,f);break t}else if(C===U){u.tag=14,u=nh(null,u,s,v,f);break t}}throw u=wt(s)||s,Error(r(306,u,""))}}return u;case 0:return x0(s,u,u.type,u.pendingProps,f);case 1:return v=u.type,C=xr(v,u.pendingProps),np(s,u,v,C,f);case 3:t:{if($t(u,u.stateNode.containerInfo),s===null)throw Error(r(387));v=u.pendingProps;var S=u.memoizedState;C=S.element,Jd(s,u),fc(u,v,null,f);var L=u.memoizedState;if(v=L.cache,Ya(u,Ri,v),v!==S.cache&&A1(u,[Ri],f,!0),nu(),v=L.element,S.isDehydrated)if(S={element:v,isDehydrated:!1,cache:L.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=Ey(s,u,v,f);break t}else if(v!==C){C=oo(Error(r(424)),u),qa(C),u=Ey(s,u,v,f);break t}else{switch(s=u.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Bn=Go(s.firstChild),Mi=u,hn=!0,Va=null,Lo=!0,f=P1(u,null,v,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(q(),v===C){u=Ns(s,u,f);break t}mi(s,u,v,f)}u=u.child}return u;case 26:return w0(s,u),s===null?(f=m2(u.type,null,u.pendingProps,null))?u.memoizedState=f:hn||(f=u.type,s=u.pendingProps,v=Dh(gt.current).createElement(f),v[ki]=u,v[or]=s,Ji(v,f,s),Si(v),u.stateNode=v):u.memoizedState=m2(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return Pt(u),s===null&&hn&&(v=u.stateNode=d2(u.type,u.pendingProps,gt.current),Mi=u,Lo=!0,C=Bn,Oe(u.type)?(jp=C,Bn=Go(v.firstChild)):Bn=C),mi(s,u,u.pendingProps.children,f),w0(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&hn&&((C=v=Bn)&&(v=tE(v,u.type,u.pendingProps,Lo),v!==null?(u.stateNode=v,Mi=u,Bn=Go(v.firstChild),Lo=!1,C=!0):C=!1),C||Wa(u)),Pt(u),C=u.type,S=u.pendingProps,L=s!==null?s.memoizedProps:null,v=S.children,cl(C,S)?v=null:L!==null&&cl(C,L)&&(u.flags|=32),u.memoizedState!==null&&(C=o0(s,u,_C,null,null,f),kc._currentValue=C),w0(s,u),mi(s,u,v,f),u.child;case 6:return s===null&&hn&&((s=f=Bn)&&(f=Pn(f,u.pendingProps,Lo),f!==null?(u.stateNode=f,Mi=u,Bn=null,s=!0):s=!1),s||Wa(u)),null;case 13:return ar(s,u,f);case 4:return $t(u,u.stateNode.containerInfo),v=u.pendingProps,s===null?u.child=Ka(u,null,v,f):mi(s,u,v,f),u.child;case 11:return De(s,u,u.type,u.pendingProps,f);case 7:return mi(s,u,u.pendingProps,f),u.child;case 8:return mi(s,u,u.pendingProps.children,f),u.child;case 12:return mi(s,u,u.pendingProps.children,f),u.child;case 10:return v=u.pendingProps,Ya(u,u.type,v.value),mi(s,u,v.children,f),u.child;case 9:return C=u.type._context,v=u.pendingProps.children,Jl(u),C=Ki(C),v=v(C),u.flags|=1,mi(s,u,v,f),u.child;case 14:return nh(s,u,u.type,u.pendingProps,f);case 15:return v0(s,u,u.type,u.pendingProps,f);case 19:return Cc(s,u,f);case 31:return IC(s,u,f);case 22:return nl(s,u,f,u.pendingProps);case 24:return Jl(u),v=Ki(Ri),s===null?(C=b1(),C===null&&(C=Vn,S=os(),C.pooledCache=S,S.refCount++,S!==null&&(C.pooledCacheLanes|=f),C=S),u.memoizedState={parent:v,cache:C},ks(u),Ya(u,Ri,C)):((s.lanes&f)!==0&&(Jd(s,u),fc(u,null,null,f),nu()),C=s.memoizedState,S=u.memoizedState,C.parent!==v?(C={parent:v,cache:v},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),Ya(u,Ri,v)):(v=S.cache,Ya(u,Ri,v),v!==C.cache&&A1(u,[Ri],f,!0))),mi(s,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function da(s){s.flags|=4}function sp(s,u,f,v,C){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(C&335544128)===C)if(s.stateNode.complete)s.flags|=8192;else if(vh())s.flags|=8192;else throw Fs=Zd,Kd}else s.flags&=-16777217}function ap(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!C2(u))if(vh())s.flags|=8192;else throw Fs=Zd,Kd}function ah(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?Cf():536870912,s.lanes|=u,Ac|=u)}function lh(s,u){if(!hn)switch(s.tailMode){case"hidden":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function $n(s){var u=s.alternate!==null&&s.alternate.child===s.child,f=0,v=0;if(u)for(var C=s.child;C!==null;)f|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)f|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=v,s.childLanes=f,u}function Ay(s,u,f){var v=u.pendingProps;switch(Zl(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(u),null;case 1:return $n(u),null;case 3:return f=u.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),ua(Ri),ot(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Ql(u)?da(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Xa())),$n(u),null;case 26:var C=u.type,S=u.memoizedState;return s===null?(da(u),S!==null?($n(u),ap(u,S)):($n(u),sp(u,C,null,v,f))):S?S!==s.memoizedState?(da(u),$n(u),ap(u,S)):($n(u),u.flags&=-16777217):(s=s.memoizedProps,s!==v&&da(u),$n(u),sp(u,C,s,v,f)),null;case 27:if(Rt(u),f=gt.current,C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==v&&da(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return $n(u),null}s=it.current,Ql(u)?kf(u):(s=d2(C,v,f),u.stateNode=s,da(u))}return $n(u),null;case 5:if(Rt(u),C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==v&&da(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return $n(u),null}if(S=it.current,Ql(u))kf(u);else{var L=Dh(gt.current);switch(S){case 1:S=L.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:S=L.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":S=L.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":S=L.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":S=L.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof v.is=="string"?L.createElement("select",{is:v.is}):L.createElement("select"),v.multiple?S.multiple=!0:v.size&&(S.size=v.size);break;default:S=typeof v.is=="string"?L.createElement(C,{is:v.is}):L.createElement(C)}}S[ki]=u,S[or]=v;t:for(L=u.child;L!==null;){if(L.tag===5||L.tag===6)S.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===u)break t;for(;L.sibling===null;){if(L.return===null||L.return===u)break t;L=L.return}L.sibling.return=L.return,L=L.sibling}u.stateNode=S;t:switch(Ji(S,C,v),C){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break t;case"img":v=!0;break t;default:v=!1}v&&da(u)}}return $n(u),sp(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,f),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==v&&da(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(r(166));if(s=gt.current,Ql(u)){if(s=u.stateNode,f=u.memoizedProps,v=null,C=Mi,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}s[ki]=u,s=!!(s.nodeValue===f||v!==null&&v.suppressHydrationWarning===!0||s2(s.nodeValue,f)),s||Wa(u,!0)}else s=Dh(s).createTextNode(v),s[ki]=u,u.stateNode=s}return $n(u),null;case 31:if(f=u.memoizedState,s===null||s.memoizedState!==null){if(v=Ql(u),f!==null){if(s===null){if(!v)throw Error(r(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[ki]=u}else q(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$n(u),s=!1}else f=Xa(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return u.flags&256?(Lr(u),u):(Lr(u),null);if((u.flags&128)!==0)throw Error(r(558))}return $n(u),null;case 13:if(v=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(C=Ql(u),v!==null&&v.dehydrated!==null){if(s===null){if(!C)throw Error(r(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[ki]=u}else q(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$n(u),C=!1}else C=Xa(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?(Lr(u),u):(Lr(u),null)}return Lr(u),(u.flags&128)!==0?(u.lanes=f,u):(f=v!==null,s=s!==null&&s.memoizedState!==null,f&&(v=u.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool),S=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(S=v.memoizedState.cachePool.pool),S!==C&&(v.flags|=2048)),f!==s&&f&&(u.child.flags|=8192),ah(u,u.updateQueue),$n(u),null);case 4:return ot(),s===null&&Fp(u.stateNode.containerInfo),$n(u),null;case 10:return ua(u.type),$n(u),null;case 19:if(J(Ti),v=u.memoizedState,v===null)return $n(u),null;if(C=(u.flags&128)!==0,S=v.rendering,S===null)if(C)lh(v,!1);else{if(ui!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(S=n0(s),S!==null){for(u.flags|=128,lh(v,!1),s=S.updateQueue,u.updateQueue=s,ah(u,s),u.subtreeFlags=0,s=f,f=u.child;f!==null;)Qv(f,s),f=f.sibling;return tt(Ti,Ti.current&1|2),hn&&so(u,v.treeForkCount),u.child}s=s.sibling}v.tail!==null&&Fn()>au&&(u.flags|=128,C=!0,lh(v,!1),u.lanes=4194304)}else{if(!C)if(s=n0(S),s!==null){if(u.flags|=128,C=!0,s=s.updateQueue,u.updateQueue=s,ah(u,s),lh(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!hn)return $n(u),null}else 2*Fn()-v.renderingStartTime>au&&f!==536870912&&(u.flags|=128,C=!0,lh(v,!1),u.lanes=4194304);v.isBackwards?(S.sibling=u.child,u.child=S):(s=v.last,s!==null?s.sibling=S:u.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Fn(),s.sibling=null,f=Ti.current,tt(Ti,C?f&1|2:f&1),hn&&so(u,v.treeForkCount),s):($n(u),null);case 22:case 23:return Lr(u),zf(),v=u.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(f&536870912)!==0&&(u.flags&128)===0&&($n(u),u.subtreeFlags&6&&(u.flags|=8192)):$n(u),f=u.updateQueue,f!==null&&ah(u,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==f&&(u.flags|=2048),s!==null&&J(eu),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),ua(Ri),$n(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function uh(s,u){switch(Zl(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return ua(Ri),ot(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return Rt(u),null;case 31:if(u.memoizedState!==null){if(Lr(u),u.alternate===null)throw Error(r(340));q()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if(Lr(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(r(340));q()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return J(Ti),null;case 4:return ot(),null;case 10:return ua(u.type),null;case 22:case 23:return Lr(u),zf(),s!==null&&J(eu),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return ua(Ri),null;case 25:return null;default:return null}}function S0(s,u){switch(Zl(u),u.tag){case 3:ua(Ri),ot();break;case 26:case 27:case 5:Rt(u);break;case 4:ot();break;case 31:u.memoizedState!==null&&Lr(u);break;case 13:Lr(u);break;case 19:J(Ti);break;case 10:ua(u.type);break;case 22:case 23:Lr(u),zf(),s!==null&&J(eu);break;case 24:ua(Ri)}}function Ec(s,u){try{var f=u.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var C=v.next;f=C;do{if((f.tag&s)===s){v=void 0;var S=f.create,L=f.inst;v=S(),L.destroy=v}f=f.next}while(f!==C)}}catch(X){Ln(u,u.return,X)}}function ga(s,u,f){try{var v=u.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var S=C.next;v=S;do{if((v.tag&s)===s){var L=v.inst,X=L.destroy;if(X!==void 0){L.destroy=void 0,C=u;var at=f,bt=X;try{bt()}catch(kt){Ln(C,at,kt)}}}v=v.next}while(v!==S)}}catch(kt){Ln(u,u.return,kt)}}function ch(s){var u=s.updateQueue;if(u!==null){var f=s.stateNode;try{e0(u,f)}catch(v){Ln(s,s.return,v)}}}function lp(s,u,f){f.props=xr(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(v){Ln(s,u,v)}}function Fr(s,u){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof f=="function"?s.refCleanup=f(v):f.current=v}}catch(C){Ln(s,u,C)}}function lr(s,u){var f=s.ref,v=s.refCleanup;if(f!==null)if(typeof v=="function")try{v()}catch(C){Ln(s,u,C)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(C){Ln(s,u,C)}else f.current=null}function Dy(s){var u=s.type,f=s.memoizedProps,v=s.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&v.focus();break t;case"img":f.src?v.src=f.src:f.srcSet&&(v.srcset=f.srcSet)}}catch(C){Ln(s,s.return,C)}}function T0(s,u,f){try{var v=s.stateNode;ZC(v,s.type,f,u),v[or]=u}catch(C){Ln(s,s.return,C)}}function by(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Oe(s.type)||s.tag===4}function up(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||by(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Oe(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function cp(s,u,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(s),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=ns));else if(v!==4&&(v===27&&Oe(s.type)&&(f=s.stateNode,u=null),s=s.child,s!==null))for(cp(s,u,f),s=s.sibling;s!==null;)cp(s,u,f),s=s.sibling}function A0(s,u,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,u?f.insertBefore(s,u):f.appendChild(s);else if(v!==4&&(v===27&&Oe(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(A0(s,u,f),s=s.sibling;s!==null;)A0(s,u,f),s=s.sibling}function By(s){var u=s.stateNode,f=s.memoizedProps;try{for(var v=s.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);Ji(u,v,f),u[ki]=s,u[or]=f}catch(S){Ln(s,s.return,S)}}var pa=!1,Oi=!1,fp=!1,Py=typeof WeakSet=="function"?WeakSet:Set,Ui=null;function NC(s,u){if(s=s.containerInfo,Ah=W0,s=qv(s),E1(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else t:{f=(f=s.ownerDocument)&&f.defaultView||window;var v=f.getSelection&&f.getSelection();if(v&&v.rangeCount!==0){f=v.anchorNode;var C=v.anchorOffset,S=v.focusNode;v=v.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break t}var L=0,X=-1,at=-1,bt=0,kt=0,zt=s,Bt=null;e:for(;;){for(var Ot;zt!==f||C!==0&&zt.nodeType!==3||(X=L+C),zt!==S||v!==0&&zt.nodeType!==3||(at=L+v),zt.nodeType===3&&(L+=zt.nodeValue.length),(Ot=zt.firstChild)!==null;)Bt=zt,zt=Ot;for(;;){if(zt===s)break e;if(Bt===f&&++bt===C&&(X=L),Bt===S&&++kt===v&&(at=L),(Ot=zt.nextSibling)!==null)break;zt=Bt,Bt=zt.parentNode}zt=Ot}f=X===-1||at===-1?null:{start:X,end:at}}else f=null}f=f||{start:0,end:0}}else f=null;for(Np={focusedElem:s,selectionRange:f},W0=!1,Ui=u;Ui!==null;)if(u=Ui,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,Ui=s;else for(;Ui!==null;){switch(u=Ui,S=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)C=s[f],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,f=u,C=S.memoizedProps,S=S.memoizedState,v=f.stateNode;try{var ce=xr(f.type,C);s=v.getSnapshotBeforeUpdate(ce,S),v.__reactInternalSnapshotBeforeUpdate=s}catch(Be){Ln(f,f.return,Be)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,f=s.nodeType,f===9)H0(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":H0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=u.sibling,s!==null){s.return=u.return,Ui=s;break}Ui=u.return}}function hp(s,u,f){var v=f.flags;switch(f.tag){case 0:case 11:case 15:va(s,f),v&4&&Ec(5,f);break;case 1:if(va(s,f),v&4)if(s=f.stateNode,u===null)try{s.componentDidMount()}catch(L){Ln(f,f.return,L)}else{var C=xr(f.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(C,u,s.__reactInternalSnapshotBeforeUpdate)}catch(L){Ln(f,f.return,L)}}v&64&&ch(f),v&512&&Fr(f,f.return);break;case 3:if(va(s,f),v&64&&(s=f.updateQueue,s!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{e0(s,u)}catch(L){Ln(f,f.return,L)}}break;case 27:u===null&&v&4&&By(f);case 26:case 5:va(s,f),u===null&&v&4&&Dy(f),v&512&&Fr(f,f.return);break;case 12:va(s,f);break;case 31:va(s,f),v&4&&gp(s,f);break;case 13:va(s,f),v&4&&Ry(s,f),v&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=L0.bind(null,f),eE(s,f))));break;case 22:if(v=f.memoizedState!==null||pa,!v){u=u!==null&&u.memoizedState!==null||Oi,C=pa;var S=Oi;pa=v,(Oi=u)&&!S?Gs(s,f,(f.subtreeFlags&8772)!==0):va(s,f),pa=C,Oi=S}break;case 30:break;default:va(s,f)}}function dp(s){var u=s.alternate;u!==null&&(s.alternate=null,dp(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&Tf(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qn=null,kr=!1;function ma(s,u,f){for(f=f.child;f!==null;)My(s,u,f),f=f.sibling}function My(s,u,f){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(Qr,f)}catch{}switch(f.tag){case 26:Oi||lr(f,u),ma(s,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Oi||lr(f,u);var v=Qn,C=kr;Oe(f.type)&&(Qn=f.stateNode,kr=!1),ma(s,u,f),Bh(f.stateNode),Qn=v,kr=C;break;case 5:Oi||lr(f,u);case 6:if(v=Qn,C=kr,Qn=null,ma(s,u,f),Qn=v,kr=C,Qn!==null)if(kr)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(f.stateNode)}catch(S){Ln(f,u,S)}else try{Qn.removeChild(f.stateNode)}catch(S){Ln(f,u,S)}break;case 18:Qn!==null&&(kr?(s=Qn,zp(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Hc(s)):zp(Qn,f.stateNode));break;case 4:v=Qn,C=kr,Qn=f.stateNode.containerInfo,kr=!0,ma(s,u,f),Qn=v,kr=C;break;case 0:case 11:case 14:case 15:ga(2,f,u),Oi||ga(4,f,u),ma(s,u,f);break;case 1:Oi||(lr(f,u),v=f.stateNode,typeof v.componentWillUnmount=="function"&&lp(f,u,v)),ma(s,u,f);break;case 21:ma(s,u,f);break;case 22:Oi=(v=Oi)||f.memoizedState!==null,ma(s,u,f),Oi=v;break;default:ma(s,u,f)}}function gp(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Hc(s)}catch(f){Ln(u,u.return,f)}}}function Ry(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hc(s)}catch(f){Ln(u,u.return,f)}}function GC(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new Py),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new Py),u;default:throw Error(r(435,s.tag))}}function D0(s,u){var f=GC(s);u.forEach(function(v){if(!f.has(v)){f.add(v);var C=XC.bind(null,s,v);v.then(C,C)}})}function Ir(s,u){var f=u.deletions;if(f!==null)for(var v=0;v<f.length;v++){var C=f[v],S=s,L=u,X=L;t:for(;X!==null;){switch(X.tag){case 27:if(Oe(X.type)){Qn=X.stateNode,kr=!1;break t}break;case 5:Qn=X.stateNode,kr=!1;break t;case 3:case 4:Qn=X.stateNode.containerInfo,kr=!0;break t}X=X.return}if(Qn===null)throw Error(r(160));My(S,L,C),Qn=null,kr=!1,S=C.alternate,S!==null&&(S.return=null),C.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Oy(u,s),u=u.sibling}var ds=null;function Oy(s,u){var f=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ir(u,s),Jn(s),v&4&&(ga(3,s,s.return),Ec(3,s),ga(5,s,s.return));break;case 1:Ir(u,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),v&64&&pa&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?v:f.concat(v))));break;case 26:var C=ds;if(Ir(u,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),v&4){var S=f!==null?f.memoizedState:null;if(v=s.memoizedState,f===null)if(v===null)if(s.stateNode===null){t:{v=s.type,f=s.memoizedProps,C=C.ownerDocument||C;e:switch(v){case"title":S=C.getElementsByTagName("title")[0],(!S||S[Gl]||S[ki]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=C.createElement(v),C.head.insertBefore(S,C.querySelector("head > title"))),Ji(S,v,f),S[ki]=s,Si(S),v=S;break t;case"link":var L=w2("link","href",C).get(v+(f.href||""));if(L){for(var X=0;X<L.length;X++)if(S=L[X],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){L.splice(X,1);break e}}S=C.createElement(v),Ji(S,v,f),C.head.appendChild(S);break;case"meta":if(L=w2("meta","content",C).get(v+(f.content||""))){for(X=0;X<L.length;X++)if(S=L[X],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){L.splice(X,1);break e}}S=C.createElement(v),Ji(S,v,f),C.head.appendChild(S);break;default:throw Error(r(468,v))}S[ki]=s,Si(S),v=S}s.stateNode=v}else x2(C,s.type,s.stateNode);else s.stateNode=y2(C,v,s.memoizedProps);else S!==v?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,v===null?x2(C,s.type,s.stateNode):y2(C,v,s.memoizedProps)):v===null&&s.stateNode!==null&&T0(s,s.memoizedProps,f.memoizedProps)}break;case 27:Ir(u,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),f!==null&&v&4&&T0(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Ir(u,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),s.flags&32){C=s.stateNode;try{wn(C,"")}catch(ce){Ln(s,s.return,ce)}}v&4&&s.stateNode!=null&&(C=s.memoizedProps,T0(s,C,f!==null?f.memoizedProps:C)),v&1024&&(fp=!0);break;case 6:if(Ir(u,s),Jn(s),v&4){if(s.stateNode===null)throw Error(r(162));v=s.memoizedProps,f=s.stateNode;try{f.nodeValue=v}catch(ce){Ln(s,s.return,ce)}}break;case 3:if(Ph=null,C=ds,ds=G0(u.containerInfo),Ir(u,s),ds=C,Jn(s),v&4&&f!==null&&f.memoizedState.isDehydrated)try{Hc(u.containerInfo)}catch(ce){Ln(s,s.return,ce)}fp&&(fp=!1,Ly(s));break;case 4:v=ds,ds=G0(s.stateNode.containerInfo),Ir(u,s),Jn(s),ds=v;break;case 12:Ir(u,s),Jn(s);break;case 31:Ir(u,s),Jn(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,D0(s,v)));break;case 13:Ir(u,s),Jn(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(ph=Fn()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,D0(s,v)));break;case 22:C=s.memoizedState!==null;var at=f!==null&&f.memoizedState!==null,bt=pa,kt=Oi;if(pa=bt||C,Oi=kt||at,Ir(u,s),Oi=kt,pa=bt,Jn(s),v&8192)t:for(u=s.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(f===null||at||pa||Oi||ou(s)),f=null,u=s;;){if(u.tag===5||u.tag===26){if(f===null){at=f=u;try{if(S=at.stateNode,C)L=S.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{X=at.stateNode;var zt=at.memoizedProps.style,Bt=zt!=null&&zt.hasOwnProperty("display")?zt.display:null;X.style.display=Bt==null||typeof Bt=="boolean"?"":(""+Bt).trim()}}catch(ce){Ln(at,at.return,ce)}}}else if(u.tag===6){if(f===null){at=u;try{at.stateNode.nodeValue=C?"":at.memoizedProps}catch(ce){Ln(at,at.return,ce)}}}else if(u.tag===18){if(f===null){at=u;try{var Ot=at.stateNode;C?yo(Ot,!0):yo(at.stateNode,!1)}catch(ce){Ln(at,at.return,ce)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break t;for(;u.sibling===null;){if(u.return===null||u.return===s)break t;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=s.updateQueue,v!==null&&(f=v.retryQueue,f!==null&&(v.retryQueue=null,D0(s,f))));break;case 19:Ir(u,s),Jn(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,D0(s,v)));break;case 30:break;case 21:break;default:Ir(u,s),Jn(s)}}function Jn(s){var u=s.flags;if(u&2){try{for(var f,v=s.return;v!==null;){if(by(v)){f=v;break}v=v.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var C=f.stateNode,S=up(s);A0(s,S,C);break;case 5:var L=f.stateNode;f.flags&32&&(wn(L,""),f.flags&=-33);var X=up(s);A0(s,X,L);break;case 3:case 4:var at=f.stateNode.containerInfo,bt=up(s);cp(s,bt,at);break;default:throw Error(r(161))}}catch(kt){Ln(s,s.return,kt)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function Ly(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;Ly(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function va(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)hp(s,u.alternate,u),u=u.sibling}function ou(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:ga(4,u,u.return),ou(u);break;case 1:lr(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&lp(u,u.return,f),ou(u);break;case 27:Bh(u.stateNode);case 26:case 5:lr(u,u.return),ou(u);break;case 22:u.memoizedState===null&&ou(u);break;case 30:ou(u);break;default:ou(u)}s=s.sibling}}function Gs(s,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,C=s,S=u,L=S.flags;switch(S.tag){case 0:case 11:case 15:Gs(C,S,f),Ec(4,S);break;case 1:if(Gs(C,S,f),v=S,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(bt){Ln(v,v.return,bt)}if(v=S,C=v.updateQueue,C!==null){var X=v.stateNode;try{var at=C.shared.hiddenCallbacks;if(at!==null)for(C.shared.hiddenCallbacks=null,C=0;C<at.length;C++)us(at[C],X)}catch(bt){Ln(v,v.return,bt)}}f&&L&64&&ch(S),Fr(S,S.return);break;case 27:By(S);case 26:case 5:Gs(C,S,f),f&&v===null&&L&4&&Dy(S),Fr(S,S.return);break;case 12:Gs(C,S,f);break;case 31:Gs(C,S,f),f&&L&4&&gp(C,S);break;case 13:Gs(C,S,f),f&&L&4&&Ry(C,S);break;case 22:S.memoizedState===null&&Gs(C,S,f),Fr(S,S.return);break;case 30:break;default:Gs(C,S,f)}u=u.sibling}}function pp(s,u){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&If(f))}function mp(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&If(s))}function gs(s,u,f,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)_y(s,u,f,v),u=u.sibling}function _y(s,u,f,v){var C=u.flags;switch(u.tag){case 0:case 11:case 15:gs(s,u,f,v),C&2048&&Ec(9,u);break;case 1:gs(s,u,f,v);break;case 3:gs(s,u,f,v),C&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&If(s)));break;case 12:if(C&2048){gs(s,u,f,v),s=u.stateNode;try{var S=u.memoizedProps,L=S.id,X=S.onPostCommit;typeof X=="function"&&X(L,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(at){Ln(u,u.return,at)}}else gs(s,u,f,v);break;case 31:gs(s,u,f,v);break;case 13:gs(s,u,f,v);break;case 23:break;case 22:S=u.stateNode,L=u.alternate,u.memoizedState!==null?S._visibility&2?gs(s,u,f,v):fh(s,u):S._visibility&2?gs(s,u,f,v):(S._visibility|=2,il(s,u,f,v,(u.subtreeFlags&10256)!==0||!1)),C&2048&&pp(L,u);break;case 24:gs(s,u,f,v),C&2048&&mp(u.alternate,u);break;default:gs(s,u,f,v)}}function il(s,u,f,v,C){for(C=C&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var S=s,L=u,X=f,at=v,bt=L.flags;switch(L.tag){case 0:case 11:case 15:il(S,L,X,at,C),Ec(8,L);break;case 23:break;case 22:var kt=L.stateNode;L.memoizedState!==null?kt._visibility&2?il(S,L,X,at,C):fh(S,L):(kt._visibility|=2,il(S,L,X,at,C)),C&&bt&2048&&pp(L.alternate,L);break;case 24:il(S,L,X,at,C),C&&bt&2048&&mp(L.alternate,L);break;default:il(S,L,X,at,C)}u=u.sibling}}function fh(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=s,v=u,C=v.flags;switch(v.tag){case 22:fh(f,v),C&2048&&pp(v.alternate,v);break;case 24:fh(f,v),C&2048&&mp(v.alternate,v);break;default:fh(f,v)}u=u.sibling}}var hh=8192;function Sc(s,u,f){if(s.subtreeFlags&hh)for(s=s.child;s!==null;)Fy(s,u,f),s=s.sibling}function Fy(s,u,f){switch(s.tag){case 26:Sc(s,u,f),s.flags&hh&&s.memoizedState!==null&&Fc(f,ds,s.memoizedState,s.memoizedProps);break;case 5:Sc(s,u,f);break;case 3:case 4:var v=ds;ds=G0(s.stateNode.containerInfo),Sc(s,u,f),ds=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=hh,hh=16777216,Sc(s,u,f),hh=v):Sc(s,u,f));break;default:Sc(s,u,f)}}function ky(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function dh(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var v=u[f];Ui=v,Hy(v,s)}ky(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Iy(s),s=s.sibling}function Iy(s){switch(s.tag){case 0:case 11:case 15:dh(s),s.flags&2048&&ga(9,s,s.return);break;case 3:dh(s);break;case 12:dh(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,b0(s)):dh(s);break;default:dh(s)}}function b0(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var v=u[f];Ui=v,Hy(v,s)}ky(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:ga(8,u,u.return),b0(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,b0(u));break;default:b0(u)}s=s.sibling}}function Hy(s,u){for(;Ui!==null;){var f=Ui;switch(f.tag){case 0:case 11:case 15:ga(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var v=f.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:If(f.memoizedState.cache)}if(v=f.child,v!==null)v.return=f,Ui=v;else t:for(f=s;Ui!==null;){v=Ui;var C=v.sibling,S=v.return;if(dp(v),v===f){Ui=null;break t}if(C!==null){C.return=S,Ui=C;break t}Ui=S}}}var zC={getCacheForType:function(s){var u=Ki(Ri),f=u.data.get(s);return f===void 0&&(f=s(),u.data.set(s,f)),f},cacheSignal:function(){return Ki(Ri).controller.signal}},jC=typeof WeakMap=="function"?WeakMap:Map,Dn=0,Vn=null,on=null,cn=0,On=0,ho=null,rl=!1,Tc=!1,vp=!1,ps=0,ui=0,ol=0,su=0,yp=0,go=0,Ac=0,gh=null,Hr=null,wp=!1,ph=0,Ny=0,au=1/0,B0=null,sl=null,Ni=0,al=null,Dc=null,ya=0,xp=0,Cp=null,Gy=null,mh=0,Ep=null;function po(){return(Dn&2)!==0&&cn!==0?cn&-cn:P.T!==null?mo():Cd()}function zy(){if(go===0)if((cn&536870912)===0||hn){var s=kl;kl<<=1,(kl&3932160)===0&&(kl=262144),go=s}else go=536870912;return s=lo.current,s!==null&&(s.flags|=32),go}function Nr(s,u,f){(s===Vn&&(On===2||On===9)||s.cancelPendingCommit!==null)&&(bc(s,0),wa(s,cn,go,!1)),Nl(s,f),((Dn&2)===0||s!==Vn)&&(s===Vn&&((Dn&2)===0&&(su|=f),ui===4&&wa(s,cn,go,!1)),zs(s))}function jy(s,u,f){if((Dn&6)!==0)throw Error(r(327));var v=!f&&(u&127)===0&&(u&s.expiredLanes)===0||Hl(s,u),C=v?$C(s,u):Tp(s,u,!0),S=v;do{if(C===0){Tc&&!v&&wa(s,u,0,!1);break}else{if(f=s.current.alternate,S&&!$y(f)){C=Tp(s,u,!1),S=!1;continue}if(C===2){if(S=u,s.errorRecoveryDisabledLanes&S)var L=0;else L=s.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){u=L;t:{var X=s;C=gh;var at=X.current.memoizedState.isDehydrated;if(at&&(bc(X,L).flags|=256),L=Tp(X,L,!1),L!==2){if(vp&&!at){X.errorRecoveryDisabledLanes|=S,su|=S,C=4;break t}S=Hr,Hr=C,S!==null&&(Hr===null?Hr=S:Hr.push.apply(Hr,S))}C=L}if(S=!1,C!==2)continue}}if(C===1){bc(s,0),wa(s,u,0,!0);break}t:{switch(v=s,S=C,S){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:wa(v,u,go,!rl);break t;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(C=ph+300-Fn(),10<C)){if(wa(v,u,go,!rl),_u(v,0,!0)!==0)break t;ya=u,v.timeoutHandle=a2(Uy.bind(null,v,f,Hr,B0,wp,u,go,su,Ac,rl,S,"Throttled",-0,0),C);break t}Uy(v,f,Hr,B0,wp,u,go,su,Ac,rl,S,null,-0,0)}}break}while(!0);zs(s)}function Uy(s,u,f,v,C,S,L,X,at,bt,kt,zt,Bt,Ot){if(s.timeoutHandle=-1,zt=u.subtreeFlags,zt&8192||(zt&16785408)===16785408){zt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},Fy(u,S,zt);var ce=(S&62914560)===S?ph-Fn():(S&4194048)===S?Ny-Fn():0;if(ce=cE(zt,ce),ce!==null){ya=S,s.cancelPendingCommit=ce(Ky.bind(null,s,u,S,f,v,C,L,X,at,kt,zt,null,Bt,Ot)),wa(s,S,L,!bt);return}}Ky(s,u,S,f,v,C,L,X,at)}function $y(s){for(var u=s;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var v=0;v<f.length;v++){var C=f[v],S=C.getSnapshot;C=C.value;try{if(!ai(S(),C))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function wa(s,u,f,v){u&=~yp,u&=~su,s.suspendedLanes|=u,s.pingedLanes&=~u,v&&(s.warmLanes|=u),v=s.expirationTimes;for(var C=u;0<C;){var S=31-Ei(C),L=1<<S;v[S]=-1,C&=~L}f!==0&&Fu(s,f,u)}function P0(){return(Dn&6)===0?(Ch(0),!1):!0}function Sp(){if(on!==null){if(On===0)var s=on.return;else s=on,la=$e=null,O1(s),uc=null,ao=0,s=on;for(;s!==null;)S0(s.alternate,s),s=s.return;on=null}}function bc(s,u){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,JC(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),ya=0,Sp(),Vn=s,on=f=Po(s.current,null),cn=u,On=0,ho=null,rl=!1,Tc=Hl(s,u),vp=!1,Ac=go=yp=su=ol=ui=0,Hr=gh=null,wp=!1,(u&8)!==0&&(u|=u&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=u;0<v;){var C=31-Ei(v),S=1<<C;u|=s[C],v&=~S}return ps=u,rs(),f}function Vy(s,u){Ve=null,P.H=el,u===lc||u===Nf?(u=ry(),On=3):u===Kd?(u=ry(),On=4):On=u===eh?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ho=u,on===null&&(ui=1,th(s,oo(u,s.current)))}function vh(){var s=lo.current;return s===null?!0:(cn&4194048)===cn?Io===null:(cn&62914560)===cn||(cn&536870912)!==0?s===Io:!1}function Wy(){var s=P.H;return P.H=el,s===null?el:s}function Xy(){var s=P.A;return P.A=zC,s}function M0(){ui=4,rl||(cn&4194048)!==cn&&lo.current!==null||(Tc=!0),(ol&134217727)===0&&(su&134217727)===0||Vn===null||wa(Vn,cn,go,!1)}function Tp(s,u,f){var v=Dn;Dn|=2;var C=Wy(),S=Xy();(Vn!==s||cn!==u)&&(B0=null,bc(s,u)),u=!1;var L=ui;t:do try{if(On!==0&&on!==null){var X=on,at=ho;switch(On){case 8:Sp(),L=6;break t;case 3:case 2:case 9:case 6:lo.current===null&&(u=!0);var bt=On;if(On=0,ho=null,Bc(s,X,at,bt),f&&Tc){L=0;break t}break;default:bt=On,On=0,ho=null,Bc(s,X,at,bt)}}UC(),L=ui;break}catch(kt){Vy(s,kt)}while(!0);return u&&s.shellSuspendCounter++,la=$e=null,Dn=v,P.H=C,P.A=S,on===null&&(Vn=null,cn=0,rs()),L}function UC(){for(;on!==null;)qy(on)}function $C(s,u){var f=Dn;Dn|=2;var v=Wy(),C=Xy();Vn!==s||cn!==u?(B0=null,au=Fn()+500,bc(s,u)):Tc=Hl(s,u);t:do try{if(On!==0&&on!==null){u=on;var S=ho;e:switch(On){case 1:On=0,ho=null,Bc(s,u,S,1);break;case 2:case 9:if(iy(S)){On=0,ho=null,Yy(u);break}u=function(){On!==2&&On!==9||Vn!==s||(On=7),zs(s)},S.then(u,u);break t;case 3:On=7;break t;case 4:On=5;break t;case 7:iy(S)?(On=0,ho=null,Yy(u)):(On=0,ho=null,Bc(s,u,S,7));break;case 5:var L=null;switch(on.tag){case 26:L=on.memoizedState;case 5:case 27:var X=on;if(L?C2(L):X.stateNode.complete){On=0,ho=null;var at=X.sibling;if(at!==null)on=at;else{var bt=X.return;bt!==null?(on=bt,R0(bt)):on=null}break e}}On=0,ho=null,Bc(s,u,S,5);break;case 6:On=0,ho=null,Bc(s,u,S,6);break;case 8:Sp(),ui=6;break t;default:throw Error(r(462))}}VC();break}catch(kt){Vy(s,kt)}while(!0);return la=$e=null,P.H=v,P.A=C,Dn=f,on!==null?0:(Vn=null,cn=0,rs(),ui)}function VC(){for(;on!==null&&!Qe();)qy(on)}function qy(s){var u=Ty(s.alternate,s,ps);s.memoizedProps=s.pendingProps,u===null?R0(s):on=u}function Yy(s){var u=s,f=u.alternate;switch(u.tag){case 15:case 0:u=Cy(f,u,u.pendingProps,u.type,void 0,cn);break;case 11:u=Cy(f,u,u.pendingProps,u.type.render,u.ref,cn);break;case 5:O1(u);default:S0(f,u),u=on=Qv(u,ps),u=Ty(f,u,ps)}s.memoizedProps=s.pendingProps,u===null?R0(s):on=u}function Bc(s,u,f,v){la=$e=null,O1(u),uc=null,ao=0;var C=u.return;try{if(ep(s,C,u,f,cn)){ui=1,th(s,oo(f,s.current)),on=null;return}}catch(S){if(C!==null)throw on=C,S;ui=1,th(s,oo(f,s.current)),on=null;return}u.flags&32768?(hn||v===1?s=!0:Tc||(cn&536870912)!==0?s=!1:(rl=s=!0,(v===2||v===9||v===3||v===6)&&(v=lo.current,v!==null&&v.tag===13&&(v.flags|=16384))),yh(u,s)):R0(u)}function R0(s){var u=s;do{if((u.flags&32768)!==0){yh(u,rl);return}s=u.return;var f=Ay(u.alternate,u,ps);if(f!==null){on=f;return}if(u=u.sibling,u!==null){on=u;return}on=u=s}while(u!==null);ui===0&&(ui=5)}function yh(s,u){do{var f=uh(s.alternate,s);if(f!==null){f.flags&=32767,on=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(s=s.sibling,s!==null)){on=s;return}on=s=f}while(s!==null);ui=6,on=null}function Ky(s,u,f,v,C,S,L,X,at){s.cancelPendingCommit=null;do wh();while(Ni!==0);if((Dn&6)!==0)throw Error(r(327));if(u!==null){if(u===s.current)throw Error(r(177));if(S=u.lanes|u.childLanes,S|=Ju,i1(s,f,S,L,X,at),s===Vn&&(on=Vn=null,cn=0),Dc=u,al=s,ya=f,xp=S,Cp=C,Gy=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,qC(An,function(){return Bp(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=P.T,P.T=null,C=_.p,_.p=2,L=Dn,Dn|=4;try{NC(s,u,f)}finally{Dn=L,_.p=C,P.T=v}}Ni=1,Ap(),Dp(),O0()}}function Ap(){if(Ni===1){Ni=0;var s=al,u=Dc,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=P.T,P.T=null;var v=_.p;_.p=2;var C=Dn;Dn|=4;try{Oy(u,s);var S=Np,L=qv(s.containerInfo),X=S.focusedElem,at=S.selectionRange;if(L!==X&&X&&X.ownerDocument&&Xv(X.ownerDocument.documentElement,X)){if(at!==null&&E1(X)){var bt=at.start,kt=at.end;if(kt===void 0&&(kt=bt),"selectionStart"in X)X.selectionStart=bt,X.selectionEnd=Math.min(kt,X.value.length);else{var zt=X.ownerDocument||document,Bt=zt&&zt.defaultView||window;if(Bt.getSelection){var Ot=Bt.getSelection(),ce=X.textContent.length,Be=Math.min(at.start,ce),Nn=at.end===void 0?Be:Math.min(at.end,ce);!Ot.extend&&Be>Nn&&(L=Nn,Nn=Be,Be=L);var Ct=Wv(X,Be),dt=Wv(X,Nn);if(Ct&&dt&&(Ot.rangeCount!==1||Ot.anchorNode!==Ct.node||Ot.anchorOffset!==Ct.offset||Ot.focusNode!==dt.node||Ot.focusOffset!==dt.offset)){var Dt=zt.createRange();Dt.setStart(Ct.node,Ct.offset),Ot.removeAllRanges(),Be>Nn?(Ot.addRange(Dt),Ot.extend(dt.node,dt.offset)):(Dt.setEnd(dt.node,dt.offset),Ot.addRange(Dt))}}}}for(zt=[],Ot=X;Ot=Ot.parentNode;)Ot.nodeType===1&&zt.push({element:Ot,left:Ot.scrollLeft,top:Ot.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<zt.length;X++){var Gt=zt[X];Gt.element.scrollLeft=Gt.left,Gt.element.scrollTop=Gt.top}}W0=!!Ah,Np=Ah=null}finally{Dn=C,_.p=v,P.T=f}}s.current=u,Ni=2}}function Dp(){if(Ni===2){Ni=0;var s=al,u=Dc,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=P.T,P.T=null;var v=_.p;_.p=2;var C=Dn;Dn|=4;try{hp(s,u.alternate,u)}finally{Dn=C,_.p=v,P.T=f}}Ni=3}}function O0(){if(Ni===4||Ni===3){Ni=0,ei();var s=al,u=Dc,f=ya,v=Gy;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ni=5:(Ni=0,Dc=al=null,bp(s,s.pendingLanes));var C=s.pendingLanes;if(C===0&&(sl=null),Sf(f),u=u.stateNode,di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(Qr,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=P.T,C=_.p,_.p=2,P.T=null;try{for(var S=s.onRecoverableError,L=0;L<v.length;L++){var X=v[L];S(X.value,{componentStack:X.stack})}}finally{P.T=u,_.p=C}}(ya&3)!==0&&wh(),zs(s),C=s.pendingLanes,(f&261930)!==0&&(C&42)!==0?s===Ep?mh++:(mh=0,Ep=s):mh=0,Ch(0)}}function bp(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,If(u)))}function wh(){return Ap(),Dp(),O0(),Bp()}function Bp(){if(Ni!==5)return!1;var s=al,u=xp;xp=0;var f=Sf(ya),v=P.T,C=_.p;try{_.p=32>f?32:f,P.T=null,f=Cp,Cp=null;var S=al,L=ya;if(Ni=0,Dc=al=null,ya=0,(Dn&6)!==0)throw Error(r(331));var X=Dn;if(Dn|=4,Iy(S.current),_y(S,S.current,L,f),Dn=X,Ch(0,!1),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(Qr,S)}catch{}return!0}finally{_.p=C,P.T=v,bp(s,u)}}function Pp(s,u,f){u=oo(f,u),u=tp(s.stateNode,u,2),s=ls(s,u,2),s!==null&&(Nl(s,2),zs(s))}function Ln(s,u,f){if(s.tag===3)Pp(s,s,f);else for(;u!==null;){if(u.tag===3){Pp(u,s,f);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(sl===null||!sl.has(v))){s=oo(f,s),f=Hs(2),v=ls(u,f,2),v!==null&&(m0(f,v,u,s),Nl(v,2),zs(v));break}}u=u.return}}function Mp(s,u,f){var v=s.pingCache;if(v===null){v=s.pingCache=new jC;var C=new Set;v.set(u,C)}else C=v.get(u),C===void 0&&(C=new Set,v.set(u,C));C.has(f)||(vp=!0,C.add(f),s=WC.bind(null,s,u,f),u.then(s,s))}function WC(s,u,f){var v=s.pingCache;v!==null&&v.delete(u),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Vn===s&&(cn&f)===f&&(ui===4||ui===3&&(cn&62914560)===cn&&300>Fn()-ph?(Dn&2)===0&&bc(s,0):yp|=f,Ac===cn&&(Ac=0)),zs(s)}function xh(s,u){u===0&&(u=Cf()),s=Ls(s,u),s!==null&&(Nl(s,u),zs(s))}function L0(s){var u=s.memoizedState,f=0;u!==null&&(f=u.retryLane),xh(s,f)}function XC(s,u){var f=0;switch(s.tag){case 31:case 13:var v=s.stateNode,C=s.memoizedState;C!==null&&(f=C.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(u),xh(s,f)}function qC(s,u){return Re(s,u)}var Pc=null,lu=null,Rp=!1,_0=!1,Op=!1,ll=0;function zs(s){s!==lu&&s.next===null&&(lu===null?Pc=lu=s:lu=lu.next=s),_0=!0,Rp||(Rp=!0,KC())}function Ch(s,u){if(!Op&&_0){Op=!0;do for(var f=!1,v=Pc;v!==null;){if(s!==0){var C=v.pendingLanes;if(C===0)var S=0;else{var L=v.suspendedLanes,X=v.pingedLanes;S=(1<<31-Ei(42|s)+1)-1,S&=C&~(L&~X),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,t2(v,S))}else S=cn,S=_u(v,v===Vn?S:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(S&3)===0||Hl(v,S)||(f=!0,t2(v,S));v=v.next}while(f);Op=!1}}function YC(){Zy()}function Zy(){_0=Rp=!1;var s=0;ll!==0&&QC()&&(s=ll);for(var u=Fn(),f=null,v=Pc;v!==null;){var C=v.next,S=Qy(v,u);S===0?(v.next=null,f===null?Pc=C:f.next=C,C===null&&(lu=f)):(f=v,(s!==0||(S&3)!==0)&&(_0=!0)),v=C}Ni!==0&&Ni!==5||Ch(s),ll!==0&&(ll=0)}function Qy(s,u){for(var f=s.suspendedLanes,v=s.pingedLanes,C=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var L=31-Ei(S),X=1<<L,at=C[L];at===-1?((X&f)===0||(X&v)!==0)&&(C[L]=n1(X,u)):at<=u&&(s.expiredLanes|=X),S&=~X}if(u=Vn,f=cn,f=_u(s,s===u?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,f===0||s===u&&(On===2||On===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&me(v),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||Hl(s,f)){if(u=f&-f,u===s.callbackPriority)return u;switch(v!==null&&me(v),Sf(f)){case 2:case 8:f=ji;break;case 32:f=An;break;case 268435456:f=Zr;break;default:f=An}return v=Jy.bind(null,s),f=Re(f,v),s.callbackPriority=u,s.callbackNode=f,u}return v!==null&&v!==null&&me(v),s.callbackPriority=2,s.callbackNode=null,2}function Jy(s,u){if(Ni!==0&&Ni!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(wh()&&s.callbackNode!==f)return null;var v=cn;return v=_u(s,s===Vn?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(jy(s,v,u),Qy(s,Fn()),s.callbackNode!=null&&s.callbackNode===f?Jy.bind(null,s):null)}function t2(s,u){if(wh())return null;jy(s,u,!0)}function KC(){u2(function(){(Dn&6)!==0?Re(Br,YC):Zy()})}function mo(){if(ll===0){var s=sc;s===0&&(s=Jr,Jr<<=1,(Jr&261888)===0&&(Jr=256)),ll=s}return ll}function e2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zl(""+s)}function n2(s,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,s.id&&f.setAttribute("form",s.id),u.parentNode.insertBefore(f,u),s=new FormData(s),f.parentNode.removeChild(f),s}function uu(s,u,f,v,C){if(u==="submit"&&f&&f.stateNode===C){var S=e2((C[or]||null).action),L=v.submitter;L&&(u=(u=L[or]||null)?e2(u.formAction):L.getAttribute("formAction"),u!==null&&(S=u,L=null));var X=new Pd("action","action",null,v,C);s.push({event:X,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(ll!==0){var at=L?n2(C,L):new FormData(C);tl(f,{pending:!0,data:at,method:C.method,action:S},null,at)}}else typeof S=="function"&&(X.preventDefault(),at=L?n2(C,L):new FormData(C),tl(f,{pending:!0,data:at,method:C.method,action:S},S,at))},currentTarget:C}]})}}for(var Ge=0;Ge<Ud.length;Ge++){var Lp=Ud[Ge],Gr=Lp.toLowerCase(),Di=Lp[0].toUpperCase()+Lp.slice(1);Rr(Gr,"on"+Di)}Rr(ro,"onAnimationEnd"),Rr(Of,"onAnimationIteration"),Rr(Yv,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Zu,"onTransitionRun"),Rr(zd,"onTransitionStart"),Rr(jd,"onTransitionCancel"),Rr(bn,"onTransitionEnd"),es("onMouseEnter",["mouseout","mouseover"]),es("onMouseLeave",["mouseout","mouseover"]),es("onPointerEnter",["pointerout","pointerover"]),es("onPointerLeave",["pointerout","pointerover"]),to("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),to("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),to("onBeforeInput",["compositionend","keypress","textInput","paste"]),to("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),to("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),to("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ul=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eh));function i2(s,u){u=(u&4)!==0;for(var f=0;f<s.length;f++){var v=s[f],C=v.event;v=v.listeners;t:{var S=void 0;if(u)for(var L=v.length-1;0<=L;L--){var X=v[L],at=X.instance,bt=X.currentTarget;if(X=X.listener,at!==S&&C.isPropagationStopped())break t;S=X,C.currentTarget=bt;try{S(C)}catch(kt){$d(kt)}C.currentTarget=null,S=at}else for(L=0;L<v.length;L++){if(X=v[L],at=X.instance,bt=X.currentTarget,X=X.listener,at!==S&&C.isPropagationStopped())break t;S=X,C.currentTarget=bt;try{S(C)}catch(kt){$d(kt)}C.currentTarget=null,S=at}}}}function sn(s,u){var f=u[Hu];f===void 0&&(f=u[Hu]=new Set);var v=s+"__bubble";f.has(v)||(k0(u,s,2,!1),f.add(v))}function _p(s,u,f){var v=0;u&&(v|=4),k0(f,s,v,u)}var F0="_reactListening"+Math.random().toString(36).slice(2);function Fp(s){if(!s[F0]){s[F0]=!0,ea.forEach(function(f){f!=="selectionchange"&&(ul.has(f)||_p(f,!1,s),_p(f,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[F0]||(u[F0]=!0,_p("selectionchange",!1,u))}}function k0(s,u,f,v){switch(P2(u)){case 2:var C=hE;break;case 8:C=dE;break;default:C=Xp}f=C.bind(null,u,f,s),C=void 0,!c1||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),v?C!==void 0?s.addEventListener(u,f,{capture:!0,passive:C}):s.addEventListener(u,f,!0):C!==void 0?s.addEventListener(u,f,{passive:C}):s.addEventListener(u,f,!1)}function kp(s,u,f,v,C){var S=v;if((u&1)===0&&(u&2)===0&&v!==null)t:for(;;){if(v===null)return;var L=v.tag;if(L===3||L===4){var X=v.stateNode.containerInfo;if(X===C)break;if(L===4)for(L=v.return;L!==null;){var at=L.tag;if((at===3||at===4)&&L.stateNode.containerInfo===C)return;L=L.return}for(;X!==null;){if(L=Na(X),L===null)return;if(at=L.tag,at===5||at===6||at===26||at===27){v=S=L;continue t}X=X.parentNode}}v=v.return}Rv(function(){var bt=S,kt=l1(f),zt=[];t:{var Bt=Kv.get(s);if(Bt!==void 0){var Ot=Pd,ce=s;switch(s){case"keypress":if(bd(f)===0)break t;case"keydown":case"keyup":Ot=Ua;break;case"focusin":ce="focus",Ot=Rd;break;case"focusout":ce="blur",Ot=Rd;break;case"beforeblur":case"afterblur":Ot=Rd;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=Lv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=CC;break;case ro:case Of:case Yv:Ot=kv;break;case bn:Ot=SC;break;case"scroll":case"scrollend":Ot=yC;break;case"wheel":Ot=Ld;break;case"copy":case"cut":case"paste":Ot=eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=Nv;break;case"toggle":case"beforetoggle":Ot=TC}var Be=(u&4)!==0,Nn=!Be&&(s==="scroll"||s==="scrollend"),Ct=Be?Bt!==null?Bt+"Capture":null:Bt;Be=[];for(var dt=bt,Dt;dt!==null;){var Gt=dt;if(Dt=Gt.stateNode,Gt=Gt.tag,Gt!==5&&Gt!==26&&Gt!==27||Dt===null||Ct===null||(Gt=Ul(dt,Ct),Gt!=null&&Be.push(vo(dt,Gt,Dt))),Nn)break;dt=dt.return}0<Be.length&&(Bt=new Ot(Bt,ce,null,f,kt),zt.push({event:Bt,listeners:Be}))}}if((u&7)===0){t:{if(Bt=s==="mouseover"||s==="pointerover",Ot=s==="mouseout"||s==="pointerout",Bt&&f!==$u&&(ce=f.relatedTarget||f.fromElement)&&(Na(ce)||ce[Ha]))break t;if((Ot||Bt)&&(Bt=kt.window===kt?kt:(Bt=kt.ownerDocument)?Bt.defaultView||Bt.parentWindow:window,Ot?(ce=f.relatedTarget||f.toElement,Ot=bt,ce=ce?Na(ce):null,ce!==null&&(Nn=a(ce),Be=ce.tag,ce!==Nn||Be!==5&&Be!==27&&Be!==6)&&(ce=null)):(Ot=null,ce=bt),Ot!==ce)){if(Be=Md,Gt="onMouseLeave",Ct="onMouseEnter",dt="mouse",(s==="pointerout"||s==="pointerover")&&(Be=Nv,Gt="onPointerLeave",Ct="onPointerEnter",dt="pointer"),Nn=Ot==null?Bt:Ga(Ot),Dt=ce==null?Bt:Ga(ce),Bt=new Be(Gt,dt+"leave",Ot,f,kt),Bt.target=Nn,Bt.relatedTarget=Dt,Gt=null,Na(kt)===bt&&(Be=new Be(Ct,dt+"enter",ce,f,kt),Be.target=Dt,Be.relatedTarget=Nn,Gt=Be),Nn=Gt,Ot&&ce)e:{for(Be=I0,Ct=Ot,dt=ce,Dt=0,Gt=Ct;Gt;Gt=Be(Gt))Dt++;Gt=0;for(var Ee=dt;Ee;Ee=Be(Ee))Gt++;for(;0<Dt-Gt;)Ct=Be(Ct),Dt--;for(;0<Gt-Dt;)dt=Be(dt),Gt--;for(;Dt--;){if(Ct===dt||dt!==null&&Ct===dt.alternate){Be=Ct;break e}Ct=Be(Ct),dt=Be(dt)}Be=null}else Be=null;Ot!==null&&oi(zt,Bt,Ot,Be,!1),ce!==null&&Nn!==null&&oi(zt,Nn,ce,Be,!0)}}t:{if(Bt=bt?Ga(bt):window,Ot=Bt.nodeName&&Bt.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&Bt.type==="file")var Cn=$v;else if(v1(Bt))if(Xl)Cn=BC;else{Cn=DC;var pe=Nd}else Ot=Bt.nodeName,!Ot||Ot.toLowerCase()!=="input"||Bt.type!=="checkbox"&&Bt.type!=="radio"?bt&&ju(bt.elementType)&&(Cn=$v):Cn=bC;if(Cn&&(Cn=Cn(s,bt))){y1(zt,Cn,f,kt);break t}pe&&pe(s,Bt,bt),s==="focusout"&&bt&&Bt.type==="number"&&bt.memoizedProps.value!=null&&Ue(Bt,"number",Bt.value)}switch(pe=bt?Ga(bt):window,s){case"focusin":(v1(pe)||pe.contentEditable==="true")&&(yt=pe,Ft=bt,Mt=null);break;case"focusout":Mt=Ft=yt=null;break;case"mousedown":oe=!0;break;case"contextmenu":case"mouseup":case"dragend":oe=!1,Ne(zt,f,kt);break;case"selectionchange":if(Ku)break;case"keydown":case"keyup":Ne(zt,f,kt)}var Ke;if(_d)t:{switch(s){case"compositionstart":var fn="onCompositionStart";break t;case"compositionend":fn="onCompositionEnd";break t;case"compositionupdate":fn="onCompositionUpdate";break t}fn=void 0}else Wl?kd(s,f)&&(fn="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(fn="onCompositionStart");fn&&(p1&&f.locale!=="ko"&&(Wl||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&Wl&&(Ke=Un()):(za=kt,f1="value"in za?za.value:za.textContent,Wl=!0)),pe=Sh(bt,fn),0<pe.length&&(fn=new no(fn,s,null,f,kt),zt.push({event:fn,listeners:pe}),Ke?fn.data=Ke:(Ke=Uv(f),Ke!==null&&(fn.data=Ke)))),(Ke=g1?io(s,f):m1(s,f))&&(fn=Sh(bt,"onBeforeInput"),0<fn.length&&(pe=new no("onBeforeInput","beforeinput",null,f,kt),zt.push({event:pe,listeners:fn}),pe.data=Ke)),uu(zt,s,bt,f,kt)}i2(zt,u)})}function vo(s,u,f){return{instance:s,listener:u,currentTarget:f}}function Sh(s,u){for(var f=u+"Capture",v=[];s!==null;){var C=s,S=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||S===null||(C=Ul(s,f),C!=null&&v.unshift(vo(s,C,S)),C=Ul(s,u),C!=null&&v.push(vo(s,C,S))),s.tag===3)return v;s=s.return}return[]}function I0(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function oi(s,u,f,v,C){for(var S=u._reactName,L=[];f!==null&&f!==v;){var X=f,at=X.alternate,bt=X.stateNode;if(X=X.tag,at!==null&&at===v)break;X!==5&&X!==26&&X!==27||bt===null||(at=bt,C?(bt=Ul(f,S),bt!=null&&L.unshift(vo(f,bt,at))):C||(bt=Ul(f,S),bt!=null&&L.push(vo(f,bt,at)))),f=f.return}L.length!==0&&s.push({event:u,listeners:L})}var vi=/\r\n?/g,r2=/\u0000|\uFFFD/g;function o2(s){return(typeof s=="string"?s:""+s).replace(vi,`
`).replace(r2,"")}function s2(s,u){return u=o2(u),o2(s)===u}function Hn(s,u,f,v,C,S){switch(f){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||wn(s,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&wn(s,""+v);break;case"className":K(s,"class",v);break;case"tabIndex":K(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":K(s,f,v);break;case"style":zu(s,v,S);break;case"data":if(u!=="object"){K(s,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||f!=="href")){s.removeAttribute(f);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(f);break}v=zl(""+v),s.setAttribute(f,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(u!=="input"&&Hn(s,u,"name",C.name,C,null),Hn(s,u,"formEncType",C.formEncType,C,null),Hn(s,u,"formMethod",C.formMethod,C,null),Hn(s,u,"formTarget",C.formTarget,C,null)):(Hn(s,u,"encType",C.encType,C,null),Hn(s,u,"method",C.method,C,null),Hn(s,u,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(f);break}v=zl(""+v),s.setAttribute(f,v);break;case"onClick":v!=null&&(s.onclick=ns);break;case"onScroll":v!=null&&sn("scroll",s);break;case"onScrollEnd":v!=null&&sn("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(f=v.__html,f!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}f=zl(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,""+v):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":v===!0?s.setAttribute(f,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,v):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(f,v):s.removeAttribute(f);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(f):s.setAttribute(f,v);break;case"popover":sn("beforetoggle",s),sn("toggle",s),Gu(s,"popover",v);break;case"xlinkActuate":lt(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":lt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":lt(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":lt(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":lt(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":lt(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":lt(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":lt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":lt(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Gu(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Uu.get(f)||f,Gu(s,f,v))}}function Ip(s,u,f,v,C,S){switch(f){case"style":zu(s,v,S);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(f=v.__html,f!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof v=="string"?wn(s,v):(typeof v=="number"||typeof v=="bigint")&&wn(s,""+v);break;case"onScroll":v!=null&&sn("scroll",s);break;case"onScrollEnd":v!=null&&sn("scrollend",s);break;case"onClick":v!=null&&(s.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Td.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(C=f.endsWith("Capture"),u=f.slice(2,C?f.length-7:void 0),S=s[or]||null,S=S!=null?S[f]:null,typeof S=="function"&&s.removeEventListener(u,S,C),typeof v=="function")){typeof S!="function"&&S!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(u,v,C);break t}f in s?s[f]=v:v===!0?s.setAttribute(f,""):Gu(s,f,v)}}}function Ji(s,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":sn("error",s),sn("load",s);var v=!1,C=!1,S;for(S in f)if(f.hasOwnProperty(S)){var L=f[S];if(L!=null)switch(S){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Hn(s,u,S,L,f,null)}}C&&Hn(s,u,"srcSet",f.srcSet,f,null),v&&Hn(s,u,"src",f.src,f,null);return;case"input":sn("invalid",s);var X=S=L=C=null,at=null,bt=null;for(v in f)if(f.hasOwnProperty(v)){var kt=f[v];if(kt!=null)switch(v){case"name":C=kt;break;case"type":L=kt;break;case"checked":at=kt;break;case"defaultChecked":bt=kt;break;case"value":S=kt;break;case"defaultValue":X=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(r(137,u));break;default:Hn(s,u,v,kt,f,null)}}ue(s,S,X,at,bt,L,C,!1);return;case"select":sn("invalid",s),v=L=S=null;for(C in f)if(f.hasOwnProperty(C)&&(X=f[C],X!=null))switch(C){case"value":S=X;break;case"defaultValue":L=X;break;case"multiple":v=X;default:Hn(s,u,C,X,f,null)}u=S,f=L,s.multiple=!!v,u!=null?tn(s,!!v,u,!1):f!=null&&tn(s,!!v,f,!0);return;case"textarea":sn("invalid",s),S=C=v=null;for(L in f)if(f.hasOwnProperty(L)&&(X=f[L],X!=null))switch(L){case"value":v=X;break;case"defaultValue":C=X;break;case"children":S=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:Hn(s,u,L,X,f,null)}Zn(s,v,C,S);return;case"option":for(at in f)if(f.hasOwnProperty(at)&&(v=f[at],v!=null))switch(at){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Hn(s,u,at,v,f,null)}return;case"dialog":sn("beforetoggle",s),sn("toggle",s),sn("cancel",s),sn("close",s);break;case"iframe":case"object":sn("load",s);break;case"video":case"audio":for(v=0;v<Eh.length;v++)sn(Eh[v],s);break;case"image":sn("error",s),sn("load",s);break;case"details":sn("toggle",s);break;case"embed":case"source":case"link":sn("error",s),sn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(bt in f)if(f.hasOwnProperty(bt)&&(v=f[bt],v!=null))switch(bt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Hn(s,u,bt,v,f,null)}return;default:if(ju(u)){for(kt in f)f.hasOwnProperty(kt)&&(v=f[kt],v!==void 0&&Ip(s,u,kt,v,f,void 0));return}}for(X in f)f.hasOwnProperty(X)&&(v=f[X],v!=null&&Hn(s,u,X,v,f,null))}function ZC(s,u,f,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,S=null,L=null,X=null,at=null,bt=null,kt=null;for(Ot in f){var zt=f[Ot];if(f.hasOwnProperty(Ot)&&zt!=null)switch(Ot){case"checked":break;case"value":break;case"defaultValue":at=zt;default:v.hasOwnProperty(Ot)||Hn(s,u,Ot,null,v,zt)}}for(var Bt in v){var Ot=v[Bt];if(zt=f[Bt],v.hasOwnProperty(Bt)&&(Ot!=null||zt!=null))switch(Bt){case"type":S=Ot;break;case"name":C=Ot;break;case"checked":bt=Ot;break;case"defaultChecked":kt=Ot;break;case"value":L=Ot;break;case"defaultValue":X=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(r(137,u));break;default:Ot!==zt&&Hn(s,u,Bt,Ot,v,zt)}}Jt(s,L,X,at,bt,kt,S,C);return;case"select":Ot=L=X=Bt=null;for(S in f)if(at=f[S],f.hasOwnProperty(S)&&at!=null)switch(S){case"value":break;case"multiple":Ot=at;default:v.hasOwnProperty(S)||Hn(s,u,S,null,v,at)}for(C in v)if(S=v[C],at=f[C],v.hasOwnProperty(C)&&(S!=null||at!=null))switch(C){case"value":Bt=S;break;case"defaultValue":X=S;break;case"multiple":L=S;default:S!==at&&Hn(s,u,C,S,v,at)}u=X,f=L,v=Ot,Bt!=null?tn(s,!!f,Bt,!1):!!v!=!!f&&(u!=null?tn(s,!!f,u,!0):tn(s,!!f,f?[]:"",!1));return;case"textarea":Ot=Bt=null;for(X in f)if(C=f[X],f.hasOwnProperty(X)&&C!=null&&!v.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Hn(s,u,X,null,v,C)}for(L in v)if(C=v[L],S=f[L],v.hasOwnProperty(L)&&(C!=null||S!=null))switch(L){case"value":Bt=C;break;case"defaultValue":Ot=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==S&&Hn(s,u,L,C,v,S)}vn(s,Bt,Ot);return;case"option":for(var ce in f)if(Bt=f[ce],f.hasOwnProperty(ce)&&Bt!=null&&!v.hasOwnProperty(ce))switch(ce){case"selected":s.selected=!1;break;default:Hn(s,u,ce,null,v,Bt)}for(at in v)if(Bt=v[at],Ot=f[at],v.hasOwnProperty(at)&&Bt!==Ot&&(Bt!=null||Ot!=null))switch(at){case"selected":s.selected=Bt&&typeof Bt!="function"&&typeof Bt!="symbol";break;default:Hn(s,u,at,Bt,v,Ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in f)Bt=f[Be],f.hasOwnProperty(Be)&&Bt!=null&&!v.hasOwnProperty(Be)&&Hn(s,u,Be,null,v,Bt);for(bt in v)if(Bt=v[bt],Ot=f[bt],v.hasOwnProperty(bt)&&Bt!==Ot&&(Bt!=null||Ot!=null))switch(bt){case"children":case"dangerouslySetInnerHTML":if(Bt!=null)throw Error(r(137,u));break;default:Hn(s,u,bt,Bt,v,Ot)}return;default:if(ju(u)){for(var Nn in f)Bt=f[Nn],f.hasOwnProperty(Nn)&&Bt!==void 0&&!v.hasOwnProperty(Nn)&&Ip(s,u,Nn,void 0,v,Bt);for(kt in v)Bt=v[kt],Ot=f[kt],!v.hasOwnProperty(kt)||Bt===Ot||Bt===void 0&&Ot===void 0||Ip(s,u,kt,Bt,v,Ot);return}}for(var Ct in f)Bt=f[Ct],f.hasOwnProperty(Ct)&&Bt!=null&&!v.hasOwnProperty(Ct)&&Hn(s,u,Ct,null,v,Bt);for(zt in v)Bt=v[zt],Ot=f[zt],!v.hasOwnProperty(zt)||Bt===Ot||Bt==null&&Ot==null||Hn(s,u,zt,Bt,v,Ot)}function Hp(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Th(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,f=performance.getEntriesByType("resource"),v=0;v<f.length;v++){var C=f[v],S=C.transferSize,L=C.initiatorType,X=C.duration;if(S&&X&&Hp(L)){for(L=0,X=C.responseEnd,v+=1;v<f.length;v++){var at=f[v],bt=at.startTime;if(bt>X)break;var kt=at.transferSize,zt=at.initiatorType;kt&&Hp(zt)&&(at=at.responseEnd,L+=kt*(at<X?1:(X-bt)/(at-bt)))}if(--v,u+=8*(S+L)/(C.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Ah=null,Np=null;function Dh(s){return s.nodeType===9?s:s.ownerDocument}function bh(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zr(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function cl(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Gp=null;function QC(){var s=window.event;return s&&s.type==="popstate"?s===Gp?!1:(Gp=s,!0):(Gp=null,!1)}var a2=typeof setTimeout=="function"?setTimeout:void 0,JC=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,u2=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(s){return l2.resolve(null).then(s).catch(xa)}:a2;function xa(s){setTimeout(function(){throw s})}function Oe(s){return s==="head"}function zp(s,u){var f=u,v=0;do{var C=f.nextSibling;if(s.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"||f==="/&"){if(v===0){s.removeChild(C),Hc(u);return}v--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")v++;else if(f==="html")Bh(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Bh(f);for(var S=f.firstChild;S;){var L=S.nextSibling,X=S.nodeName;S[Gl]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=L}}else f==="body"&&Bh(s.ownerDocument.body);f=C}while(f);Hc(u)}function yo(s,u){var f=s;s=0;do{var v=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=v}while(f)}function H0(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":H0(f),Tf(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function tE(s,u,f,v){for(;s.nodeType===1;){var C=f;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Gl])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==C.rel||s.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||s.getAttribute("title")!==(C.title==null?null:C.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(C.src==null?null:C.src)||s.getAttribute("type")!==(C.type==null?null:C.type)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var S=C.name==null?null:""+C.name;if(C.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=Go(s.nextSibling),s===null)break}return null}function Pn(s,u,f){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Go(s.nextSibling),s===null))return null;return s}function c2(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Go(s.nextSibling),s===null))return null;return s}function N0(s){return s.data==="$?"||s.data==="$~"}function Mc(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function eE(s,u){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||f.readyState!=="loading")u();else{var v=function(){u(),f.removeEventListener("DOMContentLoaded",v)};f.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function Go(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var jp=null;function f2(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(u===0)return Go(s.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}s=s.nextSibling}return null}function h2(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return s;u--}else f!=="/$"&&f!=="/&"||u++}s=s.previousSibling}return null}function d2(s,u,f){switch(u=Dh(f),s){case"html":if(s=u.documentElement,!s)throw Error(r(452));return s;case"head":if(s=u.head,!s)throw Error(r(453));return s;case"body":if(s=u.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Bh(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);Tf(s)}var zo=new Map,g2=new Set;function G0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ca=_.d;_.d={f:nE,r:iE,D:Up,C:rE,L:oE,m:sE,X:jr,S:$i,M:aE};function nE(){var s=Ca.f(),u=P0();return s||u}function iE(s){var u=ts(s);u!==null&&u.tag===5&&u.type==="form"?X1(u):Ca.r(s)}var fl=typeof document>"u"?null:document;function p2(s,u,f){var v=fl;if(v&&typeof u=="string"&&u){var C=qt(u);C='link[rel="'+s+'"][href="'+C+'"]',typeof f=="string"&&(C+='[crossorigin="'+f+'"]'),g2.has(C)||(g2.add(C),s={rel:s,crossOrigin:f,href:u},v.querySelector(C)===null&&(u=v.createElement("link"),Ji(u,"link",s),Si(u),v.head.appendChild(u)))}}function Up(s){Ca.D(s),p2("dns-prefetch",s,null)}function rE(s,u){Ca.C(s,u),p2("preconnect",s,u)}function oE(s,u,f){Ca.L(s,u,f);var v=fl;if(v&&s&&u){var C='link[rel="preload"][as="'+qt(u)+'"]';u==="image"&&f&&f.imageSrcSet?(C+='[imagesrcset="'+qt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(C+='[imagesizes="'+qt(f.imageSizes)+'"]')):C+='[href="'+qt(s)+'"]';var S=C;switch(u){case"style":S=Rc(s);break;case"script":S=Lc(s)}zo.has(S)||(s=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:s,as:u},f),zo.set(S,s),v.querySelector(C)!==null||u==="style"&&v.querySelector(Oc(S))||u==="script"&&v.querySelector(_c(S))||(u=v.createElement("link"),Ji(u,"link",s),Si(u),v.head.appendChild(u)))}}function sE(s,u){Ca.m(s,u);var f=fl;if(f&&s){var v=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+qt(v)+'"][href="'+qt(s)+'"]',S=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Lc(s)}if(!zo.has(S)&&(s=m({rel:"modulepreload",href:s},u),zo.set(S,s),f.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(_c(S)))return}v=f.createElement("link"),Ji(v,"link",s),Si(v),f.head.appendChild(v)}}}function $i(s,u,f){Ca.S(s,u,f);var v=fl;if(v&&s){var C=mr(v).hoistableStyles,S=Rc(s);u=u||"default";var L=C.get(S);if(!L){var X={loading:0,preload:null};if(L=v.querySelector(Oc(S)))X.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":u},f),(f=zo.get(S))&&$p(s,f);var at=L=v.createElement("link");Si(at),Ji(at,"link",s),at._p=new Promise(function(bt,kt){at.onload=bt,at.onerror=kt}),at.addEventListener("load",function(){X.loading|=1}),at.addEventListener("error",function(){X.loading|=2}),X.loading|=4,z0(L,u,v)}L={type:"stylesheet",instance:L,count:1,state:X},C.set(S,L)}}}function jr(s,u){Ca.X(s,u);var f=fl;if(f&&s){var v=mr(f).hoistableScripts,C=Lc(s),S=v.get(C);S||(S=f.querySelector(_c(C)),S||(s=m({src:s,async:!0},u),(u=zo.get(C))&&j0(s,u),S=f.createElement("script"),Si(S),Ji(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},v.set(C,S))}}function aE(s,u){Ca.M(s,u);var f=fl;if(f&&s){var v=mr(f).hoistableScripts,C=Lc(s),S=v.get(C);S||(S=f.querySelector(_c(C)),S||(s=m({src:s,async:!0,type:"module"},u),(u=zo.get(C))&&j0(s,u),S=f.createElement("script"),Si(S),Ji(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},v.set(C,S))}}function m2(s,u,f,v){var C=(C=gt.current)?G0(C):null;if(!C)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=Rc(f.href),f=mr(C).hoistableStyles,v=f.get(u),v||(v={type:"style",instance:null,count:0,state:null},f.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Rc(f.href);var S=mr(C).hoistableStyles,L=S.get(s);if(L||(C=C.ownerDocument||C,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,L),(S=C.querySelector(Oc(s)))&&!S._p&&(L.instance=S,L.state.loading=5),zo.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},zo.set(s,f),S||lE(C,s,f,L.state))),u&&v===null)throw Error(r(528,""));return L}if(u&&v!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Lc(f),f=mr(C).hoistableScripts,v=f.get(u),v||(v={type:"script",instance:null,count:0,state:null},f.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Rc(s){return'href="'+qt(s)+'"'}function Oc(s){return'link[rel="stylesheet"]['+s+"]"}function v2(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function lE(s,u,f,v){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=s.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),Ji(u,"link",f),Si(u),s.head.appendChild(u))}function Lc(s){return'[src="'+qt(s)+'"]'}function _c(s){return"script[async]"+s}function y2(s,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var v=s.querySelector('style[data-href~="'+qt(f.href)+'"]');if(v)return u.instance=v,Si(v),v;var C=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),Si(v),Ji(v,"style",C),z0(v,f.precedence,s),u.instance=v;case"stylesheet":C=Rc(f.href);var S=s.querySelector(Oc(C));if(S)return u.state.loading|=4,u.instance=S,Si(S),S;v=v2(f),(C=zo.get(C))&&$p(v,C),S=(s.ownerDocument||s).createElement("link"),Si(S);var L=S;return L._p=new Promise(function(X,at){L.onload=X,L.onerror=at}),Ji(S,"link",v),u.state.loading|=4,z0(S,f.precedence,s),u.instance=S;case"script":return S=Lc(f.src),(C=s.querySelector(_c(S)))?(u.instance=C,Si(C),C):(v=f,(C=zo.get(S))&&(v=m({},f),j0(v,C)),s=s.ownerDocument||s,C=s.createElement("script"),Si(C),Ji(C,"link",v),s.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,z0(v,f.precedence,s));return u.instance}function z0(s,u,f){for(var v=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,S=C,L=0;L<v.length;L++){var X=v[L];if(X.dataset.precedence===u)S=X;else if(S!==C)break}S?S.parentNode.insertBefore(s,S.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(s,u.firstChild))}function $p(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function j0(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var Ph=null;function w2(s,u,f){if(Ph===null){var v=new Map,C=Ph=new Map;C.set(f,v)}else C=Ph,v=C.get(f),v||(v=new Map,C.set(f,v));if(v.has(s))return v;for(v.set(s,null),f=f.getElementsByTagName(s),C=0;C<f.length;C++){var S=f[C];if(!(S[Gl]||S[ki]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var L=S.getAttribute(u)||"";L=s+L;var X=v.get(L);X?X.push(S):v.set(L,[S])}}return v}function x2(s,u,f){s=s.ownerDocument||s,s.head.insertBefore(f,u==="title"?s.querySelector("head > title"):null)}function uE(s,u,f){if(f===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return s=u.disabled,typeof u.precedence=="string"&&s==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function C2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Fc(s,u,f,v){if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=Rc(v.href),S=u.querySelector(Oc(C));if(S){u=S._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=U0.bind(s),u.then(s,s)),f.state.loading|=4,f.instance=S,Si(S);return}S=u.ownerDocument||u,v=v2(v),(C=zo.get(C))&&$p(v,C),S=S.createElement("link"),Si(S);var L=S;L._p=new Promise(function(X,at){L.onload=X,L.onerror=at}),Ji(S,"link",v),f.instance=S}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=U0.bind(s),u.addEventListener("load",f),u.addEventListener("error",f))}}var Vp=0;function cE(s,u){return s.stylesheets&&s.count===0&&V0(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var v=setTimeout(function(){if(s.stylesheets&&V0(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4+u);0<s.imgBytes&&Vp===0&&(Vp=62500*Th());var C=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&V0(s,s.stylesheets),s.unsuspend)){var S=s.unsuspend;s.unsuspend=null,S()}},(s.imgBytes>Vp?50:800)+u);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(C)}}:null}function U0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)V0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $0=null;function V0(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$0=new Map,u.forEach(E2,s),$0=null,U0.call(s))}function E2(s,u){if(!(u.state.loading&4)){var f=$0.get(s);if(f)var v=f.get(null);else{f=new Map,$0.set(s,f);for(var C=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<C.length;S++){var L=C[S];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(f.set(L.dataset.precedence,L),v=L)}v&&f.set(null,v)}C=u.instance,L=C.getAttribute("data-precedence"),S=f.get(L)||v,S===v&&f.set(null,C),f.set(L,C),this.count++,v=U0.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),S?S.parentNode.insertBefore(C,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(C,s.firstChild)),u.state.loading|=4}}var kc={$$typeof:I,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function fE(s,u,f,v,C,S,L,X,at){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ef(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ef(0),this.hiddenUpdates=Ef(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=S,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function S2(s,u,f,v,C,S,L,X,at,bt,kt,zt){return s=new fE(s,u,f,L,at,bt,kt,zt,X),u=1,S===!0&&(u|=24),S=Yi(3,null,null,u),s.current=S,S.stateNode=s,u=os(),u.refCount++,s.pooledCache=u,u.refCount++,S.memoizedState={element:v,isDehydrated:f,cache:u},ks(S),s}function T2(s){return s?(s=oa,s):oa}function A2(s,u,f,v,C,S){C=T2(C),v.context===null?v.context=C:v.pendingContext=C,v=Za(u),v.payload={element:f},S=S===void 0?null:S,S!==null&&(v.callback=S),f=ls(s,v,u),f!==null&&(Nr(f,s,u),Gf(f,s,u))}function D2(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<u?f:u}}function Wp(s,u){D2(s,u),(s=s.alternate)&&D2(s,u)}function b2(s){if(s.tag===13||s.tag===31){var u=Ls(s,67108864);u!==null&&Nr(u,s,67108864),Wp(s,67108864)}}function B2(s){if(s.tag===13||s.tag===31){var u=po();u=Iu(u);var f=Ls(s,u);f!==null&&Nr(f,s,u),Wp(s,u)}}var W0=!0;function hE(s,u,f,v){var C=P.T;P.T=null;var S=_.p;try{_.p=2,Xp(s,u,f,v)}finally{_.p=S,P.T=C}}function dE(s,u,f,v){var C=P.T;P.T=null;var S=_.p;try{_.p=8,Xp(s,u,f,v)}finally{_.p=S,P.T=C}}function Xp(s,u,f,v){if(W0){var C=qp(v);if(C===null)kp(s,u,v,X0,f),M2(s,v);else if(R2(C,s,u,f,v))v.stopPropagation();else if(M2(s,v),u&4&&-1<gE.indexOf(s)){for(;C!==null;){var S=ts(C);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var L=Rs(S.pendingLanes);if(L!==0){var X=S;for(X.pendingLanes|=2,X.entangledLanes|=2;L;){var at=1<<31-Ei(L);X.entanglements[1]|=at,L&=~at}zs(S),(Dn&6)===0&&(au=Fn()+500,Ch(0))}}break;case 31:case 13:X=Ls(S,2),X!==null&&Nr(X,S,2),P0(),Wp(S,2)}if(S=qp(v),S===null&&kp(s,u,v,X0,f),S===C)break;C=S}C!==null&&v.stopPropagation()}else kp(s,u,v,null,f)}}function qp(s){return s=l1(s),Yp(s)}var X0=null;function Yp(s){if(X0=null,s=Na(s),s!==null){var u=a(s);if(u===null)s=null;else{var f=u.tag;if(f===13){if(s=l(u),s!==null)return s;s=null}else if(f===31){if(s=c(u),s!==null)return s;s=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return X0=s,null}function P2(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kn()){case Br:return 2;case ji:return 8;case An:case Wn:return 32;case Zr:return 268435456;default:return 32}default:return 32}}var Kp=!1,hl=null,dl=null,gl=null,Mh=new Map,Rh=new Map,pl=[],gE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M2(s,u){switch(s){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":dl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":Mh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(u.pointerId)}}function cu(s,u,f,v,C,S){return s===null||s.nativeEvent!==S?(s={blockedOn:u,domEventName:f,eventSystemFlags:v,nativeEvent:S,targetContainers:[C]},u!==null&&(u=ts(u),u!==null&&b2(u)),s):(s.eventSystemFlags|=v,u=s.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),s)}function R2(s,u,f,v,C){switch(u){case"focusin":return hl=cu(hl,s,u,f,v,C),!0;case"dragenter":return dl=cu(dl,s,u,f,v,C),!0;case"mouseover":return gl=cu(gl,s,u,f,v,C),!0;case"pointerover":var S=C.pointerId;return Mh.set(S,cu(Mh.get(S)||null,s,u,f,v,C)),!0;case"gotpointercapture":return S=C.pointerId,Rh.set(S,cu(Rh.get(S)||null,s,u,f,v,C)),!0}return!1}function Zp(s){var u=Na(s.target);if(u!==null){var f=a(u);if(f!==null){if(u=f.tag,u===13){if(u=l(f),u!==null){s.blockedOn=u,Ed(s.priority,function(){B2(f)});return}}else if(u===31){if(u=c(f),u!==null){s.blockedOn=u,Ed(s.priority,function(){B2(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function q0(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var f=qp(s.nativeEvent);if(f===null){f=s.nativeEvent;var v=new f.constructor(f.type,f);$u=v,f.target.dispatchEvent(v),$u=null}else return u=ts(f),u!==null&&b2(u),s.blockedOn=f,!1;u.shift()}return!0}function O2(s,u,f){q0(s)&&f.delete(u)}function pE(){Kp=!1,hl!==null&&q0(hl)&&(hl=null),dl!==null&&q0(dl)&&(dl=null),gl!==null&&q0(gl)&&(gl=null),Mh.forEach(O2),Rh.forEach(O2)}function Ic(s,u){s.blockedOn===u&&(s.blockedOn=null,Kp||(Kp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pE)))}var Y0=null;function L2(s){Y0!==s&&(Y0=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Y0===s&&(Y0=null);for(var u=0;u<s.length;u+=3){var f=s[u],v=s[u+1],C=s[u+2];if(typeof v!="function"){if(Yp(v||f)===null)continue;break}var S=ts(f);S!==null&&(s.splice(u,3),u-=3,tl(S,{pending:!0,data:C,method:f.method,action:v},v,C))}}))}function Hc(s){function u(at){return Ic(at,s)}hl!==null&&Ic(hl,s),dl!==null&&Ic(dl,s),gl!==null&&Ic(gl,s),Mh.forEach(u),Rh.forEach(u);for(var f=0;f<pl.length;f++){var v=pl[f];v.blockedOn===s&&(v.blockedOn=null)}for(;0<pl.length&&(f=pl[0],f.blockedOn===null);)Zp(f),f.blockedOn===null&&pl.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(v=0;v<f.length;v+=3){var C=f[v],S=f[v+1],L=C[or]||null;if(typeof S=="function")L||L2(f);else if(L){var X=null;if(S&&S.hasAttribute("formAction")){if(C=S,L=S[or]||null)X=L.formAction;else if(Yp(C)!==null)continue}else X=L.action;typeof X=="function"?f[v+1]=X:(f.splice(v,3),v-=3),L2(f)}}}function Cr(){function s(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(L){return C=L})},focusReset:"manual",scroll:"manual"})}function u(){C!==null&&(C(),C=null),v||setTimeout(f,20)}function f(){if(!v&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,C=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),C!==null&&(C(),C=null)}}}function Oh(s){this._internalRoot=s}K0.prototype.render=Oh.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,v=po();A2(f,v,s,u,null,null)},K0.prototype.unmount=Oh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;A2(s.current,2,null,s,null,null),P0(),u[Ha]=null}};function K0(s){this._internalRoot=s}K0.prototype.unstable_scheduleHydration=function(s){if(s){var u=Cd();s={blockedOn:null,target:s,priority:u};for(var f=0;f<pl.length&&u!==0&&u<pl[f].priority;f++);pl.splice(f,0,s),f===0&&Zp(s)}};var _2=n.version;if(_2!=="19.2.0")throw Error(r(527,_2,"19.2.0"));_.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(u),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var mE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z0.isDisabled&&Z0.supportsFiber)try{Qr=Z0.inject(mE),di=Z0}catch{}}return Jp.createRoot=function(s,u){if(!o(s))throw Error(r(299));var f=!1,v="",C=Q1,S=J1,L=wy;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(L=u.onRecoverableError)),u=S2(s,1,!1,null,null,f,v,null,C,S,L,Cr),s[Ha]=u.current,Fp(s),new Oh(u)},Jp.hydrateRoot=function(s,u,f){if(!o(s))throw Error(r(299));var v=!1,C="",S=Q1,L=J1,X=wy,at=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(L=f.onCaughtError),f.onRecoverableError!==void 0&&(X=f.onRecoverableError),f.formState!==void 0&&(at=f.formState)),u=S2(s,1,!0,u,f??null,v,C,at,S,L,X,Cr),u.context=T2(null),f=u.current,v=po(),v=Iu(v),C=Za(v),C.callback=null,ls(f,C,v),f=v,u.current.lanes=f,Nl(u,f),zs(u),s[Ha]=u.current,Fp(s),new K0(u)},Jp.version="19.2.0",Jp}var dD;function lR(){if(dD)return xE.exports;dD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),xE.exports=aR(),xE.exports}var lv=lR();function O3(e,n,i){if(e&&e.length){const[r,o]=n,a=Math.PI/180*i,l=Math.cos(a),c=Math.sin(a);for(const h of e){const[d,p]=h;h[0]=(d-r)*l-(p-o)*c+r,h[1]=(d-r)*c+(p-o)*l+o}}}function uR(e,n,i){const r=[];e.forEach(o=>r.push(...o)),O3(r,n,i)}function cR(e,n){return e[0]===n[0]&&e[1]===n[1]}function fR(e,n,i,r=1){const o=i,a=Math.max(n,.1),l=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,c=[0,0];if(o)for(const d of l)O3(d,c,o);const h=hR(l,a,r);if(o){for(const d of l)O3(d,c,-o);uR(h,c,-o)}return h}function hR(e,n,i){const r=[];for(const d of e){const p=[...d];cR(p[0],p[p.length-1])||p.push([p[0][0],p[0][1]]),p.length>2&&r.push(p)}const o=[];n=Math.max(n,.1);const a=[];for(const d of r)for(let p=0;p<d.length-1;p++){const m=d[p],w=d[p+1];if(m[1]!==w[1]){const x=Math.min(m[1],w[1]);a.push({ymin:x,ymax:Math.max(m[1],w[1]),x:x===m[1]?m[0]:w[0],islope:(w[0]-m[0])/(w[1]-m[1])})}}if(a.sort((d,p)=>d.ymin<p.ymin?-1:d.ymin>p.ymin?1:d.x<p.x?-1:d.x>p.x?1:d.ymax===p.ymax?0:(d.ymax-p.ymax)/Math.abs(d.ymax-p.ymax)),!a.length)return o;let l=[],c=a[0].ymin,h=0;for(;l.length||a.length;){if(a.length){let d=-1;for(let m=0;m<a.length&&!(a[m].ymin>c);m++)d=m;a.splice(0,d+1).forEach(m=>{l.push({s:c,edge:m})})}if(l=l.filter(d=>!(d.edge.ymax<=c)),l.sort((d,p)=>d.edge.x===p.edge.x?0:(d.edge.x-p.edge.x)/Math.abs(d.edge.x-p.edge.x)),(i!==1||h%n===0)&&l.length>1)for(let d=0;d<l.length;d=d+2){const p=d+1;if(p>=l.length)break;const m=l[d].edge,w=l[p].edge;o.push([[Math.round(m.x),c],[Math.round(w.x),c]])}c+=i,l.forEach(d=>{d.edge.x=d.edge.x+i*d.edge.islope}),h++}return o}function uv(e,n){var i;const r=n.hachureAngle+90;let o=n.hachureGap;o<0&&(o=n.strokeWidth*4),o=Math.round(Math.max(o,.1));let a=1;return n.roughness>=1&&(((i=n.randomizer)===null||i===void 0?void 0:i.next())||Math.random())>.7&&(a=o),fR(e,o,r,a||1)}class eT{constructor(n){this.helper=n}fillPolygons(n,i){return this._fillPolygons(n,i)}_fillPolygons(n,i){const r=uv(n,i);return{type:"fillSketch",ops:this.renderLines(r,i)}}renderLines(n,i){const r=[];for(const o of n)r.push(...this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],i));return r}}function Dx(e){const n=e[0],i=e[1];return Math.sqrt(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2))}class dR extends eT{fillPolygons(n,i){let r=i.hachureGap;r<0&&(r=i.strokeWidth*4),r=Math.max(r,.1);const o=Object.assign({},i,{hachureGap:r}),a=uv(n,o),l=Math.PI/180*i.hachureAngle,c=[],h=r*.5*Math.cos(l),d=r*.5*Math.sin(l);for(const[m,w]of a)Dx([m,w])&&c.push([[m[0]-h,m[1]+d],[...w]],[[m[0]+h,m[1]-d],[...w]]);return{type:"fillSketch",ops:this.renderLines(c,i)}}}class gR extends eT{fillPolygons(n,i){const r=this._fillPolygons(n,i),o=Object.assign({},i,{hachureAngle:i.hachureAngle+90}),a=this._fillPolygons(n,o);return r.ops=r.ops.concat(a.ops),r}}class pR{constructor(n){this.helper=n}fillPolygons(n,i){i=Object.assign({},i,{hachureAngle:0});const r=uv(n,i);return this.dotsOnLines(r,i)}dotsOnLines(n,i){const r=[];let o=i.hachureGap;o<0&&(o=i.strokeWidth*4),o=Math.max(o,.1);let a=i.fillWeight;a<0&&(a=i.strokeWidth/2);const l=o/4;for(const c of n){const h=Dx(c),d=h/o,p=Math.ceil(d)-1,m=h-p*o,w=(c[0][0]+c[1][0])/2-o/4,x=Math.min(c[0][1],c[1][1]);for(let T=0;T<p;T++){const D=x+m+T*o,b=w-l+Math.random()*2*l,B=D-l+Math.random()*2*l,A=this.helper.ellipse(b,B,a,a,i);r.push(...A.ops)}}return{type:"fillSketch",ops:r}}}class mR{constructor(n){this.helper=n}fillPolygons(n,i){const r=uv(n,i);return{type:"fillSketch",ops:this.dashedLine(r,i)}}dashedLine(n,i){const r=i.dashOffset<0?i.hachureGap<0?i.strokeWidth*4:i.hachureGap:i.dashOffset,o=i.dashGap<0?i.hachureGap<0?i.strokeWidth*4:i.hachureGap:i.dashGap,a=[];return n.forEach(l=>{const c=Dx(l),h=Math.floor(c/(r+o)),d=(c+o-h*(r+o))/2;let p=l[0],m=l[1];p[0]>m[0]&&(p=l[1],m=l[0]);const w=Math.atan((m[1]-p[1])/(m[0]-p[0]));for(let x=0;x<h;x++){const T=x*(r+o),D=T+r,b=[p[0]+T*Math.cos(w)+d*Math.cos(w),p[1]+T*Math.sin(w)+d*Math.sin(w)],B=[p[0]+D*Math.cos(w)+d*Math.cos(w),p[1]+D*Math.sin(w)+d*Math.sin(w)];a.push(...this.helper.doubleLineOps(b[0],b[1],B[0],B[1],i))}}),a}}class vR{constructor(n){this.helper=n}fillPolygons(n,i){const r=i.hachureGap<0?i.strokeWidth*4:i.hachureGap,o=i.zigzagOffset<0?r:i.zigzagOffset;i=Object.assign({},i,{hachureGap:r+o});const a=uv(n,i);return{type:"fillSketch",ops:this.zigzagLines(a,o,i)}}zigzagLines(n,i,r){const o=[];return n.forEach(a=>{const l=Dx(a),c=Math.round(l/(2*i));let h=a[0],d=a[1];h[0]>d[0]&&(h=a[1],d=a[0]);const p=Math.atan((d[1]-h[1])/(d[0]-h[0]));for(let m=0;m<c;m++){const w=m*2*i,x=(m+1)*2*i,T=Math.sqrt(2*Math.pow(i,2)),D=[h[0]+w*Math.cos(p),h[1]+w*Math.sin(p)],b=[h[0]+x*Math.cos(p),h[1]+x*Math.sin(p)],B=[D[0]+T*Math.cos(p+Math.PI/4),D[1]+T*Math.sin(p+Math.PI/4)];o.push(...this.helper.doubleLineOps(D[0],D[1],B[0],B[1],r),...this.helper.doubleLineOps(B[0],B[1],b[0],b[1],r))}}),o}}const jo={};function yR(e,n){let i=e.fillStyle||"hachure";if(!jo[i])switch(i){case"zigzag":jo[i]||(jo[i]=new dR(n));break;case"cross-hatch":jo[i]||(jo[i]=new gR(n));break;case"dots":jo[i]||(jo[i]=new pR(n));break;case"dashed":jo[i]||(jo[i]=new mR(n));break;case"zigzag-line":jo[i]||(jo[i]=new vR(n));break;case"hachure":default:i="hachure",jo[i]||(jo[i]=new eT(n));break}return jo[i]}function wR(){return Math.floor(Math.random()*2**31)}class xR{constructor(n){this.seed=n}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const CR=0,L3=1,j8=2,F2={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function ER(e){const n=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]={type:CR,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))n[n.length]={type:L3,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return n[n.length]={type:j8,text:""},n}function TE(e,n){return e.type===n}function nT(e){const n=[],i=ER(e);let r="BOD",o=0,a=i[o];for(;!TE(a,j8);){let l=0;const c=[];if(r==="BOD")if(a.text==="M"||a.text==="m")o++,l=F2[a.text],r=a.text;else return nT("M0,0"+e);else TE(a,L3)?l=F2[r]:(o++,l=F2[a.text],r=a.text);if(o+l<i.length){for(let h=o;h<o+l;h++){const d=i[h];if(TE(d,L3))c[c.length]=+d.text;else throw new Error("Param not a number: "+r+","+d.text)}if(typeof F2[r]=="number"){const h={key:r,data:c};n.push(h),o+=l,a=i[o],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return n}function U8(e){let n=0,i=0,r=0,o=0;const a=[];for(const{key:l,data:c}of e)switch(l){case"M":a.push({key:"M",data:[...c]}),[n,i]=c,[r,o]=c;break;case"m":n+=c[0],i+=c[1],a.push({key:"M",data:[n,i]}),r=n,o=i;break;case"L":a.push({key:"L",data:[...c]}),[n,i]=c;break;case"l":n+=c[0],i+=c[1],a.push({key:"L",data:[n,i]});break;case"C":a.push({key:"C",data:[...c]}),n=c[4],i=c[5];break;case"c":{const h=c.map((d,p)=>p%2?d+i:d+n);a.push({key:"C",data:h}),n=h[4],i=h[5];break}case"Q":a.push({key:"Q",data:[...c]}),n=c[2],i=c[3];break;case"q":{const h=c.map((d,p)=>p%2?d+i:d+n);a.push({key:"Q",data:h}),n=h[2],i=h[3];break}case"A":a.push({key:"A",data:[...c]}),n=c[5],i=c[6];break;case"a":n+=c[5],i+=c[6],a.push({key:"A",data:[c[0],c[1],c[2],c[3],c[4],n,i]});break;case"H":a.push({key:"H",data:[...c]}),n=c[0];break;case"h":n+=c[0],a.push({key:"H",data:[n]});break;case"V":a.push({key:"V",data:[...c]}),i=c[0];break;case"v":i+=c[0],a.push({key:"V",data:[i]});break;case"S":a.push({key:"S",data:[...c]}),n=c[2],i=c[3];break;case"s":{const h=c.map((d,p)=>p%2?d+i:d+n);a.push({key:"S",data:h}),n=h[2],i=h[3];break}case"T":a.push({key:"T",data:[...c]}),n=c[0],i=c[1];break;case"t":n+=c[0],i+=c[1],a.push({key:"T",data:[n,i]});break;case"Z":case"z":a.push({key:"Z",data:[]}),n=r,i=o;break}return a}function $8(e){const n=[];let i="",r=0,o=0,a=0,l=0,c=0,h=0;for(const{key:d,data:p}of e){switch(d){case"M":n.push({key:"M",data:[...p]}),[r,o]=p,[a,l]=p;break;case"C":n.push({key:"C",data:[...p]}),r=p[4],o=p[5],c=p[2],h=p[3];break;case"L":n.push({key:"L",data:[...p]}),[r,o]=p;break;case"H":r=p[0],n.push({key:"L",data:[r,o]});break;case"V":o=p[0],n.push({key:"L",data:[r,o]});break;case"S":{let m=0,w=0;i==="C"||i==="S"?(m=r+(r-c),w=o+(o-h)):(m=r,w=o),n.push({key:"C",data:[m,w,...p]}),c=p[0],h=p[1],r=p[2],o=p[3];break}case"T":{const[m,w]=p;let x=0,T=0;i==="Q"||i==="T"?(x=r+(r-c),T=o+(o-h)):(x=r,T=o);const D=r+2*(x-r)/3,b=o+2*(T-o)/3,B=m+2*(x-m)/3,A=w+2*(T-w)/3;n.push({key:"C",data:[D,b,B,A,m,w]}),c=x,h=T,r=m,o=w;break}case"Q":{const[m,w,x,T]=p,D=r+2*(m-r)/3,b=o+2*(w-o)/3,B=x+2*(m-x)/3,A=T+2*(w-T)/3;n.push({key:"C",data:[D,b,B,A,x,T]}),c=m,h=w,r=x,o=T;break}case"A":{const m=Math.abs(p[0]),w=Math.abs(p[1]),x=p[2],T=p[3],D=p[4],b=p[5],B=p[6];m===0||w===0?(n.push({key:"C",data:[r,o,b,B,b,B]}),r=b,o=B):(r!==b||o!==B)&&(V8(r,o,b,B,m,w,x,T,D).forEach(function(I){n.push({key:"C",data:I})}),r=b,o=B);break}case"Z":n.push({key:"Z",data:[]}),r=a,o=l;break}i=d}return n}function SR(e){return Math.PI*e/180}function tm(e,n,i){const r=e*Math.cos(i)-n*Math.sin(i),o=e*Math.sin(i)+n*Math.cos(i);return[r,o]}function V8(e,n,i,r,o,a,l,c,h,d){const p=SR(l);let m=[],w=0,x=0,T=0,D=0;if(d)[w,x,T,D]=d;else{[e,n]=tm(e,n,-p),[i,r]=tm(i,r,-p);const ct=(e-i)/2,mt=(n-r)/2;let wt=ct*ct/(o*o)+mt*mt/(a*a);wt>1&&(wt=Math.sqrt(wt),o=wt*o,a=wt*a);const V=c===h?-1:1,P=o*o,_=a*a,N=P*_-P*mt*mt-_*ct*ct,$=P*mt*mt+_*ct*ct,Q=V*Math.sqrt(Math.abs(N/$));T=Q*o*mt/a+(e+i)/2,D=Q*-a*ct/o+(n+r)/2,w=Math.asin(parseFloat(((n-D)/a).toFixed(9))),x=Math.asin(parseFloat(((r-D)/a).toFixed(9))),e<T&&(w=Math.PI-w),i<T&&(x=Math.PI-x),w<0&&(w=Math.PI*2+w),x<0&&(x=Math.PI*2+x),h&&w>x&&(w=w-Math.PI*2),!h&&x>w&&(x=x-Math.PI*2)}let b=x-w;if(Math.abs(b)>Math.PI*120/180){const ct=x,mt=i,wt=r;h&&x>w?x=w+Math.PI*120/180*1:x=w+Math.PI*120/180*-1,i=T+o*Math.cos(x),r=D+a*Math.sin(x),m=V8(i,r,mt,wt,o,a,l,0,h,[x,ct,T,D])}b=x-w;const B=Math.cos(w),A=Math.sin(w),I=Math.cos(x),R=Math.sin(x),k=Math.tan(b/4),W=4/3*o*k,U=4/3*a*k,nt=[e,n],st=[e+W*A,n-U*B],ft=[i+W*R,r-U*I],Et=[i,r];if(st[0]=2*nt[0]-st[0],st[1]=2*nt[1]-st[1],d)return[st,ft,Et].concat(m);{m=[st,ft,Et].concat(m);const ct=[];for(let mt=0;mt<m.length;mt+=3){const wt=tm(m[mt][0],m[mt][1],p),V=tm(m[mt+1][0],m[mt+1][1],p),P=tm(m[mt+2][0],m[mt+2][1],p);ct.push([wt[0],wt[1],V[0],V[1],P[0],P[1]])}return ct}}const TR={randOffset:PR,randOffsetWithRange:MR,ellipse:bR,doubleLineOps:RR};function W8(e,n,i,r,o){return{type:"path",ops:nf(e,n,i,r,o)}}function fw(e,n,i){const r=(e||[]).length;if(r>2){const o=[];for(let a=0;a<r-1;a++)o.push(...nf(e[a][0],e[a][1],e[a+1][0],e[a+1][1],i));return n&&o.push(...nf(e[r-1][0],e[r-1][1],e[0][0],e[0][1],i)),{type:"path",ops:o}}else if(r===2)return W8(e[0][0],e[0][1],e[1][0],e[1][1],i);return{type:"path",ops:[]}}function AR(e,n){return fw(e,!0,n)}function DR(e,n,i,r,o){const a=[[e,n],[e+i,n],[e+i,n+r],[e,n+r]];return AR(a,o)}function gD(e,n){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,o=k2(r[0],1*(1+n.roughness*.2),n),a=n.disableMultiStroke?[]:k2(r[0],1.5*(1+n.roughness*.22),vD(n));for(let l=1;l<r.length;l++){const c=r[l];if(c.length){const h=k2(c,1*(1+n.roughness*.2),n),d=n.disableMultiStroke?[]:k2(c,1.5*(1+n.roughness*.22),vD(n));for(const p of h)p.op!=="move"&&o.push(p);for(const p of d)p.op!=="move"&&a.push(p)}}return{type:"path",ops:o.concat(a)}}return{type:"path",ops:[]}}function bR(e,n,i,r,o){const a=X8(i,r,o);return _3(e,n,o,a).opset}function X8(e,n,i){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(n/2,2))/2)),o=Math.ceil(Math.max(i.curveStepCount,i.curveStepCount/Math.sqrt(200)*r)),a=Math.PI*2/o;let l=Math.abs(e/2),c=Math.abs(n/2);const h=1-i.curveFitting;return l+=Ie(l*h,i),c+=Ie(c*h,i),{increment:a,rx:l,ry:c}}function _3(e,n,i,r){const[o,a]=yD(r.increment,e,n,r.rx,r.ry,1,r.increment*Lw(.1,Lw(.4,1,i),i),i);let l=_w(o,null,i);if(!i.disableMultiStroke&&i.roughness!==0){const[c]=yD(r.increment,e,n,r.rx,r.ry,1.5,0,i),h=_w(c,null,i);l=l.concat(h)}return{estimatedPoints:a,opset:{type:"path",ops:l}}}function pD(e,n,i,r,o,a,l,c,h){const d=e,p=n;let m=Math.abs(i/2),w=Math.abs(r/2);m+=Ie(m*.01,h),w+=Ie(w*.01,h);let x=o,T=a;for(;x<0;)x+=Math.PI*2,T+=Math.PI*2;T-x>Math.PI*2&&(x=0,T=Math.PI*2);const D=Math.PI*2/h.curveStepCount,b=Math.min(D/2,(T-x)/2),B=wD(b,d,p,m,w,x,T,1,h);if(!h.disableMultiStroke){const A=wD(b,d,p,m,w,x,T,1.5,h);B.push(...A)}return l&&(c?B.push(...nf(d,p,d+m*Math.cos(x),p+w*Math.sin(x),h),...nf(d,p,d+m*Math.cos(T),p+w*Math.sin(T),h)):B.push({op:"lineTo",data:[d,p]},{op:"lineTo",data:[d+m*Math.cos(x),p+w*Math.sin(x)]})),{type:"path",ops:B}}function mD(e,n){const i=$8(U8(nT(e))),r=[];let o=[0,0],a=[0,0];for(const{key:l,data:c}of i)switch(l){case"M":{a=[c[0],c[1]],o=[c[0],c[1]];break}case"L":r.push(...nf(a[0],a[1],c[0],c[1],n)),a=[c[0],c[1]];break;case"C":{const[h,d,p,m,w,x]=c;r.push(...OR(h,d,p,m,w,x,a,n)),a=[w,x];break}case"Z":r.push(...nf(a[0],a[1],o[0],o[1],n)),a=[o[0],o[1]];break}return{type:"path",ops:r}}function AE(e,n){const i=[];for(const r of e)if(r.length){const o=n.maxRandomnessOffset||0,a=r.length;if(a>2){i.push({op:"move",data:[r[0][0]+Ie(o,n),r[0][1]+Ie(o,n)]});for(let l=1;l<a;l++)i.push({op:"lineTo",data:[r[l][0]+Ie(o,n),r[l][1]+Ie(o,n)]})}}return{type:"fillPath",ops:i}}function sg(e,n){return yR(n,TR).fillPolygons(e,n)}function BR(e,n,i,r,o,a,l){const c=e,h=n;let d=Math.abs(i/2),p=Math.abs(r/2);d+=Ie(d*.01,l),p+=Ie(p*.01,l);let m=o,w=a;for(;m<0;)m+=Math.PI*2,w+=Math.PI*2;w-m>Math.PI*2&&(m=0,w=Math.PI*2);const x=(w-m)/l.curveStepCount,T=[];for(let D=m;D<=w;D=D+x)T.push([c+d*Math.cos(D),h+p*Math.sin(D)]);return T.push([c+d*Math.cos(w),h+p*Math.sin(w)]),T.push([c,h]),sg([T],l)}function PR(e,n){return Ie(e,n)}function MR(e,n,i){return Lw(e,n,i)}function RR(e,n,i,r,o){return nf(e,n,i,r,o,!0)}function vD(e){const n=Object.assign({},e);return n.randomizer=void 0,e.seed&&(n.seed=e.seed+1),n}function q8(e){return e.randomizer||(e.randomizer=new xR(e.seed||0)),e.randomizer.next()}function Lw(e,n,i,r=1){return i.roughness*r*(q8(i)*(n-e)+e)}function Ie(e,n,i=1){return Lw(-e,e,n,i)}function nf(e,n,i,r,o,a=!1){const l=a?o.disableMultiStrokeFill:o.disableMultiStroke,c=F3(e,n,i,r,o,!0,!1);if(l)return c;const h=F3(e,n,i,r,o,!0,!0);return c.concat(h)}function F3(e,n,i,r,o,a,l){const c=Math.pow(e-i,2)+Math.pow(n-r,2),h=Math.sqrt(c);let d=1;h<200?d=1:h>500?d=.4:d=-.0016668*h+1.233334;let p=o.maxRandomnessOffset||0;p*p*100>c&&(p=h/10);const m=p/2,w=.2+q8(o)*.2;let x=o.bowing*o.maxRandomnessOffset*(r-n)/200,T=o.bowing*o.maxRandomnessOffset*(e-i)/200;x=Ie(x,o,d),T=Ie(T,o,d);const D=[],b=()=>Ie(m,o,d),B=()=>Ie(p,o,d),A=o.preserveVertices;return l?D.push({op:"move",data:[e+(A?0:b()),n+(A?0:b())]}):D.push({op:"move",data:[e+(A?0:Ie(p,o,d)),n+(A?0:Ie(p,o,d))]}),l?D.push({op:"bcurveTo",data:[x+e+(i-e)*w+b(),T+n+(r-n)*w+b(),x+e+2*(i-e)*w+b(),T+n+2*(r-n)*w+b(),i+(A?0:b()),r+(A?0:b())]}):D.push({op:"bcurveTo",data:[x+e+(i-e)*w+B(),T+n+(r-n)*w+B(),x+e+2*(i-e)*w+B(),T+n+2*(r-n)*w+B(),i+(A?0:B()),r+(A?0:B())]}),D}function k2(e,n,i){if(!e.length)return[];const r=[];r.push([e[0][0]+Ie(n,i),e[0][1]+Ie(n,i)]),r.push([e[0][0]+Ie(n,i),e[0][1]+Ie(n,i)]);for(let o=1;o<e.length;o++)r.push([e[o][0]+Ie(n,i),e[o][1]+Ie(n,i)]),o===e.length-1&&r.push([e[o][0]+Ie(n,i),e[o][1]+Ie(n,i)]);return _w(r,null,i)}function _w(e,n,i){const r=e.length,o=[];if(r>3){const a=[],l=1-i.curveTightness;o.push({op:"move",data:[e[1][0],e[1][1]]});for(let c=1;c+2<r;c++){const h=e[c];a[0]=[h[0],h[1]],a[1]=[h[0]+(l*e[c+1][0]-l*e[c-1][0])/6,h[1]+(l*e[c+1][1]-l*e[c-1][1])/6],a[2]=[e[c+1][0]+(l*e[c][0]-l*e[c+2][0])/6,e[c+1][1]+(l*e[c][1]-l*e[c+2][1])/6],a[3]=[e[c+1][0],e[c+1][1]],o.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}}else r===3?(o.push({op:"move",data:[e[1][0],e[1][1]]}),o.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&o.push(...F3(e[0][0],e[0][1],e[1][0],e[1][1],i,!0,!0));return o}function yD(e,n,i,r,o,a,l,c){const h=c.roughness===0,d=[],p=[];if(h){e=e/4,p.push([n+r*Math.cos(-e),i+o*Math.sin(-e)]);for(let m=0;m<=Math.PI*2;m=m+e){const w=[n+r*Math.cos(m),i+o*Math.sin(m)];d.push(w),p.push(w)}p.push([n+r*Math.cos(0),i+o*Math.sin(0)]),p.push([n+r*Math.cos(e),i+o*Math.sin(e)])}else{const m=Ie(.5,c)-Math.PI/2;p.push([Ie(a,c)+n+.9*r*Math.cos(m-e),Ie(a,c)+i+.9*o*Math.sin(m-e)]);const w=Math.PI*2+m-.01;for(let x=m;x<w;x=x+e){const T=[Ie(a,c)+n+r*Math.cos(x),Ie(a,c)+i+o*Math.sin(x)];d.push(T),p.push(T)}p.push([Ie(a,c)+n+r*Math.cos(m+Math.PI*2+l*.5),Ie(a,c)+i+o*Math.sin(m+Math.PI*2+l*.5)]),p.push([Ie(a,c)+n+.98*r*Math.cos(m+l),Ie(a,c)+i+.98*o*Math.sin(m+l)]),p.push([Ie(a,c)+n+.9*r*Math.cos(m+l*.5),Ie(a,c)+i+.9*o*Math.sin(m+l*.5)])}return[p,d]}function wD(e,n,i,r,o,a,l,c,h){const d=a+Ie(.1,h),p=[];p.push([Ie(c,h)+n+.9*r*Math.cos(d-e),Ie(c,h)+i+.9*o*Math.sin(d-e)]);for(let m=d;m<=l;m=m+e)p.push([Ie(c,h)+n+r*Math.cos(m),Ie(c,h)+i+o*Math.sin(m)]);return p.push([n+r*Math.cos(l),i+o*Math.sin(l)]),p.push([n+r*Math.cos(l),i+o*Math.sin(l)]),_w(p,null,h)}function OR(e,n,i,r,o,a,l,c){const h=[],d=[c.maxRandomnessOffset||1,(c.maxRandomnessOffset||1)+.3];let p=[0,0];const m=c.disableMultiStroke?1:2,w=c.preserveVertices;for(let x=0;x<m;x++)x===0?h.push({op:"move",data:[l[0],l[1]]}):h.push({op:"move",data:[l[0]+(w?0:Ie(d[0],c)),l[1]+(w?0:Ie(d[0],c))]}),p=w?[o,a]:[o+Ie(d[x],c),a+Ie(d[x],c)],h.push({op:"bcurveTo",data:[e+Ie(d[x],c),n+Ie(d[x],c),i+Ie(d[x],c),r+Ie(d[x],c),p[0],p[1]]});return h}function em(e){return[...e]}function xD(e,n=0){const i=e.length;if(i<3)throw new Error("A curve must have at least three points.");const r=[];if(i===3)r.push(em(e[0]),em(e[1]),em(e[2]),em(e[2]));else{const o=[];o.push(e[0],e[0]);for(let c=1;c<e.length;c++)o.push(e[c]),c===e.length-1&&o.push(e[c]);const a=[],l=1-n;r.push(em(o[0]));for(let c=1;c+2<o.length;c++){const h=o[c];a[0]=[h[0],h[1]],a[1]=[h[0]+(l*o[c+1][0]-l*o[c-1][0])/6,h[1]+(l*o[c+1][1]-l*o[c-1][1])/6],a[2]=[o[c+1][0]+(l*o[c][0]-l*o[c+2][0])/6,o[c+1][1]+(l*o[c][1]-l*o[c+2][1])/6],a[3]=[o[c+1][0],o[c+1][1]],r.push(a[1],a[2],a[3])}}return r}function LR(e,n){return Math.sqrt(hw(e,n))}function hw(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function _R(e,n,i){const r=hw(n,i);if(r===0)return hw(e,n);let o=((e[0]-n[0])*(i[0]-n[0])+(e[1]-n[1])*(i[1]-n[1]))/r;return o=Math.max(0,Math.min(1,o)),hw(e,kh(n,i,o))}function kh(e,n,i){return[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]}function FR(e,n){const i=e[n+0],r=e[n+1],o=e[n+2],a=e[n+3];let l=3*r[0]-2*i[0]-a[0];l*=l;let c=3*r[1]-2*i[1]-a[1];c*=c;let h=3*o[0]-2*a[0]-i[0];h*=h;let d=3*o[1]-2*a[1]-i[1];return d*=d,l<h&&(l=h),c<d&&(c=d),l+c}function k3(e,n,i,r){const o=r||[];if(FR(e,n)<i){const a=e[n+0];o.length?LR(o[o.length-1],a)>1&&o.push(a):o.push(a),o.push(e[n+3])}else{const l=e[n+0],c=e[n+1],h=e[n+2],d=e[n+3],p=kh(l,c,.5),m=kh(c,h,.5),w=kh(h,d,.5),x=kh(p,m,.5),T=kh(m,w,.5),D=kh(x,T,.5);k3([l,p,x,D],0,i,o),k3([D,T,w,d],0,i,o)}return o}function I3(e,n,i,r,o){const a=o||[],l=e[n],c=e[i-1];let h=0,d=1;for(let p=n+1;p<i-1;++p){const m=_R(e[p],l,c);m>h&&(h=m,d=p)}return Math.sqrt(h)>r?(I3(e,n,d+1,r,a),I3(e,d,i,r,a)):(a.length||a.push(l),a.push(c)),a}function CD(e,n=.15,i){const r=[],o=(e.length-1)/3;for(let a=0;a<o;a++){const l=a*3;k3(e,l,n,r)}return i&&i>0?I3(r,0,r.length,i):r}function kR(e,n){return Math.sqrt(dw(e,n))}function dw(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function IR(e,n,i){const r=dw(n,i);if(r===0)return dw(e,n);let o=((e[0]-n[0])*(i[0]-n[0])+(e[1]-n[1])*(i[1]-n[1]))/r;return o=Math.max(0,Math.min(1,o)),dw(e,Ih(n,i,o))}function Ih(e,n,i){return[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]}function HR(e,n){const i=e[n+0],r=e[n+1],o=e[n+2],a=e[n+3];let l=3*r[0]-2*i[0]-a[0];l*=l;let c=3*r[1]-2*i[1]-a[1];c*=c;let h=3*o[0]-2*a[0]-i[0];h*=h;let d=3*o[1]-2*a[1]-i[1];return d*=d,l<h&&(l=h),c<d&&(c=d),l+c}function H3(e,n,i,r){const o=r||[];if(HR(e,n)<i){const a=e[n+0];o.length?kR(o[o.length-1],a)>1&&o.push(a):o.push(a),o.push(e[n+3])}else{const l=e[n+0],c=e[n+1],h=e[n+2],d=e[n+3],p=Ih(l,c,.5),m=Ih(c,h,.5),w=Ih(h,d,.5),x=Ih(p,m,.5),T=Ih(m,w,.5),D=Ih(x,T,.5);H3([l,p,x,D],0,i,o),H3([D,T,w,d],0,i,o)}return o}function NR(e,n){return N3(e,0,e.length,n)}function N3(e,n,i,r,o){const a=o||[],l=e[n],c=e[i-1];let h=0,d=1;for(let p=n+1;p<i-1;++p){const m=IR(e[p],l,c);m>h&&(h=m,d=p)}return Math.sqrt(h)>r?(N3(e,n,d+1,r,a),N3(e,d,i,r,a)):(a.length||a.push(l),a.push(c)),a}function GR(e,n=.15,i){const r=[],o=(e.length-1)/3;for(let a=0;a<o;a++){const l=a*3;H3(e,l,n,r)}return r}function zR(e,n,i){const r=nT(e),o=$8(U8(r)),a=[];let l=[],c=[0,0],h=[];const d=()=>{h.length>=4&&l.push(...GR(h,n)),h=[]},p=()=>{d(),l.length&&(a.push(l),l=[])};for(const{key:w,data:x}of o)switch(w){case"M":p(),c=[x[0],x[1]],l.push(c);break;case"L":d(),l.push([x[0],x[1]]);break;case"C":if(!h.length){const T=l.length?l[l.length-1]:c;h.push([T[0],T[1]])}h.push([x[0],x[1]]),h.push([x[2],x[3]]),h.push([x[4],x[5]]);break;case"Z":d(),l.push([c[0],c[1]]);break}if(p(),!i)return a;const m=[];for(const w of a){const x=NR(w,i);x.length&&m.push(x)}return m}const ys="none";class Fw{constructor(n){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=n||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return wR()}_o(n){return n?Object.assign({},this.defaultOptions,n):this.defaultOptions}_d(n,i,r){return{shape:n,sets:i||[],options:r||this.defaultOptions}}line(n,i,r,o,a){const l=this._o(a);return this._d("line",[W8(n,i,r,o,l)],l)}rectangle(n,i,r,o,a){const l=this._o(a),c=[],h=DR(n,i,r,o,l);if(l.fill){const d=[[n,i],[n+r,i],[n+r,i+o],[n,i+o]];l.fillStyle==="solid"?c.push(AE([d],l)):c.push(sg([d],l))}return l.stroke!==ys&&c.push(h),this._d("rectangle",c,l)}ellipse(n,i,r,o,a){const l=this._o(a),c=[],h=X8(r,o,l),d=_3(n,i,l,h);if(l.fill)if(l.fillStyle==="solid"){const p=_3(n,i,l,h).opset;p.type="fillPath",c.push(p)}else c.push(sg([d.estimatedPoints],l));return l.stroke!==ys&&c.push(d.opset),this._d("ellipse",c,l)}circle(n,i,r,o){const a=this.ellipse(n,i,r,r,o);return a.shape="circle",a}linearPath(n,i){const r=this._o(i);return this._d("linearPath",[fw(n,!1,r)],r)}arc(n,i,r,o,a,l,c=!1,h){const d=this._o(h),p=[],m=pD(n,i,r,o,a,l,c,!0,d);if(c&&d.fill)if(d.fillStyle==="solid"){const w=Object.assign({},d);w.disableMultiStroke=!0;const x=pD(n,i,r,o,a,l,!0,!1,w);x.type="fillPath",p.push(x)}else p.push(BR(n,i,r,o,a,l,d));return d.stroke!==ys&&p.push(m),this._d("arc",p,d)}curve(n,i){const r=this._o(i),o=[],a=gD(n,r);if(r.fill&&r.fill!==ys)if(r.fillStyle==="solid"){const l=gD(n,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(l.ops)})}else{const l=[],c=n;if(c.length){const d=typeof c[0][0]=="number"?[c]:c;for(const p of d)p.length<3?l.push(...p):p.length===3?l.push(...CD(xD([p[0],p[0],p[1],p[2]]),10,(1+r.roughness)/2)):l.push(...CD(xD(p),10,(1+r.roughness)/2))}l.length&&o.push(sg([l],r))}return r.stroke!==ys&&o.push(a),this._d("curve",o,r)}polygon(n,i){const r=this._o(i),o=[],a=fw(n,!0,r);return r.fill&&(r.fillStyle==="solid"?o.push(AE([n],r)):o.push(sg([n],r))),r.stroke!==ys&&o.push(a),this._d("polygon",o,r)}path(n,i){const r=this._o(i),o=[];if(!n)return this._d("path",o,r);n=(n||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=r.fill&&r.fill!=="transparent"&&r.fill!==ys,l=r.stroke!==ys,c=!!(r.simplification&&r.simplification<1),h=c?4-4*(r.simplification||1):(1+r.roughness)/2,d=zR(n,1,h),p=mD(n,r);if(a)if(r.fillStyle==="solid")if(d.length===1){const m=mD(n,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(m.ops)})}else o.push(AE(d,r));else o.push(sg(d,r));return l&&(c?d.forEach(m=>{o.push(fw(m,!1,r))}):o.push(p)),this._d("path",o,r)}opsToPath(n,i){let r="";for(const o of n.ops){const a=typeof i=="number"&&i>=0?o.data.map(l=>+l.toFixed(i)):o.data;switch(o.op){case"move":r+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":r+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":r+=`L${a[0]} ${a[1]} `;break}}return r.trim()}toPaths(n){const i=n.sets||[],r=n.options||this.defaultOptions,o=[];for(const a of i){let l=null;switch(a.type){case"path":l={d:this.opsToPath(a),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:ys};break;case"fillPath":l={d:this.opsToPath(a),stroke:ys,strokeWidth:0,fill:r.fill||ys};break;case"fillSketch":l=this.fillSketch(a,r);break}l&&o.push(l)}return o}fillSketch(n,i){let r=i.fillWeight;return r<0&&(r=i.strokeWidth/2),{d:this.opsToPath(n),stroke:i.fill||ys,strokeWidth:r,fill:ys}}_mergedShape(n){return n.filter((i,r)=>r===0?!0:i.op!=="move")}}class jR{constructor(n,i){this.canvas=n,this.ctx=this.canvas.getContext("2d"),this.gen=new Fw(i)}draw(n){const i=n.sets||[],r=n.options||this.getDefaultOptions(),o=this.ctx,a=n.options.fixedDecimalPlaceDigits;for(const l of i)switch(l.type){case"path":o.save(),o.strokeStyle=r.stroke==="none"?"transparent":r.stroke,o.lineWidth=r.strokeWidth,r.strokeLineDash&&o.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(o.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(o,l,a),o.restore();break;case"fillPath":{o.save(),o.fillStyle=r.fill||"";const c=n.shape==="curve"||n.shape==="polygon"||n.shape==="path"?"evenodd":"nonzero";this._drawToContext(o,l,a,c),o.restore();break}case"fillSketch":this.fillSketch(o,l,r);break}}fillSketch(n,i,r){let o=r.fillWeight;o<0&&(o=r.strokeWidth/2),n.save(),r.fillLineDash&&n.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(n.lineDashOffset=r.fillLineDashOffset),n.strokeStyle=r.fill||"",n.lineWidth=o,this._drawToContext(n,i,r.fixedDecimalPlaceDigits),n.restore()}_drawToContext(n,i,r,o="nonzero"){n.beginPath();for(const a of i.ops){const l=typeof r=="number"&&r>=0?a.data.map(c=>+c.toFixed(r)):a.data;switch(a.op){case"move":n.moveTo(l[0],l[1]);break;case"bcurveTo":n.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"lineTo":n.lineTo(l[0],l[1]);break}}i.type==="fillPath"?n.fill(o):n.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(n,i,r,o,a){const l=this.gen.line(n,i,r,o,a);return this.draw(l),l}rectangle(n,i,r,o,a){const l=this.gen.rectangle(n,i,r,o,a);return this.draw(l),l}ellipse(n,i,r,o,a){const l=this.gen.ellipse(n,i,r,o,a);return this.draw(l),l}circle(n,i,r,o){const a=this.gen.circle(n,i,r,o);return this.draw(a),a}linearPath(n,i){const r=this.gen.linearPath(n,i);return this.draw(r),r}polygon(n,i){const r=this.gen.polygon(n,i);return this.draw(r),r}arc(n,i,r,o,a,l,c=!1,h){const d=this.gen.arc(n,i,r,o,a,l,c,h);return this.draw(d),d}curve(n,i){const r=this.gen.curve(n,i);return this.draw(r),r}path(n,i){const r=this.gen.path(n,i);return this.draw(r),r}}const I2="http://www.w3.org/2000/svg";class UR{constructor(n,i){this.svg=n,this.gen=new Fw(i)}draw(n){const i=n.sets||[],r=n.options||this.getDefaultOptions(),o=this.svg.ownerDocument||window.document,a=o.createElementNS(I2,"g"),l=n.options.fixedDecimalPlaceDigits;for(const c of i){let h=null;switch(c.type){case"path":{h=o.createElementNS(I2,"path"),h.setAttribute("d",this.opsToPath(c,l)),h.setAttribute("stroke",r.stroke),h.setAttribute("stroke-width",r.strokeWidth+""),h.setAttribute("fill","none"),r.strokeLineDash&&h.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&h.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{h=o.createElementNS(I2,"path"),h.setAttribute("d",this.opsToPath(c,l)),h.setAttribute("stroke","none"),h.setAttribute("stroke-width","0"),h.setAttribute("fill",r.fill||""),(n.shape==="curve"||n.shape==="polygon")&&h.setAttribute("fill-rule","evenodd");break}case"fillSketch":{h=this.fillSketch(o,c,r);break}}h&&a.appendChild(h)}return a}fillSketch(n,i,r){let o=r.fillWeight;o<0&&(o=r.strokeWidth/2);const a=n.createElementNS(I2,"path");return a.setAttribute("d",this.opsToPath(i,r.fixedDecimalPlaceDigits)),a.setAttribute("stroke",r.fill||""),a.setAttribute("stroke-width",o+""),a.setAttribute("fill","none"),r.fillLineDash&&a.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(n,i){return this.gen.opsToPath(n,i)}line(n,i,r,o,a){const l=this.gen.line(n,i,r,o,a);return this.draw(l)}rectangle(n,i,r,o,a){const l=this.gen.rectangle(n,i,r,o,a);return this.draw(l)}ellipse(n,i,r,o,a){const l=this.gen.ellipse(n,i,r,o,a);return this.draw(l)}circle(n,i,r,o){const a=this.gen.circle(n,i,r,o);return this.draw(a)}linearPath(n,i){const r=this.gen.linearPath(n,i);return this.draw(r)}polygon(n,i){const r=this.gen.polygon(n,i);return this.draw(r)}arc(n,i,r,o,a,l,c=!1,h){const d=this.gen.arc(n,i,r,o,a,l,c,h);return this.draw(d)}curve(n,i){const r=this.gen.curve(n,i);return this.draw(r)}path(n,i){const r=this.gen.path(n,i);return this.draw(r)}}const $R={canvas(e,n){return new jR(e,n)},svg(e,n){return new UR(e,n)},generator(e){return new Fw(e)},newSeed(){return Fw.newSeed()}};var Y8=Symbol.for("immer-nothing"),ED=Symbol.for("immer-draftable"),As=Symbol.for("immer-state");function Aa(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ag=Object.getPrototypeOf;function xu(e){return!!e&&!!e[As]}function Qh(e){var n;return e?K8(e)||Array.isArray(e)||!!e[ED]||!!((n=e.constructor)!=null&&n[ED])||Bx(e)||Px(e):!1}var VR=Object.prototype.constructor.toString();function K8(e){if(!e||typeof e!="object")return!1;const n=Ag(e);if(n===null)return!0;const i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===VR}function kw(e,n){bx(e)===0?Reflect.ownKeys(e).forEach(i=>{n(i,e[i],e)}):e.forEach((i,r)=>n(r,i,e))}function bx(e){const n=e[As];return n?n.type_:Array.isArray(e)?1:Bx(e)?2:Px(e)?3:0}function G3(e,n){return bx(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Z8(e,n,i){const r=bx(e);r===2?e.set(n,i):r===3?e.add(i):e[n]=i}function WR(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function Bx(e){return e instanceof Map}function Px(e){return e instanceof Set}function Hh(e){return e.copy_||e.base_}function z3(e,n){if(Bx(e))return new Map(e);if(Px(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=K8(e);if(n===!0||n==="class_only"&&!i){const r=Object.getOwnPropertyDescriptors(e);delete r[As];let o=Reflect.ownKeys(r);for(let a=0;a<o.length;a++){const l=o[a],c=r[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[l]})}return Object.create(Ag(e),r)}else{const r=Ag(e);if(r!==null&&i)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function iT(e,n=!1){return Mx(e)||xu(e)||!Qh(e)||(bx(e)>1&&(e.set=e.add=e.clear=e.delete=XR),Object.freeze(e),n&&Object.entries(e).forEach(([i,r])=>iT(r,!0))),e}function XR(){Aa(2)}function Mx(e){return Object.isFrozen(e)}var qR={};function Jh(e){const n=qR[e];return n||Aa(0,e),n}var Bm;function Q8(){return Bm}function YR(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SD(e,n){n&&(Jh("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function j3(e){U3(e),e.drafts_.forEach(KR),e.drafts_=null}function U3(e){e===Bm&&(Bm=e.parent_)}function TD(e){return Bm=YR(Bm,e)}function KR(e){const n=e[As];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function AD(e,n){n.unfinalizedDrafts_=n.drafts_.length;const i=n.drafts_[0];return e!==void 0&&e!==i?(i[As].modified_&&(j3(n),Aa(4)),Qh(e)&&(e=Iw(n,e),n.parent_||Hw(n,e)),n.patches_&&Jh("Patches").generateReplacementPatches_(i[As].base_,e,n.patches_,n.inversePatches_)):e=Iw(n,i,[]),j3(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==Y8?e:void 0}function Iw(e,n,i){if(Mx(n))return n;const r=n[As];if(!r)return kw(n,(o,a)=>DD(e,r,n,o,a,i)),n;if(r.scope_!==e)return n;if(!r.modified_)return Hw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let a=o,l=!1;r.type_===3&&(a=new Set(o),o.clear(),l=!0),kw(a,(c,h)=>DD(e,r,o,c,h,i,l)),Hw(e,o,!1),i&&e.patches_&&Jh("Patches").generatePatches_(r,i,e.patches_,e.inversePatches_)}return r.copy_}function DD(e,n,i,r,o,a,l){if(xu(o)){const c=a&&n&&n.type_!==3&&!G3(n.assigned_,r)?a.concat(r):void 0,h=Iw(e,o,c);if(Z8(i,r,h),xu(h))e.canAutoFreeze_=!1;else return}else l&&i.add(o);if(Qh(o)&&!Mx(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Iw(e,o),(!n||!n.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(i,r)&&Hw(e,o)}}function Hw(e,n,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&iT(n,i)}function ZR(e,n){const i=Array.isArray(e),r={type_:i?1:0,scope_:n?n.scope_:Q8(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,a=rT;i&&(o=[r],a=Pm);const{revoke:l,proxy:c}=Proxy.revocable(o,a);return r.draft_=c,r.revoke_=l,c}var rT={get(e,n){if(n===As)return e;const i=Hh(e);if(!G3(i,n))return QR(e,i,n);const r=i[n];return e.finalized_||!Qh(r)?r:r===DE(e.base_,n)?(bE(e),e.copy_[n]=V3(r,e)):r},has(e,n){return n in Hh(e)},ownKeys(e){return Reflect.ownKeys(Hh(e))},set(e,n,i){const r=J8(Hh(e),n);if(r!=null&&r.set)return r.set.call(e.draft_,i),!0;if(!e.modified_){const o=DE(Hh(e),n),a=o==null?void 0:o[As];if(a&&a.base_===i)return e.copy_[n]=i,e.assigned_[n]=!1,!0;if(WR(i,o)&&(i!==void 0||G3(e.base_,n)))return!0;bE(e),$3(e)}return e.copy_[n]===i&&(i!==void 0||n in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=i,e.assigned_[n]=!0),!0},deleteProperty(e,n){return DE(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,bE(e),$3(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const i=Hh(e),r=Reflect.getOwnPropertyDescriptor(i,n);return r&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:r.enumerable,value:i[n]}},defineProperty(){Aa(11)},getPrototypeOf(e){return Ag(e.base_)},setPrototypeOf(){Aa(12)}},Pm={};kw(rT,(e,n)=>{Pm[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Pm.deleteProperty=function(e,n){return Pm.set.call(this,e,n,void 0)};Pm.set=function(e,n,i){return rT.set.call(this,e[0],n,i,e[0])};function DE(e,n){const i=e[As];return(i?Hh(i):e)[n]}function QR(e,n,i){var o;const r=J8(n,i);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function J8(e,n){if(!(n in e))return;let i=Ag(e);for(;i;){const r=Object.getOwnPropertyDescriptor(i,n);if(r)return r;i=Ag(i)}}function $3(e){e.modified_||(e.modified_=!0,e.parent_&&$3(e.parent_))}function bE(e){e.copy_||(e.copy_=z3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var JR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,i,r)=>{if(typeof n=="function"&&typeof i!="function"){const a=i;i=n;const l=this;return function(h=a,...d){return l.produce(h,p=>i.call(this,p,...d))}}typeof i!="function"&&Aa(6),r!==void 0&&typeof r!="function"&&Aa(7);let o;if(Qh(n)){const a=TD(this),l=V3(n,void 0);let c=!0;try{o=i(l),c=!1}finally{c?j3(a):U3(a)}return SD(a,r),AD(o,a)}else if(!n||typeof n!="object"){if(o=i(n),o===void 0&&(o=n),o===Y8&&(o=void 0),this.autoFreeze_&&iT(o,!0),r){const a=[],l=[];Jh("Patches").generateReplacementPatches_(n,o,a,l),r(a,l)}return o}else Aa(1,n)},this.produceWithPatches=(n,i)=>{if(typeof n=="function")return(l,...c)=>this.produceWithPatches(l,h=>n(h,...c));let r,o;return[this.produce(n,i,(l,c)=>{r=l,o=c}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Qh(e)||Aa(8),xu(e)&&(e=tO(e));const n=TD(this),i=V3(e,void 0);return i[As].isManual_=!0,U3(n),i}finishDraft(e,n){const i=e&&e[As];(!i||!i.isManual_)&&Aa(9);const{scope_:r}=i;return SD(r,n),AD(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let i;for(i=n.length-1;i>=0;i--){const o=n[i];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}i>-1&&(n=n.slice(i+1));const r=Jh("Patches").applyPatches_;return xu(e)?r(e,n):this.produce(e,o=>r(o,n))}};function V3(e,n){const i=Bx(e)?Jh("MapSet").proxyMap_(e,n):Px(e)?Jh("MapSet").proxySet_(e,n):ZR(e,n);return(n?n.scope_:Q8()).drafts_.push(i),i}function tO(e){return xu(e)||Aa(10,e),t4(e)}function t4(e){if(!Qh(e)||Mx(e))return e;const n=e[As];let i;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,i=z3(e,n.scope_.immer_.useStrictShallowCopy_)}else i=z3(e,!0);return kw(i,(r,o)=>{Z8(i,r,t4(o))}),n&&(n.finalized_=!1),i}var Ds=new JR,eO=Ds.produce;Ds.produceWithPatches.bind(Ds);Ds.setAutoFreeze.bind(Ds);Ds.setUseStrictShallowCopy.bind(Ds);Ds.applyPatches.bind(Ds);var H2=Ds.createDraft.bind(Ds),N2=Ds.finishDraft.bind(Ds),Sa={},bD;function nO(){if(bD)return Sa;bD=1,Object.defineProperty(Sa,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},i={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=1;o<20;o++)r["f"+o]=111+o;function a(w,x,T){x&&!("byKey"in x)&&(T=x,x=null),Array.isArray(w)||(w=[w]);var D=w.map(function(A){return h(A,x)}),b=function(I){return D.some(function(R){return d(R,I)})},B=T==null?b:b(T);return B}function l(w,x){return a(w,x)}function c(w,x){return a(w,{byKey:!0},x)}function h(w,x){var T=x&&x.byKey,D={};w=w.replace("++","+add");var b=w.split("+"),B=b.length;for(var A in n)D[n[A]]=!1;var I=!0,R=!1,k=void 0;try{for(var W=b[Symbol.iterator](),U;!(I=(U=W.next()).done);I=!0){var nt=U.value,st=nt.endsWith("?")&&nt.length>1;st&&(nt=nt.slice(0,-1));var ft=m(nt),Et=n[ft];if(nt.length>1&&!Et&&!i[nt]&&!r[ft])throw new TypeError('Unknown modifier: "'+nt+'"');(B===1||!Et)&&(T?D.key=ft:D.which=p(nt)),Et&&(D[Et]=st?null:!0)}}catch(ct){R=!0,k=ct}finally{try{!I&&W.return&&W.return()}finally{if(R)throw k}}return D}function d(w,x){for(var T in w){var D=w[T],b=void 0;if(D!=null&&(T==="key"&&x.key!=null?b=x.key.toLowerCase():T==="which"?b=D===91&&x.which===93?91:x.which:b=x[T],!(b==null&&D===!1)&&b!==D))return!1}return!0}function p(w){w=m(w);var x=r[w]||w.toUpperCase().charCodeAt(0);return x}function m(w){return w=w.toLowerCase(),w=i[w]||w,w}return Sa.default=a,Sa.isHotkey=a,Sa.isCodeHotkey=l,Sa.isKeyHotkey=c,Sa.parseHotkey=h,Sa.compareHotkey=d,Sa.toKeyCode=p,Sa.toKeyName=m,Sa}var ln=nO(),Da;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(Da||(Da={}));var gm;(function(e){e.crosshair="crosshair"})(gm||(gm={}));const BE=[Da.ns,Da.nesw,Da.ew,Da.nwse],Fa="plait-board-attached",Fi=1,W3=2,cv="selection-rectangle",iO="selection-rectangle-bounding",rO=.1,e4=.1,n4=4,oO="plait-board-container",i4="active-with-moving",BD="rotate-handle",sO="resize-handle",aO=20,oT={MAIN:0,WHEEL:1,SECONDARY:2},sT=3,r4=10,aT=5;function lO(e){return!!e.beforeContextChange}function uO(e){return!!e.onContextChanged}const PD=new WeakMap,gw=new WeakMap,mg=new WeakMap,Wh=new WeakMap,X3=new WeakMap,lm=new WeakMap,um=new WeakMap,q3=new WeakMap,Nw=new WeakMap,Gw=new WeakMap,Y3=new WeakMap,K3=new WeakMap,Z3=new WeakMap,Q3=new WeakMap,du=new WeakMap,o4=new WeakMap,J3=new WeakMap,s4=new WeakMap,lT=new WeakMap,uT=new WeakMap,Rx=new WeakMap,Ox=new WeakMap,MD=new WeakMap,cm=new WeakMap;function td(e){return e==null}const Mm=(e,n)=>e+Math.floor(n*255).toString(16);function cO(e){return e.button===2}function cT(e){const n=new Map;return e.forEach(i=>{n.has(i.id)||n.set(i.id,i)}),Array.from(n.values())}const fO=(e,n,i=e.length-1)=>{i<0&&(i=e.length+i),i=Math.min(e.length-1,Math.max(i,0));let r=i+1;for(;--r>-1;)if(n(e[r],r,e))return r;return-1},hO=(e,n,i=0)=>{i<0&&(i=e.length+i),i=Math.min(e.length,Math.max(i,0));let r=i-1;for(;++r<e.length;)if(n(e[r],r,e))return r;return-1},dO=e=>{e.sort((n,i)=>n-i);for(let n=1;n<e.length;n++)if(e[n]!==e[n-1]+1)return!1;return!0},gO={isViewport:e=>!td(e.zoom)&&!td(e.viewBackgroundColor)},Se={ancestors(e,n={}){const{reverse:i=!1}=n;let r=Se.levels(e,n);return i?r=r.slice(1):r=r.slice(0,-1),r},levels(e,n={}){const{reverse:i=!1}=n,r=[];for(let o=0;o<=e.length;o++)r.push(e.slice(0,o));return i&&r.reverse(),r},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const n=e[e.length-1];return e.slice(0,-1).concat(n+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const n=e[e.length-1];if(n<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(n-1)},isAncestor(e,n){return e.length<n.length&&Se.compare(e,n)===0},compare(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1}return 0},equals(e,n){return e.length===n.length&&e.every((i,r)=>i===n[r])},endsBefore(e,n){const i=e.length-1,r=e.slice(0,i),o=n.slice(0,i),a=e[i],l=n[i];return Se.equals(r,o)&&a<l},isSibling(e,n){if(e.length!==n.length)return!1;const i=e.slice(0,-1),r=n.slice(0,-1),o=e[e.length-1],a=n[n.length-1];return o!==a&&Se.equals(i,r)},transform(e,n){if(!e)return null;const i=[...e];if(e.length===0)return i;switch(n.type){case"insert_node":{const{path:r}=n;(Se.equals(r,i)||Se.endsBefore(r,i)||Se.isAncestor(r,i))&&(i[r.length-1]+=1);break}case"remove_node":{const{path:r}=n;if(Se.equals(r,i)||Se.isAncestor(r,i))return null;Se.endsBefore(r,i)&&(i[r.length-1]-=1);break}case"move_node":{const{path:r,newPath:o}=n;if(Se.equals(r,o))return i;if(Se.isAncestor(r,i)||Se.equals(r,i)){const a=o.slice();return Se.endsBefore(r,o)&&r.length<o.length&&(a[r.length-1]-=1),a.concat(i.slice(r.length))}else Se.isSibling(r,o)&&(Se.isAncestor(o,i)||Se.equals(o,i))?Se.endsBefore(r,i)?i[r.length-1]-=1:i[r.length-1]+=1:Se.endsBefore(o,i)||Se.equals(o,i)||Se.isAncestor(o,i)?(Se.endsBefore(r,i)&&(i[r.length-1]-=1),i[o.length-1]+=1):Se.endsBefore(r,i)&&(Se.equals(o,i)&&(i[o.length-1]+=1),i[r.length-1]-=1);break}}return i}},Je={parent:(e,n)=>{const i=Se.parent(n);return Je.get(e,i)},*parents(e,n,i={}){for(const r of Se.ancestors(n,i))yield Je.get(e,r)},get(e,n){let i=e;for(let r=0;r<n.length;r++){const o=n[r];if(!i||!i.children||!i.children[o])throw new Error(`Cannot find a descendant at path [${n}]`);i=i.children[o]}return i},last(e,n){let i=Je.get(e,n);for(;i&&i.children&&i.children.length>0;){const r=i.children.length-1;i=i.children[r]}return i},first(e,n){const i=n.slice();let r=Je.get(e,i);if(!r.children||!e.isExpanded(r))return r;for(;r&&r.children&&r.children.length>0&&e.isExpanded(r)&&r.children.length!==0;)r=r.children[0],i.push(0);return r}},pO=(e,n,i,r,o)=>{var a,l;switch(o.type){case"insert_node":{const{path:c,node:h}=o,d=Je.parent(e,c),p=c[c.length-1];if(!d.children||p>d.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${c}] because the destination is past the end of the node.`);d.children.splice(p,0,h);break}case"remove_node":{const{path:c}=o,h=Je.parent(e,c),d=c[c.length-1];if(!h.children||d>h.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${c}] because the destination is past the end of the node.`);h.children.splice(d,1);break}case"move_node":{const{path:c,newPath:h}=o;if(Se.isAncestor(c,h))throw new Error(`Cannot move a path [${c}] to new path [${h}] because the destination is inside itself.`);const d=Je.get(e,c),p=Je.parent(e,c),m=c[c.length-1];(a=p.children)==null||a.splice(m,1);const w=Se.transform(c,o),x=Je.get(e,Se.parent(w)),T=w[w.length-1];(l=x.children)==null||l.splice(T,0,d);break}case"set_node":{const{path:c,properties:h,newProperties:d}=o;if(c.length===0)throw new Error("Cannot set properties on the root node!");const p=Je.get(e,c);for(const m in d){const w=d[m];w==null?delete p[m]:p[m]=w}for(const m in h)d.hasOwnProperty(m)||delete p[m];break}case"set_viewport":{const{newProperties:c}=o;if(c==null)i=c;else{if(i==null){if(!gO.isViewport(c))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(c)} when there is no current viewport.`);i={...c}}for(const h in c){const d=c[h];d==null?delete i[h]:i[h]=d}}break}case"set_selection":{const{newProperties:c}=o;c==null?n=c:n===null?n=o.newProperties:n=c;break}case"set_theme":{const{newProperties:c}=o;r=c;break}}return{selection:n,viewport:i,theme:r}},mO={transform(e,n){e.children=H2(e.children);let i=e.viewport&&H2(e.viewport),r=e.selection&&H2(e.selection),o=e.theme&&H2(e.theme);try{const a=pO(e,r,i,o,n);i=a.viewport,r=a.selection,o=a.theme}finally{e.children=N2(e.children),r?e.selection=xu(r)?N2(r):r:e.selection=null,e.viewport=xu(i)?N2(i):i,e.theme=xu(o)?N2(o):o}}},H={isHit:(e,n)=>H.isHitX(e,n)&&H.isHitY(e,n),isHitX:(e,n)=>{const i=e.x<n.x?e.x:n.x,r=e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width;return Math.floor(r-i-e.width-n.width)<=0},isHitY:(e,n)=>{const i=e.y<n.y?e.y:n.y,r=e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height;return Math.floor(r-i-e.height-n.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,n,i){return H.getRectangleByPoint([e[0]-n/2,e[1]-i/2],n,i)},getRectangleByPoint(e,n,i){return{x:e[0],y:e[1],width:n,height:i}},getRectangleByPoints(e){vO(e)&&(e=[e]);let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const l of e){const c=l.map(d=>d[0]),h=l.map(d=>d[1]);n=Math.min(n,...c),i=Math.min(i,...h),r=Math.max(r,...c),i=Math.min(i,...h),o=Math.max(o,...h)}return{x:n,y:i,width:r-n,height:o-i}},getCornerPointsByPoints(e){const n=e.map(c=>c[0]),i=e.map(c=>c[1]),r=Math.min(...n),o=Math.max(...n),a=Math.min(...i),l=Math.max(...i);return[[r,a],[o,a],[o,l],[r,l]]},getOutlineRectangle:(e,n)=>({x:e.x+n,y:e.y+n,width:e.width-n*2,height:e.height-n*2}),inflate:(e,n)=>{const i=n/2;return{x:e.x-i,y:e.y-i,width:e.width+i*2,height:e.height+i*2}},isEqual:(e,n)=>e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>H.getCenterPoint(H.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,n)=>[e.x+e.width*n[0],e.y+e.height*n[1]],expand(e,n,i=n,r=n,o=i){return{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+o}},getGapCenter(e,n,i){const r=i?"x":"y",o=i?"width":"height",l=[e[r],e[r]+e[o],n[r],n[r]+n[o]].sort((c,h)=>c-h);return(l[1]+l[2])/2},isPointInRectangle(e,n){const i=n[0],r=n[1];return i>e.x&&i<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.forEach(a=>{n=Math.min(n,a.x),i=Math.min(i,a.y),r=Math.max(r,a.x+a.width),o=Math.max(o,a.y+a.height)}),{x:n,y:i,width:r-n,height:o-i}}};function vO(e){return Array.isArray(e)&&e.every(n=>Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")}function a4(e,n,i,r,o,a){const l=e-i,c=n-r,h=o-i,d=a-r,p=l*h+c*d,m=h*h+d*d;let w=-1;m!==0&&(w=p/m);let x,T;w<0?(x=i,T=r):w>1?(x=o,T=a):(x=i+w*h,T=r+w*d);const D=e-x,b=n-T;return Math.hypot(D,b)}function Lx(e,n){const i=e[0],r=e[1],o=n[0][0],a=n[0][1],l=n[1][0],c=n[1][1],h=i-o,d=r-a,p=l-o,m=c-a,w=h*p+d*m,x=p*p+m*m;let T=-1;x!==0&&(T=w/x);let D,b;return T<0?(D=o,b=a):T>1?(D=l,b=c):(D=o+T*p,b=a+T*m),[D,b]}function l4(e,n){const i=n.length;let r=1/0;if(n.length===1)return be(...n[0],...e);for(let o=0;o<i-1;o++){const a=n[o],l=n[o+1],c=a4(e[0],e[1],a[0],a[1],l[0],l[1]);c<r&&(r=c)}return r}function Yn(e,n,i=!0){const r=n.length;let o=1/0,a=e;for(let l=0;l<r;l++){const c=n[l];if(l===r-1&&!i)continue;const h=l===r-1?n[0]:n[l+1],d=a4(e[0],e[1],c[0],c[1],h[0],h[1]);d<o&&(o=d,a=Lx(e,[c,h]))}return a}function fT(e,n){let i=1/0,r=e;for(const o of n){const a=Lx(e,o),l=be(e[0],e[1],a[0],a[1]);l<i&&(i=l,r=a)}return r}function Kr(e,n,i,r){const o={x:n[0]-i,y:n[1]-r,height:r*2,width:i*2},a=Math.abs(e[0]-o.x-o.width/2),l=Math.abs(e[1]-o.y-o.height/2);let c=.707,h=.707;const d=Math.abs(o.width)/2,p=Math.abs(o.height)/2;[0,1,2,3].forEach(x=>{const T=d*c,D=p*h,b=(d*d-p*p)*c**3/d,B=(p*p-d*d)*h**3/p,A=T-b,I=D-B,R=a-b,k=l-B,W=Math.hypot(I,A),U=Math.hypot(k,R);c=Math.min(1,Math.max(0,(R*W/U+b)/d)),h=Math.min(1,Math.max(0,(k*W/U+B)/p));const nt=Math.hypot(h,c);c/=nt,h/=nt});const m=e[0]>n[0]?1:-1,w=e[1]>n[1]?1:-1;return[n[0]+d*c*m,n[1]+p*h*w]}function Dg(e,n,i,r,o){return[(e-i)*Math.cos(o)-(n-r)*Math.sin(o)+i,(e-i)*Math.sin(o)+(n-r)*Math.cos(o)+r]}function be(e,n,i,r){const o=e-i,a=n-r;return Math.hypot(o,a)}function fv(e,n,i){var r=Math.max(i.x-e,0,e-(i.x+i.width)),o=Math.max(i.y-n,0,n-(i.y+i.height));return Math.sqrt(r*r+o*o)}const G2=(e,n,i,r)=>{if(Ce.isEquals(e,n)&&Ce.isEquals(i,r)&&!Ce.isEquals(e,i))return!1;const o=(m,w)=>m[0]*w[1]-m[1]*w[0],a=[n[0]-e[0],n[1]-e[1]],l=[i[0]-e[0],i[1]-e[1]],c=[r[0]-e[0],r[1]-e[1]],h=[e[0]-i[0],e[1]-i[1]],d=[n[0]-i[0],n[1]-i[1]],p=[r[0]-i[0],r[1]-i[1]];return o(a,l)*o(a,c)<=0&&o(p,h)*o(p,d)<=0},zw=(e,n)=>{if(e.length===1)return H.isPointInRectangle(n,e[0]);const i=H.getCornerPoints(n),r=e.length;for(let o=0;o<r;o++){const a=e[o],l=e[(o+1)%r];if(o===r-1&&Ce.isEquals(a,l))continue;if(yO(a,l,n)||rf(a,i)||rf(l,i))return!0}return!1},yO=(e,n,i)=>{const r=H.getCornerPoints(i);return G2(e,n,r[0],r[1])||G2(e,n,r[1],r[2])||G2(e,n,r[2],r[3])||G2(e,n,r[3],r[0])},rf=(e,n)=>{const i=e[0],r=e[1];let o=!1;for(var a=0,l=n.length-1;a<n.length;l=a++){let c=n[a][0],h=n[a][1],d=n[l][0],p=n[l][1];h>r!=p>r&&i<(d-c)*(r-h)/(p-h)+c&&(o=!o)}return o},Tu=(e,n,i,r,o=0)=>{const a=Math.cos(o),l=Math.sin(o),c=(e[0]-n[0])*a+(e[1]-n[1])*l,h=(e[1]-n[1])*a-(e[0]-n[0])*l;return c*c/(i*i)+h*h/(r*r)<=1},hT=(e,n,i,r=0)=>{const{x:o,y:a,width:l,height:c}=n,h=e[0]>=o&&e[0]<=o+l&&e[1]>=a&&e[1]<=a+c,d=e[0]>=o&&e[0]<=o+i&&e[1]>=a&&e[1]<=a+i&&Math.hypot(e[0]-(o+i),e[1]-(a+i))>i,p=e[0]>=o&&e[0]<=o+i&&e[1]>=a+c&&e[1]<=a+c-i&&Math.hypot(e[0]-(o+i),e[1]-(a+c-i))>i,m=e[0]>=o+l-i&&e[0]<=o+l&&e[1]>=a&&e[1]<=a+i&&Math.hypot(e[0]-(o+l-i),e[1]-(a+i))>i,w=e[0]>=o+l-i&&e[0]<=o+l&&e[1]>=a+c-i&&e[1]<=a+c&&Math.hypot(e[0]-(o+l-i),e[1]-(a+c-i))>i;return h&&!(d||p||m||w)},hv=function(e){let i,r,o,a,l,c,h,d,p,m,w,x,T;var D,b,B,A,I,R;const k=[];k.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var W=e.length,U=0;U<W-1;U++)i=U==0?e[0]:e[U-1],r=e[U],o=e[U+1],a=U+2<W?e[U+2]:o,h=Math.sqrt(Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2)),d=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)),p=Math.sqrt(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)),D=Math.pow(p,.5),B=Math.pow(p,2*.5),b=Math.pow(d,.5),A=Math.pow(d,2*.5),R=Math.pow(h,.5),I=Math.pow(h,2*.5),m=2*I+3*R*b+A,w=2*B+3*D*b+A,x=3*R*(R+b),x>0&&(x=1/x),T=3*D*(D+b),T>0&&(T=1/T),l=[(-A*i[0]+m*r[0]+I*o[0])*x,(-A*i[1]+m*r[1]+I*o[1])*x],c=[(B*r[0]+w*o[0]-A*a[0])*T,(B*r[1]+w*o[1]-A*a[1])*T],l[0]==0&&l[1]==0&&(l=r),c[0]==0&&c[1]==0&&(c=o),k.push(l,c,o);return k};function Rl(e,n,i,r){return Math.abs(n)===0?e>0?-1/0:1/0:-r*r*e/(i*i*n)}function Ol(e,n,i){if(i===1/0)return[0,-1];if(i===-1/0)return[0,1];let r=[1,-i];return n<0&&(r=[-r[0],-r[1]]),r}function wO(e){return+e.toFixed(2)}function _x(e,n){const i=Math.pow(10,n);return Math.ceil(e*i)/i}function tS(e,n,i=1e-6){return Math.abs(e-n)<=i}function RD(e,n,i,r,o,a,l=!0){if(o===0||a===0||e[0]===n[0]&&e[1]===n[1])return[];o=o<0?o:-o,a=a<0?a:-a,e[0]-=i,e[1]-=r,n[0]-=i,n[1]-=r;var c=(n[0]-e[0])*(n[0]-e[0])/o/o+(n[1]-e[1])*(n[1]-e[1])/a/a,h=2*e[0]*(n[0]-e[0])/o/o+2*e[1]*(n[1]-e[1])/a/a,d=e[0]*e[0]/o/o+e[1]*e[1]/a/a-1,p=[],m=h*h-4*c*d;return m===0?p.push(-h/2/c):m>0&&(p.push((-h+Math.sqrt(m))/2/c),p.push((-h-Math.sqrt(m))/2/c)),p.filter(w=>!l||w>=0&&w<=1).map(w=>[e[0]+(n[0]-e[0])*w+i,e[1]+(n[1]-e[1])*w+r])}function OD(e,n,i,r,o=.5){return[e+(i-e)*o,n+(r-n)*o]}function u4(e,n){const i=(n.endX-e[0])/2,r=(n.endY-e[1])/2,o=Math.cos(n.xAxisRotation),a=Math.sin(n.xAxisRotation),l=o*i+a*r,c=-a*i+o*r,h=Math.abs(n.rx),d=Math.abs(n.ry),p=l*l/(h*h)+c*c/(d*d),m=p>1?Math.sqrt(p):1,w=h*m,x=d*m,T=n.largeArcFlag===n.sweepFlag?-1:1,D=(w*w*x*x-w*w*c*c-x*x*l*l)/(w*w*c*c+x*x*l*l),b=T*Math.sqrt(Math.max(0,D)),B=b*(w*c/x),A=b*(-(x*l)/w),I=o*B-a*A+(e[0]+n.endX)/2,R=a*B+o*A+(e[1]+n.endY)/2;return{center:[I,R],rx:w,ry:x}}function Fx(e,n,i){const{center:r,rx:o,ry:a}=u4(n,i),l=Kr(e,r,o,a),c=Math.atan2(n[1]-r[1],n[0]-r[0]),h=Math.atan2(i.endY-r[1],i.endX-r[0]),d=Math.atan2(l[1]-r[1],l[0]-r[0]);if(xO(d,c,h,i.sweepFlag===1))return l;const m=be(e[0],e[1],n[0],n[1]),w=be(e[0],e[1],i.endX,i.endY);return m<w?n:[i.endX,i.endY]}function xO(e,n,i,r){const o=h=>(h%(2*Math.PI)+2*Math.PI)%(2*Math.PI),a=o(e),l=o(n),c=o(i);return r?l<=c?a>=l&&a<=c:a>=l||a<=c:l>=c?a<=l&&a>=c:a<=l||a>=c}function CO(e,n,i){const o=G.getBoardContainer(e).getBoundingClientRect();return fv(n,i,o)===0}function dT(e){const{hideScrollbar:n}=e.options;let i=0;if(!n){const r=G.getViewportContainer(e);i=r.offsetWidth-r.clientWidth}return i}const Ng="http://www.w3.org/2000/svg";function ze(){return document.createElementNS(Ng,"g")}function gT(){return document.createElementNS(Ng,"path")}function PE(e,n){const i=document.createElementNS(Ng,"rect");i.setAttribute("x",`${e.x}`),i.setAttribute("y",`${e.y}`),i.setAttribute("width",`${e.width}`),i.setAttribute("height",`${e.height}`);for(let r in n){const o=r;i.setAttribute(r,`${n[o]}`)}return i}const Ze=(e,n)=>{e.setAttribute("stroke-linecap",n)},EO=(e,n)=>{e.querySelectorAll("path").forEach(i=>{i.setAttribute("stroke-linecap",n)})};function SO(){return document.createElementNS(Ng,"mask")}function TO(e,n,i,r){var o=document.createElementNS(Ng,"text");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("fill",i),o.textContent=r,o}const AO=e=>DO(e)&&e.nodeType===1,DO=e=>e instanceof window.Node,bO=e=>!!(AO(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),BO=e=>e.button===oT.SECONDARY,Dl=e=>e.button===oT.MAIN,PO=e=>e.button===oT.WHEEL;function pT(e,n,i,r){var o=document.createElementNS(Ng,"foreignObject");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("width",`${_x(i,0)}`),o.setAttribute("height",`${r}`),o}function pm(e,n,i,r,o){const a=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");a&&(a.setAttribute("width",`${_x(n,0)}`),a.setAttribute("height",`${i}`),a.setAttribute("x",`${r}`),a.setAttribute("y",`${o}`))}function MO(e,n){const i=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");i&&i.setAttribute("width",`${_x(n,0)}`)}const RO=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),OO=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,jw=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),LO=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),_O=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),FO=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),kO=(e,n)=>e.type==="set_viewport"&&e.type===(n==null?void 0:n.type),IO=(e,n)=>!(e.type==="set_selection"||e.type==="set_viewport"),HO=e=>e.type!=="set_selection",Us={isSaving(e){return ME.get(e)},isMerging(e){return tr.get(e)},isSplittingOnce(e){return j2.get(e)},setSplittingOnce(e,n){j2.set(e,n)},withMerging(e,n){const i=Us.isMerging(e);tr.set(e,!0),n(),tr.set(e,i)},withNewBatch(e,n){const i=Us.isMerging(e);tr.set(e,!0),j2.set(e,!0),n(),tr.set(e,i),j2.delete(e)},withoutMerging(e,n){const i=Us.isMerging(e);tr.set(e,!1),n(),tr.set(e,i)},withoutSaving(e,n){const i=Us.isSaving(e);ME.set(e,!1),n(),ME.set(e,i)}},NO={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},GO={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},zO={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Gn=e=>{const n=NO[e],i=GO[e],r=zO[e],o=n&&ln.isKeyHotkey(n),a=i&&ln.isKeyHotkey(i),l=r&&ln.isKeyHotkey(r);return c=>!!(o&&o(c)||jw&&a&&a(c)||!jw&&l&&l(c))},$r={isBold:Gn("bold"),isCompose:Gn("compose"),isArrow:Gn("arrow"),isMoveBackward:Gn("moveBackward"),isMoveForward:Gn("moveForward"),isMoveUp:Gn("moveUp"),isMoveDown:Gn("moveDown"),isDeleteBackward:Gn("deleteBackward"),isDeleteForward:Gn("deleteForward"),isDeleteLineBackward:Gn("deleteLineBackward"),isDeleteLineForward:Gn("deleteLineForward"),isDeleteWordBackward:Gn("deleteWordBackward"),isDeleteWordForward:Gn("deleteWordForward"),isExtendBackward:Gn("extendBackward"),isExtendForward:Gn("extendForward"),isExtendUp:Gn("extendUp"),isExtendDown:Gn("extendDown"),isExtendArrow:Gn("extendArrow"),isExtendLineBackward:Gn("extendLineBackward"),isExtendLineForward:Gn("extendLineForward"),isItalic:Gn("italic"),isMoveLineBackward:Gn("moveLineBackward"),isMoveLineForward:Gn("moveLineForward"),isMoveWordBackward:Gn("moveWordBackward"),isMoveWordForward:Gn("moveWordForward"),isRedo:Gn("redo"),isSplitBlock:Gn("splitBlock"),isTransposeCharacter:Gn("transposeCharacter"),isUndo:Gn("undo"),isShift:Gn("shift")};function Mn(e=5){const n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",i=n.length;let r="";for(let o=0;o<e;o++)r+=n.charAt(Math.floor(Math.random()*i));return r}function Ar(e,n,i,r){if(e.children&&(!i||i(e))){let o=[...e.children];o=r?o.reverse():o,o.forEach(a=>{Ar(a,n,i)})}n(e)}const ud=e=>n=>!!(G.isBoard(n)||e.isRecursion(n)),Ko="#6698FF",mT="#6698FF25",bg={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},gn={isRootElement(e){const n=Wh.get(e);return!!(n&&G.isBoard(n))},getElementRef(e){return cm.get(e)},getElementG(e){const n=lm.get(e);if(!n)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return n},hasMounted(e){return!!gn.getContainerG(e,{suppressThrow:!0})},getContainerG(e,n){const i=um.get(e)||null;if(!i){if(n.suppressThrow)return null;throw new Error("can not resolve container g")}return i}},kx=(e,n,i=!0)=>[...n].sort((r,o)=>{const a=G.findPath(e,r),l=G.findPath(e,o);return i?a[0]-l[0]:l[0]-a[0]}),c4=new Map,nm=e=>c4.get(e)||[],im=(e,n)=>{c4.set(e,n)};class jO{constructor(n){this.debugKey=n}isDebug(){return Vc(this.debugKey)}clear(){if(!this.isDebug())return;const n=nm(this.debugKey);im(this.debugKey,[]),n.forEach(i=>i.remove())}drawPolygon(n,i,r){if(!Vc(this.debugKey))return;const o=G.getRoughSVG(n).polygon(i,r||{stroke:"red"});o.classList.add(this.debugKey),G.getElementTopHost(n).append(o);const a=nm(this.debugKey);return a.push(o),im(this.debugKey,a),o}drawLine(n,i,r){if(!Vc(this.debugKey))return;const o=G.getRoughSVG(n).linearPath(i,r||{stroke:"red"});o.classList.add(this.debugKey),G.getElementTopHost(n).append(o);const a=nm(this.debugKey);return a.push(o),im(this.debugKey,a),o}drawRectangle(n,i,r){if(!Vc(this.debugKey))return;let o;i instanceof Array?o=H.getRectangleByPoints(i):o=i;const a=G.getRoughSVG(n).rectangle(o.x,o.y,o.width,o.height,r||{stroke:"red"});a.classList.add(this.debugKey),G.getElementTopHost(n).append(a);const l=nm(this.debugKey);return l.push(a),im(this.debugKey,l),a}drawCircles(n,i,r=0,o=!1,a){if(!Vc(this.debugKey))return;const l=[];return i.forEach((c,h)=>{const d=G.getRoughSVG(n).circle(c[0],c[1],o?r*(h+1):r,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},a||{}));d.classList.add(this.debugKey),G.getElementTopHost(n).append(d);const p=nm(this.debugKey);p.push(d),l.push(d),im(this.debugKey,p)}),l}}const Gg=e=>new jO(e),Vc=e=>localStorage.getItem(e||"debug:plait")==="true";var Sl;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Sl||(Sl={}));const f4=(e,n,i=()=>!0)=>{const r=n||e.selection,o=[];if(!r)return[];if(bg.isCollapsed(r)){const l=h4(e,r.anchor,i);return l!=null&&l.length?l:[]}return Ar(e,l=>{if(!G.isBoard(l)&&i(l)){let c=!1;try{c=e.isRectangleHit(l,r)}catch(h){Vc()&&console.error("isRectangleHit",h,"node",l)}c&&o.push(l)}},ud(e),!0),o},h4=(e,n,i=()=>!0,r=!0)=>{let o=[];return Ar(e,a=>{if(G.isBoard(a)||!i(a)||!gn.hasMounted(a))return;let l=!1;try{l=e.isHit(a,n,r)}catch(c){Vc()&&console.error("isHit",c,"node",a)}if(l){o.push(a);return}},ud(e),!0),o},Ll=(e,n,i=()=>!0,r=!0)=>{const o=h4(e,n,i,r);return e.getOneHitElement(o)},UO=(e,n)=>{const i=ne(e),r=i.length>0&&pn(e,i,!1);return r&&H.isPointInRectangle(r,n)?i:[]},El=(e,n)=>{const i=kx(e,n);o4.set(e,i)},ne=e=>o4.get(e)||[],cd=(e,n)=>{let i=[];Array.isArray(n)?i.push(...n):i.push(n);const r=ne(e);El(e,[...r,...i])},Ix=(e,n,i=!1)=>{const r=ne(e);if(r.includes(n)){const o=[];e.isRecursion(n)&&i?Ar(n,l=>{o.push(l)},l=>e.isRecursion(l)):o.push(n);const a=r.filter(l=>!o.includes(l));El(e,a)}},$O=(e,n,i)=>{const r=ne(e);r.splice(r.indexOf(n),1,i)},zg=e=>{El(e,[])},vg=(e,n)=>!!ne(e).find(r=>r===n),eS=e=>{const n=e.getPluginOptions(Sl.withSelection);e.setPluginOptions(Sl.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Sl.withSelection,{...n})},0)},VO=(e,n)=>UO(e,n).length>0,WO=(e,n)=>!!Ll(e,n)||VO(e,n);function jg(e,n,i,r,o,a,l=!1,c){let h=c||0;const d=[n+h,i],p=[r-h,i],m=[r,i+h],w=[r,o-h],x=[r-h,o],T=[n+h,o],D=[n,o-h],b=[n,i+h],B=e.path(`M${p[0]} ${p[1]} A ${h} ${h}, 0, 0, 1, ${m[0]} ${m[1]} L ${w[0]} ${w[1]} A ${h} ${h}, 0, 0, 1, ${x[0]} ${x[1]} L ${T[0]} ${T[1]} A ${h} ${h}, 0, 0, 1, ${D[0]} ${D[1]} L ${b[0]} ${b[1]} A ${h} ${h}, 0, 0, 1, ${d[0]} ${d[1]} Z`,a);return Ze(B,"round"),B}const ka=(e,n,i)=>{const o=G.getRoughSVG(e).rectangle(n.x,n.y,n.width,n.height,i);return Ze(o,"round"),o};function Ug(e,n,i=40){const r=Math.abs(e[0]-n[0]),o=Math.abs(e[1]-n[1]);let a=Math.hypot(r,o);const l=a/2,c=l/a*r,h=l/a*o,d=[n[0]>e[0]?n[0]-c:n[0]+c,n[1]>e[1]?n[1]-h:n[1]+h],p=Dg(d[0],d[1],n[0],n[1],i*Math.PI/180);return{pointLeft:Dg(d[0],d[1],n[0],n[1],-i*Math.PI/180),pointRight:p}}function fd(e,n,i,r){return e.circle(n[0],n[1],i,r)}function z2(e,n,i,r){return e.linearPath([n,i],r)}function Ys(e,n,i){const r=ze(),o=gT();let a="";return e.forEach((l,c)=>{c===0?a+=`M ${l[0]} ${l[1]} `:a+=`L ${l[0]} ${l[1]} `}),i&&(a+="Z"),o.setAttribute("d",a),o.setAttribute("stroke",`${n==null?void 0:n.stroke}`),o.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),o.setAttribute("fill",`${(n==null?void 0:n.fill)||"none"}`),n!=null&&n.strokeLineDash&&o.setAttribute("stroke-dasharray",`${n.strokeLineDash}`),r.appendChild(o),r}function XO(e,n){const i=ze(),r=gT();let o="";for(let a=0;a<e.length-3;a+=3)a===0?o+=`M ${e[0][0]} ${e[0][1]} `:o+=`C ${e[a+1][0]} ${e[a+1][1]}, ${e[a+2][0]} ${e[a+2][1]}, ${e[a+3][0]} ${e[a+3][1]}`;return r.setAttribute("d",o),r.setAttribute("stroke",`${n==null?void 0:n.stroke}`),r.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),r.setAttribute("fill","none"),i.appendChild(r),i}function vT(e,n){const i={type:"set_viewport",properties:e.viewport,newProperties:n};e.apply(i)}const qO={setViewport:vT};function YO(e,n){const i={type:"set_theme",properties:e.theme,newProperties:n};e.apply(i)}function Hx(e,n,i){i=i??e.viewport.zoom,vT(e,{...e.viewport,zoom:i,origination:n}),E4(e)}function KO(e,n,i){n=oL(n);const o=G.getBoardContainer(e).getBoundingClientRect(),a=G.getBoardContainer(e).getBoundingClientRect();let l=[a.width/2,a.height/2];i&&fv(i[0],i[1],o)===0&&(l=[i[0]-o.x,i[1]-o.y]);const c=e.viewport.zoom,h=$g(e),d=h[0]+l[0]/c,p=h[1]+l[1]/c,m=[d-l[0]/n,p-l[1]/n];Hx(e,m,n)}function ZO(e){let n=dT(e);const i=G.getBoardContainer(e).getBoundingClientRect(),r=pn(e,e.children,!0),o=e.viewport.zoom,a=16,l=i.width-2*a,c=i.height-2*a;let h=o;l<r.width||c<r.height?h=Math.min(l/r.width,c/r.height):h=1;const d=y4(e),p=[d[0]-i.width/2/h+n/2/o,d[1]-i.height/2/h+n/2/o];Hx(e,p,h)}function QO(e,n){let i=dT(e);const r=G.getBoardContainer(e),o=r.getBoundingClientRect();let a=0;n.maxWidth?a=n.maxWidth:a=o.width;const l=pn(e,e.children,!0),c=a-2*n.autoFitPadding;let h=0;c<l.width?h=Math.min(c/l.width):h=1;let d=l.height*h+2*n.autoFitPadding;if(d>n.limitHeight){const x=r.closest(`.${n.containerClass}`);x.style.height=`${d}px`,wT(e)}else d=n.limitHeight;const p=l.x+l.width/2,m=l.y+l.height/2,w=[p-a/2/h+i/2/h,m-d/2/h+i/2/h];Hx(e,w,h)}function JO(e,n){n=n??e.theme.themeColorMode,YO(e,{themeColorMode:n}),Ar(e,i=>{e.applyTheme(i)})}const tL=(e,n)=>{e.pointer!==n&&(e.pointer=n)};function eL(e,n){var r;if((r=ne(e))==null?void 0:r[0]){const o=G.getBoardContainer(e).getBoundingClientRect(),a=dT(e),l=y4(e),c=n[0]-l[0],h=n[1]-l[1],d=e.viewport.zoom,p=[c-o.width/2/d+a/2/d,h-o.height/2/d+a/2/d];vT(e,{...e.viewport,origination:p}),E4(e)}}const un={updatePointerType:tL,updateViewport:Hx,fitViewport:ZO,updateZoom:KO,updateThemeColor:JO,fitViewportWidth:QO,moveToCenter:eL},yT=e=>G.getHost(e).viewBox.baseVal;function ke(e,n,i){const o=G.getHost(e).getBoundingClientRect();return[n-o.x,i-o.y]}function qr(e,n){const i=[n.x,n.y],r=[n.x+n.width,n.y+n.height],o=Rm(e,i),a=Rm(e,r);return H.getRectangleByPoints([o,a])}function Rm(e,n){const i=nS(e,Uw(e,n));return ed(e,i[0],i[1])}function ed(e,n,i){const o=G.getBoardContainer(e).getBoundingClientRect();return[n-o.x,i-o.y]}function nL(e,n){const r=G.getBoardContainer(e).getBoundingClientRect();return[r.x+n[0],r.y+n[1]]}function Pe(e,n){const i=yT(e),{zoom:r}=e.viewport,o=n[0]/r+i.x,a=n[1]/r+i.y;return[o,a]}function nS(e,n){const r=G.getHost(e).getBoundingClientRect();return[n[0]+r.x,n[1]+r.y]}function Uw(e,n){const{zoom:i}=e.viewport,r=yT(e),o=(n[0]-r.x)*i,a=(n[1]-r.y)*i;return[o,a]}const d4=.75,g4=new WeakMap,p4=new WeakMap;function iL(e){const{hideScrollbar:n}=e.options,i=n?aO:0,r=G.getBoardContainer(e).getBoundingClientRect();return{width:r.width+i,height:r.height+i}}function rL(e,n){const i=pn(e,e.children,!0);let r,o,a,l;return r=i.x,o=i.x+i.width,a=i.y,l=i.y+i.height,{left:r,right:o,top:a,bottom:l}}function oL(e,n=e4,i=n4){return e<n?n:e>i?i:e}function m4(e,n){const i=G.getBoardContainer(e).getBoundingClientRect(),r=rL(e),o=i.width,a=i.height;let l=r.right-r.left,c=r.bottom-r.top;const h=o/2,d=a/2;if(l<h/n){const p=r.left+l/2;r.left=p-h/2/n,r.right=p+h/2/n,l=h/n}if(c<d/n){const p=r.top+c/2;r.top=p-d/2/n,r.bottom=p+d/2/n,c=d/n}return{elementHostBBox:r,containerWidth:o,containerHeight:a,width:l,height:c}}function iS(e,n,i,r,o,a,l=d4){const c=n*l/a,h=i*l/a;return[e.left-c,e.top-h,r+c*2,o+h*2]}function v4(e,n){const{elementHostBBox:i,containerWidth:r,containerHeight:o,width:a,height:l}=m4(e,n);return iS(i,r,o,a,l,n)}function y4(e){const n=pn(e,e.children,!0);return[n.x+n.width/2,n.y+n.height/2]}function w4(e,n){const i=e.viewport.zoom,r=G.getHost(e);r.style.display="block",r.style.width=`${n[2]*i}px`,r.style.height=`${n[3]*i}px`,n&&n[2]>0&&n[3]>0&&r.setAttribute("viewBox",n.join(" "))}function Om(e){const n=$g(e);if(!n)return;const[i,r]=Uw(e,n);x4(e,i,r)}function x4(e,n,i,r=!0){const o=G.getViewportContainer(e),a=o.scrollLeft,l=o.scrollTop;if(!tS(o.scrollLeft,n,1)||!tS(o.scrollTop,i,1)){o.scrollLeft=n,o.scrollTop=i;const c=o.offsetWidth,h=o.offsetHeight;if(a===o.scrollLeft&&l===o.scrollTop)C4(e,a,l);else{const d=n>0&&i>0&&n<o.scrollWidth-c&&i<o.scrollHeight-h;r&&d&&T4(e,!0)}}}function C4(e,n,i){const r=Pe(e,[n,i]);Ce.isEquals(r,$g(e))||(un.updateViewport(e,r),S4(e,!0))}function wT(e){const{width:n,height:i}=iL(e),r=G.getViewportContainer(e);r.style.width=`${n}px`,r.style.height=`${i}px`}function xT(e){const n=e.viewport.zoom,i=v4(e,n);w4(e,i)}function sL(e){const n=e.viewport.zoom,{elementHostBBox:i,containerWidth:r,containerHeight:o,width:a,height:l}=m4(e,n),c=iS(i,r,o,a,l,n,.5),h=yT(e);if(c[0]<h.x||c[1]<h.y||c[0]+c[2]>h.x+h.width||c[1]+c[3]>h.y+h.height){const d=iS(i,r,o,a,l,n,d4);w4(e,d)}}function aL(e){var n;if(!((n=e.viewport)!=null&&n.origination)){const i=e.viewport.zoom,r=G.getBoardContainer(e).getBoundingClientRect(),o=v4(e,i),a=o[0]+o[2]/2,l=o[1]+o[3]/2,c=[a-r.width/2/i,l-r.height/2/i];lL(e,c),Om(e);return}Om(e)}const lL=(e,n)=>{lT.set(e,n)},E4=e=>{lT.delete(e)},$g=e=>{const n=lT.get(e);return n||e.viewport.origination},uL=e=>!!g4.get(e),S4=(e,n)=>{g4.set(e,n)},cL=e=>!!p4.get(e),T4=(e,n)=>{p4.set(e,n)};function fL(e,n,i){const r={type:"insert_node",node:n,path:i};e.apply(r)}function hL(e,n,i){const r={},o={},a=Je.get(e,i);for(const c in n)a[c]!==n[c]&&(a.hasOwnProperty(c)&&(r[c]=a[c]),n[c]!=null&&(o[c]=n[c]));const l={type:"set_node",properties:r,newProperties:o,path:i};e.apply(l)}function A4(e,n){const i=Je.get(e,n),r={type:"remove_node",path:n,node:i};e.apply(r)}function dL(e,n,i){const r={type:"move_node",path:n,newPath:i};e.apply(r)}const Xh={insertNode:fL,setNode:hL,removeNode:A4,moveNode:dL},pw=new WeakMap,gL=(e,n)=>D4(e)[n]||null,D4=e=>pw.get(e)||{},_a=(e,n,i)=>{const r=()=>{let a=requestAnimationFrame(()=>{const c=pw.get(e)||{};c[n]=null,pw.set(e,c),G.isAlive(e)&&i()});const l=D4(e);l[n]=a,pw.set(e,l)};let o=gL(e,n);o!==null&&cancelAnimationFrame(o),r()},Nx=(e,n)=>(kx(e,n),n.map(i=>e.children.map(r=>r.id).indexOf(i.id)).filter(i=>i>=0)),pL=(e,n)=>{const i=Nx(e,n);return i[i.length-1]},dv=(e,n)=>{n.map(i=>{const r=G.findPath(e,i.element),o=e.pathRef(r);return()=>{o.current&&Xh.moveNode(e,o.current,i.newPath),o.unref()}}).forEach(i=>{i()})},b4=new WeakMap,of=e=>!!b4.get(e),Lu=(e,n)=>{b4.set(e,n)},mL=e=>Ox.get(e)||[],sf=e=>(Ox.get(e)||[]).length>0,vL=e=>{Ox.delete(e),Lu(e,!1)},LD=(e,n)=>{Ox.set(e,n),Lu(e,!0)},_D="foreignObject[class^='foreign-object']";function yL(e){return new Promise((n,i)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>n(r),r.onerror=()=>i(new Error("Failed to load image")),r.src=e})}function wL(e,n,i="transparent"){const r=document.createElement("canvas"),o=r.getContext("2d");return r.width=e,r.height=n,r.style.width=`${e}px`,r.style.height=`${n}px`,o.strokeStyle="#ffffff",o.fillStyle=i,o.fillRect(0,0,e,n),{canvas:r,ctx:o}}async function xL(e){const i=await(await fetch(e)).blob();return new Promise((r,o)=>{const a=new FileReader;a.onloadend=()=>r(a.result),a.onerror=o,a.readAsDataURL(i)})}function FD(e,n,i){const r=n==null?void 0:n.style;if(!r)return;const o=window.getComputedStyle(e);(i||[]).forEach(a=>{const l=o.getPropertyValue(a),c=o.getPropertyPriority(a);l&&r.setProperty(a,l,c)})}function CL(e,n,i,r){const o='[data-slate-node="text"]',a=["font-size","font-family","line-height","text-decoration","font-weight","font-style","word-break"],l=Array.from(e.querySelectorAll(o)),c=Array.from(n.querySelectorAll(o));if(l.map((h,d)=>{FD(h,c[d],a)}),i){const h=i,d=Array.from(e.querySelectorAll(h)),p=Array.from(n.querySelectorAll(h));d.map((m,w)=>{FD(m,p[w],r)})}}async function EL(e,n){const i=Array.from(e.querySelectorAll(`${_D}`)),r=Array.from(n.querySelectorAll(`${_D}`));await Promise.all(i.map((o,a)=>new Promise(l=>{const h=r[a].querySelector("img"),d=h==null?void 0:h.getAttribute("src");if(!d)return l(!0);xL(d).then(p=>{h==null||h.setAttribute("src",p),l(!0)})})))}async function SL(e,n,i,r){const{width:o,height:a,x:l,y:c}=i,{padding:h=4,inlineStyleClassNames:d,styleNames:p}=r,m=G.getHost(e),w=n.map(b=>gn.getElementG(b)),x=m.cloneNode(),T=G.getElementHost(e).cloneNode();x.style.width=`${o}px`,x.style.height=`${a}px`,x.style.backgroundColor="",x.setAttribute("width",`${o}`),x.setAttribute("height",`${a}`),x.setAttribute("viewBox",[l-h,c-h,o+2*h,a+2*h].join(","));const D=new Array(w.length);return await Promise.all(w.map(async(b,B)=>{const A=b.cloneNode(!0);CL(b,A,d,p),await EL(b,A),D[B]=A})),T.append(...D),x.appendChild(T),x}async function CT(e,n){const i=n.elements||hd(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=pn(e,i,!1),o=await SL(e,i,r,n);return new XMLSerializer().serializeToString(o)}async function TL(e,n){if(!e)return;const i=n.elements||hd(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=pn(e,i,!1),{ratio:o=2,fillStyle:a="transparent"}=n,{width:l,height:c}=r,h=l*o,d=c*o,p=await CT(e,n),{canvas:m,ctx:w}=wL(h,d,a),x=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(p)}`;try{const T=await yL(x);return w.drawImage(T,0,0,h,d),m.toDataURL("image/png")}catch(T){console.error("Error converting SVG to image:",T);return}}var Au;(function(e){e.medias="medias",e.elements="elements"})(Au||(Au={}));var Ma;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(Ma||(Ma={}));const ET=(e,n)=>`<plait>${BL(JSON.stringify({type:e,data:n}))}</plait>`,ST=e=>{var i;let n=(i=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:i[1];if(n){n=PL(n);try{const r=JSON.parse(n);if(r){if(r.type===Au.elements)return{elements:r.data};if(r.type===Au.medias)return{medias:r.data}}}catch(r){return console.error(r),null}}return null},kD=e=>{const n=document.implementation.createHTMLDocument("");return n.documentElement.innerHTML=e.trim(),n.body.textContent||n.body.innerText||""},B4=()=>"clipboard"in navigator&&"write"in navigator.clipboard,AL=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,P4=()=>"clipboard"in navigator&&"read"in navigator.clipboard,DL=(e,n,i)=>({type:e,elements:n,text:i}),bL=(e,n)=>{const{type:i,elements:r,text:o}=e;return i===n.type?{type:i,elements:r.concat(n.elements),text:o+" "+n.text}:e},Gx=(e,n)=>e?bL(e,n):n,BL=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),PL=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),ML=(e,n,i)=>{e==null||e.setData("text/html",ET(n,i))},RL=(e,n)=>{e==null||e.setData("text/plain",n)},OL=e=>{const n=e==null?void 0:e.getData("text/html");if(n){const i=ST(n);if(i)return i}return{}},LL=e=>{if(!e)return{};const n=e==null?void 0:e.getData("text/plain");if(n){const i=ST(n);if(i)return i}return{text:n}},_L=async(e,n,i="")=>{let r=i;B4()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([ET(e,n)],{type:"text/html"}),"text/plain":new Blob([r??JSON.stringify(n)],{type:"text/plain"})})])},FL=async()=>{if(!P4())return{};const e=await navigator.clipboard.read();let n={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const i of e){if(kL(i)){const r=i.types.filter(c=>c.match(/^image\//)),a=(await Promise.all(r.map(c=>i.getType(c)))).filter(Boolean).map(c=>URL.createObjectURL(c));return{files:await Promise.all(a.map(async c=>{const h=await(await fetch(c)).blob();return new File([h],"plait-file",{type:h.type})}))}}if(i.types.includes("text/html")){const r=await ID(await i.getType("text/html")),o=ST(r);if(o)return o;r&&r.trim()&&(n={text:kD(r)})}if(i.types.includes("text/plain")){const r=await ID(await i.getType("text/plain"));n={text:kD(r)}}}return n},kL=e=>e.types.find(n=>n.match(/^image\//)),ID=e=>new Promise((n,i)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const o=r.result;n(o)}),r.addEventListener("error",()=>{i(r.error)}),r.readAsText(e)}),IL=e=>{window.plait_fallback_clipboard_data=e},HL=async e=>{let n={};return e?e.files.length?{files:Array.from(e.files)}:(n=OL(e),Object.keys(n).length===0&&(n=LL(e)),n):P4()?await FL():null},NL=async(e,n)=>{if(!n)return;const{type:i,elements:r,text:o}=n;if(B4())return await _L(i,r,o);if(e){ML(e,i,r),RL(e,o),IL(n);return}if(AL())return await navigator.clipboard.writeText(ET(i,r))};function Dr(e){return!!uT.get(e)}function GL(e){G.getBoardContainer(e).classList.add("selection-moving"),uT.set(e,!0),Lu(e,!0)}function zL(e){G.getBoardContainer(e).classList.remove("selection-moving"),uT.delete(e),Lu(e,!1)}function HD(e){const n=mw(e);return e.pointer!==nn.hand&&!n.isDisabledSelection&&!G.isReadonly(e)}function ND(e){return!!e.operations.find(n=>jc.isSetSelectionOperation(n))}function jL(e){const n=Rx.get(e);if(n)return n.elements}function UL(e){return Rx.get(e)}function $L(e){Rx.delete(e)}function VL(e){const n=ne(e),i=pn(e,n,!1),r=qr(e,i);if(r.width>0&&r.height>0&&n.length>1){const o=ka(e,H.inflate(r,Fi),{stroke:Ko,strokeWidth:Fi,fillStyle:"solid"});o.classList.add(cv,iO);const a=Wo(n);return a&&qs(o,H.getCenterPoint(r),a),o}return null}function WL(e,n,i){if(!e.selection)return;const r=ne(e);if(!bg.isCollapsed(e.selection)){let o=[...r];n.forEach(a=>{a.groupId?o.push(...AT(e,a)):o.push(a)}),El(e,cT(o));return}if(bg.isCollapsed(e.selection)){const o=n[0],a=df(e,o,!0);if(a.length>0){const l=Qs(e,a[a.length-1],!0)||[],c=r.some(h=>l.map(d=>d.id).includes(h.id));i?XL(e,n,c,l):qL(e,n,c,a)}}}function XL(e,n,i,r){const o=ne(e);let a=[...o];const l=n[0];let c=[];if(!i)c=r;else{const h=o.some(p=>p.id===l.id),d=r.filter(p=>o.includes(p));h?c=d.filter(p=>p.id!==l.id):c.push(...d,...n)}r.forEach(h=>{a.includes(h)&&a.splice(a.indexOf(h),1)}),c.length&&a.push(...c),El(e,cT(a))}function qL(e,n,i,r){let o=[...n];const a=M4(e,r);if(a.length>0)if(a.length>1)o=$w(e,a[a.length-2],!0);else{const l=e.getOneHitElement(n);l&&(o=[l])}else{const l=$w(e,r[r.length-1],!0);if(!i)o=l;else{const c=e.getOneHitElement(n);c&&(o=[c])}}El(e,cT(o))}const mw=e=>e.getPluginOptions(Sl.withSelection),rS=(e,n)=>{e.setPluginOptions(Sl.withSelection,n)},Qs=(e,n,i,r)=>{let o=[];const a=e.children.filter(l=>l.groupId===n.id);return i?a.forEach(l=>{So.isGroup(l)?(r&&o.push(l),o.push(...Qs(e,l,i,r))):o.push(l)}):o=r?a:a.filter(l=>!So.isGroup(l)),o},$w=(e,n,i,r)=>{const o=Qs(e,n,i,r),a=[];return o.forEach(l=>{Ar(l,c=>{a.push(c)},()=>!0)}),a},TT=(e,n,i)=>{const r=$w(e,n,i);return pn(e,r,!1)},df=(e,n,i,r)=>{const o=(r||e.children).find(a=>a.id===(n==null?void 0:n.groupId));if(!o)return[];{const a=[o],l=df(e,o,i,r);return l.length&&a.push(...l),a}},oS=(e,n)=>{const i=df(e,n,!0);return i.length?i[i.length-1]:null},AT=(e,n)=>{const i=oS(e,n);return i?$w(e,i,!0):[n]},YL=e=>e.children.filter(i=>So.isGroup(i)),sS=(e,n,i)=>{const r=i!=null&&i.length?i:ne(e);return So.isGroup(n)?Vw(e,n,i):r.map(o=>o.id).includes(n.id)},Vw=(e,n,i)=>{const r=i!=null&&i.length?i:ne(e);return Qs(e,n,!0).every(a=>r.map(l=>l.id).includes(a.id))},M4=(e,n,i)=>{const r=[];return n.forEach(o=>{sS(e,o,i)&&r.push(o)}),r},KL=(e,n,i)=>{const r=gf(e,n,i),o=[];return r.forEach(a=>{o.push(a);const l=Qs(e,a,!0,!0);o.push(...l.filter(c=>So.isGroup(c)))}),o},R4=(e,n,i,r)=>{const o=df(e,n,!0,r),a=M4(e,o,i);return a.length?a[a.length-1]:null},gf=(e,n,i)=>{let r=[];return(n!=null&&n.length?n:ne(e)).forEach(a=>{if(a.groupId){const l=R4(e,a,n,i);l&&!r.includes(l)&&r.push(l)}}),r},DT=(e,n)=>{let i=[];return(n!=null&&n.length?n:ne(e)).filter(o=>!So.isGroup(o)).forEach(o=>{o.groupId&&R4(e,o,n)||i.push(o)}),i},bT=(e,n)=>DT(e,n).filter(r=>e.canAddToGroup(r)),ZL=(e,n)=>[...gf(e,n),...DT(e,n)],QL=(e,n)=>{const i=ne(e).map(a=>a.id);let r=null;const o=Dr(e);return n.forEach(a=>{const l=!i.includes(a.id)&&!o||o;if(a.groupId&&l){r||(r=ze());const c=AT(e,a),h=pn(e,c,!1),d=ka(e,h,{stroke:Ko,strokeWidth:Fi,strokeLineDash:[5]}),p=Wo(c);p&&qs(d,H.getCenterPoint(h),p),r.append(d)}}),r},JL=e=>({id:Mn(),type:"group"}),t_=e=>e.every(n=>!n.groupId),O4=e=>e.every(n=>n.groupId&&n.groupId===e[0].groupId),e_=(e,n)=>{const r=ZL(e,n).filter(o=>e.canAddToGroup(o));return r.length>1?t_(r)||O4(r):!1},n_=(e,n,i)=>{const r=gf(e,n,i);return ne(e).length>0&&r.length>0},L4=(e,n)=>{const i=df(e,n,!0);let r=null;if(i!=null&&i.length){for(let o=0;o<(i==null?void 0:i.length);o++)if(!Vw(e,i[o])){r=i[o];break}}return r},i_=(e,n,i)=>{const r=[...n];kx(e,r),r.pop(),dv(e,r.map(o=>({element:o,newPath:i})))},BT=e=>{const n=e.getDeletedFragment([]);e.deleteFragment(n)},GD=(e,n,i)=>{const r=ne(e),o=pn(e,r,!1),a=e.buildFragment(null,o,n);a&&NL(i,a)},PT=(e,n,i)=>{const r=n!=null&&n.length?n:ne(e),o=pn(e,r,!1),a=e.buildFragment(null,o,Ma.duplicate,r),l=a&&JSON.stringify(a),c=l&&JSON.parse(l);c&&e.insertFragment({...c,text:void 0},i||[o.x+o.width/2,o.y+o.height/2],Ma.duplicate)},Cu=2,r_=24;function _4(e,n){return hd(e,{match:r=>e.isAlign(r)&&!n.some(o=>o.id===r.id),recursion:()=>!0,isReverse:!1}).map(r=>{const o=e.getRectangle(r);return gv(o,r.angle||0)})}function o_(e,n){return n?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function mm(e,n,i){let r=Cu;return e.forEach(o=>{const a=s_(n,o,i);Math.abs(a)<Math.abs(r)&&(r=a)}),r}const s_=(e,n,i)=>{const o=nd(n,i).map(c=>c-e),a=o.map(c=>Math.abs(c)),l=a.indexOf(Math.min(...a));return o[l]},nd=(e,n)=>{const i=n?"x":"y",r=n?"width":"height";return[e[i],e[i]+e[r]/2,e[i]+e[r]]};function Q0(e,n){let i=1/0,r=e[0];return e.forEach(o=>{const a=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2));a<i&&(i=a,r=o)}),r}const J0=(e,n,i)=>nd(n,i).includes(e);function F4(e,n,i,r=!0,o=!0,a=!1){let l=[];const c=nd(n,!0),h=nd(n,!1),d=[{axis:c[0],isHorizontal:!0,pointRectangles:[]},{axis:c[1],isHorizontal:!0,pointRectangles:[]},{axis:c[2],isHorizontal:!0,pointRectangles:[]},{axis:h[0],isHorizontal:!1,pointRectangles:[]},{axis:h[1],isHorizontal:!1,pointRectangles:[]},{axis:h[2],isHorizontal:!1,pointRectangles:[]}];for(let m=0;m<i.length;m++){const w=i[m];J0(d[0].axis,w,d[0].isHorizontal)&&d[0].pointRectangles.push(w),J0(d[1].axis,w,d[1].isHorizontal)&&d[1].pointRectangles.push(w),J0(d[2].axis,w,d[2].isHorizontal)&&d[2].pointRectangles.push(w),J0(d[3].axis,w,d[3].isHorizontal)&&d[3].pointRectangles.push(w),J0(d[4].axis,w,d[4].isHorizontal)&&d[4].pointRectangles.push(w),J0(d[5].axis,w,d[5].isHorizontal)&&d[5].pointRectangles.push(w)}const p=(m,w,x)=>{const T=H.inflate(H.getBoundingRectangle([n,w]),r_);if(x){const D=[m,T.y],b=[m,T.y+T.height];l.push([D,b])}else{const D=[T.x,m],b=[T.x+T.width,m];l.push([D,b])}};if(r&&d[0].pointRectangles.length){const m=d[0].pointRectangles.length===1?d[0].pointRectangles[0]:Q0(d[0].pointRectangles,n);p(d[0].axis,m,d[0].isHorizontal)}if(r&&a&&d[1].pointRectangles.length){const m=d[1].pointRectangles.length===1?d[1].pointRectangles[0]:Q0(d[1].pointRectangles,n);p(d[1].axis,m,d[1].isHorizontal)}if(r&&d[2].pointRectangles.length){const m=d[2].pointRectangles.length===1?d[2].pointRectangles[0]:Q0(d[2].pointRectangles,n);p(d[2].axis,m,d[2].isHorizontal)}if(o&&d[3].pointRectangles.length){const m=d[3].pointRectangles.length===1?d[3].pointRectangles[0]:Q0(d[3].pointRectangles,n);p(d[3].axis,m,d[3].isHorizontal)}if(o&&a&&d[4].pointRectangles.length){const m=d[4].pointRectangles.length===1?d[4].pointRectangles[0]:Q0(d[4].pointRectangles,n);p(d[4].axis,m,d[4].isHorizontal)}if(o&&d[5].pointRectangles.length){const m=d[5].pointRectangles.length===1?d[5].pointRectangles[0]:Q0(d[5].pointRectangles,n);p(d[5].axis,m,d[5].isHorizontal)}return a_(e,l)}function a_(e,n){const i=ze();return n.forEach(r=>{if(!r.length)return;const o=G.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Ko,strokeWidth:1,strokeLineDash:[4,4]});i.appendChild(o)}),i}function k4(e,n){const i=ze();return n.forEach(r=>{if(!r.length)return;let o=r[0][1]===r[1][1];const a=G.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Ko,strokeWidth:1});i.appendChild(a),r.forEach(l=>{const c=o_(l,o),h=G.getRoughSVG(e).line(c[0][0],c[0][1],c[1][0],c[1][1],{stroke:Ko,strokeWidth:1});i.appendChild(h)})}),i}const I4=(e,n)=>{const i=Nx(e,ne(e));let r=N4(e,i);n==="up"&&(r=r.reverse());let o=[];return r.forEach((a,l)=>{const c=a[0],h=a[a.length-1],d=n==="down"?c:h,p=l_(e,d,n);p===-1||d===p||(n==="down"&&(a=a.reverse()),o.push(...a.map(m=>({element:e.children[m],newPath:[p]}))))}),o},H4=(e,n)=>{const i=Nx(e,ne(e));let r=N4(e,i),o=[];return n==="down"&&(r=r.reverse()),r.forEach(a=>{const l=a[0],c=a[a.length-1],h=n==="down"?l:c,d=e.children[h],p=L4(e,d);let m=n==="down"?0:e.children.length-1;if(p){const w=kx(e,Qs(e,p,!0,!0));m=n==="down"?e.children.indexOf(w[0]):e.children.indexOf(w[w.length-1])}n==="down"&&(a=a.reverse()),o.push(...a.map(w=>({element:e.children[w],newPath:[m]})))}),o},N4=(e,n)=>{let i=0;return n.reduce((r,o,a)=>{if(a>0){const l=e.children[o],c=e.children[n[a-1]],h=o-1===n[a-1]?!0:e.children.every((p,m)=>m>n[a-1]&&m<=o-1?So.isGroup(p):!0);let d=!1;if(c!=null&&c.groupId||l!=null&&l.groupId&&(c==null?void 0:c.groupId)!==(l==null?void 0:l.groupId)){let p=!1,m=!1;if(c.groupId){const w=oS(e,c);p=!Vw(e,w)}if(l.groupId){const w=oS(e,l);m=!Vw(e,w)}d=p||m}(!h||d)&&(i=++i)}return(r[i]||(r[i]=[])).push(o),r},[])},l_=(e,n,i)=>{if(n===0&&i==="down"||n===e.children.length-1&&i==="up")return-1;const r=m=>!(m.isDeleted||So.isGroup(m)),o=i==="down"?fO(e.children,m=>r(m),Math.max(0,n-1)):hO(e.children,m=>r(m),n+1),a=e.children[o];if(!a)return-1;const l=[...e.children],c=l[n],h=L4(e,c),d=df(e,a,!0)||[];if(h&&(c==null?void 0:c.groupId)!==(a==null?void 0:a.groupId)&&!d.find(m=>m.id===h.id))return-1;if(!a.groupId)return o;let p;if(h?p=d[d.indexOf(h)-1]:p=d[d.length-1],p){let m=Qs(e,p,!0,!1);if(m.length)return m.sort((w,x)=>{const T=e.children.findIndex(b=>b.id===w.id),D=e.children.findIndex(b=>b.id===x.id);return T-D}),i==="down"?l.indexOf(m[0]):l.indexOf(m[m.length-1])}return o},u_=e=>aS(e)||c_(e),aS=e=>e.pointerType==="pen",c_=e=>e.pointerType==="touch",G4=()=>"ontouchstart"in window||navigator.maxTouchPoints,f_=(e,n)=>{const i=gf(e,n),r=bT(e),o=[...i,...r],a=JL();if(e_(e)){o.forEach(p=>{const m=G.findPath(e,p);Xh.setNode(e,{groupId:a.id},m)});const l=ne(e),c=pL(e,l),h=Nx(e,o);if(dO(h)||i_(e,l,[c-1]),O4(o)){const p=r[0].groupId;Xh.insertNode(e,{...a,groupId:p},[e.children.length])}else Xh.insertNode(e,a,[e.children.length])}},h_=(e,n)=>{const i=gf(e,n);n_(e)&&(i.forEach(r=>{hd(e,{match:a=>a.groupId===r.id,recursion:()=>!1}).forEach(a=>{const l=G.findPath(e,a);Xh.setNode(e,{groupId:r.groupId||void 0},l)})}),i.map(r=>{const o=G.findPath(e,r),a=e.pathRef(o);return()=>{a.current&&Xh.removeNode(e,a.current),a.unref()}}).forEach(r=>{r()}))},d_={addGroup:f_,removeGroup:h_};function z4(e,n){const i={type:"set_selection",properties:e.selection,newProperties:n};e.apply(i)}const g_={setSelection:z4,addSelectionWithTemporaryElements:j4};function j4(e,n){const i=setTimeout(()=>{z4(e,{anchor:[0,0],focus:[0,0]})},0);let r=UL(e);if(r){clearTimeout(r.timeoutId);const o=r.elements;r.elements.push(...n.filter(a=>!o.includes(a))),r.timeoutId=i}else Rx.set(e,{timeoutId:i,elements:n})}const p_=e=>{const n=H4(e,"up");dv(e,n)},m_=e=>{const n=H4(e,"down");dv(e,n)},v_=e=>{const n=I4(e,"up");dv(e,n)},y_=e=>{const n=I4(e,"down");dv(e,n)},w_={moveUp:v_,moveDown:y_,moveToTop:p_,moveToBottom:m_},x_=(e,n)=>{n.map(i=>{const r=G.findPath(e,i),o=e.pathRef(r);return()=>{o.current&&A4(e,o.current),o.unref(),Ix(e,i,!0)}}).forEach(i=>{i()})},MT={removeElements:x_},Qt={...mO,...qO,...g_,...Xh,...d_,...w_},nr=(e,n,i)=>(i||(i=0),Array.isArray(e)&&typeof e[0]=="number"?Dg(e[0],e[1],n[0],n[1],i):e.map(r=>Dg(r[0],r[1],n[0],n[1],i||0))),Wo=e=>{var i;let n=((i=e[0])==null?void 0:i.angle)||0;return e.forEach(r=>{r.angle!==n&&!tS((r.angle||0)%(Math.PI/2)-n%(Math.PI/2),0)&&(n=0)}),n},C_=e=>{if(!e.length)return!1;const n=e[0].angle;return n===void 0?!1:!e.some(i=>i.angle!==n)},E_=(e,n)=>{let i=[];for(let c=0;c<e.length;c++){const h=e[c],d=nr(h,[0,0],-n);i.push(H.getRectangleByPoints(d))}const r=H.getBoundingRectangle(i),o=H.getCornerPoints(r),a=nr(o,[0,0],n),l=H.getCenterPoint(H.getRectangleByPoints(a));return H.getRectangleByPoints(nr(a,l,-n))},S_=(e,n,i)=>{const r=H.getCenterPoint(e),[o]=nr([r],n,i),a=o[0]-r[0],l=o[1]-r[1];return{offsetX:a,offsetY:l}},lS=(e,n,i)=>{const{offsetX:r,offsetY:o}=S_(H.getRectangleByPoints(e),n,i);return e.map(a=>[a[0]+r,a[1]+o])},bl=e=>U4(e.angle),U4=e=>e&&e!==0,Bl=(e,n)=>{if(bl(n)){let i=H.getRectangleByPoints(n.points);const r=H.getCenterPoint(i);return nr(e,r,n.angle)}else return null},T_=(e,n)=>{if(U4(n)){let i=H.getRectangleByPoints(e);const r=H.getCenterPoint(i);return nr(e,r,n)}else return null},af=(e,n,i,r=!1)=>{if(bl(i)){let o=H.getRectangleByPoints(i.points);const a=r?qr(e,o):o,l=H.getCenterPoint(a);return nr(n,l,i.angle?-i.angle:0)}else return null},gv=(e,n)=>{if(n){const i=H.getCornerPoints(e),r=H.getCenterPoint(e);return H.getRectangleByPoints(nr(i,r,n))}return e},A_=e=>{const n=Math.abs(e)%Math.PI;return n>=1/4*Math.PI&&n<=3/4*Math.PI};function uS(e){return e/180*Math.PI}function D_(e,n,i){const r=pn(e,n,!1),o=H.getCenterPoint(r);n.forEach(a=>{const l=a.angle,c=lS(a.points,o,Lm(i)),h=G.findPath(e,a);Qt.setNode(e,{points:c,angle:Lm((l||0)+i)},h)})}const Lm=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,b_=(e,n,i)=>{const r=5*Math.PI/2+Math.atan2(e[1]-i[1],e[0]-i[0]),o=5*Math.PI/2+Math.atan2(n[1]-i[1],n[0]-i[0]);return Lm(o-r)},B_=e=>e==null?void 0:e.angle,qs=(e,n,i)=>{if(i===0){e.removeAttribute("transform");return}var r=n[0],o=n[1];let a=Math.cos(i),l=Math.sin(i),h="matrix("+[a,l,-l,a,r*(1-a)+o*l,o*(1-a)-r*l].join(",")+")";e.setAttribute("transform",`${h}`)};function pn(e,n,i){const r=[],o=a=>{const l=e.getRectangle(a);if(l){const c=H.getCornerPoints(l),h=Bl(c,a)||c;r.push(h)}else console.error("can not get rectangle of element:",a)};if(n.forEach(a=>{i?Ar(a,l=>o(l),l=>e.isRecursion(l)):o(a)}),r.length>0)if(C_(n)){const a=Wo(n);return E_(r,a)}else{const a=r.reduce((l,c)=>l.concat(c),[]);return H.getRectangleByPoints(a)}else return{x:0,y:0,width:0,height:0}}function Es(e,n,i){const r=!i&&vw(e).get(n);return r||(i||(i=hd(e,{match:a=>!0,recursion:a=>!0})),i.find(a=>a.id===n))}function vw(e){const n=X3.get(e);if(!n)throw new Error("can not resolve element map");return n}function hd(e,n){let i=[];const r=n.isReverse??!0;return Ar(e,o=>{!G.isBoard(o)&&n.match(o)&&i.push(o)},o=>G.isBoard(o)?!0:ud(e)(o)&&n.recursion(o),r),i}var Li;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(Li||(Li={}));const gr="#333333",$4={mode:Li.default,boardBackground:"#ffffff",textColor:gr},V4={mode:Li.colorful,boardBackground:"#ffffff",textColor:gr},W4={mode:Li.soft,boardBackground:"#f5f5f5",textColor:gr},X4={mode:Li.retro,boardBackground:"#f9f8ed",textColor:gr},q4={mode:Li.dark,boardBackground:"#141414",textColor:"#FFFFFF"},Y4={mode:Li.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},P_=[$4,V4,W4,X4,q4,Y4],G={isBoard(e){const n=PD.get(e);if(n!==void 0)return n;const i=typeof e.onChange=="function"&&typeof e.apply=="function";return PD.set(e,i),i},isAlive(e){return!!Q3.get(e)},findPath(e,n){const i=[];let r=n;for(;;){const o=Wh.get(r);if(o==null){if(G.isBoard(r))return i;break}const a=mg.get(r);if(a==null)break;i.unshift(a),r=o}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(n)}`)},getHost(e){return K3.get(e)},getElementLowerHost(e){var n;return(n=du.get(e))==null?void 0:n.lowerHost},getElementHost(e){var n;return(n=du.get(e))==null?void 0:n.host},getElementUpperHost(e){var n;return(n=du.get(e))==null?void 0:n.upperHost},getElementTopHost(e){var n;return(n=du.get(e))==null?void 0:n.topHost},getActiveHost(e){var n;return(n=du.get(e))==null?void 0:n.activeHost},getRoughSVG(e){return Y3.get(e)},getBoardContainer(e){var n;return(n=du.get(e))==null?void 0:n.container},getBoardContext(e){return Z3.get(e)},getRectangle(e){return pn(e,e.children,!0)},getViewportContainer(e){var n;return(n=du.get(e))==null?void 0:n.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!q3.get(e)},getPointer(e){return e.pointer},isPointer(e,n){return e.pointer===n},isInPointer(e,n){const i=e.pointer;return n.includes(i)},getMovingPointInBoard(e){return J3.get(e)},isMovingPointInBoard(e){const n=s4.get(e),i=G.getBoardContainer(e).getBoundingClientRect();return!!(n&&fv(n[0],n[1],i)===0)},getThemeColors(e){return e.options.themeColors||P_}};var nn;(function(e){e.hand="hand",e.selection="selection"})(nn||(nn={}));const M_=e=>e.type==="set_viewport",R_=e=>e.type==="set_selection",O_=e=>e.type==="set_theme",L_=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:n,path:i}=e;if(Se.equals(n,i))return e;const r=Se.transform(i,e),o=Se.transform(Se.next(i),e);return{...e,path:r,newPath:o}}case"set_node":{const{properties:n,newProperties:i}=e;return{...e,properties:i,newProperties:n}}case"set_selection":{const{properties:n,newProperties:i}=e;return n==null?{...e,properties:i,newProperties:null}:i==null?{...e,properties:null,newProperties:n}:{...e,properties:i,newProperties:n}}case"set_viewport":{const{properties:n,newProperties:i}=e;return n==null?{...e,properties:i,newProperties:i}:i==null?{...e,properties:n,newProperties:n}:{...e,properties:i,newProperties:n}}case"set_theme":{const{properties:n,newProperties:i}=e;return{...e,properties:i,newProperties:n}}}},jc={isSetViewportOperation:M_,isSetSelectionOperation:R_,isSetThemeOperation:O_,inverse:L_},Ce={isEquals(e,n){return e&&n&&e[0]===n[0]&&e[1]===n[1]},isHorizontal(e,n,i=0){return e&&n&&Ce.isOverHorizontal([e,n],i)},isOverHorizontal(e,n=0){return e.every(i=>Math.abs(i[1]-e[0][1])<=n)},isVertical(e,n,i=0){return e&&n&&Ce.isOverVertical([e,n],i)},isOverVertical(e,n=0){return e.every(i=>Math.abs(i[0]-e[0][0])<=n)},isAlign(e,n=0){return Ce.isOverHorizontal(e,n)||Ce.isOverVertical(e,n)},getOffsetX(e,n){return n[0]-e[0]},getOffsetY(e,n){return n[1]-e[1]}},ME=new WeakMap,tr=new WeakMap,j2=new WeakMap;var Fe;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(Fe||(Fe={}));const __=e=>e===Fe.left||e===Fe.right,So={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function F_(e){return k_(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function k_(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function I_(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let r;for(;!(r=i.next()).done;)n(r.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const H_=(e,n)=>n;class N_{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||H_}forEachItem(n){let i;for(i=this._itHead;i!==null;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,r=this._removalsHead,o=0,a=null;for(;i||r;){const l=!r||i&&i.currentIndex<jD(r,o,a)?i:r,c=jD(l,o,a),h=l.currentIndex;if(l===r)o--,r=r._nextRemoved;else if(i=i._next,l.previousIndex==null)o++;else{a||(a=[]);const d=c-o,p=h-o;if(d!=p){for(let w=0;w<d;w++){const x=w<a.length?a[w]:a[w]=0,T=x+w;p<=T&&T<d&&(a[w]=x+1)}const m=l.previousIndex;a[m]=p-d}}c!==h&&n(l,c,h)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;i!==null;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;i!==null;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;i!==null;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;i!==null;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;i!==null;i=i._nextIdentityChange)n(i)}diff(n){if(n==null&&(n=[]),!F_(n))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._itHead,r=!1,o,a,l;if(Array.isArray(n)){this.length=n.length;for(let c=0;c<this.length;c++)a=n[c],l=this._trackByFn(c,a),i===null||!Object.is(i.trackById,l)?(i=this._mismatch(i,a,l,c),r=!0):(r&&(i=this._verifyReinsertion(i,a,l,c)),Object.is(i.item,a)||this._addIdentityChange(i,a)),i=i._next}else o=0,I_(n,c=>{l=this._trackByFn(o,c),i===null||!Object.is(i.trackById,l)?(i=this._mismatch(i,c,l,o),r=!0):(r&&(i=this._verifyReinsertion(i,c,l,o)),Object.is(i.item,c)||this._addIdentityChange(i,c)),i=i._next,o++}),this.length=o;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,r,o){let a;return n===null?a=this._itTail:(a=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),n!==null?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,a,o)):(n=this._linkedRecords===null?null:this._linkedRecords.get(r,o),n!==null?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,a,o)):n=this._addAfter(new G_(i,r),a,o)),n}_verifyReinsertion(n,i,r,o){let a=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return a!==null?n=this._reinsertAfter(a,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;n!==null;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,a=n._nextRemoved;return o===null?this._removalsHead=a:o._nextRemoved=a,a===null?this._removalsTail=o:a._prevRemoved=o,this._insertAfter(n,i,r),this._addToMoves(n,r),n}_moveAfter(n,i,r){return this._unlink(n),this._insertAfter(n,i,r),this._addToMoves(n,r),n}_addAfter(n,i,r){return this._insertAfter(n,i,r),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,i,r){const o=i===null?this._itHead:i._next;return n._next=o,n._prev=i,o===null?this._itTail=n:o._prev=n,i===null?this._itHead=n:i._next=n,this._linkedRecords===null&&(this._linkedRecords=new zD),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);const i=n._prev,r=n._next;return i===null?this._itHead=r:i._next=r,r===null?this._itTail=i:r._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new zD),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}}class G_{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class z_{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let r;for(r=this._head;r!==null;r=r._nextDup)if((i===null||i<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const i=n._prevDup,r=n._nextDup;return i===null?this._head=r:i._nextDup=r,r===null?this._tail=i:r._prevDup=i,this._head===null}}class zD{constructor(){this.map=new Map}put(n){const i=n.trackById;let r=this.map.get(i);r||(r=new z_,this.map.set(i,r)),r.add(n)}get(n,i){const r=n,o=this.map.get(r);return o?o.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function jD(e,n,i){const r=e.previousIndex;if(r===null)return r;let o=0;return i&&r<i.length&&(o=i[r]),r+n+o}class K4{constructor(n){this.board=n,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(n,i){this.initialized=!0,this.children=n,n.forEach((r,o)=>{mg.set(r,o),Wh.set(r,i.parent);const a=RE(this.board,r,o,i.parent),l=$D(this.board,a),c=UD(this.board,l,a,i);this.instances.push(c),this.contexts.push(a)}),this.differ=new N_(j_),this.differ.diff(n)}update(n,i){if(!this.initialized){this.initialize(n,i);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:r,parent:o}=i,a=this.differ.diff(n);if(a){const l=[],c=[];let h=null;a.forEachItem(d=>{var w;mg.set(d.item,d.currentIndex),Wh.set(d.item,i.parent);const p=d.previousIndex===null?void 0:this.contexts[d.previousIndex],m=RE(r,d.item,d.currentIndex,o,p);if(d.previousIndex===null){const x=$D(r,m),T=UD(r,x,m,i);l.push(m),c.push(T)}else{const x=this.instances[d.previousIndex];x.context=m,c.push(x),l.push(m)}(d.item===this.children[0]||d.item.id===((w=this.children[0])==null?void 0:w.id))&&(h=d.currentIndex)}),a.forEachOperation(d=>{if(d.currentIndex===null){const p=this.instances[d.previousIndex];p==null||p.destroy()}d.previousIndex!==null&&d.currentIndex!==null&&Q4(d.item,d.currentIndex,i,h)}),this.instances=c,this.contexts=l,this.children=n}else{const l=[];this.children.forEach((c,h)=>{mg.set(c,h),Wh.set(c,i.parent);const d=this.contexts[h],p=this.instances[h],m=RE(r,c,h,o,d);p.context=m,l.push(m)}),this.contexts=l}}destroy(){this.children.forEach((n,i)=>{this.instances[i]&&this.instances[i].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const j_=(e,n)=>n.id,UD=(e,n,i,r)=>{const o=new n;o.context=i,e.normalizeElement(i);try{o.initialize()}catch(l){Vc()&&console.error("list-render-initialize",l,"context",i)}const a=o.getContainerG();return Z4(i.index,a,r),o.initializeListRender(),o},$D=(e,n)=>e.drawElement(n),RE=(e,n,i,r,o)=>{var h;let a=vg(e,n);const l=o&&o.element;return l&&l!==n&&vg(e,l)&&(a=!0,$O(e,l,n)),{element:n,parent:r,board:e,selected:a,index:i,hasThemeChanged:!!((h=e.operations)!=null&&h.find(d=>d.type==="set_theme"))}},Z4=(e,n,i,r=null)=>{const{parent:o,parentG:a}=i;if(G.isBoard(o))if(e>0){const l=o.children[e-1];gn.getContainerG(l,{suppressThrow:!1}).insertAdjacentElement("afterend",n)}else if(r!==null){const l=o.children[r],c=l&&gn.getContainerG(l,{suppressThrow:!0});if(l&&c)a.insertBefore(n,c);else throw new Error("fail to mount container on moving")}else a.append(n);else if(e>0){const l=o.children[e-1];gn.getElementG(l).insertAdjacentElement("afterend",n)}else if(r){const l=o.children[r],c=l&&G.findPath(i.board,l),h=c&&Je.first(i.board,c),d=h&&gn.getContainerG(h,{suppressThrow:!1});if(d)a.insertBefore(n,d);else throw new Error("fail to mount container on moving")}else{let l=gn.getElementG(o);a.insertBefore(n,l)}},Q4=(e,n,i,r)=>{const o=gn.getContainerG(e,{suppressThrow:!1});Z4(n,o,i,r),e.children&&!gn.isRootElement(e)&&i.board.isExpanded(e)&&e.children.forEach((a,l)=>{Q4(a,l,{...i,parent:e},null)})};class U_{get hasChildren(){return!!this.element.children}set context(n){lO(this)&&this.beforeContextChange(n);const i=this._context;if(this._context=n,this.initialized){const r=this.getElementG(),o=this.getContainerG();lm.set(this.element,r),um.set(this.element,o),vw(this.board).set(this.element.id,this.element),cm.set(this.element,this.ref),this.updateListRender(),uO(this)&&this.onContextChanged(n,i)}else gn.isRootElement(this.element)&&this.hasChildren?(this._g=ze(),this._containerG=ze(),this._containerG.append(this._g)):(this._g=ze(),this._containerG=this._g),lm.set(this.element,this._g),um.set(this.element,this._containerG),cm.set(this.element,this.ref),vw(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(n){this.ref=n,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(gn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const n=G.findPath(this.board,this.element),i=Je.get(this.board,n.slice(0,1));this._rootContainerG=gn.getContainerG(i,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new K4(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var n;lm.get(this.element)===this._g&&lm.delete(this.element),vw(this.board).delete(this.element.id),um.get(this.element)===this._containerG&&um.delete(this.element),cm.get(this.element)===this.ref&&cm.set(this.element,this.ref),Ix(this.board,this.element),this.getContainerG().remove(),(n=this.listRender)==null||n.destroy()}}class $_{constructor(){this.uploadingFiles=[]}getUploadingFile(n){return this.uploadingFiles.find(i=>i.url===n)}setUploadingFile(n){return this.uploadingFiles.push(n)}removeUploadingFile(n){this.uploadingFiles=this.uploadingFiles.filter(i=>i.url!==n.url)}}const V_={transform(e,n){const{current:i}=e;if(i==null)return;const r=Se.transform(i,n);e.current=r,r==null&&e.unref()}};function W_(e,n){const i={viewport:{zoom:1},children:e,theme:{themeColorMode:Li.default},operations:[],history:{redos:[],undos:[]},selection:null,options:n||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:n!=null&&n.readonly?nn.hand:nn.selection,undo:()=>{},redo:()=>{},apply:r=>{for(const o of i.pathRefs())V_.transform(o,r);i.operations.push(r),Qt.transform(i,r),gw.get(i)||(gw.set(i,!0),Promise.resolve().then(()=>{gw.set(i,!1),i.onChange(),i.afterChange(),i.operations=[]}))},pathRef:(r,o)=>{const a=(o==null?void 0:o.affinity)||"forward",l={current:r,affinity:a,unref(){const{current:h}=l;return i.pathRefs().delete(l),l.current=null,h}};return i.pathRefs().add(l),l},pathRefs:()=>{let r=MD.get(i);return r||(r=new Set,MD.set(i,r)),r},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>VL(i),mousedown:r=>{},mousemove:r=>{},mouseleave:r=>{},globalMousemove:r=>{},mouseup:r=>{},globalMouseup:r=>{},keyDown:r=>{},globalKeyDown:r=>{},keyUp:r=>{},dblClick:r=>{},buildFragment:(r,o,a,l)=>r,insertFragment:(r,o,a)=>{},deleteFragment:r=>{MT.removeElements(i,r)},getDeletedFragment:r=>r,getRelatedFragment:(r,o)=>r,normalizeElement:r=>{},drawElement:r=>{throw new Error(`can not resolve plugin element component type: ${r.element.type}`)},isWithinSelection:r=>!1,isRectangleHit:r=>!1,isHit:r=>!1,isInsidePoint:r=>!1,getOneHitElement:r=>r[0],isRecursion:r=>!0,isMovable:r=>!1,getRectangle:r=>null,applyTheme:r=>{},isAlign:r=>!1,pointerDown:r=>{},pointerMove:r=>{},pointerUp:r=>{},pointerCancel:r=>{},pointerOut:r=>{},pointerLeave:r=>{},touchStart:r=>{},touchMove:r=>{},touchEnd:r=>{},globalPointerMove:r=>{},globalPointerUp:r=>{},drop:r=>!1,isImageBindingAllowed:r=>!1,canAddToGroup:r=>!0,canSetZIndex:r=>!0,isExpanded:r=>!0};return i}function X_(e){const{onChange:n,afterChange:i}=e;return e.onChange=()=>{const r=Nw.get(e);r&&r(),n()},e.afterChange=()=>{const r=Gw.get(e);r&&r(),i()},e}const VD="Space",q_=5,WD=new WeakMap;function Y_(e){const{pointerDown:n,pointerMove:i,globalPointerUp:r,keyDown:o,keyUp:a,pointerUp:l}=e;let c=!1,h=null,d=null,p=!1,m=!1,w=!1;e.pointerDown=D=>{const b=e.getPluginOptions(Sl.withHand);((b==null?void 0:b.isHandMode(e,D))||G.isPointer(e,nn.hand)||w)&&Dl(D)?(h={x:D.x,y:D.y},G.isPointer(e,nn.hand)||G.getBoardContainer(e).classList.add("viewport-moving")):PO(D)?(p=!0,D.preventDefault(),h={x:D.x,y:D.y},x()):BO(D)&&(m=!0,h={x:D.x,y:D.y},d=D),d=D,n(D)},e.pointerMove=D=>{const b=e.getPluginOptions(Sl.withHand),B=r4+4;if(m&&h&&!c&&d&&be(d.x,d.y,D.x,D.y)>q_&&x(),h&&!c&&!Dr(e)&&d&&be(d.x,d.y,D.x,D.y)>B&&!sf(e)&&x(),((b==null?void 0:b.isHandMode(e,D))||G.isPointer(e,nn.hand)||p||m||w)&&c&&h&&!Dr(e)&&!sf(e)){const I=G.getViewportContainer(e),R=I.scrollLeft-(D.x-h.x),k=I.scrollTop-(D.y-h.y);x4(e,R,k,!1),h.x=D.x,h.y=D.y}i(D)},e.pointerUp=D=>{c||l(D)},e.globalPointerUp=D=>{h&&(h=null),T(),p=!1,m=!1,r(D)},e.keyDown=D=>{D.code===VD&&(!e.options.readonly&&!G.isPointer(e,nn.hand)&&(w=!0,rS(e,{isDisabledSelection:!0}),G.getBoardContainer(e).classList.add("viewport-moving")),D.preventDefault()),o(D)},e.keyUp=D=>{!e.options.readonly&&D.code===VD&&(w=!1,rS(e,{isDisabledSelection:!1}),G.getBoardContainer(e).classList.remove("viewport-moving")),a(D)};const x=()=>{c=!0,G.getBoardContainer(e).classList.add("viewport-moving"),WD.set(e,!0)},T=()=>{c=!1,G.getBoardContainer(e).classList.remove("viewport-moving"),setTimeout(()=>{WD.set(e,!1)},0)};return e}function K_(e){const{apply:n,keyDown:i}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:r}=e,{redos:o}=r;if(o.length>0){const a=o[o.length-1];Us.withoutSaving(e,()=>{for(const l of a)e.apply(l)}),r.redos.pop(),r.undos.push(a)}},e.undo=()=>{const{history:r}=e,{undos:o}=r;if(o.length>0){const a=o[o.length-1];Us.withoutSaving(e,()=>{const l=a.map(jc.inverse).reverse();for(const c of l)e.apply(c)}),r.redos.push(a),r.undos.pop()}},e.apply=r=>{const{operations:o,history:a}=e,{undos:l}=a,c=l[l.length-1],h=c&&c[c.length-1];let d=Us.isSaving(e),p=Us.isMerging(e);if(d==null&&(d=IO(r)),d){if(p||(c==null?p=!1:o.length!==0?p=!0:p=kO(r,h)),Us.isSplittingOnce(e)&&(p=!1,Us.setSplittingOnce(e,void 0)),c&&p)c.push(r);else{const m=[r];l.push(m)}for(;l.length>100;)l.shift();HO(r)&&(a.redos=[])}n(r)},e.keyDown=r=>{if(ln.isHotkey("mod+z",r)){e.undo();return}if(ln.isHotkey("mod+shift+z",r)){e.redo();return}i(r)},e}const Z_=e=>{const{keyDown:n,keyUp:i,globalKeyDown:r}=e;return e.keyDown=o=>{const a=e.getPluginOptions(Sl.withSelection);if(!G.isReadonly(e)&&a.isMultipleSelection&&ln.isHotkey("mod+a",o)){o.preventDefault();let c=[];Ar(e,h=>{G.isBoard(h)||c.push(h)},h=>!!(G.isBoard(h)||e.isRecursion(h)),!0),Qt.addSelectionWithTemporaryElements(e,c);return}if(!G.isReadonly(e)){if(ln.isKeyHotkey("mod+]",o)){o.preventDefault(),Qt.moveUp(e);return}if(ln.isKeyHotkey("mod+[",o)){o.preventDefault(),Qt.moveDown(e);return}if(ln.isKeyHotkey("mod+option+",o)){o.preventDefault(),Qt.moveToTop(e);return}if(ln.isKeyHotkey("mod+option+",o)){o.preventDefault(),Qt.moveToBottom(e);return}}const l=ne(e);if(!G.isReadonly(e)&&l.length>0&&ln.isKeyHotkey("mod+d",o)){o.preventDefault(),PT(e);return}!G.isReadonly(e)&&l.length>0&&($r.isDeleteBackward(o)||$r.isDeleteForward(o))&&(o.preventDefault(),BT(e)),n(o)},e.keyUp=o=>{i(o)},e.globalKeyDown=o=>{if(G.getMovingPointInBoard(e)||G.isMovingPointInBoard(e)){if(ln.isHotkey(["mod+=","mod++"],{byKey:!0})(o)){o.preventDefault(),un.updateZoom(e,e.viewport.zoom+.1);return}if(ln.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(o)){o.preventDefault(),un.fitViewport(e);return}if(ln.isHotkey(["mod+-","mod+shift+-"])(o)){o.preventDefault(),un.updateZoom(e,e.viewport.zoom-.1);return}if(ln.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(o)){o.preventDefault(),un.updateZoom(e,1);return}}r(o)},e};function Q_(e,n,i){const r=_4(e,i),o=ze();let a=tF(n,r);const l=nF(e,a,n,r);o.append(l);const c=iF(e,a,n,r);return a=c.snapDelta,o.append(c.snapG),{...a,snapG:o}}function J_(e,n,i){const r=nd(e,i),o=mm(n,r[0],i),a=mm(n,r[1],i),l=mm(n,r[2],i);return[o,a,l]}function tF(e,n){let i={deltaX:0,deltaY:0};function r(o){let a=0;const l=J_(e,n,o);for(let c=0;c<l.length;c++)if(Math.abs(l[c])<Cu){a=l[c];break}return a}return i.deltaX=r(!0),i.deltaY=r(!1),i}function eF(e,n){const{deltaX:i,deltaY:r}=e,{x:o,y:a,width:l,height:c}=n;return{x:o+i,y:a+r,width:l,height:c}}function nF(e,n,i,r){const o=eF(n,i);return F4(e,o,r,!0,!0,!0)}function iF(e,n,i,r){let o=n.deltaX,a=n.deltaY;const l=XD(i,r,!0),c=XD(i,r,!1),h=[...l.lines,...c.lines];return l.delta&&(o=l.delta),c.delta&&(a=c.delta),{snapDelta:{deltaX:o,deltaY:a},snapG:k4(e,h)}}function XD(e,n,i){var A,I;let r=[],o=0,a=[];const l=i?"x":"y",c=i?"width":"height",h=e[l]+e[c]/2;n.forEach(R=>{(i?rF(R,e):oF(R,e))&&!H.isHit(R,e)&&a.push(R)}),a=[...a,e].sort((R,k)=>R[l]-k[l]);const d=[];let p=0,m,w;for(let R=0;R<a.length;R++)for(let k=R+1;k<a.length;k++){const W=a[R],U=a[k],nt=U[l]-(W[l]+W[c]);let st=1/0;(A=d[R])!=null&&A.after?d[R].after.push({distance:nt,index:k}):d[R]={...d[R],after:[{distance:nt,index:k}]},(I=d[k])!=null&&I.before?d[k].before.push({distance:nt,index:R}):d[k]={...d[k],before:[{distance:nt,index:R}]};let ft=(W[l]+W[c]+U[l])/2;st=Math.abs(ft-h),st<Cu&&(p=(U[l]-(W[l]+W[c])-e[c])/2,o=ft-h,m=R,w=k);const Et=U[l]-(W[l]+W[c]);ft=U[l]+U[c]+Et+e[c]/2,st=Math.abs(ft-h),(!p||p!==Et)&&st<Cu&&(p=Et,m=k,o=ft-h);const ct=U[l]-(W[l]+W[c]);ft=W[l]-ct-e[c]/2,st=Math.abs(ft-h),!p&&st<Cu&&(p=ct,w=R,o=ft-h)}const x=a.indexOf(e);let T=[],D=[];if(m!==void 0&&(T.push(m),b(p,d[m],"before",T)),w!==void 0&&(D.push(w),b(p,d[w],"after",D)),T.length||D.length){const R=[...T.reverse(),x,...D];e[l]+=o;for(let k=1;k<R.length;k++)r.push(B(a[R[k-1]],a[R[k]]))}function b(R,k,W,U){const nt=k[W],st=d.indexOf(k);if(!(st===0&&W==="before"||st===d.length-1&&W==="after")){for(let ft=0;ft<nt.length;ft++)if(Math.abs(nt[ft].distance-R)<.1){U.push(nt[ft].index),b(R,d[nt[ft].index],W,U);return}}}function B(R,k){const W=l==="x"?"y":"x",U=c==="width"?"height":"width",st=[R[W],R[W]+R[U],k[W],k[W]+k[U]].sort((ct,mt)=>ct-mt),ft=(st[1]+st[2])/2,Et=3;return i?[[R.x+R.width+Et,ft],[k.x-Et,ft]]:[[ft,R.y+R.height+Et],[ft,k.y-Et]]}return{delta:o,lines:r}}function rF(e,n){return!(e.y+e.height<n.y||e.y>n.y+n.height)}function oF(e,n){return!(e.x+e.width<n.x||e.x>n.x+n.width)}function sF(e){const{pointerDown:n,pointerMove:i,globalPointerUp:r,globalPointerMove:o,globalKeyDown:a,keyUp:l,touchStart:c,touchMove:h,touchEnd:d}=e;let p=0,m=0,w=!1,x,T=[],D=null,b=null,B=null,A,I,R=null,k=null;e.globalKeyDown=U=>{G.isReadonly(e)||ln.isKeyHotkey("option",U)&&(U.preventDefault(),x&&T.length&&!G.hasBeenTextEditing(e)&&(R&&G.getElementTopHost(e).removeChild(R),R=qD(e,T,p,m),R&&G.getElementTopHost(e).append(R))),a(U)},e.keyUp=U=>{if(!G.isReadonly(e)&&R&&x&&T.length&&!G.hasBeenTextEditing(e)){U.preventDefault();const nt=cS(e,T,p,m);G.getBoardContainer(e).classList.add("element-moving"),LD(e,nt)}R==null||R.remove(),l(U)},e.pointerDown=U=>{if(G.isReadonly(e)||!G.isPointer(e,nn.selection)||!Dl(U)){n(U);return}const nt=Pe(e,ke(e,U.x,U.y));if(A=Ll(e,nt,st=>e.isMovable(st)),B=J4(e),I=A&&B.includes(A),A&&I)x=nt,k=U.pointerId,T=B,b=pn(e,T,!0);else if(A){x=nt,k=U.pointerId;const st=e.getRelatedFragment([],[A]);T=[...AT(e,A),...st],b=pn(e,T,!0)}else{const st=B.length>0&&pn(e,B,!1);st&&H.isPointInRectangle(st,nt)&&(x=nt,k=U.pointerId,T=B,b=st)}n(U)},e.touchMove=U=>{if(x&&T.length){U.preventDefault();return}h(U)},e.pointerMove=U=>{if(x&&T.length&&!G.hasBeenTextEditing(e)&&k===U.pointerId){w||(w=!0),D==null||D.remove(),R==null||R.remove();const nt=Pe(e,ke(e,U.x,U.y));p=nt[0]-x[0],m=nt[1]-x[1],(be(...nt,...x)>sT||mL(e).length>0)&&(A&&!I&&B&&B.length>0&&(j4(e,[]),A=void 0,B=null,I=void 0),_a(e,"with-moving",()=>{if(!b)return;const ft={...b,x:b.x+p,y:b.y+m},Et=gv(ft,Wo(T)),ct=Q_(e,Et,T);if(p+=ct.deltaX,m+=ct.deltaY,D=ct.snapG,D.classList.add(i4),G.getElementTopHost(e).append(D),U.altKey)R=qD(e,T,p,m),R&&G.getElementTopHost(e).append(R);else{const mt=cS(e,T,p,m);G.getBoardContainer(e).classList.add("element-moving"),LD(e,mt)}}))}w&&U.preventDefault(),i(U)},e.globalPointerMove=U=>{x&&(CO(e,U.x,U.y)||W(e)),o(U)},e.globalPointerUp=U=>{if(U.altKey&&T.length){const nt=RT(e,T),st=pn(e,nt,!1);PT(e,nt,[st.x+p,st.y+m])}w=!1,A=void 0,B=null,I=void 0,x&&W(e),r(U)};function W(U){D==null||D.remove(),R==null||R.remove(),x=null,k=null,b=null,p=0,m=0,T=[],sf(U)&&vL(U),tr.set(U,!1),G.getBoardContainer(U).classList.remove("element-moving")}return aF(e)}function aF(e){const{keyDown:n,keyUp:i}=e;return e.keyDown=r=>{const o=ne(e);if(!G.isReadonly(e)&&o.length>0&&($r.isArrow(r)||$r.isExtendArrow(r))){r.preventDefault();const a=!!r.shiftKey,l=[0,0],c=a?10:1;switch(!0){case($r.isMoveUp(r)||$r.isExtendUp(r)):{l[1]=-c;break}case($r.isMoveDown(r)||$r.isExtendDown(r)):{l[1]=c;break}case($r.isMoveBackward(r)||$r.isExtendBackward(r)):{l[0]=-c;break}case($r.isMoveForward(r)||$r.isExtendForward(r)):{l[0]=c;break}}const h=J4(e);_a(e,"with-arrow-moving",()=>{cS(e,h,l[0],l[1])})}n(r)},e.keyUp=r=>{tr.set(e,!1),i(r)},e}function J4(e){const n=ne(e),i=e.children.filter(a=>e.isMovable(a)),r=n.filter(a=>i.includes(a)),o=e.getRelatedFragment([]);return r.push(...o),r}function RT(e,n){return[...n].filter(r=>!So.isGroup(r)&&gn.isRootElement(r))}function cS(e,n,i,r){return RT(e,n).map(l=>{const h=(l.points||[]).map(p=>[p[0]+i,p[1]+r]),d=mg.get(l);return Qt.setNode(e,{points:h},[d]),tr.set(e,!0),Je.get(e,[d])})}function qD(e,n,i,r){let o=null;const a=[];return RT(e,n).forEach(c=>{Ar(c,h=>{a.push(h)},()=>!0)}),a.filter(c=>gn.hasMounted(c)).forEach(c=>{let h=e.getRectangle(c);if(h){h={x:h.x+i,y:h.y+r,width:h.width,height:h.height};const d=ka(e,h,{stroke:Ko,strokeWidth:1,fill:mT,fillStyle:"solid"});o||(o=ze(),o.classList.add(i4));const p=B_(c);p&&qs(d,H.getCenterPoint(h),p),o.append(d)}}),o}const lF=e=>{const n=new Map,i=e;return i.getPluginOptions=r=>n.get(r),i.setPluginOptions=(r,o)=>{const a=i.getPluginOptions(r)||{};n.set(r,{...a,...o})},i};function uF(e){const{buildFragment:n}=e;return e.buildFragment=(i,r,o,a)=>{let l=e.getRelatedFragment(a||[]);if(l&&(a!=null&&a.length&&(l=l.filter(c=>!a.map(h=>h.id).includes(c.id))),l.length)){const c={text:"",type:Au.elements,elements:l};i=Gx(i,c)}return n(i,r,o,a)},e}function cF(e){const{pointerDown:n,pointerUp:i,pointerMove:r,globalPointerUp:o,onChange:a,afterChange:l,touchStart:c,touchMove:h,touchEnd:d}=e;let p=null,m=null,w,x,T=!1,D=null,b=null;return e.pointerDown=B=>{!T&&B.shiftKey&&(T=!0),T&&!B.shiftKey&&(T=!1);const A=Pe(e,ke(e,B.x,B.y)),I=WO(e,A),R=mw(e);G.isPointer(e,nn.selection)&&Dl(B)&&!I&&R.isMultipleSelection&&!R.isDisabledSelection&&(u_(B)?(D&&(clearTimeout(D),D=null),D=setTimeout(()=>{p=[B.x,B.y],D=null},400)):p=[B.x,B.y]),b=B,n(B)},e.touchMove=B=>{if(p&&B.touches.length>1&&(p=null,w==null||w.remove()),p){B.preventDefault();return}h(B)},e.pointerMove=B=>{if(D&&b&&be(b.x,b.y,B.x,B.y)>r4&&(clearTimeout(D),D=null),G.isPointer(e,nn.selection)&&p){B.preventDefault(),m=[B.x,B.y];const A=H.getRectangleByPoints([ed(e,...p),ed(e,...m)]);w==null||w.remove(),_a(e,"with-selection",()=>{p&&m&&Qt.setSelection(e,{anchor:Pe(e,ke(e,p[0],p[1])),focus:Pe(e,ke(e,m[0],m[1]))})}),GL(e),w=ka(e,A,{stroke:Ko,strokeWidth:1,fill:mT,fillStyle:"solid"}),G.getActiveHost(e).append(w)}r(B)},e.pointerUp=B=>{const A=G.isPointer(e,nn.selection)||G.isPointer(e,nn.hand);if(!Dl(B)||of(e)||!A){i(B);return}const R=Pe(e,ke(e,B.x,B.y)),k={anchor:R,focus:R};Qt.setSelection(e,k),i(B)},e.globalPointerUp=B=>{p&&m&&(w==null||w.remove(),zL(e),Qt.setSelection(e,{anchor:Pe(e,ke(e,p[0],p[1])),focus:Pe(e,ke(e,m[0],m[1]))}));const A=mw(e);if(G.isFocus(e)&&!A.isPreventClearSelection){const I=B.target instanceof Node&&G.getBoardContainer(e).contains(B.target),R=B.target instanceof Node&&document.contains(B.target),k=B.target instanceof Element&&B.target.closest(`.${Fa}`);!I&&!p&&!k&&R&&Qt.setSelection(e,null)}p=null,m=null,D&&(clearTimeout(D),D=null),b=null,o(B)},e.onChange=()=>{const B=mw(e);if(B.isDisabledSelection&&zg(e),e.operations.forEach(A=>{A.type==="remove_node"&&Ix(e,A.node,!0)}),HD(e)&&ND(e))try{T||x==null||x.remove();const A=jL(e);if(A)El(e,[...A]);else{let R=f4(e);!B.isMultipleSelection&&R.length>1&&(R=[R[0]]);const k=R.some(U=>U.groupId),W=ne(e);if(k)WL(e,R,T);else{if(e.selection&&bg.isCollapsed(e.selection)){const U=e.getOneHitElement(R);U&&(R=[U])}if(T){const U=[...W];e.selection&&bg.isCollapsed(e.selection)?(R.forEach(nt=>{U.includes(nt)?U.splice(U.indexOf(nt),1):U.push(nt)}),El(e,U)):(R.forEach(nt=>{U.includes(nt)||U.push(nt)}),El(e,[...U]))}else El(e,[...R])}}const I=ne(e);$L(e),Dr(e)||(x==null||x.remove(),I.length>1&&(x=e.drawSelectionRectangle(),G.getActiveHost(e).append(x)))}catch(A){console.error(A)}a()},e.afterChange=()=>{if(HD(e)&&!ND(e))try{const B=ne(e);B.length&&B.length>1?(x==null||x.remove(),x=e.drawSelectionRectangle(),G.getActiveHost(e).append(x)):x==null||x.remove()}catch(B){console.error(B)}l()},rS(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const fF=e=>{const n=e;return n.getI18nValue=i=>(console.warn(`I18n key "${i}" is not found.`),null),n},zx=(e,n,i="")=>e.getI18nValue(n)||i;var OE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var YD;function hF(){return YD||(YD=1,function(e){(function(){var n={}.hasOwnProperty;function i(){for(var a="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(a=o(a,r(c)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return i.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var c in a)n.call(a,c)&&a[c]&&(l=o(l,c));return l}function o(a,l){return l?a?a+" "+l:a+l:a}e.exports?(i.default=i,e.exports=i):window.classNames=i})()}(OE)),OE.exports}var dF=hF();const mn=hf(dF);var gF=function(e){return typeof e=="function"};function KD(e,n){if(e===n)return!0;for(var i=0;i<e.length;i++)if(!Object.is(e[i],n[i]))return!1;return!0}function tB(e){var n=Y.useRef(e);return n.current=e,n}var pF=function(e){var n=tB(e);Y.useEffect(function(){return function(){n.current()}},[])},LE,ZD;function OT(){if(ZD)return LE;ZD=1;function e(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}return LE=e,LE}var _E,QD;function mF(){if(QD)return _E;QD=1;var e=typeof Ws=="object"&&Ws&&Ws.Object===Object&&Ws;return _E=e,_E}var FE,JD;function eB(){if(JD)return FE;JD=1;var e=mF(),n=typeof self=="object"&&self&&self.Object===Object&&self,i=e||n||Function("return this")();return FE=i,FE}var kE,t5;function vF(){if(t5)return kE;t5=1;var e=eB(),n=function(){return e.Date.now()};return kE=n,kE}var IE,e5;function yF(){if(e5)return IE;e5=1;var e=/\s/;function n(i){for(var r=i.length;r--&&e.test(i.charAt(r)););return r}return IE=n,IE}var HE,n5;function wF(){if(n5)return HE;n5=1;var e=yF(),n=/^\s+/;function i(r){return r&&r.slice(0,e(r)+1).replace(n,"")}return HE=i,HE}var NE,i5;function nB(){if(i5)return NE;i5=1;var e=eB(),n=e.Symbol;return NE=n,NE}var GE,r5;function xF(){if(r5)return GE;r5=1;var e=nB(),n=Object.prototype,i=n.hasOwnProperty,r=n.toString,o=e?e.toStringTag:void 0;function a(l){var c=i.call(l,o),h=l[o];try{l[o]=void 0;var d=!0}catch{}var p=r.call(l);return d&&(c?l[o]=h:delete l[o]),p}return GE=a,GE}var zE,o5;function CF(){if(o5)return zE;o5=1;var e=Object.prototype,n=e.toString;function i(r){return n.call(r)}return zE=i,zE}var jE,s5;function EF(){if(s5)return jE;s5=1;var e=nB(),n=xF(),i=CF(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function l(c){return c==null?c===void 0?o:r:a&&a in Object(c)?n(c):i(c)}return jE=l,jE}var UE,a5;function SF(){if(a5)return UE;a5=1;function e(n){return n!=null&&typeof n=="object"}return UE=e,UE}var $E,l5;function TF(){if(l5)return $E;l5=1;var e=EF(),n=SF(),i="[object Symbol]";function r(o){return typeof o=="symbol"||n(o)&&e(o)==i}return $E=r,$E}var VE,u5;function AF(){if(u5)return VE;u5=1;var e=wF(),n=OT(),i=TF(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;function h(d){if(typeof d=="number")return d;if(i(d))return r;if(n(d)){var p=typeof d.valueOf=="function"?d.valueOf():d;d=n(p)?p+"":p}if(typeof d!="string")return d===0?d:+d;d=e(d);var m=a.test(d);return m||l.test(d)?c(d.slice(2),m?2:8):o.test(d)?r:+d}return VE=h,VE}var WE,c5;function iB(){if(c5)return WE;c5=1;var e=OT(),n=vF(),i=AF(),r="Expected a function",o=Math.max,a=Math.min;function l(c,h,d){var p,m,w,x,T,D,b=0,B=!1,A=!1,I=!0;if(typeof c!="function")throw new TypeError(r);h=i(h)||0,e(d)&&(B=!!d.leading,A="maxWait"in d,w=A?o(i(d.maxWait)||0,h):w,I="trailing"in d?!!d.trailing:I);function R(mt){var wt=p,V=m;return p=m=void 0,b=mt,x=c.apply(V,wt),x}function k(mt){return b=mt,T=setTimeout(nt,h),B?R(mt):x}function W(mt){var wt=mt-D,V=mt-b,P=h-wt;return A?a(P,w-V):P}function U(mt){var wt=mt-D,V=mt-b;return D===void 0||wt>=h||wt<0||A&&V>=w}function nt(){var mt=n();if(U(mt))return st(mt);T=setTimeout(nt,W(mt))}function st(mt){return T=void 0,I&&p?R(mt):(p=m=void 0,x)}function ft(){T!==void 0&&clearTimeout(T),b=0,p=D=m=T=void 0}function Et(){return T===void 0?x:st(n())}function ct(){var mt=n(),wt=U(mt);if(p=arguments,m=this,D=mt,wt){if(T===void 0)return k(D);if(A)return clearTimeout(T),T=setTimeout(nt,h),R(D)}return T===void 0&&(T=setTimeout(nt,h)),x}return ct.cancel=ft,ct.flush=Et,ct}return WE=l,WE}var DF=iB();const bF=hf(DF);var BF=!!(typeof window<"u"&&window.document&&window.document.createElement),XE,f5;function PF(){if(f5)return XE;f5=1;var e=iB(),n=OT(),i="Expected a function";function r(o,a,l){var c=!0,h=!0;if(typeof o!="function")throw new TypeError(i);return n(l)&&(c="leading"in l?!!l.leading:c,h="trailing"in l?!!l.trailing:h),e(o,a,{leading:c,maxWait:a,trailing:h})}return XE=r,XE}var MF=PF();const RF=hf(MF);function rB(e,n){if(BF){if(!e)return n;var i;return gF(e)?i=e():"current"in e?i=e.current:i=e,i}}var OF=function(e){var n=function(i,r,o){var a=Y.useRef(!1),l=Y.useRef([]),c=Y.useRef([]),h=Y.useRef(void 0);e(function(){var d,p=Array.isArray(o)?o:[o],m=p.map(function(w){return rB(w)});if(!a.current){a.current=!0,l.current=m,c.current=r,h.current=i();return}(m.length!==l.current.length||!KD(l.current,m)||!KD(c.current,r))&&((d=h.current)===null||d===void 0||d.call(h),l.current=m,c.current=r,h.current=i())}),pF(function(){var d;(d=h.current)===null||d===void 0||d.call(h),a.current=!1})};return n},LF=OF(Y.useEffect);function Vi(e,n,i){i===void 0&&(i={});var r=i.enable,o=r===void 0?!0:r,a=tB(n);LF(function(){if(o){var l=rB(i.target,window);if(l!=null&&l.addEventListener){var c=function(d){return a.current(d)},h=Array.isArray(e)?e:[e];return h.forEach(function(d){l.addEventListener(d,c,{capture:i.capture,once:i.once,passive:i.passive})}),function(){h.forEach(function(d){l.removeEventListener(d,c,{capture:i.capture})})}}}},[e,i.capture,i.once,i.passive,o],i.target)}const _F=(e,n,i)=>{Vi("pointerdown",r=>{e.pointerDown(r)},{target:i}),Vi("pointermove",r=>{J3.set(e,[r.x,r.y]),e.pointerMove(r)},{target:n}),Vi("pointerleave",r=>{J3.delete(e),e.pointerLeave(r)},{target:n}),Vi("pointerup",r=>{e.pointerUp(r)},{target:n}),Vi("touchstart",r=>{e.touchStart(r)},{target:n}),Vi("touchmove",r=>{e.touchMove(r)},{target:n}),Vi("touchend",r=>{e.touchEnd(r)},{target:n}),Vi("dblclick",r=>{G.isFocus(e)&&!G.hasBeenTextEditing(e)&&e.dblClick(r)},{target:i}),Vi("pointermove",r=>{s4.set(e,[r.x,r.y]),e.globalPointerMove(r)}),Vi("pointerup",r=>{e.globalPointerUp(r)}),Vi("keydown",r=>{e.globalKeyDown(r),G.isFocus(e)&&!G.hasBeenTextEditing(e)&&!bO(r.target)&&e.keyDown(r)}),Vi("keyup",r=>{G.isFocus(e)&&!G.hasBeenTextEditing(e)&&(e==null||e.keyUp(r))}),Vi("copy",r=>{G.isFocus(e)&&!G.hasBeenTextEditing(e)&&(r.preventDefault(),GD(e,Ma.copy,r.clipboardData))}),Vi("paste",async r=>{if(G.isFocus(e)&&!G.isReadonly(e)&&!G.hasBeenTextEditing(e)){const o=G.getMovingPointInBoard(e);if(o){const a=Pe(e,ke(e,o[0],o[1])),l=await HL(r.clipboardData);e.insertFragment(l,a,Ma.paste)}}}),Vi("cut",r=>{G.isFocus(e)&&!G.isReadonly(e)&&!G.hasBeenTextEditing(e)&&(r.preventDefault(),GD(e,Ma.cut,r.clipboardData),BT(e))}),Vi("drop",r=>{G.isReadonly(e)||(r.preventDefault(),e.drop(r))},{target:n}),Vi("dragover",r=>{r.preventDefault()},{target:n})},FF=(e,n)=>{Vi("scroll",o=>{if(cL(e))T4(e,!1);else{const{scrollLeft:a,scrollTop:l}=o.target;C4(e,a,l)}},{target:n}),Vi("contextmenu",o=>{o.preventDefault()},{target:n}),Vi("wheel",o=>{if(o.metaKey||o.ctrlKey){o.preventDefault();const{deltaX:a,deltaY:l}=o,c=e.viewport.zoom,h=Math.sign(l),d=rO*100,p=Math.abs(l);let m=l;p>d&&(m=d*h);let w=c-m/100;w+=Math.log10(Math.max(1,c))*-h*Math.min(1,p/20),un.updateZoom(e,w,G.getMovingPointInBoard(e))}},{target:n,passive:!1});const i=Y.useRef(!1),r=Y.useRef({scrollLeft:0,scrollTop:0});Y.useEffect(()=>{const o=n.current;if(!o)return;const a=()=>{(o.scrollLeft!==0||o.scrollTop!==0)&&(r.current={scrollLeft:o.scrollLeft,scrollTop:o.scrollTop})},l=setInterval(a,500);return o.addEventListener("scroll",a),()=>{clearInterval(l),o.removeEventListener("scroll",a)}},[n]),Y.useEffect(()=>{const o=new ResizeObserver(a=>{if(!i.current){i.current=!0;return}const l=a[0],{width:c,height:h}=l.contentRect;if(c===0||h===0)return;const d={...e.viewport},p={...r.current};wT(e),xT(e),Om(e),d.zoom&&d.origination&&(e.viewport=d,Om(e)),requestAnimationFrame(()=>{const m=n.current;m&&(p.scrollLeft!==0||p.scrollTop!==0)&&(m.scrollLeft=p.scrollLeft,m.scrollTop=p.scrollTop)})});return o.observe(G.getBoardContainer(e)),()=>{o&&o.disconnect()}},[n])},LT=Y.createContext(null),qi=()=>{const e=Y.useContext(LT);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:n}=e;return n},oB=()=>{const e=Y.useContext(LT);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:n}=e;return n},sB=({style:e,className:n,children:i,afterInit:r})=>{var T,D;const o=Y.useRef(null),a=Y.useRef(null),l=Y.useRef(null),c=Y.useRef(null),h=Y.useRef(null),d=Y.useRef(null),p=Y.useRef(null),m=Y.useRef(null),w=qi(),x=oB();return Y.useEffect(()=>{const b=$R.svg(o.current,{options:{roughness:0,strokeWidth:1}});Y3.set(w,b),K3.set(w,o.current),Q3.set(w,!0),du.set(w,{lowerHost:a.current,host:l.current,upperHost:c.current,topHost:h.current,activeHost:d.current,container:m.current,viewportContainer:p.current});const B=new $_;return Z3.set(w,B),X3.set(w,new Map),x.initialized||(x.initialize(w.children,{board:w,parent:w,parentG:G.getElementHost(w)}),r&&r(w)),wT(w),xT(w),aL(w),()=>{Z3.delete(w),Gw.delete(w),Nw.delete(w),du.delete(w),Q3.delete(w),K3.delete(w),Y3.delete(w),X3.delete(w)}},[]),_F(w,p,o),FF(w,p),O.jsx("div",{className:mn(n,oO,`${kF()}`,`theme-${(T=w.theme)==null?void 0:T.themeColorMode}`,`pointer-${w.pointer}`,{focused:G.isFocus(w),readonly:G.isReadonly(w),"disabled-scroll":((D=w.options)==null?void 0:D.disabledScrollOnNonFocus)&&!G.isFocus(w)}),ref:m,style:e,children:O.jsxs("div",{className:"viewport-container",ref:p,style:{width:"100%",height:"100%",overflow:"auto"},children:[O.jsxs("svg",{ref:o,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[O.jsx("g",{className:"element-lower-host",ref:a}),O.jsx("g",{className:"element-host",ref:l}),O.jsx("g",{className:"element-upper-host",ref:c}),O.jsx("g",{className:"element-top-host",ref:h})]}),O.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:O.jsx("g",{className:"active-host-g",ref:d})}),i]})})},kF=()=>_O?"safari":FO?"chrome":LO?"firefox":"";var IF={transform(e,n){var{current:i,affinity:r}=e;if(i!=null){var o=ut.transform(i,n,{affinity:r});e.current=o,o==null&&e.unref()}}},HF={transform(e,n){var{current:i,affinity:r}=e;if(i!=null){var o=Sn.transform(i,n,{affinity:r});e.current=o,o==null&&e.unref()}}},NF={transform(e,n){var{current:i,affinity:r}=e;if(i!=null){var o=_t.transform(i,n,{affinity:r});e.current=o,o==null&&e.unref()}}},Ww=new WeakMap,Xw=new WeakMap,vm=new WeakMap,aB=new WeakMap,h5=new WeakMap,d5=new WeakMap,g5=new WeakMap,ut={ancestors(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:i=!1}=n,r=ut.levels(e,n);return i?r=r.slice(1):r=r.slice(0,-1),r},common(e,n){for(var i=[],r=0;r<e.length&&r<n.length;r++){var o=e[r],a=n[r];if(o!==a)break;i.push(o)}return i},compare(e,n){for(var i=Math.min(e.length,n.length),r=0;r<i;r++){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1}return 0},endsAfter(e,n){var i=e.length-1,r=e.slice(0,i),o=n.slice(0,i),a=e[i],l=n[i];return ut.equals(r,o)&&a>l},endsAt(e,n){var i=e.length,r=e.slice(0,i),o=n.slice(0,i);return ut.equals(r,o)},endsBefore(e,n){var i=e.length-1,r=e.slice(0,i),o=n.slice(0,i),a=e[i],l=n[i];return ut.equals(r,o)&&a<l},equals(e,n){return e.length===n.length&&e.every((i,r)=>i===n[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,n){return ut.compare(e,n)===1},isAncestor(e,n){return e.length<n.length&&ut.compare(e,n)===0},isBefore(e,n){return ut.compare(e,n)===-1},isChild(e,n){return e.length===n.length+1&&ut.compare(e,n)===0},isCommon(e,n){return e.length<=n.length&&ut.compare(e,n)===0},isDescendant(e,n){return e.length>n.length&&ut.compare(e,n)===0},isParent(e,n){return e.length+1===n.length&&ut.compare(e,n)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,n){if(e.length!==n.length)return!1;var i=e.slice(0,-1),r=n.slice(0,-1),o=e[e.length-1],a=n[n.length-1];return o!==a&&ut.equals(i,r)},levels(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:i=!1}=n,r=[],o=0;o<=e.length;o++)r.push(e.slice(0,o));return i&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var n=e[e.length-1];return e.slice(0,-1).concat(n+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var n=e[e.length-1];if(n<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(n-1)},relative(e,n){if(!ut.isAncestor(n,e)&&!ut.equals(e,n))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(n,"], because it is not above or equal to the path."));return e.slice(n.length)},transform(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:o="forward"}=i;if(e.length===0)return r;switch(n.type){case"insert_node":{var{path:a}=n;(ut.equals(a,r)||ut.endsBefore(a,r)||ut.isAncestor(a,r))&&(r[a.length-1]+=1);break}case"remove_node":{var{path:l}=n;if(ut.equals(l,r)||ut.isAncestor(l,r))return null;ut.endsBefore(l,r)&&(r[l.length-1]-=1);break}case"merge_node":{var{path:c,position:h}=n;ut.equals(c,r)||ut.endsBefore(c,r)?r[c.length-1]-=1:ut.isAncestor(c,r)&&(r[c.length-1]-=1,r[c.length]+=h);break}case"split_node":{var{path:d,position:p}=n;if(ut.equals(d,r)){if(o==="forward")r[r.length-1]+=1;else if(o!=="backward")return null}else ut.endsBefore(d,r)?r[d.length-1]+=1:ut.isAncestor(d,r)&&e[d.length]>=p&&(r[d.length-1]+=1,r[d.length]-=p);break}case"move_node":{var{path:m,newPath:w}=n;if(ut.equals(m,w))return r;if(ut.isAncestor(m,r)||ut.equals(m,r)){var x=w.slice();return ut.endsBefore(m,w)&&m.length<w.length&&(x[m.length-1]-=1),x.concat(r.slice(m.length))}else ut.isSibling(m,w)&&(ut.isAncestor(w,r)||ut.equals(w,r))?ut.endsBefore(m,r)?r[m.length-1]-=1:r[m.length-1]+=1:ut.endsBefore(w,r)||ut.equals(w,r)||ut.isAncestor(w,r)?(ut.endsBefore(m,r)&&(r[m.length-1]-=1),r[w.length-1]+=1):ut.endsBefore(m,r)&&(ut.equals(w,r)&&(r[w.length-1]+=1),r[m.length-1]-=1);break}}return r}};function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_m(e)}function GF(e,n){if(_m(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,n);if(_m(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function zF(e){var n=GF(e,"string");return _m(n)==="symbol"?n:String(n)}function Do(e,n,i){return n=zF(n),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function p5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function ci(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?p5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var m5=function(n,i){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return[...n.slice(0,i),...o,...n.slice(i)]},Fm=function(n,i,r){for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return[...n.slice(0,i),...a,...n.slice(i+r)]},v5=Fm,_T=(e,n,i)=>{if(n.length===0)throw new Error("Cannot modify the editor");for(var r=te.get(e,n),o=n.slice(),a=i(r);o.length>1;){var l=o.pop(),c=te.get(e,o);a=ci(ci({},c),{},{children:Fm(c.children,l,1,a)})}var h=o.pop();e.children=Fm(e.children,h,1,a)},tg=(e,n,i)=>{n.length===0?e.children=i(e.children):_T(e,n,r=>{if(se.isText(r))throw new Error("Cannot get the element at path [".concat(n,"] because it refers to a leaf node: ").concat(Wi.stringify(r)));return ci(ci({},r),{},{children:i(r.children)})})},y5=(e,n,i)=>_T(e,n,r=>{if(!se.isText(r))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(Wi.stringify(r)));return i(r)}),jF={transform(e,n){var i=!1;switch(n.type){case"insert_node":{var{path:r,node:o}=n;tg(e,ut.parent(r),Pt=>{var Rt=r[r.length-1];if(Rt>Pt.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));return m5(Pt,Rt,o)}),i=!0;break}case"insert_text":{var{path:a,offset:l,text:c}=n;if(c.length===0)break;y5(e,a,Pt=>{var Rt=Pt.text.slice(0,l),It=Pt.text.slice(l);return ci(ci({},Pt),{},{text:Rt+c+It})}),i=!0;break}case"merge_node":{var{path:h}=n,d=h[h.length-1],p=ut.previous(h),m=p[p.length-1];tg(e,ut.parent(h),Pt=>{var Rt=Pt[d],It=Pt[m],he;if(se.isText(Rt)&&se.isText(It))he=ci(ci({},It),{},{text:It.text+Rt.text});else if(!se.isText(Rt)&&!se.isText(It))he=ci(ci({},It),{},{children:It.children.concat(Rt.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(h,"] to nodes of different interfaces: ").concat(Wi.stringify(Rt)," ").concat(Wi.stringify(It)));return Fm(Pt,m,2,he)}),i=!0;break}case"move_node":{var{path:w,newPath:x}=n,T=w[w.length-1];if(ut.isAncestor(w,x))throw new Error("Cannot move a path [".concat(w,"] to new path [").concat(x,"] because the destination is inside itself."));var D=te.get(e,w);tg(e,ut.parent(w),Pt=>v5(Pt,T,1));var b=ut.transform(w,n),B=b[b.length-1];tg(e,ut.parent(b),Pt=>m5(Pt,B,D)),i=!0;break}case"remove_node":{var{path:A}=n,I=A[A.length-1];if(tg(e,ut.parent(A),Pt=>v5(Pt,I,1)),e.selection){var R=ci({},e.selection);for(var[k,W]of _t.points(R)){var U=Sn.transform(k,n);if(R!=null&&U!=null)R[W]=U;else{var nt=void 0,st=void 0;for(var[ft,Et]of te.texts(e))if(ut.compare(Et,A)===-1)nt=[ft,Et];else{st=[ft,Et];break}var ct=!1;nt&&st&&(ut.equals(st[1],A)?ct=!ut.hasPrevious(st[1]):ct=ut.common(nt[1],A).length<ut.common(st[1],A).length),nt&&!ct?R[W]={path:nt[1],offset:nt[0].text.length}:st?R[W]={path:st[1],offset:0}:R=null}}e.selection=R}break}case"remove_text":{var{path:mt,offset:wt,text:V}=n;if(V.length===0)break;y5(e,mt,Pt=>{var Rt=Pt.text.slice(0,wt),It=Pt.text.slice(wt+V.length);return ci(ci({},Pt),{},{text:Rt+It})}),i=!0;break}case"set_node":{var{path:P,properties:_,newProperties:N}=n;if(P.length===0)throw new Error("Cannot set properties on the root node!");_T(e,P,Pt=>{var Rt=ci({},Pt);for(var It in N){if(It==="children"||It==="text")throw new Error('Cannot set the "'.concat(It,'" property of nodes!'));var he=N[It];he==null?delete Rt[It]:Rt[It]=he}for(var Nt in _)N.hasOwnProperty(Nt)||delete Rt[Nt];return Rt});break}case"set_selection":{var{newProperties:$}=n;if($==null){e.selection=null;break}if(e.selection==null){if(!_t.isRange($))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Wi.stringify($)," when there is no current selection."));e.selection=ci({},$);break}var Q=ci({},e.selection);for(var F in $){var J=$[F];if(J==null){if(F==="anchor"||F==="focus")throw new Error('Cannot remove the "'.concat(F,'" selection property'));delete Q[F]}else Q[F]=J}e.selection=Q;break}case"split_node":{var{path:tt,position:it,properties:xt}=n,gt=tt[tt.length-1];if(tt.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(tt,"] because the root node cannot be split."));tg(e,ut.parent(tt),Pt=>{var Rt=Pt[gt],It,he;if(se.isText(Rt)){var Nt=Rt.text.slice(0,it),ge=Rt.text.slice(it);It=ci(ci({},Rt),{},{text:Nt}),he=ci(ci({},xt),{},{text:ge})}else{var ae=Rt.children.slice(0,it),ee=Rt.children.slice(it);It=ci(ci({},Rt),{},{children:ae}),he=ci(ci({},xt),{},{children:ee})}return Fm(Pt,gt,1,It,he)}),i=!0;break}}if(i&&e.selection){var Lt=ci({},e.selection);for(var[$t,ot]of _t.points(Lt))Lt[ot]=Sn.transform($t,n);e.selection=Lt}}},UF={insertNodes(e,n,i){e.insertNodes(n,i)},liftNodes(e,n){e.liftNodes(n)},mergeNodes(e,n){e.mergeNodes(n)},moveNodes(e,n){e.moveNodes(n)},removeNodes(e,n){e.removeNodes(n)},setNodes(e,n,i){e.setNodes(n,i)},splitNodes(e,n){e.splitNodes(n)},unsetNodes(e,n,i){e.unsetNodes(n,i)},unwrapNodes(e,n){e.unwrapNodes(n)},wrapNodes(e,n,i){e.wrapNodes(n,i)}},$F={collapse(e,n){e.collapse(n)},deselect(e){e.deselect()},move(e,n){e.move(n)},select(e,n){e.select(n)},setPoint(e,n,i){e.setPoint(n,i)},setSelection(e,n){e.setSelection(n)}},Er=e=>typeof e=="object"&&e!==null,lB=(e,n)=>{for(var i in e){var r=e[i],o=n[i];if(Array.isArray(r)&&Array.isArray(o)){if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==o[a])return!1}else if(Er(r)&&Er(o)){if(!lB(r,o))return!1}else if(r!==o)return!1}for(var l in n)if(e[l]===void 0&&n[l]!==void 0)return!1;return!0};function VF(e,n){if(e==null)return{};var i={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(i[o]=e[o]);return i}function Du(e,n){if(e==null)return{};var i=VF(e,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var WF=["anchor","focus"];function w5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function XF(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?w5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var _t={edges(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:i=!1}=n,{anchor:r,focus:o}=e;return _t.isBackward(e)===i?[r,o]:[o,r]},end(e){var[,n]=_t.edges(e);return n},equals(e,n){return Sn.equals(e.anchor,n.anchor)&&Sn.equals(e.focus,n.focus)},surrounds(e,n){var i=_t.intersection(e,n);return i?_t.equals(i,n):!1},includes(e,n){if(_t.isRange(n)){if(_t.includes(e,n.anchor)||_t.includes(e,n.focus))return!0;var[i,r]=_t.edges(e),[o,a]=_t.edges(n);return Sn.isBefore(i,o)&&Sn.isAfter(r,a)}var[l,c]=_t.edges(e),h=!1,d=!1;return Sn.isPoint(n)?(h=Sn.compare(n,l)>=0,d=Sn.compare(n,c)<=0):(h=ut.compare(n,l.path)>=0,d=ut.compare(n,c.path)<=0),h&&d},intersection(e,n){var i=Du(e,WF),[r,o]=_t.edges(e),[a,l]=_t.edges(n),c=Sn.isBefore(r,a)?a:r,h=Sn.isBefore(o,l)?o:l;return Sn.isBefore(h,c)?null:XF({anchor:c,focus:h},i)},isBackward(e){var{anchor:n,focus:i}=e;return Sn.isAfter(n,i)},isCollapsed(e){var{anchor:n,focus:i}=e;return Sn.equals(n,i)},isExpanded(e){return!_t.isCollapsed(e)},isForward(e){return!_t.isBackward(e)},isRange(e){return Er(e)&&Sn.isPoint(e.anchor)&&Sn.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[n]=_t.edges(e);return n},transform(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="inward"}=i,o,a;if(r==="inward"){var l=_t.isCollapsed(e);_t.isForward(e)?(o="forward",a=l?o:"backward"):(o="backward",a=l?o:"forward")}else r==="outward"?_t.isForward(e)?(o="backward",a="forward"):(o="forward",a="backward"):(o=r,a=r);var c=Sn.transform(e.anchor,n,{affinity:o}),h=Sn.transform(e.focus,n,{affinity:a});return!c||!h?null:{anchor:c,focus:h}}},x5=function(n){var{deep:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Er(n))return!1;var r=typeof n.apply=="function";if(r)return!1;var o=i?te.isNodeList(n.children):Array.isArray(n.children);return o},fe={isAncestor(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Er(e)&&te.isNodeList(e.children,{deep:n})},isElement:x5,isElementList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(i=>fe.isElement(i,{deep:n}))},isElementProps(e){return e.children!==void 0},isElementType:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return x5(n)&&n[r]===i},matches(e,n){for(var i in n)if(i!=="children"&&e[i]!==n[i])return!1;return!0}},qF=["children"],YF=["text"],te={ancestor(e,n){var i=te.get(e,n);if(se.isText(i))throw new Error("Cannot get the ancestor node at path [".concat(n,"] because it refers to a text node instead: ").concat(Wi.stringify(i)));return i},ancestors(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of ut.ancestors(n,i)){var o=te.ancestor(e,r),a=[o,r];yield a}}()},child(e,n){if(se.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Wi.stringify(e)));var i=e.children[n];if(i==null)throw new Error("Cannot get child at index `".concat(n,"` in node: ").concat(Wi.stringify(e)));return i},children(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=i,o=te.ancestor(e,n),{children:a}=o,l=r?a.length-1:0;r?l>=0:l<a.length;){var c=te.child(o,l),h=n.concat(l);yield[c,h],l=r?l-1:l+1}}()},common(e,n,i){var r=ut.common(n,i),o=te.get(e,r);return[o,r]},descendant(e,n){var i=te.get(e,n);if(j.isEditor(i))throw new Error("Cannot get the descendant node at path [".concat(n,"] because it refers to the root editor node instead: ").concat(Wi.stringify(i)));return i},descendants(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[i,r]of te.nodes(e,n))r.length!==0&&(yield[i,r])}()},elements(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[i,r]of te.nodes(e,n))fe.isElement(i)&&(yield[i,r])}()},extractProps(e){if(fe.isAncestor(e)){var n=Du(e,qF);return n}else{var n=Du(e,YF);return n}},first(e,n){for(var i=n.slice(),r=te.get(e,i);r&&!(se.isText(r)||r.children.length===0);)r=r.children[0],i.push(0);return[r,i]},fragment(e,n){if(se.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Wi.stringify(e)));var i=eO({children:e.children},r=>{var[o,a]=_t.edges(n),l=te.nodes(r,{reverse:!0,pass:w=>{var[,x]=w;return!_t.includes(n,x)}});for(var[,c]of l){if(!_t.includes(n,c)){var h=te.parent(r,c),d=c[c.length-1];h.children.splice(d,1)}if(ut.equals(c,a.path)){var p=te.leaf(r,c);p.text=p.text.slice(0,a.offset)}if(ut.equals(c,o.path)){var m=te.leaf(r,c);m.text=m.text.slice(o.offset)}}j.isEditor(r)&&(r.selection=null)});return i.children},get(e,n){var i=te.getIf(e,n);if(i===void 0)throw new Error("Cannot find a descendant at path [".concat(n,"] in node: ").concat(Wi.stringify(e)));return i},getIf(e,n){for(var i=e,r=0;r<n.length;r++){var o=n[r];if(se.isText(i)||!i.children[o])return;i=i.children[o]}return i},has(e,n){for(var i=e,r=0;r<n.length;r++){var o=n[r];if(se.isText(i)||!i.children[o])return!1;i=i.children[o]}return!0},isNode(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return se.isText(e)||fe.isElement(e,{deep:n})||j.isEditor(e,{deep:n})},isNodeList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(i=>te.isNode(i,{deep:n}))},last(e,n){for(var i=n.slice(),r=te.get(e,i);r&&!(se.isText(r)||r.children.length===0);){var o=r.children.length-1;r=r.children[o],i.push(o)}return[r,i]},leaf(e,n){var i=te.get(e,n);if(!se.isText(i))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(Wi.stringify(i)));return i},levels(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of ut.levels(n,i)){var o=te.get(e,r);yield[o,r]}}()},matches(e,n){return fe.isElement(e)&&fe.isElementProps(n)&&fe.matches(e,n)||se.isText(e)&&se.isTextProps(n)&&se.matches(e,n)},nodes(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:i,reverse:r=!1}=n,{from:o=[],to:a}=n,l=new Set,c=[],h=e;!(a&&(r?ut.isBefore(c,a):ut.isAfter(c,a)));){if(l.has(h)||(yield[h,c]),!l.has(h)&&!se.isText(h)&&h.children.length!==0&&(i==null||i([h,c])===!1)){l.add(h);var d=r?h.children.length-1:0;ut.isAncestor(c,o)&&(d=o[c.length]),c=c.concat(d),h=te.get(e,c);continue}if(c.length===0)break;if(!r){var p=ut.next(c);if(te.has(e,p)){c=p,h=te.get(e,c);continue}}if(r&&c[c.length-1]!==0){var m=ut.previous(c);c=m,h=te.get(e,c);continue}c=ut.parent(c),h=te.get(e,c),l.add(h)}}()},parent(e,n){var i=ut.parent(n),r=te.get(e,i);if(se.isText(r))throw new Error("Cannot get the parent of path [".concat(n,"] because it does not exist in the root."));return r},string(e){return se.isText(e)?e.text:e.children.map(te.string).join("")},texts(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[i,r]of te.nodes(e,n))se.isText(i)&&(yield[i,r])}()}};function C5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function yi(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?C5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var pu={isNodeOperation(e){return pu.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!Er(e))return!1;switch(e.type){case"insert_node":return ut.isPath(e.path)&&te.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&ut.isPath(e.path);case"merge_node":return typeof e.position=="number"&&ut.isPath(e.path)&&Er(e.properties);case"move_node":return ut.isPath(e.path)&&ut.isPath(e.newPath);case"remove_node":return ut.isPath(e.path)&&te.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&ut.isPath(e.path);case"set_node":return ut.isPath(e.path)&&Er(e.properties)&&Er(e.newProperties);case"set_selection":return e.properties===null&&_t.isRange(e.newProperties)||e.newProperties===null&&_t.isRange(e.properties)||Er(e.properties)&&Er(e.newProperties);case"split_node":return ut.isPath(e.path)&&typeof e.position=="number"&&Er(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(n=>pu.isOperation(n))},isSelectionOperation(e){return pu.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return pu.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return yi(yi({},e),{},{type:"remove_node"});case"insert_text":return yi(yi({},e),{},{type:"remove_text"});case"merge_node":return yi(yi({},e),{},{type:"split_node",path:ut.previous(e.path)});case"move_node":{var{newPath:n,path:i}=e;if(ut.equals(n,i))return e;if(ut.isSibling(i,n))return yi(yi({},e),{},{path:n,newPath:i});var r=ut.transform(i,e),o=ut.transform(ut.next(i),e);return yi(yi({},e),{},{path:r,newPath:o})}case"remove_node":return yi(yi({},e),{},{type:"insert_node"});case"remove_text":return yi(yi({},e),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:l}=e;return yi(yi({},e),{},{properties:l,newProperties:a})}case"set_selection":{var{properties:c,newProperties:h}=e;return c==null?yi(yi({},e),{},{properties:h,newProperties:null}):h==null?yi(yi({},e),{},{properties:null,newProperties:c}):yi(yi({},e),{},{properties:h,newProperties:c})}case"split_node":return yi(yi({},e),{},{type:"merge_node",path:ut.next(e.path)})}}},KF=function(n){var{deep:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Er(n))return!1;var r=typeof n.addMark=="function"&&typeof n.apply=="function"&&typeof n.deleteFragment=="function"&&typeof n.insertBreak=="function"&&typeof n.insertSoftBreak=="function"&&typeof n.insertFragment=="function"&&typeof n.insertNode=="function"&&typeof n.insertText=="function"&&typeof n.isElementReadOnly=="function"&&typeof n.isInline=="function"&&typeof n.isSelectable=="function"&&typeof n.isVoid=="function"&&typeof n.normalizeNode=="function"&&typeof n.onChange=="function"&&typeof n.removeMark=="function"&&typeof n.getDirtyPaths=="function"&&(n.marks===null||Er(n.marks))&&(n.selection===null||_t.isRange(n.selection))&&(!i||te.isNodeList(n.children))&&pu.isOperationList(n.operations);return r},j={above(e,n){return e.above(n)},addMark(e,n,i){e.addMark(n,i)},after(e,n,i){return e.after(n,i)},before(e,n,i){return e.before(n,i)},deleteBackward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:i="character"}=n;e.deleteBackward(i)},deleteForward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:i="character"}=n;e.deleteForward(i)},deleteFragment(e,n){e.deleteFragment(n)},edges(e,n){return e.edges(n)},elementReadOnly(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(n)},end(e,n){return e.end(n)},first(e,n){return e.first(n)},fragment(e,n){return e.fragment(n)},hasBlocks(e,n){return e.hasBlocks(n)},hasInlines(e,n){return e.hasInlines(n)},hasPath(e,n){return e.hasPath(n)},hasTexts(e,n){return e.hasTexts(n)},insertBreak(e){e.insertBreak()},insertFragment(e,n,i){e.insertFragment(n,i)},insertNode(e,n){e.insertNode(n)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,n){e.insertText(n)},isBlock(e,n){return e.isBlock(n)},isEdge(e,n,i){return e.isEdge(n,i)},isEditor(e){return KF(e)},isElementReadOnly(e,n){return e.isElementReadOnly(n)},isEmpty(e,n){return e.isEmpty(n)},isEnd(e,n,i){return e.isEnd(n,i)},isInline(e,n){return e.isInline(n)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,n){return e.isSelectable(n)},isStart(e,n,i){return e.isStart(n,i)},isVoid(e,n){return e.isVoid(n)},last(e,n){return e.last(n)},leaf(e,n,i){return e.leaf(n,i)},levels(e,n){return e.levels(n)},marks(e){return e.getMarks()},next(e,n){return e.next(n)},node(e,n,i){return e.node(n,i)},nodes(e,n){return e.nodes(n)},normalize(e,n){e.normalize(n)},parent(e,n,i){return e.parent(n,i)},path(e,n,i){return e.path(n,i)},pathRef(e,n,i){return e.pathRef(n,i)},pathRefs(e){return e.pathRefs()},point(e,n,i){return e.point(n,i)},pointRef(e,n,i){return e.pointRef(n,i)},pointRefs(e){return e.pointRefs()},positions(e,n){return e.positions(n)},previous(e,n){return e.previous(n)},range(e,n,i){return e.range(n,i)},rangeRef(e,n,i){return e.rangeRef(n,i)},rangeRefs(e){return e.rangeRefs()},removeMark(e,n){e.removeMark(n)},setNormalizing(e,n){e.setNormalizing(n)},start(e,n){return e.start(n)},string(e,n,i){return e.string(n,i)},unhangRange(e,n,i){return e.unhangRange(n,i)},void(e,n){return e.void(n)},withoutNormalizing(e,n){e.withoutNormalizing(n)},shouldMergeNodesRemovePrevNode:(e,n,i)=>e.shouldMergeNodesRemovePrevNode(n,i)},ZF={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(ut.isPath)}};function E5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function S5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?E5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Sn={compare(e,n){var i=ut.compare(e.path,n.path);return i===0?e.offset<n.offset?-1:e.offset>n.offset?1:0:i},isAfter(e,n){return Sn.compare(e,n)===1},isBefore(e,n){return Sn.compare(e,n)===-1},equals(e,n){return e.offset===n.offset&&ut.equals(e.path,n.path)},isPoint(e){return Er(e)&&typeof e.offset=="number"&&ut.isPath(e.path)},transform(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="forward"}=i,{path:o,offset:a}=e;switch(n.type){case"insert_node":case"move_node":{o=ut.transform(o,n,i);break}case"insert_text":{ut.equals(n.path,o)&&(n.offset<a||n.offset===a&&r==="forward")&&(a+=n.text.length);break}case"merge_node":{ut.equals(n.path,o)&&(a+=n.position),o=ut.transform(o,n,i);break}case"remove_text":{ut.equals(n.path,o)&&n.offset<=a&&(a-=Math.min(a-n.offset,n.text.length));break}case"remove_node":{if(ut.equals(n.path,o)||ut.isAncestor(n.path,o))return null;o=ut.transform(o,n,i);break}case"split_node":{if(ut.equals(n.path,o)){if(n.position===a&&r==null)return null;(n.position<a||n.position===a&&r==="forward")&&(a-=n.position,o=ut.transform(o,n,S5(S5({},i),{},{affinity:"forward"})))}else o=ut.transform(o,n,i);break}default:return e}return{path:o,offset:a}}},T5=void 0,Wi={setScrubber(e){T5=e},stringify(e){return JSON.stringify(e,T5)}},QF=["text"],JF=["anchor","focus","merge"];function A5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function hu(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?A5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var se={equals(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=i;function o(a){var l=Du(a,QF);return l}return lB(r?o(e):e,r?o(n):n)},isText(e){return Er(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(n=>se.isText(n))},isTextProps(e){return e.text!==void 0},matches(e,n){for(var i in n)if(i!=="text"&&(!e.hasOwnProperty(i)||e[i]!==n[i]))return!1;return!0},decorations(e,n){var i=[{leaf:hu({},e)}];for(var r of n){var{anchor:o,focus:a,merge:l}=r,c=Du(r,JF),[h,d]=_t.edges(r),p=[],m=0,w=h.offset,x=d.offset,T=l??Object.assign;for(var{leaf:D}of i){var{length:b}=D.text,B=m;if(m+=b,w<=B&&m<=x){T(D,c),p.push({leaf:D});continue}if(w!==x&&(w===m||x===B)||w>m||x<B||x===B&&B!==0){p.push({leaf:D});continue}var A=D,I=void 0,R=void 0;if(x<m){var k=x-B;R={leaf:hu(hu({},A),{},{text:A.text.slice(k)})},A=hu(hu({},A),{},{text:A.text.slice(0,k)})}if(w>B){var W=w-B;I={leaf:hu(hu({},A),{},{text:A.text.slice(0,W)})},A=hu(hu({},A),{},{text:A.text.slice(W)})}T(A,c),I&&p.push(I),p.push({leaf:A}),R&&p.push(R)}i=p}if(i.length>1){var U=0;for(var[nt,st]of i.entries()){var ft=U,Et=ft+st.leaf.text.length,ct={start:ft,end:Et};nt===0&&(ct.isFirst=!0),nt===i.length-1&&(ct.isLast=!0),st.position=ct,U=Et}}return i}},FT=e=>e.selection?e.selection:e.children.length>0?j.end(e,[]):[0],Vg=(e,n)=>{var[i]=j.node(e,n);return r=>r===i},kT=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!i,o=i?ok(n):n,a=je.None,l=je.None,c=0,h=null,d=null;for(var p of o){var m=p.codePointAt(0);if(!m)break;var w=vk(p,m);if([a,l]=r?[l,w]:[w,a],ug(a,je.ZWJ)&&ug(l,je.ExtPict)&&(r?h=D5(n.substring(0,c)):h=D5(n.substring(0,n.length-c)),!h)||ug(a,je.RI)&&ug(l,je.RI)&&(d!==null?d=!d:r?d=!0:d=Ek(n.substring(0,n.length-c)),!d)||a!==je.None&&l!==je.None&&wk(a,l))break;c+=p.length}return c||1},tk=/\s/,ek=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,nk=/['\u2018\u2019]/,ik=function(n){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,o=!1;n.length>0;){var a=kT(n,i),[l,c]=IT(n,a,i);if(rk(l,c,i))o=!0,r+=a;else if(!o)r+=a;else break;n=c}return r},IT=(e,n,i)=>{if(i){var r=e.length-n;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,n),e.slice(n)]},rk=function e(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(tk.test(n))return!1;if(nk.test(n)){var o=kT(i,r),[a,l]=IT(i,o,r);if(e(a,l,r))return!0}return!ek.test(n)},ok=function*(n){for(var i=n.length-1,r=0;r<n.length;r++){var o=n.charAt(i-r);if(ak(o.charCodeAt(0))){var a=n.charAt(i-r-1);if(sk(a.charCodeAt(0))){yield a+o,r++;continue}}yield o}},sk=e=>e>=55296&&e<=56319,ak=e=>e>=56320&&e<=57343,je;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(je||(je={}));var lk=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,uk=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,ck=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,fk=/^[\u1100-\u115F\uA960-\uA97C]$/,hk=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,dk=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,gk=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,pk=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,mk=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,vk=(e,n)=>{var i=je.Any;return e.search(lk)!==-1&&(i|=je.Extend),n===8205&&(i|=je.ZWJ),n>=127462&&n<=127487&&(i|=je.RI),e.search(uk)!==-1&&(i|=je.Prepend),e.search(ck)!==-1&&(i|=je.SpacingMark),e.search(fk)!==-1&&(i|=je.L),e.search(hk)!==-1&&(i|=je.V),e.search(dk)!==-1&&(i|=je.T),e.search(gk)!==-1&&(i|=je.LV),e.search(pk)!==-1&&(i|=je.LVT),e.search(mk)!==-1&&(i|=je.ExtPict),i};function ug(e,n){return(e&n)!==0}var yk=[[je.L,je.L|je.V|je.LV|je.LVT],[je.LV|je.V,je.V|je.T],[je.LVT|je.T,je.T],[je.Any,je.Extend|je.ZWJ],[je.Any,je.SpacingMark],[je.Prepend,je.Any],[je.ZWJ,je.ExtPict],[je.RI,je.RI]];function wk(e,n){return yk.findIndex(i=>ug(e,i[0])&&ug(n,i[1]))===-1}var xk=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,D5=e=>e.search(xk)!==-1,Ck=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Ek=e=>{var n=e.match(Ck);if(n===null)return!1;var i=n[0].length/2;return i%2===1},Sk={delete(e,n){e.delete(n)},insertFragment(e,n,i){e.insertFragment(n,i)},insertText(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(e,()=>{var{voids:r=!1}=i,{at:o=FT(e)}=i;if(ut.isPath(o)&&(o=j.range(e,o)),_t.isRange(o))if(_t.isCollapsed(o))o=o.anchor;else{var a=_t.end(o);if(!r&&j.void(e,{at:a}))return;var l=_t.start(o),c=j.pointRef(e,l),h=j.pointRef(e,a);jt.delete(e,{at:o,voids:r});var d=c.unref(),p=h.unref();o=d||p,jt.setSelection(e,{anchor:o,focus:o})}if(!(!r&&j.void(e,{at:o})||j.elementReadOnly(e,{at:o}))){var{path:m,offset:w}=o;n.length>0&&e.apply({type:"insert_text",path:m,offset:w,text:n})}})}};function b5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function U2(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?b5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var jt=U2(U2(U2(U2({},jF),UF),$F),Sk),yw=new WeakMap,Tk=e=>yw.get(e)||!1,Ak=(e,n,i)=>{var r=yw.get(e)||!1;yw.set(e,!0);try{n(),i()}finally{yw.set(e,r)}};function uB(e,n,i){var r=Ww.get(e)||[],o=Xw.get(e)||new Set,a,l,c=m=>{if(m){var w=m.join(",");l.has(w)||(l.add(w),a.push(m))}};if(i){a=[],l=new Set;for(var h of r){var d=i(h);c(d)}}else a=r,l=o;for(var p of n)c(p);Ww.set(e,a),Xw.set(e,l)}var Dk=(e,n)=>{for(var i of j.pathRefs(e))IF.transform(i,n);for(var r of j.pointRefs(e))HF.transform(r,n);for(var o of j.rangeRefs(e))NF.transform(o,n);if(!Tk(e)){var a=ut.operationCanTransformPath(n)?l=>ut.transform(l,n):void 0;uB(e,e.getDirtyPaths(n),a)}jt.transform(e,n),e.operations.push(n),j.normalize(e,{operation:n}),n.type==="set_selection"&&(e.marks=null),vm.get(e)||(vm.set(e,!0),Promise.resolve().then(()=>{vm.set(e,!1),e.onChange({operation:n}),e.operations=[]}))},bk=(e,n)=>{switch(n.type){case"insert_text":case"remove_text":case"set_node":{var{path:i}=n;return ut.levels(i)}case"insert_node":{var{node:r,path:o}=n,a=ut.levels(o),l=se.isText(r)?[]:Array.from(te.nodes(r),ft=>{var[,Et]=ft;return o.concat(Et)});return[...a,...l]}case"merge_node":{var{path:c}=n,h=ut.ancestors(c),d=ut.previous(c);return[...h,d]}case"move_node":{var{path:p,newPath:m}=n;if(ut.equals(p,m))return[];var w=[],x=[];for(var T of ut.ancestors(p)){var D=ut.transform(T,n);w.push(D)}for(var b of ut.ancestors(m)){var B=ut.transform(b,n);x.push(B)}var A=x[x.length-1],I=m[m.length-1],R=A.concat(I);return[...w,...x,R]}case"remove_node":{var{path:k}=n,W=ut.ancestors(k);return[...W]}case"split_node":{var{path:U}=n,nt=ut.levels(U),st=ut.next(U);return[...nt,st]}default:return[]}},Bk=e=>{var{selection:n}=e;return n?te.fragment(e,n):[]},Pk=(e,n,i)=>{var[r,o]=n;if(!se.isText(r)){if(fe.isElement(r)&&r.children.length===0){var a={text:""};jt.insertNodes(e,a,{at:o.concat(0),voids:!0});return}for(var l=j.isEditor(r)?!1:fe.isElement(r)&&(e.isInline(r)||r.children.length===0||se.isText(r.children[0])||e.isInline(r.children[0])),c=0,h=0;h<r.children.length;h++,c++){var d=te.get(e,o);if(!se.isText(d)){var p=d.children[c],m=d.children[c-1],w=h===r.children.length-1,x=se.isText(p)||fe.isElement(p)&&e.isInline(p);if(x!==l)x?i!=null&&i.fallbackElement?jt.wrapNodes(e,i.fallbackElement(),{at:o.concat(c),voids:!0}):jt.removeNodes(e,{at:o.concat(c),voids:!0}):jt.unwrapNodes(e,{at:o.concat(c),voids:!0}),c--;else if(fe.isElement(p)){if(e.isInline(p)){if(m==null||!se.isText(m)){var T={text:""};jt.insertNodes(e,T,{at:o.concat(c),voids:!0}),c++}else if(w){var D={text:""};jt.insertNodes(e,D,{at:o.concat(c+1),voids:!0}),c++}}}else{if(!se.isText(p)&&!("children"in p)){var b=p;b.children=[]}m!=null&&se.isText(m)&&(se.equals(p,m,{loose:!0})?(jt.mergeNodes(e,{at:o.concat(c),voids:!0}),c--):m.text===""?(jt.removeNodes(e,{at:o.concat(c-1),voids:!0}),c--):p.text===""&&(jt.removeNodes(e,{at:o.concat(c),voids:!0}),c--))}}}}},Mk=(e,n)=>{var{iteration:i,initialDirtyPathsLength:r}=n,o=r*42;if(i>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Rk=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:o="lowest",at:a=n.selection,match:l}=i;if(a){var c=j.path(n,a);if(!_t.isRange(a)||ut.equals(a.focus.path,a.anchor.path)){if(c.length===0)return;c=ut.parent(c)}var h=o==="lowest",[d]=j.levels(n,{at:c,voids:r,match:l,reverse:h});return d}};function B5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function P5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?B5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):B5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Ok=(e,n,i)=>{var{selection:r}=e;if(r){var o=(m,w)=>{if(!se.isText(m))return!1;var[x,T]=j.parent(e,w);return!e.isVoid(x)||e.markableVoid(x)},a=_t.isExpanded(r),l=!1;if(!a){var[c,h]=j.node(e,r);if(c&&o(c,h)){var[d]=j.parent(e,h);l=d&&e.markableVoid(d)}}if(a||l)jt.setNodes(e,{[n]:i},{match:o,split:!0,voids:!0});else{var p=P5(P5({},j.marks(e)||{}),{},{[n]:i});e.marks=p,vm.get(e)||e.onChange()}}};function M5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function R5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?M5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Lk=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.point(n,i,{edge:"end"}),a=j.end(n,[]),l={anchor:o,focus:a},{distance:c=1}=r,h=0,d;for(var p of j.positions(n,R5(R5({},r),{},{at:l}))){if(h>c)break;h!==0&&(d=p),h++}return d};function O5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function L5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?O5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var _k=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.start(n,[]),a=j.point(n,i,{edge:"start"}),l={anchor:o,focus:a},{distance:c=1}=r,h=0,d;for(var p of j.positions(n,L5(L5({},r),{},{at:l,reverse:!0}))){if(h>c)break;h!==0&&(d=p),h++}return d},Fk=(e,n)=>{var{selection:i}=e;i&&_t.isCollapsed(i)&&jt.delete(e,{unit:n,reverse:!0})},kk=(e,n)=>{var{selection:i}=e;i&&_t.isCollapsed(i)&&jt.delete(e,{unit:n})},Ik=function(n){var{direction:i="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=n;r&&_t.isExpanded(r)&&jt.delete(n,{reverse:i==="backward"})},Hk=(e,n)=>[j.start(e,n),j.end(e,n)];function _5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function F5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?_5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Nk=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j.above(n,F5(F5({},i),{},{match:r=>fe.isElement(r)&&j.isElementReadOnly(n,r)}))},Gk=(e,n)=>j.point(e,n,{edge:"end"}),zk=(e,n)=>{var i=j.path(e,n,{edge:"start"});return j.node(e,i)},jk=(e,n)=>{var i=j.range(e,n);return te.fragment(e,i)};function k5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function I5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?k5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Uk=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j.above(n,I5(I5({},i),{},{match:r=>fe.isElement(r)&&j.isVoid(n,r)}))},$k=(e,n)=>n.children.some(i=>fe.isElement(i)&&j.isBlock(e,i)),Vk=(e,n)=>n.children.some(i=>se.isText(i)||j.isInline(e,i)),Wk=(e,n)=>te.has(e,n),Xk=(e,n)=>n.children.every(i=>se.isText(i)),qk=e=>{jt.splitNodes(e,{always:!0})},Yk=(e,n,i)=>{jt.insertNodes(e,n,i)},Kk=e=>{jt.splitNodes(e,{always:!0})};function H5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function Zk(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?H5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):H5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Qk=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:a}=n;if(o){if(a){var l=Zk({text:i},a);jt.insertNodes(n,l,{at:r.at,voids:r.voids})}else jt.insertText(n,i,r);n.marks=null}},Jk=(e,n)=>!e.isInline(n),tI=(e,n,i)=>j.isStart(e,n,i)||j.isEnd(e,n,i),eI=(e,n)=>{var{children:i}=n,[r]=i;return i.length===0||i.length===1&&se.isText(r)&&r.text===""&&!e.isVoid(n)},nI=(e,n,i)=>{var r=j.end(e,i);return Sn.equals(n,r)},iI=e=>{var n=aB.get(e);return n===void 0?!0:n},rI=(e,n,i)=>{if(n.offset!==0)return!1;var r=j.start(e,i);return Sn.equals(n,r)},oI=(e,n)=>{var i=j.path(e,n,{edge:"end"});return j.node(e,i)},sI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.path(n,i,r),a=te.leaf(n,o);return[a,o]};function aI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:i=e.selection,reverse:r=!1,voids:o=!1}=n,{match:a}=n;if(a==null&&(a=()=>!0),!!i){var l=[],c=j.path(e,i);for(var[h,d]of te.levels(e,c))if(a(h,d)&&(l.push([h,d]),!o&&fe.isElement(h)&&j.isVoid(e,h)))break;r&&l.reverse(),yield*l}}()}var lI=["text"],uI=["text"],cI=function(n){var{marks:i,selection:r}=n;if(!r)return null;var{anchor:o,focus:a}=r;if(i)return i;if(_t.isExpanded(r)){var l=_t.isBackward(r);l&&([a,o]=[o,a]);var c=j.isEnd(n,o,o.path);if(c){var h=j.after(n,o);h&&(o=h)}var[d]=j.nodes(n,{match:se.isText,at:{anchor:o,focus:a}});if(d){var[p]=d,m=Du(p,lI);return m}else return{}}var{path:w}=o,[x]=j.leaf(n,w);if(o.offset===0){var T=j.previous(n,{at:w,match:se.isText}),D=j.above(n,{match:k=>fe.isElement(k)&&j.isVoid(n,k)&&n.markableVoid(k)});if(!D){var b=j.above(n,{match:k=>fe.isElement(k)&&j.isBlock(n,k)});if(T&&b){var[B,A]=T,[,I]=b;ut.isAncestor(I,A)&&(x=B)}}}var R=Du(x,uI);return R},fI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:o=!1}=i,{match:a,at:l=n.selection}=i;if(l){var c=j.after(n,l,{voids:o});if(c){var[,h]=j.last(n,[]),d=[c.path,h];if(ut.isPath(l)&&l.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(ut.isPath(l)){var[p]=j.parent(n,l);a=w=>p.children.includes(w)}else a=()=>!0;var[m]=j.nodes(n,{at:d,match:a,mode:r,voids:o});return m}}},hI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.path(n,i,r),a=te.get(n,o);return[a,o]};function dI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:i=e.selection,mode:r="all",universal:o=!1,reverse:a=!1,voids:l=!1,pass:c,ignoreNonSelectable:h=!1}=n,{match:d}=n;if(d||(d=()=>!0),!!i){var p,m;if(ZF.isSpan(i))p=i[0],m=i[1];else{var w=j.path(e,i,{edge:"start"}),x=j.path(e,i,{edge:"end"});p=a?x:w,m=a?w:x}var T=te.nodes(e,{reverse:a,from:p,to:m,pass:k=>{var[W,U]=k;return c&&c([W,U])?!0:fe.isElement(W)?!!(!l&&(j.isVoid(e,W)||j.isElementReadOnly(e,W))||h&&!j.isSelectable(e,W)):!1}}),D=[],b;for(var[B,A]of T)if(!(h&&fe.isElement(B)&&!j.isSelectable(e,B))){var I=b&&ut.compare(A,b[1])===0;if(!(r==="highest"&&I)){if(!d(B,A)){if(o&&!I&&se.isText(B))return;continue}if(r==="lowest"&&I){b=[B,A];continue}var R=r==="lowest"?b:[B,A];R&&(o?D.push(R):yield R),b=[B,A]}}r==="lowest"&&b&&(o?D.push(b):yield b),o&&(yield*D)}}()}var gI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:o}=i,a=p=>Ww.get(p)||[],l=p=>Xw.get(p)||new Set,c=p=>{var m=a(p).pop(),w=m.join(",");return l(p).delete(w),m};if(j.isNormalizing(n)){if(r){var h=Array.from(te.nodes(n),p=>{var[,m]=p;return m}),d=new Set(h.map(p=>p.join(",")));Ww.set(n,h),Xw.set(n,d)}a(n).length!==0&&j.withoutNormalizing(n,()=>{for(var p of a(n))if(te.has(n,p)){var m=j.node(n,p),[w,x]=m;fe.isElement(w)&&w.children.length===0&&n.normalizeNode(m,{operation:o})}for(var T=a(n),D=T.length,b=0;T.length!==0;){if(!n.shouldNormalize({dirtyPaths:T,iteration:b,initialDirtyPathsLength:D,operation:o}))return;var B=c(n);if(te.has(n,B)){var A=j.node(n,B);n.normalizeNode(A,{operation:o})}b++,T=a(n)}})}},pI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.path(n,i,r),a=ut.parent(o),l=j.node(n,a);return l},mI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=r,a={current:i,affinity:o,unref(){var{current:c}=a,h=j.pathRefs(n);return h.delete(a),a.current=null,c}},l=j.pathRefs(n);return l.add(a),a},vI=e=>{var n=h5.get(e);return n||(n=new Set,h5.set(e,n)),n},yI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:a}=r;if(ut.isPath(i)){if(a==="start"){var[,l]=te.first(n,i);i=l}else if(a==="end"){var[,c]=te.last(n,i);i=c}}return _t.isRange(i)&&(a==="start"?i=_t.start(i):a==="end"?i=_t.end(i):i=ut.common(i.anchor.path,i.focus.path)),Sn.isPoint(i)&&(i=i.path),o!=null&&(i=i.slice(0,o)),i},wI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=r,a={current:i,affinity:o,unref(){var{current:c}=a,h=j.pointRefs(n);return h.delete(a),a.current=null,c}},l=j.pointRefs(n);return l.add(a),a},xI=e=>{var n=d5.get(e);return n||(n=new Set,d5.set(e,n)),n},CI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=r;if(ut.isPath(i)){var a;if(o==="end"){var[,l]=te.last(n,i);a=l}else{var[,c]=te.first(n,i);a=c}var h=te.get(n,a);if(!se.isText(h))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(i,"] because it has no ").concat(o," text node."));return{path:a,offset:o==="end"?h.text.length:0}}if(_t.isRange(i)){var[d,p]=_t.edges(i);return o==="start"?d:p}return i};function EI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:i=e.selection,unit:r="offset",reverse:o=!1,voids:a=!1,ignoreNonSelectable:l=!1}=n;if(!i)return;var c=j.range(e,i),[h,d]=_t.edges(c),p=o?d:h,m=!1,w="",x=0,T=0,D=0;for(var[b,B]of j.nodes(e,{at:i,reverse:o,voids:a,ignoreNonSelectable:l})){if(fe.isElement(b)){if(!a&&(e.isVoid(b)||e.isElementReadOnly(b))){yield j.start(e,B);continue}if(e.isInline(b))continue;if(j.hasInlines(e,b)){var A=ut.isAncestor(B,d.path)?d:j.end(e,B),I=ut.isAncestor(B,h.path)?h:j.start(e,B);w=j.string(e,{anchor:I,focus:A},{voids:a}),m=!0}}if(se.isText(b)){var R=ut.equals(B,p.path);for(R?(T=o?p.offset:b.text.length-p.offset,D=p.offset):(T=b.text.length,D=o?T:0),(R||m||r==="offset")&&(yield{path:B,offset:D},m=!1);;){if(x===0){if(w==="")break;x=k(w,r,o),w=IT(w,x,o)[1]}if(D=o?D-x:D+x,T=T-x,T<0){x=-T;break}x=0,yield{path:B,offset:D}}}}function k(W,U,nt){return U==="character"?kT(W,nt):U==="word"?ik(W,nt):U==="line"||U==="block"?W.length:1}}()}var SI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:o=!1}=i,{match:a,at:l=n.selection}=i;if(l){var c=j.before(n,l,{voids:o});if(c){var[,h]=j.first(n,[]),d=[c.path,h];if(ut.isPath(l)&&l.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(ut.isPath(l)){var[p]=j.parent(n,l);a=w=>p.children.includes(w)}else a=()=>!0;var[m]=j.nodes(n,{reverse:!0,at:d,match:a,mode:r,voids:o});return m}}},TI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=r,a={current:i,affinity:o,unref(){var{current:c}=a,h=j.rangeRefs(n);return h.delete(a),a.current=null,c}},l=j.rangeRefs(n);return l.add(a),a},AI=e=>{var n=g5.get(e);return n||(n=new Set,g5.set(e,n)),n},DI=(e,n,i)=>{if(_t.isRange(n)&&!i)return n;var r=j.start(e,n),o=j.end(e,i||n);return{anchor:r,focus:o}};function N5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function bI(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?N5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var BI=(e,n)=>{var{selection:i}=e;if(i){var r=(p,m)=>{if(!se.isText(p))return!1;var[w,x]=j.parent(e,m);return!e.isVoid(w)||e.markableVoid(w)},o=_t.isExpanded(i),a=!1;if(!o){var[l,c]=j.node(e,i);if(l&&r(l,c)){var[h]=j.parent(e,c);a=h&&e.markableVoid(h)}}if(o||a)jt.unsetNodes(e,n,{match:r,split:!0,voids:!0});else{var d=bI({},j.marks(e)||{});delete d[n],e.marks=d,vm.get(e)||e.onChange()}}},PI=(e,n)=>{aB.set(e,n)},MI=(e,n)=>j.point(e,n,{edge:"start"}),RI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=r,a=j.range(n,i),[l,c]=_t.edges(a),h="";for(var[d,p]of j.nodes(n,{at:a,match:se.isText,voids:o})){var m=d.text;ut.equals(p,c.path)&&(m=m.slice(0,c.offset)),ut.equals(p,l.path)&&(m=m.slice(l.offset)),h+=m}return h},OI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=r,[a,l]=_t.edges(i);if(a.offset!==0||l.offset!==0||_t.isCollapsed(i)||ut.hasPrevious(l.path))return i;var c=j.above(n,{at:l,match:T=>fe.isElement(T)&&j.isBlock(n,T),voids:o}),h=c?c[1]:[],d=j.start(n,a),p={anchor:d,focus:l},m=!0;for(var[w,x]of j.nodes(n,{at:p,match:se.isText,reverse:!0,voids:o})){if(m){m=!1;continue}if(w.text!==""||ut.isBefore(x,h)){l={path:x,offset:w.text.length};break}}return{anchor:a,focus:l}},LI=(e,n)=>{var i=j.isNormalizing(e);j.setNormalizing(e,!1);try{n()}finally{j.setNormalizing(e,i)}j.normalize(e)},_I=(e,n,i)=>{var[r,o]=n;return fe.isElement(r)&&j.isEmpty(e,r)||se.isText(r)&&r.text===""&&o[o.length-1]!==0},FI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var r,o,{reverse:a=!1,unit:l="character",distance:c=1,voids:h=!1}=i,{at:d=n.selection,hanging:p=!1}=i;if(d){var m=!1;if(_t.isRange(d)&&_t.isCollapsed(d)&&(m=!0,d=d.anchor),Sn.isPoint(d)){var w=j.void(n,{at:d,mode:"highest"});if(!h&&w){var[,x]=w;d=x}else{var T={unit:l,distance:c},D=a?j.before(n,d,T)||j.start(n,[]):j.after(n,d,T)||j.end(n,[]);d={anchor:d,focus:D},p=!0}}if(ut.isPath(d)){jt.removeNodes(n,{at:d,voids:h});return}if(!_t.isCollapsed(d)){if(!p){var[,b]=_t.edges(d),B=j.end(n,[]);Sn.equals(b,B)||(d=j.unhangRange(n,d,{voids:h}))}var[A,I]=_t.edges(d),R=j.above(n,{match:Nt=>fe.isElement(Nt)&&j.isBlock(n,Nt),at:A,voids:h}),k=j.above(n,{match:Nt=>fe.isElement(Nt)&&j.isBlock(n,Nt),at:I,voids:h}),W=R&&k&&!ut.equals(R[1],k[1]),U=ut.equals(A.path,I.path),nt=h?null:(r=j.void(n,{at:A,mode:"highest"}))!==null&&r!==void 0?r:j.elementReadOnly(n,{at:A,mode:"highest"}),st=h?null:(o=j.void(n,{at:I,mode:"highest"}))!==null&&o!==void 0?o:j.elementReadOnly(n,{at:I,mode:"highest"});if(nt){var ft=j.before(n,A);ft&&R&&ut.isAncestor(R[1],ft.path)&&(A=ft)}if(st){var Et=j.after(n,I);Et&&k&&ut.isAncestor(k[1],Et.path)&&(I=Et)}var ct=[],mt;for(var wt of j.nodes(n,{at:d,voids:h})){var[V,P]=wt;mt&&ut.compare(P,mt)===0||(!h&&fe.isElement(V)&&(j.isVoid(n,V)||j.isElementReadOnly(n,V))||!ut.isCommon(P,A.path)&&!ut.isCommon(P,I.path))&&(ct.push(wt),mt=P)}var _=Array.from(ct,Nt=>{var[,ge]=Nt;return j.pathRef(n,ge)}),N=j.pointRef(n,A),$=j.pointRef(n,I),Q="";if(!U&&!nt){var F=N.current,[J]=j.leaf(n,F),{path:tt}=F,{offset:it}=A,xt=J.text.slice(it);xt.length>0&&(n.apply({type:"remove_text",path:tt,offset:it,text:xt}),Q=xt)}if(_.reverse().map(Nt=>Nt.unref()).filter(Nt=>Nt!==null).forEach(Nt=>jt.removeNodes(n,{at:Nt,voids:h})),!st){var gt=$.current,[Lt]=j.leaf(n,gt),{path:$t}=gt,ot=U?A.offset:0,Pt=Lt.text.slice(ot,I.offset);Pt.length>0&&(n.apply({type:"remove_text",path:$t,offset:ot,text:Pt}),Q=Pt)}!U&&W&&$.current&&N.current&&jt.mergeNodes(n,{at:$.current,hanging:!0,voids:h}),m&&a&&l==="character"&&Q.length>1&&Q.match(/[\u0980-\u09FF\u0E00-\u0E7F]+/)&&jt.insertText(n,Q.slice(0,Q.length-c));var Rt=N.unref(),It=$.unref(),he=a?Rt||It:It||Rt;i.at==null&&he&&jt.select(n,he)}}})},kI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:a=!1}=r,{at:l=FT(n),batchDirty:c=!0}=r;if(i.length){if(_t.isRange(l))if(o||(l=j.unhangRange(n,l,{voids:a})),_t.isCollapsed(l))l=l.anchor;else{var[,h]=_t.edges(l);if(!a&&j.void(n,{at:h}))return;var d=j.pointRef(n,h);jt.delete(n,{at:l}),l=d.unref()}else ut.isPath(l)&&(l=j.start(n,l));if(!(!a&&j.void(n,{at:l}))){var p=j.above(n,{at:l,match:tt=>fe.isElement(tt)&&j.isInline(n,tt),mode:"highest",voids:a});if(p){var[,m]=p;if(j.isEnd(n,l,m)){var w=j.after(n,m);l=w}else if(j.isStart(n,l,m)){var x=j.before(n,m);l=x}}var T=j.above(n,{match:tt=>fe.isElement(tt)&&j.isBlock(n,tt),at:l,voids:a}),[,D]=T,b=j.isStart(n,l,D),B=j.isEnd(n,l,D),A=b&&B,[,I]=te.first({children:i},[]),[,R]=te.last({children:i},[]),k=tt=>{var[it,xt]=tt,gt=xt.length===0;return gt?!1:A?!0:!(!b&&ut.isAncestor(xt,I)&&fe.isElement(it)&&!n.isVoid(it)&&!n.isInline(it)||!B&&ut.isAncestor(xt,R)&&fe.isElement(it)&&!n.isVoid(it)&&!n.isInline(it))},W=!0,U=[],nt=[],st=[];for(var ft of te.nodes({children:i},{pass:k})){var[Et,ct]=ft;W&&fe.isElement(Et)&&!n.isInline(Et)&&!ut.isAncestor(ct,I)&&(W=!1),k(ft)&&(fe.isElement(Et)&&!n.isInline(Et)?(W=!1,nt.push(Et)):W?U.push(Et):st.push(Et))}var[mt]=j.nodes(n,{at:l,match:tt=>se.isText(tt)||j.isInline(n,tt),mode:"highest",voids:a}),[,wt]=mt,V=j.isStart(n,l,wt),P=j.isEnd(n,l,wt),_=j.pathRef(n,B&&!st.length?ut.next(D):D),N=j.pathRef(n,P?ut.next(wt):wt),$=st.length>0;jt.splitNodes(n,{at:l,match:tt=>$?fe.isElement(tt)&&j.isBlock(n,tt):se.isText(tt)||j.isInline(n,tt),mode:$?"lowest":"highest",always:$&&(!b||U.length>0)&&(!B||st.length>0),voids:a});var Q=j.pathRef(n,!V||V&&P?ut.next(wt):wt);if(jt.insertNodes(n,U,{at:Q.current,match:tt=>se.isText(tt)||j.isInline(n,tt),mode:"highest",voids:a,batchDirty:c}),A&&!U.length&&nt.length&&!st.length&&jt.delete(n,{at:D,voids:a}),jt.insertNodes(n,nt,{at:_.current,match:tt=>fe.isElement(tt)&&j.isBlock(n,tt),mode:"lowest",voids:a,batchDirty:c}),jt.insertNodes(n,st,{at:N.current,match:tt=>se.isText(tt)||j.isInline(n,tt),mode:"highest",voids:a,batchDirty:c}),!r.at){var F;if(st.length>0&&N.current?F=ut.previous(N.current):nt.length>0&&_.current?F=ut.previous(_.current):Q.current&&(F=ut.previous(Q.current)),F){var J=j.end(n,F);jt.select(n,J)}}Q.unref(),_.unref(),N.unref()}}})},II=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=i,{selection:o}=n;if(o){if(r==="anchor")jt.select(n,o.anchor);else if(r==="focus")jt.select(n,o.focus);else if(r==="start"){var[a]=_t.edges(o);jt.select(n,a)}else if(r==="end"){var[,l]=_t.edges(o);jt.select(n,l)}}else return},HI=e=>{var{selection:n}=e;n&&e.apply({type:"set_selection",properties:n,newProperties:null})},NI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=n,{distance:o=1,unit:a="character",reverse:l=!1}=i,{edge:c=null}=i;if(r){c==="start"&&(c=_t.isBackward(r)?"focus":"anchor"),c==="end"&&(c=_t.isBackward(r)?"anchor":"focus");var{anchor:h,focus:d}=r,p={distance:o,unit:a,ignoreNonSelectable:!0},m={};if(c==null||c==="anchor"){var w=l?j.before(n,h,p):j.after(n,h,p);w&&(m.anchor=w)}if(c==null||c==="focus"){var x=l?j.before(n,d,p):j.after(n,d,p);x&&(m.focus=x)}jt.setSelection(n,m)}},GI=(e,n)=>{var{selection:i}=e;if(n=j.range(e,n),i){jt.setSelection(e,n);return}if(!_t.isRange(n))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Wi.stringify(n)));e.apply({type:"set_selection",properties:i,newProperties:n})};function G5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function z5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?G5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var zI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=n,{edge:a="both"}=r;if(o){a==="start"&&(a=_t.isBackward(o)?"focus":"anchor"),a==="end"&&(a=_t.isBackward(o)?"anchor":"focus");var{anchor:l,focus:c}=o,h=a==="anchor"?l:c;jt.setSelection(n,{[a==="anchor"?"anchor":"focus"]:z5(z5({},h),i)})}},jI=(e,n)=>{var{selection:i}=e,r={},o={};if(i){for(var a in n)(a==="anchor"&&n.anchor!=null&&!Sn.equals(n.anchor,i.anchor)||a==="focus"&&n.focus!=null&&!Sn.equals(n.focus,i.focus)||a!=="anchor"&&a!=="focus"&&n[a]!==i[a])&&(r[a]=i[a],o[a]=n[a]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:o})}},UI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:a=!1,mode:l="lowest",batchDirty:c=!0}=r,{at:h,match:d,select:p}=r;if(te.isNode(i)&&(i=[i]),i.length!==0){var[m]=i;if(h||(h=FT(n),p!==!1&&(p=!0)),p==null&&(p=!1),_t.isRange(h))if(o||(h=j.unhangRange(n,h,{voids:a})),_t.isCollapsed(h))h=h.anchor;else{var[,w]=_t.edges(h),x=j.pointRef(n,w);jt.delete(n,{at:h}),h=x.unref()}if(Sn.isPoint(h)){d==null&&(se.isText(m)?d=ft=>se.isText(ft):n.isInline(m)?d=ft=>se.isText(ft)||j.isInline(n,ft):d=ft=>fe.isElement(ft)&&j.isBlock(n,ft));var[T]=j.nodes(n,{at:h.path,match:d,mode:l,voids:a});if(T){var[,D]=T,b=j.pathRef(n,D),B=j.isEnd(n,h,D);jt.splitNodes(n,{at:h,match:d,mode:l,voids:a});var A=b.unref();h=B?ut.next(A):A}else return}var I=ut.parent(h),R=h[h.length-1];if(!(!a&&j.void(n,{at:I}))){if(c){var k=[],W=ut.levels(I);Ak(n,()=>{var ft=function(){var mt=I.concat(R);R++;var wt={type:"insert_node",path:mt,node:Et};n.apply(wt),h=ut.next(h),k.push(wt),se.isText(Et)?W.push(mt):W.push(...Array.from(te.nodes(Et),V=>{var[,P]=V;return mt.concat(P)}))};for(var Et of i)ft()},()=>{uB(n,W,ft=>{var Et=ft;for(var ct of k)if(ut.operationCanTransformPath(ct)&&(Et=ut.transform(Et,ct),!Et))return null;return Et})})}else for(var U of i){var nt=I.concat(R);R++,n.apply({type:"insert_node",path:nt,node:U}),h=ut.next(h)}if(h=ut.previous(h),p){var st=j.end(n,h);st&&jt.select(n,st)}}}})},$I=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{at:r=n.selection,mode:o="lowest",voids:a=!1}=i,{match:l}=i;if(l==null&&(l=ut.isPath(r)?Vg(n,r):R=>fe.isElement(R)&&j.isBlock(n,R)),!!r){var c=j.nodes(n,{at:r,match:l,mode:o,voids:a}),h=Array.from(c,R=>{var[,k]=R;return j.pathRef(n,k)});for(var d of h){var p=d.unref();if(p.length<2)throw new Error("Cannot lift node at a path [".concat(p,"] because it has a depth of less than `2`."));var m=j.node(n,ut.parent(p)),[w,x]=m,T=p[p.length-1],{length:D}=w.children;if(D===1){var b=ut.next(x);jt.moveNodes(n,{at:p,to:b,voids:a}),jt.removeNodes(n,{at:x,voids:a})}else if(T===0)jt.moveNodes(n,{at:p,to:x,voids:a});else if(T===D-1){var B=ut.next(x);jt.moveNodes(n,{at:p,to:B,voids:a})}else{var A=ut.next(p),I=ut.next(x);jt.splitNodes(n,{at:A,voids:a}),jt.moveNodes(n,{at:p,to:I,voids:a})}}}})},VI=["text"],WI=["children"],cB=(e,n)=>{if(fe.isElement(n)){var i=n;return j.isVoid(e,n)?!0:i.children.length===1?cB(e,i.children[0]):!1}else return!j.isEditor(n)},XI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{match:r,at:o=n.selection}=i,{hanging:a=!1,voids:l=!1,mode:c="lowest"}=i;if(o){if(r==null)if(ut.isPath(o)){var[h]=j.parent(n,o);r=ft=>h.children.includes(ft)}else r=ft=>fe.isElement(ft)&&j.isBlock(n,ft);if(!a&&_t.isRange(o)&&(o=j.unhangRange(n,o,{voids:l})),_t.isRange(o))if(_t.isCollapsed(o))o=o.anchor;else{var[,d]=_t.edges(o),p=j.pointRef(n,d);jt.delete(n,{at:o}),o=p.unref(),i.at==null&&jt.select(n,o)}var[m]=j.nodes(n,{at:o,match:r,voids:l,mode:c}),w=j.previous(n,{at:o,match:r,voids:l,mode:c});if(!(!m||!w)){var[x,T]=m,[D,b]=w;if(!(T.length===0||b.length===0)){var B=ut.next(b),A=ut.common(T,b),I=ut.isSibling(T,b),R=Array.from(j.levels(n,{at:T}),ft=>{var[Et]=ft;return Et}).slice(A.length).slice(0,-1),k=j.above(n,{at:T,mode:"highest",match:ft=>R.includes(ft)&&cB(n,ft)}),W=k&&j.pathRef(n,k[1]),U,nt;if(se.isText(x)&&se.isText(D)){var st=Du(x,VI);nt=D.text.length,U=st}else if(fe.isElement(x)&&fe.isElement(D)){var st=Du(x,WI);nt=D.children.length,U=st}else throw new Error("Cannot merge the node at path [".concat(T,"] with the previous sibling because it is not the same kind: ").concat(Wi.stringify(x)," ").concat(Wi.stringify(D)));I||jt.moveNodes(n,{at:T,to:B,voids:l}),W&&jt.removeNodes(n,{at:W.current,voids:l}),j.shouldMergeNodesRemovePrevNode(n,w,m)?jt.removeNodes(n,{at:b,voids:l}):n.apply({type:"merge_node",path:B,position:nt,properties:U}),W&&W.unref()}}}})},qI=(e,n)=>{j.withoutNormalizing(e,()=>{var{to:i,at:r=e.selection,mode:o="lowest",voids:a=!1}=n,{match:l}=n;if(r){l==null&&(l=ut.isPath(r)?Vg(e,r):x=>fe.isElement(x)&&j.isBlock(e,x));var c=j.pathRef(e,i),h=j.nodes(e,{at:r,match:l,mode:o,voids:a}),d=Array.from(h,x=>{var[,T]=x;return j.pathRef(e,T)});for(var p of d){var m=p.unref(),w=c.current;m.length!==0&&e.apply({type:"move_node",path:m,newPath:w}),c.current&&ut.isSibling(w,m)&&ut.isAfter(w,m)&&(c.current=ut.next(c.current))}c.unref()}})},YI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{hanging:r=!1,voids:o=!1,mode:a="lowest"}=i,{at:l=n.selection,match:c}=i;if(l){c==null&&(c=ut.isPath(l)?Vg(n,l):x=>fe.isElement(x)&&j.isBlock(n,x)),!r&&_t.isRange(l)&&(l=j.unhangRange(n,l,{voids:o}));var h=j.nodes(n,{at:l,match:c,mode:a,voids:o}),d=Array.from(h,x=>{var[,T]=x;return j.pathRef(n,T)});for(var p of d){var m=p.unref();if(m){var[w]=j.node(n,m);n.apply({type:"remove_node",path:m,node:w})}}}})},KI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{match:o,at:a=n.selection,compare:l,merge:c}=r,{hanging:h=!1,mode:d="lowest",split:p=!1,voids:m=!1}=r;if(a){if(o==null&&(o=ut.isPath(a)?Vg(n,a):nt=>fe.isElement(nt)&&j.isBlock(n,nt)),!h&&_t.isRange(a)&&(a=j.unhangRange(n,a,{voids:m})),p&&_t.isRange(a)){if(_t.isCollapsed(a)&&j.leaf(n,a.anchor)[0].text.length>0)return;var w=j.rangeRef(n,a,{affinity:"inward"}),[x,T]=_t.edges(a),D=d==="lowest"?"lowest":"highest",b=j.isEnd(n,T,T.path);jt.splitNodes(n,{at:T,match:o,mode:D,voids:m,always:!b});var B=j.isStart(n,x,x.path);jt.splitNodes(n,{at:x,match:o,mode:D,voids:m,always:!B}),a=w.unref(),r.at==null&&jt.select(n,a)}l||(l=(nt,st)=>nt!==st);for(var[A,I]of j.nodes(n,{at:a,match:o,mode:d,voids:m})){var R={},k={};if(I.length!==0){var W=!1;for(var U in i)U==="children"||U==="text"||l(i[U],A[U])&&(W=!0,A.hasOwnProperty(U)&&(R[U]=A[U]),c?i[U]!=null&&(k[U]=c(A[U],i[U])):i[U]!=null&&(k[U]=i[U]));W&&n.apply({type:"set_node",path:I,properties:R,newProperties:k})}}}})},ZI=(e,n)=>{if(_t.isCollapsed(n))return n.anchor;var[,i]=_t.edges(n),r=j.pointRef(e,i);return jt.delete(e,{at:n}),r.unref()},QI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{mode:r="lowest",voids:o=!1}=i,{match:a,at:l=n.selection,height:c=0,always:h=!1}=i;if(a==null&&(a=$=>fe.isElement($)&&j.isBlock(n,$)),_t.isRange(l)&&(l=ZI(n,l)),ut.isPath(l)){var d=l,p=j.point(n,d),[m]=j.parent(n,d);a=$=>$===m,c=p.path.length-d.length+1,l=p,h=!0}if(l){var w=j.pointRef(n,l,{affinity:"backward"}),x;try{var[T]=j.nodes(n,{at:l,match:a,mode:r,voids:o});if(!T)return;var D=j.void(n,{at:l,mode:"highest"}),b=0;if(!o&&D){var[B,A]=D;if(fe.isElement(B)&&n.isInline(B)){var I=j.after(n,A);if(!I){var R={text:""},k=ut.next(A);jt.insertNodes(n,R,{at:k,voids:o}),I=j.point(n,k)}l=I,h=!0}var W=l.path.length-A.length;c=W+1,h=!0}x=j.pointRef(n,l);var U=l.path.length-c,[,nt]=T,st=l.path.slice(0,U),ft=c===0?l.offset:l.path[U]+b;for(var[Et,ct]of j.levels(n,{at:st,reverse:!0,voids:o})){var mt=!1;if(ct.length<nt.length||ct.length===0||!o&&fe.isElement(Et)&&j.isVoid(n,Et))break;var wt=w.current,V=j.isEnd(n,wt,ct);if(h||!w||!j.isEdge(n,wt,ct)){mt=!0;var P=te.extractProps(Et);n.apply({type:"split_node",path:ct,position:ft,properties:P})}ft=ct[ct.length-1]+(mt||V?1:0)}if(i.at==null){var _=x.current||j.end(n,[]);jt.select(n,_)}}finally{var N;w.unref(),(N=x)===null||N===void 0||N.unref()}}})},JI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(i)||(i=[i]);var o={};for(var a of i)o[a]=null;jt.setNodes(n,o,r)},tH=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{mode:r="lowest",split:o=!1,voids:a=!1}=i,{at:l=n.selection,match:c}=i;if(l){c==null&&(c=ut.isPath(l)?Vg(n,l):x=>fe.isElement(x)&&j.isBlock(n,x)),ut.isPath(l)&&(l=j.range(n,l));var h=_t.isRange(l)?j.rangeRef(n,l):null,d=j.nodes(n,{at:l,match:c,mode:r,voids:a}),p=Array.from(d,x=>{var[,T]=x;return j.pathRef(n,T)}).reverse(),m=function(){var T=w.unref(),[D]=j.node(n,T),b=j.range(n,T);o&&h&&(b=_t.intersection(h.current,b)),jt.liftNodes(n,{at:b,match:B=>fe.isAncestor(D)&&D.children.includes(B),voids:a})};for(var w of p)m();h&&h.unref()}})};function j5(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function U5(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?j5(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j5(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var eH=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{mode:o="lowest",split:a=!1,voids:l=!1}=r,{match:c,at:h=n.selection}=r;if(h){if(c==null&&(ut.isPath(h)?c=Vg(n,h):n.isInline(i)?c=b=>fe.isElement(b)&&j.isInline(n,b)||se.isText(b):c=b=>fe.isElement(b)&&j.isBlock(n,b)),a&&_t.isRange(h)){var[d,p]=_t.edges(h),m=j.rangeRef(n,h,{affinity:"inward"});jt.splitNodes(n,{at:p,match:c,voids:l}),jt.splitNodes(n,{at:d,match:c,voids:l}),h=m.unref(),r.at==null&&jt.select(n,h)}var w=Array.from(j.nodes(n,{at:h,match:n.isInline(i)?b=>fe.isElement(b)&&j.isBlock(n,b):b=>j.isEditor(b),mode:"lowest",voids:l})),x=function(){var B=_t.isRange(h)?_t.intersection(h,j.range(n,D)):h;if(!B)return 0;var A=Array.from(j.nodes(n,{at:B,match:c,mode:o,voids:l}));if(A.length>0){var[I]=A,R=A[A.length-1],[,k]=I,[,W]=R;if(k.length===0&&W.length===0)return 0;var U=ut.equals(k,W)?ut.parent(k):ut.common(k,W),nt=j.range(n,k,W),st=j.node(n,U),[ft]=st,Et=U.length+1,ct=ut.next(W.slice(0,Et)),mt=U5(U5({},i),{},{children:[]});jt.insertNodes(n,mt,{at:ct,voids:l}),jt.moveNodes(n,{at:nt,match:wt=>fe.isAncestor(ft)&&ft.children.includes(wt),to:ct.concat(0),voids:l})}},T;for(var[,D]of w)T=x()}})},nH=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Dk(e,...r)},addMark:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Ok(e,...r)},deleteBackward:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Fk(e,...r)},deleteForward:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return kk(e,...r)},deleteFragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Ik(e,...r)},getFragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Bk(e,...r)},insertBreak:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return qk(e,...r)},insertSoftBreak:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Kk(e,...r)},insertFragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return kI(e,...r)},insertNode:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Yk(e,...r)},insertText:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Qk(e,...r)},normalizeNode:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Pk(e,...r)},removeMark:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return BI(e,...r)},getDirtyPaths:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return bk(e,...r)},shouldNormalize:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Mk(e,...r)},above:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Rk(e,...r)},after:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Lk(e,...r)},before:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return _k(e,...r)},collapse:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return II(e,...r)},delete:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return FI(e,...r)},deselect:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return HI(e,...r)},edges:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hk(e,...r)},elementReadOnly:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Nk(e,...r)},end:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Gk(e,...r)},first:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return zk(e,...r)},fragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return jk(e,...r)},getMarks:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return cI(e,...r)},hasBlocks:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return $k(e,...r)},hasInlines:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Vk(e,...r)},hasPath:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Wk(e,...r)},hasTexts:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Xk(e,...r)},insertNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return UI(e,...r)},isBlock:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Jk(e,...r)},isEdge:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return tI(e,...r)},isEmpty:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return eI(e,...r)},isEnd:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return nI(e,...r)},isNormalizing:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return iI(e,...r)},isStart:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return rI(e,...r)},last:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return oI(e,...r)},leaf:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return sI(e,...r)},levels:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return aI(e,...r)},liftNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return $I(e,...r)},mergeNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return XI(e,...r)},move:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return NI(e,...r)},moveNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return qI(e,...r)},next:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return fI(e,...r)},node:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return hI(e,...r)},nodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return dI(e,...r)},normalize:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return gI(e,...r)},parent:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return pI(e,...r)},path:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yI(e,...r)},pathRef:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mI(e,...r)},pathRefs:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return vI(e,...r)},point:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return CI(e,...r)},pointRef:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return wI(e,...r)},pointRefs:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return xI(e,...r)},positions:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return EI(e,...r)},previous:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return SI(e,...r)},range:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return DI(e,...r)},rangeRef:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return TI(e,...r)},rangeRefs:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return AI(e,...r)},removeNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return YI(e,...r)},select:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return GI(e,...r)},setNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return KI(e,...r)},setNormalizing:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return PI(e,...r)},setPoint:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return zI(e,...r)},setSelection:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return jI(e,...r)},splitNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return QI(e,...r)},start:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return MI(e,...r)},string:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return RI(e,...r)},unhangRange:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return OI(e,...r)},unsetNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return JI(e,...r)},unwrapNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return tH(e,...r)},void:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Uk(e,...r)},withoutNormalizing:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return LI(e,...r)},wrapNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return eH(e,...r)},shouldMergeNodesRemovePrevNode:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return _I(e,...r)}};return e},qE,$5;function iH(){if($5)return qE;$5=1,qE=o;var e="---",n="A-Za-z--------",i=new RegExp("^[^"+n+"]*["+e+"]"),r=new RegExp("^[^"+e+"]*["+n+"]");function o(a){return a=String(a||""),i.test(a)?"rtl":r.test(a)?"ltr":"neutral"}return qE}var rH=iH();const fB=hf(rH),V5=e=>typeof e=="object"&&e!=null&&e.nodeType===1,W5=(e,n)=>(!n||e!=="hidden")&&e!=="visible"&&e!=="clip",$2=(e,n)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const i=getComputedStyle(e,null);return W5(i.overflowY,n)||W5(i.overflowX,n)||(r=>{const o=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!o&&(o.clientHeight<r.scrollHeight||o.clientWidth<r.scrollWidth)})(e)}return!1},V2=(e,n,i,r,o,a,l,c)=>a<e&&l>n||a>e&&l<n?0:a<=e&&c<=i||l>=n&&c>=i?a-e-r:l>n&&c<i||a<e&&c>i?l-n+o:0,oH=e=>{const n=e.parentElement;return n??(e.getRootNode().host||null)},X5=(e,n)=>{var i,r,o,a;if(typeof document>"u")return[];const{scrollMode:l,block:c,inline:h,boundary:d,skipOverflowHiddenElements:p}=n,m=typeof d=="function"?d:P=>P!==d;if(!V5(e))throw new TypeError("Invalid target");const w=document.scrollingElement||document.documentElement,x=[];let T=e;for(;V5(T)&&m(T);){if(T=oH(T),T===w){x.push(T);break}T!=null&&T===document.body&&$2(T)&&!$2(document.documentElement)||T!=null&&$2(T,p)&&x.push(T)}const D=(r=(i=window.visualViewport)==null?void 0:i.width)!=null?r:innerWidth,b=(a=(o=window.visualViewport)==null?void 0:o.height)!=null?a:innerHeight,{scrollX:B,scrollY:A}=window,{height:I,width:R,top:k,right:W,bottom:U,left:nt}=e.getBoundingClientRect(),{top:st,right:ft,bottom:Et,left:ct}=(P=>{const _=window.getComputedStyle(P);return{top:parseFloat(_.scrollMarginTop)||0,right:parseFloat(_.scrollMarginRight)||0,bottom:parseFloat(_.scrollMarginBottom)||0,left:parseFloat(_.scrollMarginLeft)||0}})(e);let mt=c==="start"||c==="nearest"?k-st:c==="end"?U+Et:k+I/2-st+Et,wt=h==="center"?nt+R/2-ct+ft:h==="end"?W+ft:nt-ct;const V=[];for(let P=0;P<x.length;P++){const _=x[P],{height:N,width:$,top:Q,right:F,bottom:J,left:tt}=_.getBoundingClientRect();if(l==="if-needed"&&k>=0&&nt>=0&&U<=b&&W<=D&&(_===w&&!$2(_)||k>=Q&&U<=J&&nt>=tt&&W<=F))return V;const it=getComputedStyle(_),xt=parseInt(it.borderLeftWidth,10),gt=parseInt(it.borderTopWidth,10),Lt=parseInt(it.borderRightWidth,10),$t=parseInt(it.borderBottomWidth,10);let ot=0,Pt=0;const Rt="offsetWidth"in _?_.offsetWidth-_.clientWidth-xt-Lt:0,It="offsetHeight"in _?_.offsetHeight-_.clientHeight-gt-$t:0,he="offsetWidth"in _?_.offsetWidth===0?0:$/_.offsetWidth:0,Nt="offsetHeight"in _?_.offsetHeight===0?0:N/_.offsetHeight:0;if(w===_)ot=c==="start"?mt:c==="end"?mt-b:c==="nearest"?V2(A,A+b,b,gt,$t,A+mt,A+mt+I,I):mt-b/2,Pt=h==="start"?wt:h==="center"?wt-D/2:h==="end"?wt-D:V2(B,B+D,D,xt,Lt,B+wt,B+wt+R,R),ot=Math.max(0,ot+A),Pt=Math.max(0,Pt+B);else{ot=c==="start"?mt-Q-gt:c==="end"?mt-J+$t+It:c==="nearest"?V2(Q,J,N,gt,$t+It,mt,mt+I,I):mt-(Q+N/2)+It/2,Pt=h==="start"?wt-tt-xt:h==="center"?wt-(tt+$/2)+Rt/2:h==="end"?wt-F+Lt+Rt:V2(tt,F,$,xt,Lt+Rt,wt,wt+R,R);const{scrollLeft:ge,scrollTop:ae}=_;ot=Nt===0?0:Math.max(0,Math.min(ae+ot/Nt,_.scrollHeight-N/Nt+It)),Pt=he===0?0:Math.max(0,Math.min(ge+Pt/he,_.scrollWidth-$/he+Rt)),mt+=ae-ot,wt+=ge-Pt}V.push({el:_,top:ot,left:Pt})}return V},sH=e=>e===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(e)?e:{block:"start",inline:"nearest"};function aH(e,n){if(!e.isConnected||!(o=>{let a=o;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(e))return;const i=(o=>{const a=window.getComputedStyle(o);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(e);if((o=>typeof o=="object"&&typeof o.behavior=="function")(n))return n.behavior(X5(e,n));const r=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:o,top:a,left:l}of X5(e,sH(n))){const c=a-i.top+i.bottom,h=l-i.left+i.right;o.scroll({top:c,left:h,behavior:r})}}var hB=globalThis.Node,lH=globalThis.Text,HT=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,uH=e=>lf(e)&&e.nodeType===8,Vs=e=>lf(e)&&e.nodeType===1,lf=e=>{var n=HT(e);return!!n&&e instanceof n.Node},fS=e=>{var n=e&&e.anchorNode&&HT(e.anchorNode);return!!n&&e instanceof n.Selection},dB=e=>lf(e)&&e.nodeType===3,cH=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,fH=e=>{var[n,i]=e;if(Vs(n)&&n.childNodes.length){var r=i===n.childNodes.length,o=r?i-1:i;for([n,o]=gB(n,o,r?"backward":"forward"),r=o<i;Vs(n)&&n.childNodes.length;){var a=r?n.childNodes.length-1:0;n=dH(n,a,r?"backward":"forward")}i=r&&n.textContent!=null?n.textContent.length:0}return[n,i]},hH=e=>{for(var n=e&&e.parentNode;n;){if(n.toString()==="[object ShadowRoot]")return!0;n=n.parentNode}return!1},gB=(e,n,i)=>{for(var{childNodes:r}=e,o=r[n],a=n,l=!1,c=!1;(uH(o)||Vs(o)&&o.childNodes.length===0||Vs(o)&&o.getAttribute("contenteditable")==="false")&&!(l&&c);){if(a>=r.length){l=!0,a=n-1,i="backward";continue}if(a<0){c=!0,a=n+1,i="forward";continue}o=r[a],n=a,a+=i==="forward"?1:-1}return[o,n]},dH=(e,n,i)=>{var[r]=gB(e,n,i);return r},pB=e=>{var n="";if(dB(e)&&e.nodeValue)return e.nodeValue;if(Vs(e)){for(var i of Array.from(e.childNodes))n+=pB(i);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(n+=`
`)}return n},gH=/data-slate-fragment="(.+?)"/m,pH=e=>{var n=e.getData("text/html"),[,i]=n.match(gH)||[];return i},ym=e=>e.getSelection!=null?e.getSelection():document.getSelection(),NT=(e,n,i)=>{var{target:r}=n;if(Vs(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:o}=qe.getWindow(e);if(o.contains(r))return qe.hasDOMNode(e,r,{editable:!0});var a=i.find(l=>{var{addedNodes:c,removedNodes:h}=l;for(var d of c)if(d===r||d.contains(r))return!0;for(var p of h)if(p===r||p.contains(r))return!0});return!a||a===n?!1:NT(e,a,i)},mH=()=>{for(var e=document.activeElement;(n=e)!==null&&n!==void 0&&n.shadowRoot&&(i=e.shadowRoot)!==null&&i!==void 0&&i.activeElement;){var n,i,r;e=(r=e)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return e},q5=(e,n)=>!!(e.compareDocumentPosition(n)&hB.DOCUMENT_POSITION_PRECEDING),vH=(e,n)=>!!(e.compareDocumentPosition(n)&hB.DOCUMENT_POSITION_FOLLOWING),YE,KE,yH=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Y5=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Eo=typeof navigator<"u"&&/Android/.test(navigator.userAgent),cg=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Nh=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),wH=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),mB=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),xH=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),CH=Eo&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),EH=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),SH=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),TH=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((YE=navigator.userAgent.match(/Version\/(\d+)/))!==null&&YE!==void 0&&YE[1]&&parseInt((KE=navigator.userAgent.match(/Version\/(\d+)/))===null||KE===void 0?void 0:KE[1],10)<17);var Nc=(!xH||!CH)&&!wH&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},km(e)}function AH(e,n){if(km(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,n);if(km(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function DH(e){var n=AH(e,"string");return km(n)==="symbol"?n:String(n)}function GT(e,n,i){return n=DH(n),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var bH=0;class vB{constructor(){GT(this,"id",void 0),this.id="".concat(bH++)}}var yg=new WeakMap,fg=new WeakMap,wm=new WeakMap,yB=new WeakMap,xw=new WeakMap,hS=new WeakMap,Im=new WeakMap,qh=new WeakMap,qw=new WeakMap,jx=new WeakMap,dS=new WeakMap,Xc=new WeakMap,Uh=new WeakMap,xm=new WeakMap,gS=new WeakMap,zT=new WeakMap,ba=new WeakMap,mu=new WeakMap,$o=new WeakMap,Uc=new WeakMap,$c=new WeakMap,wB=new WeakMap,Bg=Symbol("placeholder"),xB=Symbol("mark-placeholder"),qe={androidPendingDiffs:e=>$o.get(e),androidScheduleFlush:e=>{var n;(n=zT.get(e))===null||n===void 0||n()},blur:e=>{var n=qe.toDOMNode(e,e),i=qe.findDocumentOrShadowRoot(e);Xc.set(e,!1),i.activeElement===n&&n.blur()},deselect:e=>{var{selection:n}=e,i=qe.findDocumentOrShadowRoot(e),r=ym(i);r&&r.rangeCount>0&&r.removeAllRanges(),n&&jt.deselect(e)},findDocumentOrShadowRoot:e=>{var n=qe.toDOMNode(e,e),i=n.getRootNode();return i instanceof Document||i instanceof ShadowRoot?i:n.ownerDocument},findEventRange:(e,n)=>{"nativeEvent"in n&&(n=n.nativeEvent);var{clientX:i,clientY:r,target:o}=n;if(i==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var a=qe.toSlateNode(e,n.target),l=qe.findPath(e,a);if(fe.isElement(a)&&j.isVoid(e,a)){var c=o.getBoundingClientRect(),h=e.isInline(a)?i-c.left<c.left+c.width-i:r-c.top<c.top+c.height-r,d=j.point(e,l,{edge:h?"start":"end"}),p=h?j.before(e,d):j.after(e,d);if(p){var m=j.range(e,p);return m}}var w,{document:x}=qe.getWindow(e);if(x.caretRangeFromPoint)w=x.caretRangeFromPoint(i,r);else{var T=x.caretPositionFromPoint(i,r);T&&(w=x.createRange(),w.setStart(T.offsetNode,T.offset),w.setEnd(T.offsetNode,T.offset))}if(!w)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var D=qe.toSlateRange(e,w,{exactMatch:!1,suppressThrow:!1});return D},findKey:(e,n)=>{var i=qw.get(n);return i||(i=new vB,qw.set(n,i)),i},findPath:(e,n)=>{for(var i=[],r=n;;){var o=wm.get(r);if(o==null){if(j.isEditor(r))return i;break}var a=fg.get(r);if(a==null)break;i.unshift(a),r=o}throw new Error("Unable to find the path for Slate node: ".concat(Wi.stringify(n)))},focus:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Xc.get(n)){if(i.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(n.operations.length>0){setTimeout(()=>{qe.focus(n,{retries:i.retries-1})},10);return}var r=qe.toDOMNode(n,n),o=qe.findDocumentOrShadowRoot(n);if(o.activeElement!==r){if(n.selection&&o instanceof Document){var a=ym(o),l=qe.toDOMRange(n,n.selection);a==null||a.removeAllRanges(),a==null||a.addRange(l)}n.selection||jt.select(n,j.start(n,[])),Xc.set(n,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var n=yB.get(e);if(!n)throw new Error("Unable to find a host window element for this editor");return n},hasDOMNode:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=r,a=qe.toDOMNode(n,n),l;try{l=Vs(i)?i:i.parentElement}catch(c){if(c instanceof Error&&!c.message.includes('Permission denied to access property "nodeType"'))throw c}return l?l.closest("[data-slate-editor]")===a&&(!o||l.isContentEditable?!0:typeof l.isContentEditable=="boolean"&&l.closest('[contenteditable="false"]')===a||!!l.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,n)=>lf(n)&&qe.hasDOMNode(e,n,{editable:!0}),hasRange:(e,n)=>{var{anchor:i,focus:r}=n;return j.hasPath(e,i.path)&&j.hasPath(e,r.path)},hasSelectableTarget:(e,n)=>qe.hasEditableTarget(e,n)||qe.isTargetInsideNonReadonlyVoid(e,n),hasTarget:(e,n)=>lf(n)&&qe.hasDOMNode(e,n),insertData:(e,n)=>{e.insertData(n)},insertFragmentData:(e,n)=>e.insertFragmentData(n),insertTextData:(e,n)=>e.insertTextData(n),isComposing:e=>!!Uh.get(e),isFocused:e=>!!Xc.get(e),isReadOnly:e=>!!dS.get(e),isTargetInsideNonReadonlyVoid:(e,n)=>{if(dS.get(e))return!1;var i=qe.hasTarget(e,n)&&qe.toSlateNode(e,n);return fe.isElement(i)&&j.isVoid(e,i)},setFragmentData:(e,n,i)=>e.setFragmentData(n,i),toDOMNode:(e,n)=>{var i=jx.get(e),r=j.isEditor(n)?xw.get(e):i==null?void 0:i.get(qe.findKey(e,n));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Wi.stringify(n)));return r},toDOMPoint:(e,n)=>{var[i]=j.node(e,n.path),r=qe.toDOMNode(e,i),o;j.void(e,{at:n})&&(n={path:n.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",l=Array.from(r.querySelectorAll(a)),c=0,h=0;h<l.length;h++){var d=l[h],p=d.childNodes[0];if(!(p==null||p.textContent==null)){var{length:m}=p.textContent,w=d.getAttribute("data-slate-length"),x=w==null?m:parseInt(w,10),T=c+x,D=l[h+1];if(n.offset===T&&D!==null&&D!==void 0&&D.hasAttribute("data-slate-mark-placeholder")){var b,B=D.childNodes[0];o=[B instanceof lH?B:D,(b=D.textContent)!==null&&b!==void 0&&b.startsWith("\uFEFF")?1:0];break}if(n.offset<=T){var A=Math.min(m,Math.max(0,n.offset-c));o=[p,A];break}c=T}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Wi.stringify(n)));return o},toDOMRange:(e,n)=>{var{anchor:i,focus:r}=n,o=_t.isBackward(n),a=qe.toDOMPoint(e,i),l=_t.isCollapsed(n)?a:qe.toDOMPoint(e,r),c=qe.getWindow(e),h=c.document.createRange(),[d,p]=o?l:a,[m,w]=o?a:l,x=Vs(d)?d:d.parentElement,T=!!x.getAttribute("data-slate-zero-width"),D=Vs(m)?m:m.parentElement,b=!!D.getAttribute("data-slate-zero-width");return h.setStart(d,T?1:p),h.setEnd(m,b?1:w),h},toSlateNode:(e,n)=>{var i=Vs(n)?n:n.parentElement;i&&!i.hasAttribute("data-slate-node")&&(i=i.closest("[data-slate-node]"));var r=i?Im.get(i):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(i));return r},toSlatePoint:(e,n,i)=>{var{exactMatch:r,suppressThrow:o,searchDirection:a="backward"}=i,[l,c]=r?n:fH(n),h=l.parentNode,d=null,p=0;if(h){var m,w,x=qe.toDOMNode(e,e),T=h.closest('[data-slate-void="true"]'),D=T&&x.contains(T)?T:null,b=h.closest('[contenteditable="false"]'),B=b&&x.contains(b)?b:null,A=h.closest("[data-slate-leaf]"),I=null;if(A){if(d=A.closest('[data-slate-node="text"]'),d){var R=qe.getWindow(e),k=R.document.createRange();k.setStart(d,0),k.setEnd(l,c);var W=k.cloneContents(),U=[...Array.prototype.slice.call(W.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(W.querySelectorAll("[contenteditable=false]"))];U.forEach(tt=>{if(Eo&&!r&&tt.hasAttribute("data-slate-zero-width")&&tt.textContent.length>0&&tt.textContext!=="\uFEFF"){tt.textContent.startsWith("\uFEFF")&&(tt.textContent=tt.textContent.slice(1));return}tt.parentNode.removeChild(tt)}),p=W.textContent.length,I=d}}else if(D){for(var nt=D.querySelectorAll("[data-slate-leaf]"),st=0;st<nt.length;st++){var ft=nt[st];if(qe.hasDOMNode(e,ft)){A=ft;break}}A?(d=A.closest('[data-slate-node="text"]'),I=A,p=I.textContent.length,I.querySelectorAll("[data-slate-zero-width]").forEach(tt=>{p-=tt.textContent.length})):p=1}else if(B){var Et=tt=>tt?tt.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],ct=B.closest('[data-slate-node="element"]');if(a==="forward"){var mt,wt=[...Et(ct),...Et(ct==null?void 0:ct.nextElementSibling)];A=(mt=wt.find(tt=>vH(B,tt)))!==null&&mt!==void 0?mt:null}else{var V,P=[...Et(ct==null?void 0:ct.previousElementSibling),...Et(ct)];A=(V=P.findLast(tt=>q5(B,tt)))!==null&&V!==void 0?V:null}A&&(d=A.closest('[data-slate-node="text"]'),I=A,a==="forward"?p=0:(p=I.textContent.length,I.querySelectorAll("[data-slate-zero-width]").forEach(tt=>{p-=tt.textContent.length})))}I&&p===I.textContent.length&&Eo&&I.getAttribute("data-slate-zero-width")==="z"&&(m=I.textContent)!==null&&m!==void 0&&m.startsWith("\uFEFF")&&(h.hasAttribute("data-slate-zero-width")||cg&&(w=I.textContent)!==null&&w!==void 0&&w.endsWith(`

`))&&p--}if(Eo&&!d&&!r){var _=h.hasAttribute("data-slate-node")?h:h.closest("[data-slate-node]");if(_&&qe.hasDOMNode(e,_,{editable:!0})){var N=qe.toSlateNode(e,_),{path:$,offset:Q}=j.start(e,qe.findPath(e,N));return _.querySelector("[data-slate-leaf]")||(Q=c),{path:$,offset:Q}}}if(!d){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(n))}var F=qe.toSlateNode(e,d),J=qe.findPath(e,F);return{path:J,offset:p}},toSlateRange:(e,n,i)=>{var r,{exactMatch:o,suppressThrow:a}=i,l=fS(n)?n.anchorNode:n.startContainer,c,h,d,p,m;if(l)if(fS(n)){if(cg&&n.rangeCount>1){d=n.focusNode;var w=n.getRangeAt(0),x=n.getRangeAt(n.rangeCount-1);if(d instanceof HTMLTableRowElement&&w.startContainer instanceof HTMLTableRowElement&&x.startContainer instanceof HTMLTableRowElement){let W=function(U){return U.childElementCount>0?W(U.children[0]):U};var T=w.startContainer,D=x.startContainer,b=W(T.children[w.startOffset]),B=W(D.children[x.startOffset]);p=0,B.childNodes.length>0?c=B.childNodes[0]:c=B,b.childNodes.length>0?d=b.childNodes[0]:d=b,B instanceof HTMLElement?h=B.innerHTML.length:h=0}else w.startContainer===d?(c=x.endContainer,h=x.endOffset,p=w.startOffset):(c=w.startContainer,h=w.endOffset,p=x.startOffset)}else c=n.anchorNode,h=n.anchorOffset,d=n.focusNode,p=n.focusOffset;mB&&hH(c)||cg?m=n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset:m=n.isCollapsed}else c=n.startContainer,h=n.startOffset,d=n.endContainer,p=n.endOffset,m=n.collapsed;if(c==null||d==null||h==null||p==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(n));cg&&(r=d.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&p===d.textContent.length&&p--;var A=qe.toSlatePoint(e,[c,h],{exactMatch:o,suppressThrow:a});if(!A)return null;var I=q5(c,d)||c===d&&p<h,R=m?A:qe.toSlatePoint(e,[d,p],{exactMatch:o,suppressThrow:a,searchDirection:I?"forward":"backward"});if(!R)return null;var k={anchor:A,focus:R};return _t.isExpanded(k)&&_t.isForward(k)&&Vs(d)&&j.void(e,{at:k.focus,mode:"highest"})&&(k=j.unhangRange(e,k,{voids:!0})),k}};function BH(e,n){var{path:i,diff:r}=n;if(!j.hasPath(e,i))return!1;var o=te.get(e,i);if(!se.isText(o))return!1;if(r.start!==o.text.length||r.text.length===0)return o.text.slice(r.start,r.start+r.text.length)===r.text;var a=ut.next(i);if(!j.hasPath(e,a))return!1;var l=te.get(e,a);return se.isText(l)&&l.text.startsWith(r.text)}function CB(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((o,a)=>o.slice(0,a.start)+a.text+o.slice(a.end),e)}function PH(e,n){for(var i=Math.min(e.length,n.length),r=0;r<i;r++)if(e.charAt(r)!==n.charAt(r))return r;return i}function MH(e,n,i){for(var r=Math.min(e.length,n.length,i),o=0;o<r;o++)if(e.charAt(e.length-o-1)!==n.charAt(n.length-o-1))return o;return r}function EB(e,n){var{start:i,end:r,text:o}=n,a=e.slice(i,r),l=PH(a,o),c=Math.min(a.length-l,o.length-l),h=MH(a,o,c),d={start:i+l,end:r-h,text:o.slice(l,o.length-h)};return d.start===d.end&&d.text.length===0?null:d}function RH(e,n,i){var r=Math.min(n.start,i.start),o=Math.max(0,Math.min(n.start+n.text.length,i.end)-i.start),a=CB(e,n,i),l=Math.max(i.start+i.text.length,n.start+n.text.length+(n.start+n.text.length>i.start?i.text.length:0)-o),c=a.slice(r,l),h=Math.max(n.end,i.end-n.text.length+(n.end-n.start));return EB(e,{start:r,end:h,text:c})}function OH(e){var{path:n,diff:i}=e;return{anchor:{path:n,offset:i.start},focus:{path:n,offset:i.end}}}function pS(e,n){var{path:i,offset:r}=n;if(!j.hasPath(e,i))return null;var o=te.get(e,i);if(!se.isText(o))return null;var a=j.above(e,{match:c=>fe.isElement(c)&&j.isBlock(e,c),at:i});if(!a)return null;for(;r>o.text.length;){var l=j.next(e,{at:i,match:se.isText});if(!l||!ut.isDescendant(l[1],a[1]))return null;r-=o.text.length,o=l[0],i=l[1]}return{path:i,offset:r}}function K5(e,n){var i=pS(e,n.anchor);if(!i)return null;if(_t.isCollapsed(n))return{anchor:i,focus:i};var r=pS(e,n.focus);return r?{anchor:i,focus:r}:null}function mS(e,n,i){var r=$o.get(e),o=r==null?void 0:r.find(p=>{var{path:m}=p;return ut.equals(m,n.path)});if(!o||n.offset<=o.diff.start)return Sn.transform(n,i,{affinity:"backward"});var{diff:a}=o;if(n.offset<=a.start+a.text.length){var l={path:n.path,offset:a.start},c=Sn.transform(l,i,{affinity:"backward"});return c?{path:c.path,offset:c.offset+n.offset-a.start}:null}var h={path:n.path,offset:n.offset-a.text.length+a.end-a.start},d=Sn.transform(h,i,{affinity:"backward"});return d?i.type==="split_node"&&ut.equals(i.path,n.path)&&h.offset<i.position&&a.start<i.position?d:{path:d.path,offset:d.offset+a.text.length-a.end+a.start}:null}function Z5(e,n,i){var r=mS(e,n.anchor,i);if(!r)return null;if(_t.isCollapsed(n))return{anchor:r,focus:r};var o=mS(e,n.focus,i);return o?{anchor:r,focus:o}:null}function LH(e,n){var{path:i,diff:r,id:o}=e;switch(n.type){case"insert_text":return!ut.equals(n.path,i)||n.offset>=r.end?e:n.offset<=r.start?{diff:{start:n.text.length+r.start,end:n.text.length+r.end,text:r.text},id:o,path:i}:{diff:{start:r.start,end:r.end+n.text.length,text:r.text},id:o,path:i};case"remove_text":return!ut.equals(n.path,i)||n.offset>=r.end?e:n.offset+n.text.length<=r.start?{diff:{start:r.start-n.text.length,end:r.end-n.text.length,text:r.text},id:o,path:i}:{diff:{start:r.start,end:r.end-n.text.length,text:r.text},id:o,path:i};case"split_node":return!ut.equals(n.path,i)||n.position>=r.end?{diff:r,id:o,path:ut.transform(i,n,{affinity:"backward"})}:n.position>r.start?{diff:{start:r.start,end:Math.min(n.position,r.end),text:r.text},id:o,path:i}:{diff:{start:r.start-n.position,end:r.end-n.position,text:r.text},id:o,path:ut.transform(i,n,{affinity:"forward"})};case"merge_node":return ut.equals(n.path,i)?{diff:{start:r.start+n.position,end:r.end+n.position,text:r.text},id:o,path:ut.transform(i,n)}:{diff:r,id:o,path:ut.transform(i,n)}}var a=ut.transform(i,n);return a?{diff:r,path:a,id:o}:null}var Q5=(e,n)=>{var i=(n.top+n.bottom)/2;return e.top<=i&&e.bottom>=i},J5=(e,n,i)=>{var r=qe.toDOMRange(e,n).getBoundingClientRect(),o=qe.toDOMRange(e,i).getBoundingClientRect();return Q5(r,o)&&Q5(o,r)},_H=(e,n)=>{var i=j.range(e,_t.end(n)),r=Array.from(j.positions(e,{at:n})),o=0,a=r.length,l=Math.floor(a/2);if(J5(e,j.range(e,r[o]),i))return j.range(e,r[o],i);if(r.length<2)return j.range(e,r[r.length-1],i);for(;l!==r.length&&l!==o;)J5(e,j.range(e,r[l]),i)?a=l:o=l,l=Math.floor((o+a)/2);return j.range(e,r[o],i)};function t7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function e7(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?t7(Object(i),!0).forEach(function(r){GT(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var FH=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=n,{apply:o,onChange:a,deleteBackward:l,addMark:c,removeMark:h}=r;return jx.set(r,new WeakMap),r.addMark=(d,p)=>{var m,w;(m=zT.get(r))===null||m===void 0||m(),!ba.get(r)&&(w=$o.get(r))!==null&&w!==void 0&&w.length&&ba.set(r,null),mu.delete(r),c(d,p)},r.removeMark=d=>{var p;!ba.get(r)&&(p=$o.get(r))!==null&&p!==void 0&&p.length&&ba.set(r,null),mu.delete(r),h(d)},r.deleteBackward=d=>{if(d!=="line")return l(d);if(r.selection&&_t.isCollapsed(r.selection)){var p=j.above(r,{match:T=>fe.isElement(T)&&j.isBlock(r,T),at:r.selection});if(p){var[,m]=p,w=j.range(r,m,r.selection.anchor),x=_H(r,w);_t.isCollapsed(x)||jt.delete(r,{at:x})}}},r.apply=d=>{var p=[],m=[],w=$o.get(r);if(w!=null&&w.length){var x=w.map(wt=>LH(wt,d)).filter(Boolean);$o.set(r,x)}var T=$c.get(r);T&&$c.set(r,Z5(r,T,d));var D=Uc.get(r);if(D!=null&&D.at){var b=Sn.isPoint(D==null?void 0:D.at)?mS(r,D.at,d):Z5(r,D.at,d);Uc.set(r,b?e7(e7({},D),{},{at:b}):null)}switch(d.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{p.push(...eg(r,d.path));break}case"set_selection":{var B;(B=xm.get(r))===null||B===void 0||B.unref(),xm.delete(r);break}case"insert_node":case"remove_node":{p.push(...eg(r,ut.parent(d.path)));break}case"merge_node":{var A=ut.previous(d.path);p.push(...eg(r,A));break}case"move_node":{var I=ut.common(ut.parent(d.path),ut.parent(d.newPath));p.push(...eg(r,I));var R;ut.isBefore(d.path,d.newPath)?(p.push(...eg(r,ut.parent(d.path))),R=d.newPath):(p.push(...eg(r,ut.parent(d.newPath))),R=d.path);var k=te.get(n,ut.parent(R)),W=qe.findKey(r,k),U=j.pathRef(r,ut.parent(R));m.push([U,W]);break}}switch(o(d),d.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":yg.set(r,!0)}for(var[nt,st]of p){var[ft]=j.node(r,nt);qw.set(ft,st)}for(var[Et,ct]of m){if(Et.current){var[mt]=j.node(r,Et.current);qw.set(mt,ct)}Et.unref()}},r.setFragmentData=d=>{var{selection:p}=r;if(p){var[m,w]=_t.edges(p),x=j.void(r,{at:m.path}),T=j.void(r,{at:w.path});if(!(_t.isCollapsed(p)&&!x)){var D=qe.toDOMRange(r,p),b=D.cloneContents(),B=b.childNodes[0];if(b.childNodes.forEach(ft=>{ft.textContent&&ft.textContent.trim()!==""&&(B=ft)}),T){var[A]=T,I=D.cloneRange(),R=qe.toDOMNode(r,A);I.setEndAfter(R),b=I.cloneContents()}if(x&&(B=b.querySelector("[data-slate-spacer]")),Array.from(b.querySelectorAll("[data-slate-zero-width]")).forEach(ft=>{var Et=ft.getAttribute("data-slate-zero-width")==="n";ft.textContent=Et?`
`:""}),dB(B)){var k=B.ownerDocument.createElement("span");k.style.whiteSpace="pre",k.appendChild(B),b.appendChild(k),B=k}var W=r.getFragment(),U=JSON.stringify(W),nt=window.btoa(encodeURIComponent(U));B.setAttribute("data-slate-fragment",nt),d.setData("application/".concat(i),nt);var st=b.ownerDocument.createElement("div");return st.appendChild(b),st.setAttribute("hidden","true"),b.ownerDocument.body.appendChild(st),d.setData("text/html",st.innerHTML),d.setData("text/plain",pB(st)),b.ownerDocument.body.removeChild(st),d}}},r.insertData=d=>{r.insertFragmentData(d)||r.insertTextData(d)},r.insertFragmentData=d=>{var p=d.getData("application/".concat(i))||pH(d);if(p){var m=decodeURIComponent(window.atob(p)),w=JSON.parse(m);return r.insertFragment(w),!0}return!1},r.insertTextData=d=>{var p=d.getData("text/plain");if(p){var m=p.split(/\r\n|\r|\n/),w=!1;for(var x of m)w&&jt.splitNodes(r,{always:!0}),r.insertText(x),w=!0;return!0}return!1},r.onChange=d=>{var p=gS.get(r);p&&p(d),a(d)},r},eg=(e,n)=>{var i=[];for(var[r,o]of j.levels(e,{at:n})){var a=qe.findKey(e,r);i.push([o,a])}return i},kH=3,IH={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},HH={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},NH={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},wi=e=>{var n=IH[e],i=HH[e],r=NH[e],o=n&&ln.isHotkey(n),a=i&&ln.isHotkey(i),l=r&&ln.isHotkey(r);return c=>!!(o&&o(c)||Y5&&a&&a(c)||!Y5&&l&&l(c))},bi={isBold:wi("bold"),isCompose:wi("compose"),isMoveBackward:wi("moveBackward"),isMoveForward:wi("moveForward"),isDeleteBackward:wi("deleteBackward"),isDeleteForward:wi("deleteForward"),isDeleteLineBackward:wi("deleteLineBackward"),isDeleteLineForward:wi("deleteLineForward"),isDeleteWordBackward:wi("deleteWordBackward"),isDeleteWordForward:wi("deleteWordForward"),isExtendBackward:wi("extendBackward"),isExtendForward:wi("extendForward"),isExtendLineBackward:wi("extendLineBackward"),isExtendLineForward:wi("extendLineForward"),isItalic:wi("italic"),isMoveLineBackward:wi("moveLineBackward"),isMoveLineForward:wi("moveLineForward"),isMoveWordBackward:wi("moveWordBackward"),isMoveWordForward:wi("moveWordForward"),isRedo:wi("redo"),isSoftBreak:wi("insertSoftBreak"),isSplitBlock:wi("splitBlock"),isTransposeCharacter:wi("transposeCharacter"),isUndo:wi("undo")};function GH(e,n){if(e==null)return{};var i={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(i[o]=e[o]);return i}function n7(e,n){if(e==null)return{};var i=GH(e,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var zH=["anchor","focus"],jH=["anchor","focus"];function i7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function r7(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?i7(Object(i),!0).forEach(function(r){GT(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):i7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var UH=(e,n)=>Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every(i=>n.hasOwnProperty(i)&&e[i]===n[i]),SB=(e,n)=>{var i=n7(e,zH),r=n7(n,jH);return e[Bg]===n[Bg]&&UH(i,r)},jT=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var i=0;i<e.length;i++){var r=e[i],o=n[i];if(!_t.equals(r,o)||!SB(r,o))return!1}return!0},TB=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var i=0;i<e.length;i++){var r=e[i],o=n[i];if(r.anchor.offset!==o.anchor.offset||r.focus.offset!==o.focus.offset||!SB(r,o))return!1}return!0},$H=(e,n,i)=>{var r=Array.from(n.children,()=>[]);if(i.length===0)return r;var o=qe.findPath(e,n),a=o.length,l=j.range(e,o),c=new Array(n.children.length),h=I=>{var R=c[I];if(R)return R;var k=j.range(e,[...o,I]);return c[I]=k,k};for(var d of i){var p=_t.intersection(l,d);if(p)for(var[m,w]=_t.edges(p),x=m.path[a],T=w.path[a],D=x;D<=T;D++){var b=r[D];if(b){var B=h(D),A=_t.intersection(B,d);A&&b.push(r7(r7({},d),A))}}}return r},Yh=[],VH=function(){return Yh.some(function(e){return e.activeTargets.length>0})},WH=function(){return Yh.some(function(e){return e.skippedTargets.length>0})},o7="ResizeObserver loop completed with undelivered notifications.",XH=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:o7}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=o7),window.dispatchEvent(e)},Hm;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Hm||(Hm={}));var Kh=function(e){return Object.freeze(e)},qH=function(){function e(n,i){this.inlineSize=n,this.blockSize=i,Kh(this)}return e}(),AB=function(){function e(n,i,r,o){return this.x=n,this.y=i,this.width=r,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Kh(this)}return e.prototype.toJSON=function(){var n=this,i=n.x,r=n.y,o=n.top,a=n.right,l=n.bottom,c=n.left,h=n.width,d=n.height;return{x:i,y:r,top:o,right:a,bottom:l,left:c,width:h,height:d}},e.fromRect=function(n){return new e(n.x,n.y,n.width,n.height)},e}(),UT=function(e){return e instanceof SVGElement&&"getBBox"in e},DB=function(e){if(UT(e)){var n=e.getBBox(),i=n.width,r=n.height;return!i&&!r}var o=e,a=o.offsetWidth,l=o.offsetHeight;return!(a||l||e.getClientRects().length)},s7=function(e){var n;if(e instanceof Element)return!0;var i=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(i&&e instanceof i.Element)},YH=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Cm=typeof window<"u"?window:{},W2=new WeakMap,a7=/auto|scroll/,KH=/^tb|vertical/,ZH=/msie|trident/i.test(Cm.navigator&&Cm.navigator.userAgent),vl=function(e){return parseFloat(e||"0")},wg=function(e,n,i){return e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=!1),new qH((i?n:e)||0,(i?e:n)||0)},l7=Kh({devicePixelContentBoxSize:wg(),borderBoxSize:wg(),contentBoxSize:wg(),contentRect:new AB(0,0,0,0)}),bB=function(e,n){if(n===void 0&&(n=!1),W2.has(e)&&!n)return W2.get(e);if(DB(e))return W2.set(e,l7),l7;var i=getComputedStyle(e),r=UT(e)&&e.ownerSVGElement&&e.getBBox(),o=!ZH&&i.boxSizing==="border-box",a=KH.test(i.writingMode||""),l=!r&&a7.test(i.overflowY||""),c=!r&&a7.test(i.overflowX||""),h=r?0:vl(i.paddingTop),d=r?0:vl(i.paddingRight),p=r?0:vl(i.paddingBottom),m=r?0:vl(i.paddingLeft),w=r?0:vl(i.borderTopWidth),x=r?0:vl(i.borderRightWidth),T=r?0:vl(i.borderBottomWidth),D=r?0:vl(i.borderLeftWidth),b=m+d,B=h+p,A=D+x,I=w+T,R=c?e.offsetHeight-I-e.clientHeight:0,k=l?e.offsetWidth-A-e.clientWidth:0,W=o?b+A:0,U=o?B+I:0,nt=r?r.width:vl(i.width)-W-k,st=r?r.height:vl(i.height)-U-R,ft=nt+b+k+A,Et=st+B+R+I,ct=Kh({devicePixelContentBoxSize:wg(Math.round(nt*devicePixelRatio),Math.round(st*devicePixelRatio),a),borderBoxSize:wg(ft,Et,a),contentBoxSize:wg(nt,st,a),contentRect:new AB(m,h,nt,st)});return W2.set(e,ct),ct},BB=function(e,n,i){var r=bB(e,i),o=r.borderBoxSize,a=r.contentBoxSize,l=r.devicePixelContentBoxSize;switch(n){case Hm.DEVICE_PIXEL_CONTENT_BOX:return l;case Hm.BORDER_BOX:return o;default:return a}},QH=function(){function e(n){var i=bB(n);this.target=n,this.contentRect=i.contentRect,this.borderBoxSize=Kh([i.borderBoxSize]),this.contentBoxSize=Kh([i.contentBoxSize]),this.devicePixelContentBoxSize=Kh([i.devicePixelContentBoxSize])}return e}(),PB=function(e){if(DB(e))return 1/0;for(var n=0,i=e.parentNode;i;)n+=1,i=i.parentNode;return n},JH=function(){var e=1/0,n=[];Yh.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(d){var p=new QH(d.target),m=PB(d.target);c.push(p),d.lastReportedSize=BB(d.target,d.observedBox),m<e&&(e=m)}),n.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var i=0,r=n;i<r.length;i++){var o=r[i];o()}return e},u7=function(e){Yh.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(o){o.isActive()&&(PB(o.target)>e?i.activeTargets.push(o):i.skippedTargets.push(o))})})},tN=function(){var e=0;for(u7(e);VH();)e=JH(),u7(e);return WH()&&XH(),e>0},ZE,MB=[],eN=function(){return MB.splice(0).forEach(function(e){return e()})},nN=function(e){if(!ZE){var n=0,i=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return eN()}).observe(i,r),ZE=function(){i.textContent="".concat(n?n--:n++)}}MB.push(e),ZE()},iN=function(e){nN(function(){requestAnimationFrame(e)})},Cw=0,rN=function(){return!!Cw},oN=250,sN={attributes:!0,characterData:!0,childList:!0,subtree:!0},c7=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],f7=function(e){return e===void 0&&(e=0),Date.now()+e},QE=!1,aN=function(){function e(){var n=this;this.stopped=!0,this.listener=function(){return n.schedule()}}return e.prototype.run=function(n){var i=this;if(n===void 0&&(n=oN),!QE){QE=!0;var r=f7(n);iN(function(){var o=!1;try{o=tN()}finally{if(QE=!1,n=r-f7(),!rN())return;o?i.run(1e3):n>0?i.run(n):i.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var n=this,i=function(){return n.observer&&n.observer.observe(document.body,sN)};document.body?i():Cm.addEventListener("DOMContentLoaded",i)},e.prototype.start=function(){var n=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),c7.forEach(function(i){return Cm.addEventListener(i,n.listener,!0)}))},e.prototype.stop=function(){var n=this;this.stopped||(this.observer&&this.observer.disconnect(),c7.forEach(function(i){return Cm.removeEventListener(i,n.listener,!0)}),this.stopped=!0)},e}(),vS=new aN,h7=function(e){!Cw&&e>0&&vS.start(),Cw+=e,!Cw&&vS.stop()},lN=function(e){return!UT(e)&&!YH(e)&&getComputedStyle(e).display==="inline"},uN=function(){function e(n,i){this.target=n,this.observedBox=i||Hm.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var n=BB(this.target,this.observedBox,!0);return lN(this.target)&&(this.lastReportedSize=n),this.lastReportedSize.inlineSize!==n.inlineSize||this.lastReportedSize.blockSize!==n.blockSize},e}(),cN=function(){function e(n,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=n,this.callback=i}return e}(),X2=new WeakMap,d7=function(e,n){for(var i=0;i<e.length;i+=1)if(e[i].target===n)return i;return-1},q2=function(){function e(){}return e.connect=function(n,i){var r=new cN(n,i);X2.set(n,r)},e.observe=function(n,i,r){var o=X2.get(n),a=o.observationTargets.length===0;d7(o.observationTargets,i)<0&&(a&&Yh.push(o),o.observationTargets.push(new uN(i,r&&r.box)),h7(1),vS.schedule())},e.unobserve=function(n,i){var r=X2.get(n),o=d7(r.observationTargets,i),a=r.observationTargets.length===1;o>=0&&(a&&Yh.splice(Yh.indexOf(r),1),r.observationTargets.splice(o,1),h7(-1))},e.disconnect=function(n){var i=this,r=X2.get(n);r.observationTargets.slice().forEach(function(o){return i.unobserve(n,o.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),fN=function(){function e(n){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof n!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");q2.connect(this,n)}return e.prototype.observe=function(n,i){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!s7(n))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");q2.observe(this,n,i)},e.prototype.unobserve=function(n){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!s7(n))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");q2.unobserve(this,n)},e.prototype.disconnect=function(){q2.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),$T=z8();const hN=hf($T);function dN(e,n){if(e==null)return{};var i={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(i[o]=e[o]);return i}function Yw(e,n){if(e==null)return{};var i=dN(e,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nm(e)}function gN(e,n){if(Nm(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,n);if(Nm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function pN(e){var n=gN(e,"string");return Nm(n)==="symbol"?n:String(n)}function xi(e,n,i){return n=pN(n),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var VT=Y.createContext(null),_l=()=>{var e=Y.useContext(VT);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Kt=qe;function g7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function Y2(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?g7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var mN=25,vN=200,yN=function(){},wN=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function xN(e){var{editor:n,scheduleOnDOMSelectionChange:i,onDOMSelectionChange:r}=e,o=!1,a=null,l=null,c=null,h=0,d=!1,p=()=>{var ct=$c.get(n);if($c.delete(n),ct){var{selection:mt}=n,wt=K5(n,ct);wt&&(!mt||!_t.equals(wt,mt))&&jt.select(n,wt)}},m=()=>{var ct=Uc.get(n);if(Uc.delete(n),!!ct){if(ct.at){var mt=Sn.isPoint(ct.at)?pS(n,ct.at):K5(n,ct.at);if(!mt)return;var wt=j.range(n,mt);(!n.selection||!_t.equals(n.selection,wt))&&jt.select(n,mt)}ct.run()}},w=()=>{if(l&&(clearTimeout(l),l=null),c&&(clearTimeout(c),c=null),!R()&&!I()){p();return}o||(o=!0,setTimeout(()=>o=!1)),I()&&(o="action");var ct=n.selection&&j.rangeRef(n,n.selection,{affinity:"forward"});mu.set(n,n.marks),yN("flush",Uc.get(n),$o.get(n));for(var mt=R(),wt;wt=(V=$o.get(n))===null||V===void 0?void 0:V[0];){var V,P,_=ba.get(n);_!==void 0&&(ba.delete(n),n.marks=_),_&&d===!1&&(d=null);var N=OH(wt);(!n.selection||!_t.equals(n.selection,N))&&jt.select(n,N),wt.diff.text?j.insertText(n,wt.diff.text):j.deleteFragment(n),$o.set(n,(P=$o.get(n))===null||P===void 0?void 0:P.filter(F=>{var{id:J}=F;return J!==wt.id})),BH(n,wt)||(mt=!1,Uc.delete(n),mu.delete(n),o="action",$c.delete(n),i.cancel(),r.cancel(),ct==null||ct.unref())}var $=ct==null?void 0:ct.unref();if($&&!$c.get(n)&&(!n.selection||!_t.equals($,n.selection))&&jt.select(n,$),I()){m();return}mt&&i(),i.flush(),r.flush(),p();var Q=mu.get(n);mu.delete(n),Q!==void 0&&(n.marks=Q,n.onChange())},x=ct=>{a&&clearTimeout(a),a=setTimeout(()=>{Uh.set(n,!1),w()},mN)},T=ct=>{Uh.set(n,!0),a&&(clearTimeout(a),a=null)},D=function(){var mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,wt=hS.get(n);if(wt){if(R()||mt){wt.style.display="none";return}wt.style.removeProperty("display")}},b=(ct,mt)=>{var wt,V=(wt=$o.get(n))!==null&&wt!==void 0?wt:[];$o.set(n,V);var P=te.leaf(n,ct),_=V.findIndex(Q=>ut.equals(Q.path,ct));if(_<0){var N=EB(P.text,mt);N&&V.push({path:ct,diff:mt,id:h++}),D();return}var $=RH(P.text,V[_].diff,mt);if(!$){V.splice(_,1),D();return}V[_]=Y2(Y2({},V[_]),{},{diff:$})},B=function(mt){var{at:wt}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d=!1,$c.delete(n),i.cancel(),r.cancel(),I()&&w(),Uc.set(n,{at:wt,run:mt}),c=setTimeout(w)},A=ct=>{var mt;if(l&&(clearTimeout(l),l=null),!yg.get(n)){var{inputType:wt}=ct,V=null,P=ct.dataTransfer||ct.data||void 0;d!==!1&&wt!=="insertText"&&wt!=="insertCompositionText"&&(d=!1);var[_]=ct.getTargetRanges();_&&(V=Kt.toSlateRange(n,_,{exactMatch:!1,suppressThrow:!0}));var N=Kt.getWindow(n),$=N.getSelection();if(!V&&$&&(_=$,V=Kt.toSlateRange(n,$,{exactMatch:!1,suppressThrow:!0})),V=(mt=V)!==null&&mt!==void 0?mt:n.selection,!!V){var Q=!0;if(wt.startsWith("delete")){if(_t.isExpanded(V)){var[F,J]=_t.edges(V),tt=te.leaf(n,F.path);if(tt.text.length===F.offset&&J.offset===0){var it=j.next(n,{at:F.path,match:se.isText});it&&ut.equals(it[1],J.path)&&(V={anchor:J,focus:J})}}var xt=wt.endsWith("Backward")?"backward":"forward",[gt,Lt]=_t.edges(V),[$t,ot]=j.leaf(n,gt.path),Pt={text:"",start:gt.offset,end:Lt.offset},Rt=$o.get(n),It=Rt==null?void 0:Rt.find(An=>ut.equals(An.path,ot)),he=It?[It.diff,Pt]:[Pt],Nt=CB($t.text,...he);if(Nt.length===0&&(Q=!1),_t.isExpanded(V)){if(Q&&ut.equals(V.anchor.path,V.focus.path)){var ge={path:V.anchor.path,offset:gt.offset},ae=j.range(n,ge,ge);return U(ae),b(V.anchor.path,{text:"",end:Lt.offset,start:gt.offset})}return B(()=>j.deleteFragment(n,{direction:xt}),{at:V})}}switch(wt){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return B(()=>j.deleteFragment(n),{at:V});case"deleteContent":case"deleteContentForward":{var{anchor:ee}=V;if(Q&&_t.isCollapsed(V)){var xe=te.leaf(n,ee.path);if(ee.offset<xe.text.length)return b(ee.path,{text:"",start:ee.offset,end:ee.offset+1})}return B(()=>j.deleteForward(n),{at:V})}case"deleteContentBackward":{var le,{anchor:Re}=V,me=fS(_)?_.isCollapsed:!!((le=_)!==null&&le!==void 0&&le.collapsed);return Q&&me&&_t.isCollapsed(V)&&Re.offset>0?b(Re.path,{text:"",start:Re.offset-1,end:Re.offset}):B(()=>j.deleteBackward(n),{at:V})}case"deleteEntireSoftLine":return B(()=>{j.deleteBackward(n,{unit:"line"}),j.deleteForward(n,{unit:"line"})},{at:V});case"deleteHardLineBackward":return B(()=>j.deleteBackward(n,{unit:"block"}),{at:V});case"deleteSoftLineBackward":return B(()=>j.deleteBackward(n,{unit:"line"}),{at:V});case"deleteHardLineForward":return B(()=>j.deleteForward(n,{unit:"block"}),{at:V});case"deleteSoftLineForward":return B(()=>j.deleteForward(n,{unit:"line"}),{at:V});case"deleteWordBackward":return B(()=>j.deleteBackward(n,{unit:"word"}),{at:V});case"deleteWordForward":return B(()=>j.deleteForward(n,{unit:"word"}),{at:V});case"insertLineBreak":return B(()=>j.insertSoftBreak(n),{at:V});case"insertParagraph":return B(()=>j.insertBreak(n),{at:V});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(wN(P))return B(()=>Kt.insertData(n,P),{at:V});var Qe=P??"";if(ba.get(n)&&(Qe=Qe.replace("\uFEFF","")),wt==="insertText"&&/.*\n.*\n$/.test(Qe)&&(Qe=Qe.slice(0,-1)),Qe.includes(`
`))return B(()=>{var An=Qe.split(`
`);An.forEach((Wn,Zr)=>{Wn&&j.insertText(n,Wn),Zr!==An.length-1&&j.insertSoftBreak(n)})},{at:V});if(ut.equals(V.anchor.path,V.focus.path)){var[ei,Fn]=_t.edges(V),Kn={start:ei.offset,end:Fn.offset,text:Qe};if(Qe&&d&&wt==="insertCompositionText"){var Br=d.start+d.text.search(/\S|$/),ji=Kn.start+Kn.text.search(/\S|$/);ji===Br+1&&Kn.end===d.start+d.text.length?(Kn.start-=1,d=null,ft()):d=!1}else wt==="insertText"?d===null?d=Kn:d&&_t.isCollapsed(V)&&d.end+d.text.length===ei.offset?d=Y2(Y2({},d),{},{text:d.text+Qe}):d=!1:d=!1;if(Q){b(ei.path,Kn);return}}return B(()=>j.insertText(n,Qe),{at:V})}}}}},I=()=>!!Uc.get(n),R=()=>{var ct;return!!((ct=$o.get(n))!==null&&ct!==void 0&&ct.length)},k=()=>I()||R(),W=()=>o,U=ct=>{$c.set(n,ct),l&&(clearTimeout(l),l=null);var{selection:mt}=n;if(ct){var wt=!mt||!ut.equals(mt.anchor.path,ct.anchor.path),V=!mt||!ut.equals(mt.anchor.path.slice(0,-1),ct.anchor.path.slice(0,-1));(wt&&d||V)&&(d=!1),(wt||R())&&(l=setTimeout(w,vN))}},nt=()=>{(I()||!R())&&w()},st=ct=>{R()||(D(!0),setTimeout(D))},ft=()=>{I()||(c=setTimeout(w))},Et=ct=>{if(!(R()||I())&&ct.some(wt=>NT(n,wt,ct))){var mt;(mt=wB.get(n))===null||mt===void 0||mt()}};return{flush:w,scheduleFlush:ft,hasPendingDiffs:R,hasPendingAction:I,hasPendingChanges:k,isFlushing:W,handleUserSelect:U,handleCompositionEnd:x,handleCompositionStart:T,handleDOMBeforeInput:A,handleKeyDown:st,handleDomMutations:Et,handleInput:nt}}function CN(){var e=Y.useRef(!1);return Y.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var bu=ww?Y.useLayoutEffect:Y.useEffect;function EN(e,n,i){var[r]=Y.useState(()=>new MutationObserver(n));bu(()=>{r.takeRecords()}),Y.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,i),()=>r.disconnect()},[r,e,i])}var SN=["node"];function p7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function TN(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?p7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var AN={subtree:!0,childList:!0,characterData:!0},DN=Eo?e=>{var{node:n}=e,i=Yw(e,SN);if(!Eo)return null;var r=_l(),o=CN(),[a]=Y.useState(()=>xN(TN({editor:r},i)));return EN(n,a.handleDomMutations,AN),zT.set(r,a.scheduleFlush),o&&a.flush(),a}:()=>null;function m7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function bN(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?m7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var BN=e=>{var{isLast:n,leaf:i,parent:r,text:o}=e,a=_l(),l=Kt.findPath(a,o),c=ut.parent(l),h=!!i[xB];return a.isVoid(r)?Ae.createElement(JE,{length:te.string(r).length}):i.text===""&&r.children[r.children.length-1]===o&&!a.isInline(r)&&j.string(a,c)===""?Ae.createElement(JE,{isLineBreak:!0,isMarkPlaceholder:h}):i.text===""?Ae.createElement(JE,{isMarkPlaceholder:h}):n&&i.text.slice(-1)===`
`?Ae.createElement(v7,{isTrailing:!0,text:i.text}):Ae.createElement(v7,{text:i.text})},v7=e=>{var{text:n,isTrailing:i=!1}=e,r=Y.useRef(null),o=()=>"".concat(n??"").concat(i?`
`:""),[a]=Y.useState(o);return bu(()=>{var l=o();r.current&&r.current.textContent!==l&&(r.current.textContent=l)}),Ae.createElement(PN,{ref:r},a)},PN=Y.memo(Y.forwardRef((e,n)=>Ae.createElement("span",{"data-slate-string":!0,ref:n},e.children))),JE=e=>{var{length:n=0,isLineBreak:i=!1,isMarkPlaceholder:r=!1}=e,o={"data-slate-zero-width":i?"n":"z","data-slate-length":n};return r&&(o["data-slate-mark-placeholder"]=!0),Ae.createElement("span",bN({},o),!Eo||!i?"\uFEFF":null,i?Ae.createElement("br",null):null)};function y7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function RB(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?y7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var MN=Eo?300:0;function RN(e,n){e.current&&(e.current.disconnect(),n&&(e.current=null))}function w7(e){e.current&&(clearTimeout(e.current),e.current=null)}var ON=e=>Ae.createElement(FN,RB({},e)),LN=e=>{var{leaf:n,isLast:i,text:r,parent:o,renderPlaceholder:a,renderLeaf:l=ON,leafPosition:c}=e,h=_l(),d=Y.useRef(null),p=Y.useRef(null),[m,w]=Y.useState(!1),x=Y.useRef(null),T=Y.useCallback(I=>{if(RN(d,I==null),I==null){var R;hS.delete(h),(R=n.onPlaceholderResize)===null||R===void 0||R.call(n,null)}else{if(hS.set(h,I),!d.current){var k=window.ResizeObserver||fN;d.current=new k(()=>{var W;(W=n.onPlaceholderResize)===null||W===void 0||W.call(n,I)})}d.current.observe(I),p.current=I}},[p,n,h]),D=Ae.createElement(BN,{isLast:i,leaf:n,parent:o,text:r}),b=!!n[Bg];if(Y.useEffect(()=>(b?x.current||(x.current=setTimeout(()=>{w(!0),x.current=null},MN)):(w7(x),w(!1)),()=>w7(x)),[b,w]),b&&m){var B={children:n.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Nh?"inherit":void 0},contentEditable:!1,ref:T}};D=Ae.createElement(Ae.Fragment,null,D,a(B))}var A={"data-slate-leaf":!0};return l({attributes:A,children:D,leaf:n,text:r,leafPosition:c})},_N=Ae.memo(LN,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&se.equals(n.leaf,e.leaf)&&n.leaf[Bg]===e.leaf[Bg]),FN=e=>{var{attributes:n,children:i}=e;return Ae.createElement("span",RB({},n),i)};function kN(e,n){var[,i]=Y.useReducer(d=>d+1,0),r=Y.useRef(),o=Y.useRef(()=>null),a=Y.useRef(null),l;try{if(e!==o.current||r.current){var c=e();n(a.current,c)?l=a.current:l=c}else l=a.current}catch(d){throw r.current&&IN(d)&&(d.message+=`
The error may be correlated with this previous error:
`.concat(r.current.stack,`

`)),d}o.current=e,a.current=l,r.current=void 0;var h=Y.useCallback(()=>{try{var d=o.current();if(n(a.current,d))return;a.current=d}catch(p){p instanceof Error?r.current=p:r.current=new Error(String(p))}i()},[]);return[l,h]}function IN(e){return e instanceof Error}var OB=Y.createContext({}),LB=(e,n)=>{var i=_l(),{decorate:r,addEventListener:o}=Y.useContext(OB),a=()=>{var d=Kt.findPath(i,e);return r([e,d])},l=se.isText(e)?TB:jT,[c,h]=kN(a,l);return bu(()=>{var d=o(h);return h(),d},[o,h]),Y.useMemo(()=>[...c,...n],[c,n])},HN=e=>{var n=Y.useRef(new Set),i=Y.useRef(e);bu(()=>{i.current=e,n.current.forEach(a=>a())},[e]);var r=Y.useCallback(a=>i.current(a),[]),o=Y.useCallback(a=>(n.current.add(a),()=>{n.current.delete(a)}),[]);return Y.useMemo(()=>({decorate:r,addEventListener:o}),[r,o])};function x7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function _B(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?x7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var NN=e=>Ae.createElement(zN,_B({},e)),GN=e=>{for(var{decorations:n,isLast:i,parent:r,renderPlaceholder:o,renderLeaf:a,renderText:l=NN,text:c}=e,h=_l(),d=Y.useRef(null),p=LB(c,n),m=se.decorations(c,p),w=Kt.findKey(h,c),x=[],T=0;T<m.length;T++){var{leaf:D,position:b}=m[T];x.push(Ae.createElement(_N,{isLast:i&&T===m.length-1,key:"".concat(w.id,"-").concat(T),renderPlaceholder:o,leaf:D,leafPosition:b,text:c,parent:r,renderLeaf:a}))}var B=Y.useCallback(I=>{var R=jx.get(h);I?(R==null||R.set(w,I),qh.set(c,I),Im.set(I,c)):(R==null||R.delete(w),qh.delete(c),d.current&&Im.delete(d.current)),d.current=I},[d,h,w,c]),A={"data-slate-node":"text",ref:B};return l({text:c,children:x,attributes:A})},FB=Ae.memo(GN,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderText===e.renderText&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&TB(n.decorations,e.decorations)),zN=e=>{var{attributes:n,children:i}=e;return Ae.createElement("span",_B({},n),i)};function C7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function yS(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?C7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var jN=e=>Ae.createElement(VN,yS({},e)),UN=e=>{var{decorations:n,element:i,renderElement:r=jN,renderChunk:o,renderPlaceholder:a,renderLeaf:l,renderText:c}=e,h=_l(),d=eG(),p=h.isInline(i),m=LB(i,n),w=Kt.findKey(h,i),x=Y.useCallback(R=>{var k=jx.get(h);R?(k==null||k.set(w,R),qh.set(i,R),Im.set(R,i)):(k==null||k.delete(w),qh.delete(i))},[h,w,i]),T=HB({decorations:m,node:i,renderElement:r,renderChunk:o,renderPlaceholder:a,renderLeaf:l,renderText:c}),D={"data-slate-node":"element",ref:x};if(p&&(D["data-slate-inline"]=!0),!p&&j.hasInlines(h,i)){var b=te.string(i),B=fB(b);B==="rtl"&&(D.dir=B)}if(j.isVoid(h,i)){D["data-slate-void"]=!0,!d&&p&&(D.contentEditable=!1);var A=p?"span":"div",[[I]]=te.texts(i);T=Ae.createElement(A,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Ae.createElement(FB,{renderPlaceholder:a,decorations:[],isLast:!1,parent:i,text:I})),fg.set(I,0),wm.set(I,i)}return r({attributes:D,children:T,element:i})},$N=Ae.memo(UN,(e,n)=>e.element===n.element&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&e.renderText===n.renderText&&e.renderLeaf===n.renderLeaf&&e.renderPlaceholder===n.renderPlaceholder&&jT(e.decorations,n.decorations)),VN=e=>{var{attributes:n,children:i,element:r}=e,o=_l(),a=o.isInline(r)?"span":"div";return Ae.createElement(a,yS(yS({},n),{},{style:{position:"relative"}}),i)};class WN{constructor(n,i){var{chunkSize:r,debug:o}=i;xi(this,"root",void 0),xi(this,"chunkSize",void 0),xi(this,"debug",void 0),xi(this,"reachedEnd",void 0),xi(this,"pointerChunk",void 0),xi(this,"pointerIndex",void 0),xi(this,"pointerIndexStack",void 0),xi(this,"cachedPointerNode",void 0),this.root=n,this.chunkSize=r,this.debug=o??!1,this.pointerChunk=n,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(n){this.returnToPreviousLeaf(),this.insertAfter(n),this.readLeaf()}insertAfter(n){if(n.length!==0){for(var i=0,r=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var o=this.chunkSize-this.pointerSiblings.length,a=Math.min(o,n.length);if(a>0){var l=n.splice(0,a);this.rawInsertAfter(l,i)}this.exitChunk(),i++}if(n.length!==0){var c=this.savePointer(),h=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var d=this.chunkSize-this.pointerSiblings.length,p=Math.min(d,n.length);if(p>0){var m=n.splice(-p,p);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(m,r),h||(h=this.savePointer())}this.exitChunk(),r++}this.restorePointer(c);var w=Math.max(i,r);this.rawInsertAfter(n,w),h&&this.restorePointer(h),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var n=this.pointerChunk;n.type==="chunk";n=n.parent)this.root.modifiedChunks.add(n)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var n=this.getPointerNode();return this.cachedPointerNode=n,n}getChunkPath(n){for(var i=[],r=n;r.type==="chunk";r=r.parent){var o=r.parent.children.indexOf(r);if(o===-1)return null;i.unshift(o)}return i}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(n){if(n==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:i,node:r}=n,o=i.children.indexOf(r);if(o===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var a=this.getChunkPath(i);if(!a)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=i,this.pointerIndex=o,this.pointerIndexStack=a,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(n){var i;if(((i=this.pointerNode)===null||i===void 0?void 0:i.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=n?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(n){for(;((i=this.pointerNode)===null||i===void 0?void 0:i.type)==="chunk";){var i;this.enterChunk(n)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var n=this.pointerChunk;this.pointerChunk=n.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(n,i){if(n.length!==0){for(var r=(p,m,w)=>{if(w===1)return p;for(var x=[],T=0;T<this.chunkSize;T++){var D=p.slice(T*w,(T+1)*w);if(D.length===0)break;var b={type:"chunk",key:new vB,parent:m,children:[]};b.children=r(D,b,w/this.chunkSize),x.push(b)}return x},o=this.pointerSiblings.length+n.length,a=0,l=this.chunkSize;l<o;l*=this.chunkSize)a++;var c=Math.max(a,i),h=Math.pow(this.chunkSize,c),d=r(n,this.pointerChunk,h);this.pointerSiblings.splice(this.pointerIndex+1,0,...d),this.pointerIndex+=d.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var n=r=>{if(r.type==="chunk"){var{parent:o,children:a}=r;if(!o.children.includes(r))throw new Error("Debug: Chunk ".concat(r.key.id," has an incorrect parent property"));a.forEach(n)}};if(this.root.children.forEach(n),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var i=this.getChunkPath(this.pointerChunk);if(!i)throw new Error("Debug: The pointer chunk is not connected to the root");if(!ut.equals(this.pointerIndexStack,i))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(i.join(", "),"]"))}}}class XN{constructor(n,i){xi(this,"editor",void 0),xi(this,"children",void 0),xi(this,"cachedKeys",void 0),xi(this,"pointerIndex",void 0),this.editor=n,this.children=i,this.cachedKeys=new Array(i.length),this.pointerIndex=0}read(n){if(n===1)return[this.children[this.pointerIndex++]];var i=this.remaining(n);return this.pointerIndex+=n,i}remaining(n){return n===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+n)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(n,i){var r=this.children.indexOf(n,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var o=this.pointerIndex;o<this.children.length;o++){var a=this.children[o],l=this.findKey(a,o);if(l===i)return o-this.pointerIndex}return-1}toChunkLeaves(n,i){return n.map((r,o)=>({type:"leaf",node:r,key:this.findKey(r,i+o),index:i+o}))}findKey(n,i){var r=this.cachedKeys[i];if(r)return r;var o=Kt.findKey(this.editor,n);return this.cachedKeys[i]=o,o}}var qN=(e,n)=>{var{chunkTree:i,children:r,chunkSize:o,rerenderChildren:a=[],onInsert:l,onUpdate:c,onIndexChange:h,debug:d}=n;i.modifiedChunks.clear();for(var p=new WN(i,{chunkSize:o,debug:d}),m=new XN(e,r),w,x=function(){var B=m.lookAhead(w.node,w.key),A=B>0&&i.movedNodeKeys.has(w.key);if(B===-1||A)return p.remove(),1;var I=m.pointerIndex,R=m.read(B+1),k=R.pop();if(R.length){var W=m.toChunkLeaves(R,I);p.insertBefore(W),R.forEach((nt,st)=>{l==null||l(nt,I+st)})}var U=m.pointerIndex-1;w.node!==k&&(w.node=k,p.invalidateChunk(),c==null||c(k,U)),w.index!==U&&(w.index=U,h==null||h(k,U)),a.includes(U)&&p.invalidateChunk()};w=p.readLeaf();)x();if(!m.reachedEnd){var T=m.remaining(),D=m.toChunkLeaves(T,m.pointerIndex);p.returnToPreviousLeaf(),p.insertAfter(D),T.forEach((b,B)=>{l==null||l(b,m.pointerIndex+B)})}i.movedNodeKeys.clear()};function E7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function YN(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?E7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var S7=new WeakMap,kB=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Kt.findKey(n,i),a=S7.get(o);return a||(a={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},S7.set(o,a)),r.reconcile&&qN(n,YN({chunkTree:a,children:i.children},r.reconcile)),a},KN=e=>{var{children:n}=e;return n},IB=e=>{var{root:n,ancestor:i,renderElement:r,renderChunk:o=KN}=e;return i.children.map(a=>{if(a.type==="chunk"){var l=a.key.id,c=o({highest:i===n,lowest:a.children.some(d=>d.type==="leaf"),attributes:{"data-slate-chunk":!0},children:Ae.createElement(QN,{root:n,ancestor:a,renderElement:r,renderChunk:o})});return Ae.createElement(Y.Fragment,{key:l},c)}var h=a.node;return r(h,a.index,a.key)})},ZN=IB,QN=Ae.memo(IB,(e,n)=>e.root===n.root&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&!n.root.modifiedChunks.has(n.ancestor)),JN=Y.createContext(null),HB=e=>{var{decorations:n,node:i,renderElement:r,renderChunk:o,renderPlaceholder:a,renderText:l,renderLeaf:c}=e,h=_l();yg.set(h,!1);var d=j.isEditor(i),p=!d&&fe.isElement(i)&&!h.isInline(i),m=p&&j.hasInlines(h,i),w=m?null:h.getChunkSize(i),x=!!w,{decorationsByChild:T,childrenToRedecorate:D}=tG(h,i,n);x||i.children.forEach((I,R)=>{fg.set(I,R),wm.set(I,i)});var b=Y.useCallback((I,R,k)=>{var W=k??Kt.findKey(h,I);return Ae.createElement(JN.Provider,{key:"provider-".concat(W.id),value:I},Ae.createElement($N,{decorations:T[R],element:I,key:W.id,renderElement:r,renderChunk:o,renderPlaceholder:a,renderLeaf:c,renderText:l}))},[h,T,r,o,a,c,l]),B=(I,R)=>{var k=Kt.findKey(h,I);return Ae.createElement(FB,{decorations:T[R],key:k.id,isLast:R===i.children.length-1,parent:i,renderPlaceholder:a,renderLeaf:c,renderText:l,text:I})};if(!x)return i.children.map((I,R)=>se.isText(I)?B(I,R):b(I,R));var A=kB(h,i,{reconcile:{chunkSize:w,rerenderChildren:D,onInsert:(I,R)=>{fg.set(I,R),wm.set(I,i)},onUpdate:(I,R)=>{fg.set(I,R),wm.set(I,i)},onIndexChange:(I,R)=>{fg.set(I,R)}}});return Ae.createElement(ZN,{root:A,ancestor:A,renderElement:b,renderChunk:o})},tG=(e,n,i)=>{var r=$H(e,n,i),o=Y.useRef(r).current,a=[];o.length=r.length;for(var l=0;l<r.length;l++){var c,h=r[l],d=(c=o[l])!==null&&c!==void 0?c:null;jT(d,h)||(o[l]=h,a.push(l))}return{decorationsByChild:o,childrenToRedecorate:a}},NB=Y.createContext(!1),eG=()=>Y.useContext(NB),WT=Y.createContext({});function nG(){var e=Y.useRef(new Set),n=Y.useRef(new Set),i=Y.useCallback(()=>{e.current.forEach(l=>l())},[]),r=Y.useCallback(()=>{n.current.forEach(l=>l()),n.current.clear()},[]),o=Y.useCallback(function(l){var{deferred:c=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=c?()=>n.current.add(l):l;return e.current.add(h),()=>{e.current.delete(h)}},[]),a=Y.useMemo(()=>({addEventListener:o,flushDeferred:r}),[o,r]);return{selectorContext:a,onChange:i}}function iG(){var{flushDeferred:e}=Y.useContext(WT);bu(e)}var rG=()=>{var{addEventListener:e}=Y.useContext(WT),[,n]=Y.useReducer(i=>i+1,0);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return bu(()=>e(n),[e]),_l()};function oG(){var e=_l(),n=Y.useRef(!1),i=Y.useRef(0),r=Y.useCallback(()=>{if(!n.current){n.current=!0;var o=Kt.getWindow(e);o.cancelAnimationFrame(i.current),i.current=o.requestAnimationFrame(()=>{n.current=!1})}},[e]);return Y.useEffect(()=>()=>cancelAnimationFrame(i.current),[]),{receivedUserInput:n,onUserInput:r}}var sG=(e,n)=>{var i=[],r=()=>{i=[]},o=l=>{if(n.current){var c=l.filter(h=>NT(e,h,l));i.push(...c)}};function a(){i.length>0&&(i.reverse().forEach(l=>{l.type!=="characterData"&&(l.removedNodes.forEach(c=>{l.target.insertBefore(c,l.nextSibling)}),l.addedNodes.forEach(c=>{l.target.removeChild(c)}))}),r())}return{registerMutations:o,restoreDOM:a,clear:r}},aG={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class GB extends Y.Component{constructor(){super(...arguments),xi(this,"context",null),xi(this,"manager",null),xi(this,"mutationObserver",null)}observe(){var n,{node:i}=this.props;if(!i.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(n=this.mutationObserver)===null||n===void 0||n.observe(i.current,aG)}componentDidMount(){var{receivedUserInput:n}=this.props,i=this.context;this.manager=sG(i,n),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var n,i,r,o=(n=this.mutationObserver)===null||n===void 0?void 0:n.takeRecords();if(o!=null&&o.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(o)}return(i=this.mutationObserver)===null||i===void 0||i.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var n;(n=this.manager)===null||n===void 0||n.clear(),this.observe()}componentWillUnmount(){var n;(n=this.mutationObserver)===null||n===void 0||n.disconnect()}render(){return this.props.children}}xi(GB,"contextType",VT);var lG=Eo?GB:e=>{var{children:n}=e;return Ae.createElement(Ae.Fragment,null,n)},uG=Y.createContext(!1),cG=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],fG=["text"];function T7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function xl(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?T7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var hG=e=>Ae.createElement(Ae.Fragment,null,HB(e)),dG=Y.forwardRef((e,n)=>{var i=Y.useCallback(ot=>Ae.createElement(gG,xl({},ot)),[]),{autoFocus:r,decorate:o=pG,onDOMBeforeInput:a,placeholder:l,readOnly:c=!1,renderElement:h,renderChunk:d,renderLeaf:p,renderText:m,renderPlaceholder:w=i,scrollSelectionIntoView:x=mG,style:T={},as:D="div",disableDefaultStyles:b=!1}=e,B=Yw(e,cG),A=rG(),[I,R]=Y.useState(!1),k=Y.useRef(null),W=Y.useRef([]),[U,nt]=Y.useState(),st=Y.useRef(!1),{onUserInput:ft,receivedUserInput:Et}=oG(),[,ct]=Y.useReducer(ot=>ot+1,0);wB.set(A,ct),dS.set(A,c);var mt=Y.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);Y.useEffect(()=>{k.current&&r&&k.current.focus()},[r]);var wt=Y.useRef(),V=Y.useMemo(()=>RF(()=>{if(yg.get(A)){V();return}var ot=Kt.toDOMNode(A,A),Pt=ot.getRootNode();if(!st.current&&Nh&&Pt instanceof ShadowRoot){st.current=!0;var Rt=mH();Rt?document.execCommand("indent"):jt.deselect(A),st.current=!1;return}var It=wt.current;if((Eo||!Kt.isComposing(A))&&(!mt.isUpdatingSelection||It!=null&&It.isFlushing())&&!mt.isDraggingInternally){var he=Kt.findDocumentOrShadowRoot(A),{activeElement:Nt}=he,ge=Kt.toDOMNode(A,A),ae=ym(he);if(Nt===ge?(mt.latestElement=Nt,Xc.set(A,!0)):Xc.delete(A),!ae)return jt.deselect(A);var{anchorNode:ee,focusNode:xe}=ae,le=Kt.hasEditableTarget(A,ee)||Kt.isTargetInsideNonReadonlyVoid(A,ee),Re=Kt.hasTarget(A,xe);if(le&&Re){var me=Kt.toSlateRange(A,ae,{exactMatch:!1,suppressThrow:!0});me&&(!Kt.isComposing(A)&&!(It!=null&&It.hasPendingChanges())&&!(It!=null&&It.isFlushing())?jt.select(A,me):It==null||It.handleUserSelect(me))}c&&(!le||!Re)&&jt.deselect(A)}},100),[A,c,mt]),P=Y.useMemo(()=>bF(V,0),[V]);wt.current=DN({node:k,onDOMSelectionChange:V,scheduleOnDOMSelectionChange:P}),bu(()=>{var ot,Pt,Rt;k.current&&(Rt=HT(k.current))?(yB.set(A,Rt),xw.set(A,k.current),qh.set(A,k.current),Im.set(k.current,A)):qh.delete(A);var{selection:It}=A,he=Kt.findDocumentOrShadowRoot(A),Nt=ym(he);if(!(!Nt||!Kt.isFocused(A)||(ot=wt.current)!==null&&ot!==void 0&&ot.hasPendingAction())){var ge=le=>{var Re=Nt.type!=="None";if(!(!It&&!Re)){var me=Nt.focusNode,Qe;if(cg&&Nt.rangeCount>1){var ei=Nt.getRangeAt(0),Fn=Nt.getRangeAt(Nt.rangeCount-1);ei.startContainer===me?Qe=Fn.endContainer:Qe=ei.startContainer}else Qe=Nt.anchorNode;var Kn=xw.get(A),Br=!1;if(Kn.contains(Qe)&&Kn.contains(me)&&(Br=!0),Re&&Br&&It&&!le){var ji=Kt.toSlateRange(A,Nt,{exactMatch:!0,suppressThrow:!0});if(ji&&_t.equals(ji,It)){var An;if(!mt.hasMarkPlaceholder||(An=Qe)!==null&&An!==void 0&&(An=An.parentElement)!==null&&An!==void 0&&An.hasAttribute("data-slate-mark-placeholder"))return}}if(It&&!Kt.hasRange(A,It)){A.selection=Kt.toSlateRange(A,Nt,{exactMatch:!1,suppressThrow:!0});return}mt.isUpdatingSelection=!0;var Wn=null;try{Wn=It&&Kt.toDOMRange(A,It)}catch{}return Wn?(Kt.isComposing(A)&&!Eo?Nt.collapseToEnd():_t.isBackward(It)?Nt.setBaseAndExtent(Wn.endContainer,Wn.endOffset,Wn.startContainer,Wn.startOffset):Nt.setBaseAndExtent(Wn.startContainer,Wn.startOffset,Wn.endContainer,Wn.endOffset),x(A,Wn)):Nt.removeAllRanges(),Wn}};Nt.rangeCount<=1&&ge();var ae=((Pt=wt.current)===null||Pt===void 0?void 0:Pt.isFlushing())==="action";if(!Eo||!ae){setTimeout(()=>{mt.isUpdatingSelection=!1});return}var ee=null,xe=requestAnimationFrame(()=>{if(ae){var le=Re=>{try{var me=Kt.toDOMNode(A,A);me.focus(),ge(Re)}catch{}};le(),ee=setTimeout(()=>{le(!0),mt.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(xe),ee&&clearTimeout(ee)}}});var _=Y.useCallback(ot=>{D7(A,ot);var Pt=Kt.toDOMNode(A,A),Rt=Pt.getRootNode();if(st!=null&&st.current&&Nh&&Rt instanceof ShadowRoot){var It=ot.getTargetRanges(),he=It[0],Nt=new window.Range;Nt.setStart(he.startContainer,he.startOffset),Nt.setEnd(he.endContainer,he.endOffset);var ge=Kt.toSlateRange(A,Nt,{exactMatch:!1,suppressThrow:!1});jt.select(A,ge),ot.preventDefault(),ot.stopImmediatePropagation();return}if(ft(),!c&&Kt.hasEditableTarget(A,ot.target)&&!vG(ot,a)){var ae;if(wt.current)return wt.current.handleDOMBeforeInput(ot);P.flush(),V.flush();var{selection:ee}=A,{inputType:xe}=ot,le=ot.dataTransfer||ot.data||void 0,Re=xe==="insertCompositionText"||xe==="deleteCompositionText";if(Re&&Kt.isComposing(A))return;var me=!1;if(xe==="insertText"&&ee&&_t.isCollapsed(ee)&&ot.data&&ot.data.length===1&&/[a-z ]/i.test(ot.data)&&ee.anchor.offset!==0&&(me=!0,A.marks&&(me=!1),!yg.get(A))){var Qe,ei,{anchor:Fn}=ee,[Kn,Br]=Kt.toDOMPoint(A,Fn),ji=(Qe=Kn.parentElement)===null||Qe===void 0?void 0:Qe.closest("a"),An=Kt.getWindow(A);if(me&&ji&&Kt.hasDOMNode(A,ji)){var Wn,Zr=An==null?void 0:An.document.createTreeWalker(ji,NodeFilter.SHOW_TEXT).lastChild();Zr===Kn&&((Wn=Zr.textContent)===null||Wn===void 0?void 0:Wn.length)===Br&&(me=!1)}if(me&&Kn.parentElement&&(An==null||(ei=An.getComputedStyle(Kn.parentElement))===null||ei===void 0?void 0:ei.whiteSpace)==="pre"){var Js=j.above(A,{at:Fn.path,match:Ms=>fe.isElement(Ms)&&j.isBlock(A,Ms)});Js&&te.string(Js[0]).includes("	")&&(me=!1)}}if((!xe.startsWith("delete")||xe.startsWith("deleteBy"))&&!yg.get(A)){var[ta]=ot.getTargetRanges();if(ta){var Qr=Kt.toSlateRange(A,ta,{exactMatch:!1,suppressThrow:!1});if(!ee||!_t.equals(ee,Qr)){me=!1;var di=!Re&&A.selection&&j.rangeRef(A,A.selection);jt.select(A,Qr),di&&xm.set(A,di)}}}if(Re)return;if(me||ot.preventDefault(),ee&&_t.isExpanded(ee)&&xe.startsWith("delete")){var Pr=xe.endsWith("Backward")?"backward":"forward";j.deleteFragment(A,{direction:Pr});return}switch(xe){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{j.deleteFragment(A);break}case"deleteContent":case"deleteContentForward":{j.deleteForward(A);break}case"deleteContentBackward":{j.deleteBackward(A);break}case"deleteEntireSoftLine":{j.deleteBackward(A,{unit:"line"}),j.deleteForward(A,{unit:"line"});break}case"deleteHardLineBackward":{j.deleteBackward(A,{unit:"block"});break}case"deleteSoftLineBackward":{j.deleteBackward(A,{unit:"line"});break}case"deleteHardLineForward":{j.deleteForward(A,{unit:"block"});break}case"deleteSoftLineForward":{j.deleteForward(A,{unit:"line"});break}case"deleteWordBackward":{j.deleteBackward(A,{unit:"word"});break}case"deleteWordForward":{j.deleteForward(A,{unit:"word"});break}case"insertLineBreak":j.insertSoftBreak(A);break;case"insertParagraph":{j.insertBreak(A);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{xe==="insertFromComposition"&&Kt.isComposing(A)&&(R(!1),Uh.set(A,!1)),(le==null?void 0:le.constructor.name)==="DataTransfer"?Kt.insertData(A,le):typeof le=="string"&&(me?W.current.push(()=>j.insertText(A,le)):j.insertText(A,le));break}}var Ei=(ae=xm.get(A))===null||ae===void 0?void 0:ae.unref();xm.delete(A),Ei&&(!A.selection||!_t.equals(A.selection,Ei))&&jt.select(A,Ei)}},[A,V,ft,a,c,P]),N=Y.useCallback(ot=>{ot==null?(V.cancel(),P.cancel(),xw.delete(A),qh.delete(A),k.current&&Nc&&k.current.removeEventListener("beforeinput",_)):Nc&&ot.addEventListener("beforeinput",_),k.current=ot,typeof n=="function"?n(ot):n&&(n.current=ot)},[V,P,A,_,n]);bu(()=>{var ot=Kt.getWindow(A),Pt=It=>{var{target:he}=It,Nt=he instanceof HTMLElement?he:null,ge=Nt==null?void 0:Nt.tagName;ge==="INPUT"||ge==="TEXTAREA"||P()};ot.document.addEventListener("selectionchange",Pt);var Rt=()=>{mt.isDraggingInternally=!1};return ot.document.addEventListener("dragend",Rt),ot.document.addEventListener("drop",Rt),()=>{ot.document.removeEventListener("selectionchange",Pt),ot.document.removeEventListener("dragend",Rt),ot.document.removeEventListener("drop",Rt)}},[P,mt]);var $=o([A,[]]),Q=HN(o),F=l&&A.children.length===1&&Array.from(te.texts(A)).length===1&&te.string(A)===""&&!I,J=Y.useCallback(ot=>{if(ot&&F){var Pt;nt((Pt=ot.getBoundingClientRect())===null||Pt===void 0?void 0:Pt.height)}else nt(void 0)},[F]);if(F){var tt=j.start(A,[]);$.push({[Bg]:!0,placeholder:l,onPlaceholderResize:J,anchor:tt,focus:tt})}var{marks:it}=A;if(mt.hasMarkPlaceholder=!1,A.selection&&_t.isCollapsed(A.selection)&&it){var{anchor:xt}=A.selection,gt=te.leaf(A,xt.path),Lt=Yw(gt,fG);if(!se.equals(gt,it,{loose:!0})){mt.hasMarkPlaceholder=!0;var $t=Object.fromEntries(Object.keys(Lt).map(ot=>[ot,null]));$.push(xl(xl(xl({[xB]:!0},$t),it),{},{anchor:xt,focus:xt}))}}return Y.useEffect(()=>{setTimeout(()=>{var{selection:ot}=A;if(ot){var{anchor:Pt}=ot,Rt=te.leaf(A,Pt.path);if(it&&!se.equals(Rt,it,{loose:!0})){ba.set(A,it);return}}ba.delete(A)})}),iG(),Ae.createElement(NB.Provider,{value:c},Ae.createElement(uG.Provider,{value:I},Ae.createElement(OB.Provider,{value:Q},Ae.createElement(lG,{node:k,receivedUserInput:Et},Ae.createElement(D,xl(xl({role:c?void 0:"textbox","aria-multiline":c?void 0:!0},B),{},{spellCheck:Nc||!ww?B.spellCheck:!1,autoCorrect:Nc||!ww?B.autoCorrect:"false",autoCapitalize:Nc||!ww?B.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!c,zindex:-1,suppressContentEditableWarning:!0,ref:N,style:xl(xl({},b?{}:xl({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},U?{minHeight:U}:{})),T),onBeforeInput:Y.useCallback(ot=>{if(!Nc&&!c&&!xo(ot,B.onBeforeInput)&&Kt.hasSelectableTarget(A,ot.target)&&(ot.preventDefault(),!Kt.isComposing(A))){var Pt=ot.data;j.insertText(A,Pt)}},[B.onBeforeInput,A,c]),onInput:Y.useCallback(ot=>{if(!xo(ot,B.onInput)){if(wt.current){wt.current.handleInput();return}for(var Pt of W.current)Pt();W.current=[],Kt.isFocused(A)||D7(A,ot.nativeEvent)}},[B.onInput,A]),onBlur:Y.useCallback(ot=>{if(!(c||mt.isUpdatingSelection||!Kt.hasSelectableTarget(A,ot.target)||xo(ot,B.onBlur))){var Pt=Kt.findDocumentOrShadowRoot(A);if(mt.latestElement!==Pt.activeElement){var{relatedTarget:Rt}=ot,It=Kt.toDOMNode(A,A);if(Rt!==It&&!(Vs(Rt)&&Rt.hasAttribute("data-slate-spacer"))){if(Rt!=null&&lf(Rt)&&Kt.hasDOMNode(A,Rt)){var he=Kt.toSlateNode(A,Rt);if(fe.isElement(he)&&!A.isVoid(he))return}if(Nh){var Nt=ym(Pt);Nt==null||Nt.removeAllRanges()}Xc.delete(A)}}}},[c,mt.isUpdatingSelection,mt.latestElement,A,B.onBlur]),onClick:Y.useCallback(ot=>{if(Kt.hasTarget(A,ot.target)&&!xo(ot,B.onClick)&&lf(ot.target)){var Pt=Kt.toSlateNode(A,ot.target),Rt=Kt.findPath(A,Pt);if(!j.hasPath(A,Rt)||te.get(A,Rt)!==Pt)return;if(ot.detail===kH&&Rt.length>=1){var It=Rt;if(!(fe.isElement(Pt)&&j.isBlock(A,Pt))){var he,Nt=j.above(A,{match:me=>fe.isElement(me)&&j.isBlock(A,me),at:Rt});It=(he=Nt==null?void 0:Nt[1])!==null&&he!==void 0?he:Rt.slice(0,1)}var ge=j.range(A,It);jt.select(A,ge);return}if(c)return;var ae=j.start(A,Rt),ee=j.end(A,Rt),xe=j.void(A,{at:ae}),le=j.void(A,{at:ee});if(xe&&le&&ut.equals(xe[1],le[1])){var Re=j.range(A,ae);jt.select(A,Re)}}},[A,B.onClick,c]),onCompositionEnd:Y.useCallback(ot=>{if(Kt.hasSelectableTarget(A,ot.target)){var Pt;if(Kt.isComposing(A)&&Promise.resolve().then(()=>{R(!1),Uh.set(A,!1)}),(Pt=wt.current)===null||Pt===void 0||Pt.handleCompositionEnd(ot),xo(ot,B.onCompositionEnd)||Eo)return;if(!Nh&&!EH&&!yH&&!TH&&!SH&&ot.data){var Rt=ba.get(A);ba.delete(A),Rt!==void 0&&(mu.set(A,A.marks),A.marks=Rt),j.insertText(A,ot.data);var It=mu.get(A);mu.delete(A),It!==void 0&&(A.marks=It)}}},[B.onCompositionEnd,A]),onCompositionUpdate:Y.useCallback(ot=>{Kt.hasSelectableTarget(A,ot.target)&&!xo(ot,B.onCompositionUpdate)&&(Kt.isComposing(A)||(R(!0),Uh.set(A,!0)))},[B.onCompositionUpdate,A]),onCompositionStart:Y.useCallback(ot=>{if(Kt.hasSelectableTarget(A,ot.target)){var Pt;if((Pt=wt.current)===null||Pt===void 0||Pt.handleCompositionStart(ot),xo(ot,B.onCompositionStart)||Eo)return;R(!0);var{selection:Rt}=A;if(Rt&&_t.isExpanded(Rt)){j.deleteFragment(A);return}}},[B.onCompositionStart,A]),onCopy:Y.useCallback(ot=>{Kt.hasSelectableTarget(A,ot.target)&&!xo(ot,B.onCopy)&&!A7(ot)&&(ot.preventDefault(),Kt.setFragmentData(A,ot.clipboardData,"copy"))},[B.onCopy,A]),onCut:Y.useCallback(ot=>{if(!c&&Kt.hasSelectableTarget(A,ot.target)&&!xo(ot,B.onCut)&&!A7(ot)){ot.preventDefault(),Kt.setFragmentData(A,ot.clipboardData,"cut");var{selection:Pt}=A;if(Pt)if(_t.isExpanded(Pt))j.deleteFragment(A);else{var Rt=te.parent(A,Pt.anchor.path);j.isVoid(A,Rt)&&jt.delete(A)}}},[c,A,B.onCut]),onDragOver:Y.useCallback(ot=>{if(Kt.hasTarget(A,ot.target)&&!xo(ot,B.onDragOver)){var Pt=Kt.toSlateNode(A,ot.target);fe.isElement(Pt)&&j.isVoid(A,Pt)&&ot.preventDefault()}},[B.onDragOver,A]),onDragStart:Y.useCallback(ot=>{if(!c&&Kt.hasTarget(A,ot.target)&&!xo(ot,B.onDragStart)){var Pt=Kt.toSlateNode(A,ot.target),Rt=Kt.findPath(A,Pt),It=fe.isElement(Pt)&&j.isVoid(A,Pt)||j.void(A,{at:Rt,voids:!0});if(It){var he=j.range(A,Rt);jt.select(A,he)}mt.isDraggingInternally=!0,Kt.setFragmentData(A,ot.dataTransfer,"drag")}},[c,A,B.onDragStart,mt]),onDrop:Y.useCallback(ot=>{if(!c&&Kt.hasTarget(A,ot.target)&&!xo(ot,B.onDrop)){ot.preventDefault();var Pt=A.selection,Rt=Kt.findEventRange(A,ot),It=ot.dataTransfer;jt.select(A,Rt),mt.isDraggingInternally&&Pt&&!_t.equals(Pt,Rt)&&!j.void(A,{at:Rt,voids:!0})&&jt.delete(A,{at:Pt}),Kt.insertData(A,It),Kt.isFocused(A)||Kt.focus(A)}},[c,A,B.onDrop,mt]),onDragEnd:Y.useCallback(ot=>{!c&&mt.isDraggingInternally&&B.onDragEnd&&Kt.hasTarget(A,ot.target)&&B.onDragEnd(ot)},[c,mt,B,A]),onFocus:Y.useCallback(ot=>{if(!c&&!mt.isUpdatingSelection&&Kt.hasEditableTarget(A,ot.target)&&!xo(ot,B.onFocus)){var Pt=Kt.toDOMNode(A,A),Rt=Kt.findDocumentOrShadowRoot(A);if(mt.latestElement=Rt.activeElement,cg&&ot.target!==Pt){Pt.focus();return}Xc.set(A,!0)}},[c,mt,A,B.onFocus]),onKeyDown:Y.useCallback(ot=>{if(!c&&Kt.hasEditableTarget(A,ot.target)){var Pt;(Pt=wt.current)===null||Pt===void 0||Pt.handleKeyDown(ot);var{nativeEvent:Rt}=ot;if(Kt.isComposing(A)&&Rt.isComposing===!1&&(Uh.set(A,!1),R(!1)),xo(ot,B.onKeyDown)||Kt.isComposing(A))return;var{selection:It}=A,he=A.children[It!==null?It.focus.path[0]:0],Nt=fB(te.string(he))==="rtl";if(bi.isRedo(Rt)){ot.preventDefault();var ge=A;typeof ge.redo=="function"&&ge.redo();return}if(bi.isUndo(Rt)){ot.preventDefault();var ae=A;typeof ae.undo=="function"&&ae.undo();return}if(bi.isMoveLineBackward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line",reverse:!0});return}if(bi.isMoveLineForward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line"});return}if(bi.isExtendLineBackward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line",edge:"focus",reverse:!0});return}if(bi.isExtendLineForward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line",edge:"focus"});return}if(bi.isMoveBackward(Rt)){ot.preventDefault(),It&&_t.isCollapsed(It)?jt.move(A,{reverse:!Nt}):jt.collapse(A,{edge:Nt?"end":"start"});return}if(bi.isMoveForward(Rt)){ot.preventDefault(),It&&_t.isCollapsed(It)?jt.move(A,{reverse:Nt}):jt.collapse(A,{edge:Nt?"start":"end"});return}if(bi.isMoveWordBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)&&jt.collapse(A,{edge:"focus"}),jt.move(A,{unit:"word",reverse:!Nt});return}if(bi.isMoveWordForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)&&jt.collapse(A,{edge:"focus"}),jt.move(A,{unit:"word",reverse:Nt});return}if(Nc){if((mB||Nh)&&It&&(bi.isDeleteBackward(Rt)||bi.isDeleteForward(Rt))&&_t.isCollapsed(It)){var ee=te.parent(A,It.anchor.path);if(fe.isElement(ee)&&j.isVoid(A,ee)&&(j.isInline(A,ee)||j.isBlock(A,ee))){ot.preventDefault(),j.deleteBackward(A,{unit:"block"});return}}}else{if(bi.isBold(Rt)||bi.isItalic(Rt)||bi.isTransposeCharacter(Rt)){ot.preventDefault();return}if(bi.isSoftBreak(Rt)){ot.preventDefault(),j.insertSoftBreak(A);return}if(bi.isSplitBlock(Rt)){ot.preventDefault(),j.insertBreak(A);return}if(bi.isDeleteBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"backward"}):j.deleteBackward(A);return}if(bi.isDeleteForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"forward"}):j.deleteForward(A);return}if(bi.isDeleteLineBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"backward"}):j.deleteBackward(A,{unit:"line"});return}if(bi.isDeleteLineForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"forward"}):j.deleteForward(A,{unit:"line"});return}if(bi.isDeleteWordBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"backward"}):j.deleteBackward(A,{unit:"word"});return}if(bi.isDeleteWordForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"forward"}):j.deleteForward(A,{unit:"word"});return}}}},[c,A,B.onKeyDown]),onPaste:Y.useCallback(ot=>{!c&&Kt.hasEditableTarget(A,ot.target)&&!xo(ot,B.onPaste)&&(!Nc||cH(ot.nativeEvent)||Nh)&&(ot.preventDefault(),Kt.insertData(A,ot.clipboardData))},[c,A,B.onPaste])}),Ae.createElement(hG,{decorations:$,node:A,renderElement:h,renderChunk:d,renderPlaceholder:w,renderLeaf:p,renderText:m}))))))}),gG=e=>{var{attributes:n,children:i}=e;return Ae.createElement("span",xl({},n),i,Eo&&Ae.createElement("br",null))},pG=()=>[],mG=(e,n)=>{if(n.getBoundingClientRect&&(!e.selection||e.selection&&_t.isCollapsed(e.selection))){var i=n.startContainer.parentElement;i.getBoundingClientRect=n.getBoundingClientRect.bind(n),aH(i,{scrollMode:"if-needed"}),delete i.getBoundingClientRect}},xo=(e,n)=>{if(!n)return!1;var i=n(e);return i??(e.isDefaultPrevented()||e.isPropagationStopped())},A7=e=>lf(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),vG=(e,n)=>{if(!n)return!1;var i=n(e);return i??e.defaultPrevented},D7=(e,n)=>{var i=e;if(n.inputType==="historyUndo"&&typeof i.undo=="function"){i.undo();return}if(n.inputType==="historyRedo"&&typeof i.redo=="function"){i.redo();return}},yG=Y.createContext(!1),zB=parseInt(Ae.version.split(".")[0],10),wG=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],xG=e=>{var{editor:n,children:i,onChange:r,onSelectionChange:o,onValueChange:a,initialValue:l}=e,c=Yw(e,wG);Ae.useState(()=>{if(!te.isNodeList(l))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Wi.stringify(l)));if(!j.isEditor(n))throw new Error("[Slate] editor is invalid! You passed: ".concat(Wi.stringify(n)));n.children=l,Object.assign(n,c)});var{selectorContext:h,onChange:d}=nG(),p=Y.useCallback(x=>{var T;switch(r&&r(n.children),x==null||(T=x.operation)===null||T===void 0?void 0:T.type){case"set_selection":o==null||o(n.selection);break;default:a==null||a(n.children)}d()},[n,d,r,o,a]);Y.useEffect(()=>(gS.set(n,p),()=>{gS.set(n,()=>{})}),[n,p]);var[m,w]=Y.useState(Kt.isFocused(n));return Y.useEffect(()=>{w(Kt.isFocused(n))},[n]),bu(()=>{var x=()=>w(Kt.isFocused(n));return zB>=17?(document.addEventListener("focusin",x),document.addEventListener("focusout",x),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",x)}):(document.addEventListener("focus",x,!0),document.addEventListener("blur",x,!0),()=>{document.removeEventListener("focus",x,!0),document.removeEventListener("blur",x,!0)})},[]),Ae.createElement(WT.Provider,{value:h},Ae.createElement(VT.Provider,{value:n},Ae.createElement(yG.Provider,{value:m},i)))},CG=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=n;r=FH(r,i);var{onChange:o,apply:a}=r;return r.getChunkSize=()=>null,r.onChange=l=>{var c=zB<18?hN.unstable_batchedUpdates:h=>h();c(()=>{o(l)})},r.apply=l=>{if(l.type==="move_node"){var c=te.parent(r,l.path),h=!!r.getChunkSize(c);if(h){var d=te.get(r,l.path),p=kB(r,c),m=Kt.findKey(r,d);p.movedNodeKeys.add(m)}}a(l)},r},EG={isHistory(e){return Er(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||pu.isOperationList(e.redos[0].operations))&&(e.undos.length===0||pu.isOperationList(e.undos[0].operations))}},t3=new WeakMap,Lh=new WeakMap,K2=new WeakMap,Cl={isHistoryEditor(e){return EG.isHistory(e.history)&&j.isEditor(e)},isMerging(e){return Lh.get(e)},isSplittingOnce(e){return K2.get(e)},setSplittingOnce(e,n){K2.set(e,n)},isSaving(e){return t3.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,n){var i=Cl.isMerging(e);Lh.set(e,!0),n(),Lh.set(e,i)},withNewBatch(e,n){var i=Cl.isMerging(e);Lh.set(e,!0),K2.set(e,!0),n(),Lh.set(e,i),K2.delete(e)},withoutMerging(e,n){var i=Cl.isMerging(e);Lh.set(e,!1),n(),Lh.set(e,i)},withoutSaving(e,n){var i=Cl.isSaving(e);t3.set(e,!1);try{n()}finally{t3.set(e,i)}}},SG=e=>{var n=e,{apply:i}=n;return n.history={undos:[],redos:[]},n.redo=()=>{var{history:r}=n,{redos:o}=r;if(o.length>0){var a=o[o.length-1];a.selectionBefore&&jt.setSelection(n,a.selectionBefore),Cl.withoutSaving(n,()=>{j.withoutNormalizing(n,()=>{for(var l of a.operations)n.apply(l)})}),r.redos.pop(),n.writeHistory("undos",a)}},n.undo=()=>{var{history:r}=n,{undos:o}=r;if(o.length>0){var a=o[o.length-1];Cl.withoutSaving(n,()=>{j.withoutNormalizing(n,()=>{var l=a.operations.map(pu.inverse).reverse();for(var c of l)n.apply(c);a.selectionBefore&&jt.setSelection(n,a.selectionBefore)})}),n.writeHistory("redos",a),r.undos.pop()}},n.apply=r=>{var{operations:o,history:a}=n,{undos:l}=a,c=l[l.length-1],h=c&&c.operations[c.operations.length-1],d=Cl.isSaving(n),p=Cl.isMerging(n);if(d==null&&(d=AG(r)),d){if(p==null&&(c==null?p=!1:o.includes(h)?p=!0:p=TG(r,h)),Cl.isSplittingOnce(n)&&(p=!1,Cl.setSplittingOnce(n,void 0)),c&&p)c.operations.push(r);else{var m={operations:[r],selectionBefore:n.selection};n.writeHistory("undos",m)}for(;l.length>100;)l.shift();a.redos=[]}i(r)},n.writeHistory=(r,o)=>{n.history[r].push(o)},n},TG=(e,n)=>!!(n&&e.type==="insert_text"&&n.type==="insert_text"&&e.offset===n.offset+n.text.length&&ut.equals(e.path,n.path)||n&&e.type==="remove_text"&&n.type==="remove_text"&&e.offset+e.text.length===n.offset&&ut.equals(e.path,n.path)),AG=(e,n)=>e.type!=="set_selection";const DG=e=>{const n=e,{insertData:i}=n;return n.insertBreak=()=>{e.insertText(`
`)},n.insertSoftBreak=()=>{e.insertText(`
`)},n.insertData=r=>{let o=r.getData("text/plain");if(!r.getData("application/x-slate-fragment")&&o){o.endsWith(`
`)&&(o=o.substring(0,o.length-1)),o=o.trim().replace(/\t+/g," "),n.insertText(o);return}i(r)},n},Wg="#6698FF",Ba=9,wS="plait-text-plugin-key",jB=30,xS="transparent",Kw=4,Em=18,xg="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",UB="none";var b7;(function(e){e.image="image"})(b7||(b7={}));const $B=["png","jpeg","gif","bmp"];var CS;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(CS||(CS={}));var Co;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(Co||(Co={}));class Bs{constructor(n,i){this.board=n,this.options=i}processDrawing(n,i,r){var o,a;if(this.canDraw&&this.canDraw(n,r)){const l=this.draw(n,r);if(l){this.g&&i.contains(this.g)?this.g.replaceWith(l):(this.g&&this.g.remove(),(o=this.options)!=null&&o.prepend?i.prepend(l):i.appendChild(l)),this.g=l;const c=this.board.getRectangle(n);if(!c)return;let h=H.getCenterPoint(c);if((a=this.options)!=null&&a.active){const p=qr(this.board,c);h=H.getCenterPoint(p)}let d;So.isGroup(n)?d=Wo(Qs(this.board,n,!0)):d=n.angle,d&&qs(l,h,d)}else this.destroy();bG(this)&&this.afterDraw(n)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function bG(e){return!!e.afterDraw}const VB=(e,n)=>{const i={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},r=fd(G.getRoughSVG(e),n,Ba,i);return r.classList.add(sO),r};function BG(e,n){return fd(G.getRoughSVG(e),n,Ba,{stroke:"#FFFFFF",strokeWidth:1,fill:`${Wg}`,fillStyle:"solid"})}function B7(e,n){return fd(G.getRoughSVG(e),n,Ba,{stroke:`${Wg}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const _h=6,P7=(e,n)=>{const i={stroke:gr,strokeWidth:1,fillStyle:"solid"},r=[n.x-Kw-Em/2,n.y+n.height+Kw+Em/2],o=G.getRoughSVG(e),a=ze(),l=o.path(`M ${r[0]+_h} ${r[1]} A ${_h} ${_h}, 0, 1, 0, ${r[0]} ${r[1]+_h}`,i),c=o.polygon([[r[0],r[1]+_h-2],[r[0],r[1]+_h+2],[r[0]+4.5,r[1]+_h]],{...i,fill:gr});return Ze(c,"round"),a.append(l,c),a},pv=(e,n)=>new Zw(e,{...n,active:!0}),KA=class KA extends Bs{constructor(n,i){super(n,{...i}),this.board=n,this.options=i,this.hasResizeHandle=!1}canDraw(n,i){return!!i.selected}draw(n,i){const r=ze(),o=qr(this.board,this.options.getRectangle(n)),a=this.options.getStrokeWidth()*this.board.viewport.zoom,l=H.inflate(o,a),c=ka(this.board,l,{stroke:Wg,strokeWidth:Fi});return r.append(c),c.classList.add(cv),c.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,H.getCornerPoints(l).forEach(h=>{const d=VB(this.board,h);r.append(d)})):this.hasResizeHandle=!1,r}};KA.key="active-generator";let Zw=KA;const Qw=e=>`${e}`,Jw=e=>Number(e),PG=(e,n)=>{let r=(ES(e,Qw(n))?n-4:n)+2;return r>=4&&(r=r-4),ES(e,Qw(n))?r+4:r},M7=e=>{switch(e){case 0:case 2:return Da.nwse;case 1:case 3:return Da.nesw;case 4:case 6:return Da.ns;case 5:case 7:return Da.ew;default:return null}},MG=(e,n)=>{const i=BE.indexOf(e);if(i>=0){const r=Math.round(n/(Math.PI/4));e=BE[(i+r)%BE.length]}return e},WB=(e,n)=>{const i=H.getCornerPoints(e),r=i.map((a,l)=>({rectangle:{x:a[0]-n/2,y:a[1]-n/2,width:n,height:n},handle:Qw(l),cursorClass:M7(l)})),o=RG(i,n/2);return r.push(...o.map((a,l)=>({rectangle:a,handle:Qw(l+4),cursorClass:M7(l+4)}))),r},R7=(e,n)=>n<=3?H.getCornerPoints(e)[n]:H.getEdgeCenterPoints(e)[n-4],RG=(e,n)=>{const i=[];for(let r=0;r<e.length;r++){let o=H.getRectangleByPoints([e[r],e[(r+1)%4]]);const a=new Array(2).fill(0);a[(r+1)%2]=n/2,o=H.expand(o,a[0],a[1]),i.push(o)}return i},Ux=new WeakMap,vu=e=>!!Ux.get(e),OG=(e,n)=>vu(e)&&n(Ux.get(e)),LG=(e,n,i)=>{G.getBoardContainer(e).classList.add(`${i}-resizing`),Ux.set(e,n),Lu(e,!0)},_G=(e,n)=>{G.getBoardContainer(e).classList.remove(`${n}-resizing`),Ux.delete(e),Lu(e,!1)},ES=(e,n)=>Jw(n)>=4,Ew=(e,n)=>!ES(e,n),XT=(e,n,i,r,o)=>{const a=nr([r],i,o)[0],l=nr([H.getCenterPoint(n)],i,o)[0],c=H.getPoints(n),h=H.getCenterPoint(e),d=nr([l],a,-o)[0],p=nr(c,h,o);return nr(p,d,-o)},FG=e=>{const n=e.points;return n&&n.length>1},$x=(e,n)=>{if(G.hasBeenTextEditing(e)||Dr(e))return!1;const i=ne(e);return i.length===1&&i[0]===n&&FG(n)};function fi(e,n){const i=n[0]-e[0],r=n[1]-e[1],o=Math.sqrt(i*i+r*r);if(o===0)throw new Error("Points must not be the same for a unit vector calculation.");const a=i/o,l=r/o;return[a,l]}function hg(e,n,i){const r=Math.hypot(n[0],n[1]);return[e[0]+n[0]/r*i,e[1]+n[1]/r*i]}function O7(e,n,i,r){return r?[e[0]+i,e[1]+i/n[0]*n[1]]:[e[0]+i/n[1]*n[0],e[1]+i]}function L7(e){const n=e[0],r=e[1],o=-n;return[r,o]}function Gm(e,n){if(!n)return e;const i=e[0],r=e[1],o=i*Math.cos(n)-r*Math.sin(n),a=i*Math.sin(n)+r*Math.cos(n);return[o,a]}function XB(e,n,i){const r=be(e[0],e[1],n[0],n[1]),o=be(e[0],e[1],i[0],i[1]),a=be(n[0],n[1],i[0],i[1]);return Math.abs(r+o-a)<.1}const kG=(e,n,i)=>{const r=[],o=[Math.min(n[0],i[0]),Math.max(n[0],i[0])],a=[Math.min(n[1],i[1]),Math.max(n[1],i[1])],l=fi(n,i);if(e[0]>=o[0]&&e[0]<=o[1]){const c=O7(n,l,e[0]-n[0],!0);r.push(c)}else if(e[1]>=a[0]&&e[1]<=a[1]){const c=O7(n,l,e[1]-n[1],!1);r.push(c)}return r};function qB(e,n){const r=YB(e)*n;let o=0;for(let a=0;a<e.length-1;a++){const[l,c]=e[a],[h,d]=e[a+1],p=be(l,c,h,d);if(o+p>=r){const w=(r-o)/p,x=l+(h-l)*w,T=c+(d-c)*w;return[x,T]}o+=p}return e[e.length-1]}function YB(e){let n=0;for(let i=0;i<e.length-1;i++){const[r,o]=e[i],[a,l]=e[i+1];n+=be(r,o,a,l)}return n}function KB(e,n){const i=YB(e);let r=0;for(let o=0;o<e.length-1;o++){if(XB(n,e[o],e[o+1]))return r+=be(n[0],n[1],e[o][0],e[o][1]),r/i;r+=be(e[o][0],e[o][1],e[o+1][0],e[o+1][1])}throw new Error("Cannot get ratio by point")}const Pg=e=>{const n=[];return e.forEach(i=>{n.findIndex(o=>Ce.isEquals(i,o))===-1&&n.push(i)}),n};function gu(e){if(e.length<=2)return e;let n=[e[0]];for(let i=1;i<e.length-1;i++){const r=e[i-1],o=e[i],a=e[i+1];!(Ce.isOverHorizontal([r,o,a])||Ce.isOverVertical([r,o,a]))&&n.push(o)}return n.push(e[e.length-1]),n}const zm=(e,n,i)=>{const r=be(...e,...n),o=Ce.isEquals(e,n),a=o?1:(n[1]-e[1])/r,l=o?1:(n[0]-e[0])/r;return[e[0]+i*l,e[1]+i*a]},IG={[Fe.left]:{x:-1,y:0},[Fe.right]:{x:1,y:0},[Fe.top]:{x:0,y:-1},[Fe.bottom]:{x:0,y:1}};function HG(e){switch(e){case Fe.left:return Fe.right;case Fe.right:return Fe.left;case Fe.top:return Fe.bottom;case Fe.bottom:return Fe.top}}function ZB(e){if(e[0]===0)return Fe.left;if(e[0]===1)return Fe.right;if(e[1]===0)return Fe.top;if(e[1]===1)return Fe.bottom}function ag(e){const n=e[0],i=e[1];if(n===0&&i===0)return null;if(n===0)return i>0?Fe.bottom:Fe.top;if(i===0)return n>0?Fe.right:Fe.left;const r=Math.atan2(i,n);return r>-Math.PI/4&&r<=Math.PI/4?Fe.right:r>Math.PI/4&&r<=3*Math.PI/4?Fe.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?Fe.top:Fe.left}function id(e){return IG[e]}function Mg(e){return e===0?e:e/Math.abs(e)}const NG=(e,n,i,r,o)=>{const a=id(n),l=id(r),c=[e[0]+a.x*o,e[1]+a.y*o],h=[i[0]+l.x*o,i[1]+l.y*o],d=GG(c,n,h),p=d.x!==0?"x":"y",m=d[p];let w=[],x,T;const[D,b]=zG({sourceX:e[0],sourceY:e[1],targetX:i[0],targetY:i[1]});if(a[p]*l[p]===-1){x=D,T=b;const B=[[x,c[1]],[x,h[1]]],A=[[c[0],T],[h[0],T]];a[p]===m?w=p==="x"?B:A:w=p==="x"?A:B}else{const B=[[c[0],h[1]]],A=[[h[0],c[1]]];p==="x"?w=a.x===m?A:B:w=a.y===m?B:A;let I;if(n!==r){const R=p==="x"?1:0,k=a[p]===l[p==="x"?"y":"x"],W=c[R]>h[R],U=c[R]<h[R];I=a[p]===1&&(!k&&W||k&&U)||a[p]!==1&&(!k&&U||k&&W),I&&(w=p==="x"?B:A)}}return[e,c,...w,h,i]},GG=(e,n=Fe.bottom,i)=>n===Fe.left||n===Fe.right?e[0]<i[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<i[1]?{x:0,y:1}:{x:0,y:-1};function zG({sourceX:e,sourceY:n,targetX:i,targetY:r}){const o=Math.abs(i-e)/2,a=i<e?i+o:i-o,l=Math.abs(r-n)/2,c=r<n?r+l:r-l;return[a,c,o,l]}function qT(e){const n=e.ctrlKey||e.metaKey,i=ln.isKeyHotkey("alt",e),r=ln.isKeyHotkey("shift",e),o=e.key.includes("CapsLock"),a=e.key.includes("Tab"),l=e.key.includes("Escape"),c=e.key.startsWith("F"),h=!!e.key.includes("Arrow");return o||n||i||h||r||a||l||c}const jG=e=>ln.isKeyHotkey("mod+/",e),UG=e=>e.key==="Tab",$G=e=>e.key==="Enter",YT=e=>e.code==="Space",KT=e=>$r.isDeleteBackward(e)||$r.isDeleteForward(e);var Xi;(function(e){e.dnd="dnd",e.drawing="drawing"})(Xi||(Xi={}));const QB=new WeakMap,JB=e=>QB.get(e),Vr=(e,n)=>{QB.set(e,n)},Vx=e=>JB(e)===Xi.dnd,Pl=e=>JB(e)===Xi.drawing,Xg=e=>{const n=gn.getElementRef(e);return(n==null?void 0:n.getTextManages())||[]},mv=e=>{const n=Xg(e)[0];return n||console.warn("can not find textManage"),n},dd=e=>Xg(e).map(n=>n.editor),ZT=e=>{const n=dd(e)[0];return n||console.warn("can not find textManage"),n},VG=e=>{const n=ne(e);let i=null;return n.forEach(r=>{const o=dd(r);!i&&o&&o.length>0&&(i=o[0])}),i},tP=e=>e.map(n=>{try{const i=dd(n);return i.length?i.map(r=>{const o=te.texts(r);return Array.from(o).reduce((a,l)=>a+=l[0].text,"")}).join(" "):""}catch{return""}}).filter(n=>n).join(" "),eP=(e,n)=>{const i=n||ne(e);if(i.length){const r=[];i.forEach(a=>{r.push(...Xg(a))});const o=r.find(a=>a.isEditing);return o?[o.editor]:r.map(a=>a.editor)}},gd=(e,n,i)=>{i=i||{};const r=typeof e=="string"?{children:[{text:e,...i}],type:"paragraph"}:e;return n&&(r.align=n),r},_7=e=>e===14?20:e*1.5,nP=async(e,n,i,r)=>{let o=0,a=0;await WG(n,i).then(d=>{o=d.width,a=d.height});let l=null;const c=URL.createObjectURL(n);G.getBoardContext(e).setUploadingFile({url:c,file:n}),l={url:c,width:o,height:a},r(l)};function WG(e,n){return new Promise((i,r)=>{const o=new Image;o.src=URL.createObjectURL(e),o.onload=function(){const a=n,l=n*o.naturalHeight/o.naturalWidth;i(o.naturalWidth>n?{width:a,height:l}:{width:o.naturalWidth,height:o.naturalHeight})}})}const QT=new WeakMap,Uo=e=>QT.get(e),iP=(e,n)=>{QT.set(e,n)},XG=e=>{QT.delete(e)};class qG{constructor(){this.list=[]}enqueue(n){this.list.push(n),this.list=this.list.sort((i,r)=>i.priority-r.priority)}dequeue(){return this.list.shift()}}class YG{constructor(n){this.graph=n,this.cameFrom=new Map}heuristic(n,i){return Math.abs(n[0]-i[0])+Math.abs(n[1]-i[1])}search(n,i,r){const o=new qG,a=this.graph.get(n);this.cameFrom=new Map;const l=new Map;for(l.set(a,0),o.enqueue({node:a,priority:0});o.list.length>0;){var c=o.dequeue();if(!c)throw new Error("can't find current");const h=c.node.data;if(h[0]===i[0]&&h[1]===i[1])break;c.node.adjacentNodes.forEach(d=>{let p=l.get(c.node)+this.heuristic(d.data,c.node.data);const m=this.cameFrom.get(c.node),w=m?m.data:r,x=w[0]===(c==null?void 0:c.node.data[0])&&w[0]===d.data[0],T=w[1]===(c==null?void 0:c.node.data[1])&&w[1]===d.data[1];if(!x&&!T&&(p=p+1),!l.has(d)||l.get(d)&&p<l.get(d)){l.set(d,p);const D=p+this.heuristic(d.data,i);o.enqueue({node:d,priority:D}),this.cameFrom.set(d,c.node)}})}}getRoute(n,i){const r=[];let o=i;for(;o[0]!==n[0]||o[1]!==n[1];){const a=this.graph.get(o),l=this.cameFrom.get(a);r.unshift(l.data),o=l.data}return r}}class KG{constructor(n){this.data=n,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class ZG{constructor(){this.index={}}add(n){const i=n[0],r=n[1],o=i.toString(),a=r.toString();o in this.index||(this.index[o]={}),a in this.index[o]||(this.index[o][a]=new KG(n))}connect(n,i){const r=this.get(n),o=this.get(i);if(!r||!o)throw new Error("A point was not found");r.adjacentNodes.push(o)}has(n){const i=n[0],r=n[1],o=i.toString(),a=r.toString();return o in this.index&&a in this.index[o]}get(n){const i=n[0],r=n[1],o=i.toString(),a=r.toString();return o in this.index&&a in this.index[o]?this.index[o][a]:null}}const rP=Gg("debug:plait:elbow-line-routing"),oP=(e,n)=>{const{nextSourcePoint:i,nextTargetPoint:r}=e,o=JG(e),a=tz(o),l=new YG(a);l.search(i,r,e.sourcePoint);let c=l.getRoute(i,r);c=[e.sourcePoint,...c,r,e.targetPoint];const h=H.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),d=H.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),p=h?void 0:H.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),m=d?void 0:H.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return c=QG(c,{centerX:p,centerY:m,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},n),c},QG=(e,n,i)=>{const{sourceRectangle:r,targetRectangle:o,centerX:a,centerY:l}=n;if(i&&rP.clear(),a!==void 0){const c=k7(e,a,!0),h=c.pointOfHit&&F7(e,{parallelPaths:c.parallelPaths,pointOfHit:c.pointOfHit,sourceRectangle:r,targetRectangle:o},i);h&&(e=h)}if(l!==void 0){const c=k7(e,l,!1),h=c.pointOfHit&&F7(e,{parallelPaths:c.parallelPaths,pointOfHit:c.pointOfHit,sourceRectangle:r,targetRectangle:o},i);h&&(e=h)}return e},F7=(e,n,i)=>{const{parallelPaths:r,pointOfHit:o,sourceRectangle:a,targetRectangle:l}=n;let c=null;return r.forEach(h=>{const d=[o,h[0],h[1]],p=H.getRectangleByPoints(d);if(!H.isHit(p,a)&&!H.isHit(p,l)){const m=H.getCornerPointsByPoints(d);i&&rP.drawRectangle(i,p);const w=[],x=[];e.forEach((R,k)=>{const W=m.findIndex(U=>Ce.isEquals(R,U));W!==-1&&(w.push(k),x.push(W))});const T=[...e],D=m.find((R,k)=>!x.includes(k)),b=Math.abs(w[0]-w[w.length-1])+1;T.splice(w[0]+1,b-2,D);const B=gu([...e]).length-1;gu([...T]).length-1<=B&&(c=T)}return null}),c},k7=(e,n,i)=>{const r=[];let o=null,a=null;const l=i?0:1;for(let c=0;c<e.length;c++){const h=e[c-1],d=e[c];o===null&&h&&h[l]===d[l]&&(o=h),o!==null&&h[l]!==d[l]&&(r.push([o,h]),o=null),d[l]===n&&(a=d)}return o&&r.push([o,e[e.length-1]]),{pointOfHit:a,parallelPaths:r}},JG=e=>{const{nextSourcePoint:n,nextTargetPoint:i,sourceOuterRectangle:r,targetOuterRectangle:o}=e,a=[],l=[];let c=[];[r,o].forEach(p=>{a.push(p.x,p.x+p.width/2,p.x+p.width),l.push(p.y,p.y+p.height/2,p.y+p.height)});const h=[r.x,r.x+r.width,o.x,o.x+o.width].sort((p,m)=>p-m);a.push((h[1]+h[2])/2,n[0],i[0]);const d=[r.y,r.y+r.height,o.y,o.y+o.height].sort((p,m)=>p-m);l.push((d[1]+d[2])/2,n[1],i[1]);for(let p=0;p<a.length;p++)for(let m=0;m<l.length;m++){const w=[a[p],l[m]],x=H.isPointInRectangle(r,w),T=H.isPointInRectangle(o,w);!x&&!T&&c.push(w)}return c=Pg(c).filter(p=>{const m=H.isPointInRectangle(r,p),w=H.isPointInRectangle(o,p);return!m&&!w}),c},tz=e=>{const n=new ZG,i=[],r=[];e.forEach(a=>{const l=a[0],c=a[1];i.indexOf(l)<0&&i.push(l),r.indexOf(c)<0&&r.push(c),n.add(a)}),i.sort((a,l)=>a-l),r.sort((a,l)=>a-l);const o=a=>n.has(a);for(let a=0;a<i.length;a++)for(let l=0;l<r.length;l++){const c=[i[a],r[l]];if(o(c)){if(a>0){const h=[i[a-1],r[l]];o(h)&&(n.connect(h,c),n.connect(c,h))}if(l>0){const h=[i[a],r[l-1]];o(h)&&(n.connect(h,c),n.connect(c,h))}}}return n},ez=(e,n)=>{const i=jB;let r=new Array(4).fill(i),o=new Array(4).fill(i);const a=e.x-(n.x+n.width),l=n.x-(e.x+e.width);if(a>0&&a<i*2){const d=a/2;r[3]=d,o[1]=d}if(l>0&&l<i*2){const d=l/2;o[3]=d,r[1]=d}const c=e.y-(n.y+n.height),h=n.y-(e.y+e.height);if(c>0&&c<i*2){const d=c/2;r[0]=d,o[2]=d}if(h>0&&h<i*2){const d=h/2;r[2]=d,o[0]=d}return{sourceOffset:r,targetOffset:o}},I7=(e,n,i)=>{switch(i){case Fe.top:return[e[0],n.y];case Fe.bottom:return[e[0],n.y+n.height];case Fe.right:return[n.x+n.width,e[1]];default:return[n.x,e[1]]}},nz=(e,n)=>{const{sourceOffset:i,targetOffset:r}=ez(e,n),o=H.expand(e,i[3],i[0],i[1],i[2]),a=H.expand(n,r[3],r[0],r[1],r[2]);return{sourceOuterRectangle:o,targetOuterRectangle:a}},iz=e=>{const{sourcePoint:n,nextSourcePoint:i,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:a,nextTargetPoint:l,targetRectangle:c,targetOuterRectangle:h}=e;return H.isPointInRectangle(c,n)||H.isPointInRectangle(h,i)||H.isPointInRectangle(o,l)||H.isPointInRectangle(r,a)},Sw=new Map,JT=(e,n,i)=>{let r=Sw.has(e)?Sw.get(e):{};r[n]=i,Sw.set(e,r)},Wx=e=>Sw.get(e),sP=new WeakMap,rz=(e,n)=>{G.getBoardContainer(e).classList.add("draw-elements-rotating"),sP.set(e,n),Lu(e,!0)},oz=e=>{G.getBoardContainer(e).classList.remove("draw-elements-rotating"),sP.delete(e),Lu(e,!1)},H7=(e,n)=>{const i=e.getRectangle(n);return i?i.width*i.height:0},sz=(e,n,i="asc")=>n.sort((r,o)=>{const a=H7(e,r),l=H7(e,o);return i==="asc"?a-l:l-a}),az=e=>e&&e!==UB&&e!==xS,pf=(e,n)=>{switch(e){case Co.dashed:return[8,8+n];case Co.dotted:return[2,4+n];default:return}},aP=(e,n,i,r)=>n.map(o=>{const a=r&&r(o);if(a)return a;if(o.points){const l=o.points.map(c=>[c[0]-i[0],c[1]-i[1]]);return{...o,points:l}}return o}),lP=(e,n,i,r)=>{const o={};n.forEach(a=>{o[a.id]=Mn()}),n.forEach(a=>{a.id=o[a.id],r&&r(a,o),a.points&&(a.points=a.points.map(l=>[i[0]+l[0],i[1]+l[1]])),Qt.insertNode(e,a,[e.children.length])}),Qt.addSelectionWithTemporaryElements(e,n)},si=(e,n,i=Fe.right)=>i===Fe.left?[e[0]-n,e[1]]:i===Fe.bottom?[e[0],e[1]+n]:i===Fe.top?[e[0],e[1]-n]:[e[0]+n,e[1]],qc=(e,n,i=Fe.right)=>i===Fe.bottom?[e[0]+n,e[1]]:i===Fe.top?[e[0]+n,e[1]]:[e[0],e[1]+n],lz=e=>e===0?Fe.top:e===1?Fe.right:e===2?Fe.bottom:e===3?Fe.left:Fe.right,uP=(e,n,i)=>Math.abs(i?e[0]-n[0]:e[1]-n[1]),uz="foreign-object-image",ZA=class ZA extends Bs{constructor(n,i){super(n,i),this.board=n,this.options=i,this.isFocus=!1}canDraw(n){return!!this.options.getImageItem(n)}draw(n){this.element=n;const i=ze(),r=this.options.getRectangle(n);this.foreignObject=pT(r.x,r.y,r.width,r.height),this.foreignObject.classList.add(uz),i.append(this.foreignObject);const o={board:this.board,imageItem:this.options.getImageItem(n),element:n,getRectangle:()=>this.options.getRectangle(n)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,o),this.activeGenerator=pv(this.board,{getStrokeWidth:()=>(ne(this.board).length===1&&!Dr(this.board),Fi),getStrokeOpacity:()=>{const a=ne(this.board);return a.length===1&&!Dr(this.board)||!a.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const a=$x(this.board,this.element);return!!Uo(this.board)||a}}),i}updateImage(n,i,r){if(this.element=r,i!==r&&this.imageComponentRef){const l={imageItem:this.options.getImageItem(r),element:r,getRectangle:()=>this.options.getRectangle(r)};this.imageComponentRef.update(l)}const o=this.options.getRectangle(r);pm(this.g,o.width,o.height,o.x,o.y),o&&r.angle!==void 0&&qs(this.g,H.getCenterPoint(o),r.angle);const a=G.getActiveHost(this.board);this.activeGenerator.processDrawing(r,a,{selected:this.isFocus})}setFocus(n,i){this.isFocus=i;const r=G.getActiveHost(this.board);this.activeGenerator.processDrawing(n,r,{selected:i});const o={isFocus:i};this.imageComponentRef.update(o)}destroy(){var n,i;super.destroy(),(n=this.imageComponentRef)==null||n.destroy(),(i=this.activeGenerator)==null||i.destroy()}};ZA.key="image-generator";let Bu=ZA;const vv=(e,n,i)=>{ne(e).forEach(o=>{if(i!=null&&i.match&&!(i!=null&&i.match(o)))return;const a=G.findPath(e,o),l=i!=null&&i.getMemorizeKey?i==null?void 0:i.getMemorizeKey(o):"";for(let c in n)l&&JT(l,c,n[c]);i!=null&&i.callback?i.callback(o,a):Qt.setNode(e,n,a)})},cz=(e,n,i)=>{vv(e,{strokeStyle:n},i)},fz=(e,n,i)=>{vv(e,{fill:n},i)},hz=(e,n,i)=>{vv(e,{strokeColor:n},i)},dz=(e,n,i)=>{vv(e,{strokeWidth:n},i)},Ia={setFillColor:fz,setStrokeStyle:cz,setProperty:vv,setStrokeWidth:dz,setStrokeColor:hz},Rg=(e,n=!1)=>{let i=e[0],r=e[1];if(n){const l=Math.abs(i[0]-r[0]),c=Math.abs(i[1]-r[1]),h=Math.max(c,l);r=[i[0]+(r[0]>i[0]?h:-h),i[1]+(r[1]>i[1]?h:-h)]}const o=[Math.min(i[0],r[0]),Math.min(i[1],r[1])];let a=[Math.max(i[0],r[0]),Math.max(i[1],r[1])];return[o,a]},N7=(e,n)=>!G.isReadonly(e)&&!G.hasBeenTextEditing(e)&&G.isPointer(e,nn.selection),pd=(e,n)=>{const{pointerDown:i,pointerMove:r,globalPointerUp:o,touchStart:a}=e;let l=null,c=null,h=null,d=null;e.touchStart=m=>{if(c){m.preventDefault();return}a(m)},e.pointerDown=m=>{if(!n.canResize()||!N7(e)||!Dl(m)){i(m);return}const w=Pe(e,ke(e,m.x,m.y));if(l=n.hitTest(w),l){l.cursorClass&&G.getBoardContainer(e).classList.add(`${l.cursorClass}`),h=[m.x,m.y],c={path:Array.isArray(l.element)?l.element.map(T=>G.findPath(e,T)):G.findPath(e,l.element),element:l.element,handle:l.handle,handleIndex:l.handleIndex,rectangle:l.rectangle,options:l.options};return}i(m)},e.pointerMove=m=>{if(!n.canResize()||!N7(e)){p(),r(m);return}if(h&&l&&!vu(e)){const w=[m.x,m.y];be(h[0],h[1],w[0],w[1])>sT&&(LG(e,c,n.key),tr.set(e,!0),n.beforeResize&&n.beforeResize(c))}if(!vu(e)&&!of(e)){const w=Pe(e,ke(e,m.x,m.y));_a(e,n.key+"-common-resize-hit-test",()=>{const x=n.hitTest(w);x?(d&&x.cursorClass!==d.cursorClass&&G.getBoardContainer(e).classList.remove(`${d.cursorClass}`),d=x,d.cursorClass&&G.getBoardContainer(e).classList.add(`${d.cursorClass}`)):p()})}else if(h&&vu(e)){m.preventDefault();const w=Pe(e,ke(e,m.x,m.y));_a(e,"with-common-resize",()=>{h&&c&&n.onResize(c,{startPoint:Pe(e,ke(e,h[0],h[1])),endPoint:w,isShift:!!m.shiftKey})});return}r(m)},e.globalPointerUp=m=>{o(m),(vu(e)||l)&&(n.afterResize&&n.afterResize(c),_G(e,n.key),h=null,l=null,c=null,tr.set(e,!1))};const p=()=>{d&&(d.cursorClass&&G.getBoardContainer(e).classList.remove(`${d.cursorClass}`),d=null)};return e},QA=class QA extends Bs{canDraw(n){return!0}draw(n,i){const r={stroke:"",strokeWidth:Fi,strokeLineDash:[5]};let o={x:0,y:0,width:0,height:0};return i&&(r.stroke="#999",o=TT(this.board,n,!0)),ka(this.board,o,r)}};QA.key="GroupGenerator";let jm=QA;class gz{constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(n,i){this.generatorMap.set(n,i)}getGenerator(n){return this.generatorMap.get(n)}initializeTextManage(n){this.textManages=[],Array.isArray(n)?this.textManages.push(...n):this.textManages.push(n)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(n=>{n.destroy()}),this.textManages=[]}}class mf extends U_{constructor(n=new gz){super(n)}}class pz extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=pv(this.board,{getRectangle:n=>TT(this.board,n),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!Dr(this.board)}),this.groupGenerator=new jm(this.board),this.getRef().addGenerator(jm.key,this.groupGenerator)}initialize(){super.initialize(),this.initializeGenerator()}onContextChanged(n,i){}}function cP(e){let n,i;const{drawElement:r,pointerMove:o,globalPointerUp:a,insertFragment:l,getDeletedFragment:c,deleteFragment:h,getRelatedFragment:d,getRectangle:p,keyDown:m,onChange:w}=e;return e.drawElement=x=>So.isGroup(x.element)?pz:r(x),e.pointerMove=x=>{_a(e,"with-group",()=>{n==null||n.remove();const T=Pe(e,ke(e,x.x,x.y));let D={anchor:T,focus:T};e.selection&&!bg.isCollapsed(e.selection)&&(D=e.selection);const b=G.getPointer(e);if(!vu(e)&&!sf(e)&&b===nn.selection){const B=f4(e,D);B.length&&(n=QL(e,B),n&&G.getElementTopHost(e).append(n))}}),o(x)},e.globalPointerUp=x=>{n==null||n.remove(),n=null,a(x)},e.getRelatedFragment=(x,T)=>{const D=KL(e,x,T);return d([...x,...D],T)},e.insertFragment=(x,T,D)=>{var A,I;let b=[];if((A=x==null?void 0:x.elements)!=null&&A.length){b=new Array((I=x==null?void 0:x.elements)==null?void 0:I.length);const R=gf(e,x==null?void 0:x.elements);DT(e,x==null?void 0:x.elements).forEach(W=>{const U=x.elements.map(nt=>nt.id).indexOf(W.id);b.splice(U,1,W.groupId?tx(W,void 0):W)}),R.length&&R.forEach(W=>{const U=x.elements.map(st=>st.id).indexOf(W.id),nt={...tx(W,void 0),id:Mn()};b.splice(U,1,nt),fP(W,x.elements,nt.id,b)}),x.elements=b}l(x,T,D),(b==null?void 0:b.filter(R=>So.isGroup(R))).forEach(R=>{Qt.insertNode(e,R,[e.children.length])})},e.getDeletedFragment=x=>(i=mz(e),i&&i.length&&x.push(...i),c(x)),e.deleteFragment=x=>{i!=null&&i.length&&yz(e,i),h(x),i=null},e.getRectangle=x=>So.isGroup(x)?TT(e,x,!0):p(x),e.keyDown=x=>{if(!G.isReadonly(e)){if(ln.isKeyHotkey("mod+g",x)){x.preventDefault(),Qt.addGroup(e);return}if(ln.isKeyHotkey("mod+shift+g",x)){x.preventDefault(),Qt.removeGroup(e);return}}m(x)},e.onChange=()=>{w(),YL(e).forEach(T=>{const D=Qs(e,T,!1,!0),b=D.some(I=>sS(e,I))&&!D.every(I=>sS(e,I)),B=gn.getElementRef(T),A=gn.getElementG(T);B.getGenerator(jm.key).processDrawing(T,A,b)})},e}const tx=(e,n)=>({...e,groupId:n}),fP=(e,n,i,r)=>{const o=n.filter(a=>a.groupId===e.id);return o.length&&o.forEach(a=>{const l=n.map(c=>c.id).indexOf(a.id);if(So.isGroup(a)){const c={...tx(a,i),id:Mn()};r.splice(l,1,c),fP(a,n,c.id,r)}else r.splice(l,1,tx(a,i))}),r},mz=e=>{const i=[...e.getRelatedFragment([])],r=gf(e),o=bT(e),a=[...r,...o];return a.forEach(l=>{const c=df(e,l,!0);if(c.length){const d=Qs(e,c[0],!1,!0).filter(p=>![...a,...i].map(m=>m.id).includes(p.id));if((d.length===1||d.length===0)&&(i.includes(c[0])||i.push(c[0]),d.length===1&&c.length>1)){const p=vz(e,c.slice(1,c.length),[...a,...i]);let m=c.length;p&&(m=c.findIndex(w=>w.id===p.id)),[...c.slice(1,m)].forEach(w=>{i.includes(w)||i.push(w)})}}}),i},vz=(e,n,i)=>{let r=null;for(let o=0;o<n.length;o++)if(Qs(e,n[o],!1,!0).filter(c=>!i.map(h=>h.id).includes(c.id)).length>0){r=n[o];break}return r},yz=(e,n)=>{const i=bT(e),r=gf(e),o=i.filter(a=>a.groupId);[...r,...o].forEach(a=>{const l=df(e,a,!0);if(l.length){const h=Qs(e,l[0],!1,!0).filter(d=>d.id!==a.id);if(h.length===1){const d=n.map(p=>p.id);if(l.some(p=>d.includes(p.id))){const p=l.find(w=>!d.includes(w.id)),m=G.findPath(e,h[0]);Qt.setNode(e,{groupId:(p==null?void 0:p.id)||void 0},m)}}}})},e3=new WeakMap,ex=new WeakMap,wz=e=>{if(e){if(!e3.get(e)){const n=document.createElement("canvas");return e3.set(e,n),n}return e3.get(e)}return document.createElement("canvas")},Tw=(e,n,i,r=1e4)=>{let o=ex.get(n);return o||(o=Xx(e,n,i,r),ex.set(n,o),o)},xz=(e,n,i)=>{ex.set(n,i)},Cz=(e,n)=>{ex.delete(n)};function Xx(e,n,i,r=1e4){r=_x(r,0);const a=wz(e).getContext("2d"),l=te.texts(n),c=[[]];for(const p of l){const[m]=p;te.string(m).split(`
`).forEach((T,D)=>{const b={...m,text:T};if(D===0)c[c.length-1].push(b);else{const B=[];B.push(b),c.push(B)}})}let h=0,d=0;return c.forEach((p,m)=>{let w=0,x=0,T=_7(i.fontSize),D=!1;const b=[[]];p.forEach((B,A)=>{const I=A===p.length-1;if(B["font-size"]&&(I||B.text!=="")){const W=_7(parseFloat(B["font-size"]));W>T&&(T=W)}const R=Ez(B,{fontFamily:i.fontFamily,fontSize:i.fontSize});a.font=R;const k=B.text;for(let W=0;W<k.length;W++){const U=k[W],nt=a.measureText(U).width;w+nt>r?(h=Math.max(h,w),w=nt,x+=T,D=!0,b.push([]),b[b.length-1].push(U)):(b[b.length-1].push(U),w+=nt)}}),x+=T,d+=x,D||(h=Math.max(h,w))}),{width:h,height:d}}const Ez=(e,n)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||n.fontSize}px ${n.fontFamily} `;class yv{constructor(n,i){this.board=n,this.options=i,this.isEditing=!1,this.getSize=(r,o)=>{const a=window.getComputedStyle(this.foreignObject.children[0]),l=a.fontFamily,c=parseFloat(a.fontSize),h=r||this.editor.children[0];return Xx(this.board,h,{fontSize:c,fontFamily:l},o||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(n){const i=this.options.getRectangle();this.g=ze(),this.foreignObject=pT(i.x,i.y,i.width,i.height),this.g.append(this.foreignObject),this.g.classList.add("text");const r={board:this.board,text:n,textPlugins:this.options.textPlugins,onChange:o=>{if(o.operations.some(a=>!pu.isSelectionOperation(a))){const{width:a,height:l}=this.getSize();this.options.onChange&&this.options.onChange({...o,width:a,height:l}),tr.set(this.board,!0)}},afterInit:o=>{this.editor=o},onComposition:o=>{if(o.type==="compositionend"){Cz(this.board,this.editor.children[0]);return}const a=Sz(this.editor,o.data);if(a){const l=this.getSize(a.children[0]);xz(this.board,this.editor.children[0],l),this.options.onChange&&this.options.onChange({...l}),tr.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,r)}updateRectangleWidth(n){MO(this.g,n)}updateAngle(n,i=0){qs(this.g,n,i)}updateRectangle(n){const{x:i,y:r,width:o,height:a}=n||this.options.getRectangle();pm(this.g,o,a,i,r)}updateText(n){const i={text:n};this.textComponentRef.update(i)}edit(n,i){this.isEditing=!0,q3.set(this.board,!0);const r={readonly:!1};this.textComponentRef.update(r),G4()?setTimeout(()=>{const c=j.end(this.editor,[0]);jt.select(this.editor,c)},0):jt.select(this.editor,[0]);const o=c=>{const h=Pe(this.board,ke(this.board,c.x,c.y)),d=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),p=H.isHit(H.getRectangleByPoints([h,h]),d),m=c.target.closest(".plait-board-attached");!p&&!m&&setTimeout(()=>{l()},0)},a=c=>{if(!c.isComposing&&(c.key==="Escape"||c.key==="Tab"||i&&i(c))){c.preventDefault(),c.stopPropagation(),l();return}},l=()=>{if(this.isEditing){this.updateRectangle(),document.removeEventListener("pointerdown",o),document.removeEventListener("keydown",a),q3.set(this.board,!1),tr.set(this.board,!1),n&&n();const c={readonly:!0};this.textComponentRef.update(c),this.isEditing=!1,this.exitCallback=void 0}};return document.addEventListener("pointerdown",o),document.addEventListener("keydown",a),this.exitCallback=l,l}destroy(){var n,i;(n=this.g)==null||n.remove(),(i=this.textComponentRef)==null||i.destroy(),this.exitCallback&&this.exitCallback()}}const Sz=(e,n)=>{if(e.selection&&_t.isCollapsed(e.selection)){const[i,r]=j.node(e,e.selection),o=e.selection.anchor.offset,l={children:[JSON.parse(JSON.stringify(e.children[0]))]},c=i.text.slice(0,o+1)+n+i.text.slice(o+1),h=te.get(l,r);return h.text=c,l}return null},Tz=e=>{const n=e;return n.renderText=(i,r)=>{throw new Error("No implementation for renderText method.")},n};var Tr;(function(e){e.left="left",e.center="center",e.right="right"})(Tr||(Tr={}));const Az=e=>{const n=e;return n.renderImage=(i,r)=>{throw new Error("No implementation for renderImage method.")},n},SS={isActive(e,n){const i=te.get(e,G7);if(i){const{align:r}=i;return r===n}return!1},setAlign(e,n){const i={align:n};jt.setNodes(e,i,{at:G7})}},G7=[0];var Wr;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(Wr||(Wr={}));const z7=[Wr.bold,Wr.color,Wr.italic,Wr.strike,Wr.underline,Wr.fontSize];var nx;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(nx||(nx={}));Wr.bold,Wr.italic,Wr.underline,Wr.strike;const Um=14,Eu={getMarks(e){const n={};let i=[];e.selection?i=e.selection:e.children&&e.children.length>0&&(i={anchor:j.start(e,[0]),focus:j.end(e,[0])});const r=j.nodes(e,{match:se.isText,at:i});for(const o of r){const[a]=o,{text:l,...c}=a;Object.assign(n,c)}for(const o in n)z7.includes(o)||delete n[o];return n},getMarksByElement(e){const n={},i=te.texts(e);for(const r of i){const[o]=r,{text:a,...l}=o;Object.assign(n,l)}for(const r in n)z7.includes(r)||delete n[r];return n},isMarkActive(e,n){var o,a;if(!(e!=null&&e.selection))return;const i=te.get(e,(a=(o=e==null?void 0:e.selection)==null?void 0:o.anchor)==null?void 0:a.path);if(!se.isText(i))return!1;const r=Eu.getMarks(e);return!!(r&&r[n])},toggleMark(e,n){n3(e),Eu.isMarkActive(e,n)?j.removeMark(e,n):j.addMark(e,n,!0)},setFontSizeMark(e,n,i=Um){n3(e),Number(n)===i?j.removeMark(e,Wr.fontSize):j.addMark(e,Wr.fontSize,Number(n))},setColorMark(e,n,i=gr){n3(e),n===i||n===null||n===void 0?j.removeMark(e,"color"):j.addMark(e,"color",n)}};function n3(e){e.selection||jt.select(e,[0])}const Tl={wrapLink(e,n,i){Tl.isLinkActive(e)&&Tl.unwrapLink(e);const{selection:r}=e,o=r&&_t.isCollapsed(r),a={type:"link",url:i,children:[{text:n}]};if(o||te.string(e)==="")jt.insertNodes(e,a);else if(r)jt.wrapNodes(e,a,{split:!0}),jt.collapse(e,{edge:"end"});else{const l={anchor:j.start(e,[0]),focus:j.end(e,[0])};jt.wrapNodes(e,a,{split:!0,at:l})}},unwrapLink(e,n){n||(n=e.selection,!n&&e.children&&e.children.length>0&&(n={anchor:j.start(e,[0]),focus:j.end(e,[0])})),jt.unwrapNodes(e,{at:n,match:i=>fe.isElement(i)&&i.type==="link"})},isLinkActive(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:j.start(e,[0]),focus:j.end(e,[0])});const[i]=j.nodes(e,{match:r=>fe.isElement(r)&&r.type==="link",at:n});return!!i},getLinkElement(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:j.start(e,[0]),focus:j.end(e,[0])});const[i]=j.nodes(e,{match:r=>fe.isElement(r)&&r.type==="link",at:n});return i}};function j7(e){const n=/^(?:\w+:)?\/\/(\S+)$/,i=/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,o=/^[^\s\.]+\.\S{2,}$/;if(typeof e!="string")return!1;const a=e.match(i);if(a)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a[1]);const l=e.match(n);if(!l)return!1;const c=l[1];return c?!!(r.test(c)||o.test(c)):!1}const hP=e=>{const i=dd(e)[0];return!i||i.children.length===0?{}:Eu.getMarks(i)},Dz=(e,n,i)=>{let r;if(i!=null&&i.length)r=i;else{const o=ne(e);if(o.length){const a=VG(e);if(!a)return;const l=Eu.getMarks(a),c=o.filter(h=>dd(h).some(p=>Eu.getMarks(p)[n]===l[n]));r=eP(e,c)}}r&&r.length&&r.forEach(o=>{Eu.toggleMark(o,n)})},bz=(e,n,i,r)=>{const o=tA(e,r);if(o&&o.length){const a=ne(e);o.forEach(l=>{let c;if(typeof i=="function"){const h=a.find(d=>dd(d).includes(l));c=i(h)}else c=i;Eu.setFontSizeMark(l,n,c)})}},Bz=(e,n,i,r)=>{const o=tA(e,r);o&&o.length&&o.forEach(a=>{i&&jt.select(a,i),n==="transparent"?j.removeMark(a,Wr.color):Eu.setColorMark(a,n)})},Pz=(e,n,i)=>{const r=tA(e,i);r&&r.length&&r.forEach(o=>SS.setAlign(o,n))},tA=(e,n)=>{let i;return n!=null&&n.length?i=n:i=eP(e),i},TS={setTextAlign:Pz,setTextColor:Bz,setFontSize:bz,setTextMarks:Dz},U7=()=>O.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),Mz=({attributes:e,children:n,element:i})=>O.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":i.url,className:"plait-board-link",children:[O.jsx(U7,{}),n,O.jsx(U7,{})]}),Rz=e=>{const{insertData:n,insertText:i,isInline:r}=e;return e.isInline=o=>o.type&&["link"].includes(o.type)||r(o),e.insertText=o=>{o&&j7(o)?Tl.wrapLink(e,o,o):i(o)},e.insertData=o=>{const a=o.getData("text/plain");a&&j7(a)?Tl.wrapLink(e,a,a):n(o)},e},$7=e=>{const{text:n,readonly:i,onChange:r,onComposition:o,afterInit:a}=e,l=Y.useCallback(p=>O.jsx(_z,{...p}),[]),c=[n],h=Y.useMemo(()=>{const p=Rz(DG(SG(CG(nH()))));return a&&a(p),p},[]);Y.useEffect(()=>{n!==h.children[0]&&(h.children=[n],h.onChange())},[n,h]);const d=p=>{const{selection:m}=h;if(m&&_t.isCollapsed(m)){const{nativeEvent:w}=p;if(ln.isKeyHotkey("left",w)){p.preventDefault(),jt.move(h,{unit:"offset",reverse:!0});return}if(ln.isKeyHotkey("right",w)){p.preventDefault(),jt.move(h,{unit:"offset"});return}}};return O.jsx(xG,{editor:h,initialValue:c,onChange:p=>{r&&r({newText:h.children[0],operations:h.operations})},children:O.jsx(dG,{className:"slate-editable-container plait-text-container",renderElement:p=>O.jsx(Oz,{...p}),renderLeaf:l,readOnly:i===void 0?!0:i,onCompositionStart:p=>{o&&o(p)},onCompositionUpdate:p=>{o&&o(p)},onCompositionEnd:p=>{o&&o(p)},onKeyDown:d})})},Oz=e=>{const{attributes:n,children:i,element:r}=e;switch(r.type){case"link":return O.jsx(Mz,{...e});default:return O.jsx(Lz,{...e})}},Lz=({attributes:e,children:n,element:i})=>{const r={textAlign:i.align};return O.jsx("div",{style:r,...e,children:n})},_z=({children:e,leaf:n,attributes:i})=>(n.bold&&(e=O.jsx("strong",{children:e})),n.code&&(e=O.jsx("code",{children:e})),n.italic&&(e=O.jsx("em",{children:e})),n.underlined&&(e=O.jsx("u",{children:e})),O.jsx("span",{style:{color:n.color},...i,children:e})),Fz=e=>{const n=e;return n.renderText=(i,r)=>{const o=lv.createRoot(i);let a;const l=O.jsx($7,{...r,afterInit:d=>{a=d,r.afterInit&&r.afterInit(d)}});o.render(l);let c={...r};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:d=>{if(!(d&&c&&!Object.keys(d).every(w=>d[w]===c[w])))return;const m=Kt.isReadOnly(a);c={...c,...d},o.render(O.jsx($7,{...c})),m===!0&&c.readonly===!1?setTimeout(()=>{Kt.focus(a)},0):m===!1&&c.readonly===!0&&(Kt.blur(a),Kt.deselect(a))}}},n},AS=new WeakMap,ix=e=>{const n=AS.get(e);return(n==null?void 0:n.length)===2},kz=e=>{const{touchStart:n,touchMove:i,touchEnd:r}=e;let o=[],a=!1;return e.touchStart=l=>{o=Array.from(l.touches).map(c=>({pointerId:c.identifier,lastPoint:[c.clientX,c.clientY],currentPoint:[c.clientX,c.clientY],hasMoved:!1})),AS.set(e,o),o.length>=2&&e.viewport.zoom,n(l)},e.touchMove=l=>{if(Array.from(l.changedTouches).forEach(c=>{const h=o.find(d=>d.pointerId===c.identifier);h&&(h.lastPoint=h.currentPoint,h.currentPoint=[c.clientX,c.clientY],h.hasMoved=!0)}),o.length===2&&l.preventDefault(),o.length===2&&o.every(c=>c.hasMoved)){const[c,h]=o,d=OD(...c.lastPoint,...h.lastPoint),p=OD(...c.currentPoint,...h.currentPoint),m=p[0]-d[0],w=p[1]-d[1],x=G.getBoardContainer(e).getBoundingClientRect(),T=x.width/2,D=x.height/2,b=e.viewport.zoom,B=$g(e);let A=B[0]+T/b-m/b,I=B[1]+D/b-w/b,R=[A-x.width/2/b,I-x.height/2/b],k=b;const W=be(...c.lastPoint,...h.lastPoint),nt=be(...c.currentPoint,...h.currentPoint)/W,st=[c.currentPoint[0]-c.lastPoint[0],c.currentPoint[1]-c.lastPoint[1]],ft=[h.currentPoint[0]-h.lastPoint[0],h.currentPoint[1]-h.lastPoint[1]],Et=st[0]*ft[0]+st[1]*ft[1],ct=Math.sqrt(st[0]*st[0]+st[1]*st[1]),mt=Math.sqrt(ft[0]*ft[0]+ft[1]*ft[1]),wt=Et/(ct*mt||1);if(wt<-.7||wt<=.8&&a&&nt>=.01?a=!0:a=!1,a){k=Math.min(Math.max(e.viewport.zoom*nt,e4),n4);const P=G.getBoardContainer(e).getBoundingClientRect(),_=p[0]-P.x,N=p[1]-P.y;A=R[0]+_/b,I=R[1]+N/b,R=[A-_/k,I-N/k]}un.updateViewport(e,R,k),o[0].lastPoint=c.currentPoint,o[1].lastPoint=h.currentPoint,o[0].hasMoved=!1,o[1].hasMoved=!1;return}i(l)},e.touchEnd=l=>{const c=o.findIndex(h=>h.pointerId===l.changedTouches[0].identifier);c!==-1&&o.splice(c,1),AS.set(e,o),r(l)},e},dP=({value:e,children:n,options:i,plugins:r,viewport:o,theme:a,onChange:l,onSelectionChange:c,onValueChange:h,onViewportChange:d,onThemeChange:p})=>{const[m,w]=Y.useState(()=>{const B=Iz(e,i,r,o,a),A=Hz(B);return{v:0,board:B,listRender:A}}),{board:x,listRender:T}=m,D=Y.useCallback(()=>{if(l){const k={children:x.children,operations:x.operations,viewport:x.viewport,selection:x.selection,theme:x.theme};l(k)}const B=x.operations.some(k=>jc.isSetSelectionOperation(k)),A=x.operations.some(k=>jc.isSetViewportOperation(k)),I=x.operations.some(k=>jc.isSetThemeOperation(k)),R=x.operations.length>0&&!x.operations.every(k=>jc.isSetSelectionOperation(k)||jc.isSetViewportOperation(k)||jc.isSetThemeOperation(k));h&&R&&h(x.children),c&&B&&c(x.selection),d&&A&&d(x.viewport),p&&I&&p(x.theme.themeColorMode),w(k=>({v:k.v+1,board:x,listRender:T}))},[x,l,c,h]);Y.useEffect(()=>(Nw.set(x,()=>{if(x.operations.length&&x.operations.every(R=>R.type==="set_selection")){T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)});return}const A=x.operations.length&&x.operations.some(R=>R.type==="set_viewport");if(A&&uL(x)){S4(x,!1),T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)});return}T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)}),A?xT(x):sL(x),Om(x),ne(x).forEach(R=>{gn.getElementRef(R).updateActiveSection()})}),Gw.set(x,()=>{D()}),()=>{Nw.delete(x),Gw.delete(x)}),[x]);const b=Y.useRef(!0);return Y.useEffect(()=>{if(b.current){b.current=!1;return}e!==m.board.children&&!gw.get(x)&&(x.children=e,T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)}),un.fitViewport(x))},[e]),O.jsx(LT.Provider,{value:m,children:n})},Iz=(e,n,i,r,o)=>{let a=uF(Z_(Y_(K_(cF(sF(X_(fF(lF(Fz(Az(Tz(W_(e,n)))))))))))));return i.forEach(l=>{a=l(a)}),kz(a),r&&(a.viewport=r),o&&(a.theme=o),a},Hz=e=>new K4(e);function Nz(e,n){return Math.sqrt(Gz(e,n))}function Gz(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function ng(e,n,i){return[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]}function zz(e,n){const i=e[n+0],r=e[n+1],o=e[n+2],a=e[n+3];let l=3*r[0]-2*i[0]-a[0];l*=l;let c=3*r[1]-2*i[1]-a[1];c*=c;let h=3*o[0]-2*a[0]-i[0];h*=h;let d=3*o[1]-2*a[1]-i[1];return d*=d,l<h&&(l=h),c<d&&(c=d),l+c}function DS(e,n,i,r){const o=r||[];if(zz(e,n)<i){const a=e[n+0];o.length?Nz(o[o.length-1],a)>1&&o.push(a):o.push(a),o.push(e[n+3])}else{const l=e[n+0],c=e[n+1],h=e[n+2],d=e[n+3],p=ng(l,c,.5),m=ng(c,h,.5),w=ng(h,d,.5),x=ng(p,m,.5),T=ng(m,w,.5),D=ng(x,T,.5);DS([l,p,x,D],0,i,o),DS([D,T,w,d],0,i,o)}return o}function Zo(e,n=.15,i){const r=[],o=(e.length-1)/3;for(let a=0;a<o;a++){const l=a*3;DS(e,l,n,r)}return r}var we;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(we||(we={}));var ye;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(ye||(ye={}));var de;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(de||(de={}));var bs;(function(e){e.name="name",e.content="content"})(bs||(bs={}));var Xo;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(Xo||(Xo={}));var Pa;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(Pa||(Pa={}));var Og;(function(e){e.table="table"})(Og||(Og={}));const $m={isTable:e=>e.type==="table",isVerticalText:e=>{var n;return((n=e.text)==null?void 0:n.direction)==="vertical"}},gP="plait-draw-plugin-key";var Lg;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(Lg||(Lg={}));const Me={rectangleAndText:4},qx={strokeWidth:2,fill:UB},jz={selectionStrokeWidth:Fi},Vm={width:100,height:100,strokeColor:gr,strokeWidth:2},V7={width:120,height:50},Uz={width:138,height:80},W7={width:100,height:80},$z={width:120,height:100},Vz={text:""},eA={defaultTextMaxWidth:34*14},i3={width:44,height:44},yl={width:120,height:60},Wz={width:70,height:80},Xz={width:80,height:80},qz={width:140,height:70},Yz={width:124,height:60},pP={width:120,height:70},r3={width:160,height:100},bS={width:120,height:80},Kz={width:117,height:59},Zz={width:47,height:33},Qz={width:68,height:100},Jz={width:300,height:240},tj={width:210,height:150,texts:[{id:bs.name,text:"",align:Tr.left},{id:bs.content,text:"",align:Tr.left}]},ej={width:18,height:80},Z2={width:120,height:60},nj={width:200,height:150},X7={width:40,height:40},ij={width:20,height:20},rj={width:70,height:56},oj={width:120,height:56},sj={width:70,height:34},aj={width:400,height:280,texts:[{id:bs.name,text:"Opt | Alt | Loop",align:Tr.left},{id:bs.content,text:"[Condition]",align:Tr.left}]},lj={width:230,height:180,texts:[{text:"Class",align:Tr.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:Tr.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Tr.left}]},uj={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:Tr.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Tr.left}]},mP={[we.pentagonArrow]:V7,[we.processArrow]:V7,[we.cloud]:$z,[we.twoWayArrow]:Uz,[we.leftArrow]:W7,[we.rightArrow]:W7},vP={[ye.connector]:i3,[ye.process]:yl,[ye.decision]:qz,[ye.data]:Yz,[ye.terminal]:yl,[ye.manualInput]:Kz,[ye.preparation]:yl,[ye.manualLoop]:yl,[ye.merge]:Zz,[ye.delay]:yl,[ye.storedData]:yl,[ye.or]:i3,[ye.summingJunction]:i3,[ye.predefinedProcess]:yl,[ye.offPage]:yl,[ye.document]:pP,[ye.multiDocument]:bS,[ye.database]:Wz,[ye.hardDisk]:yl,[ye.internalStorage]:Xz,[ye.noteCurlyLeft]:r3,[ye.noteCurlyRight]:r3,[ye.noteSquare]:r3,[ye.display]:yl},yP={[de.actor]:Qz,[de.useCase]:pP,[de.container]:Jz,[de.note]:Z2,[de.package]:tj,[de.combinedFragment]:aj,[de.class]:lj,[de.interface]:uj,[de.activation]:ej,[de.object]:Z2,[de.deletion]:X7,[de.activityClass]:Z2,[de.simpleClass]:Z2,[de.component]:bS,[de.template]:bS,[de.componentBox]:nj,[de.port]:ij,[de.branchMerge]:X7,[de.assembly]:oj,[de.providedInterface]:sj,[de.requiredInterface]:rj},cj={[de.package]:Object.keys(bs),[de.combinedFragment]:Object.keys(bs)},rx=10,fj=6,hj=8,wP=[ye.or,ye.summingJunction,de.activation,de.deletion,de.port,de.branchMerge,de.assembly,de.providedInterface,de.requiredInterface],dj=[de.package,de.combinedFragment],gj=[ye.noteCurlyLeft,ye.noteCurlyRight,ye.noteSquare,de.requiredInterface,de.deletion],nA=()=>[...Object.keys(we),...Object.keys(ye),...Object.keys(de)],xP=()=>Object.keys(Pa),pj=()=>Object.keys(ye),mj=()=>Object.keys(de),q7=()=>Object.keys(qn),vj=()=>Object.keys(cx),yj=1e3,CP={[Li.default]:{strokeColor:gr,fill:"#FFFFFF"},[Li.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[Li.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[Li.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[Li.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[Li.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},rm=42,wj={width:580,height:524},xj={width:524,height:580},Cj={width:580,height:524},Ej={width:524,height:580},EP={[Pa.swimlaneHorizontal]:Ej,[Pa.swimlaneVertical]:Cj,[Pa.swimlaneHorizontalWithHeader]:xj,[Pa.swimlaneVerticalWithHeader]:wj},ox=5,SP={strokeWidth:2},Sj=4,Tj=6,Aj=1,Dj=1,bj=12,dg=3,Bj="",Wm=new WeakMap,Y7=(e,n,i,r)=>{const o=Wm.get(e);return Wm.set(e,{...o,[XP(n,i)]:r})},Sm=(e,n,i)=>Wm.get(e)[XP(n,i)],K7=(e,n)=>{const i=Wm.get(e);delete i[n],Wm.set(e,i)};class iA{get shape(){return this.element.shape||this.element.type}constructor(n,i,r,o){this.board=n,this.texts=r,this.element=i,this.options=o}initialize(){const n=(this.board.getPluginOptions(wS)||{}).textPlugins;this.textManages=this.texts.map(r=>{const o=this.createTextManage(r,n);return Y7(this.board,this.element,r,o),o}),gn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(n){const i=H.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(r=>{const o=Sm(this.board,this.element,r);r.text&&o&&(o.draw(r.text),n.append(o.g),(this.element.angle||this.element.angle===0)&&o.updateAngle(i,this.element.angle))})}update(n,i,r,o){this.element=n;const a=H.getCenterPoint(this.board.getRectangle(this.element)),l=(this.board.getPluginOptions(wS)||{}).textPlugins,c=i.filter(h=>!r.find(d=>d.id===h.id));c.length&&c.forEach(h=>{const d=Sm(this.board,n,h),p=this.textManages.findIndex(m=>m===d);p>-1&&h.text&&this.textManages.splice(p,1),d==null||d.destroy(),K7(this.board,h.id)}),r.forEach(h=>{if(h.text){let d=Sm(this.board,this.element,h);d?(d.updateText(h.text),d.updateRectangle()):(d=this.createTextManage(h,l),Y7(this.board,n,h,d),d.draw(h.text),o.append(d.g),this.textManages.push(d)),(this.element.angle||this.element.angle===0)&&d.updateAngle(a,this.element.angle)}})}createTextManage(n,i){return new yv(this.board,{getRectangle:()=>this.getRectangle(n),onChange:o=>this.options.onChange(this.element,o,n),getMaxWidth:()=>this.getMaxWidth(n),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,n):this.getRectangle(n),textPlugins:i})}getRectangle(n){const i=br(this.shape).getTextRectangle;return i?i(this.board,this.element,n):vf(this.board,this.element)}getMaxWidth(n){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(n).width}destroy(){gn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(i=>{K7(this.board,i.id)})}}const BS=e=>{const n=ne(e);return n&&n.length===1&&At.isElementByTable(n[0])},Pj=(e,n)=>(n!=null&&n.length?n:ne(e)).filter(r=>At.isElementByTable(r)),rA=new WeakMap;function gg(e){return rA.get(e)}function TP(e,n){return rA.set(e,n)}function Z7(e){return rA.delete(e)}function wv(e,n){const i=e==null?void 0:e.buildTable(n);if(!i||!i.points||!i.columns||!i.rows)throw new Error("can not get table cells points");const r=H.getRectangleByPoints(i.points),o=i.columns.length,a=i.rows.length,l=Q7(i.columns,r.width,o,!0),c=Q7(i.rows,r.height,a,!1);return i.cells.map(d=>{const p=i.rows.findIndex(A=>A.id===d.rowId),m=i.columns.findIndex(A=>A.id===d.columnId);let w=r.x;for(let A=0;A<m;A++)w+=l[A];let x=r.y;for(let A=0;A<p;A++)x+=c[A];const T=J7(d,l,m,!0),D=w+T,b=J7(d,c,p,!1),B=x+b;return{...d,points:[[w,x],[D,B]]}})}function md(e,n,i){try{const r=wv(e,n),o=r&&n.cells.findIndex(a=>a.id===i);return r[o]}catch{throw new Error("can not get table cell points")}}function Q7(e,n,i,r){const o=[],a=r?"width":"height";let l=n;e.forEach((d,p)=>{d[a]&&(o[p]=d[a],l-=d[a])});const c=i-o.filter(d=>!!d).length,h=c>0?l/c:0;for(let d=0;d<i;d++)o[d]||(o[d]=h);return o}function J7(e,n,i,r){const o=r?e.colspan||1:e.rowspan||1;let a=0;for(let l=0;l<o;l++){const c=i+l;a+=n[c]}return a}function tb(e,n,i){const r=e.buildTable(n),o=wv(e,r),a=H.getRectangleByPoints([i,i]),l=o.find(c=>{const h=H.getRectangleByPoints(c.points);return H.isHit(a,h)});return l?r.cells.find(c=>c.id===l.id):null}function eb(e,n){const i=AP(e,n);i&&i.edit()}function AP(e,n){return Sm(e,void 0,n)}const DP=(e,n,i,r)=>{const o=e.columns.map(l=>l.id===n?{...l,width:i}:l),a=[e.points[0],[e.points[1][0]+r,e.points[1][1]]];return{columns:o,points:a}},bP=(e,n,i,r)=>{const o=e.rows.map(l=>l.id===n?{...l,height:i}:l),a=[e.points[0],[e.points[1][0],e.points[1][1]+r]];return{rows:o,points:a}};function Mj(e,n,i,r){const o=`${r}Id`;e.forEach(a=>{a[o]===n&&(a[o]=i)})}function nb(e,n){e[`${n}s`].forEach(i=>{const r=Mn();Mj(e.cells,i.id,r,n),i.id=r})}function Rj(e){e.forEach(n=>{const i=Mn();n.id=i})}function BP(e){return e.text}function Oj(e,n,i){const r=wv(e,n),o=i.map(a=>r.find(c=>c.id===a.id).points);return H.getRectangleByPoints(o)}const o3=(e,n,i=null)=>{const r={id:Mn(),rowId:e,columnId:n};return i!==null&&(r.text={children:[{text:i}],align:Tr.center}),r},Lj=6,s3=new WeakMap,qg=e=>{let n="";switch(!0){case At.isText(e):{n=xs.text;break}case At.isBasicShape(e):{n=xs.basicShape;break}case At.isFlowchart(e):{n=xs.flowchart;break}case At.isArrowLine(e):{n=xs.arrowLine;break}case At.isUML(e):n=xs.UML}return n},PP=()=>({...Wx(xs.arrowLine)}),vd=e=>{let n="";At.isBasicShape({shape:e})?n=e===we.text?xs.text:xs.basicShape:At.isUML({shape:e})?n=xs.UML:n=xs.flowchart;const i={...Wx(n)},r={...i.text};return delete i.text,{textProperties:r,geometryProperties:i}},oA=(e,n)=>{var a;const i=qg(e);let r=((a=Wx(i))==null?void 0:a.text)||{};const o=n.find(l=>l.type==="set_node");if(o){const{properties:l,newProperties:c}=o;for(const h in c){const d=c[h];d==null?delete r[h]:r[h]=d}for(const h in l)c.hasOwnProperty(h)||delete r[h];JT(i,"text",r)}},_j=(e,n)=>{const i=s3.has(e)?s3.get(e):[],r=i.indexOf(n);n===we.text||r===0||(r!==-1?i.splice(r,1):i.length===Lj&&i.pop(),i.unshift(n),s3.set(e,i))},Fj="debug:plait:line-mirror",Q2=Gg(Fj),sA=(e,n)=>{const i=[...n];return Ce.isVertical(i,e,dg)&&(i[0]=e[0]),Ce.isHorizontal(i,e,dg)&&(i[1]=e[1]),i};function kj(e,n,i,r){const o={previous:null,next:null},a=e[r],l=e[r+1],c=Ce.isHorizontal(a,l),h=Ce.isVertical(a,l),d=e[r-1]??e[0],p=e[r-2]??n;(c&&Ce.isHorizontal(p,d)||h&&Ce.isVertical(p,d))&&(o.previous=d);const m=e[r+2]??e[e.length-1],w=e[r+3]??i;return(c&&Ce.isHorizontal(m,w)||h&&Ce.isVertical(m,w))&&(o.next=m),o}function Ij(e,n,i,r){let o=e,a=n;if(Ce.isHorizontal(e,n)){const l=Ce.getOffsetY(i.startPoint,i.endPoint);let c=e[1]+l;r.previous&&Math.abs(r.previous[1]-c)<dg?c=r.previous[1]:r.next&&Math.abs(r.next[1]-c)<dg&&(c=r.next[1]),o=[e[0],c],a=[n[0],c]}if(Ce.isVertical(e,n)){const l=Ce.getOffsetX(i.startPoint,i.endPoint);let c=e[0]+l;r.previous&&Math.abs(r.previous[0]-c)<dg?c=r.previous[0]:r.next&&Math.abs(r.next[0]-c)<dg&&(c=r.next[0]),o=[c,e[1]],a=[c,n[1]]}return[o,a]}function MP(e,n,i,r,o){let a=null,l=null;const c=r[o],h=r[o+1];if(!c||!h)return{index:a,deleteCount:l};const d=i.slice(1,-1),p=d.findIndex(w=>Ce.isEquals(w,c)),m=d.findIndex(w=>Ce.isEquals(w,h));if(Math.max(p,m)>-1){if(p>-1&&m>-1)return{index:p,deleteCount:2};if(p>-1&&m===-1)return p<d.length-1&&Ce.isAlign([d[p],d[p+1],c,h])?{index:p,deleteCount:2}:{index:p,deleteCount:1};if(p===-1&&m>-1)return m>0&&Ce.isAlign([d[m],d[m-1],c,h])?{index:m-1,deleteCount:2}:{index:m,deleteCount:1}}else for(let w=0;w<d.length-1;w++){const x=d[w],T=d[w+1];if(Ce.isAlign([x,T,c,h])){a=w,l=2;break}if(Ce.isAlign([x,T,c])){a=Math.min(w+1,d.length-1),l=1;break}if(Ce.isAlign([x,T,h])){a=Math.max(w-1,0),l=1;break}}if(a===null)if(l=0,d.length>0){const w=Ev(e,n),x=Sv(e,n,w),T=Pg(oP(x,e)),D=gu(T.slice(1,T.length-1)),b=[r[0],...d,r[r.length-1]],B=RP(e,b,D,x);for(let A=o-1;A>=0;A--){const I=B.slice(1,-1).findIndex(R=>Ce.isEquals(R,r[A]));if(I>-1){a=I+1;break}}a===null&&(a=0,Ce.isAlign(r)&&(l=d.length))}else a=0;return{index:a,deleteCount:l}}function RP(e,n,i,r){for(let o=1;o<n.length-2;o++)Hj(e,o,n,i,r);return n}const Hj=(e,n,i,r,o)=>{const a=i[n-1],l=i[n],c=i[n+1],h=i[n+2],d=[a,l],p=[c,h],m=Ce.isAlign(d),w=Ce.isAlign(p);let x=!1,T=!1;if(!m||!w){const D=PS(r,d[0],d[1]),b=PS(r,p[0],p[1]),B=D.length>0&&b.length>0;x=!m&&!B,T=!w&&!B}if(x||T){const D=[l,c],b=Gj(D,r),B=zj(e,D,b,o.sourceRectangle,o.targetRectangle);if(B.length===1){const A=B[0];x&&i.splice(n,1,A[0]),T&&i.splice(n+1,1,A[1])}else{const I=Ce.isHorizontal(l,c)?0:1;if(x){const R=[l[0],l[1]];R[I]=a[I],i.splice(n,1,R)}if(T){const R=[c[0],c[1]];R[I]=h[I],i.splice(n+1,1,R)}}}};function Nj(e,n,i,r,o){const{deleteCount:a}=MP(e,n,i,r,o);return a!==null&&a>1}function PS(e,n,i){let r=[],o=-1,a=-1;for(let l=0;l<e.length;l++)if(Ce.isAlign([e[l],n])&&(o=l),o>-1&&Ce.isAlign([e[l],i])){a=l;break}return o>-1&&a>-1&&(r=e.slice(o,a+1)),r}function Gj(e,n){const i=Ce.isHorizontal(e[0],e[1]),r=[];for(let o=0;o<n.length-1;o++){const a=n[o],l=n[o+1],c=Ce.isHorizontal(a,l,.1);i&&c&&r.push([a,l]),!i&&!c&&r.push([a,l])}return r}function zj(e,n,i,r,o){Q2.isDebug()&&Q2.clear();const a=[];for(let l=0;l<i.length;l++){const c=i[l],h=[n[0][0],n[0][1]],d=[n[1][0],n[1][1]],m=Ce.isHorizontal(h,d)?0:1;h[m]=c[0][m],d[m]=c[1][m];const w=H.getRectangleByPoints([h,d,...c]);!H.isHit(w,r)&&!H.isHit(w,o)&&(a.push([h,d]),Q2.isDebug()&&Q2.drawPolygon(e,H.getCornerPoints(w)))}return a}const OP=e=>e.length===1?!0:e.some((n,i)=>{const r=e[i-1],o=e[i+1],a=r&&[r,n],l=o&&[n,o],c=a&&Ce.isAlign(a),h=l&&Ce.isAlign(l);return i===0?!h:i===e.length-1?!c:!c&&!h}),ib=20,jj=(e,n,i)=>{const r=ze();if(dr.isSourceMark(e,ur.none)&&dr.isTargetMark(e,ur.none))return null;const o=Tn(e),a=o*o/3;if(n.length===1&&(n=[n[0],[n[0][0]+.1,n[0][1]]]),!dr.isSourceMark(e,ur.none)){const l=zm(n[0],n[1],ib+a),c=rb(e,{marker:e.source.marker,source:l,target:n[0],isSource:!0},i);c&&r.appendChild(c)}if(!dr.isTargetMark(e,ur.none)){const l=zm(n[n.length-1],n[n.length-2],ib+a),c=rb(e,{marker:e.target.marker,source:l,target:n[n.length-1],isSource:!1},i);c&&r.appendChild(c)}return r},rb=(e,n,i)=>{const{marker:r,target:o,source:a,isSource:l}=n;let c;switch(r){case ur.openTriangle:{c=Wj(e,a,o,i);break}case ur.solidTriangle:{c=Vj(a,o,i);break}case ur.arrow:{c=$j(e,a,o,i);break}case ur.sharpArrow:{c=Uj(a,o,i);break}case ur.oneSideUp:{c=ob(a,o,l?"down":"up",i);break}case ur.oneSideDown:{c=ob(a,o,l?"up":"down",i);break}case ur.hollowTriangle:{c=qj(a,o,i);break}case ur.singleSlash:{c=Xj(a,o,l,i);break}}return c},Uj=(e,n,i)=>{const r=n,{pointLeft:o,pointRight:a}=Ug(e,n,20),l=ze(),c=gT();let h=`M${a[0]},${a[1]}A25,25,20,0,1,${o[0]},${o[1]}L${r[0]},${r[1]}Z`;return c.setAttribute("d",h),c.setAttribute("stroke",`${i==null?void 0:i.stroke}`),c.setAttribute("stroke-width",`${i==null?void 0:i.strokeWidth}`),c.setAttribute("fill",`${i==null?void 0:i.stroke}`),l.appendChild(c),l},$j=(e,n,i,r)=>{const o=fi(n,i),a=Tn(e),l=[i[0]+a*o[0]/2,i[1]+a*o[1]/2],c=be(...n,...l),h=[l[0]-(c*3/5+a)/2*o[0],l[1]-(c*3/5+a)/2*o[1]],{pointLeft:d,pointRight:p}=Ug(n,l,30),m=Ys([d,l,p,h],{...r,fill:r.stroke},!0);return m.querySelector("path").setAttribute("stroke-linejoin","round"),m},Vj=(e,n,i)=>{const r=n,{pointLeft:o,pointRight:a}=Ug(e,r,30);return Ys([o,r,a],{...i,fill:i.stroke},!0)},Wj=(e,n,i,r)=>{const o=fi(n,i),a=Tn(e),l=[i[0]+a*o[0]/2,i[1]+a*o[1]/2],{pointLeft:c,pointRight:h}=Ug(n,l,40);return Ys([c,l,h],r)},ob=(e,n,i,r)=>{const{pointLeft:o,pointRight:a}=Ug(e,n,40);return Ys([i==="up"?a:o,n],r)},Xj=(e,n,i,r)=>{const o=be(...e,...n),a=zm(n,e,o/2),l=i?120:60,c=Dg(...e,...a,l*Math.PI/180),h=Dg(...n,...a,l*Math.PI/180);return Ys([c,h],r)},qj=(e,n,i)=>{const{pointLeft:r,pointRight:o}=Ug(e,n,30);return Ys([r,o,n],{...i,fill:"white"},!0)};class LP extends Bs{canDraw(n){return!0}draw(n){let i;return i=Zj(this.board,n),i}}const Bi=(e,n,i)=>{const r=Tw(e,n,{fontSize:Um,fontFamily:xg},i);return Yj(r)},Yj=e=>({...e,width:e.width<ox?ox:e.width}),Kj=(e,n,i,r,o,a)=>({id:Mn(),type:"arrow-line",shape:e,source:i,texts:o||[],target:r,opacity:1,points:n,...a}),To=(e,n)=>{switch(n.shape){case qn.elbow:return Qx(e,n);case qn.curve:return _P(e,n);default:{const i=dr.getPoints(e,n),r=Ev(e,n);return i[0]=r.source.point,i[i.length-1]=r.target.point,i}}},_P=(e,n)=>{if(n.points.length===2){const i=Ev(e,n),{source:r,target:o}=i,a=i.source.boundElement,l=i.target.boundElement;let c=[r.point];const d=12+be(...r.point,...o.point)/3;if(a&&c.push(hg(r.point,r.vector,d)),l&&c.push(hg(o.point,o.vector,d)),a&&!l||!a&&l){c.push(o.point);const m=eU(c);return Zo(m)}return!a&&!l&&(c.push(hg(r.point,r.vector,d)),c.push(hg(o.point,o.vector,d))),c.push(o.point),Zo(c)}else{let i=dr.getPoints(e,n);i=Pg(i);const r=hv(i);return Zo(r)}},Zj=(e,n)=>{const i=Tn(n),r=Kg(e,n),o=Zg(e,n),a=pf(o,i),l={stroke:r,strokeWidth:i,strokeLineDash:a},c=ze();let h=To(e,n),d;n.shape===qn.curve?d=G.getRoughSVG(e).curve(h,l):d=Ys(h,l);const p=Mn();d.setAttribute("mask",`url(#${p})`),n.strokeStyle===Co.dotted&&Ze(d,"round"),c.appendChild(d);const{mask:m,maskTargetFillRect:w}=nU(e,n,p);c.appendChild(m),d.appendChild(w);const x=jj(n,h,{stroke:r,strokeWidth:i});return x&&c.appendChild(x),c},_g=(e,n,i)=>{const r=dA(e,i,n),o=r.connectorPoint||r.edgePoint;return Qj(o,i)},Qj=(e,n)=>{let i=H.getRectangleByPoints(n.points);return[(e[0]-i.x)/i.width,(e[1]-i.y)/i.height]},Jj=(e,n)=>{const i=H.getRectangleByPoints(n.points),r=yf(n);return br(r).getConnectorPoints(i).find(a=>be(...a,...e)<=hj)},aA=(e,n,i)=>{const r=n.texts[i],o=To(e,n),a=qB(o,r.position),l=Bi(e,r.text);return{x:a[0]-l.width/2,y:a[1]-l.height/2,width:l.width,height:l.height}},tU=e=>hd(e,{match:n=>At.isArrowLine(n),recursion:n=>At.isDrawElement(n)}),eU=e=>{const n=[],i=e.length/3;for(let r=0;r<i;r++){const o=e[r],a=e[r+1],l=e[r+2],c=be(...o,...a),h=be(...l,...a),d=zm(o,a,c*2/3),p=zm(l,a,h*2/3);n.push(o,d,p,l)}return n},lA=(e,n,i,r,o,a,l)=>{const c=hA(e,r),h=c?_g(e,r,c):void 0,d=o?_g(e,i,o):void 0,p=c?c.id:void 0,m=new LP(e),w=PP();let x,T;x=w.source,T=w.target,x&&delete w.source,T&&delete w.target;const D=Kj(n,[i,r],{marker:x||ur.none,connection:d,boundId:o==null?void 0:o.id},{marker:T||ur.arrow,connection:h,boundId:p},[],{strokeWidth:SP.strokeWidth,...w,...l}),B=To(e,D)[0];return D.points[1]=sA(B,r),m.processDrawing(D,a),G.getElementTopHost(e).append(a),D};function nU(e,n,i){const r=SO();r.setAttribute("id",i);const o=To(e,n);let a=H.getRectangleByPoints(o);a=H.getOutlineRectangle(a,-30);const l=PE(a,{fill:"white"});r.appendChild(l),n.texts.forEach((d,p)=>{let m=aA(e,n,p);m=H.inflate(m,Sj*2);const w=PE(m,{fill:"black"});r.appendChild(w)});const h=PE(a);return h.setAttribute("opacity","0"),h.setAttribute("fill","none"),{mask:r,maskTargetFillRect:h}}const uA=(e,n,i)=>{const r=n.texts;if(!r.length)return-1;const o=To(e,n);return r.findIndex(a=>{const l=qB(o,a.position),c=Bi(e,a.text),h={x:l[0]-c.width/2,y:l[1]-c.height/2,width:c.width,height:c.height};return H.isHit(h,H.getRectangleByPoints([i,i]))})},cA=e=>dj.includes(e),Su=e=>At.isGeometry(e)&&cA(e.shape),iU=e=>cj[e],rU=(e,n,i={})=>{const r=Mn(),o=oU(e);return{id:r,type:"geometry",shape:e,angle:0,opacity:1,texts:o,points:n,...i}},oU=e=>{var l;const i={...vd(e).textProperties},r=i==null?void 0:i.align;i==null||delete i.align;const o=((l=yA(e))==null?void 0:l.texts)||[];return(iU(e)||[]).map(c=>{const h=o==null?void 0:o.find(d=>(d==null?void 0:d.key)===c);return{id:c,text:gd((h==null?void 0:h.text)||"",r||(h==null?void 0:h.align)||Tr.center,i)}})},sU=(e,n,i)=>{const r=br(n.shape),o=H.getRectangleByPoints([i,i]);let a;return r.getTextRectangle&&(a=n.texts.find(l=>{const c=r.getTextRectangle(e,n,{id:l.id});return H.isHit(o,c)})),a};class FP extends Bs{canDraw(n){return!0}draw(n){let i;return i=uU(this.board,n),i}}const Jc=(e,n)=>{switch(n.shape){case Ym.straight:return n.points;case Ym.curve:{if(n.points.length===2)return Zo(n.points);{let i=n.points;const r=hv(i);return Zo(r)}}default:return null}},aU=(e,n,i)=>({id:Mn(),type:"vector-line",shape:e,opacity:1,points:n,...i}),lU=(e,n,i,r,o)=>{const a=new FP(e),l=PP(),c=aU(n,[...i,r],{strokeWidth:SP.strokeWidth,...l}),h=i[i.length-1];return c.points[c.points.length-1]=sA(h,r),a.processDrawing(c,o),G.getElementTopHost(e).append(o),c},uU=(e,n)=>{const i=Tn(n),r=Kg(e,n),o=Zg(e,n),a=pf(o,i),l=Kx(e,n),c={stroke:r,strokeWidth:i,strokeLineDash:a,fill:l},h=ze();let d=Jc(e,n);const p=Ys(d,c),m=Mn();return p.setAttribute("mask",`url(#${m})`),n.strokeStyle===Co.dotted&&Ze(p,"round"),h.appendChild(p),h},Yg=e=>{const n=[];for(let i=0;i<e.length;i++){let r=i==e.length-1?0:i+1;n.push([(e[i][0]+e[r][0])/2,(e[i][1]+e[r][1])/2])}return n},kP=(e,n)=>{const i=[];for(let r=1;r<=e.length;r++){let o=e[r-1],a=r===e.length?e[0]:e[r];const l=kG(n,o,a);i.push(...l)}return i},pr=(e,n)=>{for(let i=1;i<=e.length;i++){let r=e[i-1],o=i===e.length?e[0]:e[i];if(XB(n,r,o))return[r,o]}return null};function MS(e){const n=e.width/7,i=e.height/3.2,r=n/8.5,o=i/20,a=[e.x+n,e.y+i],l=[{rx:r,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2,endY:e.y+i/2},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*4.2,endY:e.y+i/2.2},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5.8,endY:e.y+i},{rx:r,ry:o*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*6,endY:e.y+i*2.2},{rx:r,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5,endY:e.y+i*2.8},{rx:r,ry:o/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2.8,endY:e.y+i*2.8},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+i*2.2},{rx:r,ry:o*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+i}];return{startPoint:a,arcCommands:l}}const IP={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,arcCommands:a}=MS(n),l=`M ${o[0]} ${o[1]} `+a.map(h=>`A ${h.rx} ${h.ry} ${h.xAxisRotation} ${h.largeArcFlag} ${h.sweepFlag} ${h.endX} ${h.endY}`).join(`
`)+" Z",c=r.path(l,{...i,fillStyle:"solid"});return EO(c,"round"),c},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:i,arcCommands:r}=MS(e);let o=1/0,a=n,l=i;for(const c of r){const h=Fx(n,l,c),d=be(n[0],n[1],h[0],h[1]);d<o&&(o=d,a=h),l=[c.endX,c.endY]}return a},getEdgeByConnectionPoint(e,n){const i=IP.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=.6666666666666666;return H.getRectangleByPoints(n.points),hi(e,n,i)}},HP=(e,n,i)=>uA(e,n,i)!==-1,Xm=(e,n)=>l4(n,e)<=aT,NP=(e,n,i)=>{const r=To(e,n);return HP(e,n,i)||Xm(r,i)},GP=(e,n,i)=>{const r=Jc(e,n);return Cv(n.points)&&rf(i,r)||Xm(r,i)},cU=(e,n,i)=>{const r=br(n.shape);if(Su(n))return n.texts.some(a=>{const l=r.getTextRectangle(e,n,{id:a.id});return sx(i,H.getCornerPoints(l),n.angle)});{const o=r.getTextRectangle?r.getTextRectangle(e,n):vf(e,n);return sx(i,H.getCornerPoints(o),n.angle)}},zP=(e,n,i)=>{const r=br(n.shape);if(Su(n))return n.texts.some(a=>{const l=r.getTextRectangle(e,n,{id:a.id});return H.isPointInRectangle(l,i)});{const o=r.getTextRectangle?r.getTextRectangle(e,n):vf(e,n);return H.isPointInRectangle(o,i)}},jP=e=>{if(!fA(e))return!0;const n=ZT(e);return j.isEmpty(n,n.children[0])},fU=(e,n,i)=>{const r=H.getRectangleByPoints([i.anchor,i.focus]);if(At.isGeometry(n)){const o=sb(e,r,n);return o||!jP(n)&&cU(e,n,r)}if(At.isImage(n))return sb(e,r,n);if(At.isArrowLine(n)){const o=To(e,n);return zw(o,r)}if(At.isVectorLine(n)){const o=Jc(e,n);return zw(o,r)}return null},sb=(e,n,i)=>{const r=H.getRectangleByPoints(i.points);return sx(n,H.getCornerPoints(r),i.angle)},sx=(e,n,i)=>{let r=T_(n,i)||n;return zw(r,e)},UP=(e,n)=>{let i=$P(e,n),r=n.length;i&&(r=n.indexOf(i)+1);const o=n.slice(0,r),a=dU(o);return a?a[0]:sz(e,o,"asc")[0]},$P=(e,n)=>{let i=null;for(let r=0;r<n.length;r++){const o=n[r];if(Yx(e,o)||xv(o)){const a=Kx(e,o);if(az(a)){i=o;break}}}return i},hU=(e,n)=>$P(e,[n])!==null,dU=e=>{const n=e.filter(i=>At.isText(i)||At.isLine(i)||At.isImage(i));return n.length?n:null},gU="debug:plait:hit:shape:edge:sample-points",ig=Gg(gU),pU=[we.cloud],mU=(e,n,i,r=!0)=>{const o=e.getRectangle(n);if(i=af(e,i,n)||i,At.isGeometry(n)&&o){if(ig.isDebug()&&pU.includes(n.shape)){ig.clear();const{startPoint:c,arcCommands:h}=MS(o),d=[c,...h.map(x=>[x.endX,x.endY])];ig.drawCircles(e,d,5,!1);let p=1/0,m=i,w=c;for(const x of h){const T=Fx(i,w,x),D=be(i[0],i[1],T[0],T[1]),{center:b}=u4(w,x);ig.drawCircles(e,[b],8,!1,{fill:"yellow"}),D<p&&(p=D,m=T),w=[x.endX,x.endY]}ig.drawCircles(e,[i],12,!1,{fill:"black",stroke:"black"}),ig.drawCircles(e,[m],12,!1,{fill:"green",stroke:"green"})}if(VP(e,n,i,aT))return!0;const a=br(yf(n));if(At.isText(n)){const c=vf(e,n);return H.isPointInRectangle(c,i)}return r&&jP(n)&&!hU(e,n)?!1:zP(e,n,i)||a.isInsidePoint(o,i)}if(At.isImage(n)){const a=H.getRectangleByPoints(n.points);return H.isPointInRectangle(a,i)}return At.isArrowLine(n)?NP(e,n,i):At.isVectorLine(n)?GP(e,n,i):null},VP=(e,n,i,r)=>{const o=QP(n,i);return be(o[0],o[1],i[0],i[1])<=r},vU=(e,n,i,r)=>{const o=H.inflate(H.getRectangleByPoints(n.points),r);return br(yf(n)).isInsidePoint(o,i)},yU=(e,n,i)=>{const r=e.getRectangle(n);if(i=af(e,i,n)||i,At.isGeometry(n)&&!At.isGeometryByTable(n)){const o=br(yf(n)),a=o.isInsidePoint(r,i);if(a)return a;if(o.getTextRectangle){const l=zP(e,n,i);if(l)return l}}if(At.isImage(n)){const o=H.getRectangleByPoints(n.points);return H.isPointInRectangle(o,i)}return At.isArrowLine(n)?NP(e,n,i):At.isVectorLine(n)?GP(e,n,i):null},vf=(e,n)=>{const i=At.isText(n)?n.autoSize:!1,r=H.getRectangleByPoints(n.points),o=Tn(n),a=r.width-Me.rectangleAndText*2-o*2,l=Bi(e,n.text,i?eA.defaultTextMaxWidth:a);return i?{height:l.height,width:l.width,x:r.x+Me.rectangleAndText+o,y:r.y+(r.height-l.height)/2}:{height:l.height,width:a>0?a:0,x:r.x+Me.rectangleAndText+o,y:r.y+(r.height-l.height)/2}},hi=(e,n,i)=>{const r=H.getRectangleByPoints(n.points),o=i*r.width-Me.rectangleAndText*2-Tn(n)*2,a=Bi(e,n.text,o);return{height:a.height,width:o,x:r.x+(r.width-o)/2,y:r.y+(r.height-a.height)/2}},Tn=e=>At.isText(e)?0:e.strokeWidth||qx.strokeWidth,Pu=(e,n)=>{_j(e,n.shape),Qt.insertNode(e,n,[e.children.length]),zg(e),cd(e,n),un.updatePointerType(e,nn.selection)},fA=e=>At.isText(e)?!0:At.isImage(e)?!1:At.isGeometry(e)?e6(e):At.isArrowLine(e)?dd(e).length>0:At.isElementByTable(e)?e.cells.some(n=>BP(n)):!0,wU=e=>e.some(n=>fA(n)),xv=e=>At.isDrawElement(e)?At.isText(e)||At.isArrowLine(e)||At.isImage(e)?!1:At.isVectorLine(e)?Cv(e.points):At.isGeometry(e)?FU(e):!0:!1,Yx=(e,n)=>At.isCustomGeometryElement(e,n)&&Cv(n.points),hA=(e,n)=>{let i=WP(e,n);if(i){const r=dA(e,i,n);if(r.isHitConnector||r.isHitEdge)return i}return null},dA=(e,n,i)=>{const r=af(e,i,n)||i,o=Jj(r,n),a=QP(n,r);return{isHitEdge:VP(e,n,r,fj),isHitConnector:!!o,connectorPoint:o,edgePoint:a}},WP=(e,n,i=rx)=>{let r=null;return xU(e,o=>{r===null&&vU(e,o,af(e,n,o)||n,i*2)&&(r=o)}),r},xU=(e,n)=>{Ar(e,i=>{!G.isBoard(i)&&At.isShapeElement(i)&&n(i)},ud(e),!0)},ab=(e,n,i,r,o)=>br(i).draw(e,n,r,o),CU=(e,n,i={hasMask:!0,hasConnector:!0})=>{const r=ze(),o=H.getRectangleByPoints(n.points),a=H.inflate(o,W3),l=yf(n);let c;At.isElementByTable(n)&&(c={element:n});const h=ab(e,a,l,{stroke:Ko,strokeWidth:W3},c);if(r.appendChild(h),i.hasMask){const d=ab(e,a,l,{stroke:Ko,strokeWidth:0,fill:xv(n)?mT:qx.fill,fillStyle:"solid"},c);r.appendChild(d)}return i.hasConnector&&br(l).getConnectorPoints(o).forEach(p=>{const m=fd(G.getRoughSVG(e),p,8,{stroke:Ko,strokeWidth:Fi,fill:"#FFF",fillStyle:"solid"});r.appendChild(m)}),r},XP=(e,n)=>e&&Su(e)?`${e.id}-${n.id}`:n.id,Cv=e=>{const n=e[0],i=e[e.length-1];return n[0]===i[0]&&n[1]===i[1]},ax=e=>zx(e,Lg.geometryText,Vz.text),Kg=(e,n)=>{const i=RU(e.theme.themeColorMode);return n.strokeColor||i},Kx=(e,n)=>{const i=At.isFlowchart(n)&&xv(n)?OU(e.theme.themeColorMode):qx.fill;return n.fill||i},Zg=(e,n)=>n.strokeStyle||Co.solid;class qP extends Bs{canDraw(n,i){return!0}draw(n,i){const r=H.getRectangleByPoints(n.points),o=n.shape;if(o===we.text)return;const a=Kx(this.board,n),l=Tn(n),c=Kg(this.board,n),h=Zg(this.board,n),d=pf(h,l);return bU(this.board,H.inflate(r,-l),o,{stroke:c,strokeWidth:l,fill:a,strokeLineDash:d})}}function YP(e,n){const i=[],r=n.shape,o=10;if(r===qn.straight){const a=At.isArrowLine(n)?dr.getPoints(e,n):n.points;for(let l=0;l<a.length-1;l++)be(...a[l],...a[l+1])<o||i.push([(a[l][0]+a[l+1][0])/2,(a[l][1]+a[l+1][1])/2])}if(r===qn.curve){const a=At.isArrowLine(n)?dr.getPoints(e,n):n.points,l=At.isArrowLine(n)?_P(e,n):Jc(e,n);if(a.length===2){const h=l.length-1,d=Math.round((0+h)/2);i.push(l[d])}else for(let c=0;c<a.length-1;c++){const h=l.findIndex(w=>w[0]===a[c][0]&&w[1]===a[c][1]),d=l.findIndex(w=>w[0]===a[c+1][0]&&w[1]===a[c+1][1]),p=Math.round((h+d)/2);be(...a[c],...a[c+1])<o||i.push(l[p])}}if(r===qn.elbow){const a=Qx(e,n),l=Sv(e,n);if(!xA(n,l)){const[c,h]=n6(e,n);for(let d=0;d<a.length-1;d++){if(d==0&&Ce.isEquals(a[d+1],c)||d===a.length-2&&Ce.isEquals(a[a.length-2],h))continue;const[p,m]=a[d],[w,x]=a[d+1],T=[(p+w)/2,(m+x)/2];i.push(T)}}}return i}var fr;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(fr||(fr={}));const KP=(e,n,i)=>{let r=At.isArrowLine(n)?dr.getPoints(e,n):n.points;const o=RS(r,i);if(o!==-1){const c=o;if(o===0)return{handle:fr.source,handleIndex:c};if(o===r.length-1)return{handle:fr.target,handleIndex:c};if(n.shape!==qn.elbow)return{handleIndex:c}}const a=YP(e,n),l=RS(a,i);if(l!==-1)return{handle:fr.addHandle,handleIndex:l}};function RS(e,n){const i=e.map(o=>({x:o[0]-Ba/2,y:o[1]-Ba/2,width:Ba,height:Ba})),r=i.find(o=>H.isHit(H.getRectangleByPoints([n,n]),o));return r?i.indexOf(r):-1}class ZP extends Bs{constructor(n,i={active:!0}){super(n,i),this.board=n,this.onlySelectedCurrentLine=!1}canDraw(n,i){return!!i.selected}draw(n,i){const r=ze(),o=ne(this.board);if(this.onlySelectedCurrentLine=o.length===1,this.onlySelectedCurrentLine){r.classList.add(cv);const a=At.isArrowLine(n)?dr.getPoints(this.board,n):n.points;let l=[...a],c=[];n.shape===qn.elbow&&(l=a.slice(0,1).concat(a.slice(-1)),c=i6(this.board,n,i.linePoints)),l.map(m=>Rm(this.board,m)).forEach(m=>{const w=B7(this.board,m);r.appendChild(w)});const p=YP(this.board,n).map(m=>Rm(this.board,m));if(!G.hasBeenTextEditing(this.board))for(let m=0;m<p.length;m++){const w=p[m];if(n.shape===qn.elbow&&c.length){const T=RS(p,w);if(Nj(this.board,n,[...a],c,T)){const b=B7(this.board,w);r.appendChild(b);continue}}const x=BG(this.board,w);r.appendChild(x)}}else{const a=this.board.getRectangle(n);if(a){const l=qr(this.board,a);let c="0.5";(l.height===0||l.width===0)&&(c="0.8");const h=ka(this.board,l,{stroke:Wg,strokeWidth:jz.selectionStrokeWidth});h.style.opacity=c,r.appendChild(h)}}return r}needUpdate(){return ne(this.board).length===1!==this.onlySelectedCurrentLine}}const JA=class JA extends Bs{constructor(n){super(n,{active:!0}),this.board=n,this.hoverElement=null}canDraw(n,i){const r=ne(this.board);return!!(i.selected&&r.length===1&&!Dr(this.board))}draw(n,i){return this.autoCompleteG=ze(),mA(this.board,n,!0).forEach((o,a)=>{const l=fd(G.getRoughSVG(this.board),o,Tj,{stroke:"none",fill:Mm(Wg,Aj),fillStyle:"solid"});l.classList.add(`line-auto-complete-${a}`),this.autoCompleteG.appendChild(l)}),this.autoCompleteG}removeAutoCompleteG(n){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${n}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};JA.key="line-auto-complete-generator";let Mu=JA;class EU extends iA{get textManage(){return this.textManages[0]}constructor(n,i,r,o){super(n,i,[{id:i.id,text:r}],o)}update(n,i,r,o){Su(n)||super.update(n,[{text:i,id:n.id}],[{text:r,id:n.id}],o)}}class Zx extends Bs{canDraw(n,i){return!0}draw(n,i){const r=H.getRectangleByPoints(n.points),o=Tn(n),a=Kg(this.board,n),l=Zg(this.board,n),c=pf(l,o);return br(Og.table).draw(this.board,r,{strokeWidth:o,stroke:a,strokeLineDash:c},{element:n})}}const yf=e=>At.isImage(e)?we.rectangle:At.isTable(e)?Og.table:e.shape,gA=(e,n)=>At.isUMLClassOrInterface({shape:n})?new Zx(e):new qP(e),SU=(e,n,i)=>{const r=vd(n),o={id:Mn(),type:"geometry",angle:0,opacity:1,points:i,strokeWidth:Vm.strokeWidth,...r.geometryProperties};let a,l;return n===de.class?(a=[{id:Mn(),height:30},{id:Mn()},{id:Mn()}],l=[{id:Mn()}]):(a=[{id:Mn(),height:50},{id:Mn()}],l=[{id:Mn()}]),{...o,shape:n,rows:a,columns:l,cells:TU(e,a,l,n)}},TU=(e,n,i,r)=>{var l;const o=n.length*i.length,a=((l=yA(r))==null?void 0:l.texts)||[];return new Array(o).fill("").map((c,h)=>{const d=Math.floor(h/i.length),p=h%i.length;return{id:Mn(),rowId:n[d].id,columnId:i[p].id,text:{children:[{text:a[h].text}],align:a[h].align}}})},pA=(e,n,i,r={},o={})=>wP.includes(e)?DU(e,n,r):AU(e,n,i,r,o),AU=(e,n,i,r={},o={})=>{let a={},l=Tr.center;return e===we.text&&(a={autoSize:!0},l=void 0),o={...o},o!=null&&o.align&&(l=o==null?void 0:o.align),o==null||delete o.align,{id:Mn(),type:"geometry",shape:e,angle:0,opacity:1,text:gd(i,l,o),points:n,...a,...r}},DU=(e,n,i={})=>({id:Mn(),type:"geometry",shape:e,angle:0,opacity:1,points:n,...i}),bU=(e,n,i,r)=>br(i).draw(e,n,r),QP=(e,n)=>{const i=H.getRectangleByPoints(e.points),r=yf(e);return br(r).getNearestPoint(i,n)},BU=e=>vP[e],PU=e=>mP[e]||Vm,MU=e=>yP[e],mA=(e,n,i=!1)=>{const r=(12+Ba/2)*2,o=H.getRectangleByPoints(n.points),a=qr(e,o),l=i?a:o;return H.getEdgeCenterPoints(H.inflate(l,r))},JP=(e,n)=>n.findIndex(i=>{const r=H.getRectangleByPoints([e]);let o=H.getRectangleByPoints([i]);return o=H.inflate(o,Ba),H.isHit(r,o)}),RU=e=>CP[e].strokeColor,OU=e=>CP[e].fill,vA=(e,n,i)=>{i=i?Number(i):Um;const r=Xx(e,gd(n),{fontSize:i,fontFamily:xg});return{width:r.width+Me.rectangleAndText*2,height:r.height}},t6=(e,n)=>{const i=yA(e);return H.getPoints(H.getRectangleByCenterPoint(n,i.width,i.height))},yA=e=>{const n=pj().includes(e),i=mj().includes(e);return n?BU(e):i?MU(e):PU(e)},wA=(e,n,i)=>{const r=vd(we.text);return pA(we.text,n,i,r.geometryProperties,{...r.textProperties})},qm=(e,n,i)=>{const r=vd(i);return At.isUMLClassOrInterface({shape:i})?SU(e,i,n):cA(i)?rU(i,n,{strokeWidth:Vm.strokeWidth,...r.geometryProperties}):pA(i,n,"",{strokeWidth:Vm.strokeWidth,...r.geometryProperties},{...r.textProperties})},a3=(e,n,i)=>{const r=i?Sm(e,n,i):mv(n);r&&r.edit(()=>{})},e6=e=>_U(e)||Su(e),LU=e=>!wP.includes(e)&&!cA(e),_U=e=>At.isGeometry(e)&&LU(e.shape),FU=e=>!gj.includes(e.shape),kU=e=>e.source.boundId&&e.source.boundId===e.target.boundId,xA=(e,n)=>iz(n)&&!kU(e),Qx=(e,n)=>{const i=Ev(e,n),r=Sv(e,n,i);if(xA(n,r))return gu(NG(i.source.point,i.source.direction,i.target.point,i.target.direction,jB));const o=Pg(oP(r,e)),a=o.slice(1,o.length-1);if(n.points.length===2)return gu(o);{const l=gu(a),h=Pg(dr.getPoints(e,n)).slice(1,-1);if(OP(h))return gu(o);const d=[l[0],...h,l[l.length-1]],p=RP(e,d,l,r),m=[o[0]];for(let x=0;x<p.length-1;x++){let T=p[x],D=p[x+1];if(Ce.isAlign([T,D]))m.push(T);else{const B=PS(l,T,D);B.length?(m.push(T),m.push(...B)):(m.push(T),console.log("unknown data points"))}}return m.push(o[o.length-2],o[o.length-1]),gu(m)}},n6=(e,n)=>{const i=Sv(e,n);return[i.nextSourcePoint,i.nextTargetPoint]},IU=(e,n,i)=>{let r=n.source.boundId?Es(e,n.source.boundId):void 0,o=n.target.boundId?Es(e,n.target.boundId):void 0;if(!r){const d=i.source;r=lb(d.point,d.vector)}if(!o){const d=i.target;o=lb(d.point,d.vector)}let a=H.getRectangleByPoints(r.points);const l=Bl(H.getCornerPoints(a),r)||H.getCornerPoints(a);a=H.getRectangleByPoints(l),a=H.inflate(a,Tn(r)*2);let c=H.getRectangleByPoints(o.points);const h=Bl(H.getCornerPoints(c),o)||H.getCornerPoints(c);return c=H.getRectangleByPoints(h),c=H.inflate(c,Tn(o)*2),{sourceRectangle:a,targetRectangle:c}},lb=(e,n)=>{const i=hg(e,n,-25),r=H.getPoints(H.getRectangleByCenterPoint(i,50,50));return pA(we.rectangle,r,"")};function i6(e,n,i){let r=i??Qx(e,n);const[o,a]=n6(e,n);return r.splice(0,1,o),r.splice(-1,1,a),Pg(r)}const lx=(e,n)=>(n!=null&&n.length?n:ne(e)).filter(r=>At.isDrawElement(r)),CA=e=>ne(e).filter(i=>At.isArrowLine(i)),r6=e=>ne(e).filter(i=>At.isVectorLine(i)),HU=e=>{const n=ne(e);return n&&n.length===1&&At.isSwimlane(n[0])},NU=e=>{const n=ne(e);return n&&n.length===1&&At.isLine(n[0])},o6=(e,n,i)=>{const r=qm(e,n,i);return Pu(e,r),r},GU=(e,n,i)=>{const r=vd(we.text),o=vA(e,i,r.textProperties["font-size"]),a=[n,[n[0]+o.width,n[1]+o.height]],l=wA(e,a,i);Pu(e,l)},zU=(e,n,i)=>{const r=Rg(n),o=Je.get(e,i),a={points:r,text:{...o.text}};At.isText(o)&&o.autoSize&&(a.autoSize=!1),Qt.setNode(e,a,i)},jU=(e,n)=>{const i=ne(e),r=[];i.forEach(o=>{if(At.isGeometry(o)&&!At.isText(o)){const a=G.findPath(e,o);Qt.setNode(e,{shape:n},a),MV(e,{...o,shape:n},r)}}),r.length&&r.forEach(o=>{Ao.resizeArrowLine(e,o.property,o.path)})},s6=(e,n,i,r)=>{let o=n.points,a=At.isText(n)?n.autoSize:!1;const l=Me.rectangleAndText;if(a){const c=i<ox?ox:i,h=ZT(n);if(SS.isActive(h,Tr.right))o=[[o[1][0]-(c+l*2),o[0][1]],[o[1][0],o[0][1]+r]];else if(SS.isActive(h,Tr.center)){const d=Math.abs(o[0][0]-o[1][0]),p=(c-d)/2;o=[[o[0][0]-p-l,o[0][1]],[o[1][0]+p+l,o[0][1]+r]]}else o=[o[0],[o[0][0]+c+l*2,o[0][1]+r]];bl(n)&&(o=XT(H.getRectangleByPoints(n.points),H.getRectangleByPoints(o),H.getCenterPoint(H.getRectangleByPoints(n.points)),H.getCenterPoint(H.getRectangleByPoints(o)),n.angle))}return{points:o}},UU=(e,n,i,r,o)=>{const a={text:i,...s6(e,n,r,o)},l=e.children.findIndex(c=>c===n);Qt.setNode(e,a,[l])},$U=(e,n,i,r)=>{if(At.isText(n)?n.autoSize:!1){const a={...s6(e,n,i,r)},l=e.children.findIndex(c=>c===n);Qt.setNode(e,a,[l])}},VU=(e,n,i)=>{const{width:r,height:o,url:a}=n,l=G.getBoardContainer(e).clientWidth,c=G.getBoardContainer(e).clientHeight,h=Pe(e,ke(e,l/2,c/2)),d=i?[i,[i[0]+r,i[1]+o]]:[[h[0]-r/2,h[1]-o/2],[h[0]+r/2,h[1]+o/2]],p={id:Mn(),type:"image",points:d,url:a};Qt.insertNode(e,p,[e.children.length]),Qt.addSelectionWithTemporaryElements(e,[p])},a6=(e,n,i)=>{Qt.setNode(e,n,i)},WU=(e,n,i)=>{const r=G.findPath(e,n);Qt.setNode(e,{texts:i},r)},XU=(e,n,i)=>{var l;const r=G.findPath(e,n),a=[...(l=n.texts)!=null&&l.length?[...n.texts]:[]];a.splice(i,1),Qt.setNode(e,{texts:a},r)},qU=(e,n,i)=>{JT(xs.arrowLine,n,i),CA(e).forEach(o=>{const a=G.findPath(e,o);let l=n===Xs.source?o.source:o.target;l={...l,marker:i},Qt.setNode(e,{[n]:l},a)})},YU=(e,n)=>{CA(e).map(r=>{const o={...n};if(r.shape===n.shape)return;const a=G.findPath(e,r);Qt.setNode(e,o,a)})},KU=(e,n,i,r)=>{const o=dr.getPoints(e,n),a=i===Xs.source?o[0]:o[o.length-1],l=_g(e,a,r);if(l){let c=n.source,h=n.target;i===Xs.source?c={...c,boundId:r.id,connection:l}:h={...h,boundId:r.id,connection:l};const d=G.findPath(e,n);a6(e,{source:c,target:h},d)}};function ZU(e){const n={...e};return At.isHorizontalSwimlane(e)?(n.cells=e.cells.map((i,r)=>(r===0&&e.header&&(i={...e.cells[0],rowspan:e.rows.length}),i.text&&!i.text.direction&&(i={...i,text:{...i.text,direction:"vertical"}}),i)),n):(e.header&&(n.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),n)}const l6=(e,n)=>{const i=EP[e];return H.getPoints(H.getRectangleByCenterPoint(n,i.width,i.height))},ux=(e,n)=>{const i=t$(e),r=e$(e),o=n[1][0]-n[0][0],a=n[1][1]-n[0][1],l=ub(r,"row",i,a),c=ub(r,"column",i,o);return{id:Mn(),type:"swimlane",shape:r,points:n,rows:l,columns:c,header:i,cells:QU(r,l,c,i)}},ub=(e,n,i,r)=>{const o=l=>new Array(l).fill("").map(()=>({id:Mn()}));let a=o(3);if(n==="row"&&e===Xo.swimlaneVertical||n==="column"&&e===Xo.swimlaneHorizontal){a=i?a:o(2);const l=n==="row"?"height":"width";let c=rm;r<rm*a.length&&(c=Math.min(r/a.length/rm*rm,rm)),a=a.map((h,d)=>d===0||d===1&&i?{...h,[l]:c}:h)}return a},QU=(e,n,i,r)=>{let o=[],a=0;r&&(o=[o3(n[0].id,i[0].id,"New Swimlane")],a=1);const l=new Array(6).fill("").map((c,h)=>{if(h<3){const m=e===Xo.swimlaneVertical?n[a].id:n[h].id,w=e===Xo.swimlaneVertical?i[h].id:i[a].id;return o3(m,w,r?"Lane":"New Swimlane")}const d=e===Xo.swimlaneVertical?n[a+1].id:n[h-3].id,p=e===Xo.swimlaneVertical?i[h-3].id:i[a+1].id;return o3(d,p)});return[...o,...l]},JU=e=>At.isHorizontalSwimlane(e)?e.rows.length:At.isVerticalSwimlane(e)?e.columns.length:0,t$=e=>[Pa.swimlaneHorizontalWithHeader,Pa.swimlaneVerticalWithHeader].includes(e),e$=e=>[Pa.swimlaneHorizontalWithHeader,Pa.swimlaneHorizontal].includes(e)?Xo.swimlaneHorizontal:Xo.swimlaneVertical,u6=(e,n=e.pointer)=>xP().includes(n),n$=(e,n,i)=>{if(i>0&&At.isSwimlane(n)){const r=JU(n);if(At.isHorizontalSwimlane(n))if(i>r)c6(e,n,n.rows.length,i-r);else{const o=n.rows.length-(r-i);h6(e,n,o,r-i)}if(At.isVerticalSwimlane(n))if(i>r)f6(e,n,n.columns.length,i-r);else{const o=n.columns.length-(r-i);d6(e,n,o,r-i)}}},c6=(e,n,i,r=1)=>{if(At.isHorizontalSwimlane(n)){const o=[...n.rows],a=[];for(let p=0;p<r;p++)a.push({id:Mn()});o.splice(i,0,...a);const l=[...n.cells];a.forEach(p=>{l.push(...g6(n,p.id,"column"))});const c=md(e,n,n.cells[n.cells.length-1].id).points,h=H.getRectangleByPoints(c).height,d=[n.points[0],[n.points[1][0],n.points[1][1]+h*r]];Jx(e,n,n.columns,o,l,d)}},f6=(e,n,i,r=1)=>{if(At.isVerticalSwimlane(n)){const o=[...n.columns],a=[];for(let p=0;p<r;p++)a.push({id:Mn()});o.splice(i,0,...a);const l=[...n.cells];a.forEach(p=>{l.push(...g6(n,p.id,"row"))});const c=md(e,n,n.cells[n.cells.length-1].id).points,h=H.getRectangleByPoints(c).width,d=[n.points[0],[n.points[1][0]+h*r,n.points[1][1]]];Jx(e,n,o,n.rows,l,d)}},h6=(e,n,i,r=1)=>{if(At.isHorizontalSwimlane(n)){if(r>n.rows.length)return;const o=[...n.rows];if(o.splice(i,r),o.length===0){const a=G.findPath(e,n);Qt.removeNode(e,a)}else{let a=[...n.cells];const l=[];for(let d=i;d<r+i;d++){const p=n.rows[d];l.push(p),a=a.filter(m=>m.rowId!==p.id)}let c=0;l.forEach(d=>{if(d.height)c+=d.height;else{const p=n.cells.find(w=>w.rowId===d.id),m=md(e,n,p.id).points;c+=H.getRectangleByPoints(m).height}});const h=[n.points[0],[n.points[1][0],n.points[1][1]-c]];Jx(e,n,n.columns,o,a,h)}}},d6=(e,n,i,r=1)=>{if(At.isVerticalSwimlane(n)){if(r>n.columns.length)return;const o=[...n.columns];if(o.splice(i,r),o.length===0){const a=G.findPath(e,n);Qt.removeNode(e,a)}else{let a=[...n.cells];const l=[];for(let d=i;d<r+i;d++){const p=n.columns[d];l.push(p),a=a.filter(m=>m.columnId!==p.id)}let c=0;l.forEach(d=>{if(d.width)c+=d.width;else{const p=n.cells.find(w=>w.columnId===d.id),m=md(e,n,p.id).points;c+=H.getRectangleByPoints(m).width}});const h=[n.points[0],[n.points[1][0]-c,n.points[1][1]]];Jx(e,n,o,n.rows,a,h)}}},g6=(e,n,i)=>{const r=e[`${i}s`].map(o=>({id:Mn(),rowId:i==="row"?o.id:n,columnId:i==="row"?n:o.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:Tr.center,direction:i==="row"?void 0:"vertical"}},r},Jx=(e,n,i,r,o,a)=>{const l=G.findPath(e,n);Qt.setNode(e,{columns:i,rows:r,cells:o,points:a},l)},i$=(e,n,i)=>{var l;const o={texts:(l=n.texts)==null?void 0:l.map(c=>c.id===i.id?{...c,...i}:c)},a=e.children.findIndex(c=>c===n);Qt.setNode(e,o,[a])},r$=(e,n,i,r,o)=>{const a=Je.get(e,n),l=md(e,a,i),c=a.cells.findIndex(D=>D.id===l.id);let h=[...a.rows],d=[...a.columns],p=[...a.cells],m=[...a.points];const{width:w,height:x}=H.getRectangleByPoints(l.points),T=Me.rectangleAndText;if($m.isVerticalText(l)){const D=a.columns.findIndex(b=>b.id===l.columnId);if(o>w){const b=o+T*2,B=b-w,A=DP(a,a.columns[D].id,b,B);m=A.points,d=A.columns}}else{const D=a.rows.findIndex(A=>A.id===l.rowId),B=a.rows[D].height??Math.max(x,0);if(o>B){const A=o+T*2,I=A-B,R=bP(a,a.rows[D].id,A,I);m=R.points,h=R.rows}}p[c]={...p[c],text:r},Qt.setNode(e,{rows:h,columns:d,cells:p,points:m},n)},o$=(e,n,i,r)=>{const o=gg(n);let a=n.cells;o!=null&&o.length?a=n.cells.map(l=>o.map(c=>c.id).includes(l.id)?cb(l,i):l):a=n.cells.map(l=>l.text?cb(l,i):l),Qt.setNode(e,{cells:a},r)},cb=(e,n)=>{const i={...e};return n?i.fill=n:delete i.fill,i},s$=(e,n)=>{r6(e).map(r=>{if(r.shape===n.shape)return;const o=G.findPath(e,r);Qt.setNode(e,{...n},o)})},a$=(e,n,i,r)=>{const a=xP().includes(i);let l=vP[i]||mP[i]||yP[i]||Vm;a&&(l=EP[i]);const c=ag(r);if(c){let h=0;[Fe.left,Fe.right].includes(c)?h=-l.width/2:h=-l.height/2;const d=hg(n,r,h),p=H.getPoints(H.getRectangleByCenterPoint(d,l.width,l.height));if(a){const m=ux(i,p);return Pu(e,m),m}return o6(e,p,i)}return null},Ao={setText:UU,setDrawTexts:i$,insertGeometry:o6,resizeGeometry:zU,insertText:GU,setTextSize:$U,resizeArrowLine:a6,setArrowLineTexts:WU,removeArrowLineText:XU,setArrowLineMark:qU,setArrowLineShape:YU,setVectorLineShape:s$,insertImage:VU,connectArrowLineToDraw:KU,switchGeometryShape:jU,setTableText:r$,addSwimlaneRow:c6,addSwimlaneColumn:f6,removeSwimlaneRow:h6,removeSwimlaneColumn:d6,updateSwimlaneCount:n$,setTableFill:o$,insertDrawByVector:a$},OS=(e,n,i,r=0)=>{const o=H.getCenterPoint(n),a=WB(n,Ba);if(r){const l=nr([i],o,-r)[0];let c=a.find(h=>H.isHit(H.getRectangleByPoints([l,l]),h.rectangle));return c&&(c.cursorClass=MG(c.cursorClass,r)),c}else return a.find(l=>H.isHit(H.getRectangleByPoints([i,i]),l.rectangle))},l$=e=>({x:e.x-Kw-Em,y:e.y+e.height+Kw,width:Em,height:Em}),u$="debug:plait:resize-for-rotation",$s=Gg(u$);function c$(e){const{afterChange:n,drawSelectionRectangle:i}=e;let r,o,a=!1,l=null;const c=()=>{const d=ne(e);return d.length>=1&&d.every(p=>(At.isDrawElement(p)||At.isCustomGeometryElement(e,p)&&p.points.length>1)&&!NU(e)&&!HU(e))};return pd(e,{key:"draw-elements",canResize:c,hitTest:d=>{const p=ne(e),m=pn(e,p,!1),w=Wo(p),x=OS(e,m,d,w);return x?{element:[...p],rectangle:m,handle:x.handle,cursorClass:x.cursorClass}:null},onResize:(d,p)=>{r==null||r.remove(),$s.isDebug()&&$s.clear();const m=Ew(e,d.handle),w=p.isShift||d.element.length===1&&At.isImage(d.element[0]),x=H.getCenterPoint(d.rectangle),T=Jw(d.handle),{originPoint:D,handlePoint:b}=LS(e,T,d.rectangle),B=Wo(d.element);let A;if(B){A={angle:B,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[k,W]=nr([p.startPoint,p.endPoint],x,-A.angle);p.startPoint=k,p.endPoint=W}const I=p6(e,d,p,{originPoint:D,handlePoint:b},w,m),R=tC(e,d.element,I);if(l=R.activePoints,r=R.snapG,G.getElementTopHost(e).append(r),A){const k=H.getPoints(d.rectangle),W=k.map(Et=>yu(Et,D,R.xZoom,R.yZoom)),U=H.getRectangleByPoints(W);$s.isDebug()&&$s.drawRectangle(e,U,{stroke:"blue"});const nt=H.getCenterPoint(U),st=XT(H.getRectangleByPoints(k),H.getRectangleByPoints(W),x,nt,A.angle),ft=H.getCenterPoint(H.getRectangleByPoints(st));A=Object.assign(A,{offsetX:ft[0]-nt[0],offsetY:ft[1]-nt[1],newCenterPoint:ft}),$s.isDebug()&&$s.drawRectangle(e,st)}d.element.forEach(k=>{const W=G.findPath(e,k);let U;if(A){U=lS(k.points,x,-A.angle).map(ft=>yu(ft,D,R.xZoom,R.yZoom));const st=U.map(ft=>[ft[0]+A.offsetX,ft[1]+A.offsetY]);U=lS(st,A.newCenterPoint,A.angle)}else bl(k)&&(a=!0),bl(k)&&A_(k.angle)?U=f$(e,k.points,D,R.xZoom,R.yZoom):U=k.points.map(nt=>yu(nt,D,R.xZoom,R.yZoom));if(At.isGeometry(k))Ao.resizeGeometry(e,U,W);else if(At.isLine(k)||At.isCustomGeometryElement(e,k)||At.isVectorLine(k))Qt.setNode(e,{points:U},W);else if(At.isImage(k))if(w)Qt.setNode(e,{points:U},W);else{const nt=H.getRectangleByPoints(k.points),st=H.getCenterPoint(nt),ft=yu(st,D,R.xZoom,R.yZoom),Et=H.getRectangleByCenterPoint(ft,nt.width,nt.height);Qt.setNode(e,{points:H.getPoints(Et)},W)}})},afterResize:d=>{if(r==null||r.remove(),r=null,a){a=!1,l=null;const p=ne(e);Qt.addSelectionWithTemporaryElements(e,p)}}}),e.afterChange=()=>{n(),o&&(o.remove(),o=null);const d=ne(e);c()&&!Dr(e)&&d.length>1&&(o=h$(e,l,a),G.getActiveHost(e).append(o))},e.drawSelectionRectangle=()=>{if(a){const d=H.getRectangleByPoints(l),p=qr(e,d);return ka(e,H.inflate(p,Fi),{stroke:Ko,strokeWidth:Fi})}return i()},e}const LS=(e,n,i)=>{const r=PG(e,n),o=R7(i,r),a=R7(i,n);return{originPoint:o,handlePoint:a}},EA=(e,n,i,r,o)=>{const[a,l]=e;let c=0,h=0;if(r)if(o)c=Ce.getOffsetX(a,l)/(i[0]-n[0]),h=c;else{let d=Ce.getOffsetX(a,l),p=Ce.getOffsetY(a,l);c=d/(i[0]-n[0]),h=p/(i[1]-n[1])}else{const d=Ce.isHorizontal(n,i,.1)||!1;let p=d?Ce.getOffsetX(a,l):Ce.getOffsetY(a,l),m=d?i[0]-n[0]:i[1]-n[1];const w=p/m;o?(c=w,h=w):d?c=w:h=w}return{xZoom:c,yZoom:h}},yu=(e,n,i,r)=>{const o=(e[0]-n[0])*i,a=(e[1]-n[1])*r;return[e[0]+o,e[1]+a]},f$=(e,n,i,r,o)=>{const a=H.getRectangleByPoints(n);$s.isDebug()&&$s.drawRectangle(e,a,{stroke:"black"});let l=n;l=nr(l,H.getCenterPoint(a),1/2*Math.PI),$s.isDebug()&&$s.drawRectangle(e,l,{stroke:"blue"}),l=l.map(h=>yu(h,i,r,o)),$s.isDebug()&&$s.drawRectangle(e,l);const c=H.getRectangleByPoints(l);return nr(l,H.getCenterPoint(c),-.5*Math.PI)},h$=(e,n,i)=>{const r=ze(),o=ne(e),a=i?H.getRectangleByPoints(n):pn(e,o,!1),l=qr(e,a);let c=H.getCornerPoints(l);const h=Wo(o);if(h){const d=H.getCenterPoint(l);c=nr(c,d,h)}return c.forEach(d=>{const p=VB(e,d);r.append(p)}),r},d$="debug:plait:point-for-geometry",fb=Gg(d$),J2=10;function p6(e,n,i,r,o,a){const{originPoint:l,handlePoint:c}=r,h=[i.startPoint,i.endPoint],{xZoom:d,yZoom:p}=EA(h,l,c,a,o);let m,w=[];if(Array.isArray(n.element)){m=n.element;const I=pn(e,n.element,!1);w=H.getPoints(I)}else m=[n.element],w=n.element.points;const x=w.map(I=>yu(I,l,d,p)),T=H.getRectangleByPoints(x),D=gv(T,Wo(m)),b=yu(c,l,d,p),[B,A]=fi(l,b);return{resizePoints:h,resizeOriginPoint:w,activeRectangle:D,originPoint:l,handlePoint:c,directionFactors:[Mg(B),Mg(A)],isAspectRatio:o,isFromCorner:a}}function tC(e,n,i){const r=ze(),o=_4(e,n);let a=m$(o,i);a.deltaX===0&&a.deltaY===0&&(a=g$(o,i));const l=Wo(n),c=p$(a,i,l),h=y$(e,c.activePoints,o,i,l),d=v$(e,c.activePoints,o,i,l);return r.append(h,d),{...c,...a,snapG:r}}function g$(e,n){let i={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:o,directionFactors:a}=n,l=a[0]!==0||r,c=a[1]!==0||r;if(l){const h=nd(o,!0),d=a[0]===-1?h[0]:h[2],p=mm(e,d,!0);if(Math.abs(p)<Cu&&(i.deltaX=p,i.deltaX!==0&&r))return i.deltaY=i.deltaX/(o.width/o.height),i}if(c){const h=nd(o,!1),d=a[1]===-1?h[0]:h[2],p=mm(e,d,!1);if(Math.abs(p)<Cu&&(i.deltaY=p,i.deltaY!==0&&r))return i.deltaX=i.deltaY*(o.width/o.height),i}return i}function p$(e,n,i){const{deltaX:r,deltaY:o}=e,{resizePoints:a,isCreate:l}=n,c=[a[0],[a[1][0]+r,a[1][1]+o]];let h=c,d=0,p=0;if(!l){const{originPoint:m,handlePoint:w,isFromCorner:x,isAspectRatio:T,resizeOriginPoint:D}=n,b=EA(c,m,w,x,T);d=b.xZoom,p=b.yZoom,h=D.map(B=>yu(B,m,d,p)),i&&(h=XT(H.getRectangleByPoints(D),H.getRectangleByPoints(h),H.getCenterPoint(H.getRectangleByPoints(D)),H.getCenterPoint(H.getRectangleByPoints(h)),i))}return{xZoom:d,yZoom:p,activePoints:h}}function m$(e,n){let i={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:o}=n,a=e.find(c=>Math.abs(c.width-o.width)<Cu);if(a){const c=a.width-o.width;if(i.deltaX=c*n.directionFactors[0],r){const h=c/(o.width/o.height);return i.deltaY=h*n.directionFactors[1],i}}const l=e.find(c=>Math.abs(c.height-o.height)<Cu);if(l){const c=l.height-o.height;if(i.deltaY=c*n.directionFactors[1],r){const h=c*(o.width/o.height);return i.deltaX=h*n.directionFactors[0],i}}return i}function tw(e,n){return n?[[e.x,e.y-J2],[e.x+e.width,e.y-J2]]:[[e.x-J2,e.y],[e.x-J2,e.y+e.height]]}function v$(e,n,i,r,o){fb.isDebug()&&fb.clear();const a=H.getRectangleByPoints(n),l=gv(a,o),{isAspectRatio:c,directionFactors:h}=r,d=h[0]!==0||c,p=h[1]!==0||c;return F4(e,l,i,d,p)}function y$(e,n,i,r,o){let a=[],l=[];const c=r.directionFactors[0]!==0||r.isAspectRatio,h=r.directionFactors[1]!==0||r.isAspectRatio,d=H.getRectangleByPoints(n),p=gv(d,o);for(let w of i)p.width===w.width&&c&&a.push(tw(w,!0)),p.height===w.height&&h&&l.push(tw(w,!1));a.length&&c&&a.push(tw(p,!0)),l.length&&h&&l.push(tw(p,!1));const m=[...a,...l];return k4(e,m)}const w$=(e,n,i)=>aP(e,n,i,r=>{if(At.isArrowLine(r)){let o={...r.source},a={...r.target},l=[...r.points];return r.source.boundId&&(l[0]=Yc(Es(e,r.source.boundId),r.source.connection),Es(e,r.source.boundId,n)||(delete o.boundId,delete o.connection)),r.target.boundId&&(l[l.length-1]=Yc(Es(e,r.target.boundId),r.target.connection),Es(e,r.target.boundId,n)||(delete a.boundId,delete a.connection)),l=l.map(c=>[c[0]-i[0],c[1]-i[1]]),{...r,points:l,source:o,target:a}}}),x$=(e,n,i)=>{lP(e,n,i,(r,o)=>{At.isArrowLine(r)&&(r.source.boundId&&n.find(l=>[r.source.boundId,o[r.source.boundId]].includes(l.id))&&(r.source.boundId=o[r.source.boundId]),r.target.boundId&&n.find(l=>[r.target.boundId,o[r.target.boundId]].includes(l.id))&&(r.target.boundId=o[r.target.boundId])),At.isElementByTable(r)&&(nb(r,"row"),nb(r,"column"),Rj(r.cells))})},fm=3/4,C$={draw(e,n,i){const r=om(n),a=G.getRoughSVG(e).polygon(r,{...i,fillStyle:"solid"});return Ze(a,"round"),a},isInsidePoint(e,n){const i=om(e);return rf(n,i)},getCornerPoints(e){return om(e)},getNearestPoint(e,n){return Yn(n,om(e))},getEdgeByConnectionPoint(e,n){const i=om(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=vf(e,n);return r.y=i.y+(i.height*fm-r.height)/2,r}},om=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*fm],[e.x+e.width*3/5,e.y+e.height*fm],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*fm],[e.x,e.y+e.height*fm]];function rr(e){const n=e.getPolygonPoints,i={draw(r,o,a){const l=n(o),h=G.getRoughSVG(r).polygon(l,{...a,fillStyle:"solid"});return Ze(h,"round"),h},isInsidePoint(r,o){const a=n(r);return rf(o,a)},getCornerPoints(r){return n(r)},getNearestPoint(r,o){return Yn(o,n(r))},getNearestCrossingPoint(r,o){const a=n(r),l=kP(a,o);let c=l[0],h=be(o[0],o[1],c[0],c[1]);return l.filter((d,p)=>p>0).forEach(d=>{let p=be(o[0],o[1],d[0],d[1]);p<h&&(h=p,c=d)}),c},getEdgeByConnectionPoint(r,o){const a=n(r),l=H.getConnectionPoint(r,o);return pr(a,l)},getConnectorPoints(r){return e.getConnectorPoints?e.getConnectorPoints(r):n(r)}};return e.getTextRectangle&&(i.getTextRectangle=e.getTextRectangle),i}const E$=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],S$=rr({getPolygonPoints:E$,getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,.5)}),l3=rr({getPolygonPoints:H.getEdgeCenterPoints,getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,1/2)});function SA(e){const n={draw(i,r,o){const a=[r.x+r.width/2,r.y+r.height/2],c=G.getRoughSVG(i).ellipse(a[0],a[1],r.width,r.height,{...o,fillStyle:"solid"});return Ze(c,"round"),c},isInsidePoint(i,r){const o=[i.x+i.width/2,i.y+i.height/2];return Tu(r,o,i.width/2,i.height/2)},getCornerPoints(i){return H.getEdgeCenterPoints(i)},getNearestPoint(i,r){const o=[i.x+i.width/2,i.y+i.height/2];return Kr(r,o,i.width/2,i.height/2)},getTangentVectorByConnectionPoint(i,r){const o=H.getConnectionPoint(i,r),a=[i.x+i.width/2,i.y+i.height/2],l=[o[0]-a[0],-(o[1]-a[1])],c=i.width/2,h=i.height/2,d=Rl(l[0],l[1],c,h);return Ol(l[0],l[1],d)},getConnectorPoints(i){return H.getEdgeCenterPoints(i)},getTextRectangle:(i,r)=>hi(i,r,.75)};return e!=null&&e.draw&&(n.draw=e.draw),e!=null&&e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const u3=SA(),T$=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],A$=rr({getPolygonPoints:T$,getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,3/4)}),D$=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],b$=rr({getPolygonPoints:D$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,1-.32);return r.x=i.x+i.width*.32+Me.rectangleAndText,r}}),B$=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],P$=rr({getPolygonPoints:B$,getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,3/4)}),hb=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],db=rr({getPolygonPoints:hb,getConnectorPoints:e=>{const n=hb(e);return Yg(n)},getTextRectangle:(e,n)=>hi(e,n,1/2)}),M$=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],R$=rr({getPolygonPoints:M$,getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,3/5),o=i.y+i.height/5,a=i.y+i.height;return r.y=o+(a-o-r.height)/2,r}}),O$=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},L$=rr({getPolygonPoints:O$,getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,3/4);return r.x=i.x+Me.rectangleAndText,r}}),_$=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(n?e.height/2:e.width),e.y+e.height/2]]},F$=rr({getPolygonPoints:_$,getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),o=i.width>i.height+20?(i.width-i.height)/i.width:3/4;return hi(e,n,o)}}),k$=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],I$=rr({getPolygonPoints:k$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,1-.32);return r.x=i.x+Me.rectangleAndText,r}}),yn={draw(e,n,i){return ka(e,n,{...i,fillStyle:"solid"})},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)}},H$={draw(e,n,i){return jg(G.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...i,fillStyle:"solid"},!1,Cg(n))},isInsidePoint(e,n){return hT(n,e,Cg(e))},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return m6(n,e,Cg(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)}},Cg=e=>Math.min(e.width*.1,e.height*.1);function m6(e,n,i){const{x:r,y:o,width:a,height:l}=n,c=H.getCornerPoints(n);let h=Yn(e,c),d=null;return e[0]>=r&&e[0]<=r+i&&e[1]>=o&&e[1]<=o+i&&(d=[r+i,o+i]),e[0]>=r&&e[0]<=r+i&&e[1]>=o+l&&e[1]<=o+l-i&&(d=[r+i,o+l-i]),e[0]>=r+a-i&&e[0]<=r+a&&e[1]>=o&&e[1]<=o+i&&(d=[r+a-i,o+i]),e[0]>=r+a-i&&e[0]<=r+a&&e[1]>=o+l-i&&e[1]<=o+l&&(d=[r+a-i,o+l-i]),d&&(h=Kr(e,d,i,i)),h}const $h=3/4,N$={draw(e,n,i){const r=G.getRoughSVG(e),o=n.x,a=n.y,l=n.x+n.width,c=n.y+n.height*$h,h=Cg(n),d=[o+h,a],p=[l-h,a],m=[l,a+h],w=[l,c-h],x=[l-h,c],T=[o+h,c],D=[o,c-h],b=[o,a+h],B=[o+n.width/4,c],A=[o+n.width/4,n.y+n.height],I=[o+n.width/2,c],R=r.path(`M${p[0]} ${p[1]} A ${h} ${h}, 0, 0, 1, ${m[0]} ${m[1]} L ${w[0]} ${w[1]} A ${h} ${h}, 0, 0, 1, ${x[0]} ${x[1]} L    ${I[0]} ${I[1]}  ${A[0]} ${A[1]}   ${B[0]} ${B[1]}   ${T[0]} ${T[1]} A ${h} ${h}, 0, 0, 1, ${D[0]} ${D[1]} L ${b[0]} ${b[1]} A ${h} ${h}, 0, 0, 1, ${d[0]} ${d[1]} Z`,{...i,fillStyle:"solid"});return Ze(R,"round"),R},isInsidePoint(e,n){const i=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,rf(n,i)||hT(n,e,Cg(e))},getCornerPoints(e){return c3(e)},getNearestPoint(e,n){return Yn(n,c3(e))},getEdgeByConnectionPoint(e,n){const i=c3(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*$h],[e.x,e.y+e.height/2]]},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=vf(e,n);return r.y=i.y+(i.height*$h-r.height)/2,r}},c3=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*$h],[e.x+e.width/2,e.y+e.height*$h],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*$h],[e.x,e.y+e.height*$h]],gb=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],G$=rr({getPolygonPoints:gb,getConnectorPoints(e){const n=gb(e);return Yg(n)},getTextRectangle(e,n){return hi(e,n,3/4)}}),pb=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],z$=rr({getPolygonPoints:pb,getConnectorPoints(e){const n=pb(e);return[...Yg(n),...n]},getTextRectangle:(e,n)=>{const i=hi(e,n,.5),r=H.getRectangleByPoints(n.points);return i.y=r.y+r.height*2.5/5+(r.height-r.height*2.5/5-i.height)/2,i}}),j$=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],U$=rr({getPolygonPoints:j$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),mb=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],$$=rr({getPolygonPoints:mb,getConnectorPoints:e=>{const n=mb(e);return[n[1],n[3],n[5],n[7],n[9]]},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,1/2);return r.y=i.y+i.height/5+(i.height-i.height/5-r.height)/2,r}}),V$={draw(e,n,i){return jg(G.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...i,fillStyle:"solid"},!1,ew(n))},isInsidePoint(e,n){return hT(n,e,ew(e))},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return W$(n,e,ew(e))},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n),r=ew(e),o=v6(e,r,i);if(o){const a=[i[0]-o[0],-(i[1]-o[1])],l=r,c=r,h=Rl(a[0],a[1],l,c);return Ol(a[0],a[1],h)}return null},getConnectorPoints(e){return H.getEdgeCenterPoints(e)}},ew=e=>Math.min(e.width/2,e.height/2);function W$(e,n,i){let r=null,o=v6(n,i,e);if(o)r=Kr(e,o,i,i);else{const a=H.getCornerPoints(n);r=Yn(e,a)}return r}function v6(e,n,i){const{x:r,y:o,width:a,height:l}=e;let c=null;return i[0]>=r&&i[0]<=r+n&&i[1]>=o&&i[1]<=o+n&&(c=[r+n,o+n]),i[0]>=r&&i[0]<=r+n&&i[1]>=o+l-n&&i[1]<=o+l&&(c=[r+n,o+l-n]),i[0]>=r+a-n&&i[0]<=r+a&&i[1]>=o&&i[1]<=o+n&&(c=[r+a-n,o+n]),i[0]>=r+a-n&&i[0]<=r+a&&i[1]>=o+l-n&&i[1]<=o+l&&(c=[r+a-n,o+l-n]),c}const vb=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],X$=rr({getPolygonPoints:vb,getConnectorPoints:e=>{const n=vb(e);return Yg(n)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+i.height/4+(i.height*3/4-l.height)/2}}}),q$=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],Y$=rr({getPolygonPoints:q$,getConnectorPoints:e=>H.getEdgeCenterPoints(e),getTextRectangle(e,n){return hi(e,n,.6666666666666666)}}),yb=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],K$=rr({getPolygonPoints:yb,getConnectorPoints:e=>{const n=yb(e);return Yg(n)},getTextRectangle:(e,n)=>hi(e,n,.75)}),wb=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],Z$=rr({getPolygonPoints:wb,getConnectorPoints:e=>{const n=wb(e);return[...Yg(n),...n]},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=o*2/3,l=n.text,c=Bi(e,l,a);return{height:c.height,width:a>0?a:0,x:i.x+Me.rectangleAndText+r+o/6,y:i.y+(i.height*2/3-c.height)/2}}}),Q$={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} L${n.x+n.width*3/4} ${n.y} A  ${n.width/4} ${n.height/2}, 0, 0, 1,${n.x+n.width*3/4} ${n.y+n.height} L${n.x} ${n.y+n.height} Z`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]),r=H.isHit({...e,width:e.width*3/4},i),o=Tu(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return r||o},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,yn.getCornerPoints(e));return i[0]>e.x+e.width*3/4?Kr(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):i},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n),r=[e.x+e.width*3/4,e.y+e.height/2],o=[i[0]-r[0],-(i[1]-r[1])],a=e.width/4,l=e.height/2,c=Rl(o[0],o[1],a,l);return Ol(o[0],o[1],c)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)}},J$={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width/10} ${n.y} L${n.x+n.width} ${n.y} A  ${n.width/10} ${n.height/2}, 0, 0, 0,${n.x+n.width} ${n.y+n.height} L${n.x+n.width/10} ${n.y+n.height}A  ${n.width/10} ${n.height/2}, 0, 0, 1,${n.x+n.width/10} ${n.y}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]),r=H.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},i),o=Tu(n,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),a=!Tu(n,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&a||o},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,yn.getCornerPoints(e));if(i[0]<e.x+e.width/10){const r=[e.x+e.width/10,e.y+e.height/2],o=Kr(n,r,e.width/10,e.height/2);return o[0]>r[0]&&(o[0]=r[0]*2-o[0]),o}if(i[0]>e.x+e.width*9/10){const r=[e.x+e.width,e.y+e.height/2],o=Kr(n,r,e.width/10,e.height/2);return o[0]>r[0]&&(o[0]=r[0]*2-o[0]),o}return i},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);let r=[e.x+e.width/10,e.y+e.height/2],o=e.width/10,a=e.height/2;const l=i[0]>e.x+e.width*9/10&&i[1]>e.y;l&&(r=[e.x+e.width,e.y+e.height/2]);const c=[i[0]-r[0],-(i[1]-r[1])],h=Rl(c[0],c[1],o,a),d=Ol(c[0],c[1],h);return l?d.map(p=>-p):d},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e,n){return hi(e,n,.75)}},tV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.06} ${n.y} L${n.x+n.width*.06} ${n.y+n.height} M${n.x+n.width-n.width*.06} ${n.y} L${n.x+n.width-n.width*.06} ${n.y+n.height}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2-i.width*.06*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r+i.width*.06,y:i.y+(i.height-l.height)/2}}},eV=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],nV=rr({getPolygonPoints:eV,getConnectorPoints:e=>H.getEdgeCenterPoints(e),getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=n.text,l=Bi(e,a,o);return{width:o>0?o:0,height:l.height,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-i.height/2-l.height)/2}}}),iV=SA({draw(e,n,i){const r=G.getRoughSVG(e),o=n.width/2,a=n.height/2,l=[n.x+n.width,n.y+n.height/2],c=r.path(`M${l[0]} ${l[1]}
        A${o},${a} 0 1,1 ${l[0]} ${l[1]-.01}
        M${n.x} ${n.y+n.height/2}
        L${n.x+n.width} ${n.y+n.height/2}
        M${n.x+n.width/2} ${n.y}
        L${n.x+n.width/2} ${n.y+n.height}
        `,{...i,fillStyle:"solid"});return Ze(c,"round"),c}}),rV=SA({draw(e,n,i){const r=G.getRoughSVG(e),o=n.width/2,a=n.height/2,l=[n.x+n.width,n.y+n.height/2],c=[n.x+n.width/2,n.y+n.height/2],h=RD([n.x,n.y],[n.x+n.width,n.y+n.height],c[0],c[1],o,a),d=RD([n.x+n.width,n.y],[n.x,n.y+n.height],c[0],c[1],o,a),p=r.path(`M${l[0]} ${l[1]}
        A${o},${a} 0 1,1 ${l[0]} ${l[1]-.01}
        M${h[0][0]} ${h[0][1]}
        L${h[1][0]} ${h[1][1]}
        M${d[0][0]} ${d[0][1]}
        L${d[1][0]} ${d[1][1]}
        `,{...i,fillStyle:"solid"});return Ze(p,"round"),p}}),oV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9}
            Q${n.x+n.width-n.width/4} ${n.y+n.height-n.height/9*3}, ${n.x+n.width/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}           
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){let i=Yn(n,yn.getCornerPoints(e)),r=hv([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=Zo(r),i[1]>e.y+e.height-e.height/9){if(i[0]===e.x+e.width/2)return i[1]=e.y+e.height-e.height/9,i;i=Yn(n,r,!1)}return i},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);return i[0]>e.x&&i[0]<e.x+e.width/4?fi([e.x+e.width/4,e.y+e.height],i):i[0]>e.x+e.width/4&&i[0]<e.x+e.width/4*3?fi([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):i[0]>e.x+e.width/4*3?fi([e.x+e.width,e.y+e.height-e.height/9],i):fi(i,[e.x+e.width/4,e.y+e.height])},getTextRectangle:(e,n)=>hi(e,n,.88)},xb=e=>{const n=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let i=hv([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return i=Zo(i),[...n,...i]},sV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y+10} H${n.x+5} V${n.y+5} H${n.x+10} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9-10-3} L${n.x+n.width-5} ${n.y+n.height-n.height/9-10-3-4} V${n.y+n.height-n.height/9-5-3}
                 L${n.x+n.width-10} ${n.y+n.height-n.height/9-5-3-4} V${n.y+n.height-n.height/9}
                
             Q${n.x+n.width-10-(n.width-10)/4} ${n.y+n.height-n.height/9*3}, ${n.x+(n.width-10)/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}
              
                M${n.x+5} ${n.y+10} H${n.x+n.width-10} V${n.y+n.height-n.height/9} 
                    
                M${n.x+10} ${n.y+5} H${n.x+n.width-5} V${n.y+n.height-n.height/9-10-3}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,xb(e),!1)},getConnectorPoints(e){let n=hv([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);n=Zo(n);const i=Yn([e.x+e.width/2,e.y+e.height],n);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[i[0],i[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,n){const i=kP(xb(e),n);let r=i[0],o=be(n[0],n[1],r[0],r[1]);return i.filter((a,l)=>l>0).forEach(a=>{let l=be(n[0],n[1],a[0],a[1]);l<o&&(o=l,r=a)}),r},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);if(i[0]>e.x&&i[0]<e.x+(e.width-10)/4)return fi([e.x+(e.width-10)/4,e.y+e.height],i);if(i[0]>e.x+(e.width-10)/4&&i[0]<e.x+(e.width-10)/4*3)return fi([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(i[0]>e.x+(e.width-10)/4*3&&i[0]<e.x+e.width-10)return fi([e.x+(e.width-10),e.y+e.height-e.height/9],i);const r=ZB(n)||Fe.bottom,o=id(r);return[o.x,o.y]},getTextRectangle:(e,n)=>hi(e,n,.88)},aV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+n.height*.15}  
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x+n.width} ${n.y+n.height*.15} 
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x} ${n.y+n.height*.15} 
            V${n.y+n.height-n.height*.15}
            A${n.width/2} ${n.height*.15}, 0, 0, 0, ${n.x+n.width} ${n.y+n.height-n.height*.15}
            V${n.y+n.height*.15}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]),r=H.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},i),o=Tu(n,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),a=Tu(n,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return r||o||a},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,yn.getCornerPoints(e));if(i[1]<e.y+e.height*.15){const r=[e.x+e.width/2,e.y+e.height*.15],o=Kr(n,r,e.width/2,e.height*.15);return o[1]>r[1]&&(o[1]=r[1]*2-o[1]),o}if(i[1]>e.y+e.height-e.height*.15){const r=[e.x+e.width/2,e.y+e.height-e.height*.15],o=Kr(n,r,e.width/2,e.height*.15);return o[1]<r[1]&&(o[1]=r[0]*2-o[1]),o}return i},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);let r=[e.x+e.width/2,e.y+e.height-e.height*.15],o=e.width/2,a=e.height*.15;i[1]<e.y+e.height*.15&&i[0]>e.x&&(r=[e.x+e.width/2,e.y+e.height*.15]);const c=[i[0]-r[0],-(i[1]-r[1])],h=Rl(c[0],c[1],o,a);return Ol(c[0],c[1],h)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,1);r.y+=Tn(n);const o=i.y+i.height*.45,a=i.y+i.height-i.height*.3;return r.y=o+(a-o-r.height)/2,r}},lV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width-n.width*.15} ${n.y}  
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y+n.height} 
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y} 
            H${n.x+n.width*.15}
            A${n.width*.15} ${n.height/2}, 0, 0, 0, ${n.x+n.width*.15} ${n.y+n.height}
            H${n.x+n.width-n.width*.15}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]),r=H.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},i),o=Tu(n,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),a=Tu(n,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return r||o||a},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,yn.getCornerPoints(e));if(i[0]<e.x+e.width*.15){const r=[e.x+e.width*.15,e.y+e.height/2],o=Kr(n,r,e.width*.15,e.height/2);return o[0]>r[0]&&(o[0]=r[0]*2-o[0]),o}if(i[0]>e.x+e.width-e.width*.15){const r=[e.x+e.width-e.width*.15,e.y+e.height/2],o=Kr(n,r,e.width*.15,e.height/2);return o[0]<r[0]&&(o[0]=r[0]*2-o[0]),o}return i},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);let r=[e.x+e.width*.15,e.y+e.height/2],o=e.width*.15,a=e.height/2;i[0]>e.x+e.width-e.width*.15&&i[1]>e.y&&(r=[e.x+e.width-e.width*.15,e.y+e.height/2]);const c=[i[0]-r[0],-(i[1]-r[1])],h=Rl(c[0],c[1],o,a);return Ol(c[0],c[1],h)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-i.width*.45-Me.rectangleAndText*2-r*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+i.width*.15+Me.rectangleAndText+r,y:i.y+(i.height-l.height)/2}}},uV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} h${n.width} v${n.height} h${-n.width} v${-n.height}
            M${n.x} ${n.y+n.height/10} h${n.width}
            M${n.x+n.width/10} ${n.y} v${n.height}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-i.width*.1-Me.rectangleAndText*2-r*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+i.width*.1+Me.rectangleAndText+r,y:i.y+i.height*.1+(i.height-i.height*.1-l.height)/2}}};function Cb(e){const n=e.width*.09,i=e.x+e.width,r=e.y+e.height/2;return{startPoint:[i,e.y],upperCurve:{controlPoint1:[i-n,e.y],controlPoint2:[i,r],endPoint:[i-n,r]},lowerCurve:{controlPoint1:[i,r],controlPoint2:[i-n,e.y+e.height],endPoint:[i,e.y+e.height]}}}const cV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,upperCurve:a,lowerCurve:l}=Cb(n),c=[`M${o[0]} ${o[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`,`C${l.controlPoint1[0]} ${l.controlPoint1[1]},
            ${l.controlPoint2[0]} ${l.controlPoint2[1]},
            ${l.endPoint[0]} ${l.endPoint[1]}`].join(" "),h=r.path(c,{...i,fillStyle:"solid",fill:"transparent"});return Ze(h,"round"),h},getNearestPoint(e,n){const{startPoint:i,upperCurve:r,lowerCurve:o}=Cb(e),a=Zo([i,r.controlPoint1,r.controlPoint2,r.endPoint],.001),l=Zo([r.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),c=[...a,...l];let h=1/0,d=n;for(const p of c){const m=be(n[0],n[1],p[0],p[1]);m<h&&(h=m,d=[...p])}return d},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,.9);return r.x=i.x+Tn(n)+Me.rectangleAndText,r}};function Eb(e){const n=e.width*.09,i=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+n,e.y],controlPoint2:[e.x,i],endPoint:[e.x+n,i]},lowerCurve:{controlPoint1:[e.x,i],controlPoint2:[e.x+n,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const fV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,upperCurve:a,lowerCurve:l}=Eb(n),c=[`M${o[0]} ${o[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`,`C${l.controlPoint1[0]} ${l.controlPoint1[1]},
            ${l.controlPoint2[0]} ${l.controlPoint2[1]},
            ${l.endPoint[0]} ${l.endPoint[1]}`].join(" "),h=r.path(c,{...i,fillStyle:"solid",fill:"transparent"});return Ze(h,"round"),h},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:i,upperCurve:r,lowerCurve:o}=Eb(e),a=Zo([i,r.controlPoint1,r.controlPoint2,r.endPoint],.001),l=Zo([r.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),c=[...a,...l];let h=1/0,d=[...n];for(const p of c){const m=be(n[0],n[1],p[0],p[1]);m<h&&(h=m,d=[...p])}return d},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=hi(e,n,.9);return r.x=i.x+Tn(n)+Me.rectangleAndText+i.width*.1,r}},hV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width*.075} ${n.y+n.height} H${n.x} V${n.y} H${n.x+n.width*.075}
           `,{...i,fillStyle:"solid",fill:"transparent"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,.88)},dV=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],gV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width*.15} ${n.y} 
            H${n.x+n.width-n.width*.1} 
            A ${n.width*.1} ${n.height/2}, 0, 0, 1,${n.x+n.width-n.width*.1} ${n.y+n.height}
            H${n.x+n.width*.15}
            L${n.x} ${n.y+n.height/2}
            Z
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],r=rf(n,i),o=Tu(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return r||o},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,dV(e));return i[0]>e.x+e.width-e.width*.1?Kr(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):i},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n),r=[e.x+e.width-e.width*.1,e.y+e.height/2],o=[i[0]-r[0],-(i[1]-r[1])],a=e.width*.1,l=e.height/2,c=Rl(o[0],o[1],a,l);return Ol(o[0],o[1],c)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,.75)},lg={draw(e,n,i,r){const o=ze();try{const a=wv(e,{...r==null?void 0:r.element});if(a){const l=G.getRoughSVG(e),{x:c,y:h,width:d,height:p}=n,m=z2(l,[c,h],[c+d,h],i),w=z2(l,[c,h],[c,h+p],i);o.append(m,w),a.forEach(x=>{const T=H.getRectangleByPoints(x.points),{x:D,y:b,width:B,height:A}=T,I=ka(e,{x:D+Fi,y:b+Fi,width:B-Fi*2,height:A-Fi*2},{fill:x.fill,fillStyle:"solid",strokeWidth:0}),R=z2(l,[D+B,b],[D+B,b+A],i),k=z2(l,[D,b+A],[D+B,b+A],i);o.append(I,R,k)}),Ze(o,"round")}}catch(a){console.error(a)}return o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return m6(n,e,Cg(e))},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle(e,n,i){try{if(i&&i.id){const r=md(e,n,i.id);if(r)return $m.isVerticalText(r)?pV(e,r):y6(e,r)}}catch(r){console.error(r)}return{x:0,y:0,width:0,height:0}}};function pV(e,n){const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.height-Me.rectangleAndText*2-r*2;return w6(e,n,o,i)}function y6(e,n){const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2;return w6(e,n,o,i)}function w6(e,n,i,r){const o=n.text;if(o){const a=Bi(e,o,i);return{width:i>0?i:0,height:a.height,x:r.x-i/2+r.width/2,y:r.y+(r.height-a.height)/2}}else return{width:0,height:0,x:r.x,y:r.y}}const mV=(e,n,i=!1)=>{if(n.text){const r=H.getRectangleByPoints(n.points),o=Tn(n);let a=r.width-Me.rectangleAndText*2-o*2;return i&&(a=r.height-Me.rectangleAndText*2-o*2),Bi(e,n.text,a).height}return 0};function Sb(e){const n=e.x+e.width/2,i={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:i.width,ry:i.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:n,endY:e.y},bodyLine:[[n,e.y+e.height/4],[n,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const vV={draw(e,n,i){const r=G.getRoughSVG(e),{headArcCommand:o,bodyLine:a,armsLine:l,leftLegLine:c,rightLegLine:h}=Sb(n),d=[`M${a[0][0]} ${a[0][1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${a[0][0]} ${a[0][1]}`,`V${a[1][1]}`,`M${l[0][0]} ${l[0][1]} H${l[1][0]}`,`M${c[0][0]} ${c[0][1]} L${c[1][0]} ${c[1][1]}`,`M${h[0][0]} ${h[0][1]} L${h[1][0]} ${h[1][1]}`].join(" "),p=r.path(d,{...i,fillStyle:"solid"});return Ze(p,"round"),p},getNearestPoint(e,n){const{headArcCommand:i,bodyLine:r,armsLine:o,leftLegLine:a,rightLegLine:l}=Sb(e),c=[e.x+e.width/2,e.y+e.height/4/2],h=Kr(n,c,i.rx,i.ry),d=be(...n,...h),m=fT(n,[r,o,a,l]),w=be(...n,...m);return d<w?h:m},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);if(i[1]>=e.y&&i[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2],o=[i[0]-r[0],-(i[1]-r[1])],a=e.width/2,l=e.height/2,c=Rl(o[0],o[1],a,l);return Ol(o[0],o[1],c)}return i[1]>=e.y+e.height/4&&i[1]<e.y+e.height/4*3?i[0]<e.x+e.width/2?Gm(fi([e.x,e.y+e.height/2],i),-(Math.PI/2)):Gm(fi([e.x+e.width,e.y+e.height/2],i),-(Math.PI/2)):i[1]>=e.y+e.height/4*3?i[0]<e.x+e.width/2?fi(i,[e.x+e.width/12,e.y+e.height]):fi([e.x+e.width/12*11,e.y+e.height],i):fi(i,[e.x+e.width/4,e.y+e.height])},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=i.width+40,o=n.text;return{height:Bi(e,o,r).height,width:r>0?r:0,x:i.x-20,y:i.y+i.height+4}}},yV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+40} ${n.y} L${n.x+40} ${n.y+n.height} `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle(e,n){const i=H.getRectangleByPoints(n.points),r=Tn(n),o=40-Me.rectangleAndText*2-r*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-l.height)/2}}};function Tb(e){const i=e.width*.7,r=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+i,e.y],cornerPoint:[r,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[r,e.y+25]}}}const wV={draw(e,n,i){const r=G.getRoughSVG(e),{points:o}=Tb(n),a=[`M${o.leftTop[0]} ${o.leftTop[1]}`,`V${o.topStart[1]}`,`H${o.topEnd[0]}`,`L${o.cornerPoint[0]} ${o.cornerPoint[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.leftBottom[0]}`,`V${o.leftMiddle[1]}`,`H${o.middlePoint[0]}`].join(" "),l=r.path(a,{...i,fillStyle:"solid"});return Ze(l,"round"),l},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const{points:i}=Tb(e),r=[[i.topStart,i.leftTop],[i.leftTop,i.leftBottom],[i.leftBottom,i.rightBottom],[i.rightBottom,i.rightTop],[i.topStart,i.topEnd],[i.topEnd,i.cornerPoint],[i.cornerPoint,i.rightTop],[i.leftMiddle,i.middlePoint]];return fT(n,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);return i[0]>e.x+e.width*.7&&i[1]<e.y+25?fi([e.x+e.width*.7,e.y],i):fi([e.x+e.width*.8,e.y+25],i)},getTextRectangle(e,n,i){var l;const r=H.getRectangleByPoints(n.points),o=Tn(n),a=(l=n.texts)==null?void 0:l.find(c=>c.id===(i==null?void 0:i.id));if((i==null?void 0:i.id)===bs.name&&a){const c=r.width*.7-Me.rectangleAndText-o,h=Bi(e,a.text,c);return{height:h.height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+(25-h.height)/2}}if((i==null?void 0:i.id)===bs.content&&a){const c=r.width-Me.rectangleAndText*2-o*2,h=Bi(e,a.text,c);return{height:h.height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+25+(r.height-25-h.height)/2}}return r}},xV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+25} 
            V${n.y}
            H${n.x+n.width} 
            V${n.y+n.height}
            H${n.x}
            V${n.y+25}
            H${n.x+n.width/3-8}
            L${n.x+n.width/3} ${n.y+16}
            V${n.y}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle(e,n,i){var l;const r=H.getRectangleByPoints(n.points),o=Tn(n),a=(l=n.texts)==null?void 0:l.find(c=>c.id===(i==null?void 0:i.id));if((i==null?void 0:i.id)===bs.name&&a){const c=r.width/3-8-Me.rectangleAndText-o,h=Bi(e,a.text,c);return{height:h.height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+(25-h.height)/2}}if((i==null?void 0:i.id)===bs.content&&a){const c=r.width-Me.rectangleAndText*2-o*2;return{height:Bi(e,a.text,c).height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+25+Me.rectangleAndText+o}}return r}};function Ab(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const CV={draw(e,n,i){const r=G.getRoughSVG(e),o=Ab(n),a=r.path(o.map(([l,c])=>`M${l[0]} ${l[1]} L${c[0]} ${c[1]}`).join(" "),{...i,fillStyle:"solid",strokeWidth:4});return Ze(a,"round"),a},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const i=Ab(e);let r=1/0,o=n;return i.forEach(a=>{const l=Lx(n,a),c=be(n[0],n[1],l[0],l[1]);c<r&&(r=c,o=l)}),o},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)}},EV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.125} ${n.y} L${n.x+n.width*.125} ${n.y+n.height} M${n.x+n.width-n.width*.125} ${n.y} L${n.x+n.width-n.width*.125} ${n.y+n.height}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2-i.width*.125*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r+i.width*.125,y:i.y+(i.height-l.height)/2}}},SV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} 
            h${n.width-16}
            v16
            h16
            v${n.height-16}
            h${-n.width}
            Z
            M${n.x+n.width-16} ${n.y} 
            A16 16, 0,0,1, ${n.x+n.width} ${n.y+16}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,yn.getCornerPoints(e));return i[0]>e.x+e.width-16&&i[1]<e.y+16?Kr(n,[e.x+e.width-16,e.y+16],16,16):i},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n),r=[e.x+e.width*3/4,e.y+e.height/2],o=[i[0]-r[0],-(i[1]-r[1])],a=Rl(o[0],o[1],16,16);return Ol(o[0],o[1],a)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r-15,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-l.height)/2}}};function Db(e){const n=e.y+e.height/2,i=e.x+e.width*.3,r=e.width*.13,o=e.height*.285,a=i+r,l=e.width*.233;return{startPoint:[e.x,n],line1:[[e.x,n],[i,n]],circleArcCommand:{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:i,endY:n},verticalArcCommand:{rx:l,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:a,endY:e.y+e.height},line2:[[a+l,n],[e.x+e.width,n]]}}const TV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,line1:a,circleArcCommand:l,verticalArcCommand:c,line2:h}=Db(n),d=[`M${o[0]} ${o[1]}`,`H${a[1][0]}`,`A${l.rx} ${l.ry} ${l.xAxisRotation} ${l.largeArcFlag} ${l.sweepFlag} ${a[1][0]+l.rx*2} ${l.endY}`,`A${l.rx} ${l.ry} ${l.xAxisRotation} ${l.largeArcFlag} ${l.sweepFlag} ${l.endX} ${l.endY}`,`M${c.endX} ${n.y}`,`A${c.rx} ${c.ry} ${c.xAxisRotation} ${c.largeArcFlag} ${c.sweepFlag} ${c.endX} ${c.endY}`,`M${h[0][0]} ${h[0][1]} H${h[1][0]}`].join(" "),p=r.path(d,{...i,fillStyle:"solid"});return Ze(p,"round"),p},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line1:i,line2:r,circleArcCommand:o,verticalArcCommand:a}=Db(e),l=Yn(n,[...i,...r]),c=be(...n,...l),h=[i[1][0]+o.rx,i[1][1]],d=Kr(n,h,o.rx,o.ry),p=be(...n,...d),m=[a.endX,e.y],w=Fx(n,m,a),x=be(...n,...w),T=Math.min(c,p,x);return T===c?l:T===p?d:w},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n);return i[0]>e.x+e.width*.43&&i[1]<e.y+e.height/2?Gm(fi(i,[e.x,e.y+e.height/2]),-Math.PI):i[0]>e.x+e.width*.43&&i[1]>e.y+e.height/2?fi(i,[e.x,e.y+e.height/2]):fi(i,[e.x,e.y+e.height/2])}};function bb(e){const n=e.width*.39,i=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:n,ry:i,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const AV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,leftArcCommand:a,line:l}=bb(n),c=[`M${o[0]} ${o[1]}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${a.endX} ${a.endY}`,`M${l.startX} ${l.startY} H${l.endX}`].join(" "),h=r.path(c,{...i,fillStyle:"solid",fill:"transparent"});return Ze(h,"round"),h},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:i,leftArcCommand:r,line:o}=bb(e);let a=1/0,l=n;const c=Fx(n,i,r),h=be(n[0],n[1],c[0],c[1]);h<a&&(a=h,l=c);const d=[o.startX,o.startY],p=[o.endX,o.endY],m=Lx(n,[d,p]),w=be(n[0],n[1],m[0],m[1]);return w<a&&(a=w,l=m),l},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)}},Bb=.54;function Pb(e){const n=e.y+e.height/2,i=e.width*(1-Bb)/2,r=e.height/2,o=[e.x,n],a=e.x+e.width*Bb;return{startPoint:o,line:{startX:o[0],startY:n,endX:a,endY:n},arcCommands:[{rx:i,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:n},{rx:i,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:a,endY:n}]}}const DV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,line:a,arcCommands:l}=Pb(n),c=[`M${o[0]} ${o[1]}`,`H${a.endX}`,...l.map(d=>`A${d.rx} ${d.ry} ${d.xAxisRotation} ${d.largeArcFlag} ${d.sweepFlag} ${d.endX} ${d.endY}`)].join(" "),h=r.path(c,{...i,fillStyle:"solid"});return Ze(h,"round"),h},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line:i,arcCommands:r}=Pb(e),o=[i.startX,i.startY],a=[i.endX,i.endY],l=Yn(n,[o,a]),c=be(...n,...l),h=[e.x+3*e.width/4,i.startY],d=Kr(n,h,r[0].rx,r[0].ry),p=be(...n,...d);return c<p?l:d},getTangentVectorByConnectionPoint(e,n){const i=H.getConnectionPoint(e,n),r=[e.x+e.width*3/4,e.y+e.height/2];if(i[0]>e.x+e.width*.54){const o=[i[0]-r[0],-(i[1]-r[1])],a=e.width*.46/2,l=e.height/2,c=Rl(o[0],o[1],a,l);return Ol(o[0],o[1],c)}return fi(i,[e.x,e.y+e.height/2])}};function nw(e){const n=e.x+12,i=e.width>70?24:e.width*.2,r=e.height-28-e.height*.35>1?14:e.height*.175,o=e.y+e.height*.175,a=e.y+e.height-e.height*.175-r;return{boxSize:{width:i,height:r},points:{mainStart:[n,e.y],topBoxStart:[n,o],topBoxEnd:[n,o+r],bottomBoxStart:[n,a],bottomBoxEnd:[n,a+r],mainEnd:[n,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const x6={draw(e,n,i){const r=G.getRoughSVG(e),{boxSize:o,points:a}=nw(n),l=[`M${a.mainStart[0]} ${a.mainStart[1]}`,`H${a.rightTop[0]}`,`V${a.rightBottom[1]}`,`H${a.mainEnd[0]}`,`M${a.topBoxStart[0]} ${a.topBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${a.bottomBoxStart[0]} ${a.bottomBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${a.mainStart[0]} ${a.mainStart[1]}`,`V${a.topBoxStart[1]}`,`M${a.topBoxEnd[0]} ${a.topBoxEnd[1]}`,`V${a.bottomBoxStart[1]}`,`M${a.bottomBoxEnd[0]} ${a.bottomBoxEnd[1]}`,`V${a.mainEnd[1]}`].join(" "),c=r.path(l,{...i,fillStyle:"solid"});return Ze(c,"round"),c},getNearestPoint(e,n){const{boxSize:i,points:r}=nw(e),o=[[r.mainStart,[r.rightTop[0],r.mainStart[1]]],[[r.rightTop[0],r.mainStart[1]],r.rightBottom],[r.rightBottom,[r.mainEnd[0],r.rightBottom[1]]],[[r.mainEnd[0],r.rightBottom[1]],r.mainStart],[r.topBoxStart,[r.topBoxStart[0]+i.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]+i.width/2,r.topBoxStart[1]],[r.topBoxStart[0]+i.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]+i.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-i.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]-i.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-i.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]-i.width/2,r.topBoxStart[1]],r.topBoxStart],[r.bottomBoxStart,[r.bottomBoxStart[0]+i.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]+i.width/2,r.bottomBoxStart[1]],[r.bottomBoxStart[0]+i.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]+i.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-i.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]-i.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-i.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]-i.width/2,r.bottomBoxStart[1]],r.bottomBoxStart],[r.mainStart,r.topBoxStart],[r.topBoxEnd,r.bottomBoxStart],[r.bottomBoxEnd,r.mainEnd]];return fT(n,o)},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,n){const{points:i}=nw(e),r=H.getConnectionPoint(e,n);return fi(i.mainStart,r)},getConnectorPoints(e){const{points:n}=nw(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[n.mainStart[0],e.y+e.height/2]]},getTextRectangle(e,n){const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-24-Me.rectangleAndText*2-r*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+24+Me.rectangleAndText+r,y:i.y+(i.height-l.height)/2}}},bV={draw(e,n,i){const r=G.getRoughSVG(e),o=n.width-45*2-18>1?45:n.width*.25,a=n.height-30-8*2>1?30:n.height*.2,l={x:n.x+n.width-18-o,y:n.y+8,width:o,height:a},c=r.path(`M${n.x} ${n.y} 
            H${n.x+n.width} 
            V${n.y+n.height} 
            H${n.x} Z

            `,{...i,fillStyle:"solid"}),h=x6.draw(e,l,i);return c.append(h),Ze(c,"round"),c},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle(e,n){const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-45*2-18>1?45:i.width*.25,a=i.width-18-o-Me.rectangleAndText-r*2,l=n.text,c=Bi(e,l,a);return{height:c.height,width:a>0?a:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-c.height)/2}}},BV={draw(e,n,i){const r=G.getRoughSVG(e);return jg(r,n.x,n.y,n.x+n.width,n.y+n.height,{...i,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,n){const i=H.getRectangleByPoints([n,n]);return H.isHit(e,i)},getCornerPoints(e){return H.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,yn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=yn.getCornerPoints(e),r=H.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return H.getEdgeCenterPoints(e)},getTextRectangle(e,n){const i=H.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=n.text,l=Bi(e,a,o);return{height:l.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-l.height)/2}}},PV={[we.rectangle]:yn,[we.diamond]:l3,[we.ellipse]:u3,[we.parallelogram]:db,[we.roundRectangle]:H$,[we.text]:yn,[we.triangle]:z$,[we.leftArrow]:b$,[we.trapezoid]:G$,[we.rightArrow]:I$,[we.cross]:S$,[we.star]:$$,[we.pentagon]:R$,[we.hexagon]:A$,[we.octagon]:P$,[we.pentagonArrow]:L$,[we.processArrow]:F$,[we.twoWayArrow]:U$,[we.comment]:C$,[we.roundComment]:N$,[we.cloud]:IP,[ye.process]:yn,[ye.decision]:l3,[ye.connector]:u3,[ye.data]:db,[ye.terminal]:V$,[ye.database]:aV,[ye.hardDisk]:lV,[ye.internalStorage]:uV,[ye.manualInput]:X$,[ye.preparation]:Y$,[ye.manualLoop]:K$,[ye.merge]:Z$,[ye.delay]:Q$,[ye.storedData]:J$,[ye.or]:iV,[ye.summingJunction]:rV,[ye.predefinedProcess]:tV,[ye.offPage]:nV,[ye.document]:oV,[ye.multiDocument]:sV,[ye.noteCurlyLeft]:cV,[ye.noteCurlyRight]:fV,[ye.noteSquare]:hV,[ye.display]:gV,[Xo.swimlaneHorizontal]:lg,[Xo.swimlaneVertical]:lg,[Og.table]:lg,[de.actor]:vV,[de.useCase]:u3,[de.container]:yV,[de.note]:SV,[de.package]:wV,[de.combinedFragment]:xV,[de.class]:lg,[de.interface]:lg,[de.activation]:yn,[de.object]:yn,[de.deletion]:CV,[de.activityClass]:EV,[de.simpleClass]:yn,[de.component]:x6,[de.componentBox]:bV,[de.template]:BV,[de.port]:yn,[de.branchMerge]:l3,[de.assembly]:TV,[de.requiredInterface]:AV,[de.providedInterface]:DV},br=e=>PV[e],Ev=(e,n)=>{const i=Tn(n),r=n.source.boundId?Es(e,n.source.boundId):void 0,o=n.target.boundId?Es(e,n.target.boundId):void 0;let a=r?Yc(r,n.source.connection):n.points[0],l=o?Yc(o,n.target.connection):n.points[n.points.length-1],c=ag([l[0]-a[0],l[1]-a[1]])||Fe.right,h=HG(c);const d=id(c),p=id(h),m={key:Xs.source,point:a,direction:c,vector:[d.x,d.y]},w={key:Xs.target,point:l,direction:h,vector:[p.x,p.y]};if(r){const x=dr.isSourceMarkOrTargetMark(n,ur.none,Xs.source)?0:i,T=Mb(r,n.source.connection);if(m.vector=T,m.boundElement=r,bl(r)){const D=ag(Gm(T,r.angle));c=D||c}else{const D=ag(T);c=D||c}m.direction=c,a=Yc(r,n.source.connection,c,x),m.point=Bl(a,r)||a}if(o){const x=dr.isSourceMarkOrTargetMark(n,ur.none,Xs.target)?0:i,T=Mb(o,n.target.connection);if(w.vector=T,w.boundElement=o,bl(o)){const D=ag(Gm(T,o.angle));h=D||h}else{const D=ag(T);h=D||h}w.direction=h,l=Yc(o,n.target.connection,h,x),w.point=Bl(l,o)||l}return{source:m,target:w}},Yc=(e,n,i,r)=>{const o=H.getRectangleByPoints(e.points);if(i&&r){const a=id(i),l=H.getConnectionPoint(o,n);return[l[0]+a.x*r,l[1]+a.y*r]}else return H.getConnectionPoint(o,n)},Mb=(e,n)=>{const i=H.getRectangleByPoints(e.points),r=yf(e),o=br(r);let a=[0,0];const l=ZB(n);if(l&&e.shape!==we.ellipse){const c=id(l);return[c.x,c.y]}if(o.getEdgeByConnectionPoint){const c=o.getEdgeByConnectionPoint(i,n);if(c){const h=[c[1][0]-c[0][0],c[1][1]-c[0][1]];return L7(h)}}if(o.getTangentVectorByConnectionPoint){const c=o.getTangentVectorByConnectionPoint(i,n);if(c)return L7(c)}return a},Sv=(e,n,i)=>{i=i??Ev(e,n);const{sourceRectangle:r,targetRectangle:o}=IU(e,n,i),{sourceOuterRectangle:a,targetOuterRectangle:l}=nz(r,o),c=i.source.point,h=i.target.point,d=I7(c,a,i.source.direction),p=I7(h,l,i.target.direction);return{sourcePoint:c,nextSourcePoint:d,sourceRectangle:r,sourceOuterRectangle:a,targetPoint:h,nextTargetPoint:p,targetRectangle:o,targetOuterRectangle:l}},MV=(e,n,i)=>{const r=hd(e,{match:o=>At.isArrowLine(o)?o.source.boundId===o.id||o.target.boundId===o.id:!1,recursion:o=>!0});r.length&&r.forEach(o=>{const a=o.source.boundId===n.id,l=a?"source":"target",c={...o[l]},h=To(e,o),d=a?h[0]:h[h.length-1];c.connection=_g(e,d,n);const p=G.findPath(e,o),m=i.findIndex(w=>Se.equals(w.path,p));m===-1?i.push({property:{[l]:c},path:p}):i[m].property={...i[m].property,[l]:c}})};var ur;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(ur||(ur={}));var qn;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(qn||(qn={}));var Xs;(function(e){e.source="source",e.target="target"})(Xs||(Xs={}));const dr={isSourceMarkOrTargetMark(e,n,i){return i===Xs.source?e.source.marker===n:e.target.marker===n},isSourceMark(e,n){return dr.isSourceMarkOrTargetMark(e,n,Xs.source)},isTargetMark(e,n){return dr.isSourceMarkOrTargetMark(e,n,Xs.target)},isBoundElementOfSource(e,n){return e.source.boundId===n.id},isBoundElementOfTarget(e,n){return e.target.boundId===n.id},getPoints(e,n){let i;if(n.source.boundId){const a=Es(e,n.source.boundId),l=Yc(a,n.source.connection);i=Bl(l,a)||l}else i=n.points[0];let r;if(n.target.boundId){const a=Es(e,n.target.boundId),l=Yc(a,n.target.connection);r=Bl(l,a)||l}else r=n.points[n.points.length-1];const o=n.points.length>2?n.points.slice(1,n.points.length-1):[];return[i,...o,r]}};var xs;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(xs||(xs={}));var cx;(function(e){e.vectorLine="vectorLine"})(cx||(cx={}));var Ym;(function(e){e.straight="straight",e.curve="curve"})(Ym||(Ym={}));const At={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>At.isArrowLine(e)||At.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===we.text,isImage:e=>e.type==="image",isTable:e=>$m.isTable(e),isDrawElement:e=>!!(At.isGeometry(e)||At.isLine(e)||At.isImage(e)||At.isTable(e)||At.isSwimlane(e)),isCustomGeometryElement:(e,n)=>{const i=e.getPluginOptions(gP);return!!((i==null?void 0:i.customGeometryTypes)||[]).includes(n.type)},isShapeElement:e=>At.isImage(e)||At.isGeometry(e)||At.isTable(e)||At.isSwimlane(e),isBasicShape:e=>Object.keys(we).includes(e.shape),isFlowchart:e=>Object.keys(ye).includes(e.shape),isUML:e=>Object.keys(de).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>At.isSwimlane(e)&&e.shape===Xo.swimlaneVertical,isHorizontalSwimlane:e=>At.isSwimlane(e)&&e.shape===Xo.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(de).includes(e.shape)&&[de.class,de.interface].includes(e.shape),isGeometryByTable:e=>At.isUMLClassOrInterface(e),isElementByTable:e=>At.isTable(e)||At.isSwimlane(e)||At.isGeometryByTable(e)};class Rb extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=pv(this.board,{getStrokeWidth:()=>(ne(this.board).length===1&&!Dr(this.board),Fi),getStrokeOpacity:()=>ne(this.board).length===1&&!Dr(this.board)?1:.5,getRectangle:n=>H.getRectangleByPoints(n.points),hasResizeHandle:()=>$x(this.board,this.element)}),this.lineAutoCompleteGenerator=new Mu(this.board),this.shapeGenerator=new qP(this.board),e6(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(Mu.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(Zw.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(n,i){n.element!==i.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(i.element,n.element)):(!(n.selected===i.selected)||n.selected)&&(this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}))}updateText(n,i){Su(this.element)?this.textGenerator.update(this.element,n.texts,i.texts,this.getElementG()):this.textGenerator.update(this.element,n.text,i.text,this.getElementG())}initializeTextManage(){const n=(i,r,o)=>{r.newText?Su(i)?Ao.setDrawTexts(this.board,i,{id:o.id,text:r.newText}):Ao.setText(this.board,i,r.newText,r.width,r.height):Ao.setTextSize(this.board,i,r.width,r.height),r.operations&&oA(i,r.operations)};Su(this.element)?this.textGenerator=new iA(this.board,this.element,this.element.texts,{onChange:n}):this.textGenerator=new EU(this.board,this.element,this.element.text,{onChange:n,getMaxWidth:()=>{let i=vf(this.board,this.element).width;const r=br(this.element.shape).getTextRectangle;return r&&(i=r(this.board,this.element).width),At.isText(this.element)&&this.element.autoSize?eA.defaultTextMaxWidth:i}}),this.textGenerator.initialize()}destroy(){var n;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(n=this.textGenerator)==null||n.destroy()}}const RV="debug:plait:line-turning",Ob=Gg(RV);class OV extends mf{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new LP(this.board),this.activeGenerator=new ZP(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=To(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const i=To(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:i})},Ob.isDebug()&&Ob.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const n={};if(this.element.source.boundId){const i=Es(this.board,this.element.source.boundId);i&&(n.source=i)}if(this.element.target.boundId){const i=Es(this.board,this.element.target.boundId);i&&(n.target=i)}return n}onContextChanged(n,i){const r=this.getBoundedElements(),o=r.source!==this.boundedElements.source||r.target!==this.boundedElements.target;this.boundedElements=r;const a=To(this.board,this.element);if(n.element!==i.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:a}),this.updateText(i.element.texts,n.element.texts),this.updateTextRectangle()):(n.selected!==i.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:a}),o){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:a}),this.updateTextRectangle();return}}initializeTextManages(){var n;if((n=this.element.texts)!=null&&n.length){const i=[];this.element.texts.forEach((r,o)=>{const a=this.createTextManage(r,o);i.push(a)}),this.getRef().initializeTextManage(i)}}drawText(){var n;(n=this.element.texts)!=null&&n.length&&this.getRef().getTextManages().forEach((i,r)=>{i.draw(this.element.texts[r].text),this.getElementG().append(i.g)})}createTextManage(n,i){return new yv(this.board,{getRectangle:()=>aA(this.board,this.element,i),onChange:r=>{const o=G.findPath(this.board,this.element),l=[...Je.get(this.board,o).texts];l.splice(i,1,{text:r.newText?r.newText:this.element.texts[i].text,position:this.element.texts[i].position}),Ao.setArrowLineTexts(this.board,this.element,l),r.operations&&oA(this.element,r.operations)},getMaxWidth:()=>eA.defaultTextMaxWidth,textPlugins:[]})}updateText(n,i){if(n===i)return;const r=n.length,o=i.length,a=this.getRef().getTextManages();if(o===r)for(let l=0;l<r;l++)n[l].text!==i[l].text&&a[l].updateText(i[l].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(i=>{i.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class LV extends mf{constructor(){super()}initializeGenerator(){this.shapeGenerator=new FP(this.board),this.activeGenerator=new ZP(this.board),this.getRef().updateActiveSection=()=>{const n=Jc(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:n})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=Jc(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize()}onContextChanged(n,i){const r=Jc(this.board,this.element);n.element!==i.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:r})):(n.selected!==i.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:r})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const _V=e=>{const{keyDown:n,dblClick:i}=e;return e.keyDown=r=>{const o=ne(e),a=o.length===1,l=o[0];if(!G.isReadonly(e)&&!qT(r)&&!KT(r)&&!YT(r)&&a&&At.isGeometry(l)){r.preventDefault(),a3(e,l);return}n(r)},e.dblClick=r=>{if(r.preventDefault(),!G.isReadonly(e)){const o=Pe(e,ke(e,r.x,r.y)),a=Ll(e,o,void 0,!1);if(a&&At.isGeometry(a)&&fA(a))if(Su(a)){const l=sU(e,a,o)||a.texts.find(c=>c.id.includes(bs.content))||a.texts[0];a3(e,a,l)}else a3(e,a)}i(r)},e},Lb=e=>{const n=nA();return G.isInPointer(e,n)&&Vx(e)},iw=e=>{const n=nA();return G.isInPointer(e,n)&&Pl(e)},FV=e=>{const{pointerMove:n,globalPointerUp:i,pointerUp:r}=e;let o=null,a=null,l=null;return e.pointerMove=c=>{o==null||o.remove(),o=ze();const h=nA(),p=G.isInPointer(e,h)&&Vx(e),m=Pe(e,ke(e,c.x,c.y)),w=G.getPointer(e),x=gA(e,w);if(p){const T=vd(w);if(w===we.text){const D=vA(e,ax(e),T.textProperties["font-size"]),b=H.getPoints(H.getRectangleByCenterPoint(m,D.width,D.height));if(a=wA(e,b,ax(e)),l)l.textManage.updateRectangle(),l.g.append(l.textManage.g);else{const B=new yv(e,{getRectangle:()=>vf(e,a)});B.draw(a.text),l={g:ze(),textManage:B},G.getHost(e).append(l.g),l.g.append(B.g)}}else{const D=t6(w,m);a=qm(e,D,w),x.processDrawing(a,o),G.getElementTopHost(e).append(o)}}n(c)},e.pointerUp=c=>{Lb(e)&&a||r(c)},e.globalPointerUp=c=>{Lb(e)&&a&&(Pu(e,a),l==null||l.textManage.destroy(),l==null||l.g.remove(),l=null),a=null,o==null||o.remove(),o=null,i(c)},e},kV=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,keyDown:o,keyUp:a,touchMove:l}=e;let c=null,h=null,d=null,p=!1,m;return e.keyDown=w=>{p=ln.isKeyHotkey("shift",w),o(w)},e.keyUp=w=>{p=!1,a(w)},e.pointerDown=w=>{if(!G.isReadonly(e)&&iw(e)){const x=Pe(e,ke(e,w.x,w.y));c=x;const T=G.getPointer(e);if(T===we.text){const D=vd(T),b=vA(e,ax(e),D.textProperties["font-size"]),B=H.getPoints(H.getRectangleByCenterPoint(x,b.width,b.height)),A=wA(e,B,ax(e));Pu(e,A),c=null}}n(w)},e.touchMove=w=>{c&&iw(e)&&w.preventDefault(),l(w)},e.pointerMove=w=>{h==null||h.remove(),h=ze();const x=Pe(e,ke(e,w.x,w.y)),T=G.getPointer(e),D=gA(e,T);if(m==null||m.remove(),c&&iw(e)){let b=Rg([c,x],p);const B=H.getRectangleByPoints(b),[A,I]=fi(c,x),R=tC(e,[],{resizePoints:b,activeRectangle:B,directionFactors:[Mg(A),Mg(I)],isAspectRatio:p,isFromCorner:!0,isCreate:!0});m=R.snapG,G.getElementTopHost(e).append(m),b=Rg(R.activePoints,p),d=qm(e,b,T),D.processDrawing(d,h),G.getElementTopHost(e).append(h)}i(w)},e.pointerUp=w=>{if(iw(e)&&c){const x=Pe(e,ke(e,w.x,w.y)),{width:T,height:D}=H.getRectangleByPoints([c,x]);if(Math.hypot(T,D)<8){const b=G.getPointer(e);if(b!==we.text){const B=t6(b,x);d=qm(e,B,b)}}d&&Pu(e,d),m==null||m.remove(),h==null||h.remove(),h=null,c=null,d=null;return}r(w)},e},IV=e=>{const n=e,{getDeletedFragment:i,buildFragment:r,insertFragment:o}=n;return n.getDeletedFragment=a=>{const l=lx(n);if(l.length){const c=l.filter(T=>At.isGeometry(T)),h=l.filter(T=>At.isArrowLine(T)),d=l.filter(T=>At.isVectorLine(T)),p=l.filter(T=>At.isImage(T)),m=l.filter(T=>At.isTable(T)),w=l.filter(T=>At.isSwimlane(T)),x=[...sm(n,c),...sm(n,p),...sm(n,m),...sm(n,w)].filter(T=>!h.includes(T));a.push(...c,...h,...d,...p,...m,...w,...x.filter(T=>!h.includes(T)))}return i(a)},n.buildFragment=(a,l,c,h)=>{const d=lx(n,h);let p=[];if(d.length){if(c===Ma.cut){const D=d.filter(B=>At.isGeometry(B)),b=d.filter(B=>At.isArrowLine(B));p=sm(n,D).filter(B=>!b.includes(B))}const m=[...d,...p],w=w$(n,m,l?[l.x,l.y]:[0,0]),T={text:tP(m),type:Au.elements,elements:w};a=Gx(a,T)}return r(a,l,c,h)},n.insertFragment=(a,l,c)=>{var d,p,m;const h=ne(n);if((d=a==null?void 0:a.files)!=null&&d.length){const w=$B.map(T=>"image/"+T),x=!Uo(n)&&!(h.length===1&&n.isImageBindingAllowed(h[0]));if(w.includes(a.files[0].type)&&x){const T=a.files[0];nP(n,T,yj,D=>{Ao.insertImage(n,D,l)});return}}if((p=a==null?void 0:a.elements)!=null&&p.length){const w=(m=a.elements)==null?void 0:m.filter(x=>At.isDrawElement(x));a.elements&&a.elements.length>0&&w.length>0&&x$(n,w,l)}if(a!=null&&a.text&&(!a.elements||a.elements.length===0)&&!(h.length===1&&h[0].children)){Ao.insertText(n,l,a.text);return}o(a,l,c)},n},sm=(e,n)=>tU(e).filter(r=>n.find(o=>dr.isBoundElementOfSource(r,o)||dr.isBoundElementOfTarget(r,o))),HV=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r,touchStart:o}=e;let a=null,l,c=null,h=null;return e.touchStart=d=>{const p=q7(),m=G.isInPointer(e,p);if(!G.isReadonly(e)&&m&&Pl(e))return d.preventDefault();o(d)},e.pointerDown=d=>{const p=q7(),m=G.isInPointer(e,p);if(!G.isReadonly(e)&&m&&Pl(e)){const w=Pe(e,ke(e,d.x,d.y));a=w;const x=hA(e,w);x&&(l=x)}n(d)},e.pointerMove=d=>{c==null||c.remove(),c=ze();let p=Pe(e,ke(e,d.x,d.y));if(a){const m=G.getPointer(e);h=lA(e,m,a,p,l,c)}i(d)},e.globalPointerUp=d=>{h&&(Qt.insertNode(e,h,[e.children.length]),zg(e),cd(e,h),un.updatePointerType(e,nn.selection)),c==null||c.remove(),c=null,l=null,a=null,h=null,r(d)},e},NV=e=>{let n,i,r,o,a;return pd(e,{key:"draw-line",canResize:()=>!0,hitTest:c=>{const h=CA(e);if(h.length>0){let d=null;return h.forEach(p=>{const m=KP(e,p,c);m&&(d={element:p,handle:m.handle,handleIndex:m.handleIndex})}),d}return null},beforeResize:c=>{if(c.element.shape===qn.elbow&&c.handle!==fr.source&&c.handle!==fr.target){const h=Sv(e,c.element);if(xA(c.element,h))return;const d=[...c.element.points],p=c.handleIndex,m=Qx(e,c.element);r=m[0],o=m[m.length-1],a=i6(e,c.element,m);const w=MP(e,c.element,[...d],a,p);n=w.index,i=w.deleteCount}},onResize:(c,h)=>{let d=[...c.element.points],p={...c.element.source},m={...c.element.target},w=c.handleIndex;const x=hA(e,h.endPoint);if(c.handle===fr.source||c.handle===fr.target){const T=c.handle===fr.source?p:m;d[w]=h.endPoint,x?(T.connection=_g(e,h.endPoint,x),T.boundId=x.id):(T.connection=void 0,T.boundId=void 0)}else if(c.element.shape===qn.elbow){if(a&&r&&o){const T=kj(a,r,o,w),D=a[w],b=a[w+1],[B,A]=Ij(D,b,h,T);let I=[...d].slice(1,d.length-1);n!==null&&i!==null&&(OP(I)?I=[B,A]:I.splice(n,i,B,A),d=[r,...I,o])}}else c.handle===fr.addHandle?d.splice(w+1,0,h.endPoint):d[w]=h.endPoint;if(!x){w=c.handle===fr.addHandle?w+1:w;const T=To(e,c.element),D=[...d];D[0]=T[0],D[D.length-1]=T[T.length-1],(c.element.shape!==qn.elbow||c.element.shape===qn.elbow&&D.length===2)&&D.forEach((b,B)=>{B!==w&&d[w]&&(d[w]=sA(b,d[w]))})}Ao.resizeArrowLine(e,{points:d,source:p,target:m},c.path)},afterResize:c=>{if(c.element.shape===qn.elbow){const h=Je.get(e,c.path);let d=h&&[...h.points];if(d.length>2&&a&&r&&o){const p=a[0],m=a[a.length-1];d.splice(0,1,p),d.splice(-1,1,m),d=gu(d),Ce.isEquals(d[0],p)&&d.splice(0,1),Ce.isEquals(d[d.length-1],m)&&d.pop(),d.length===1&&(d=[]),d=[r,...d,o],Ao.resizeArrowLine(e,{points:d},c.path)}}n=null,i=null,r=null,o=null,a=null}}),e},GV=e=>{const{pointerMove:n,pointerUp:i}=e;let r=null;return e.pointerMove=o=>{if(r==null||r.remove(),G.isReadonly(e)){n(o);return}const a=Object.keys(qn),l=G.isInPointer(e,a),c=Pe(e,ke(e,o.x,o.y)),h=OG(e,d=>{const{element:p,handle:m}=d,w=m===fr.target||m===fr.source;return At.isArrowLine(p)&&w});if(l||h){const d=WP(e,c);if(d){const p=dA(e,d,c),m=p.isHitEdge||p.isHitConnector;if(r=CU(e,d,{hasMask:m,hasConnector:!0}),m){const w=fd(G.getRoughSVG(e),p.connectorPoint||p.edgePoint,6,{stroke:Ko,strokeWidth:W3,fill:Ko,fillStyle:"solid"});r.appendChild(w)}bl(d)&&qs(r,H.getCenterPointByPoints(d.points),d.angle),G.getElementTopHost(e).append(r)}}n(o)},e.pointerUp=o=>{r==null||r.remove(),r=null,i(o)},e},C6=e=>zx(e,Lg.lineText,Bj),zV=e=>{const{dblClick:n}=e;return e.dblClick=i=>{var r,o;if(!G.isReadonly(e)){const a=Pe(e,ke(e,i.x,i.y)),l=Ll(e,a);if(l&&At.isArrowLine(l)){const c=l&&G.findPath(e,l),h=To(e,l),d=Yn(a,h),p=(r=l.texts)!=null&&r.length?[...l.texts]:[],m=uA(e,l,a);if(HP(e,l,a))_b(e,l,m);else{const x=C6(e),T=((o=Wx("arrow-line"))==null?void 0:o.text)||{},D=gd(x,void 0,T),b=KB(h,d);p.push({text:D,position:b}),Ao.setArrowLineTexts(e,l,p),setTimeout(()=>{if(c){const B=Je.get(e,c),A=Xg(B);_b(e,B,A.length-1,!0)}})}}}n(i)},e};function _b(e,n,i,r=!1){const a=Xg(n)[i];a.edit(()=>{const l=te.string(a.getText()),c=C6(e);(!l||r&&l===c)&&Ao.removeArrowLineText(e,n,i)})}class jV extends mf{constructor(){super()}initializeGenerator(){this.imageGenerator=new Bu(this.board,{getRectangle:n=>({x:n.points[0][0],y:n.points[0][1],width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]}),getImageItem:n=>({url:n.url,width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]})}),this.lineAutoCompleteGenerator=new Mu(this.board),this.getRef().addGenerator(Mu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}onContextChanged(n,i){n.element!==i.element?(this.imageGenerator.updateImage(this.getElementG(),i.element,n.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})):(!(n.selected===i.selected)||n.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const UV="plait-arrow-line-auto-complete-plugin-key",pg=new WeakMap,$V=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r,touchMove:o}=e;let a=null,l=null,c,h;return e.pointerDown=d=>{const p=lx(e),m=p.length===1&&p[0],w=ed(e,d.x,d.y);if(!G.isReadonly(e)&&m&&At.isShapeElement(m)){const x=mA(e,m,!0),T=JP(af(e,w,m,!0)||w,x),D=x[T];if(D){eS(e);const b=nL(e,D);a=Pe(e,ke(e,b[0],b[1])),c=m,un.updatePointerType(e,qn.elbow)}}n(d)},e.touchMove=d=>{if(a&&c)return d.preventDefault();o(d)},e.pointerMove=d=>{l==null||l.remove(),l=ze();let p=Pe(e,ke(e,d.x,d.y));if(a&&c&&be(...af(e,p,c)||p,...a)>sT*2){const w=H.getRectangleByPoints(c.points),x=yf(c),T=br(x);let D=a;T.getNearestCrossingPoint&&(D=T.getNearestCrossingPoint(w,a));const b=Bl(D,c)||D;h=lA(e,qn.elbow,b,p,c,l),Qt.addSelectionWithTemporaryElements(e,[])}i(d)},e.globalPointerUp=d=>{var p;if(h){Qt.insertNode(e,h,[e.children.length]),zg(e),cd(e,h);const m=(p=e.getPluginOptions(UV))==null?void 0:p.afterComplete;m&&m(h)}else{const m=pg.get(e);m&&(Qt.insertNode(e,m.temporaryArrowLineElement,[e.children.length]),Pu(e,m.temporaryShapeElement),pg.delete(e))}a&&(un.updatePointerType(e,nn.selection),a=null),l==null||l.remove(),l=null,c=null,h=null,r(d)},e},Fb=100,VV=e=>{const{pointerMove:n,pointerLeave:i,globalPointerUp:r}=e;let o=null,a=null,l=null,c=null,h=null;e.pointerMove=p=>{o==null||o.remove(),G.getBoardContainer(e).classList.remove(gm.crosshair);const m=lx(e);c==null||c.remove(),h==null||h.remove();const w=m.length===1&&m[0],x=ed(e,p.x,p.y);if(!G.isReadonly(e)&&!Dr(e)&&w&&At.isShapeElement(w)){const T=mA(e,w,!0),D=JP(af(e,x,w,!0)||x,T),b=T[D];if(gn.getElementRef(w).getGenerator(Mu.key).recoverAutoCompleteG(),b){if(o=fd(G.getRoughSVG(e),b,bj,{stroke:"none",fill:Mm(Wg,Dj),fillStyle:"solid"}),G.getActiveHost(e).append(o),G.getBoardContainer(e).classList.add(gm.crosshair),bl(w)){const I=e.getRectangle(w),R=qr(e,I);qs(o,H.getCenterPoint(R),w.angle)}if(At.isGeometry(w)&&!At.isText(w)){const I=H.getRectangleByPoints(w.points);let R=H.getEdgeCenterPoints(I)[D];const k=lz(D);let W=si(R,Fb,k);const U=gA(e,w.shape),nt=w.points.map(ct=>si(ct,Fb+uP(w.points[0],w.points[1],__(k)),k));c=ze(),h=ze(),c.style.opacity="0.6",h.style.opacity="0.6",l=qm(e,nt,w.shape),l.angle=w.angle,l.fill=w.fill,l.strokeColor=w.strokeColor,l.strokeStyle=w.strokeStyle,l.strokeWidth=w.strokeWidth,l.groupId=w.groupId;const st=Bl(R,w)||R,ft=Bl(W,l)||W;a=lA(e,qn.elbow,st,ft,w,c),pg.set(e,{temporaryArrowLineElement:a,temporaryShapeElement:l});const Et=_g(e,ft,l);a.target.boundId=l.id,a.target.connection=Et,U.processDrawing(l,h),G.getElementTopHost(e).append(h)}return}}pg.delete(e),n(p)},e.pointerLeave=p=>{d(),i(p)};const d=()=>{o&&(o==null||o.remove(),G.getBoardContainer(e).classList.remove(gm.crosshair),c==null||c.remove(),h==null||h.remove()),pg.get(e)&&pg.delete(e)};return e.globalPointerUp=p=>{r(p),d()},e},WV=e=>{let n=0;const i=100;return pd(e,{key:"line-text",canResize:()=>!0,hitTest:o=>{let a=null;const l=Ll(e,o,c=>At.isArrowLine(c));if(l){const c=uA(e,l,o),d=Xg(l)[c];if(c!==-1&&!d.isEditing)return n=c,{element:l,handle:CS.e}}return a},onResize:(o,a)=>{const l=o.element;if(l){const c=a.endPoint,h=To(e,l);if(l4(c,h)<=i){const p=Yn(c,h,!1),m=KB(h,p),w=[...l.texts];w[n]={...w[n],position:m},Ao.setArrowLineTexts(e,l,w)}}}}),e},XV=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r,afterChange:o,drawSelectionRectangle:a}=e;let l=null,c,h=!1;const d=()=>{const p=ne(e);return p.length>0&&p.every(m=>At.isDrawElement(m)&&!At.isArrowLine(m)||At.isCustomGeometryElement(e,m))};return e.pointerDown=p=>{if(!d()||G.isReadonly(e)||G.hasBeenTextEditing(e)||!Dl(p)){n(p);return}const m=ed(e,p.x,p.y),w=ne(e),x=pn(e,w,!1),T=qr(e,x),D=l$(T),b=Wo(w),B=b?nr(m,H.getCenterPoint(T),-b):m;D&&H.isHit(H.getRectangleByPoints([B,B]),D)&&(l={elements:[...w],startPoint:m}),n(p)},e.pointerMove=p=>{if(l){p.preventDefault();const m=!!p.shiftKey;rz(e,l);const w=ed(e,p.x,p.y),x=pn(e,l.elements,!1),T=qr(e,x),D=H.getCenterPoint(T);!Wo(l.elements)&&l.elements.length>1&&(h=!0),_a(e,"with-common-rotate",()=>{if(l&&l.startPoint){let b=b_(l.startPoint,w,D);const B=Wo(l.elements);b=Lm(B+b),m&&(b+=Math.PI/12/2,b-=b%(Math.PI/12));let A=b%(Math.PI/2);if(Math.PI/2-A<=uS(5)){const I=Math.PI/2-A;b+=I}if(A<=uS(5)){const I=-A;b+=I}l.angle=Lm(b-B)||0,D_(e,l.elements,l.angle),tr.set(e,!0),G.getBoardContainer(e).classList.add("element-rotating")}});return}i(p)},e.globalPointerUp=p=>{if(r(p),h){h=!1;const m=ne(e);Qt.addSelectionWithTemporaryElements(e,m)}G.getBoardContainer(e).classList.remove("element-rotating"),oz(e),l=null,tr.set(e,!1)},e.afterChange=()=>{if(o(),c&&(c.remove(),c=null),d()&&!Dr(e)){if(h&&l){const p=pn(e,l.elements,!1),m=qr(e,p);c=P7(e,m),c.classList.add(BD),l.angle&&qs(c,H.getCenterPoint(m),l.angle)}else{const p=ne(e),m=pn(e,p,!1),w=qr(e,m);c=P7(e,w),c.classList.add(BD),qs(c,H.getCenterPoint(w),Wo(p))}G.getActiveHost(e).append(c)}},e.drawSelectionRectangle=()=>{if(h&&l){const p=pn(e,l.elements,!1),m=qr(e,p),w=ka(e,H.inflate(m,Fi),{stroke:Ko,strokeWidth:Fi});return w.classList.add(cv),l.angle&&qs(w,H.getCenterPoint(m),l.angle),w}return a()},e};class E6 extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=pv(this.board,{getStrokeWidth:()=>Fi,getStrokeOpacity:()=>1,getRectangle:n=>{const i=gg(n);return i!=null&&i.length?Oj(this.board,this.element,i):H.getRectangleByPoints(n.points)},hasResizeHandle:()=>{const n=gg(this.element);return n!=null&&n.length?!1:$x(this.board,this.element)}}),this.tableGenerator=new Zx(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new Mu(this.board),this.getRef().addGenerator(Mu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(i=>{if($m.isVerticalText(i)){const r=AP(this.board,i);if(r){const a=br(Og.table).getTextRectangle(this.board,this.element,{id:i.id,board:this.board});r.g.classList.add("vertical-cell-text"),qs(r.g,H.getCenterPoint(a),uS(-90))}}})}getDrawShapeTexts(n){return n.filter(i=>BP(i)).map(i=>({id:i.id,text:i.text,board:this.board}))}initializeTextManage(){const n=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new iA(this.board,this.element,n,{onChange:(i,r,o)=>{const a=G.findPath(this.board,i);r.newText&&Ao.setTableText(this.board,a,o.id,r.newText,r.height),r.operations&&oA(i,r.operations)},getRenderRectangle:(i,r)=>{const o=md(this.board,i,r.id);if($m.isVerticalText(o)){const a=H.getRectangleByPoints(o.points),l=Tn(o),c=a.height-Me.rectangleAndText*2-l*2;return{width:mV(this.board,o,!0),height:c>0?c:0,x:a.x+Me.rectangleAndText+l,y:a.y+(a.height-c)/2}}else return y6(this.board,o)}}),this.textGenerator.initialize()}onContextChanged(n,i){if(n.element!==i.element||n.hasThemeChanged){const r=gg(i.element);r!=null&&r.length&&(Z7(i.element),TP(n.element,r)),this.tableGenerator.processDrawing(n.element,this.getElementG()),this.activeGenerator.processDrawing(n.element,G.getActiveHost(this.board),{selected:this.selected});const o=this.getDrawShapeTexts(i.element.cells),a=this.getDrawShapeTexts(n.element.cells);this.textGenerator.update(n.element,o,a,this.getElementG()),this.rotateVerticalText()}else{const r=n.selected===i.selected,o=gg(n.element);(!r||o!=null&&o.length||n.selected)&&this.activeGenerator.processDrawing(n.element,G.getActiveHost(this.board),{selected:this.selected}),this.selected||Z7(n.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const kb=20;function qV(e){let n;return pd(e,{key:"draw-table",canResize:()=>{const r=ne(e);return BS(e)&&!bl(r[0])},hitTest:r=>{const a=ne(e)[0];if(a&&At.isElementByTable(a)){let l=e.getRectangle(a),c=OS(e,l,r,a.angle);if(c){const d=vg(e,a);if(d&&BS(e)||!d&&!Ew(e,c.handle))return{element:a,handle:c.handle,cursorClass:c.cursorClass,rectangle:l}}const h=wv(e,a);for(let d=0;d<h.length;d++)if(l=H.getRectangleByPoints(h[d].points),c=OS(e,l,r,0),c&&!Ew(e,c.handle))return{element:a,handle:c.handle,cursorClass:c.cursorClass,rectangle:l,options:{cell:h[d]}}}return null},onResize:(r,o)=>{var l,c,h,d;n==null||n.remove();const a=G.findPath(e,r.element);if((l=r.options)!=null&&l.cell&&r.rectangle){const p=Jw(r.handle),{originPoint:m,handlePoint:w}=LS(e,p,r.rectangle),x=[o.startPoint,o.endPoint],{xZoom:T,yZoom:D}=EA(x,m,w,!1,!1),b=(c=r.options)==null?void 0:c.cell.points,B=b.map(W=>yu(W,m,T,D)),A=B[1][0]-b[1][0],I=B[1][1]-b[1][1],R=B[1][0]-B[0][0],k=B[1][1]-B[0][1];if(A!==0&&R>=kb){const{columns:W,points:U}=DP(r.element,(h=r.options)==null?void 0:h.cell.columnId,R,A);Qt.setNode(e,{columns:W,points:U},a)}else if(I!==0&&k>=kb){const{rows:W,points:U}=bP(r.element,(d=r.options)==null?void 0:d.cell.rowId,k,I);Qt.setNode(e,{rows:W,points:U},a)}}else{const p=Ew(e,r.handle),m=o.isShift,w=Jw(r.handle),{originPoint:x,handlePoint:T}=LS(e,w,r.rectangle),D=p6(e,r,o,{originPoint:x,handlePoint:T},m,p),b=tC(e,[r.element],D);n=b.snapG,G.getElementTopHost(e).append(n);const B=b.activePoints,A=r.element.points,I=H.getRectangleByPoints(A),R=H.getRectangleByPoints(B),k=R.width-I.width,W=R.height-I.height;let U=[...r.element.columns],nt=[...r.element.rows];k!==0&&(U=U.map(st=>st.width?{...st,width:st.width+k*(st.width/I.width)}:st)),W!==0&&(nt=nt.map(st=>st.height?{...st,height:st.height+W*(st.height/I.height)}:st)),Qt.setNode(e,{points:Rg(B),columns:U,rows:nt},a)}},afterResize:r=>{n==null||n.remove(),n=null}}),e}const YV=e=>{const n=e,{drawElement:i,getRectangle:r,isRectangleHit:o,isHit:a,isMovable:l,dblClick:c,keyDown:h,pointerUp:d}=n;return n.drawElement=p=>At.isElementByTable(p.element)?E6:i(p),n.isHit=(p,m,w)=>{if(At.isElementByTable(p)){const x=H.getRectangleByPoints(p.points),T=lg.getNearestPoint(x,m);return be(T[0],T[1],m[0],m[1])<=aT||H.isPointInRectangle(x,m)}return a(p,m,w)},n.getRectangle=p=>At.isElementByTable(p)?H.getRectangleByPoints(p.points):r(p),n.isMovable=p=>At.isElementByTable(p)?!0:l(p),n.isRectangleHit=(p,m)=>{if(At.isElementByTable(p)){const w=H.getRectangleByPoints([m.anchor,m.focus]),x=H.getRectangleByPoints(p.points);return zw(H.getCornerPoints(x),w)}return o(p,m)},n.keyDown=p=>{const m=ne(e),w=m.length===1,x=m[0];if(!G.isReadonly(e)&&!G.hasBeenTextEditing(n)&&!qT(p)&&!KT(p)&&!YT(p)&&w&&(p.preventDefault(),At.isElementByTable(x))){const T=gg(x);let D=x.cells.find(b=>b.text);if(T!=null&&T.length&&(D=T.find(b=>b.text)),D){eb(e,D);return}}h(p)},n.dblClick=p=>{if(p.preventDefault(),!G.isReadonly(e)){const m=Pe(e,ke(e,p.x,p.y)),w=Ll(e,m);if(w&&At.isElementByTable(w)){const x=tb(n,w,m);if(x&&x.text){eb(e,x);return}}}c(p)},n.pointerUp=p=>{const m=G.isPointer(n,nn.selection)||G.isPointer(n,nn.hand);if(!Dl(p)||of(n)||!m){d(p);return}if(BS(n)){const x=Pe(n,ke(n,p.x,p.y)),T=Pj(n)[0],D=tb(n,T,x);D&&D.text&&TP(T,[D])}d(p)},n.buildTable=p=>p,qV(n)},f3=e=>u6(e)&&Vx(e),h3=e=>u6(e)&&Pl(e),KV=e=>{const{pointerMove:n,globalPointerUp:i,pointerUp:r}=e;let o=null,a=null;return e.pointerMove=l=>{o==null||o.remove(),o=ze();const c=new Zx(e),h=G.getPointer(e),d=f3(e),p=Pe(e,ke(e,l.x,l.y));if(d){const m=l6(h,p);a=ux(h,m),c.processDrawing(a,o),G.getElementTopHost(e).append(o)}n(l)},e.pointerUp=l=>{f3(e)&&a||r(l)},e.globalPointerUp=l=>{f3(e)&&a&&Pu(e,a),a=null,o==null||o.remove(),o=null,i(l)},e},ZV=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,keyDown:o,keyUp:a}=e;let l=null,c=null,h=null,d=!1,p;return e.keyDown=m=>{d=ln.isKeyHotkey("shift",m),o(m)},e.keyUp=m=>{d=!1,a(m)},e.pointerDown=m=>{!G.isReadonly(e)&&h3(e)&&(l=Pe(e,ke(e,m.x,m.y))),n(m)},e.pointerMove=m=>{c==null||c.remove(),c=ze();const w=new Zx(e),x=Pe(e,ke(e,m.x,m.y)),T=G.getPointer(e);if(p==null||p.remove(),l&&h3(e)){let D=Rg([l,x],d);const b=H.getRectangleByPoints(D),[B,A]=fi(l,x),I=tC(e,[],{resizePoints:D,activeRectangle:b,directionFactors:[Mg(B),Mg(A)],isAspectRatio:d,isFromCorner:!0,isCreate:!0});p=I.snapG,G.getElementTopHost(e).append(p),D=Rg(I.activePoints,d),h=ux(T,D),w.processDrawing(h,c),G.getElementTopHost(e).append(c)}i(m)},e.pointerUp=m=>{if(h3(e)&&l){const w=Pe(e,ke(e,m.x,m.y)),{width:x,height:T}=H.getRectangleByPoints([l,w]);if(Math.hypot(x,T)<8){const D=G.getPointer(e),b=l6(D,w);h=ux(D,b)}h&&Pu(e,h),p==null||p.remove(),c==null||c.remove(),c=null,l=null,h=null;return}r(m)},e},QV=e=>{const{drawElement:n,buildTable:i,pointerUp:r}=e;return e.drawElement=o=>At.isSwimlane(o.element)?E6:n(o),e.buildTable=o=>At.isSwimlane(o)?ZU(o):i(o),ZV(KV(e))},JV=e=>{const{pointerDown:n,pointerMove:i,dblClick:r,globalKeyDown:o}=e;let a=null,l=null,c=[];const h=()=>{l&&Qt.insertNode(e,l,[e.children.length]),G.getBoardContainer(e).classList.remove("vector-line-closed"),a==null||a.remove(),a=null,l=null,c=[]};return e.pointerDown=d=>{const p=vj(),m=G.isInPointer(e,p);if(!G.isReadonly(e)&&m&&Pl(e)){let w=Pe(e,ke(e,d.x,d.y));if(c.length>1&&be(...w,...c[0])<=rx){c.push(c[0]),h();return}c.push(w);return}n(d)},e.pointerMove=d=>{a==null||a.remove(),a=ze();let p=Pe(e,ke(e,d.x,d.y));G.getPointer(e)===cx.vectorLine&&c.length>0&&(be(...p,...c[0])<=rx?(p=c[0],G.getBoardContainer(e).classList.add("vector-line-closed")):G.getBoardContainer(e).classList.remove("vector-line-closed"),l=lU(e,Ym.straight,c,p,a)),i(d)},e.dblClick=d=>{if(!G.isReadonly(e)&&l){h(),un.updatePointerType(e,nn.selection);return}r(d)},e.globalKeyDown=d=>{if(!G.isReadonly(e)){const p=ln.isKeyHotkey("esc",d),m=ln.isKeyHotkey("v",d);(p||m)&&l&&(h(),m&&un.updatePointerType(e,nn.selection))}o(d)},e},tW=e=>(pd(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:i=>{const r=r6(e);if(r.length>0){let o=null;return r.forEach(a=>{const l=KP(e,a,i);l&&(o={element:a,handle:l.handle,handleIndex:l.handleIndex})}),o}return null},onResize:(i,r)=>{let o=[...i.element.points],a=i.handleIndex;if(i.handle===fr.source||i.handle===fr.target)if(o[a]=r.endPoint,Cv(i.element.points))o[o.length-1]=r.endPoint;else{const l=i.handle===fr.source?o[o.length-1]:o[0];be(...r.endPoint,...l)<=rx&&(o[a]=l)}else i.handle===fr.addHandle?o.splice(a+1,0,r.endPoint):o[a]=r.endPoint;Qt.setNode(e,{points:o},i.path)}}),e),S6=e=>{const{drawElement:n,getRectangle:i,isRectangleHit:r,isHit:o,isInsidePoint:a,isMovable:l,isAlign:c,getRelatedFragment:h,getOneHitElement:d}=e;return e.drawElement=p=>At.isGeometry(p.element)?(At.isUML(p.element),Rb):At.isArrowLine(p.element)?OV:At.isVectorLine(p.element)?LV:At.isImage(p.element)?jV:n(p),e.getRectangle=p=>{if(At.isGeometry(p))return H.getRectangleByPoints(p.points);if(At.isArrowLine(p)){const m=To(e,p),w=p.texts.map((T,D)=>aA(e,p,D)),x=H.getRectangleByPoints(m);return H.getBoundingRectangle([x,...w])}if(At.isVectorLine(p)){const m=Jc(e,p),w=H.getRectangleByPoints(m);return H.getBoundingRectangle([w])}return At.isImage(p)?H.getRectangleByPoints(p.points):i(p)},e.isRectangleHit=(p,m)=>{const w=fU(e,p,m);return w!==null?w:r(p,m)},e.isHit=(p,m,w)=>{const x=mU(e,p,m,w);return x!==null?x:o(p,m,w)},e.getOneHitElement=p=>p.every(w=>At.isDrawElement(w))?UP(e,p):d(p),e.isInsidePoint=(p,m)=>{const w=yU(e,p,m);return w!==null?w:a(p,m)},e.isMovable=p=>{if(At.isGeometry(p)||At.isImage(p)||At.isVectorLine(p))return!0;if(At.isArrowLine(p)){const m=ne(e),w=x=>!!m.find(T=>T.id===x);return!!(!p.source.boundId&&!p.target.boundId||p.source.boundId&&w(p.source.boundId)&&m.includes(p)||p.target.boundId&&w(p.target.boundId)&&m.includes(p))}return l(p)},e.isAlign=p=>At.isGeometry(p)||At.isImage(p)?!0:c(p),e.getRelatedFragment=(p,m)=>{const w=m!=null&&m.length?m:ne(e),T=e.children.filter(D=>At.isArrowLine(D)).filter(D=>{const b=w.find(I=>I.id===D.source.boundId),B=w.find(I=>I.id===D.target.boundId),A=w.includes(D);return b&&B&&!A});return h([...p,...T],m)},QV(YV(c$(JV(VV(GV(tW(NV(WV(zV(XV(HV($V(FV(kV(IV(_V(e)))))))))))))))))},Te={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var ie;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(ie||(ie={}));var qo;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(qo||(qo={}));function _S(e){return e.origin.layout?e.origin.layout:Te.isAbstract(e.origin)?T6(_S(e.parent)):e.parent?_S(e.parent):null}const Ml=e=>e===ie.rightBottomIndented||e===ie.rightTopIndented||e===ie.leftBottomIndented||e===ie.leftTopIndented,eW=e=>e===ie.right||e===ie.left||e===ie.downward||e===ie.upward,Qo=e=>e===ie.standard,Xr=e=>e===ie.right||e===ie.left||e===ie.standard||Ml(e),Km=e=>e===ie.right||e===ie.left||e===ie.standard,FS=e=>e===ie.upward||e===ie.downward,Kc=e=>e===ie.leftTopIndented||e===ie.rightTopIndented||e===ie.upward,nW=e=>e===ie.leftBottomIndented||e===ie.rightBottomIndented||e===ie.downward,Zm=e=>e===ie.left||e===ie.leftTopIndented||e===ie.leftBottomIndented,fx=e=>e===ie.right||e===ie.rightTopIndented||e===ie.rightBottomIndented,d3=e=>Ml(e)?qo.indented:(Qo(e)||eW(e),qo.logic),T6=e=>Ml(e)?fx(e)?ie.right:ie.left:e;class Qm{constructor(n,i,r,o){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const a=i.getHorizontalGap(n,o),l=i.getVerticalGap(n,o);this.origin=n,this.width=i.getWidth(n),this.height=i.getHeight(n),this.x=this.y=0,o&&(this.parent=o);const c=_S(this);this.layout=c&&c!==ie.standard?c:r.rootLayoutType;const h=i.getVerticalConnectingPosition(n,o);h&&(this.verticalConnectingPosition=h),this.addGap(a,l)}isRoot(){return this.depth===0}addGap(n,i){const r=this;r.hGap+=n,r.vGap+=i,r.width+=2*n,r.height+=2*i}eachNode(n){A6(this,n)}getBoundingBox(){const n={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(i=>{n.left=Math.min(n.left,i.x),n.top=Math.min(n.top,i.y),n.right=Math.max(n.right,i.x+i.width),n.bottom=Math.max(n.bottom,i.y+i.height)}),n.width=n.right-n.left,n.height=n.bottom-n.top,n}translate(n=0,i=0){this.eachNode(r=>{r.x+=n,r.y+=i})}right2left(){const n=this,i=n.getBoundingBox();n.eachNode(r=>{r.x=r.x-(r.x-i.left)*2-r.width,r.left=!0}),n.translate(i.width,0)}down2up(){const n=this,i=n.getBoundingBox();n.eachNode(r=>{r.y=r.y-(r.y-i.top)*2-r.height,r.up=!0}),n.translate(0,i.height)}}function A6(e,n){var i;(i=e.children)==null||i.forEach(r=>{A6(r,n)}),n(e)}class iW{constructor(n,i,r,o,a,l,c,h,d,p){this.left=n,this.right=i,this.top=r,this.bottom=o,this.width=a,this.height=l,this.rootX=c,this.rootY=h,this.rootWidth=d,this.rootHeight=p}}function rW(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var kS;(function(e){e.middle="middle",e.bottom="bottom"})(kS||(kS={}));class rd{constructor(n,i,r,o,a){this.width=n,this.height=i,this.y=r,this.children=o,this.childrenCount=o.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=a}}const wf=e=>{var n;return e.children?(n=e.children)==null?void 0:n.filter(i=>i instanceof Qm?!Te.isAbstract(i.origin):i instanceof rd?!Te.isAbstract(i.origin.origin):!Te.isAbstract(i)):[]},D6=(e,n)=>{const i=e.children.indexOf(n);return e.children.find(r=>{if(r instanceof Qm)return Te.isAbstract(r.origin)&&r.origin.end===i;if(r instanceof rd&&e instanceof rd){if(Te.isAbstract(r.origin.origin)){const{end:o}=tf(r.origin.origin,e.origin);return o===i}return!1}return Te.isAbstract(r)&&r.end===i})},oW=(e,n)=>{const i=e.children.indexOf(n);return e.children.find(r=>{if(r instanceof Qm)return Te.isAbstract(r.origin)&&r.origin.start===i;if(r instanceof rd&&e instanceof rd){if(Te.isAbstract(r.origin.origin)){const{start:o}=tf(r.origin.origin,e.origin);return o===i}return!1}return Te.isAbstract(r)&&r.start===i})},tf=(e,n)=>{let i=e.start,r=e.end;if(Qo(n.layout)){const o=n.origin.rightNodeCount;i>=o&&(r-=o,i-=o)}return{start:i,end:r}};function hx(e,n,i){e.children[n].modifier+=i}function sW(e){return e.childrenCount===0?null:e.children[0]}function b6(e){let n=wf(e);return e.childrenCount===0?null:n[n.length-1]}function aW(e,n){if(Te.isAbstract(e.children[n].origin.origin))return;let i=e.children[n-1],r=e.children[n],o=i.modifier+i.preliminary+i.width,a=r.modifier+r.preliminary,l=0,c=e,h=e;for(;i||r;){if(i){let p=l+i.modifier+i.preliminary+i.width;p>o&&(o=p),o=P6(c,i,o,l),c=i,l=i.modifier+l,i=b6(i)}if(r){let p=r.modifier+r.preliminary;p<a&&(a=p),a=cW(h,r,a),h=r,r=sW(r)}}const d=o-a;d>0&&hx(e,n,d)}function lW(e){const n=e.children[0];let i=n.preliminary+n.modifier;const r=wf(e),o=r[r.length-1];let a=o.modifier+o.preliminary+o.width;n.origin.blackNode&&n.origin.blackNode.rootX>n.origin.blackNode.left&&(i=i+(n.origin.blackNode.rootX-n.origin.blackNode.left)),o.origin.blackNode&&o.origin.blackNode.rootX+o.origin.blackNode.rootWidth<o.origin.blackNode.right&&(a=a-(o.origin.blackNode.right-(o.origin.blackNode.rootX+o.origin.blackNode.rootWidth))),n.origin.verticalConnectingPosition&&o.origin.verticalConnectingPosition&&(i=i+n.width-n.origin.vGap,a=a-o.origin.vGap);let l=e.width/2;e.origin.verticalConnectingPosition&&(l=e.width-e.origin.vGap);const c=(i+a)/2-l;c>0?e.preliminary=c:e.children.forEach((h,d)=>{hx(e,d,Math.abs(c))})}function IS(e){if(e.childrenCount!==0){IS(e.children[0]);for(let n=1;n<e.childrenCount;n++){const i=e.children.find(r=>{let o=null;if(Te.isAbstract(r.origin.origin)){let{end:a}=tf(r.origin.origin,e.origin);o=a}return o===n-1});i&&uW(e,i),IS(e.children[n]),aW(e,n)}lW(e)}}function B6(e,n){n+=e.modifier,e.x=e.preliminary+n;for(let i=0;i<e.childrenCount;i++)B6(e.children[i],n)}function uW(e,n,i){const{start:r,end:o}=tf(n.origin.origin,e.origin),a=e.children.indexOf(n),l=e.children[r];let c=e.children[o];const h=l.modifier;let d=c.modifier+c.preliminary+c.width,p=c.modifier,m=e;for(e.children[a].modifier=l.modifier;c.childrenCount;){m=c;const T=b6(c);c=T||c;let D=p+c.modifier+c.preliminary+c.width;d=P6(m,c,d,p),p+=c.modifier,D>d&&(d=D)}const w=n.origin.blackNode?n.origin.blackNode.rootX*2+n.origin.blackNode.rootWidth:n.width,x=d-h;if(x>w){const T=(x-w)/2;hx(e,a,T)}else{const T=(w-x)/2;for(let D=r;D<o+1;D++)hx(e,D,T)}}function P6(e,n,i,r){const o=D6(e,n);return o?Math.max(o.modifier+o.width+r,i):i}function cW(e,n,i){const r=oW(e,n);return r?Math.min(r.modifier+r.preliminary,i):i}function fW(e){IS(e),B6(e,0)}function HS(e,n=0){e.x=n,e.children.forEach(i=>{if(Te.isAbstract(i.origin)){let r=0;for(let o=i.origin.start;o<=i.origin.end;o++){const a=e.children[o].getBoundingBox();r=Math.max(a.width,r)}HS(i,e.x+e.width/2+r)}else HS(i,e.x+e.width/2)})}function hW(e,n){let i=e.y+e.height,r=null;o(e);function o(a){a.children.forEach((l,c)=>{const h=a.children.find(p=>Te.isAbstract(p.origin)&&p.origin.end===c-1);if(h){const p=r!=null&&r.origin.isCollapsed?n.getExtendHeight(l.origin):0;i=dW(a,h)+p}if(Te.isAbstract(l.origin))return;let d=i+l.vGap;r&&!Km(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?d=d+n.getExtendHeight(l.origin):d=d+n.getIndentedCrossLevelGap()),l.y=d,r=l,i=l.y+l.height,o(l)})}}function dW(e,n){const i=n.origin,r=e.children.indexOf(n),o=e.children[i.start],a=e.children[i.end];e.children[r].y=o.y;const l=o.y;let c=a.y+a.height,h=a,d=e;for(;h!=null&&h.children.length;){d=h;const x=wf(d);h=x[x.length-1];const T=D6(d,h);c=T?Math.max(T.y+T.height,h.y+h.height):h.y+h.height}const p=c-l,m=n.blackNode?n.blackNode.height:n.height,w=n.blackNode?n.blackNode.rootY*2+n.blackNode.rootHeight:n.height;if(w>p){const x=(w-p)/2;for(let T=i.start;T<=i.end;T++)e.children[T].eachNode(D=>{D.y+=x})}else{const x=(p-w)/2;e.children[r].y+=x}return Math.max(n.y+m,o.y+p)}function M6(e,n,i){i?n.y=e.x:n.x=e.x,e.children.forEach((r,o)=>{M6(r,n.children[o],i)})}function R6(e,n,i=0){var r,o;if(n){if(Te.isAbstract(e.origin)){const{start:a,end:l}=tf(e.origin,e.parent);for(let c=a;c<=l;c++){const h=(r=e.parent)==null?void 0:r.children[c].getBoundingBox().right;i=Math.max(h,i)}}e.x=i,i+=e.width}else{if(Te.isAbstract(e.origin))for(let a=e.origin.start;a<=e.origin.end;a++){const l=(o=e.parent)==null?void 0:o.children[a].getBoundingBox().bottom;i=Math.max(l,i)}e.y=i,i+=e.height}e.children.forEach(a=>{R6(a,n,i)})}const O6=(e,n)=>{const i=[];return e.children.forEach(r=>{i.push(O6(r,n))}),n?(e.blackNode&&(e.blackNode=rW(e.blackNode)),new rd(e.height,e.width,e.x,i,e)):new rd(e.width,e.height,e.y,i,e)};class gW{constructor(){}layout(n,i,r,o,a=!1,l){const c=[],h=[],d=this.buildLayoutNode(n,r,o,c,l);switch(c.filter(m=>m.origin.children.length>0).forEach(m=>{const w=m.layout,x=o.toTop||Xr(o.rootLayoutType)&&Kc(w),T=o.toLeft||!Xr(o.rootLayoutType)&&Zm(w),D=Xr(w),b=this.layout(m.origin,d3(w),r,{toTop:x,toLeft:T,rootLayoutType:o.rootLayoutType},D,m.parent);!o.toTop&&x&&i!==qo.indented&&b.down2up(),!o.toLeft&&T&&b.right2left();const B=b.getBoundingBox();m.width=B.width,m.height=B.height,m.blackNode=new iW(B.left,B.right,B.top,B.bottom,B.width,B.height,b.x,b.y,b.width,b.height),h.push(b)}),i){case qo.indented:HS(d),hW(d,r);break;case qo.fishBone:break;case qo.logic:default:R6(d,a);const m=O6(d,a);fW(m),M6(m,d,a);break}const p=[];return c.filter(m=>m.origin.children.length>0).forEach((m,w)=>{if(m.parent){const x=h[w];x.parent=m.parent;let T,D;Xr(m.parent.layout)?(T=x.x,D=0):(T=0,D=x.y),x.translate(m.x-T,m.y-D);const B=m.parent.children.indexOf(m),A=m.parent.children[B];m.parent.children[B]=Object.assign(A,x);const I=p.find(R=>R.parent===m.parent&&!Te.isAbstract(m.origin));I?(I.offsetX<T&&(I.offsetX=T),I.offsetX<D&&(I.offsetX=D)):Te.isAbstract(m.origin)||p.push({parent:m.parent,offsetX:T,offsetY:D})}}),p.forEach(m=>{m.parent.children.forEach(w=>w.translate(m.offsetX,m.offsetY))}),d}buildLayoutNode(n,i,r,o,a){const l=new Qm(n,i,r,a);if(!l.origin.isCollapsed){const c=[l];let h;for(;h=c.pop();)if(!h.origin.isCollapsed){const d=h.origin.children,p=d?d.length:0;if(h.children=[],d&&p)for(let m=0;m<p;m++){const w=new Qm(d[m],i,r,h);h.children.push(w),w.depth=h.depth+1,(h.layout!==w.layout&&(d3(h.layout)!==d3(w.layout)||Xr(h.layout)!==Xr(w.layout))||Te.isAbstract(w.origin))&&!w.origin.isCollapsed?o.push(w):c.push(w)}}}return l}}class pW{static layout(n,i,r){const o=new gW;if(Qo(r)){const m=n.children.length,w=[],x=[],T={...n};for(let A=0;A<m;A++){const I=n.children[A];if(Te.isAbstract(I)&&I.end<n.rightNodeCount){w.push(I);continue}if(Te.isAbstract(I)&&I.start>=n.rightNodeCount){x.push(I);continue}A<n.rightNodeCount?w.push(I):x.push(I)}T.children=w;const D=o.layout(T,qo.logic,i,{toLeft:!1,toTop:!1,rootLayoutType:r},!0);T.children=x;const b=o.layout(T,qo.logic,i,{toLeft:!0,toTop:!1,rootLayoutType:r},!0);b.right2left(),D.translate(b.x-D.x,b.y-D.y);const B=D.children.filter(A=>Te.isAbstract(A.origin));return D.children=D.children.filter(A=>!Te.isAbstract(A.origin)),b.children.forEach(A=>{D.children.push(A),A.parent=D}),D.children=D.children.concat(B),D.x=b.x,D.origin=n,D}const a=Ml(r),l=a?qo.indented:qo.logic,c=a?!0:Xr(r),h=Kc(r),d=Zm(r),p=o.layout(n,l,i,{toTop:h,toLeft:d,rootLayoutType:r},c);return h&&p.down2up(),d&&p.right2left(),p}}const Jm=new WeakMap;var an;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(an||(an={}));const dx={[ie.right]:[an.right],[ie.left]:[an.left],[ie.upward]:[an.top],[ie.downward]:[an.bottom],[ie.rightBottomIndented]:[an.right,an.bottom],[ie.rightTopIndented]:[an.right,an.top],[ie.leftBottomIndented]:[an.left,an.bottom],[ie.leftTopIndented]:[an.left,an.top]};var wu;(function(e){e.mind="mind"})(wu||(wu={}));const mW=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],vW=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],yW=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],wW=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],xW=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],CW=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],L6={...$4,branchColors:mW,rootFill:"#f5f5f5",rootTextColor:gr},EW={...V4,branchColors:vW,rootFill:gr,rootTextColor:"#FFFFFF"},SW={...W4,branchColors:yW,rootFill:"#FFFFFF",rootTextColor:gr},TW={...X4,branchColors:wW,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},AW={...q4,branchColors:xW,rootFill:"#FFFFFF",rootTextColor:gr},DW={...Y4,branchColors:CW,rootFill:"#FFFFFF",rootTextColor:gr},_6=[L6,EW,SW,TW,AW,DW],bW={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},eC="plait-mind-plugin-key",cr=4,Eg="#6698FF",Ib="#AAAAAA",NS=2,Hb=8,rw=10,Fh=2,zi=20,am=10,BW=Mm("#000000",.2),PW="#6698FF",Nb="white",MW=240;var Fg;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(Fg||(Fg={}));function GS(e,n){const i=e.getPluginOptions(eC),r=n.data.emojis.length;return{width:F6(n)*r+r*2*i.emojiPadding+(r-1)*i.spaceBetweenEmojis,height:n.height}}function F6(e){return He.isMind(e)?20:16}const od=(e,n,i)=>n[i],kg={branch:{color:Ib,width:2},shape:{strokeColor:Ib,strokeWidth:2}},nC={shape:{rectangleRadius:4,strokeWidth:2,fill:"none"}},RW=e=>{const n=e.rightNodeCount,i=e.children;let r=[],o=[];for(let a=0;a<i.length;a++){const l=i[a];if(Te.isAbstract(l)&&l.end<n){r.push(l);continue}if(Te.isAbstract(l)&&l.start>=n){o.push(l);continue}a<n?r.push(l):o.push(l)}return{leftChildren:o,rightChildren:r}},Tv=e=>{const n=Ut.findParent(e);if(!n)return;const i=n.children.indexOf(e);return n.children.find(r=>Te.isAbstract(r)&&i>=r.start&&i<=r.end)},k6=e=>{const n=Ut.findParent(e);if(!n)return[];const i=n.children.indexOf(e);return n.children.filter(r=>Te.isAbstract(r)&&r.start>i)},I6=(e,n)=>{const i=[];return n.filter(r=>!Te.isAbstract(r)&&!He.isMind(r)).forEach(r=>{const o=Tv(r);if(o&&n.indexOf(o)===-1&&i.indexOf(o)===-1){const{start:a,end:l}=o;Ut.getParent(r).children.slice(a,l+1).every(d=>n.indexOf(d)>-1)&&i.push(o)}}),i},H6=(e,n)=>{const i=[];return n.filter(r=>!Te.isAbstract(r)&&!He.isMind(r)).forEach(r=>{const o=Tv(r);if(o&&n.indexOf(o)>0){const a=i.findIndex(l=>l.abstract===o);a===-1?i.push({abstract:o,references:[r]}):i[a].references.push(r)}}),i};function N6(e,n){const i=n.indexOf(e.references[0]),r=n.indexOf(e.references[e.references.length-1]);return{start:i,end:r}}const G6=(e,n,i=1,r=!0,o=new Map)=>{const a=Je.parent(e,n),l=n[n.length-1]!==0;let c;if(!l)c=a.children.filter(m=>Te.isAbstract(m));else{const m=Je.get(e,Se.previous(n));c=k6(m)}if(c.length&&c.forEach(m=>{let w=o.get(m);w||(w={start:0,end:0},o.set(m,w)),w.start=w.start+i,w.end=w.end+i}),!l)return o;const h=Je.get(e,Se.previous(n)),d=Tv(h),p=!r&&d&&d.end===n[n.length-1]-1;if(d&&!p){let m=o.get(d);m||(m={start:0,end:0},o.set(d,m)),m.end=m.end+i}return o},z6=(e,n,i=new Map)=>(n.forEach(r=>{if(!He.isMind(r)){const o=k6(r).filter(l=>!n.includes(l));o.length&&o.forEach(l=>{let c=i.get(l);c||(c={start:0,end:0},i.set(l,c)),c.start=c.start-1,c.end=c.end-1});const a=Tv(r);if(a&&!n.includes(a)){let l=i.get(a);l||(l={start:0,end:0},i.set(a,l)),l.end=l.end-1}}}),i),j6=(e,n)=>!!Ut.getAncestors(e,n).find(r=>Te.isAbstract(r)),TA=(e,n)=>Te.isAbstract(n)||j6(e,n)?$6(e,n):od(e,n,"branchColor")||od(e,n,"strokeColor")||V6(e,n),AA=(e,n)=>od(e,n,"branchShape")||sd.bight,U6=(e,n)=>od(e,n,"branchWidth")||od(e,n,"strokeWidth")||NS,OW=(e,n)=>td(n.branchWidth)?kg.branch.width:n.branchWidth,$6=(e,n)=>n.branchColor||n.strokeColor?n.branchColor||n.strokeColor:kg.branch.color,V6=(e,n)=>{const i=G.findPath(e,n);return LW(e,i[1])},LW=(e,n)=>{const i=DA(e),r=i.branchColors.length,o=n%r;return i.branchColors[o]},DA=e=>{const i=G.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return i&&bW.isMindThemeColor(i)?i:L6},bA=(e,n)=>{if(He.isMind(n)){const i=DA(e).rootFill;return n.strokeColor||i}return Te.isAbstract(n)||j6(e,n)?n.strokeColor||kg.shape.strokeColor:od(e,n,"strokeColor")||V6(e,n)},iC=(e,n)=>n.strokeStyle||Co.solid,Av=(e,n)=>n.strokeWidth||(Te.isAbstract(n)?kg.shape.strokeWidth:nC.shape.strokeWidth),W6=(e,n)=>{if(n.fill)return n.fill;const i=DA(e).rootFill;return He.isMind(n)?i:nC.shape.fill},tv=(e,n)=>od(e,n,"shape")||Ru.roundRectangle;function BA(e){const n=mv(e);n==null||n.edit(()=>{},i=>{const r=i;return r.key==="Enter"&&!r.shiftKey})}const g3=(e,n)=>(n!=null&&n.length?n:ne(e)).filter(r=>Ut.isMindElement(e,r)),Gb=e=>{const n=[];return e.forEach(i=>{dx[i].forEach(o=>{!n.includes(o)&&!n.includes(PA(o))&&n.push(o)})}),n},_W=(e,n)=>{const i=dx[e],r=dx[n];if(!r)throw new Error(`unexpected layout: ${n} on correct layout`);return r.find(o=>i.includes(PA(o)))},FW=(e,n)=>{const i=n===an.left||n===an.right;let r=ie.standard;switch(e){case ie.left:r=ie.right;break;case ie.right:r=ie.left;break;case ie.downward:r=ie.upward;break;case ie.upward:r=ie.downward;break;case ie.rightBottomIndented:r=i?ie.leftBottomIndented:ie.rightTopIndented;break;case ie.leftBottomIndented:r=i?ie.rightBottomIndented:ie.leftTopIndented;break;case ie.rightTopIndented:r=i?ie.leftTopIndented:ie.rightBottomIndented;break;case ie.leftTopIndented:r=i?ie.rightTopIndented:ie.leftBottomIndented;break}return r},X6=()=>ie.standard,zb=e=>{const n=[],i=e.map(PA);for(const r in ie){const o=ie[r],a=dx[o];if(a){const l=a.some(h=>e.includes(h)),c=a.some(h=>i.includes(h));l&&!c&&n.push(o)}}return n},PA=e=>{let n=an.right;switch(e){case an.top:n=an.bottom;break;case an.bottom:n=an.top;break;case an.right:n=an.left;break;case an.left:n=an.right;break}return n},uf=e=>e.layout||X6(),kW=e=>{function n(r,o){return He.isMind(r)?cr*12:(o&&o.isRoot(),cr*3)}function i(r,o){return He.isMind(r)?cr*12:cr*8.5}return{getHeight(r){return zn.getNodeHeight(e,r)},getWidth(r){return zn.getNodeWidth(e,r)},getHorizontalGap(r,o){const a=o&&o.layout||uf(r),l=Xr(a);return Ml(a)?cr*6:l?i(r):n(r,o)},getVerticalGap(r,o){const a=o&&o.layout||uf(r);return Ml(a)?cr*3.5:Xr(a)?n(r,o):i(r)},getVerticalConnectingPosition(r,o){if(r.shape===Ru.underline&&o&&Km(o.layout))return kS.bottom},getExtendHeight(r){return 0},getIndentedCrossLevelGap(){return cr*1}}},IW="",HW="",NW=e=>zx(e,Fg.mindCentralText,IW),GW=e=>zx(e,Fg.abstractNodeText,HW),jb=(e,n)=>{const i=NW(e),r=rC(i,{layout:ie.right});r.type="mind";const o=zn.getNodeWidth(e,r),a=zn.getNodeHeight(e,r);return r.points=[[n[0]-o/2,n[1]-a/2]],r},rC=(e,n)=>{const i={id:Mn(),type:"mind_child",data:{topic:gd(e)},children:[]};let r;for(r in n)td(n[r])||(i[r]=n[r]);return i},zW=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],jW=14,UW=18,$W=34,q6=e=>e.children.reduce((i,r)=>i+q6(r),0)+e.children.length,Y6=(e,n)=>{let i=Ut.findParent(n);for(;i;){if(i===e)return!0;i=Ut.findParent(i)}return!1},Tm=e=>{let n=[];return e.forEach(i=>{e.some(o=>Y6(o,i))||n.push(i)}),n},Ub=(e,n)=>e.y>n.y,K6=e=>{const n={...e};n.id=Mn(),n.children=[];for(const i of e.children)n.children.push(K6(i));return n},gx=(e,n,i)=>{const r={};He.isMind(n)||(zW.forEach(a=>{r[a]=n[a]}),delete r.layout);const o=rC("",r);Qt.insertNode(e,o,i),zg(e),cd(e,o),setTimeout(()=>{BA(o)})},VW=e=>{const n=[],i=[];for(let r=0;r<e.length;r++){const o=Ut.getParent(e[r]),a=i.indexOf(o);a===-1?(i.push(o),n.push([e[r]])):n[a].push(e[r])}return{parentElements:i,abstractIncludedGroups:n}},zS=e=>{if(He.isMind(e))return UW;if(Ut.isMindElement(null,e))return jW;throw new Error("can not find default font-size")},WW="#6698FF80",Gc=3.5,$b=10,ow=8,ev={horizontal:{nodeAndText:cr*2.5,emojiAndText:cr*1.5},vertical:{nodeAndText:cr,nodeAndImage:cr,imageAndText:cr*1.5}},MA={horizontal:{nodeAndText:cr*4,emojiAndText:cr*2},vertical:{nodeAndText:cr*2}},p3=(e,n)=>{const r=He.isMind(n)?MA.horizontal.nodeAndText:ev.horizontal.nodeAndText,o=Av(e,n);return r+o},m3=(e,n)=>{const i=He.isMind(n),r=Av(e,n);return(i?MA.vertical.nodeAndText:ev.vertical.nodeAndText)+r},Vb=e=>He.isMind(e)?MA.horizontal.emojiAndText:ev.horizontal.emojiAndText,zn={getNodeWidth(e,n){const i=p3(e,n);return Ut.hasEmojis(n)?zn.getEmojiLeftSpace(e,n)+GS(e,n).width+Vb(n)+zn.getTopicDynamicWidth(e,n)+i:i+zn.getTopicDynamicWidth(e,n)+i},getNodeHeight(e,n){const i=Tw(e,n.data.topic,{fontSize:Um,fontFamily:xg},zn.getTopicMaxDynamicWidth(e,n)),r=Aw(e,n,i.width,i.height),o=m3(e,n);return Ut.hasImage(n)?zn.getTextTopSpace(e,n)+r.height+o:o+r.height+o},getTopicDynamicWidth(e,n){var l;const i=Tw(e,n.data.topic,{fontSize:zS(n),fontFamily:xg},zn.getTopicMaxDynamicWidth(e,n)),r=Aw(e,n,i.width,i.width),o=n.manualWidth||r.width,a=Ut.hasImage(n)?(l=n.data.image)==null?void 0:l.width:0;return Math.max(o,a)},getTopicHeight(e,n){const i=Tw(e,n.data.topic,{fontSize:Um,fontFamily:xg},zn.getTopicMaxDynamicWidth(e,n));return Aw(e,n,i.width,i.height).height},getTopicMaxDynamicWidth(e,n){var r,o;const i=zS(n);return n.manualWidth?Math.max(n.manualWidth,Ut.hasImage(n)?(r=n.data.image)==null?void 0:r.width:0):Math.max(i*$W,Ut.hasImage(n)?(o=n.data.image)==null?void 0:o.width:0)},getNodeResizableMinWidth(e,n){const i=zn.getNodeTopicMinWidth(e,n);return Ut.hasImage(n)&&n.data.image.width>i?n.data.image.width:i},getNodeTopicMinWidth(e,n){return XW(e,n)},getTextLeftSpace(e,n){const i=p3(e,n);return Ut.hasEmojis(n)?zn.getEmojiLeftSpace(e,n)+GS(e,n).width+Vb(n):i},getTextTopSpace(e,n){const i=m3(e,n);return Ut.hasImage(n)?zn.getImageTopSpace(e,n)+n.data.image.height+ev.vertical.imageAndText:i},getImageTopSpace(e,n){return Av(e,n)+ev.vertical.nodeAndImage},getEmojiLeftSpace(e,n){const i=e.getPluginOptions(eC);return p3(e,n)-i.emojiPadding},getEmojiTopSpace(e,n){return m3(e,n)}},XW=(e,n)=>{const i=zS(n);return Eu.getMarksByElement(n.data.topic)[Wr.fontSize]||i},Aw=(e,n,i,r)=>{const o=zn.getNodeTopicMinWidth(e,n);return{width:i<o?o:i,height:r}};function Ci(e){const n=e.x+e.hGap;let i=e.y+e.vGap;const r=e.width-e.hGap*2,o=e.height-e.vGap*2;return{x:n,y:i,width:r,height:o}}function qW(e,n){const i=zn.getNodeWidth(e,n),r=zn.getNodeHeight(e,n);return{x:n.points[0][0],y:n.points[0][1],width:i,height:r}}function Z6(e,n,i){const r=Jm.get(i);return!!(r&&fv(n[0],n[1],Ci(r))===0)}function Q6(e,n){let{x:i,y:r}=Ci(Ut.getNode(n));i=i+zn.getEmojiLeftSpace(e,n);const{width:o}=GS(e,n);return{x:i,y:r,width:o,height:zn.getNodeHeight(e,n)}}function J6(e,n){let i=Ci(n);return tM(e,i,n.origin)}function tM(e,n,i){const r=n.x+zn.getTextLeftSpace(e,i),o=n.y+zn.getTextTopSpace(e,i),a=zn.getTopicDynamicWidth(e,i);return{height:zn.getTopicHeight(e,i),width:a,x:r,y:o}}function oC(e,n){let{x:i,y:r}=Ci(Ut.getNode(n));const o=n.manualWidth||n.width;i=o>n.data.image.width?i+zn.getTextLeftSpace(e,n)+(o-n.data.image.width)/2:i+zn.getTextLeftSpace(e,n),r=zn.getImageTopSpace(e,n)+r;const{width:a,height:l}=n.data.image;return{x:i,y:r,width:a,height:l}}const eM=(e,n,i)=>{const r=oC(e,n),o=H.getOutlineRectangle(r,-9/2);return H.isPointInRectangle(o,i)},YW=(e,n,i)=>{const r=oC(e,n);return WB(r,Ba).find(l=>H.isHit(H.getRectangleByPoints([i,i]),l.rectangle))},KW=(e,n)=>{const i={...n};return delete i.rightNodeCount,i.type="mind_child",i.layout===ie.standard&&delete i.layout,i},jS=e=>{const n={...e};return delete n.start,delete n.end,n},ZW=(e,n)=>{const i={...n};return te.string(i.data.topic)||(i.data.topic={children:[{text:""}]}),i==null||delete i.strokeColor,i==null||delete i.fill,i==null||delete i.shape,i==null||delete i.strokeWidth,i==null||delete i.isCollapsed,{...i,layout:i.layout??ie.right,type:"mind"}},QW=(e,n)=>{iP(e,n),gn.getElementRef(n).getGenerator(Bu.key).setFocus(n,!0)},Dw=(e,n)=>{XG(e),gn.getElementRef(n).getGenerator(Bu.key).setFocus(n,!1)},nM=e=>{gn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{nM(n)})},iM=e=>{gn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{iM(n)})},Wb=(e,n)=>{Lu(e,n),n?G.getBoardContainer(e).classList.add("mind-node-dragging"):G.getBoardContainer(e).classList.remove("mind-node-dragging")},JW=(e,n,i)=>{let r=wf(e);if(He.isMind(e)&&Qo(uf(e))){const l=rM(e,n);l&&(r=r.slice(0,e.rightNodeCount)),l||(r=r.slice(e.rightNodeCount,r.length),i=[...i,i[i.length-1]-e.rightNodeCount])}let o=i[i.length-1]!==0,a=i[i.length-1]!==((r==null?void 0:r.length)||0);return e.isCollapsed&&(a=!1,o=!1),{hasPreviousNode:o,hasNextNode:a}},rM=(e,n)=>{const i=n.target;return He.isMind(e)&&Qo(uf(e))&&e.children.indexOf(i)!==-1&&e.children.indexOf(i)<e.rightNodeCount||He.isMind(i)&&Qo(uf(i))&&n.detectResult==="right"},tX=(e,n,i)=>{if(!He.isMind(n.origin)&&!Te.isAbstract(n.origin)){const r=Ks.getCorrectLayoutByElement(e,n==null?void 0:n.parent.origin);if(Qo(r)){const a=n.parent.children.findIndex(l=>l===n)>=(n.parent.origin.rightNodeCount||0);return wl(i,[a?"right":"left"])}if(Zm(r))return wl(i,["right"]);if(fx(r))return wl(i,["left"]);if(r===ie.upward)return wl(i,["bottom"]);if(r===ie.downward)return wl(i,["top"])}else{const r=Ks.getCorrectLayoutByElement(e,n==null?void 0:n.origin);if(Qo(r))return wl(i,["top","bottom"]);if(r===ie.upward)return wl(i,["left","right","bottom"]);if(r===ie.downward)return wl(i,["left","right","top"]);if(Zm(r))return wl(i,["right","top","bottom"]);if(fx(r))return wl(i,["left","top","bottom"])}return null},wl=(e,n)=>{const i=e;return n.forEach(r=>{const o=i.findIndex(a=>a===r);o!==-1&&i.splice(o,1)}),i.length?i:null},eX=(e,n,i,r)=>{let o=null;return Ar(e,a=>{if(!Ut.isMindElement(e,a)||o)return;const l=Ut.getNode(a),c=nX(l,n);c&&(o=tX(e,l,c)),i=null;const h=r.every(d=>iX(d,l.origin));o&&h&&(i={target:l.origin,detectResult:o[0]})},ud(e)),i},nX=(e,n)=>{const{x:i,y:r,width:o,height:a}=Ci(e),l=r+a/2,c=i+o/2,h=e.y,d=e.y+e.height,p=e.x,m=e.x+e.width,w=[];return n[1]>r&&n[1]<r+a?(n[0]>p&&n[0]<c&&w.push("left"),n[0]>c&&n[0]<m&&w.push("right"),(n[0]>i&&n[0]<c||n[0]>c&&n[0]<i+o)&&(n[1]<l?w.push("top"):w.push("bottom")),w.length?w:null):n[0]>i&&n[0]<i+o?(n[1]>h&&n[1]<l&&w.push("top"),n[1]>l&&n[1]<d&&w.push("bottom"),(n[1]>r&&n[1]<r+a||n[1]>l&&n[1]<r+a)&&(n[0]<c?w.push("left"):w.push("right")),w.length?w:null):null},iX=(e,n)=>e!==n&&!Y6(e,n),rX=(e,n)=>{let i=G.findPath(e,n==null?void 0:n.target);const r=He.isMind(n==null?void 0:n.target)?uf(n==null?void 0:n.target):Ks.getCorrectLayoutByElement(e,Ut.getParent(n==null?void 0:n.target)),o=wf(n.target);return FS(r)&&((n.detectResult==="top"||n.detectResult==="bottom")&&i.push(o.length),n.detectResult==="right"&&(i=Se.next(i))),Km(r)&&(n.detectResult==="right"&&(He.isMind(n==null?void 0:n.target)&&Qo(r)?i.push(n==null?void 0:n.target.rightNodeCount):i.push(o.length)),n.detectResult==="left"&&i.push(o.length),n.detectResult==="bottom"&&(i=Se.next(i))),Ml(r)&&(Kc(r)&&n.detectResult==="top"&&(i=Se.next(i)),nW(r)&&n.detectResult==="bottom"&&(i=Se.next(i)),Zm(r)&&n.detectResult==="left"&&i.push(o.length),fx(r)&&n.detectResult==="right"&&i.push(o.length)),i};function oX(e,n){const i=Ci(n);return RA(e,i,n.origin)}function RA(e,n,i){const r=W6(e,i),o=bA(e,i),a=Av(e,i),l=iC(e,i),c=pf(l,a),h=H.inflate(n,-a);return jg(G.getRoughSVG(e),h.x,h.y,h.x+h.width,h.y+h.height,{stroke:o,strokeWidth:a,fill:r,fillStyle:"solid",strokeLineDash:c},!1,nC.shape.rectangleRadius)}var Xn;(function(e){e.left="left",e.center="center",e.right="right"})(Xn||(Xn={}));var _n;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(_n||(_n={}));const Vo=(e,n)=>{let i=e.x,r=e.y;return n[0]===Xn.center&&(i=e.x+e.width/2),n[0]===Xn.right&&(i=e.x+e.width),n[1]===_n.middle&&(r=e.y+e.height/2),n[1]===_n.bottom&&(r=e.y+e.height),[i,r]},Zc=(e,n)=>n?e.left?an.left:an.right:e.up?an.top:an.bottom,Cs=(e,n)=>{if(n===an.left&&(e[0]===Xn.right?e[0]=Xn.left:e[0]===Xn.left&&(e[0]=Xn.right)),n===an.bottom||n===an.top){let i=Xn.center,r=_n.middle;e[1]===_n.top&&(i=Xn.left),e[1]===_n.bottom&&(i=Xn.right),e[0]===Xn.left&&(r=_n.top),e[0]===Xn.right&&(r=_n.bottom),e[0]=i,e[1]=r}n===an.top&&(e[1]===_n.bottom?e[1]=_n.top:e[1]===_n.top&&(e[1]=_n.bottom))};function sX(e,n,i,r=!0,o=null,a,l){const c=AA(e,n.origin),h=a||U6(e,i.origin),d=o||TA(e,i.origin),p=iC(e,i.origin),m=tv(e,i.origin)===Ru.underline;let w,x,T,D,b=n,B=i;const A=Ci(b),I=Ci(B);w=b.x+b.width/2,x=Ub(n,i)?A.y:A.y+A.height,T=n.left?B.x+B.hGap+I.width:B.x+B.hGap,D=m?B.y+B.height-B.vGap:B.y+B.height/2;let R=Ub(n,i)?n.left?[-1,-1]:[1,-1]:n.left?[-1,1]:[1,1],k=[[w,x],[w,x],[w,x],[w,D-B.hGap*3*R[1]/5],[w,D-B.hGap*R[1]/5],[w+B.hGap*R[0]/4,D],[w+B.hGap*R[0]*3/5,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D]];const W=pf(p,h);if(c===sd.polyline){const nt=[[w,x],[w,D],[T,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D]];return Ys(nt,{stroke:d,strokeWidth:h,strokeLineDash:W})}const U=Zo(k,.001);return XO(U,{stroke:d,strokeWidth:h})}function aX(e,n,i,r,o=null,a,l){const c=AA(e,n.origin),h=o||TA(e,i.origin),d=a||U6(e,i.origin),p=iC(e,i.origin),m=c===sd.polyline?!0:!He.isMind(n.origin),w=tv(e,n.origin),T=tv(e,i.origin)===Ru.underline,D=w===Ru.underline,b=Ci(i),B=Ci(n),A=Zc(i,r),I=[Xn.right,_n.middle],R=[Xn.left,_n.middle];Cs(I,A),Cs(R,A),r&&D&&!He.isMind(n.origin)&&(I[1]=_n.bottom),r&&T&&(R[1]=_n.bottom);let k=Vo(B,I),W=Vo(b,R);const nt=m?si(k,8,A):k;let st=m?[k,nt,nt]:[];const ft=(n.hGap+i.hGap)/3,Et=-(n.hGap+i.hGap)/2.4;let ct=[nt,si(nt,ft,A),si(W,Et,A),W];const mt=si(W,b.width,A),wt=T&&r?[mt,mt,mt]:[],V=Zo([...st,...ct,...wt]),P=pf(p,d);let _;if(c===sd.polyline){const $=si(nt,8,A),Q=[...st,$,r?[$[0],W[1]]:[W[0],$[1]],W,...wt];_=Ys(Q,{stroke:h,strokeWidth:d,strokeLineDash:P})}else _=G.getRoughSVG(e).curve(V,{stroke:h,strokeWidth:d,strokeLineDash:P});return p===Co.dotted&&Ze(_,"round"),_}function oM(e,n,i,r,o,a,l,c){return Ut.isIndentedLayout(e,n.origin)?sX(e,n,i,o,a,l):aX(e,n,i,r,a,l)}const lX="foreign-object-emoji";class uX{constructor(n){this.board=n,this.emojiComponentRef=null}draw(n,i,r){this.destroy();const o={board:this.board,emojiItem:i,element:r,fontSize:F6(r)};this.emojiComponentRef=this.board.renderEmoji(n,o)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const tD=class tD{constructor(n){this.board=n,this.emojiGenerators=[]}drawEmojis(n){if(this.destroy(),Ut.hasEmojis(n)){this.g=ze(),this.g.classList.add("emojis");const i=Q6(this.board,n),r=pT(i.x,i.y,i.width,i.height);r.classList.add(lX),this.g.append(r);const o=document.createElement("div");return o.classList.add("node-emojis-container"),r.append(o),this.emojiGenerators=n.data.emojis.map(a=>{const l=new uX(this.board);return l.draw(o,a,n),l}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(n=>n.destroy()),this.emojiGenerators=[]}};tD.key="node-emojis-generator";let nv=tD;const cX=(e,n,i,r)=>{const o=gn.getElementRef(n),a=Ut.getNode(n),l=ze();l.classList.add("dragging","fake-node","plait-board-attached");const c={...a,x:a.x+i,y:a.y+r},h=J6(e,a),d=oX(e,c),p=mv(n).g.cloneNode(!0);if(pm(p,h.width,h.height,h.x+i,h.y+r),l==null||l.append(d),l==null||l.append(p),Ut.hasEmojis(n)){const w=o.getGenerator(nv.key).g.cloneNode(!0),x=Q6(e,n);pm(w,x.width,x.height,x.x+i,x.y+r),l==null||l.append(w)}if(Ut.hasImage(n)){const w=o.getGenerator(Bu.key).g.cloneNode(!0),x=oC(e,n);pm(w,x.width,x.height,x.x+i,x.y+r),l==null||l.append(w)}return l},fX=(e,n,i)=>{const r=n.target,o=ze(),a=Je.get(e,Se.parent(i)),l=Ks.getCorrectLayoutByElement(e,a),c=Xr(l),{hasNextNode:h,hasPreviousNode:d}=JW(a,n,i),p=30,m=12;let w,x,T,D;if(!d&&!h){const nt=Ut.getNode(a),st=Ci(nt);D=Zc(nt,c),T=nt,He.isMind(r)&&Qo(l)&&(n.detectResult==="left"?(D=an.left,T.left=!0):(D=an.right,T.left=!1));const ft=[Xn.right,_n.middle];Cs(ft,D);const Et=Vo(st,ft);if(Ml(l)){const ct=[Xn.center,Kc(l)?_n.top:_n.bottom],mt=Vo(st,ct);x=si(mt,m,D),x[1]=Kc(l)?x[1]-m:x[1]+m}else x=si(Et,p,D)}else if(!d&&h){const nt=Je.get(e,i);T=Ut.getNode(nt);const st=Ci(T);D=Zc(T,c);const ft=[Xn.left,_n.top];Cs(ft,D);let Et=-12;Ut.isIndentedLayout(e,a)&&(Et=Kc(l)?Et/2+T.height-T.vGap:0),x=Vo(st,ft),x=qc(x,Et,D)}else if(d&&!h){const nt=Je.get(e,Se.previous(i));T=Ut.getNode(nt);const st=Ci(T);D=Zc(T,c);const ft=[Xn.left,_n.bottom];Cs(ft,D);let Et=m;Ut.isIndentedLayout(e,a)&&(Et=Kc(l)?-Et-(T.height-T.vGap):Et),x=Vo(st,ft),x=qc(x,Et,D)}else{const nt=Je.get(e,Se.previous(i));T=Ut.getNode(nt);const st=Ci(T),ft=Je.get(e,i),Et=Ut.getNode(ft),ct=Ci(Et),mt=[Xn.left,_n.bottom],wt=[Xn.left,_n.top];D=Zc(T,c),Cs(mt,D),Cs(wt,D);const V=Vo(st,mt),P=Vo(ct,wt);x=[(V[0]+P[0])/2,(V[1]+P[1])/2]}let b=x,B=x;const A=c?m:p,I=c?p:m;b=qc(b,-A/2,D),B=qc(B,A/2,D),B=si(B,I,D);const R=Math.min(b[0],B[0]),k=Math.min(b[1],B[1]);w={...T,x:R,y:k,width:p,height:m,hGap:Ut.isIndentedLayout(e,a)?cr*4+(T.origin.strokeWidth||NS):0,vGap:Ut.isIndentedLayout(e,a)?cr:0};const W=jg(G.getRoughSVG(e),w.x,w.y,w.x+p,w.y+m,{stroke:Eg,strokeWidth:2,fill:Eg,fillStyle:"solid"}),U=oM(e,Ut.getNode(a),w,c,!1,Eg,NS);return o==null||o.appendChild(U),o==null||o.appendChild(W),o};var Sr;(function(e){e.start="start",e.end="end"})(Sr||(Sr={}));var Am;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(Am||(Am={}));function Xb(e,n,i,r,o){const a=ze(),l=Ut.getParent(i),c=Ks.getCorrectLayoutByElement(e,i),h=Xr(c),d=l.children.slice(i.start,i.end+1),p=pn(e,d,!0),m=qr(e,p);let w=H.getOutlineRectangle(m,-3.5);o&&(w=hm(w,o,r,h));const x=dX(n,w.x,w.y,w.x+w.width,w.y+w.height,h,{stroke:Eg,strokeWidth:1,fillStyle:"solid"}),T=[Xn.center,_n.top],D=[Xn.center,_n.bottom],b=Zc(Ut.getNode(i),h);Cs(T,b),Cs(D,b);let B=Vo(w,T),A=Vo(w,D);const I=si(B,-10/2,b),R=si(B,$b/2,b),k=si(A,-10/2,b),W=si(A,$b/2,b),U=n.line(I[0],I[1],R[0],R[1],qb(r===Sr.start)),nt=n.line(k[0],k[1],W[0],W[1],qb(r===Sr.end));return hX(e,r,h),Ze(U,"round"),Ze(nt,"round"),a.append(U),a.append(nt),a.append(x),a}function qb(e){return e?{stroke:Eg,strokeWidth:4,fillStyle:"solid"}:{stroke:WW,strokeWidth:3,fillStyle:"solid"}}function hX(e,n,i){n?i?G.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):G.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(G.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),G.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function dX(e,n,i,r,o,a,l){const c=Math.abs(n-r),h=Math.abs(i-o),d=5,w=10+4*2;if(a){const x=(c-w-d*2)/2,T=h-d*2;return e.path(`M${n+d},${i}
            l${x},0
            m${w},0
            l${x},0
            a${d},${d},0,0,1,${d},${d}
            l0,${T}
            a${d},${d},0,0,1,-${d},${d}
            l-${x},0
            m-${w},0
            l-${x},0
            a${d},${d},0,0,1,-${d},-${d}
            l0,-${T}
            a${d},${d},0,0,1,${d},-${d}`,l)}else{const x=(h-w-d*2)/2,T=c-d*2;return e.path(`M${n+d},${i}
            l${T},0
            a${d},${d},0,0,1,${d},${d}
            l0,${x}
            m0,${w}
            l0,${x}
            a${d},${d},0,0,1,-${d},${d}
            l-${T},0
            a${d},${d},0,0,1,-${d},-${d}
            l0,-${x}
            m0,-${w}
            l0,-${x}
            a${d},${d},0,0,1,${d},-${d}`,l)}}const eD=class eD extends Bs{canDraw(n,i){return!!i.selected}draw(n,i){const r=ze(),o=Ut.getNode(n),a=Ci(o),l=qr(this.board,a),c=Av(this.board,n),h=Fi,d=H.inflate(l,h),p=jg(G.getRoughSVG(this.board),d.x,d.y,d.x+d.width,d.y+d.height,{stroke:Eg,strokeWidth:h,fill:""},!0,nC.shape.rectangleRadius+(h+c)/2);return Te.isAbstract(n)&&(this.abstractOutlineG=Xb(this.board,G.getRoughSVG(this.board),n),r.append(this.abstractOutlineG),p.classList.add("abstract-element")),r.appendChild(p),r.classList.add(cv),r}updateAbstractOutline(n,i,r){const o=Xb(this.board,G.getRoughSVG(this.board),n,i,r);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(o),this.abstractOutlineG=o)}};eD.key="mind-node-active";let cf=eD;const hm=(e,n,i,r)=>r?i===Sr.start?{...e,y:n,height:e.height+e.y-n}:{...e,height:n-e.y}:i===Sr.start?{...e,x:n,width:e.width+e.x-n}:{...e,width:n-e.x},gX=(e,n,i,r,o,a)=>{const l=Ut.getNode(r),{start:c,end:h}=tf(l.origin,o),d=i[c],p=i[h];if(n===Sr.start){const m=i.filter(D=>Te.isAbstract(D)&&D.end<r.start);let w;if(m.length){const D=m.map(b=>{const{end:B}=tf(b,o);return B}).sort((b,B)=>B-b)[0];w=i[D+1]}else w=i[0];const x=pn(e,[w],!0),T=pn(e,[p],!1);return a?{max:T.y-Gc,min:x.y-Gc}:{max:T.x-Gc,min:x.x-Gc}}else{const m=i.filter(D=>Te.isAbstract(D)&&D.start>r.end);let w;if(m.length){const D=m.map(b=>{const{start:B}=tf(b,o);return B}).sort((b,B)=>b-B)[0];w=i[D-1]}else{const D=i.filter(b=>!Te.isAbstract(b));w=i[D.length-1]}const x=pn(e,[w],!0),T=pn(e,[d],!1);return a?{max:x.y+x.height+Gc,min:T.y+T.height+Gc}:{max:x.x+x.width+Gc,min:T.x+T.width+Gc}}},sM=(e,n,i)=>{const r=Ks.getCorrectLayoutByElement(e,n),o=Xr(r),l=Ut.getParent(n).children.slice(n.start,n.end+1);let c=pn(e,l,!0);c=H.getOutlineRectangle(c,-3.5);const h=Yb(c,o,Sr.start),d=Yb(c,o,Sr.end),p=H.getRectangleByPoints([i,i]);if(H.isHit(p,h))return Sr.start;if(H.isHit(p,d))return Sr.end},Yb=(e,n,i)=>{let r;if(i===Sr.start){const o=n?e.y:e.x;r=hm(e,o+ow/2,Sr.end,n),r=hm(r,o-ow/2,i,n)}else{const o=n?e.y+e.height:e.x+e.width;r=hm(e,o-ow/2,Sr.start,n),r=hm(r,o+ow/2,i,n)}return r};function pX(e,n,i,r){const o=n.filter(p=>!Te.isAbstract(p)),a=o.map(p=>pn(e,[p],!1)),l=pn(e,[o[0]],!0),c={x:l.x-l.width,y:l.y-l.height,width:l.width,height:l.height},h=pn(e,[o[o.length-1]],!0),d={x:h.x+h.width,y:h.y+h.height,width:h.width,height:h.height};a.push(d),a.unshift(c);for(let p=0;p<a.length-1;p++){const m=r?a[p].y:a[p].x,w=r?a[p].height:a[p].width;if(i>=m+w/2&&i<=a[p+1][r?"y":"x"]+a[p+1][r?"height":"width"]/2)return p-1}return 0}function mX(e,n,i){let r;const o=ne(e).filter(a=>Te.isAbstract(a)).find(a=>(r=sM(e,a,i),r));return n===o||(n&&(gn.getElementRef(n).getGenerator(cf.key).updateAbstractOutline(n),n=void 0),o&&(n=o,gn.getElementRef(n).getGenerator(cf.key).updateAbstractOutline(n,r))),n}const aM=e=>{const n=Ut.findParent(e);if(n){const i=n.children.findIndex(r=>r.id===e.id);if(He.isMind(n)&&uf(n)===ie.standard&&n.rightNodeCount&&i<=n.rightNodeCount-1)return!0}return!1},OA=(e,n,i,r=[])=>{let o=r.findIndex(l=>Se.equals(l.path,n));const a=Je.get(e,n);return o===-1?r.push({path:n,rightNodeCount:a.rightNodeCount+i}):r[o].rightNodeCount+=i,r},lM=(e,n,i=[])=>(n.forEach(r=>{if(aM(r)){const o=Ut.getParent(r),a=G.findPath(e,o);let l=i.findIndex(c=>Se.equals(c.path,a));l===-1?i.push({path:a,rightNodeCount:o.rightNodeCount-1}):i[l].rightNodeCount-=1}}),i);function LA(e,n){const i=wf(n);return G.findPath(e,n).concat(i.length)}function vX(e,n,i){return G.findPath(e,n).concat(i?i-1:0)}function yX(e,n){const i=G.findPath(e,n);return ut.next(i)}const _A=(e,n)=>{const i=Ut.getAncestors(e,n);i.unshift(n);const r=i[i.length-1];let o=uf(r);if(He.isMind(n))return o;const a=Ut.getNode(n);let l=o;o===ie.standard&&(l=a.left?ie.left:ie.right);let c=null;const h=i.find(d=>d.layout||Te.isAbstract(d));if(h)if(Te.isAbstract(h)){const d=Ut.getParent(h),p=_A(e,d);c=T6(p)}else c=h==null?void 0:h.layout;if(c===ie.standard||!c)return l;{const d=_W(l,c);return d?FW(c,d):c}},uM=(e,n)=>{const i=[];n.layout&&i.unshift(_A(e,n));let r=Ut.findParent(n);for(;r;)r.layout&&i.unshift(r.layout),r=Ut.findParent(r);return i},wX=(e,n)=>{const i=Ut.findParent(n);if(i){const r=uM(e,i);if(r[0]===ie.standard){const d=Ut.getNode(n);r[0]=d.left?ie.left:ie.right}const o=Gb(r);let a=zb(o);const l=[r[r.length-1]],c=Gb(l),h=zb(c);return a=a.filter(d=>h.some(p=>p===d)),a}},Ks={getAvailableSubLayoutsByElement:wX,getBranchLayouts:uM,getCorrectLayoutByElement:_A},xX="mindmap",He={isMind:e=>e.type==="mind"||e.type===xX},Ut={isIndentedLayout(e,n){const i=Ks.getCorrectLayoutByElement(e,n);return Ml(i)},isMindElement(e,n){return!!(n.data&&n.data.topic||n.type==="mind_child")},getParent(e){if(He.isMind(e))throw new Error("mind root node can not get parent");return Wh.get(e)},findParent(e){return He.isMind(e)?void 0:Wh.get(e)},getRoot(e,n){const i=G.findPath(e,n);return Je.get(e,i.slice(0,1))},getAncestors(e,n){const i=G.findPath(e,n),r=[];for(const o of Se.ancestors(i,{reverse:!0})){const a=Je.get(e,o);a&&!G.isBoard(a)&&r.push(a)}return r},getNode(e){const n=Jm.get(e);if(!n)throw new Error(`can not get node from ${JSON.stringify(e)}`);return n},findParentNode(e){if(He.isMind(e))return;const n=Ut.getParent(e);return Ut.getNode(n)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var Ru;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(Ru||(Ru={}));var sd;(function(e){e.bight="bight",e.polyline="polyline"})(sd||(sd={}));function CX(e,n,i){const o=OW(e,n.origin),a=$6(e,n.origin),l=iC(e,n.origin),c=n.parent,h=AA(e,n.origin),d=Ci(n);let p=c.children.slice(n.origin.start,n.origin.end+1).map(st=>st.origin);const m=pn(e,p,!0),w=Zc(n,i),x=[Xn.right,_n.top],T=[Xn.right,_n.bottom],D=[Xn.left,_n.middle];Cs(x,w),Cs(T,w),Cs(D,w);let b=Vo(m,x),B=Vo(m,T),A=Vo(d,D),I=uP(A,b,i)-15*2;b=si(b,15,w);let R=si(b,I,w);B=si(B,15,w);let k=si(B,I,w),W=si(A,-15,w);const U=pf(l,o);if(h===sd.polyline){const st=ze(),ft=Ys([b,R,W,k,B],{stroke:a,strokeWidth:o}),Et=Ys([A,W],{stroke:a,strokeWidth:o,strokeLineDash:U});return st.appendChild(ft),st.appendChild(Et),st}return G.getRoughSVG(e).path(`M${b[0]},${b[1]} Q${R[0]},${R[1]} ${W[0]},${W[1]} Q${k[0]},${k[1]} ${B[0]},${B[1]} M${A[0]},${A[1]} L${W[0]},${W[1]}`,{stroke:a,strokeWidth:o,strokeLineDash:U})}const cM=(e,n)=>{n.forEach((i,r)=>{const o=r.start+i.start,a=r.end+i.end,l=G.findPath(e,r);o>a?Qt.removeNode(e,l):Qt.setNode(e,{start:o,end:a},l)})},fM=(e,n)=>{const i=n.rightNodeCount,r=n.children.find(o=>Te.isAbstract(o)&&o.end>=i&&o.start<i);if(r){const o=G.findPath(e,r);Qt.setNode(e,{end:i-1},o)}},EX=(e,n)=>{let i=Tm(n);const{parentElements:r,abstractIncludedGroups:o}=VW(i);o.forEach((a,l)=>{const c=r[l];SX(e,c,a)})},SX=(e,n,i)=>{const r=i.map(c=>n.children.indexOf(c)).sort((c,h)=>c-h),o=n==null?void 0:n.rightNodeCount,a=r[0],l=r[r.length-1];if(Qo(Ks.getCorrectLayoutByElement(e,n))&&o&&a<o&&l>=o){const c=n.children.length,h=[...G.findPath(e,n),c],d=r.filter(m=>m>=o),p=r.filter(m=>m<o);v3(e,h,p[0],p[p.length-1]),v3(e,Se.next(h),d[0],d[d.length-1])}else{const c=[...G.findPath(e,n),n.children.length];v3(e,c,a,l)}},v3=(e,n,i,r)=>{const o=GW(e),a=rC(o,{strokeWidth:kg.branch.width,branchWidth:kg.branch.width});a.start=i,a.end=r,Qt.insertNode(e,a,n),zg(e),cd(e,a)},TX=(e,n,i)=>{const r={data:{...n.data}};i&&(r.data.topic=i);const o=G.findPath(e,n);Qt.setNode(e,r,o)},AX=(e,n,i)=>{const r=G.findPath(e,n),{width:o}=Aw(e,n,i,0),a={manualWidth:o,data:{...n.data,topic:{...n.data.topic}}};Qt.setNode(e,a,r)},hM=(e,n,i)=>{const r=e.pathRef(i);n.forEach(o=>{r.current&&Qt.insertNode(e,o,r.current)}),r.unref()},DX=(e,n,i,r)=>{var c;const o=Je.get(e,ut.parent(r)),a=[...ut.parent(r),(c=o.children)==null?void 0:c.length],l=n.map(h=>{const{start:d,end:p}=N6(h,i);return{...h.abstract,start:d+r[r.length-1],end:p+r[r.length-1]}});hM(e,l,a)},FA=(e,n)=>{n.forEach(i=>{Qt.setNode(e,{rightNodeCount:i.rightNodeCount},i.path)})},bX=(e,n)=>{if(Ut.isMindElement(e,n)){Ix(e,n);const i=G.findPath(e,n);if(n.isCollapsed){const r={isCollapsed:!1};Us.withoutSaving(e,()=>{Qt.setNode(e,r,i)})}gx(e,n,LA(e,n))}},BX=(e,n)=>{if(Ut.isMindElement(e,n)&&!He.isMind(n)&&!Te.isAbstract(n)){const i=G.findPath(e,n);if(aM(n)){const o=OA(e,i.slice(0,1),1);FA(e,o)}const r=G6(e,ut.next(i));cM(e,r),gx(e,n,yX(e,n))}},PX=(e,n)=>{Qt.insertNode(e,n,[e.children.length]),Qt.addSelectionWithTemporaryElements(e,[n])},MX=(e,n,i)=>{const o=[...n.data.emojis||[]];o.push(i);const a={data:{...n.data,emojis:o}},l=G.findPath(e,n);Qt.setNode(e,a,l)},RX=(e,n,i)=>{const r=n.data.emojis.filter(l=>l!==i),o={data:{topic:n.data.topic}};Ut.hasImage(n)&&(o.data.image=n.data.image),r.length>0&&(o.data.emojis=r);const a=G.findPath(e,n);Qt.setNode(e,o,a)},OX=(e,n,i,r)=>{const o={data:{...n.data}},a=n.data.emojis.map(c=>c===i?r:c);o.data.emojis=a;const l=G.findPath(e,n);Qt.setNode(e,o,l)},LX=(e,n)=>{Dw(e,n);const i={data:{...n.data,topic:{...n.data.topic}}};delete i.data.image;const r=G.findPath(e,n);Qt.setNode(e,i,r)},_X=(e,n,i)=>{const r={data:{...n.data,image:i,topic:{...n.data.topic}}},o=G.findPath(e,n);Qt.setNode(e,r,o)},dM=(e,n,i)=>{var o;const r=Je.get(e,i);r&&n&&((o=r.children)==null||o.forEach((a,l)=>{var c;a.layout&&((Km(n)&&FS(a.layout)||FS(n)&&Km(a.layout))&&Qt.setNode(e,{layout:null},[...i,l]),(c=a.children)!=null&&c.length&&dM(e,n,[...i,l]))}))},FX=(e,n)=>{const i=(r,o)=>{if(Ut.isMindElement(e,r)){dM(e,n,o);const a=Je.get(e,o);if(He.isMind(a)&&Qo(n)){let l={rightNodeCount:a.children.length/2};Qt.setNode(e,l,o),fM(e,a)}Qt.setNode(e,{layout:n},o)}};Ia.setProperty(e,{},{callback:i})},kX=(e,n)=>{Ia.setProperty(e,{shape:n})},IX=(e,n)=>{Ia.setProperty(e,{branchShape:n})},HX=(e,n)=>{Ia.setProperty(e,{branchWidth:n})},NX=(e,n)=>{Ia.setProperty(e,{branchColor:n})},ir={setLayout:FX,setShape:kX,setBranchShape:IX,setBranchWidth:HX,setBranchColor:NX,setTopic:TX,setNodeManualWidth:AX,addEmoji:MX,removeEmoji:RX,replaceEmoji:OX,insertAbstract:EX,setAbstractsByRefs:cM,setAbstractByStandardLayout:fM,insertNodes:hM,insertAbstractNodes:DX,setRightNodeCountByRefs:FA,removeImage:LX,setImage:_X,insertChildNode:bX,insertSiblingNode:BX,insertMind:PX};class GX extends Bs{constructor(n){super(n,{prepend:!0})}canDraw(n,i){return tv(this.board,n)===Ru.roundRectangle}draw(n,i){const r=Ci(i.node);return RA(this.board,r,i.node.origin)}}const nD=class nD extends Bs{canDraw(n,i){const r=ne(this.board);return!!((i!=null&&i.isHit||i!=null&&i.isHitAwarenessRectangle||i!=null&&i.isHitStandardLeftAwarenessRectangle)&&US(this.board)||i!=null&&i.isSelected&&r.length===1&&US(this.board)||n.isCollapsed)}draw(n,i){const r=ze(),o=TA(this.board,n),{startPoint:a,endPoint:l,hasCollapsedIcon:c,hasExpandedIcon:h,hasAddIcon:d,collapsedIconCenter:p,expandedIconCenter:m,addCenter:w,hasLeftAddIcon:x,standardRef:T}=gM(this.board,n);return this.toggleCollapseAndAdd(p,w,T==null?void 0:T.addCenter,o,r,c,d,x,!!(i!=null&&i.isHitAddArea),!!(i!=null&&i.isHitStandardLeftAddArea),!!(i!=null&&i.isShowCollapseAnimation),!!(i!=null&&i.isShowAddAnimation)),this.toggleExpandBadge(n,[a,l],m,o,r,!!h,!!(i!=null&&i.isHitExpandArea)),r}toggleCollapseAndAdd(n,i,r,o,a,l,c,h,d,p,m,w){var T;if((T=this.collapseOrAddG)==null||T.remove(),!l&&!c&&!h)return;if(this.collapseOrAddG=ze(),l){const D=ze();this.collapseOrAddG.appendChild(D),D.classList.add("collapse-button"),m&&D.classList.add("animated");const b=G.getRoughSVG(this.board).circle(n[0],n[1],zi,{fill:"#fff",stroke:o,strokeWidth:Fh,fillStyle:"solid"}),B=si(n,-10/2),A=si(n,am/2),I=G.getRoughSVG(this.board).line(B[0],B[1],A[0],A[1],{fill:"#fff",stroke:o,strokeWidth:Fh,fillStyle:"solid"});D.appendChild(b),D.appendChild(I),Ze(I,"round")}const x=(D,b,B)=>{const A=ze();D.appendChild(A),A.classList.add("add-button"),w&&A.classList.add("animated");const I=G.getRoughSVG(this.board).circle(b[0],b[1],zi+Fh,{fill:B?PW:BW,stroke:xS,fillStyle:"solid"}),R=[b[0]-am/2,b[1]],k=[b[0]+am/2,b[1]],W=[b[0],b[1]-am/2],U=[b[0],b[1]+am/2],nt=G.getRoughSVG(this.board).line(R[0],R[1],k[0],k[1],{stroke:Nb,strokeWidth:Fh});Ze(nt,"round");const st=G.getRoughSVG(this.board).line(W[0],W[1],U[0],U[1],{stroke:Nb,strokeWidth:Fh});Ze(st,"round"),A.appendChild(I),A.appendChild(nt),A.appendChild(st)};c&&i&&x(this.collapseOrAddG,i,d),h&&r&&x(this.collapseOrAddG,r,p),a.appendChild(this.collapseOrAddG)}toggleExpandBadge(n,i,r,o,a,l,c){var A;if((A=this.expandG)==null||A.remove(),!l)return;this.expandG=ze(),this.expandG.classList.add("expanded-button");const h=i[1],d=G.getRoughSVG(this.board).line(i[0][0],i[0][1],h[0],h[1],{fill:o,stroke:o,fillStyle:"solid",strokeWidth:Fh}),p=c?Mm(o,.4):Mm(o,.2),m=G.getRoughSVG(this.board).circle(r[0],r[1],zi+Fh,{fill:p,stroke:xS,fillStyle:"solid"}),w=q6(n);let x=`${w}`,T=r[1]+4.5;w>=99&&(x="...",T=r[1]+1);const{width:D,height:b}=Xx(this.board,gd(x),{fontSize:Number(nx.fontSize12),fontFamily:xg}),B=TO(r[0]-D/2,T,o,`${x}`);B.setAttribute("style",`font-size: ${Number(nx.fontSize12)}px;`),this.expandG.appendChild(d),this.expandG.appendChild(m),this.expandG.appendChild(B),a.appendChild(this.expandG)}};nD.key="mind-node-more";let iv=nD;const gM=(e,n)=>{var b,B;const i=He.isMind(n),r=i&&n.layout===ie.standard,o=zX(e,n),a=Kb(e,n,o),l=si(a,rw,o),c=((b=n.children)==null?void 0:b.length)>0&&!i&&!n.isCollapsed,h=((B=n.children)==null?void 0:B.length)>0&&!i&&n.isCollapsed,d=!h,p=si(l,zi/2,o),m=c?p:null,w=h?p:null;let x=null;d&&(x=c?si(p,rw+zi,o):p);let T=null;if(d){const A=si(x,zi/2,o);T=H.getRectangleByPoints([qc(a,-20/2,o),qc(A,zi/2,o)])}else if(h){const A=si(w,zi/2,o);T=H.getRectangleByPoints([qc(a,-20/2,o),qc(A,zi/2,o)])}let D=null;if(r){const A=Kb(e,n,o,!0),I=[A[0]-rw-zi/2,A[1]],R=H.getRectangleByPoints([[A[0]-zi-rw,A[1]-zi/2],[A[0],A[1]+zi/2]]);D={addCenter:I,awarenessRectangle:R}}return{startPoint:a,endPoint:l,hasCollapsedIcon:c,hasExpandedIcon:h,hasAddIcon:d,collapsedIconCenter:m,expandedIconCenter:w,addCenter:x,awarenessRectangle:T,hasLeftAddIcon:r,standardRef:D}},zX=(e,n)=>{const i=Ut.getNode(n),r=Ks.getCorrectLayoutByElement(e,n),o=Xr(r);let a=Zc(i,o);return Ml(r)&&(a=Kc(r)?an.top:an.bottom),a},Kb=(e,n,i,r=!1)=>{const o=Ut.getNode(n),a=tv(e,n)===Ru.underline,l=Ci(o);let c=[Xn.right,_n.middle];return r&&(c[0]=Xn.left),Cs(c,i),(i===an.left||i===an.right)&&a&&!He.isMind(n)&&(c[1]=_n.bottom),Vo(l,c)},US=e=>!vu(e)&&!Dr(e)&&!of(e)&&!sf(e);class pM extends mf{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(n,i)=>i.origin.id}initializeGenerator(){this.nodeShapeGenerator=new GX(this.board),this.nodeEmojisGenerator=new nv(this.board),this.activeGenerator=new cf(this.board),this.nodeMoreGenerator=new iv(this.board),this.imageGenerator=new Bu(this.board,{getRectangle:r=>oC(this.board,r),getImageItem:r=>r.data.image});const n=(this.board.getPluginOptions(wS)||{}).textPlugins,i=new yv(this.board,{getRectangle:()=>J6(this.board,this.node),onChange:r=>{ir.setTopic(this.board,this.element,r.newText)},getMaxWidth:()=>zn.getTopicMaxDynamicWidth(this.board,this.element),textPlugins:n||[]});this.getRef().addGenerator(cf.key,this.activeGenerator),this.getRef().addGenerator(nv.key,this.nodeEmojisGenerator),this.getRef().addGenerator(Bu.key,this.imageGenerator),this.getRef().addGenerator(iv.key,this.nodeMoreGenerator),this.getRef().initializeTextManage(i),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=Ut.getNode(this.element),this.index=mg.get(this.element)||0,this.roughSVG=G.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG()),this.drawEmojis(),this.imageGenerator.processDrawing(this.element,this.getElementG()),He.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(n,i){const r=Ut.getNode(n.element),o=H.isEqual(this.node,r);if(this.node=r,!o||n.element!==i.element||n.hasThemeChanged)this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),!Ut.hasImage(i.element)&&Ut.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),Ut.hasImage(i.element)&&Ut.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),i.element,n.element),Ut.hasImage(i.element)&&!Ut.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const a=n.selected===i.selected,l=n.parent===i.parent;(!a||n.selected)&&(this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected})),l||this.drawLink()}}drawEmojis(){const n=this.nodeEmojisGenerator.drawEmojis(this.element);n&&this.getElementG().append(n)}drawLink(){if(He.isMind(this.element))return;const n=Ut.getParent(this.element),i=Ut.getNode(n);this.linkLineG&&this.linkLineG.remove();const r=Ks.getCorrectLayoutByElement(this.board,n);Te.isAbstract(this.node.origin)?this.linkLineG=CX(this.board,this.node,Xr(r)):this.linkLineG=oM(this.board,i,this.node,Xr(r)),this.getElementG().append(this.linkLineG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),Jm.get(this.element)===this.node&&Jm.delete(this.element),this.getRef().destroyTextManage()}}class jX extends pM{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(n){n.element!==this.element&&this.initialized&&this.updateMindLayout(n.element)}updateMindLayout(n=this.element){const i=n.layout||X6();this.root=pW.layout(n,kW(this.board),i),this.updateMindNodeLocation(n)}updateMindNodeLocation(n){const{x:i,y:r,hGap:o,vGap:a}=this.root,l=i+o,c=r+a;Ar(this.root,h=>{h.x=h.x-l+n.points[0][0],h.y=h.y-c+n.points[0][1],Jm.set(h.origin,h)})}}const UX=5,$X=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r}=e;let o=[],a=[],l,c,h,d=null,p;return e.pointerDown=m=>{if(G.isReadonly(e)||G.hasBeenTextEditing(e)||!G.isPointer(e,nn.selection)||!Dl(m)){n(m);return}const w=Pe(e,ke(e,m.x,m.y)),x=ne(e),T=Ll(e,w);if(T&&Ut.isMindElement(e,T)&&!He.isMind(T)&&!Te.isAbstract(T)){const D=x.filter(B=>Ut.isMindElement(e,B)&&!He.isMind(B)&&!Te.isAbstract(B));x.length>0&&x.includes(T)?(o=D,l=w):(o=[T],l=w)}o.length&&(a=I6(e,o)),n(m)},e.pointerMove=m=>{if(!e.options.readonly&&o.length&&l){const w=Pe(e,ke(e,m.x,m.y));if(be(l[0],l[1],w[0],w[1])<UX)return;Wb(e,!0),h==null||h.remove();const T=Pe(e,ke(e,m.x,m.y));d=eX(e,T,d,[...o,...a]),d!=null&&d.target&&(p=rX(e,d),h=fX(e,d,p),G.getHost(e).appendChild(h));const D=w[0]-l[0],b=w[1]-l[1];c==null||c.remove(),c=ze(),[...o,...a].forEach(B=>{nM(B)}),o.forEach(B=>{const A=cX(e,B,D,b);c==null||c.appendChild(A)}),G.getHost(e).appendChild(c);return}i(m)},e.globalPointerUp=m=>{const w=Tm(o);if(!e.options.readonly&&w.length){if(w.push(...a),of(e)&&w.forEach(x=>{iM(x)}),d){const x=e.pathRef(p),T=Se.hasPrevious(p)&&e.pathRef(Se.previous(p)),D=e.pathRef(G.findPath(e,d.target));let b=H6(e,w);const B=w.filter(ft=>!b.some(Et=>Et.abstract===ft)).map(ft=>Te.isAbstract(ft)?jS(ft):ft);if(p[p.length-1]!==0){const ft=Je.get(e,Se.previous(p)),Et=Tv(ft);if(Et&&Et.end!==p[p.length-1]-1){const mt=b.map(wt=>jS(wt.abstract));B.push(...mt),b=[]}}const I=z6(e,w);G6(e,p,B.length,!1,I),ir.setAbstractsByRefs(e,I);let R=lM(e,w);const k=Je.get(e,Se.parent(p));rM(k,d)&&D.current&&(R=OA(e,D.current.slice(0,1),B.length,R)),ir.setRightNodeCountByRefs(e,R),MT.removeElements(e,w);let U=x.current;const nt=Se.parent(x.current||p);if(!U){const ft=T&&T.unref();if(ft)U=Se.next(ft);else{const Et=Je.get(e,nt),ct=wf(Et);U=[...nt,ct.length||0]}}ir.insertNodes(e,B,U),b.length&&ir.insertAbstractNodes(e,b,B,U),D.current&&x.current&&Se.isAncestor(D.current,x.current)&&d.target.isCollapsed&&Qt.setNode(e,{isCollapsed:!1},D.current),D.unref(),x.unref();let st=[];Ar(e,ft=>{o.some(ct=>ct.id===ft.id)&&st.push(ft)}),Qt.addSelectionWithTemporaryElements(e,st)}Wb(e,!1),o=[],c==null||c.remove(),c=void 0,h==null||h.remove(),h=void 0,d=null}r(m)},e},VX=e=>{const n=e,{pointerDown:i,pointerMove:r,pointerUp:o}=e;let a,l,c,h;return e.pointerDown=d=>{if(!Dl(d)||G.isReadonly(e)){i(d);return}const p=ne(e).filter(w=>Te.isAbstract(w)),m=Pe(e,ke(e,d.x,d.y));if(a=p.find(w=>(l=sM(e,w,m),l)),a){n!=null&&n.onAbstractResize&&n.onAbstractResize(Am.start);return}i(d)},e.pointerMove=d=>{ne(e);const p=Pe(e,ke(e,d.x,d.y));if(c=mX(e,c,p),l&&a){const m=Ks.getCorrectLayoutByElement(e,a),w=Xr(m),x=Ut.getParent(a);let T=x.children;const D=Ks.getCorrectLayoutByElement(e,x);if(Qo(D)){const st=x.rightNodeCount,{leftChildren:ft,rightChildren:Et}=RW(x);a.end<st&&(T=Et),a.start>=st&&(T=ft)}n!=null&&n.onAbstractResize&&n.onAbstractResize(Am.resizing);const b=w?p[1]:p[0],B=Ut.getNode(x),A=gX(e,l,T,a,B,w),I=Math.min(A.max,Math.max(A.min,b));let R=pX(e,T,I,w);if(l===Sr.start&&R+1===a.start||l===Sr.end&&R===a.end)h=void 0;else{if(Qo(B.layout)){const st=B.origin.rightNodeCount;a.start>=st&&(R+=st)}h=l===Sr.start?{start:R+1}:{end:R}}const U=gn.getElementRef(a).getGenerator(cf.key),nt=Rm(e,[I,I]);U.updateAbstractOutline(a,l,w?nt[1]:nt[0])}r(d)},e.pointerUp=d=>{if(l=void 0,a){if(n!=null&&n.onAbstractResize&&n.onAbstractResize(Am.end),h){const p=G.findPath(e,a);Qt.setNode(e,h,p)}else gn.getElementRef(a).getGenerator(cf.key).updateAbstractOutline(a);a=void 0;return}o(d)},e},WX=e=>{const n=e;return e.setPluginOptions(eC,{spaceBetweenEmojis:4,emojiPadding:0}),n},XX="m",qX=e=>{const n=e,{keyDown:i,pointerDown:r,pointerMove:o,pointerUp:a}=e;let l=null,c=null;n.pointerDown=d=>{const p=G.isPointer(e,wu.mind);if(!G.isReadonly(e)&&Pl(e)&&p){const m=Pe(e,ke(e,d.x,d.y)),w=jb(n,m);ir.insertMind(e,w),un.updatePointerType(e,nn.selection);return}r(d)},n.pointerMove=d=>{if(G.isReadonly(e)){o(d);return}const p=G.isPointer(e,wu.mind);Vx(e)&&p?_a(e,"with-mind-create",()=>{let m=G.getMovingPointInBoard(e);if(m){m=Pe(n,ke(e,m[0],m[1])),c=jb(n,m);const w=qW(n,c),x=RA(e,w,c),T=tM(n,w,c);if(l)l.textManage.updateRectangle(T),l.nodeG.remove(),l.nodeG=x,l.g.append(x),l.g.append(l.textManage.g);else{const D=new yv(e,{getRectangle:()=>T});D.draw(c.data.topic),l={g:ze(),nodeG:x,textManage:D},l.g.classList.add("root"),l.g.setAttribute("plait-mind-temporary","true"),G.getHost(e).append(l.g),l.g.append(l.nodeG,D.g)}}}):h(),o(d)},n.pointerUp=d=>{if(c){ir.insertMind(e,c),un.updatePointerType(e,nn.selection),c=null,h();return}a(d)},e.keyDown=d=>{if(G.isReadonly(e)||ne(e).length>0){i(d);return}if(d.key===XX&&!G.isPointer(e,wu.mind)){un.updatePointerType(e,wu.mind),Vr(e,Xi.drawing),d.preventDefault();return}i(d)};function h(){l&&(l.textManage.destroy(),l.g.remove(),l=null)}return n},YX=e=>{const n=e,{keyDown:i,globalKeyDown:r}=n;return n.keyDown=o=>{const a=ne(n),l=a.length===1,c=a.length===1&&Ut.isMindElement(n,a[0]),h=a[0];if(jG(o)&&c&&!He.isMind(h)&&h.children&&h.children.length>0){Qt.setNode(n,{isCollapsed:!h.isCollapsed},G.findPath(n,h));return}if(!G.isReadonly(n)){if(UG(o)&&c){o.preventDefault(),ir.insertChildNode(n,h);return}if($G(o)&&c&&!He.isMind(h)&&!Te.isAbstract(h)){ir.insertSiblingNode(n,h);return}if(!qT(o)&&!KT(o)&&!YT(o)&&l&&Ut.isMindElement(n,h)){o.preventDefault(),BA(h);return}}i(o)},n.globalKeyDown=o=>{if(G.isFocus(n)&&G.hasBeenTextEditing(n)&&ln.isHotkey("mod+z",o)){const{history:a}=n,{undos:l}=a,c=l.length>0?l[l.length-1][0]:void 0;c&&c.type==="insert_node"&&Ut.isMindElement(n,c.node)&&mv(c.node).isEditing&&n.undo()}r(o)},n},KX=(e,n)=>!e||!n?!1:e.target===n.target&&e.isHit===n.isHit&&e.isHitAwarenessRectangle===n.isHitAwarenessRectangle&&e.isHitCollapseArea===n.isHitCollapseArea&&e.isHitExpandArea===n.isHitExpandArea&&e.isHitAddArea===n.isHitAddArea&&e.isHitStandardLeftAddArea===n.isHitStandardLeftAddArea&&e.isHitStandardLeftAwarenessRectangle===n.isHitStandardLeftAwarenessRectangle,ZX=e=>{const{pointerMove:n,pointerLeave:i,pointerUp:r}=e;let o=null;e.pointerMove=l=>{US(e)&&_a(e,"with-mind-node-hover-hit-test",()=>{o&&!gn.hasMounted(o.target)&&(o=null);const c=y3(e,l.x,l.y);if(!(o&&c&&KX(o,c))){if(o&&(!c||c.target!==o.target)){const h=Es(e,o.target.id);h&&h===o.target&&a({target:o.target,isHit:!1,isHitAwarenessRectangle:!1,isHitCollapseArea:!1,isHitExpandArea:!1,isHitAddArea:!1,isHitStandardLeftAddArea:!1,isHitStandardLeftAwarenessRectangle:!1})}c?(a(c,o),o=c):o&&(o=null)}}),n(l)},e.pointerUp=l=>{if(o&&(o.isHitCollapseArea||o.isHitExpandArea)){const d={isCollapsed:!o.target.isCollapsed},p=G.findPath(e,o.target);Qt.setNode(e,d,p),setTimeout(()=>{const m=y3(e,l.x,l.y);m?(a(m),o=m):o=null},0);return}const c=h=>{if(h.isHitAddArea&&He.isMind(h.target)&&h.target.layout===ie.standard){const d=G.findPath(e,h.target),p=OA(e,d,1);FA(e,p);const m=vX(e,h.target,p[0].rightNodeCount);gx(e,h.target,m)}else{const d=LA(e,h.target);gx(e,h.target,d)}};if(o&&(o.isHitAddArea||o.isHitStandardLeftAddArea)&&!G.isReadonly(e)){o&&c(o);return}if(G4()){const h=y3(e,l.x,l.y);if(h&&(h.isHitAddArea||h.isHitStandardLeftAddArea)){c(h);return}if(h&&(h.isHitExpandArea||h.isHitCollapseArea)){const p={isCollapsed:!h.target.isCollapsed},m=G.findPath(e,h.target);Qt.setNode(e,p,m);return}}r(l)};const a=(l,c)=>{const h=gn.getElementRef(l.target),d=h==null?void 0:h.getGenerator(iv.key);if(d){const p=(c==null?void 0:c.target)===l.target,m=gn.getElementG(l.target);d.processDrawing(l.target,m,{isHit:l.isHit,isHitStandardLeftAddArea:l.isHitStandardLeftAddArea,isHitStandardLeftAwarenessRectangle:l.isHitStandardLeftAwarenessRectangle,isHitAwarenessRectangle:l.isHitAwarenessRectangle,isHitCollapseArea:l.isHitCollapseArea,isHitExpandArea:l.isHitExpandArea,isHitAddArea:l.isHitAddArea,isSelected:vg(e,l.target),isShowCollapseAnimation:(l.isHit||l.isHitCollapseArea)&&!vg(e,l.target)&&!p,isShowAddAnimation:(l.isHit||l.isHitAddArea)&&!vg(e,l.target)&&!p})}};return e.pointerLeave=l=>{o&&a({target:o.target,isHit:!1,isHitAwarenessRectangle:!1,isHitCollapseArea:!1,isHitExpandArea:!1,isHitAddArea:!1,isHitStandardLeftAddArea:!1,isHitStandardLeftAwarenessRectangle:!1}),o=null,i(l)},e},y3=(e,n,i)=>{let r=null,o=!1,a=!1,l=!1,c=!1,h=!1,d=!1,p=!1;const m=Pe(e,ke(e,n,i));return Ar(e,w=>{if(r||!Ut.isMindElement(e,w))return;const x=Z6(e,m,w),{hasCollapsedIcon:T,hasExpandedIcon:D,hasAddIcon:b,collapsedIconCenter:B,expandedIconCenter:A,addCenter:I,awarenessRectangle:R,hasLeftAddIcon:k,standardRef:W}=gM(e,w),U=R&&H.isHit(H.getRectangleByPoints([m,m]),R),nt=T&&H.isHit(H.getRectangleByPoints([m,m]),H.getRectangleByCenterPoint(B,zi,zi)),st=D&&H.isHit(H.getRectangleByPoints([m,m]),H.getRectangleByCenterPoint(A,zi,zi)),ft=b&&H.isHit(H.getRectangleByPoints([m,m]),H.getRectangleByCenterPoint(I,zi,zi)),Et=k&&W&&H.isHit(H.getRectangleByPoints([m,m]),W.awarenessRectangle),ct=k&&W&&H.isHit(H.getRectangleByPoints([m,m]),H.getRectangleByCenterPoint(W.addCenter,zi,zi));(x||U||Et)&&(o=x,r=w,l=nt,c=!!st,h=ft,a=!!U,p=!!Et,d=!!ct)},ud(e),!0),r?{target:r,isHit:o,isHitAwarenessRectangle:a,isHitCollapseArea:l,isHitExpandArea:c,isHitAddArea:h,isHitStandardLeftAddArea:d,isHitStandardLeftAwarenessRectangle:p}:null},QX=e=>{const{keyDown:n,pointerUp:i,globalPointerUp:r,buildFragment:o,insertFragment:a,deleteFragment:l,afterChange:c}=e;return e.pointerUp=h=>{const d=Uo(e);if(d&&Ut.isMindElement(e,d)&&!cO(h)&&(G.isReadonly(e)||!Dl(h)||!G.isPointer(e,nn.selection))){Dw(e,d),i(h);return}if(G.isReadonly(e)){i(h);return}const p=Pe(e,ke(e,h.x,h.y)),m=Ll(e,p),w=m&&Ut.isMindElement(e,m)&&Ut.hasImage(m)&&eM(e,m,p);if(w&&d&&m===d){eS(e),i(h);return}d&&Ut.isMindElement(e,d)&&Dw(e,d),w&&m&&(eS(e),QW(e,m)),i(h)},e.keyDown=h=>{const d=Uo(e);if(!G.isReadonly(e)&&d&&($r.isDeleteBackward(h)||$r.isDeleteForward(h))){cd(e,d),ir.removeImage(e,d);return}n(h)},e.globalPointerUp=h=>{if(G.isFocus(e)){const d=h.target instanceof Node&&G.getBoardContainer(e).contains(h.target),p=Uo(e);p&&Ut.isMindElement(e,p)&&!d&&Dw(e,p)}r(h)},e.buildFragment=(h,d,p,m)=>{const w=Uo(e);return w&&(h=DL(Au.medias,[w.data.image],"")),o(h,d,p,m)},e.deleteFragment=h=>{const d=Uo(e);d&&ir.removeImage(e,d),l(h)},e.insertFragment=(h,d,p)=>{var T,D;const m=ne(e),w=!!Uo(e),x=m.length===1&&Ut.isMindElement(e,m[0]);if(w||x){if((T=h==null?void 0:h.files)!=null&&T.length){const b=$B.map(A=>"image/"+A),B=m[0]||Uo(e);if(b.includes(h.files[0].type)){const A=h.files[0];nP(e,A,MW,I=>{ir.setImage(e,B,I)});return}}if((D=h==null?void 0:h.medias)!=null&&D.length){const b=m[0]||Uo(e);ir.setImage(e,b,h.medias[0]);return}}a(h,d,p)},e.afterChange=()=>{c();const h=Uo(e);h&&Ut.isMindElement(e,h)&&gn.getElementRef(h).getGenerator(Bu.key).setFocus(h,!0)},e},JX=e=>{let n=null;return pd(e,{key:"mind-node",canResize:()=>!0,hitTest:r=>{const o=tq(e,r);return o?{element:o,handle:null,cursorClass:Da.ew}:null},beforeResize:r=>{n={minWidth:zn.getNodeResizableMinWidth(e,r.element),currentWidth:zn.getTopicDynamicWidth(e,r.element),path:G.findPath(e,r.element),textManage:mv(r.element)}},onResize:(r,o)=>{let a=n.currentWidth+Ce.getOffsetX(o.startPoint,o.endPoint);a<=n.minWidth&&(a=n.minWidth);const l=Je.get(e,n.path);l&&zn.getNodeTopicMinWidth(e,l)!==a&&ir.setNodeManualWidth(e,l,a)},afterResize:r=>{n=null}}),e},tq=(e,n)=>{const i=ne(e).filter(r=>Ut.isMindElement(e,r));if(i.length>0){const r=i.find(o=>{const a=eq(e,o);return fv(n[0],n[1],a)<=0});return r||null}return null},eq=(e,n)=>{const i=Ut.getNode(n),r=Ci(i);return{x:r.x+r.width-Hb,y:r.y,width:Hb*2,height:r.height}},nq=e=>(pd(e,{key:"mind-node-image",canResize:()=>!0,hitTest:i=>{const r=Uo(e),o=r&&Ut.isMindElement(e,r)?r:void 0;if(o){const a=YW(e,o,i);if(a)return{element:o,handle:a.handle,cursorClass:a.cursorClass}}return null},onResize:(i,r)=>{const o=Ce.getOffsetX(r.startPoint,r.endPoint),a=i.element.data.image.width,l=i.element.data.image.height,c=i.path;let h=a+o;h<=100&&(h=100);const d=a/l,p=h/d,m={...i.element.data.image,width:h,height:p};ir.setImage(e,Je.get(e,c),m),iP(e,Je.get(e,c))}}),e),iq=(e,n,i)=>{let r=[];const o=I6(e,n),a=H6(e,[...n,...o]),l=n.filter(h=>!a.find(d=>d.abstract===h));l.push(...a.map(h=>h.abstract));const c=l.map(h=>Ut.getNode(h));return l.forEach((h,d)=>{const p=Ci(c[d]),m=[[p.x-i[0],p.y-i[1]]],w=a.find(x=>x.abstract===h);if(Te.isAbstract(h)&&w){const{start:x,end:T}=N6(w,l);r.push({...h,points:m,start:x,end:T})}else if(Te.isAbstract(h)){let x={...h,points:m};delete x.start,delete x.end,r.push(x)}else r.push({...h,points:m})}),r},rq=(e,n,i,r)=>{let o,a;const l=ne(e);let c=[];const h=l.length===1,d=l[0],p=d&&G.findPath(e,d),m=d&&wf(d).length;d&&d.isCollapsed&&Qt.setNode(e,{isCollapsed:!1},p),n.forEach((w,x)=>{if(o=K6(w),h&&r!==Ma.duplicate)He.isMind(w)&&(o=KW(e,o)),Te.isAbstract(o)&&(o.start=o.start+m,o.end=o.end+m),a=[...p,m+x];else{const T=[i[0]+w.points[0][0],i[1]+w.points[0][1]];o.points=[T],Te.isAbstract(w)&&(o=jS(o)),He.isMind(w)||(o=ZW(e,o)),a=[e.children.length]}c.push(o),Qt.insertNode(e,o,a)}),Qt.addSelectionWithTemporaryElements(e,c)},oq=(e,n,i)=>{const r=rC(i,{}),o=G.findPath(e,n);Qt.insertNode(e,r,LA(e,n)),n.isCollapsed&&Qt.setNode(e,{isCollapsed:!1},o),Qt.addSelectionWithTemporaryElements(e,[r])},sq=e=>{const n=e;let i;const{getDeletedFragment:r,insertFragment:o,buildFragment:a,deleteFragment:l}=n;return n.getDeletedFragment=c=>{const h=g3(n);if(h.length){i=Tm(h).reverse();const d=z6(n,i);ir.setAbstractsByRefs(n,d);const p=lM(n,h);ir.setRightNodeCountByRefs(n,p);const m=Tm(h);c.push(...m)}return r(c)},n.deleteFragment=c=>{if(l(c),i){const h=aq(n,i);h&&cd(n,h),i=null}},n.buildFragment=(c,h,d,p)=>{const m=g3(n,p),w=Tm(m);if(w.length){const x=iq(n,w,h?[h.x,h.y]:[0,0]),D={text:tP(m),type:Au.elements,elements:x};c=Gx(c,D)}return a(c,h,d,p)},n.insertFragment=(c,h,d)=>{var p,m;if((p=c==null?void 0:c.elements)!=null&&p.length){const w=(m=c.elements)==null?void 0:m.filter(x=>Ut.isMindElement(n,x));w&&w.length>0&&rq(n,w,h,d)}if(c!=null&&c.text){const w=g3(n);if(w.length===1){oq(n,w[0],gd(c.text));return}}o(c,h,d)},n},aq=(e,n)=>{let i;const r=n[0],o=G.findPath(e,r);let a=o;if(Se.hasPrevious(o)&&(a=Se.previous(o)),Te.isAbstract(r)){const d=Ut.getParent(r);n.includes(d.children[r.start])||(i=d.children[r.start])}try{i||(i=Je.get(e,a))}catch{}const l=n[0],c=Ut.findParent(l),h=n.every(d=>Ut.findParent(d)===c);return c&&h&&!i&&(i=c),i},lq=e=>{const n=e;return n.renderEmoji=(i,r)=>{throw new Error("No implementation for renderEmoji method.")},n},uq=e=>!(!e.data||!e.data.topic),cq=e=>{const n={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=n);else{const i={topic:n};e.data=i}},mM=e=>{const n=e,{drawElement:i,dblClick:r,isRectangleHit:o,isHit:a,getRectangle:l,isMovable:c,isRecursion:h,isAlign:d,isImageBindingAllowed:p,canAddToGroup:m,canSetZIndex:w,isExpanded:x,getOneHitElement:T,normalizeElement:D}=n;return n.normalizeElement=b=>{He.isMind(b.element)&&Ar(b.element,B=>{uq(B)||cq(B)}),D(b)},n.drawElement=b=>He.isMind(b.element)?jX:Ut.isMindElement(n,b.element)?pM:i(b),n.applyTheme=b=>{const B=b,A=!G.isBoard(b)&&((B==null?void 0:B.branchColor)||(B==null?void 0:B.fill)||(B==null?void 0:B.strokeColor));if(He.isMind(b)&&A){const I=G.findPath(n,b);Qt.setNode(n,{fill:null,strokeColor:null,branchColor:null},I)}},n.getRectangle=b=>Ut.isMindElement(n,b)?(gn.hasMounted(b)||console.error("mind element has not been mounted"),Ci(Ut.getNode(b))):l(b),n.canAddToGroup=b=>Ut.isMindElement(n,b)&&!He.isMind(b)?!1:m(b),n.canSetZIndex=b=>Ut.isMindElement(n,b)&&!He.isMind(b)?!1:w(b),n.isRecursion=b=>Ut.isMindElement(n,b)&&b.isCollapsed?!1:h(b),n.isRectangleHit=(b,B)=>{if(Ut.isMindElement(n,b)){const A=Ci(Ut.getNode(b));return H.isHit(H.getRectangleByPoints([B.anchor,B.focus]),A)}return o(b,B)},n.isHit=(b,B,A)=>{if(Ut.isMindElement(n,b)){const I=Ci(Ut.getNode(b));return H.isHit(H.getRectangleByPoints([B,B]),I)}return a(b,B,A)},n.getOneHitElement=b=>b.every(A=>Ut.isMindElement(n,A))?b[0]:T(b),n.isMovable=b=>He.isMind(b)?!0:c(b),n.isImageBindingAllowed=b=>Ut.isMindElement(n,b)?!0:p(b),n.isAlign=b=>He.isMind(b)?!0:d(b),n.isExpanded=b=>Ut.isMindElement(n,b)&&!He.isMind(b)?!b.isCollapsed:x(b),n.dblClick=b=>{if(G.isReadonly(n)){r(b);return}const B=Pe(n,ke(n,b.x,b.y));n.children.filter(A=>He.isMind(A)).forEach(A=>{Ar(A,I=>{!G.hasBeenTextEditing(n)&&Z6(n,B,I)&&BA(I)},ud(n))}),!G.hasBeenTextEditing(n)&&r(b)},lq(JX(nq(QX(ZX(sq(YX(WX(qX(VX($X(n)))))))))))};var w3={exports:{}},Zb;function fq(){return Zb||(Zb=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(n,i){n(function(){var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var o=Object.prototype.hasOwnProperty,a;r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",a="isArray"in Array?Array.isArray:function(m){return Object.prototype.toString.call(m)==="[object Array]"};function l(m,w){return m!=null&&w!=null&&m.toLowerCase()===w.toLowerCase()}function c(m,w){var x,T,D=m.length;if(!D||!w)return!1;for(x=w.toLowerCase(),T=0;T<D;++T)if(x===m[T].toLowerCase())return!0;return!1}function h(m){for(var w in m)o.call(m,w)&&(m[w]=new RegExp(m[w],"i"))}function d(m){return(m||"").substr(0,500)}(function(){var w,x,T,D,b,B,A=r.mobileDetectRules;for(w in A.props)if(o.call(A.props,w)){for(x=A.props[w],a(x)||(x=[x]),b=x.length,D=0;D<b;++D)T=x[D],B=T.indexOf("[VER]"),B>=0&&(T=T.substring(0,B)+"([\\w._\\+]+)"+T.substring(B+5)),x[D]=new RegExp(T,"i");A.props[w]=x}h(A.oss),h(A.phones),h(A.tablets),h(A.uas),h(A.utils),A.oss0={WindowsPhoneOS:A.oss.WindowsPhoneOS,WindowsMobileOS:A.oss.WindowsMobileOS}})(),r.findMatch=function(m,w){for(var x in m)if(o.call(m,x)&&m[x].test(w))return x;return null},r.findMatches=function(m,w){var x=[];for(var T in m)o.call(m,T)&&m[T].test(w)&&x.push(T);return x},r.getVersionStr=function(m,w){var x=r.mobileDetectRules.props,T,D,b,B;if(o.call(x,m)){for(T=x[m],b=T.length,D=0;D<b;++D)if(B=T[D].exec(w),B!==null)return B[1]}return null},r.getVersion=function(m,w){var x=r.getVersionStr(m,w);return x?r.prepareVersionNo(x):NaN},r.prepareVersionNo=function(m){var w;return w=m.split(/[a-z._ \/\-]/i),w.length===1&&(m=w[0]),w.length>1&&(m=w[0]+".",w.shift(),m+=w.join("")),Number(m)},r.isMobileFallback=function(m){return r.detectMobileBrowsers.fullPattern.test(m)||r.detectMobileBrowsers.shortPattern.test(m.substr(0,4))},r.isTabletFallback=function(m){return r.detectMobileBrowsers.tabletPattern.test(m)},r.prepareDetectionCache=function(m,w,x){if(m.mobile===i){var T,D,b;if(D=r.findMatch(r.mobileDetectRules.tablets,w),D){m.mobile=m.tablet=D,m.phone=null;return}if(T=r.findMatch(r.mobileDetectRules.phones,w),T){m.mobile=m.phone=T,m.tablet=null;return}r.isMobileFallback(w)?(b=p.isPhoneSized(x),b===i?(m.mobile=r.FALLBACK_MOBILE,m.tablet=m.phone=null):b?(m.mobile=m.phone=r.FALLBACK_PHONE,m.tablet=null):(m.mobile=m.tablet=r.FALLBACK_TABLET,m.phone=null)):r.isTabletFallback(w)?(m.mobile=m.tablet=r.FALLBACK_TABLET,m.phone=null):m.mobile=m.tablet=m.phone=null}},r.mobileGrade=function(m){var w=m.mobile()!==null;return m.os("iOS")&&m.version("iPad")>=4.3||m.os("iOS")&&m.version("iPhone")>=3.1||m.os("iOS")&&m.version("iPod")>=3.1||m.version("Android")>2.1&&m.is("Webkit")||m.version("Windows Phone OS")>=7||m.is("BlackBerry")&&m.version("BlackBerry")>=6||m.match("Playbook.*Tablet")||m.version("webOS")>=1.4&&m.match("Palm|Pre|Pixi")||m.match("hp.*TouchPad")||m.is("Firefox")&&m.version("Firefox")>=12||m.is("Chrome")&&m.is("AndroidOS")&&m.version("Android")>=4||m.is("Skyfire")&&m.version("Skyfire")>=4.1&&m.is("AndroidOS")&&m.version("Android")>=2.3||m.is("Opera")&&m.version("Opera Mobi")>11&&m.is("AndroidOS")||m.is("MeeGoOS")||m.is("Tizen")||m.is("Dolfin")&&m.version("Bada")>=2||(m.is("UC Browser")||m.is("Dolfin"))&&m.version("Android")>=2.3||m.match("Kindle Fire")||m.is("Kindle")&&m.version("Kindle")>=3||m.is("AndroidOS")&&m.is("NookTablet")||m.version("Chrome")>=11&&!w||m.version("Safari")>=5&&!w||m.version("Firefox")>=4&&!w||m.version("MSIE")>=7&&!w||m.version("Opera")>=10&&!w?"A":m.os("iOS")&&m.version("iPad")<4.3||m.os("iOS")&&m.version("iPhone")<3.1||m.os("iOS")&&m.version("iPod")<3.1||m.is("Blackberry")&&m.version("BlackBerry")>=5&&m.version("BlackBerry")<6||m.version("Opera Mini")>=5&&m.version("Opera Mini")<=6.5&&(m.version("Android")>=2.3||m.is("iOS"))||m.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||m.version("Opera Mobi")>=11&&m.is("SymbianOS")?"B":(m.version("BlackBerry")<5||m.match("MSIEMobile|Windows CE.*Mobile")||m.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(m){return r.findMatch(r.mobileDetectRules.oss0,m)||r.findMatch(r.mobileDetectRules.oss,m)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function p(m,w){this.ua=d(m),this._cache={},this.maxPhoneWidth=w||600}return p.prototype={constructor:p,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===i&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===i&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===i&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(m){return r.getVersion(m,this.ua)},versionStr:function(m){return r.getVersionStr(m,this.ua)},is:function(m){return c(this.userAgents(),m)||l(m,this.os())||l(m,this.phone())||l(m,this.tablet())||c(r.findMatches(r.mobileDetectRules.utils,this.ua),m)},match:function(m){return m instanceof RegExp||(m=new RegExp(m,"i")),m.test(this.ua)},isPhoneSized:function(m){return p.isPhoneSized(m||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===i&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?p.isPhoneSized=function(m){return m<0?i:r.getDeviceSmallerSide()<=m}:p.isPhoneSized=function(){},p._impl=r,p.version="1.4.5 2021-03-13",p})})(function(n){if(e.exports)return function(i){e.exports=i()};if(typeof window<"u")return function(i){window.MobileDetect=i()};throw new Error("unknown environment")}())}(w3)),w3.exports}var hq=fq();const dq=hf(hq),Qb=e=>O.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),gq=e=>{const n=e;return e.setPluginOptions(eC,{emojiPadding:0,spaceBetweenEmojis:4}),n.renderEmoji=(i,r)=>{const o=document.createElement("span");i.appendChild(o);const a=lv.createRoot(o);a.render(O.jsx(Qb,{...r}));let l={...r};return{destroy:()=>{setTimeout(()=>{a.unmount()},0)},update:h=>{l={...l,...h},a.render(O.jsx(Qb,{...l}))}}},n},Jb=e=>{const n={src:e.imageItem.url,draggable:!1,width:"100%"};return O.jsx("div",{style:{display:"flex"},children:O.jsx("img",{...n,className:mn("image-origin",{"image-origin--focus":e.isFocus})})})};var Ig=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(Ig||{});const kA={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},IA={json:"application/json",drawnix:"application/vnd.drawnix+json",...kA},pq={drawnix:1},HA=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),mq=HA?Promise.resolve().then(function(){return Eq}):Promise.resolve().then(function(){return Bq});async function vq(...e){return(await mq).default(...e)}HA?Promise.resolve().then(function(){return Tq}):Promise.resolve().then(function(){return Mq});const yq=HA?Promise.resolve().then(function(){return Dq}):Promise.resolve().then(function(){return Oq});async function wq(...e){return(await yq).default(...e)}const xq=async e=>{const n=await e.getFile();return n.handle=e,n};var Cq=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((o,a)=>{n[a]={description:o.description||"Files",accept:{}},o.mimeTypes?o.mimeTypes.map(l=>{n[a].accept[l]=o.extensions||[]}):n[a].accept["*/*"]=o.extensions||[]});const i=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(i.map(xq));return e[0].multiple?r:r[0]},Eq={__proto__:null,default:Cq};function bw(e){function n(i){if(Object(i)!==i)return Promise.reject(new TypeError(i+" is not an object."));var r=i.done;return Promise.resolve(i.value).then(function(o){return{value:o,done:r}})}return bw=function(i){this.s=i,this.n=i.next},bw.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return r===void 0?Promise.resolve({value:i,done:!0}):n(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return r===void 0?Promise.reject(i):n(r.apply(this.s,arguments))}},new bw(e)}const vM=async(e,n,i=e.name,r)=>{const o=[],a=[];var l,c=!1,h=!1;try{for(var d,p=function(m){var w,x,T,D=2;for(typeof Symbol<"u"&&(x=Symbol.asyncIterator,T=Symbol.iterator);D--;){if(x&&(w=m[x])!=null)return w.call(m);if(T&&(w=m[T])!=null)return new bw(w.call(m));x="@@asyncIterator",T="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());c=!(d=await p.next()).done;c=!1){const m=d.value,w=`${i}/${m.name}`;m.kind==="file"?a.push(m.getFile().then(x=>(x.directoryHandle=e,x.handle=m,Object.defineProperty(x,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>w})))):m.kind!=="directory"||!n||r&&r(m)||o.push(vM(m,n,w,r))}}catch(m){h=!0,l=m}finally{try{c&&p.return!=null&&await p.return()}finally{if(h)throw l}}return[...(await Promise.all(o)).flat(),...await Promise.all(a)]};var Sq=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:vM(n,e.recursive,void 0,e.skipDirectory)},Tq={__proto__:null,default:Sq},Aq=async(e,n=[{}],i=null,r=!1,o=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const a=[];let l=null;if(e instanceof Blob&&e.type?l=e.type:e.headers&&e.headers.get("content-type")&&(l=e.headers.get("content-type")),n.forEach((d,p)=>{a[p]={description:d.description||"Files",accept:{}},d.mimeTypes?(p===0&&l&&d.mimeTypes.push(l),d.mimeTypes.map(m=>{a[p].accept[m]=d.extensions||[]})):l?a[p].accept[l]=d.extensions||[]:a[p].accept["*/*"]=d.extensions||[]}),i)try{await i.getFile()}catch(d){if(i=null,r)throw d}const c=i||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:a,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!i&&o&&o(c);const h=await c.createWritable();return"stream"in e?(await e.stream().pipeTo(h),c):"body"in e?(await e.body.pipeTo(h),c):(await h.write(await e),await h.close(),c)},Dq={__proto__:null,default:Aq},bq=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,i)=>{const r=document.createElement("input");r.type="file";const o=[...e.map(h=>h.mimeTypes||[]),...e.map(h=>h.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=o||"",r.style.display="none",document.body.append(r);const a=h=>{typeof l=="function"&&l(),n(h)},l=e[0].legacySetup&&e[0].legacySetup(a,()=>l(i),r),c=()=>{window.removeEventListener("focus",c),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",c)}),r.addEventListener("change",()=>{window.removeEventListener("focus",c),r.remove(),a(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),Bq={__proto__:null,default:bq},Pq=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,i)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const o=l=>{typeof a=="function"&&a(),n(l)},a=e[0].legacySetup&&e[0].legacySetup(o,()=>a(i),r);r.addEventListener("change",()=>{let l=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(l=l.filter(c=>c.webkitRelativePath.split("/").every(h=>!e[0].skipDirectory({name:h,kind:"directory"})))):l=l.filter(c=>c.webkitRelativePath.split("/").length===2),o(l)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),Mq={__proto__:null,default:Pq},Rq=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const i=document.createElement("a");let r=e;"body"in e&&(r=await async function(l,c){const h=l.getReader(),d=new ReadableStream({start:w=>async function x(){return h.read().then(({done:T,value:D})=>{if(!T)return w.enqueue(D),x();w.close()})}()}),p=new Response(d),m=await p.blob();return h.releaseLock(),new Blob([m],{type:c})}(e.body,e.headers.get("content-type"))),i.download=n.fileName||"Untitled",i.href=URL.createObjectURL(await r);const o=()=>{typeof a=="function"&&a()},a=n.legacySetup&&n.legacySetup(o,()=>a(),i);return i.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(i.href),3e4),o()}),i.click(),null},Oq={__proto__:null,default:Rq};const yM=e=>{var r,o;const n=(r=e.extensions)==null?void 0:r.reduce((a,l)=>(a.push(IA[l]),a),[]),i=(o=e.extensions)==null?void 0:o.reduce((a,l)=>l==="jpg"?a.concat(".jpg",".jpeg"):a.concat(`.${l}`),[]);return vq({description:e.description,extensions:i,mimeTypes:n,multiple:e.multiple??!1})},Lq=(e,n)=>wq(e,{fileName:`${n.name}.${n.extension}`,description:n.description,extensions:[`.${n.extension}`]},n.fileHandle);var NA=(e=>(e.drawnix="drawnix",e))(NA||{});const _q=()=>new Date().getTime().toString(),wM=async(e,n=_q())=>{const i=Iq(e),r=new Blob([i],{type:IA.drawnix});return{fileHandle:await Lq(r,{name:n,extension:"drawnix",description:"Drawnix file"})}},Fq=async e=>{const n=await yM({description:"Drawnix files"});return Hq(e,await zq(n))},kq=e=>e&&e.type===NA.drawnix&&Array.isArray(e.elements)&&typeof e.viewport=="object",Iq=e=>{const n={type:NA.drawnix,version:pq.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(n,null,2)},Hq=async(e,n)=>{const i=await jq(n);let r;try{if(r=JSON.parse(i),kq(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},Nq=(e,n,i)=>new File([e],i||"",{type:n}),Gq=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((n,i)=>{const r=new FileReader;r.onload=o=>{var a;if(!((a=o.target)!=null&&a.result))return i(new Error("Couldn't convert blob to ArrayBuffer"));n(o.target.result)},r.readAsArrayBuffer(e)}),zq=async e=>{var n;return e.type||(n=e==null?void 0:e.name)!=null&&n.endsWith(".drawnix")&&(e=Nq(await Gq(e),IA.drawnix,e.name)),e},jq=async e=>{let n;return"text"in Blob?n=await e.text():n=await new Promise(i=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&i(r.result)}}),n},Uq=async e=>new Promise((n,i)=>{const r=new FileReader;r.onload=()=>{const o=r.result;n(o)},r.onerror=o=>i(o),r.readAsDataURL(e)}),t8=e=>!!e&&Object.values(kA).includes(e),$q=e=>new Promise((n,i)=>{const r=new Image;r.onload=()=>{n(r)},r.onerror=o=>{i(o)},r.src=e}),Vq=(e,n,i)=>{const r=e.width>i?i:e.width,o=r/e.width*e.height;return{url:n,width:r,height:o}},$S=async(e,n,i,r)=>{const o=ne(e)[0]||Uo(e),a=o?240:400,l=await Uq(n),c=await $q(l),h=Vq(c,l,a),d=i&&Ll(e,i);if(r&&d&&Ut.isMindElement(e,d)){ir.setImage(e,d,h);return}o&&Ut.isMindElement(e,o)&&!r?ir.setImage(e,o,h):Ao.insertImage(e,h,i)};class Wq{constructor(n={}){this.overlay=null,this.imageContainer=null,this.image=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.animationFrameId=null,this.pendingUpdate=!1,this.state={zoom:1,x:0,y:0,isDragging:!1,dragStartX:0,dragStartY:0,imageStartX:0,imageStartY:0},this.styleElement=null,this.options={zoomStep:n.zoomStep||.2,minZoom:n.minZoom||.1,maxZoom:n.maxZoom||5,enableKeyboard:n.enableKeyboard!==!1},this.addStyles(),this.bindEvents()}open(n,i=""){this.createOverlay(),this.createImage(n,i),this.resetState(),document.body.style.overflow="hidden"}close(){this.overlay&&(this.cleanupDragEvents(),document.removeEventListener("mousemove",this.delegationHandler),document.removeEventListener("mouseup",this.delegationHandler),document.removeEventListener("keydown",this.delegationHandler),document.removeEventListener("wheel",this.delegationHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),document.body.removeChild(this.overlay),this.overlay=null,this.image=null,this.imageContainer=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.pendingUpdate=!1),document.body.style.overflow=""}createOverlay(){this.overlay=document.createElement("div"),this.overlay.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(45, 45, 45, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: grab;
    `,this.overlay.addEventListener("click",n=>{n.target===this.overlay&&this.close()}),this.createCloseButton(),this.createControls(),document.body.appendChild(this.overlay)}createCloseButton(){this.closeButton=document.createElement("div"),this.closeButton.innerHTML="",this.closeButton.className="image-viewer-close-btn",this.closeButton.addEventListener("click",()=>this.close()),this.overlay.appendChild(this.closeButton)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.style.cssText=`
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10001;
    `,this.addStyles();const n=document.createElement("button");n.innerHTML="+",n.className="image-viewer-control-btn",n.addEventListener("click",()=>this.zoomIn());const i=document.createElement("button");i.innerHTML="-",i.className="image-viewer-control-btn",i.addEventListener("click",()=>this.zoomOut());const r=document.createElement("button");r.innerHTML="",r.className="image-viewer-control-btn",r.addEventListener("click",()=>this.resetState()),this.controlsContainer.appendChild(i),this.controlsContainer.appendChild(r),this.controlsContainer.appendChild(n),this.overlay.appendChild(this.controlsContainer)}createImage(n,i){this.imageContainer=document.createElement("div"),this.imageContainer.style.cssText=`
      position: relative;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
    `,this.image=document.createElement("img"),this.image.src=n,this.image.alt=i,this.image.style.cssText=`
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
      width: auto;
      height: auto;
      display: block;
      user-select: none;
      pointer-events: none;
      object-fit: contain;
    `,this.imageContainer.appendChild(this.image),this.overlay.appendChild(this.imageContainer),this.bindDragEvents()}bindDragEvents(){this.imageContainer&&(this.dragHandler=n=>{if(!this.state.isDragging)return;const i=n.clientX-this.state.dragStartX,r=n.clientY-this.state.dragStartY;this.state.x=this.state.imageStartX+i,this.state.y=this.state.imageStartY+r,this.pendingUpdate||(this.pendingUpdate=!0,this.animationFrameId=requestAnimationFrame(()=>{this.updateImageTransform(),this.pendingUpdate=!1}))},this.mouseUpHandler=()=>{this.state.isDragging&&(this.state.isDragging=!1,this.imageContainer&&(this.imageContainer.style.cursor="grab"),this.overlay&&(this.overlay.style.cursor="grab"),this.cleanupDragEvents())},this.imageContainer.addEventListener("mousedown",n=>{n.preventDefault(),this.state.isDragging=!0,this.state.dragStartX=n.clientX,this.state.dragStartY=n.clientY,this.state.imageStartX=this.state.x,this.state.imageStartY=this.state.y,this.imageContainer&&(this.imageContainer.style.cursor="grabbing"),this.overlay&&(this.overlay.style.cursor="grabbing"),this.dragHandler&&this.mouseUpHandler&&(document.addEventListener("mousemove",this.dragHandler,{passive:!0}),document.addEventListener("mouseup",this.mouseUpHandler,{once:!0}))}))}cleanupDragEvents(){this.dragHandler&&document.removeEventListener("mousemove",this.dragHandler),this.mouseUpHandler&&document.removeEventListener("mouseup",this.mouseUpHandler)}bindEvents(){this.delegationHandler=n=>{if(this.overlay){if(n.type==="keydown"&&this.options.enableKeyboard){const i=n;switch(i.key){case"Escape":this.close();break;case"+":case"=":i.preventDefault(),this.zoomIn();break;case"-":i.preventDefault(),this.zoomOut();break;case"0":i.preventDefault(),this.resetState();break}}else if(n.type==="wheel"){const i=n;i.preventDefault(),i.deltaY<0?this.zoomIn():this.zoomOut()}}},document.addEventListener("keydown",this.delegationHandler),document.addEventListener("wheel",this.delegationHandler,{passive:!1})}zoomIn(){this.state.zoom=Math.min(this.state.zoom+this.options.zoomStep,this.options.maxZoom),this.updateImageTransform()}zoomOut(){this.state.zoom=Math.max(this.state.zoom-this.options.zoomStep,this.options.minZoom),this.updateImageTransform()}resetState(){this.state.zoom=1,this.state.x=0,this.state.y=0,this.updateImageTransform()}updateImageTransform(){this.imageContainer&&(this.imageContainer.style.transform=`
      translate(${this.state.x}px, ${this.state.y}px) 
      scale(${this.state.zoom})
    `)}addStyles(){this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.textContent=`
        .image-viewer-control-btn {
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 14px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 18px;
          transition: background 0.2s;
          user-select: none;
        }
        
        .image-viewer-control-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
        
        .image-viewer-close-btn {
          position: absolute;
          top: 20px;
          right: 30px;
          color: white;
          font-size: 18px;
          cursor: pointer;
          z-index: 10001;
          user-select: none;
          width: 36px;
          height: 34px;
          display: flex;
          border-radius: 50%;
          justify-content: center;
          background: rgba(0, 0, 0, 0.8);
          transition: all 0.2s ease;
          line-height: 34px;
          padding-bottom:2px;
        }
        
        .image-viewer-close-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
      `,document.head.appendChild(this.styleElement))}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}destroy(){this.close(),this.removeStyles()}}const Xq=e=>{const n=e,{insertFragment:i,drop:r,pointerUp:o}=n,a=new Wq({zoomStep:.3,minZoom:.1,maxZoom:5,enableKeyboard:!0});return n.insertFragment=(l,c,h)=>{var d;if((d=l==null?void 0:l.files)!=null&&d.length&&t8(l.files[0].type)){const p=l.files[0];$S(e,p,c,!1);return}i(l,c,h)},n.drop=l=>{var c,h;if((h=(c=l.dataTransfer)==null?void 0:c.files)!=null&&h.length){const d=l.dataTransfer.files[0];if(t8(d.type)){const p=Pe(e,ke(e,l.x,l.y));return $S(e,d,p,!0),!0}}return r(l)},n.pointerUp=l=>{const c=Uo(e);if(c&&!vu(e)&&!Dr(e)&&!of(e)){const h=Pe(e,ke(e,l.x,l.y)),d=Ll(e,h);d&&Ut.isMindElement(e,d)&&Ut.hasImage(d)&&eM(e,d,h)&&c===d&&a.open(d.data.image.url)}o(l)},n},qq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":"","toolbar.arrow.elbow":"","toolbar.arrow.curve":"","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":"","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"","zoom.100":" 100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":"","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"","general.undo":"","general.redo":"","general.menu":"","general.duplicate":"","general.delete":"","general.saved":"","general.autoSave":"","general.lastSaved":"","general.autoSaved":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"","dialog.mermaid.sequence":"","dialog.mermaid.class":"","dialog.mermaid.otherTypes":" Drawnix ","dialog.mermaid.syntax":"Mermaid ","dialog.mermaid.placeholder":" Mermaid ","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":" Markdown ","dialog.markdown.syntax":"Markdown ","dialog.markdown.placeholder":" Markdown ","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":" Mermaid ","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":"","cleanConfirm.description":"?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":"","popupToolbar.fillColor":"","popupToolbar.fontColor":"","popupToolbar.link":"","popupToolbar.stroke":"","popupToolbar.opacity":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","draw.lineText":"","draw.geometryText":"","mind.centralText":"","mind.abstractNodeText":"","markdown.example":`# 
  
  -  bug   
    -  
      -    
  
  -    
    -  
      -    
  
  -   
    -   
      -    
      
  ##      
  
  ### Hello world    
  
  ####       `,"tutorial.title":"Drawnix","tutorial.description":"All-in-one ","tutorial.dataDescription":"","tutorial.appToolbar":"...","tutorial.creationToolbar":"","tutorial.themeDescription":""},Yq={"toolbar.hand":"Hand  H","toolbar.selection":"Selection  V","toolbar.mind":"Mind  M","toolbar.text":"Text  T","toolbar.arrow":"Arrow  A","toolbar.shape":"Shape","toolbar.image":"Image  Cmd+U","toolbar.extraTools":"Extra Tools","toolbar.pen":"Pen  P","toolbar.eraser":"Eraser  E","toolbar.arrow.straight":"Straight Arrow Line","toolbar.arrow.elbow":"Elbow Arrow Line","toolbar.arrow.curve":"Curve Arrow Line","toolbar.shape.rectangle":"Rectangle  R","toolbar.shape.ellipse":"Ellipse  O","toolbar.shape.triangle":"Triangle","toolbar.shape.terminal":"Terminal","toolbar.shape.diamond":"Diamond","toolbar.shape.parallelogram":"Parallelogram","toolbar.shape.roundRectangle":"Round Rectangle","zoom.in":"Zoom In  Cmd++","zoom.out":"Zoom Out  Cmd+-","zoom.fit":"Fit to Screen","zoom.100":"Zoom to 100%","theme.default":"Default","theme.colorful":"Colorful","theme.soft":"Soft","theme.retro":"Retro","theme.dark":"Dark","theme.starry":"Starry","color.none":"Topic Color","color.unknown":"Other Color","color.default":"Basic Black","color.white":"White","color.gray":"Grey","color.deepBlue":"Deep Blue","color.red":"Red","color.green":"Green","color.yellow":"Yellow","color.purple":"Purple","color.orange":"Orange","color.pastelPink":"Paster Pink","color.cyan":"Cyan","color.brown":"Brown","color.forestGreen":"Forest Green","color.lightGray":"Light Grey","general.undo":"Undo","general.redo":"Redo","general.menu":"App Menu","general.duplicate":"Duplicate","general.delete":"Delete","general.saved":"Saved","general.autoSave":"Auto-saved","general.lastSaved":"Last saved time","general.autoSaved":"Auto-saved time","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"Open","menu.saveFile":"Save File","menu.exportImage":"Export Image","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"Clear Board","menu.github":"GitHub","dialog.mermaid.title":"Mermaid to Drawnix","dialog.mermaid.description":"Currently supports","dialog.mermaid.flowchart":"flowcharts","dialog.mermaid.sequence":"sequence diagrams","dialog.mermaid.class":"class diagrams","dialog.mermaid.otherTypes":", and other diagram types (rendered as images).","dialog.mermaid.syntax":"Mermaid Syntax","dialog.mermaid.placeholder":"Write your Mermaid chart definition here","dialog.mermaid.preview":"Preview","dialog.mermaid.insert":"Insert","dialog.markdown.description":"Supports automatic conversion of Markdown syntax to mind map.","dialog.markdown.syntax":"Markdown Syntax","dialog.markdown.placeholder":"Write your Markdown text definition here...","dialog.markdown.preview":"Preview","dialog.markdown.insert":"Insert","dialog.error.loadMermaid":"Failed to load Mermaid library","extraTools.mermaidToDrawnix":"Mermaid to Drawnix","extraTools.markdownToDrawnix":"Markdown to Drawnix","cleanConfirm.title":"Clear Board","cleanConfirm.description":"This will clear the entire board. Do you want to continue?","cleanConfirm.cancel":"Cancel","cleanConfirm.ok":"OK","popupLink.delLink":"Delete Link","popupToolbar.fillColor":"Fill Color","popupToolbar.fontColor":"Font Color","popupToolbar.link":"Insert Link","popupToolbar.stroke":"Stroke","popupToolbar.opacity":"Opacity","textPlaceholders.link":"Link","textPlaceholders.text":"Text","line.source":"Start","line.target":"End","line.arrow":"Arrow","line.none":"None","stroke.solid":"Solid","stroke.dashed":"Dashed","stroke.dotted":"Dotted","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"Text","draw.geometryText":"Text","mind.centralText":"Central Topic","mind.abstractNodeText":"Summary","tutorial.title":"Drawnix","tutorial.description":"All-in-one whiteboard, including mind maps, flowcharts, free drawing, and more","tutorial.dataDescription":"All data is stored locally in your browser","tutorial.appToolbar":"Export, language settings, ...","tutorial.creationToolbar":"Select a tool to start your creation","tutorial.themeDescription":"Switch between light and dark themes"},Kq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"Mind-  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":" ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"  ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":" ","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"-","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","general.saved":"","general.autoSave":"","general.lastSaved":" ","general.autoSaved":" ","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":" ","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"-","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"    (  ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"    Mermaid-","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown  mind-.","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"     Markdown","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"    .   ?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","popupToolbar.opacity":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":"","tutorial.title":"Drawnix","tutorial.description":" : -, -,     ","tutorial.dataDescription":"      ","tutorial.appToolbar":",  , ...","tutorial.creationToolbar":" ,   ","tutorial.themeDescription":"     "},Zq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"   M","toolbar.eraser":"  E","toolbar.text":"  T","toolbar.pen":"  P","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":" ","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":" ","toolbar.shape.roundRectangle":"  ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":" ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":" ","color.unknown":" ","color.default":" ","color.white":"","color.gray":"","color.deepBlue":" ","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":" ","color.cyan":"","color.brown":"","color.forestGreen":"  ()","color.lightGray":" ","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","general.saved":" ","general.autoSave":" ","general.lastSaved":" ","general.autoSaved":"  ","language.switcher":"","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"","menu.saveFile":" ","menu.exportImage":" ","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":" ","menu.github":" ","dialog.mermaid.title":" Mermaid  Drawnix","dialog.mermaid.description":" ","dialog.mermaid.flowchart":" ","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"     ( ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"   ...","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown   .","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"  Markdown ...","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":" Mermaid  Drawnix","extraTools.markdownToDrawnix":" Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"     .   ","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","popupToolbar.opacity":" ","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":" ","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  -          
    -  
      -      

  -          
    -         
      -    

  -      
    -     
      -    
    
  ##         

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":"","tutorial.title":"Drawnix","tutorial.description":"          ","tutorial.dataDescription":"     ","tutorial.appToolbar":"   ...","tutorial.creationToolbar":"   ","tutorial.themeDescription":"    "},Qq={"toolbar.hand":"Ko  H","toolbar.selection":"Chn  V","toolbar.mind":"Mind Map  M","toolbar.text":"Vn bn  T","toolbar.arrow":"Mi tn  A","toolbar.shape":"Hnh dng","toolbar.image":"Hnh nh  Cmd+U","toolbar.extraTools":"Cng c m rng","toolbar.pen":"Bt v  P","toolbar.eraser":"Ty  E","toolbar.arrow.straight":"Mi tn thng","toolbar.arrow.elbow":"Mi tn vung gc","toolbar.arrow.curve":"Mi tn cong","toolbar.shape.rectangle":"Hnh ch nht  R","toolbar.shape.ellipse":"Hnh elip  O","toolbar.shape.triangle":"Hnh tam gic","toolbar.shape.terminal":"Terminal","toolbar.shape.diamond":"Hnh thoi","toolbar.shape.parallelogram":"Hnh bnh hnh","toolbar.shape.roundRectangle":"Hnh ch nht bo trn","zoom.in":"Phng to  Cmd++","zoom.out":"Thu nh  Cmd+-","zoom.fit":"Va mn hnh","zoom.100":"Zoom 100%","theme.default":"Mc nh","theme.colorful":"y mu sc","theme.soft":"Nh nhng","theme.retro":"C in","theme.dark":"Ti","theme.starry":"Bu tri sao","color.none":"Mu ch ","color.unknown":"Mu khc","color.default":"en c bn","color.white":"Trng","color.gray":"Xm","color.deepBlue":"Xanh m","color.red":"","color.green":"Xanh l","color.yellow":"Vng","color.purple":"Tm","color.orange":"Cam","color.pastelPink":"Hng phn","color.cyan":"Xanh l","color.brown":"Nu","color.forestGreen":"Xanh rng","color.lightGray":"Xm nht","general.undo":"Hon tc","general.redo":"Lm li","general.menu":"Menu ng dng","general.duplicate":"Nhn bn","general.delete":"Xa","general.saved":" lu","general.autoSave":"T ng lu","general.lastSaved":"Ln lu cui","general.autoSaved":"Thi gian t ng lu","language.switcher":"Ngn ng","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"M","menu.saveFile":"Lu tp","menu.exportImage":"Xut hnh nh","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"Xa bng","menu.github":"GitHub","dialog.mermaid.title":"Mermaid sang Drawnix","dialog.mermaid.description":"Hin h tr","dialog.mermaid.flowchart":"lu ","dialog.mermaid.sequence":"biu  tun t","dialog.mermaid.class":"biu  lp","dialog.mermaid.otherTypes":", v cc loi biu  khc (hin th di dng hnh nh).","dialog.mermaid.syntax":"C php Mermaid","dialog.mermaid.placeholder":"Vit nh ngha biu  Mermaid ca bn  y...","dialog.mermaid.preview":"Xem trc","dialog.mermaid.insert":"Chn","dialog.markdown.description":"H tr t ng chuyn i c php Markdown sang s  t duy.","dialog.markdown.syntax":"C php Markdown","dialog.markdown.placeholder":"Vit ni dung Markdown ca bn  y...","dialog.markdown.preview":"Xem trc","dialog.markdown.insert":"Chn","dialog.error.loadMermaid":"Khng th ti th vin Mermaid","extraTools.mermaidToDrawnix":"Mermaid sang Drawnix","extraTools.markdownToDrawnix":"Markdown sang Drawnix","cleanConfirm.title":"Xa bng","cleanConfirm.description":"Thao tc ny s xa ton b bng. Bn c mun tip tc khng?","cleanConfirm.cancel":"Hy","cleanConfirm.ok":"ng ","popupLink.delLink":"Xa lin kt","popupToolbar.fillColor":"Mu t","popupToolbar.fontColor":"Mu ch","popupToolbar.link":"Chn lin kt","popupToolbar.stroke":"ng vin","popupToolbar.opacity":" trong sut","textPlaceholders.link":"Lin kt","textPlaceholders.text":"Vn bn","line.source":"Bt u","line.target":"Kt thc","line.arrow":"Mi tn","line.none":"Khng","stroke.solid":"Nt lin","stroke.dashed":"Nt t","stroke.dotted":"Nt chm","markdown.example":`# Ti  bt u
  
    - Hy xem ai  to ra li ny   
      -  
        - Ha ra l ti   
  
    - Bt ng thay, n khng chy c; ti sao vy   
      - Bt ng thay, gi n chy c ri; ti sao vy?  
        -    
  
    - Ci g chy c  
      - th ng chm vo n  
        -    
      
    ## Trai hay gi     
  
    ### Xin cho th gii    
  
    #### Wow, mt lp trnh vin     `,"draw.lineText":"Vn bn","draw.geometryText":"Vn bn","mind.centralText":"Ch  trung tm","mind.abstractNodeText":"Tm tt","tutorial.title":"DPIT Draw MindMap","tutorial.description":"Bng trng tt c trong mt, bao gm s  t duy, lu , v t do v hn th na","tutorial.dataDescription":"Tt c d liu c lu tr cc b trong trnh duyt ca bn","tutorial.appToolbar":"Xut, ci t ngn ng, ...","tutorial.creationToolbar":"Chn mt cng c  bt u sng to","tutorial.themeDescription":"Chuyn i gia ch  sng v ti"},xM={zh:qq,en:Yq,ru:Kq,ar:Zq,vi:Qq},CM=Y.createContext(void 0),Jq=({children:e,defaultLanguage:n="zh"})=>{const[i,r]=Y.useState(()=>localStorage.getItem("language")||n),o=c=>{localStorage.setItem("language",c),r(c)},a=c=>xM[i][c]||c,l=Y.useMemo(()=>({language:i,setLanguage:o,t:a}),[i]);return O.jsx(CM.Provider,{value:l,children:e})},ti=()=>{const e=Y.useContext(CM);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},tY=()=>({t:n=>{const i=localStorage.getItem("language")||"zh";return xM[i][n]||n},language:localStorage.getItem("language")||"zh"}),EM=e=>{const n=e;n.renderImage=(r,o)=>{const a=lv.createRoot(r);a.render(O.jsx(Jb,{...o}));let l={...o};return{destroy:()=>{setTimeout(()=>{a.unmount()},0)},update:h=>{l={...l,...h},a.render(O.jsx(Jb,{...l}))}}};const{t:i}=tY();return n.getI18nValue=r=>r===Lg.lineText?i("draw.lineText"):r===Lg.geometryText?i("draw.geometryText"):r===Fg.mindCentralText?i("mind.centralText"):r===Fg.abstractNodeText?i("mind.abstractNodeText"):null,Xq(n)},Jo=Ae.forwardRef(({children:e,padding:n,className:i,style:r,...o},a)=>O.jsx("div",{className:mn("island",i),style:{"--padding":n,...r},ref:a,...o,children:e})),eY=Y.forwardRef(({children:e,gap:n,align:i,justifyContent:r,className:o,style:a},l)=>O.jsx("div",{className:mn("stack stack_horizontal",o),style:{"--gap":n,alignItems:i,justifyContent:r,...a},ref:l,children:e})),nY=Y.forwardRef(({children:e,gap:n,align:i,justifyContent:r,className:o,style:a},l)=>O.jsx("div",{className:mn("stack stack_vertical",o),style:{"--gap":n,justifyItems:i,justifyContent:r,...a},ref:l,children:e})),Yr={Row:eY,Col:nY};class iY extends DOMException{constructor(n="Request Aborted"){super(n,"AbortError")}}const rY=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,oY=(e,n,{checkForDefaultPrevented:i=!0}={})=>function(o){if(e==null||e(o),!i||!(o!=null&&o.defaultPrevented))return n==null?void 0:n(o)},sY=e=>{const n=e.split(","),i=n[0].match(/:(.*?);/)[1],r=atob(n[1]);let o=r.length;const a=new Uint8Array(o);for(;o--;)a[o]=r.charCodeAt(o);return new Blob([a],{type:i})},SM=(e,n={})=>TL(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...n});function TM(e,n){const i=document.createElement("a"),r=window.URL.createObjectURL(e);i.href=r,i.download=n,document.body.append(i),i.click(),window.URL.revokeObjectURL(r),i.remove()}const GA=(e,n)=>{const i=[];for(let r=0;r<e.length;r+=n)i.push(e.slice(r,r+n));return i},rv=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),jw||RO?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),jn=Ae.forwardRef((e,n)=>{const{id:i}={id:"drawnix"},r=Ae.useRef(null);Ae.useImperativeHandle(n,()=>r.current);const o=`tool-icon_size_${e.size||"medium"}`,[a,l]=Y.useState(!1),c=Y.useRef(!0),h=async p=>{var w;const m="onClick"in e&&((w=e.onClick)==null?void 0:w.call(e,p));if(rY(m))try{l(!0),await m}catch(x){if(x instanceof iY)console.warn(x);else throw x}finally{c.current&&l(!1)}};Y.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);const d=Y.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const p=e.type==="icon"?"button":e.type;return O.jsxs("button",{className:mn("tool-icon_type_button",o,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:p,onClick:h,onPointerDown:m=>{var w;(w=e.onPointerDown)==null||w.call(e,{pointerType:m.pointerType||null,event:m})},onPointerUp:m=>{var w;(w=e.onPointerUp)==null||w.call(e,{pointerType:m.pointerType||null})},ref:r,disabled:a||!!e.disabled,children:[(e.icon||e.label)&&O.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&O.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&O.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&O.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return O.jsxs("label",{className:mn("tool-icon",e.className),title:e.title,onPointerDown:p=>{var m;d.current=p.pointerType||null,(m=e.onPointerDown)==null||m.call(e,{pointerType:p.pointerType||null,event:p})},onPointerUp:p=>{var m;(m=e.onPointerUp)==null||m.call(e,{pointerType:p.pointerType||null}),requestAnimationFrame(()=>{d.current=null})},children:[O.jsx("input",{className:`tool-icon_type_radio ${o}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${i}-${e.id}`,onChange:()=>{var p;(p=e.onChange)==null||p.call(e,{pointerType:d.current})},checked:e.checked,ref:r}),O.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&O.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});jn.displayName="ToolButton";const Ye=e=>e,aY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),lY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),uY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),cY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),fY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),hY=Ye(O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),O.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),O.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]})),dY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),gY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),pY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),mY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),vY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),yY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),wY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),xY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),CY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),EY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),SY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),AM=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:O.jsxs("g",{strokeWidth:"1.5",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),O.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),O.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),O.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),TY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:O.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),AY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:O.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),O.jsx("path",{d:"M15 8h.01"}),O.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),O.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),O.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),O.jsx("path",{d:"M19 16v6"}),O.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),DY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:O.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),bY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:O.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),BY=Ye(O.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:O.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),PY=Ye(O.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:O.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),MY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:O.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[O.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),O.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),RY=Ye(O.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:O.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[O.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),O.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),OY=Ye(O.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:O.jsx("polyline",{points:"20 6 9 17 4 12"})})),LY=Ye(O.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:O.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[O.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),O.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),_Y=Ye(O.jsx("svg",{viewBox:"0 0 24 24",children:O.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:O.jsxs("g",{id:"Group",children:[O.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),O.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),FY=Ye(O.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:O.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[O.jsx("path",{d:"M-18-19h60v40h-60z"}),O.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),kY=Ye(O.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:O.jsx("g",{fill:"currentColor",children:O.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),IY=Ye(O.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:O.jsxs("g",{fill:"currentColor",children:[O.jsx("rect",{rx:"1",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),HY=({currentColor:e})=>O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:O.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[O.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),O.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),NY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:O.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),GY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:O.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),px=Ye(O.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:O.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),zY=Ye(O.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:O.jsxs("g",{strokeWidth:"1.25",children:[O.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),O.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),zA=Ye(O.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),jY=Ye(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),DM=Ye(O.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:O.jsxs("g",{strokeWidth:1.8,fill:"none",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),O.jsx("path",{d:"M12 3l-4 7h8z"}),O.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),O.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),UY=Ye(O.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),$Y=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),VY=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M12.253 4.13h-1.2v-1a2.8 2.8 0 0 0-5.6 0v4a2.8 2.8 0 0 0 2.8 2.8v1.2a4 4 0 0 1-4-4v-4a4 4 0 0 1 8 0v1zm-8 8h1.2v1a2.8 2.8 0 0 0 5.6 0v-4a2.8 2.8 0 0 0-2.8-2.8v-1.2a4 4 0 0 1 4 4v4a4 4 0 0 1-8 0v-1z",transform:"rotate(46 8.253 8.13)"})})})),bM=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",children:O.jsx("path",{d:"M8.44521878,4.21103025 C8.58299906,3.97171622 8.8886944,3.88940684 9.12800843,4.02718711 L15.242109,7.54725833 C15.3194119,7.59176394 15.3834015,7.65613893 15.4274422,7.73370766 C15.5637831,7.97384463 15.4796398,8.27904026 15.2395028,8.41538118 L9.12748155,11.8855614 C9.0176214,11.947936 8.88822223,11.9664118 8.76529593,11.9372749 C8.4965984,11.8735862 8.33040588,11.604134 8.39409456,11.3354364 L9.018,8.69941945 L1.5,8.7 C1.22385763,8.7 1,8.47614237 1,8.2 L1,8 C1,7.72385763 1.22385763,7.5 1.5,7.5 L9.075,7.49941945 L8.39165922,4.57430951 C8.3700078,4.48168206 8.37536432,4.38547957 8.40609313,4.29679626 Z"})})})),BM=Ye(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",children:O.jsx("rect",{x:"1",y:"7.5",width:"14",height:"1.2",rx:".5"})})})),PM={[Li.default]:{strokeColor:gr,fill:"#FFFFFF"},[Li.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[Li.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[Li.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[Li.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[Li.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var Yo=(e=>(e.eraser="eraser",e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(Yo||{});const MM="freehand",js={isFreehand:e=>e.type===MM},RM=[{icon:zA,pointer:Yo.feltTipPen,titleKey:"toolbar.pen"},{icon:hY,pointer:Yo.eraser,titleKey:"toolbar.eraser"}],WY=GA(RM,5),XY=({onPointerUp:e})=>{const{t:n}=ti(),i=qi();return O.jsx(Jo,{padding:1,children:O.jsx(Yr.Col,{gap:1,children:WY.map((r,o)=>O.jsx(Yr.Row,{gap:1,children:r.map((a,l)=>O.jsx(jn,{className:mn({fillable:!1}),selected:i.pointer===a.pointer,type:"icon",size:"small",visible:!0,icon:a.icon,title:n(a.titleKey),"aria-label":n(a.titleKey),onPointerDown:()=>{Vr(i,Xi.dnd),un.updatePointerType(i,a.pointer)},onPointerUp:()=>{Vr(i,Xi.drawing),e(a.pointer)}},l))},o))})})},Bw=[{icon:gY,title:"toolbar.shape.rectangle",pointer:we.rectangle},{icon:mY,title:"toolbar.shape.ellipse",pointer:we.ellipse},{icon:vY,title:"toolbar.shape.triangle",pointer:we.triangle},{icon:pY,title:"toolbar.shape.terminal",pointer:ye.terminal},{icon:yY,title:"toolbar.shape.diamond",pointer:we.diamond},{icon:wY,title:"toolbar.shape.parallelogram",pointer:we.parallelogram},{icon:xY,title:"toolbar.shape.roundRectangle",pointer:we.roundRectangle}],qY=GA(Bw,5),YY=({onPointerUp:e})=>{const n=qi(),{t:i}=ti();return O.jsx(Jo,{padding:1,children:O.jsx(Yr.Col,{gap:1,children:qY.map((r,o)=>O.jsx(Yr.Row,{gap:1,children:r.map((a,l)=>O.jsx(jn,{className:mn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:G.isPointer(n,a.pointer),icon:a.icon,title:i(a.title||"toolbar.shape"),"aria-label":i(a.title||"toolbar.shape"),onPointerDown:()=>{Vr(n,Xi.dnd),un.updatePointerType(n,a.pointer)},onPointerUp:()=>{Vr(n,Xi.drawing),e(a.pointer)}},l))},o))})})},Pw=[{icon:CY,title:"toolbar.arrow.straight",pointer:qn.straight},{icon:EY,title:"toolbar.arrow.elbow",pointer:qn.elbow},{icon:SY,title:"toolbar.arrow.curve",pointer:qn.curve}],KY=({onPointerUp:e})=>{const n=qi(),{t:i}=ti();return O.jsx(Jo,{padding:1,children:O.jsx(Yr.Row,{gap:1,children:Pw.map((r,o)=>O.jsx(jn,{className:mn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:G.isPointer(n,r.pointer),icon:r.icon,title:i(r.title),"aria-label":i(r.title),onPointerDown:()=>{Vr(n,Xi.drawing),un.updatePointerType(n,r.pointer)},onPointerUp:()=>{e(r.pointer)}},o))})})};function sC(){return typeof window<"u"}function xf(e){return OM(e)?(e.nodeName||"").toLowerCase():"#document"}function Ts(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function Fl(e){var n;return(n=(OM(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function OM(e){return sC()?e instanceof Node||e instanceof Ts(e).Node:!1}function _i(e){return sC()?e instanceof Element||e instanceof Ts(e).Element:!1}function hr(e){return sC()?e instanceof HTMLElement||e instanceof Ts(e).HTMLElement:!1}function VS(e){return!sC()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ts(e).ShadowRoot}const ZY=new Set(["inline","contents"]);function Dv(e){const{overflow:n,overflowX:i,overflowY:r,display:o}=Zs(e);return/auto|scroll|overlay|hidden|clip/.test(n+r+i)&&!ZY.has(o)}const QY=new Set(["table","td","th"]);function JY(e){return QY.has(xf(e))}const tK=[":popover-open",":modal"];function aC(e){return tK.some(n=>{try{return e.matches(n)}catch{return!1}})}const eK=["transform","translate","scale","rotate","perspective"],nK=["transform","translate","scale","rotate","perspective","filter"],iK=["paint","layout","strict","content"];function jA(e){const n=lC(),i=_i(e)?Zs(e):e;return eK.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!n&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!n&&(i.filter?i.filter!=="none":!1)||nK.some(r=>(i.willChange||"").includes(r))||iK.some(r=>(i.contain||"").includes(r))}function rK(e){let n=Ou(e);for(;hr(n)&&!ff(n);){if(jA(n))return n;if(aC(n))return null;n=Ou(n)}return null}function lC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oK=new Set(["html","body","#document"]);function ff(e){return oK.has(xf(e))}function Zs(e){return Ts(e).getComputedStyle(e)}function uC(e){return _i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ou(e){if(xf(e)==="html")return e;const n=e.assignedSlot||e.parentNode||VS(e)&&e.host||Fl(e);return VS(n)?n.host:n}function LM(e){const n=Ou(e);return ff(n)?e.ownerDocument?e.ownerDocument.body:e.body:hr(n)&&Dv(n)?n:LM(n)}function ef(e,n,i){var r;n===void 0&&(n=[]),i===void 0&&(i=!0);const o=LM(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),l=Ts(o);if(a){const c=WS(l);return n.concat(l,l.visualViewport||[],Dv(o)?o:[],c&&i?ef(c):[])}return n.concat(o,ef(o,[],i))}function WS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gh(e){let n=e.activeElement;for(;((i=n)==null||(i=i.shadowRoot)==null?void 0:i.activeElement)!=null;){var i;n=n.shadowRoot.activeElement}return n}function ws(e,n){if(!e||!n)return!1;const i=n.getRootNode==null?void 0:n.getRootNode();if(e.contains(n))return!0;if(i&&VS(i)){let r=n;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function _M(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function FM(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(n=>{let{brand:i,version:r}=n;return i+"/"+r}).join(" "):navigator.userAgent}function sK(e){return e.mozInputSource===0&&e.isTrusted?!0:XS()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function aK(e){return uK()?!1:!XS()&&e.width===0&&e.height===0||XS()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function lK(){return/apple/i.test(navigator.vendor)}function XS(){const e=/android/i;return e.test(_M())||e.test(FM())}function uK(){return FM().includes("jsdom/")}function e8(e,n){return["mouse","pen"].includes(e)}function cK(e){return"nativeEvent"in e}function fK(e){return e.matches("html,body")}function Ta(e){return(e==null?void 0:e.ownerDocument)||document}function x3(e,n){if(n==null)return!1;if("composedPath"in e)return e.composedPath().includes(n);const i=e;return i.target!=null&&n.contains(i.target)}function jh(e){return"composedPath"in e?e.composedPath()[0]:e.target}const hK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function kM(e){return hr(e)&&e.matches(hK)}function C3(e){e.preventDefault(),e.stopPropagation()}function dK(e){return e?e.getAttribute("role")==="combobox"&&kM(e):!1}const mx=Math.min,Zh=Math.max,vx=Math.round,sw=Math.floor,Al=e=>({x:e,y:e}),gK={left:"right",right:"left",bottom:"top",top:"bottom"},pK={start:"end",end:"start"};function n8(e,n,i){return Zh(e,mx(n,i))}function cC(e,n){return typeof e=="function"?e(n):e}function ad(e){return e.split("-")[0]}function fC(e){return e.split("-")[1]}function IM(e){return e==="x"?"y":"x"}function HM(e){return e==="y"?"height":"width"}const mK=new Set(["top","bottom"]);function Qc(e){return mK.has(ad(e))?"y":"x"}function NM(e){return IM(Qc(e))}function vK(e,n,i){i===void 0&&(i=!1);const r=fC(e),o=NM(e),a=HM(o);let l=o==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[a]>n.floating[a]&&(l=yx(l)),[l,yx(l)]}function yK(e){const n=yx(e);return[qS(e),n,qS(n)]}function qS(e){return e.replace(/start|end/g,n=>pK[n])}const i8=["left","right"],r8=["right","left"],wK=["top","bottom"],xK=["bottom","top"];function CK(e,n,i){switch(e){case"top":case"bottom":return i?n?r8:i8:n?i8:r8;case"left":case"right":return n?wK:xK;default:return[]}}function EK(e,n,i,r){const o=fC(e);let a=CK(ad(e),i==="start",r);return o&&(a=a.map(l=>l+"-"+o),n&&(a=a.concat(a.map(qS)))),a}function yx(e){return e.replace(/left|right|bottom|top/g,n=>gK[n])}function SK(e){return{top:0,right:0,bottom:0,left:0,...e}}function TK(e){return typeof e!="number"?SK(e):{top:e,right:e,bottom:e,left:e}}function wx(e){const{x:n,y:i,width:r,height:o}=e;return{width:r,height:o,top:i,left:n,right:n+r,bottom:i+o,x:n,y:i}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var AK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],xx=AK.join(","),GM=typeof Element>"u",Hg=GM?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Cx=!GM&&Element.prototype.getRootNode?function(e){var n;return e==null||(n=e.getRootNode)===null||n===void 0?void 0:n.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Ex=function e(n,i){var r;i===void 0&&(i=!0);var o=n==null||(r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"inert"),a=o===""||o==="true",l=a||i&&n&&e(n.parentNode);return l},DK=function(n){var i,r=n==null||(i=n.getAttribute)===null||i===void 0?void 0:i.call(n,"contenteditable");return r===""||r==="true"},bK=function(n,i,r){if(Ex(n))return[];var o=Array.prototype.slice.apply(n.querySelectorAll(xx));return i&&Hg.call(n,xx)&&o.unshift(n),o=o.filter(r),o},BK=function e(n,i,r){for(var o=[],a=Array.from(n);a.length;){var l=a.shift();if(!Ex(l,!1))if(l.tagName==="SLOT"){var c=l.assignedElements(),h=c.length?c:l.children,d=e(h,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:l,candidates:d})}else{var p=Hg.call(l,xx);p&&r.filter(l)&&(i||!n.includes(l))&&o.push(l);var m=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),w=!Ex(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(m&&w){var x=e(m===!0?l.children:m.children,!0,r);r.flatten?o.push.apply(o,x):o.push({scopeParent:l,candidates:x})}else a.unshift.apply(a,l.children)}}return o},zM=function(n){return!isNaN(parseInt(n.getAttribute("tabindex"),10))},jM=function(n){if(!n)throw new Error("No node provided");return n.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(n.tagName)||DK(n))&&!zM(n)?0:n.tabIndex},PK=function(n,i){var r=jM(n);return r<0&&i&&!zM(n)?0:r},MK=function(n,i){return n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex},UM=function(n){return n.tagName==="INPUT"},RK=function(n){return UM(n)&&n.type==="hidden"},OK=function(n){var i=n.tagName==="DETAILS"&&Array.prototype.slice.apply(n.children).some(function(r){return r.tagName==="SUMMARY"});return i},LK=function(n,i){for(var r=0;r<n.length;r++)if(n[r].checked&&n[r].form===i)return n[r]},_K=function(n){if(!n.name)return!0;var i=n.form||Cx(n),r=function(c){return i.querySelectorAll('input[type="radio"][name="'+c+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(n.name));else try{o=r(n.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=LK(o,n.form);return!a||a===n},FK=function(n){return UM(n)&&n.type==="radio"},kK=function(n){return FK(n)&&!_K(n)},IK=function(n){var i,r=n&&Cx(n),o=(i=r)===null||i===void 0?void 0:i.host,a=!1;if(r&&r!==n){var l,c,h;for(a=!!((l=o)!==null&&l!==void 0&&(c=l.ownerDocument)!==null&&c!==void 0&&c.contains(o)||n!=null&&(h=n.ownerDocument)!==null&&h!==void 0&&h.contains(n));!a&&o;){var d,p,m;r=Cx(o),o=(d=r)===null||d===void 0?void 0:d.host,a=!!((p=o)!==null&&p!==void 0&&(m=p.ownerDocument)!==null&&m!==void 0&&m.contains(o))}}return a},o8=function(n){var i=n.getBoundingClientRect(),r=i.width,o=i.height;return r===0&&o===0},HK=function(n,i){var r=i.displayCheck,o=i.getShadowRoot;if(getComputedStyle(n).visibility==="hidden")return!0;var a=Hg.call(n,"details>summary:first-of-type"),l=a?n.parentElement:n;if(Hg.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var c=n;n;){var h=n.parentElement,d=Cx(n);if(h&&!h.shadowRoot&&o(h)===!0)return o8(n);n.assignedSlot?n=n.assignedSlot:!h&&d!==n.ownerDocument?n=d.host:n=h}n=c}if(IK(n))return!n.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return o8(n);return!1},NK=function(n){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(n.tagName))for(var i=n.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var o=i.children.item(r);if(o.tagName==="LEGEND")return Hg.call(i,"fieldset[disabled] *")?!0:!o.contains(n)}return!0}i=i.parentElement}return!1},GK=function(n,i){return!(i.disabled||Ex(i)||RK(i)||HK(i,n)||OK(i)||NK(i))},YS=function(n,i){return!(kK(i)||jM(i)<0||!GK(n,i))},zK=function(n){var i=parseInt(n.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},jK=function e(n){var i=[],r=[];return n.forEach(function(o,a){var l=!!o.scopeParent,c=l?o.scopeParent:o,h=PK(c,l),d=l?e(o.candidates):c;h===0?l?i.push.apply(i,d):i.push(c):r.push({documentOrder:a,tabIndex:h,item:o,isScope:l,content:d})}),r.sort(MK).reduce(function(o,a){return a.isScope?o.push.apply(o,a.content):o.push(a.content),o},[]).concat(i)},hC=function(n,i){i=i||{};var r;return i.getShadowRoot?r=BK([n],i.includeContainer,{filter:YS.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:zK}):r=bK(n,i.includeContainer,YS.bind(null,i)),jK(r)},UK=function(n,i){if(i=i||{},!n)throw new Error("No node provided");return Hg.call(n,xx)===!1?!1:YS(i,n)};function s8(e,n,i){let{reference:r,floating:o}=e;const a=Qc(n),l=NM(n),c=HM(l),h=ad(n),d=a==="y",p=r.x+r.width/2-o.width/2,m=r.y+r.height/2-o.height/2,w=r[c]/2-o[c]/2;let x;switch(h){case"top":x={x:p,y:r.y-o.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:m};break;case"left":x={x:r.x-o.width,y:m};break;default:x={x:r.x,y:r.y}}switch(fC(n)){case"start":x[l]-=w*(i&&d?-1:1);break;case"end":x[l]+=w*(i&&d?-1:1);break}return x}const $K=async(e,n,i)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:l}=i,c=a.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(n));let d=await l.getElementRects({reference:e,floating:n,strategy:o}),{x:p,y:m}=s8(d,r,h),w=r,x={},T=0;for(let D=0;D<c.length;D++){const{name:b,fn:B}=c[D],{x:A,y:I,data:R,reset:k}=await B({x:p,y:m,initialPlacement:r,placement:w,strategy:o,middlewareData:x,rects:d,platform:l,elements:{reference:e,floating:n}});p=A??p,m=I??m,x={...x,[b]:{...x[b],...R}},k&&T<=50&&(T++,typeof k=="object"&&(k.placement&&(w=k.placement),k.rects&&(d=k.rects===!0?await l.getElementRects({reference:e,floating:n,strategy:o}):k.rects),{x:p,y:m}=s8(d,w,h)),D=-1)}return{x:p,y:m,placement:w,strategy:o,middlewareData:x}};async function $M(e,n){var i;n===void 0&&(n={});const{x:r,y:o,platform:a,rects:l,elements:c,strategy:h}=e,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:w=!1,padding:x=0}=cC(n,e),T=TK(x),b=c[w?m==="floating"?"reference":"floating":m],B=wx(await a.getClippingRect({element:(i=await(a.isElement==null?void 0:a.isElement(b)))==null||i?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:p,strategy:h})),A=m==="floating"?{x:r,y:o,width:l.floating.width,height:l.floating.height}:l.reference,I=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),R=await(a.isElement==null?void 0:a.isElement(I))?await(a.getScale==null?void 0:a.getScale(I))||{x:1,y:1}:{x:1,y:1},k=wx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:A,offsetParent:I,strategy:h}):A);return{top:(B.top-k.top+T.top)/R.y,bottom:(k.bottom-B.bottom+T.bottom)/R.y,left:(B.left-k.left+T.left)/R.x,right:(k.right-B.right+T.right)/R.x}}const VK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var i,r;const{placement:o,middlewareData:a,rects:l,initialPlacement:c,platform:h,elements:d}=n,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:w,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:D=!0,...b}=cC(e,n);if((i=a.arrow)!=null&&i.alignmentOffset)return{};const B=ad(o),A=Qc(c),I=ad(c)===c,R=await(h.isRTL==null?void 0:h.isRTL(d.floating)),k=w||(I||!D?[yx(c)]:yK(c)),W=T!=="none";!w&&W&&k.push(...EK(c,D,T,R));const U=[c,...k],nt=await $M(n,b),st=[];let ft=((r=a.flip)==null?void 0:r.overflows)||[];if(p&&st.push(nt[B]),m){const wt=vK(o,l,R);st.push(nt[wt[0]],nt[wt[1]])}if(ft=[...ft,{placement:o,overflows:st}],!st.every(wt=>wt<=0)){var Et,ct;const wt=(((Et=a.flip)==null?void 0:Et.index)||0)+1,V=U[wt];if(V&&(!(m==="alignment"?A!==Qc(V):!1)||ft.every(N=>Qc(N.placement)===A?N.overflows[0]>0:!0)))return{data:{index:wt,overflows:ft},reset:{placement:V}};let P=(ct=ft.filter(_=>_.overflows[0]<=0).sort((_,N)=>_.overflows[1]-N.overflows[1])[0])==null?void 0:ct.placement;if(!P)switch(x){case"bestFit":{var mt;const _=(mt=ft.filter(N=>{if(W){const $=Qc(N.placement);return $===A||$==="y"}return!0}).map(N=>[N.placement,N.overflows.filter($=>$>0).reduce(($,Q)=>$+Q,0)]).sort((N,$)=>N[1]-$[1])[0])==null?void 0:mt[0];_&&(P=_);break}case"initialPlacement":P=c;break}if(o!==P)return{reset:{placement:P}}}return{}}}},WK=new Set(["left","top"]);async function XK(e,n){const{placement:i,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),l=ad(i),c=fC(i),h=Qc(i)==="y",d=WK.has(l)?-1:1,p=a&&h?-1:1,m=cC(n,e);let{mainAxis:w,crossAxis:x,alignmentAxis:T}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof T=="number"&&(x=c==="end"?T*-1:T),h?{x:x*p,y:w*d}:{x:w*d,y:x*p}}const qK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var i,r;const{x:o,y:a,placement:l,middlewareData:c}=n,h=await XK(n,e);return l===((i=c.offset)==null?void 0:i.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+h.x,y:a+h.y,data:{...h,placement:l}}}}},YK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:i,y:r,placement:o}=n,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:b=>{let{x:B,y:A}=b;return{x:B,y:A}}},...h}=cC(e,n),d={x:i,y:r},p=await $M(n,h),m=Qc(ad(o)),w=IM(m);let x=d[w],T=d[m];if(a){const b=w==="y"?"top":"left",B=w==="y"?"bottom":"right",A=x+p[b],I=x-p[B];x=n8(A,x,I)}if(l){const b=m==="y"?"top":"left",B=m==="y"?"bottom":"right",A=T+p[b],I=T-p[B];T=n8(A,T,I)}const D=c.fn({...n,[w]:x,[m]:T});return{...D,data:{x:D.x-i,y:D.y-r,enabled:{[w]:a,[m]:l}}}}}};function VM(e){const n=Zs(e);let i=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const o=hr(e),a=o?e.offsetWidth:i,l=o?e.offsetHeight:r,c=vx(i)!==a||vx(r)!==l;return c&&(i=a,r=l),{width:i,height:r,$:c}}function UA(e){return _i(e)?e:e.contextElement}function Sg(e){const n=UA(e);if(!hr(n))return Al(1);const i=n.getBoundingClientRect(),{width:r,height:o,$:a}=VM(n);let l=(a?vx(i.width):i.width)/r,c=(a?vx(i.height):i.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const KK=Al(0);function WM(e){const n=Ts(e);return!lC()||!n.visualViewport?KK:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function ZK(e,n,i){return n===void 0&&(n=!1),!i||n&&i!==Ts(e)?!1:n}function ld(e,n,i,r){n===void 0&&(n=!1),i===void 0&&(i=!1);const o=e.getBoundingClientRect(),a=UA(e);let l=Al(1);n&&(r?_i(r)&&(l=Sg(r)):l=Sg(e));const c=ZK(a,i,r)?WM(a):Al(0);let h=(o.left+c.x)/l.x,d=(o.top+c.y)/l.y,p=o.width/l.x,m=o.height/l.y;if(a){const w=Ts(a),x=r&&_i(r)?Ts(r):r;let T=w,D=WS(T);for(;D&&r&&x!==T;){const b=Sg(D),B=D.getBoundingClientRect(),A=Zs(D),I=B.left+(D.clientLeft+parseFloat(A.paddingLeft))*b.x,R=B.top+(D.clientTop+parseFloat(A.paddingTop))*b.y;h*=b.x,d*=b.y,p*=b.x,m*=b.y,h+=I,d+=R,T=Ts(D),D=WS(T)}}return wx({width:p,height:m,x:h,y:d})}function dC(e,n){const i=uC(e).scrollLeft;return n?n.left+i:ld(Fl(e)).left+i}function XM(e,n){const i=e.getBoundingClientRect(),r=i.left+n.scrollLeft-dC(e,i),o=i.top+n.scrollTop;return{x:r,y:o}}function QK(e){let{elements:n,rect:i,offsetParent:r,strategy:o}=e;const a=o==="fixed",l=Fl(r),c=n?aC(n.floating):!1;if(r===l||c&&a)return i;let h={scrollLeft:0,scrollTop:0},d=Al(1);const p=Al(0),m=hr(r);if((m||!m&&!a)&&((xf(r)!=="body"||Dv(l))&&(h=uC(r)),hr(r))){const x=ld(r);d=Sg(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const w=l&&!m&&!a?XM(l,h):Al(0);return{width:i.width*d.x,height:i.height*d.y,x:i.x*d.x-h.scrollLeft*d.x+p.x+w.x,y:i.y*d.y-h.scrollTop*d.y+p.y+w.y}}function JK(e){return Array.from(e.getClientRects())}function tZ(e){const n=Fl(e),i=uC(e),r=e.ownerDocument.body,o=Zh(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),a=Zh(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let l=-i.scrollLeft+dC(e);const c=-i.scrollTop;return Zs(r).direction==="rtl"&&(l+=Zh(n.clientWidth,r.clientWidth)-o),{width:o,height:a,x:l,y:c}}const a8=25;function eZ(e,n){const i=Ts(e),r=Fl(e),o=i.visualViewport;let a=r.clientWidth,l=r.clientHeight,c=0,h=0;if(o){a=o.width,l=o.height;const p=lC();(!p||p&&n==="fixed")&&(c=o.offsetLeft,h=o.offsetTop)}const d=dC(r);if(d<=0){const p=r.ownerDocument,m=p.body,w=getComputedStyle(m),x=p.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,T=Math.abs(r.clientWidth-m.clientWidth-x);T<=a8&&(a-=T)}else d<=a8&&(a+=d);return{width:a,height:l,x:c,y:h}}const nZ=new Set(["absolute","fixed"]);function iZ(e,n){const i=ld(e,!0,n==="fixed"),r=i.top+e.clientTop,o=i.left+e.clientLeft,a=hr(e)?Sg(e):Al(1),l=e.clientWidth*a.x,c=e.clientHeight*a.y,h=o*a.x,d=r*a.y;return{width:l,height:c,x:h,y:d}}function l8(e,n,i){let r;if(n==="viewport")r=eZ(e,i);else if(n==="document")r=tZ(Fl(e));else if(_i(n))r=iZ(n,i);else{const o=WM(e);r={x:n.x-o.x,y:n.y-o.y,width:n.width,height:n.height}}return wx(r)}function qM(e,n){const i=Ou(e);return i===n||!_i(i)||ff(i)?!1:Zs(i).position==="fixed"||qM(i,n)}function rZ(e,n){const i=n.get(e);if(i)return i;let r=ef(e,[],!1).filter(c=>_i(c)&&xf(c)!=="body"),o=null;const a=Zs(e).position==="fixed";let l=a?Ou(e):e;for(;_i(l)&&!ff(l);){const c=Zs(l),h=jA(l);!h&&c.position==="fixed"&&(o=null),(a?!h&&!o:!h&&c.position==="static"&&!!o&&nZ.has(o.position)||Dv(l)&&!h&&qM(e,l))?r=r.filter(p=>p!==l):o=c,l=Ou(l)}return n.set(e,r),r}function oZ(e){let{element:n,boundary:i,rootBoundary:r,strategy:o}=e;const l=[...i==="clippingAncestors"?aC(n)?[]:rZ(n,this._c):[].concat(i),r],c=l[0],h=l.reduce((d,p)=>{const m=l8(n,p,o);return d.top=Zh(m.top,d.top),d.right=mx(m.right,d.right),d.bottom=mx(m.bottom,d.bottom),d.left=Zh(m.left,d.left),d},l8(n,c,o));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function sZ(e){const{width:n,height:i}=VM(e);return{width:n,height:i}}function aZ(e,n,i){const r=hr(n),o=Fl(n),a=i==="fixed",l=ld(e,!0,a,n);let c={scrollLeft:0,scrollTop:0};const h=Al(0);function d(){h.x=dC(o)}if(r||!r&&!a)if((xf(n)!=="body"||Dv(o))&&(c=uC(n)),r){const x=ld(n,!0,a,n);h.x=x.x+n.clientLeft,h.y=x.y+n.clientTop}else o&&d();a&&!r&&o&&d();const p=o&&!r&&!a?XM(o,c):Al(0),m=l.left+c.scrollLeft-h.x-p.x,w=l.top+c.scrollTop-h.y-p.y;return{x:m,y:w,width:l.width,height:l.height}}function E3(e){return Zs(e).position==="static"}function u8(e,n){if(!hr(e)||Zs(e).position==="fixed")return null;if(n)return n(e);let i=e.offsetParent;return Fl(e)===i&&(i=i.ownerDocument.body),i}function YM(e,n){const i=Ts(e);if(aC(e))return i;if(!hr(e)){let o=Ou(e);for(;o&&!ff(o);){if(_i(o)&&!E3(o))return o;o=Ou(o)}return i}let r=u8(e,n);for(;r&&JY(r)&&E3(r);)r=u8(r,n);return r&&ff(r)&&E3(r)&&!jA(r)?i:r||rK(e)||i}const lZ=async function(e){const n=this.getOffsetParent||YM,i=this.getDimensions,r=await i(e.floating);return{reference:aZ(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uZ(e){return Zs(e).direction==="rtl"}const cZ={convertOffsetParentRelativeRectToViewportRelativeRect:QK,getDocumentElement:Fl,getClippingRect:oZ,getOffsetParent:YM,getElementRects:lZ,getClientRects:JK,getDimensions:sZ,getScale:Sg,isElement:_i,isRTL:uZ};function KM(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function fZ(e,n){let i=null,r;const o=Fl(e);function a(){var c;clearTimeout(r),(c=i)==null||c.disconnect(),i=null}function l(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const d=e.getBoundingClientRect(),{left:p,top:m,width:w,height:x}=d;if(c||n(),!w||!x)return;const T=sw(m),D=sw(o.clientWidth-(p+w)),b=sw(o.clientHeight-(m+x)),B=sw(p),I={rootMargin:-T+"px "+-D+"px "+-b+"px "+-B+"px",threshold:Zh(0,mx(1,h))||1};let R=!0;function k(W){const U=W[0].intersectionRatio;if(U!==h){if(!R)return l();U?l(!1,U):r=setTimeout(()=>{l(!1,1e-7)},1e3)}U===1&&!KM(d,e.getBoundingClientRect())&&l(),R=!1}try{i=new IntersectionObserver(k,{...I,root:o.ownerDocument})}catch{i=new IntersectionObserver(k,I)}i.observe(e)}return l(!0),a}function hZ(e,n,i,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,d=UA(e),p=o||a?[...d?ef(d):[],...ef(n)]:[];p.forEach(B=>{o&&B.addEventListener("scroll",i,{passive:!0}),a&&B.addEventListener("resize",i)});const m=d&&c?fZ(d,i):null;let w=-1,x=null;l&&(x=new ResizeObserver(B=>{let[A]=B;A&&A.target===d&&x&&(x.unobserve(n),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var I;(I=x)==null||I.observe(n)})),i()}),d&&!h&&x.observe(d),x.observe(n));let T,D=h?ld(e):null;h&&b();function b(){const B=ld(e);D&&!KM(D,B)&&i(),D=B,T=requestAnimationFrame(b)}return i(),()=>{var B;p.forEach(A=>{o&&A.removeEventListener("scroll",i),a&&A.removeEventListener("resize",i)}),m==null||m(),(B=x)==null||B.disconnect(),x=null,h&&cancelAnimationFrame(T)}}const dZ=qK,gZ=YK,pZ=VK,mZ=(e,n,i)=>{const r=new Map,o={platform:cZ,...i},a={...o.platform,_c:r};return $K(e,n,{...o,platform:a})};var vZ=typeof document<"u",yZ=function(){},Mw=vZ?Y.useLayoutEffect:yZ;function Sx(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let i,r,o;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==n.length)return!1;for(r=i;r--!==0;)if(!Sx(e[r],n[r]))return!1;return!0}if(o=Object.keys(e),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!{}.hasOwnProperty.call(n,o[r]))return!1;for(r=i;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!Sx(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}function ZM(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function c8(e,n){const i=ZM(e);return Math.round(n*i)/i}function S3(e){const n=Y.useRef(e);return Mw(()=>{n.current=e}),n}function wZ(e){e===void 0&&(e={});const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:h,open:d}=e,[p,m]=Y.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[w,x]=Y.useState(r);Sx(w,r)||x(r);const[T,D]=Y.useState(null),[b,B]=Y.useState(null),A=Y.useCallback(N=>{N!==W.current&&(W.current=N,D(N))},[]),I=Y.useCallback(N=>{N!==U.current&&(U.current=N,B(N))},[]),R=a||T,k=l||b,W=Y.useRef(null),U=Y.useRef(null),nt=Y.useRef(p),st=h!=null,ft=S3(h),Et=S3(o),ct=S3(d),mt=Y.useCallback(()=>{if(!W.current||!U.current)return;const N={placement:n,strategy:i,middleware:w};Et.current&&(N.platform=Et.current),mZ(W.current,U.current,N).then($=>{const Q={...$,isPositioned:ct.current!==!1};wt.current&&!Sx(nt.current,Q)&&(nt.current=Q,$T.flushSync(()=>{m(Q)}))})},[w,n,i,Et,ct]);Mw(()=>{d===!1&&nt.current.isPositioned&&(nt.current.isPositioned=!1,m(N=>({...N,isPositioned:!1})))},[d]);const wt=Y.useRef(!1);Mw(()=>(wt.current=!0,()=>{wt.current=!1}),[]),Mw(()=>{if(R&&(W.current=R),k&&(U.current=k),R&&k){if(ft.current)return ft.current(R,k,mt);mt()}},[R,k,mt,ft,st]);const V=Y.useMemo(()=>({reference:W,floating:U,setReference:A,setFloating:I}),[A,I]),P=Y.useMemo(()=>({reference:R,floating:k}),[R,k]),_=Y.useMemo(()=>{const N={position:i,left:0,top:0};if(!P.floating)return N;const $=c8(P.floating,p.x),Q=c8(P.floating,p.y);return c?{...N,transform:"translate("+$+"px, "+Q+"px)",...ZM(P.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:$,top:Q}},[i,c,P.floating,p.x,p.y]);return Y.useMemo(()=>({...p,update:mt,refs:V,elements:P,floatingStyles:_}),[p,mt,V,P,_])}const $A=(e,n)=>({...dZ(e),options:[e,n]}),xZ=(e,n)=>({...gZ(e),options:[e,n]}),VA=(e,n)=>({...pZ(e),options:[e,n]});function gC(e){return Y.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})},e)}const QM={...iR},CZ=QM.useInsertionEffect,EZ=CZ||(e=>e());function Wc(e){const n=Y.useRef(()=>{});return EZ(()=>{n.current=e}),Y.useCallback(function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n.current==null?void 0:n.current(...r)},[])}var Ss=typeof document<"u"?Y.useLayoutEffect:Y.useEffect;function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ov.apply(this,arguments)}let f8=!1,SZ=0;const h8=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+SZ++;function TZ(){const[e,n]=Y.useState(()=>f8?h8():void 0);return Ss(()=>{e==null&&n(h8())},[]),Y.useEffect(()=>{f8=!0},[]),e}const AZ=QM.useId,bv=AZ||TZ;function DZ(){const e=new Map;return{emit(n,i){var r;(r=e.get(n))==null||r.forEach(o=>o(i))},on(n,i){e.set(n,[...e.get(n)||[],i])},off(n,i){var r;e.set(n,((r=e.get(n))==null?void 0:r.filter(o=>o!==i))||[])}}}const bZ=Y.createContext(null),BZ=Y.createContext(null),JM=()=>{var e;return((e=Y.useContext(bZ))==null?void 0:e.id)||null},WA=()=>Y.useContext(BZ);function sv(e){return"data-floating-ui-"+e}function T3(e){const n=Y.useRef(e);return Ss(()=>{n.current=e}),n}let d8=0;function rg(e,n){n===void 0&&(n={});const{preventScroll:i=!1,cancelPrevious:r=!0,sync:o=!1}=n;r&&cancelAnimationFrame(d8);const a=()=>e==null?void 0:e.focus({preventScroll:i});o?a():d8=requestAnimationFrame(a)}function PZ(e,n){var i;let r=[],o=(i=e.find(a=>a.id===n))==null?void 0:i.parentId;for(;o;){const a=e.find(l=>l.id===o);o=a==null?void 0:a.parentId,a&&(r=r.concat(a))}return r}function Dm(e,n){let i=e.filter(o=>{var a;return o.parentId===n&&((a=o.context)==null?void 0:a.open)}),r=i;for(;r.length;)r=e.filter(o=>{var a;return(a=r)==null?void 0:a.some(l=>{var c;return o.parentId===l.id&&((c=o.context)==null?void 0:c.open)})}),i=i.concat(r);return i}let og=new WeakMap,aw=new WeakSet,lw={},A3=0;const MZ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,t9=e=>e&&(e.host||t9(e.parentNode)),RZ=(e,n)=>n.map(i=>{if(e.contains(i))return i;const r=t9(i);return e.contains(r)?r:null}).filter(i=>i!=null);function OZ(e,n,i,r){const o="data-floating-ui-inert",a=r?"inert":i?"aria-hidden":null,l=RZ(n,e),c=new Set,h=new Set(l),d=[];lw[o]||(lw[o]=new WeakMap);const p=lw[o];l.forEach(m),w(n),c.clear();function m(x){!x||c.has(x)||(c.add(x),x.parentNode&&m(x.parentNode))}function w(x){!x||h.has(x)||[].forEach.call(x.children,T=>{if(xf(T)!=="script")if(c.has(T))w(T);else{const D=a?T.getAttribute(a):null,b=D!==null&&D!=="false",B=(og.get(T)||0)+1,A=(p.get(T)||0)+1;og.set(T,B),p.set(T,A),d.push(T),B===1&&b&&aw.add(T),A===1&&T.setAttribute(o,""),!b&&a&&T.setAttribute(a,"true")}})}return A3++,()=>{d.forEach(x=>{const T=(og.get(x)||0)-1,D=(p.get(x)||0)-1;og.set(x,T),p.set(x,D),T||(!aw.has(x)&&a&&x.removeAttribute(a),aw.delete(x)),D||x.removeAttribute(o)}),A3--,A3||(og=new WeakMap,og=new WeakMap,aw=new WeakSet,lw={})}}function g8(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=!1);const r=Ta(e[0]).body;return OZ(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,n,i)}const av=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function e9(e,n){const i=hC(e,av());n==="prev"&&i.reverse();const r=i.indexOf(Gh(Ta(e)));return i.slice(r+1)[0]}function n9(){return e9(document.body,"next")}function i9(){return e9(document.body,"prev")}function bm(e,n){const i=n||e.currentTarget,r=e.relatedTarget;return!r||!ws(i,r)}function LZ(e){hC(e,av()).forEach(i=>{i.dataset.tabindex=i.getAttribute("tabindex")||"",i.setAttribute("tabindex","-1")})}function p8(e){e.querySelectorAll("[data-tabindex]").forEach(i=>{const r=i.dataset.tabindex;delete i.dataset.tabindex,r?i.setAttribute("tabindex",r):i.removeAttribute("tabindex")})}const pC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let _Z;function m8(e){e.key==="Tab"&&(e.target,clearTimeout(_Z))}const Tx=Y.forwardRef(function(n,i){const[r,o]=Y.useState();Ss(()=>(lK()&&o("button"),document.addEventListener("keydown",m8),()=>{document.removeEventListener("keydown",m8)}),[]);const a={ref:i,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[sv("focus-guard")]:"",style:pC};return Y.createElement("span",ov({},n,a))}),r9=Y.createContext(null),v8=sv("portal");function FZ(e){e===void 0&&(e={});const{id:n,root:i}=e,r=bv(),o=s9(),[a,l]=Y.useState(null),c=Y.useRef(null);return Ss(()=>()=>{a==null||a.remove(),queueMicrotask(()=>{c.current=null})},[a]),Ss(()=>{if(!r||c.current)return;const h=n?document.getElementById(n):null;if(!h)return;const d=document.createElement("div");d.id=r,d.setAttribute(v8,""),h.appendChild(d),c.current=d,l(d)},[n,r]),Ss(()=>{if(i===null||!r||c.current)return;let h=i||(o==null?void 0:o.portalNode);h&&!_i(h)&&(h=h.current),h=h||document.body;let d=null;n&&(d=document.createElement("div"),d.id=n,h.appendChild(d));const p=document.createElement("div");p.id=r,p.setAttribute(v8,""),h=d||h,h.appendChild(p),c.current=p,l(p)},[n,i,r,o]),a}function o9(e){const{children:n,id:i,root:r,preserveTabOrder:o=!0}=e,a=FZ({id:i,root:r}),[l,c]=Y.useState(null),h=Y.useRef(null),d=Y.useRef(null),p=Y.useRef(null),m=Y.useRef(null),w=l==null?void 0:l.modal,x=l==null?void 0:l.open,T=!!l&&!l.modal&&l.open&&o&&!!(r||a);return Y.useEffect(()=>{if(!a||!o||w)return;function D(b){a&&bm(b)&&(b.type==="focusin"?p8:LZ)(a)}return a.addEventListener("focusin",D,!0),a.addEventListener("focusout",D,!0),()=>{a.removeEventListener("focusin",D,!0),a.removeEventListener("focusout",D,!0)}},[a,o,w]),Y.useEffect(()=>{a&&(x||p8(a))},[x,a]),Y.createElement(r9.Provider,{value:Y.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:h,afterOutsideRef:d,beforeInsideRef:p,afterInsideRef:m,portalNode:a,setFocusManagerState:c}),[o,a])},T&&a&&Y.createElement(Tx,{"data-type":"outside",ref:h,onFocus:D=>{if(bm(D,a)){var b;(b=p.current)==null||b.focus()}else{const B=i9()||(l==null?void 0:l.refs.domReference.current);B==null||B.focus()}}}),T&&a&&Y.createElement("span",{"aria-owns":a.id,style:pC}),a&&$T.createPortal(n,a),T&&a&&Y.createElement(Tx,{"data-type":"outside",ref:d,onFocus:D=>{if(bm(D,a)){var b;(b=m.current)==null||b.focus()}else{const B=n9()||(l==null?void 0:l.refs.domReference.current);B==null||B.focus(),l!=null&&l.closeOnFocusOut&&(l==null||l.onOpenChange(!1,D.nativeEvent,"focus-out"))}}}))}const s9=()=>Y.useContext(r9),KS="data-floating-ui-focusable";function kZ(e){return e?e.hasAttribute(KS)?e:e.querySelector("["+KS+"]")||e:null}const IZ=20;let zh=[];function D3(e){zh=zh.filter(i=>i.isConnected);let n=e;if(!(!n||xf(n)==="body")){if(!UK(n,av())){const i=hC(n,av())[0];i&&(n=i)}zh.push(n),zh.length>IZ&&(zh=zh.slice(-20))}}function y8(){return zh.slice().reverse().find(e=>e.isConnected)}const HZ=Y.forwardRef(function(n,i){return Y.createElement("button",ov({},n,{type:"button",ref:i,tabIndex:-1,style:pC}))});function a9(e){const{context:n,children:i,disabled:r=!1,order:o=["content"],guards:a=!0,initialFocus:l=0,returnFocus:c=!0,restoreFocus:h=!1,modal:d=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:m=!0}=e,{open:w,refs:x,nodeId:T,onOpenChange:D,events:b,dataRef:B,floatingId:A,elements:{domReference:I,floating:R}}=n,k=typeof l=="number"&&l<0,W=dK(I)&&k,U=MZ()?a:!0,nt=T3(o),st=T3(l),ft=T3(c),Et=WA(),ct=s9(),mt=Y.useRef(null),wt=Y.useRef(null),V=Y.useRef(!1),P=Y.useRef(!1),_=Y.useRef(-1),N=ct!=null,$=kZ(R),Q=Wc(function(it){return it===void 0&&(it=$),it?hC(it,av()):[]}),F=Wc(it=>{const xt=Q(it);return nt.current.map(gt=>I&&gt==="reference"?I:$&&gt==="floating"?$:xt).filter(Boolean).flat()});Y.useEffect(()=>{if(r||!d)return;function it(gt){if(gt.key==="Tab"){ws($,Gh(Ta($)))&&Q().length===0&&!W&&C3(gt);const Lt=F(),$t=jh(gt);nt.current[0]==="reference"&&$t===I&&(C3(gt),gt.shiftKey?rg(Lt[Lt.length-1]):rg(Lt[1])),nt.current[1]==="floating"&&$t===$&&gt.shiftKey&&(C3(gt),rg(Lt[0]))}}const xt=Ta($);return xt.addEventListener("keydown",it),()=>{xt.removeEventListener("keydown",it)}},[r,I,$,d,nt,W,Q,F]),Y.useEffect(()=>{if(r||!R)return;function it(xt){const gt=jh(xt),$t=Q().indexOf(gt);$t!==-1&&(_.current=$t)}return R.addEventListener("focusin",it),()=>{R.removeEventListener("focusin",it)}},[r,R,Q]),Y.useEffect(()=>{if(r||!m)return;function it(){P.current=!0,setTimeout(()=>{P.current=!1})}function xt(gt){const Lt=gt.relatedTarget;queueMicrotask(()=>{const $t=!(ws(I,Lt)||ws(R,Lt)||ws(Lt,R)||ws(ct==null?void 0:ct.portalNode,Lt)||Lt!=null&&Lt.hasAttribute(sv("focus-guard"))||Et&&(Dm(Et.nodesRef.current,T).find(ot=>{var Pt,Rt;return ws((Pt=ot.context)==null?void 0:Pt.elements.floating,Lt)||ws((Rt=ot.context)==null?void 0:Rt.elements.domReference,Lt)})||PZ(Et.nodesRef.current,T).find(ot=>{var Pt,Rt;return((Pt=ot.context)==null?void 0:Pt.elements.floating)===Lt||((Rt=ot.context)==null?void 0:Rt.elements.domReference)===Lt})));if(h&&$t&&Gh(Ta($))===Ta($).body){hr($)&&$.focus();const ot=_.current,Pt=Q(),Rt=Pt[ot]||Pt[Pt.length-1]||$;hr(Rt)&&Rt.focus()}(W||!d)&&Lt&&$t&&!P.current&&Lt!==y8()&&(V.current=!0,D(!1,gt,"focus-out"))})}if(R&&hr(I))return I.addEventListener("focusout",xt),I.addEventListener("pointerdown",it),R.addEventListener("focusout",xt),()=>{I.removeEventListener("focusout",xt),I.removeEventListener("pointerdown",it),R.removeEventListener("focusout",xt)}},[r,I,R,$,d,T,Et,ct,D,m,h,Q,W]),Y.useEffect(()=>{var it;if(r)return;const xt=Array.from((ct==null||(it=ct.portalNode)==null?void 0:it.querySelectorAll("["+sv("portal")+"]"))||[]);if(R){const gt=[R,...xt,mt.current,wt.current,nt.current.includes("reference")||W?I:null].filter($t=>$t!=null),Lt=d||W?g8(gt,U,!U):g8(gt);return()=>{Lt()}}},[r,I,R,d,nt,ct,W,U]),Ss(()=>{if(r||!hr($))return;const it=Ta($),xt=Gh(it);queueMicrotask(()=>{const gt=F($),Lt=st.current,$t=(typeof Lt=="number"?gt[Lt]:Lt.current)||$,ot=ws($,xt);!k&&!ot&&w&&rg($t,{preventScroll:$t===$})})},[r,w,$,k,F,st]),Ss(()=>{if(r||!$)return;let it=!1;const xt=Ta($),gt=Gh(xt);let $t=B.current.openEvent;D3(gt);function ot(It){let{open:he,reason:Nt,event:ge,nested:ae}=It;he&&($t=ge),Nt==="escape-key"&&x.domReference.current&&D3(x.domReference.current),Nt==="hover"&&ge.type==="mouseleave"&&(V.current=!0),Nt==="outside-press"&&(ae?(V.current=!1,it=!0):V.current=!(sK(ge)||aK(ge)))}b.on("openchange",ot);const Pt=xt.createElement("span");Pt.setAttribute("tabindex","-1"),Pt.setAttribute("aria-hidden","true"),Object.assign(Pt.style,pC),N&&I&&I.insertAdjacentElement("afterend",Pt);function Rt(){return typeof ft.current=="boolean"?y8()||Pt:ft.current.current||Pt}return()=>{b.off("openchange",ot);const It=Gh(xt),he=ws(R,It)||Et&&Dm(Et.nodesRef.current,T).some(ae=>{var ee;return ws((ee=ae.context)==null?void 0:ee.elements.floating,It)});(he||$t&&["click","mousedown"].includes($t.type))&&x.domReference.current&&D3(x.domReference.current);const ge=Rt();queueMicrotask(()=>{ft.current&&!V.current&&hr(ge)&&(!(ge!==It&&It!==xt.body)||he)&&ge.focus({preventScroll:it}),Pt.remove()})}},[r,R,$,ft,B,x,b,Et,T,N,I]),Y.useEffect(()=>{queueMicrotask(()=>{V.current=!1})},[r]),Ss(()=>{if(!r&&ct)return ct.setFocusManagerState({modal:d,closeOnFocusOut:m,open:w,onOpenChange:D,refs:x}),()=>{ct.setFocusManagerState(null)}},[r,ct,d,w,D,x,m]),Ss(()=>{if(r||!$||typeof MutationObserver!="function"||k)return;const it=()=>{const gt=$.getAttribute("tabindex"),Lt=Q(),$t=Gh(Ta(R)),ot=Lt.indexOf($t);ot!==-1&&(_.current=ot),nt.current.includes("floating")||$t!==x.domReference.current&&Lt.length===0?gt!=="0"&&$.setAttribute("tabindex","0"):gt!=="-1"&&$.setAttribute("tabindex","-1")};it();const xt=new MutationObserver(it);return xt.observe($,{childList:!0,subtree:!0,attributes:!0}),()=>{xt.disconnect()}},[r,R,$,x,nt,Q,k]);function J(it){return r||!p||!d?null:Y.createElement(HZ,{ref:it==="start"?mt:wt,onClick:xt=>D(!1,xt.nativeEvent)},typeof p=="string"?p:"Dismiss")}const tt=!r&&U&&(d?!W:!0)&&(N||d);return Y.createElement(Y.Fragment,null,tt&&Y.createElement(Tx,{"data-type":"inside",ref:ct==null?void 0:ct.beforeInsideRef,onFocus:it=>{if(d){const gt=F();rg(o[0]==="reference"?gt[0]:gt[gt.length-1])}else if(ct!=null&&ct.preserveTabOrder&&ct.portalNode)if(V.current=!1,bm(it,ct.portalNode)){const gt=n9()||I;gt==null||gt.focus()}else{var xt;(xt=ct.beforeOutsideRef.current)==null||xt.focus()}}}),!W&&J("start"),i,J("end"),tt&&Y.createElement(Tx,{"data-type":"inside",ref:ct==null?void 0:ct.afterInsideRef,onFocus:it=>{if(d)rg(F()[0]);else if(ct!=null&&ct.preserveTabOrder&&ct.portalNode)if(m&&(V.current=!0),bm(it,ct.portalNode)){const gt=i9()||I;gt==null||gt.focus()}else{var xt;(xt=ct.afterOutsideRef.current)==null||xt.focus()}}}))}let uw=0;function NZ(){const e=/iP(hone|ad|od)|iOS/.test(_M()),n=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth,a=n.left?parseFloat(n.left):window.scrollX,l=n.top?parseFloat(n.top):window.scrollY;if(n.overflow="hidden",o&&(n[r]=o+"px"),e){var c,h;const d=((c=window.visualViewport)==null?void 0:c.offsetLeft)||0,p=((h=window.visualViewport)==null?void 0:h.offsetTop)||0;Object.assign(n,{position:"fixed",top:-(l-Math.floor(p))+"px",left:-(a-Math.floor(d))+"px",right:"0"})}return()=>{Object.assign(n,{overflow:"",[r]:""}),e&&(Object.assign(n,{position:"",top:"",left:"",right:""}),window.scrollTo(a,l))}}let w8=()=>{};const GZ=Y.forwardRef(function(n,i){const{lockScroll:r=!1,...o}=n;return Ss(()=>{if(r)return uw++,uw===1&&(w8=NZ()),()=>{uw--,uw===0&&w8()}},[r]),Y.createElement("div",ov({ref:i},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))});function x8(e){return hr(e.target)&&e.target.tagName==="BUTTON"}function C8(e){return kM(e)}function l9(e,n){n===void 0&&(n={});const{open:i,onOpenChange:r,dataRef:o,elements:{domReference:a}}=e,{enabled:l=!0,event:c="click",toggle:h=!0,ignoreMouse:d=!1,keyboardHandlers:p=!0,stickIfOpen:m=!0}=n,w=Y.useRef(),x=Y.useRef(!1),T=Y.useMemo(()=>({onPointerDown(D){w.current=D.pointerType},onMouseDown(D){const b=w.current;D.button===0&&c!=="click"&&(e8(b)&&d||(i&&h&&(!(o.current.openEvent&&m)||o.current.openEvent.type==="mousedown")?r(!1,D.nativeEvent,"click"):(D.preventDefault(),r(!0,D.nativeEvent,"click"))))},onClick(D){const b=w.current;if(c==="mousedown"&&w.current){w.current=void 0;return}e8(b)&&d||(i&&h&&(!(o.current.openEvent&&m)||o.current.openEvent.type==="click")?r(!1,D.nativeEvent,"click"):r(!0,D.nativeEvent,"click"))},onKeyDown(D){w.current=void 0,!(D.defaultPrevented||!p||x8(D))&&(D.key===" "&&!C8(a)&&(D.preventDefault(),x.current=!0),D.key==="Enter"&&r(!(i&&h),D.nativeEvent,"click"))},onKeyUp(D){D.defaultPrevented||!p||x8(D)||C8(a)||D.key===" "&&x.current&&(x.current=!1,r(!(i&&h),D.nativeEvent,"click"))}}),[o,a,c,d,p,r,i,m,h]);return Y.useMemo(()=>l?{reference:T}:{},[l,T])}const zZ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},jZ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},E8=e=>{var n,i;return{escapeKey:typeof e=="boolean"?e:(n=e==null?void 0:e.escapeKey)!=null?n:!1,outsidePress:typeof e=="boolean"?e:(i=e==null?void 0:e.outsidePress)!=null?i:!0}};function u9(e,n){n===void 0&&(n={});const{open:i,onOpenChange:r,elements:o,dataRef:a}=e,{enabled:l=!0,escapeKey:c=!0,outsidePress:h=!0,outsidePressEvent:d="pointerdown",referencePress:p=!1,referencePressEvent:m="pointerdown",ancestorScroll:w=!1,bubbles:x,capture:T}=n,D=WA(),b=Wc(typeof h=="function"?h:()=>!1),B=typeof h=="function"?b:h,A=Y.useRef(!1),I=Y.useRef(!1),{escapeKey:R,outsidePress:k}=E8(x),{escapeKey:W,outsidePress:U}=E8(T),nt=Y.useRef(!1),st=Wc(V=>{var P;if(!i||!l||!c||V.key!=="Escape"||nt.current)return;const _=(P=a.current.floatingContext)==null?void 0:P.nodeId,N=D?Dm(D.nodesRef.current,_):[];if(!R&&(V.stopPropagation(),N.length>0)){let $=!0;if(N.forEach(Q=>{var F;if((F=Q.context)!=null&&F.open&&!Q.context.dataRef.current.__escapeKeyBubbles){$=!1;return}}),!$)return}r(!1,cK(V)?V.nativeEvent:V,"escape-key")}),ft=Wc(V=>{var P;const _=()=>{var N;st(V),(N=jh(V))==null||N.removeEventListener("keydown",_)};(P=jh(V))==null||P.addEventListener("keydown",_)}),Et=Wc(V=>{var P;const _=A.current;A.current=!1;const N=I.current;if(I.current=!1,d==="click"&&N||_||typeof B=="function"&&!B(V))return;const $=jh(V),Q="["+sv("inert")+"]",F=Ta(o.floating).querySelectorAll(Q);let J=_i($)?$:null;for(;J&&!ff(J);){const gt=Ou(J);if(ff(gt)||!_i(gt))break;J=gt}if(F.length&&_i($)&&!fK($)&&!ws($,o.floating)&&Array.from(F).every(gt=>!ws(J,gt)))return;if(hr($)&&wt){const gt=$.clientWidth>0&&$.scrollWidth>$.clientWidth,Lt=$.clientHeight>0&&$.scrollHeight>$.clientHeight;let $t=Lt&&V.offsetX>$.clientWidth;if(Lt&&Zs($).direction==="rtl"&&($t=V.offsetX<=$.offsetWidth-$.clientWidth),$t||gt&&V.offsetY>$.clientHeight)return}const tt=(P=a.current.floatingContext)==null?void 0:P.nodeId,it=D&&Dm(D.nodesRef.current,tt).some(gt=>{var Lt;return x3(V,(Lt=gt.context)==null?void 0:Lt.elements.floating)});if(x3(V,o.floating)||x3(V,o.domReference)||it)return;const xt=D?Dm(D.nodesRef.current,tt):[];if(xt.length>0){let gt=!0;if(xt.forEach(Lt=>{var $t;if(($t=Lt.context)!=null&&$t.open&&!Lt.context.dataRef.current.__outsidePressBubbles){gt=!1;return}}),!gt)return}r(!1,V,"outside-press")}),ct=Wc(V=>{var P;const _=()=>{var N;Et(V),(N=jh(V))==null||N.removeEventListener(d,_)};(P=jh(V))==null||P.addEventListener(d,_)});Y.useEffect(()=>{if(!i||!l)return;a.current.__escapeKeyBubbles=R,a.current.__outsidePressBubbles=k;let V=-1;function P(F){r(!1,F,"ancestor-scroll")}function _(){window.clearTimeout(V),nt.current=!0}function N(){V=window.setTimeout(()=>{nt.current=!1},lC()?5:0)}const $=Ta(o.floating);c&&($.addEventListener("keydown",W?ft:st,W),$.addEventListener("compositionstart",_),$.addEventListener("compositionend",N)),B&&$.addEventListener(d,U?ct:Et,U);let Q=[];return w&&(_i(o.domReference)&&(Q=ef(o.domReference)),_i(o.floating)&&(Q=Q.concat(ef(o.floating))),!_i(o.reference)&&o.reference&&o.reference.contextElement&&(Q=Q.concat(ef(o.reference.contextElement)))),Q=Q.filter(F=>{var J;return F!==((J=$.defaultView)==null?void 0:J.visualViewport)}),Q.forEach(F=>{F.addEventListener("scroll",P,{passive:!0})}),()=>{c&&($.removeEventListener("keydown",W?ft:st,W),$.removeEventListener("compositionstart",_),$.removeEventListener("compositionend",N)),B&&$.removeEventListener(d,U?ct:Et,U),Q.forEach(F=>{F.removeEventListener("scroll",P)}),window.clearTimeout(V)}},[a,o,c,B,d,i,r,w,l,R,k,st,W,ft,Et,U,ct]),Y.useEffect(()=>{A.current=!1},[B,d]);const mt=Y.useMemo(()=>({onKeyDown:st,[zZ[m]]:V=>{p&&r(!1,V.nativeEvent,"reference-press")}}),[st,r,p,m]),wt=Y.useMemo(()=>({onKeyDown:st,onMouseDown(){I.current=!0},onMouseUp(){I.current=!0},[jZ[d]]:()=>{A.current=!0}}),[st,d]);return Y.useMemo(()=>l?{reference:mt,floating:wt}:{},[l,mt,wt])}function UZ(e){const{open:n=!1,onOpenChange:i,elements:r}=e,o=bv(),a=Y.useRef({}),[l]=Y.useState(()=>DZ()),c=JM()!=null,[h,d]=Y.useState(r.reference),p=Wc((x,T,D)=>{a.current.openEvent=x?T:void 0,l.emit("openchange",{open:x,event:T,reason:D,nested:c}),i==null||i(x,T,D)}),m=Y.useMemo(()=>({setPositionReference:d}),[]),w=Y.useMemo(()=>({reference:h||r.reference||null,floating:r.floating||null,domReference:r.reference}),[h,r.reference,r.floating]);return Y.useMemo(()=>({dataRef:a,open:n,onOpenChange:p,elements:w,events:l,floatingId:o,refs:m}),[n,p,w,l,o,m])}function mC(e){e===void 0&&(e={});const{nodeId:n}=e,i=UZ({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||i,o=r.elements,[a,l]=Y.useState(null),[c,h]=Y.useState(null),p=(o==null?void 0:o.domReference)||a,m=Y.useRef(null),w=WA();Ss(()=>{p&&(m.current=p)},[p]);const x=wZ({...e,elements:{...o,...c&&{reference:c}}}),T=Y.useCallback(I=>{const R=_i(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),contextElement:I}:I;h(R),x.refs.setReference(R)},[x.refs]),D=Y.useCallback(I=>{(_i(I)||I===null)&&(m.current=I,l(I)),(_i(x.refs.reference.current)||x.refs.reference.current===null||I!==null&&!_i(I))&&x.refs.setReference(I)},[x.refs]),b=Y.useMemo(()=>({...x.refs,setReference:D,setPositionReference:T,domReference:m}),[x.refs,D,T]),B=Y.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),A=Y.useMemo(()=>({...x,...r,refs:b,elements:B,nodeId:n}),[x,b,B,n,r]);return Ss(()=>{r.dataRef.current.floatingContext=A;const I=w==null?void 0:w.nodesRef.current.find(R=>R.id===n);I&&(I.context=A)}),Y.useMemo(()=>({...x,context:A,refs:b,elements:B}),[x,b,B,A])}const S8="active",T8="selected";function b3(e,n,i){const r=new Map,o=i==="item";let a=e;if(o&&e){const{[S8]:l,[T8]:c,...h}=e;a=h}return{...i==="floating"&&{tabIndex:-1,[KS]:""},...a,...n.map(l=>{const c=l?l[i]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((l,c)=>(c&&Object.entries(c).forEach(h=>{let[d,p]=h;if(!(o&&[S8,T8].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof p=="function"){var m;(m=r.get(d))==null||m.push(p),l[d]=function(){for(var w,x=arguments.length,T=new Array(x),D=0;D<x;D++)T[D]=arguments[D];return(w=r.get(d))==null?void 0:w.map(b=>b(...T)).find(b=>b!==void 0)}}}else l[d]=p}),l),{})}}function c9(e){e===void 0&&(e=[]);const n=e.map(c=>c==null?void 0:c.reference),i=e.map(c=>c==null?void 0:c.floating),r=e.map(c=>c==null?void 0:c.item),o=Y.useCallback(c=>b3(c,e,"reference"),n),a=Y.useCallback(c=>b3(c,e,"floating"),i),l=Y.useCallback(c=>b3(c,e,"item"),r);return Y.useMemo(()=>({getReferenceProps:o,getFloatingProps:a,getItemProps:l}),[o,a,l])}const $Z=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function f9(e,n){var i;n===void 0&&(n={});const{open:r,floatingId:o}=e,{enabled:a=!0,role:l="dialog"}=n,c=(i=$Z.get(l))!=null?i:l,h=bv(),p=JM()!=null,m=Y.useMemo(()=>c==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":c==="alertdialog"?"dialog":c,"aria-controls":r?o:void 0,...c==="listbox"&&{role:"combobox"},...c==="menu"&&{id:h},...c==="menu"&&p&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[c,o,p,r,h,l]),w=Y.useMemo(()=>{const T={id:o,...c&&{role:c}};return c==="tooltip"||l==="label"?T:{...T,...c==="menu"&&{"aria-labelledby":h}}},[c,o,h,l]),x=Y.useCallback(T=>{let{active:D,selected:b}=T;const B={role:"option",...D&&{id:o+"-option"}};switch(l){case"select":return{...B,"aria-selected":D&&b};case"combobox":return{...B,...D&&{"aria-selected":!0}}}return{}},[o,l]);return Y.useMemo(()=>a?{reference:m,floating:w,item:x}:{},[a,m,w,x])}function VZ({initialOpen:e=!1,placement:n="bottom",modal:i,sideOffset:r,open:o,onOpenChange:a}={}){const[l,c]=Y.useState(e),[h,d]=Y.useState(),[p,m]=Y.useState(),w=o??l,x=a??c,T=mC({placement:n,open:w,onOpenChange:x,whileElementsMounted:hZ,middleware:[$A(r||4),VA({crossAxis:n.includes("-"),fallbackAxisSideDirection:"end",padding:5}),xZ({padding:5})]}),D=T.context,b=l9(D,{enabled:o==null}),B=u9(D),A=f9(D),I=c9([b,B,A]);return Y.useMemo(()=>({open:w,setOpen:x,...I,...T,modal:i,labelId:h,descriptionId:p,setLabelId:d,setDescriptionId:m}),[w,x,I,T,i,h,p])}const h9=Y.createContext(null),d9=()=>{const e=Y.useContext(h9);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function Ra({children:e,modal:n=!1,...i}){const r=VZ({modal:n,...i});return O.jsx(h9.Provider,{value:r,children:e})}const Oa=Y.forwardRef(function({children:n,asChild:i=!1,...r},o){const a=d9(),l=n.ref,c=gC([a.refs.setReference,o,l]);return i&&Y.isValidElement(n)?Y.cloneElement(n,a.getReferenceProps({ref:c,...r,...n.props,"data-state":a.open?"open":"closed"})):O.jsx("button",{ref:c,type:"button","data-state":a.open?"open":"closed",...a.getReferenceProps(r),children:n})}),La=Y.forwardRef(function({container:n,style:i,...r},o){const{context:a,...l}=d9(),c=gC([l.refs.setFloating,o]);return a.open?O.jsx(o9,{root:n,children:O.jsx(a9,{context:a,modal:l.modal,children:O.jsx("div",{ref:c,style:{...l.floatingStyles,...i},"aria-labelledby":l.labelId,"aria-describedby":l.descriptionId,...l.getFloatingProps(r),children:r.children})})}):null});var Vh=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(Vh||{});const g9=Y.createContext(null),Ps=()=>{const e=Y.useContext(g9);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},WZ=()=>{const{appState:e,setAppState:n}=Ps();return i=>{n({...e,pointer:i})}},vC=Ae.createContext({}),ZS=(e="",n=!1)=>`menu-item menu-item-base ${e} ${n?"menu-item--active":""}`.trim(),p9=(e,n)=>{const i=Y.useContext(vC);return oY(e,r=>{var a;const o=new CustomEvent(Ig.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});n==null||n(o),o.defaultPrevented||(a=i.onSelect)==null||a.call(i,o)})},Qg=({children:e,className:n="",onSelect:i,style:r})=>{const o=mn(`menu ${n}`).trim();return O.jsx(vC.Provider,{value:{onSelect:i},children:O.jsx("div",{className:o,style:r,"data-testid":"menu",children:O.jsx(Jo,{className:"menu-container",padding:2,children:e})})})};Qg.displayName="Menu";const m9=({icon:e,shortcut:n,children:i})=>O.jsxs(O.Fragment,{children:[e&&O.jsx("div",{className:"menu-item__icon",children:e}),O.jsx("div",{className:"menu-item__text",children:i}),n&&O.jsx("div",{className:"menu-item__shortcut",children:n})]}),er=({icon:e,onSelect:n,children:i,shortcut:r,className:o,selected:a,submenu:l,...c})=>{const[h,d]=Y.useState(!1),p=Y.useRef(),m=p9(c.onClick,n),w=O.jsx(m9,{icon:e,shortcut:r,children:i}),x=()=>{p.current&&window.clearTimeout(p.current),d(!0)},T=()=>{p.current=window.setTimeout(()=>{d(!1)},100)},D=b=>{var B;l?(d(!h),(B=c.onClick)==null||B.call(c,b)):m(b)};return l?O.jsxs(Ra,{open:h,onOpenChange:d,placement:"right-start",children:[O.jsx(Oa,{asChild:!0,children:O.jsx("button",{...c,type:"button",className:ZS(o,a||h),title:c.title??c["aria-label"],onClick:D,onMouseEnter:x,onMouseLeave:T,children:w})}),O.jsx(La,{onMouseEnter:x,onMouseLeave:T,children:l})]}):O.jsx("button",{...c,onClick:m,type:"button",className:ZS(o,a),title:c.title??c["aria-label"],children:w})};er.displayName="MenuItem";const v9=({children:e})=>O.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});v9.displayName="MenuItemBadge";er.Badge=v9;const y9=()=>{const{appState:e,setAppState:n}=Ps(),{t:i}=ti();return O.jsx(er,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{n({...e,openDialogType:Vh.mermaidToDrawnix})},icon:UY,"aria-label":i("extraTools.mermaidToDrawnix"),children:i("extraTools.mermaidToDrawnix")})};y9.displayName="MermaidToDrawnix";const w9=()=>{const{appState:e,setAppState:n}=Ps(),{t:i}=ti();return O.jsx(er,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{n({...e,openDialogType:Vh.markdownToDrawnix})},icon:$Y,"aria-label":i("extraTools.markdownToDrawnix"),children:i("extraTools.markdownToDrawnix")})};w9.displayName="MarkdownToDrawnix";const XZ=()=>{const e=qi(),{t:n}=ti(),i=G.getBoardContainer(e),[r,o]=Y.useState(!1);return O.jsxs(Ra,{sideOffset:12,open:r,onOpenChange:a=>{o(a)},placement:"bottom-start",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:r,icon:DM,title:n("toolbar.extraTools"),"aria-label":n("toolbar.extraTools"),onPointerDown:()=>{o(!r)}})}),O.jsx(La,{container:i,children:O.jsxs(Qg,{onSelect:()=>{o(!1)},children:[O.jsx(y9,{}),O.jsx(w9,{})]})})]},0)},qZ=e=>{const n=ne(e);return CT(e,{padding:20,elements:n.length>0?n:void 0,inlineStyleClassNames:".plait-text-container",styleNames:["position"]}).then(i=>{const r=new Blob([i],{type:"image/svg+xml"}),o=`drawnix-${new Date().getTime()}.svg`;TM(r,o)})},YZ=e=>CT(e,{padding:20,elements:void 0,inlineStyleClassNames:".plait-text-container",styleNames:["position"]}),Rw=(e,n)=>{const i=ne(e);SM(e,{elements:i.length>0?i:void 0,fillStyle:n?"transparent":"white"}).then(r=>{if(r){const o=n?"png":"jpg",a=sY(r),l=`drawnix-${new Date().getTime()}.${o}`;TM(a,l)}})},x9=async e=>{const n=await yM({description:"Image",extensions:Object.keys(kA)});$S(e,n)},B3=e=>e===nn.hand||e===nn.selection,A8=[{icon:aY,pointer:nn.hand,titleKey:"toolbar.hand"},{icon:lY,pointer:nn.selection,titleKey:"toolbar.selection"},{icon:uY,pointer:wu.mind,titleKey:"toolbar.mind"},{icon:fY,pointer:we.text,titleKey:"toolbar.text"},{icon:zA,pointer:Yo.feltTipPen,titleKey:"toolbar.pen",key:"freehand"},{icon:dY,titleKey:"toolbar.arrow",key:"arrow",pointer:qn.straight},{icon:cY,titleKey:"toolbar.shape",key:"shape",pointer:we.rectangle},{icon:jY,titleKey:"toolbar.image",key:"image"},{icon:DM,titleKey:"toolbar.extraTools",key:"extra-tools"}],D8=e=>Object.keys(qn).includes(e.pointer),b8=e=>Object.keys(we).includes(e.pointer)||Object.keys(ye).includes(e.pointer),KZ=()=>{const e=qi(),{appState:n}=Ps(),{t:i}=ti(),r=WZ(),o=G.getBoardContainer(e),[a,l]=Y.useState(!1),[c,h]=Y.useState(!1),[d,p]=Y.useState(!1),[m,w]=Y.useState(A8.find(k=>k.key==="freehand")),[x,T]=Y.useState(Bw[0].pointer),[D,b]=Y.useState(Pw[0].pointer),B=k=>{Vr(e,Xi.dnd),un.updatePointerType(e,k),r(k)},A=()=>{Vr(e,Xi.drawing)},I=k=>G.isPointer(e,k.pointer)&&!c&&!d&&!a,R=k=>G.isInPointer(k,[Yo.feltTipPen,Yo.eraser]);return O.jsx(Jo,{padding:1,className:mn("draw-toolbar",Fa),children:O.jsx(Yr.Row,{gap:1,children:A8.map((k,W)=>n.isMobile&&k.pointer===nn.hand?O.jsx(O.Fragment,{}):k.key==="freehand"?O.jsxs(Ra,{open:a||R(e),sideOffset:12,onOpenChange:U=>{l(U)},children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:a||R(e),icon:m.icon,title:m.titleKey?i(m.titleKey):"Freehand","aria-label":m.titleKey?i(m.titleKey):"Freehand",onPointerDown:()=>{l(!a),B(m.pointer)},onPointerUp:()=>{A()}})}),O.jsx(La,{container:o,children:O.jsx(XY,{onPointerUp:U=>{r(U),w(RM.find(nt=>nt.pointer===U))}})})]},W):k.key==="shape"?O.jsxs(Ra,{open:d,sideOffset:12,onOpenChange:U=>{p(U)},children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:d||b8(e)&&!G.isPointer(e,we.text),icon:k.icon,title:k.titleKey?i(k.titleKey):"Shape","aria-label":k.titleKey?i(k.titleKey):"Shape",onPointerDown:()=>{p(!d),b8(e)?un.updatePointerType(e,e.pointer):(r(x||Bw[0].pointer),Vr(e,Xi.drawing),un.updatePointerType(e,x||Bw[0].pointer))}})}),O.jsx(La,{container:o,children:O.jsx(YY,{onPointerUp:U=>{p(!1),r(U),T(U)}})})]},W):k.key==="arrow"?O.jsxs(Ra,{open:c,sideOffset:12,onOpenChange:U=>{h(U)},children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:c||D8(e),icon:k.icon,title:k.titleKey?i(k.titleKey):"","aria-label":k.titleKey?i(k.titleKey):"",onPointerDown:()=>{h(!c),D8(e)?un.updatePointerType(e,e.pointer):(Vr(e,Xi.drawing),un.updatePointerType(e,D||Pw[0].pointer),r(D||Pw[0].pointer))}})}),O.jsx(La,{container:o,children:O.jsx(KY,{onPointerUp:U=>{h(!1),r(U),b(U)}})})]},W):k.key==="extra-tools"?O.jsx(XZ,{},W):O.jsx(jn,{type:"radio",icon:k.icon,checked:I(k),title:k.titleKey?i(k.titleKey):"","aria-label":k.titleKey?i(k.titleKey):"",onPointerDown:()=>{k.pointer&&!B3(k.pointer)&&B(k.pointer)},onPointerUp:()=>{k.pointer&&!B3(k.pointer)?A():k.pointer&&B3(k.pointer)&&(un.updatePointerType(e,k.pointer),r(k.pointer)),k.key==="image"&&x9(e)}},W))})})},ZZ=()=>{var a;const e=qi(),{t:n}=ti(),i=G.getBoardContainer(e),[r,o]=Y.useState(!1);return O.jsx(Jo,{padding:1,className:mn("zoom-toolbar",Fa),children:O.jsxs(Yr.Row,{gap:1,children:[O.jsx(jn,{type:"button",icon:DY,visible:!0,title:n("zoom.out"),"aria-label":n("zoom.out"),onPointerUp:()=>{un.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),O.jsxs(Ra,{sideOffset:12,open:r,onOpenChange:l=>{o(l)},placement:"bottom-end",children:[O.jsx(Oa,{asChild:!0,children:O.jsxs("div",{title:n("zoom.fit"),"aria-label":n("zoom.fit"),className:mn("zoom-menu-trigger",{active:r}),onPointerUp:()=>{o(!r)},children:[Number(((((a=e==null?void 0:e.viewport)==null?void 0:a.zoom)||1)*100).toFixed(0)),"%"]},1)}),O.jsx(La,{container:i,children:O.jsxs(Qg,{onSelect:()=>{o(!1)},children:[O.jsx(er,{"data-testid":"open-button",onSelect:()=>{un.fitViewport(e)},"aria-label":n("zoom.fit"),shortcut:"Cmd+Shift+=",children:n("zoom.fit")}),O.jsx(er,{"data-testid":"open-button",onSelect:()=>{un.updateZoom(e,1)},"aria-label":n("zoom.100"),shortcut:"Cmd+0",children:n("zoom.100")})]})})]}),O.jsx(jn,{type:"button",icon:bY,visible:!0,title:n("zoom.in"),"aria-label":n("zoom.in"),onPointerUp:()=>{un.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},QZ="TRANSPARENT",XA="NO_COLOR",qA="#FFFFFF",C9=[{name:"color.none",value:XA},{name:"color.default",value:gr},{name:"color.white",value:qA},{name:"color.gray",value:"#808080"},{name:"color.deepBlue",value:"#1E90FF"},{name:"color.red",value:"#FF4500"},{name:"color.green",value:"#2ECC71"},{name:"color.yellow",value:"#FFD700"},{name:"color.purple",value:"#8A2BE2"},{name:"color.orange",value:"#FFA500"},{name:"color.pastelPink",value:"#FFB3BA"},{name:"color.cyan",value:"#00CED1"},{name:"color.brown",value:"#8B4513"},{name:"color.forestGreen",value:"#228B22"},{name:"color.lightGray",value:"#D3D3D3"}];function JZ(e){return Math.round((100-e)/100*255)}function tQ(e){return Math.round((1-e/255)*100)}function Jg(e,n){const r=JZ(100-n).toString(16).padStart(2,"0");return`${e}${r}`}function t1(e){e=e.replace(/^#/,"");let n;if(e.length===8)n=parseInt(e.slice(6,8),16);else if(e.length===4)n=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-tQ(n)}function eQ(e){return e!=="none"}function yd(e){const n=e.replace(/^#/,"").toUpperCase();return n.length===8?"#"+n.slice(0,6):n.length===4?"#"+n.slice(0,3):n.length===6||n.length===3?"#"+n:e}function E9(e){return e===qA}function S9(e){return e===0}function Bv(e){return e===100}function Tg(e){return e===XA}function nQ(e){return!e||e===gr}var dm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var iQ=dm.exports,B8;function rQ(){return B8||(B8=1,function(e,n){(function(){var i,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",m=1,w=2,x=4,T=1,D=2,b=1,B=2,A=4,I=8,R=16,k=32,W=64,U=128,nt=256,st=512,ft=30,Et="...",ct=800,mt=16,wt=1,V=2,P=3,_=1/0,N=9007199254740991,$=17976931348623157e292,Q=NaN,F=4294967295,J=F-1,tt=F>>>1,it=[["ary",U],["bind",b],["bindKey",B],["curry",I],["curryRight",R],["flip",st],["partial",k],["partialRight",W],["rearg",nt]],xt="[object Arguments]",gt="[object Array]",Lt="[object AsyncFunction]",$t="[object Boolean]",ot="[object Date]",Pt="[object DOMException]",Rt="[object Error]",It="[object Function]",he="[object GeneratorFunction]",Nt="[object Map]",ge="[object Number]",ae="[object Null]",ee="[object Object]",xe="[object Promise]",le="[object Proxy]",Re="[object RegExp]",me="[object Set]",Qe="[object String]",ei="[object Symbol]",Fn="[object Undefined]",Kn="[object WeakMap]",Br="[object WeakSet]",ji="[object ArrayBuffer]",An="[object DataView]",Wn="[object Float32Array]",Zr="[object Float64Array]",Js="[object Int8Array]",ta="[object Int16Array]",Qr="[object Int32Array]",di="[object Uint8Array]",Pr="[object Uint8ClampedArray]",Ei="[object Uint16Array]",Ms="[object Uint32Array]",wd=/\b__p \+= '';/g,e1=/\b(__p \+=) '' \+/g,Jr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kl=/&(?:amp|lt|gt|quot|#39);/g,Il=/[&<>"']/g,Rs=RegExp(kl.source),_u=RegExp(Il.source),Hl=/<%-([\s\S]+?)%>/g,n1=/<%([\s\S]+?)%>/g,Cf=/<%=([\s\S]+?)%>/g,Ef=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nl=/^\w*$/,i1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fu=/[\\^$.*+?()[\]{}|]/g,xd=RegExp(Fu.source),ku=/^\s+/,Iu=/\s/,Sf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Cd=/\{\n\/\* \[wrapped with (.+)\] \*/,Ed=/,? & /,Os=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ki=/[()=,{}\[\]\/\s]/,or=/\\(\\)?/g,Ha=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hu=/\w*$/,r1=/^[-+]0x[0-9a-f]+$/i,o1=/^0b[01]+$/i,Sd=/^\[object .+?Constructor\]$/,Gl=/^0o[0-7]+$/i,Tf=/^(?:0|[1-9]\d*)$/,Na=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ts=/($^)/,Ga=/['\n\r\u2028\u2029\\]/g,mr="\\ud800-\\udfff",Si="\\u0300-\\u036f",ea="\\ufe20-\\ufe2f",Td="\\u20d0-\\u20ff",to=Si+ea+Td,es="\\u2700-\\u27bf",Ad="a-z\\xdf-\\xf6\\xf8-\\xff",Dd="\\xac\\xb1\\xd7\\xf7",Nu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",s1="\\u2000-\\u206f",Gu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",K="A-Z\\xc0-\\xd6\\xd8-\\xde",lt="\\ufe0e\\ufe0f",et=Dd+Nu+s1+Gu,vt="[']",St="["+mr+"]",pt="["+et+"]",Ht="["+to+"]",Xt="\\d+",Zt="["+es+"]",qt="["+Ad+"]",Jt="[^"+mr+et+Xt+es+Ad+K+"]",ue="\\ud83c[\\udffb-\\udfff]",Ue="(?:"+Ht+"|"+ue+")",tn="[^"+mr+"]",vn="(?:\\ud83c[\\udde6-\\uddff]){2}",Zn="[\\ud800-\\udbff][\\udc00-\\udfff]",wn="["+K+"]",vr="\\u200d",na="(?:"+qt+"|"+Jt+")",zu="(?:"+wn+"|"+Jt+")",ju="(?:"+vt+"(?:d|ll|m|re|s|t|ve))?",Uu="(?:"+vt+"(?:D|LL|M|RE|S|T|VE))?",a1=Ue+"?",zl="["+lt+"]?",ns="(?:"+vr+"(?:"+[tn,vn,Zn].join("|")+")"+zl+a1+")*",$u="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jl=zl+a1+ns,Vu="(?:"+[Zt,vn,Zn].join("|")+")"+jl,Mv="(?:"+[tn+Ht+"?",Ht,vn,Zn,St].join("|")+")",u1=RegExp(vt,"g"),Rv=RegExp(Ht,"g"),Ul=RegExp(ue+"(?="+ue+")|"+Mv+jl,"g"),ia=RegExp([wn+"?"+qt+"+"+ju+"(?="+[pt,wn,"$"].join("|")+")",zu+"+"+Uu+"(?="+[pt,wn+na,"$"].join("|")+")",wn+"?"+na+"+"+ju,wn+"+"+Uu,l1,$u,Xt,Vu].join("|"),"g"),c1=RegExp("["+vr+mr+to+lt+"]"),Af=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,za=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],f1=-1,kn={};kn[Wn]=kn[Zr]=kn[Js]=kn[ta]=kn[Qr]=kn[di]=kn[Pr]=kn[Ei]=kn[Ms]=!0,kn[xt]=kn[gt]=kn[ji]=kn[$t]=kn[An]=kn[ot]=kn[Rt]=kn[It]=kn[Nt]=kn[ge]=kn[ee]=kn[Re]=kn[me]=kn[Qe]=kn[Kn]=!1;var Un={};Un[xt]=Un[gt]=Un[ji]=Un[An]=Un[$t]=Un[ot]=Un[Wn]=Un[Zr]=Un[Js]=Un[ta]=Un[Qr]=Un[Nt]=Un[ge]=Un[ee]=Un[Re]=Un[me]=Un[Qe]=Un[ei]=Un[di]=Un[Pr]=Un[Ei]=Un[Ms]=!0,Un[Rt]=Un[It]=Un[Kn]=!1;var bd={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Bd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ov={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$l=parseFloat,Pd=parseInt,Wu=typeof Ws=="object"&&Ws&&Ws.Object===Object&&Ws,yC=typeof self=="object"&&self&&self.Object===Object&&self,Ii=Wu||yC||Function("return this")(),Df=n&&!n.nodeType&&n,is=Df&&!0&&e&&!e.nodeType&&e,bf=is&&is.exports===Df,Md=bf&&Wu.process,bo=function(){try{var yt=is&&is.require&&is.require("util").types;return yt||Md&&Md.binding&&Md.binding("util")}catch{}}(),Lv=bo&&bo.isArrayBuffer,_v=bo&&bo.isDate,Rd=bo&&bo.isMap,Fv=bo&&bo.isRegExp,kv=bo&&bo.isSet,Iv=bo&&bo.isTypedArray;function eo(yt,Ft,Mt){switch(Mt.length){case 0:return yt.call(Ft);case 1:return yt.call(Ft,Mt[0]);case 2:return yt.call(Ft,Mt[0],Mt[1]);case 3:return yt.call(Ft,Mt[0],Mt[1],Mt[2])}return yt.apply(Ft,Mt)}function wC(yt,Ft,Mt,oe){for(var Ne=-1,rn=yt==null?0:yt.length;++Ne<rn;){var ii=yt[Ne];Ft(oe,ii,Mt(ii),yt)}return oe}function no(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length;++Mt<oe&&Ft(yt[Mt],Mt,yt)!==!1;);return yt}function xC(yt,Ft){for(var Mt=yt==null?0:yt.length;Mt--&&Ft(yt[Mt],Mt,yt)!==!1;);return yt}function Hv(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length;++Mt<oe;)if(!Ft(yt[Mt],Mt,yt))return!1;return!0}function ja(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length,Ne=0,rn=[];++Mt<oe;){var ii=yt[Mt];Ft(ii,Mt,yt)&&(rn[Ne++]=ii)}return rn}function Od(yt,Ft){var Mt=yt==null?0:yt.length;return!!Mt&&Xu(yt,Ft,0)>-1}function Bf(yt,Ft,Mt){for(var oe=-1,Ne=yt==null?0:yt.length;++oe<Ne;)if(Mt(Ft,yt[oe]))return!0;return!1}function ni(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length,Ne=Array(oe);++Mt<oe;)Ne[Mt]=Ft(yt[Mt],Mt,yt);return Ne}function Ua(yt,Ft){for(var Mt=-1,oe=Ft.length,Ne=yt.length;++Mt<oe;)yt[Ne+Mt]=Ft[Mt];return yt}function h1(yt,Ft,Mt,oe){var Ne=-1,rn=yt==null?0:yt.length;for(oe&&rn&&(Mt=yt[++Ne]);++Ne<rn;)Mt=Ft(Mt,yt[Ne],Ne,yt);return Mt}function Nv(yt,Ft,Mt,oe){var Ne=yt==null?0:yt.length;for(oe&&Ne&&(Mt=yt[--Ne]);Ne--;)Mt=Ft(Mt,yt[Ne],Ne,yt);return Mt}function d1(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length;++Mt<oe;)if(Ft(yt[Mt],Mt,yt))return!0;return!1}var CC=Vl("length");function EC(yt){return yt.split("")}function SC(yt){return yt.match(Os)||[]}function Gv(yt,Ft,Mt){var oe;return Mt(yt,function(Ne,rn,ii){if(Ft(Ne,rn,ii))return oe=rn,!1}),oe}function Ld(yt,Ft,Mt,oe){for(var Ne=yt.length,rn=Mt+(oe?1:-1);oe?rn--:++rn<Ne;)if(Ft(yt[rn],rn,yt))return rn;return-1}function Xu(yt,Ft,Mt){return Ft===Ft?bC(yt,Ft,Mt):Ld(yt,zv,Mt)}function TC(yt,Ft,Mt,oe){for(var Ne=Mt-1,rn=yt.length;++Ne<rn;)if(oe(yt[Ne],Ft))return Ne;return-1}function zv(yt){return yt!==yt}function _d(yt,Ft){var Mt=yt==null?0:yt.length;return Mt?Fd(yt,Ft)/Mt:Q}function Vl(yt){return function(Ft){return Ft==null?i:Ft[yt]}}function g1(yt){return function(Ft){return yt==null?i:yt[Ft]}}function p1(yt,Ft,Mt,oe,Ne){return Ne(yt,function(rn,ii,Rn){Mt=oe?(oe=!1,rn):Ft(Mt,rn,ii,Rn)}),Mt}function jv(yt,Ft){var Mt=yt.length;for(yt.sort(Ft);Mt--;)yt[Mt]=yt[Mt].value;return yt}function Fd(yt,Ft){for(var Mt,oe=-1,Ne=yt.length;++oe<Ne;){var rn=Ft(yt[oe]);rn!==i&&(Mt=Mt===i?rn:Mt+rn)}return Mt}function kd(yt,Ft){for(var Mt=-1,oe=Array(yt);++Mt<yt;)oe[Mt]=Ft(Mt);return oe}function Uv(yt,Ft){return ni(Ft,function(Mt){return[Mt,yt[Mt]]})}function Wl(yt){return yt&&yt.slice(0,Yu(yt)+1).replace(ku,"")}function io(yt){return function(Ft){return yt(Ft)}}function m1(yt,Ft){return ni(Ft,function(Mt){return yt[Mt]})}function Pf(yt,Ft){return yt.has(Ft)}function v1(yt,Ft){for(var Mt=-1,oe=yt.length;++Mt<oe&&Xu(Ft,yt[Mt],0)>-1;);return Mt}function y1(yt,Ft){for(var Mt=yt.length;Mt--&&Xu(Ft,yt[Mt],0)>-1;);return Mt}function Mf(yt,Ft){for(var Mt=yt.length,oe=0;Mt--;)yt[Mt]===Ft&&++oe;return oe}var Rf=g1(bd),AC=g1(Bd);function Id(yt){return"\\"+Mr[yt]}function $v(yt,Ft){return yt==null?i:yt[Ft]}function Xl(yt){return c1.test(yt)}function w1(yt){return Af.test(yt)}function x1(yt){for(var Ft,Mt=[];!(Ft=yt.next()).done;)Mt.push(Ft.value);return Mt}function Hd(yt){var Ft=-1,Mt=Array(yt.size);return yt.forEach(function(oe,Ne){Mt[++Ft]=[Ne,oe]}),Mt}function C1(yt,Ft){return function(Mt){return yt(Ft(Mt))}}function ra(yt,Ft){for(var Mt=-1,oe=yt.length,Ne=0,rn=[];++Mt<oe;){var ii=yt[Mt];(ii===Ft||ii===p)&&(yt[Mt]=p,rn[Ne++]=Mt)}return rn}function Nd(yt){var Ft=-1,Mt=Array(yt.size);return yt.forEach(function(oe){Mt[++Ft]=oe}),Mt}function DC(yt){var Ft=-1,Mt=Array(yt.size);return yt.forEach(function(oe){Mt[++Ft]=[oe,oe]}),Mt}function bC(yt,Ft,Mt){for(var oe=Mt-1,Ne=yt.length;++oe<Ne;)if(yt[oe]===Ft)return oe;return-1}function BC(yt,Ft,Mt){for(var oe=Mt+1;oe--;)if(yt[oe]===Ft)return oe;return oe}function qu(yt){return Xl(yt)?Wv(yt):CC(yt)}function ai(yt){return Xl(yt)?Xv(yt):EC(yt)}function Yu(yt){for(var Ft=yt.length;Ft--&&Iu.test(yt.charAt(Ft)););return Ft}var Vv=g1(Ov);function Wv(yt){for(var Ft=Ul.lastIndex=0;Ul.test(yt);)++Ft;return Ft}function Xv(yt){return yt.match(Ul)||[]}function qv(yt){return yt.match(ia)||[]}var E1=function yt(Ft){Ft=Ft==null?Ii:Ku.defaults(Ii.Object(),Ft,Ku.pick(Ii,za));var Mt=Ft.Array,oe=Ft.Date,Ne=Ft.Error,rn=Ft.Function,ii=Ft.Math,Rn=Ft.Object,Gd=Ft.RegExp,ql=Ft.String,ro=Ft.TypeError,Of=Mt.prototype,Yv=rn.prototype,Zu=Rn.prototype,zd=Ft["__core-js_shared__"],jd=Yv.toString,bn=Zu.hasOwnProperty,Kv=0,Ud=function(){var g=/[^.]+$/.exec(zd&&zd.keys&&zd.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Rr=Zu.toString,$d=jd.call(Rn),Bo=Ii._,Qu=Gd("^"+jd.call(bn).replace(Fu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ju=bf?Ft.Buffer:i,rs=Ft.Symbol,Yl=Ft.Uint8Array,Vd=Ju?Ju.allocUnsafe:i,Ls=C1(Rn.getPrototypeOf,Rn),S1=Rn.create,Lf=Zu.propertyIsEnumerable,oa=Of.splice,Zv=rs?rs.isConcatSpreadable:i,Yi=rs?rs.iterator:i,sa=rs?rs.toStringTag:i,Po=function(){try{var g=nl(Rn,"defineProperty");return g({},"",{}),g}catch{}}(),Qv=Ft.clearTimeout!==Ii.clearTimeout&&Ft.clearTimeout,Wd=oe&&oe.now!==Ii.Date.now&&oe.now,Kl=Ft.setTimeout!==Ii.setTimeout&&Ft.setTimeout,tc=ii.ceil,_f=ii.floor,Ff=Rn.getOwnPropertySymbols,Jv=Ju?Ju.isBuffer:i,oo=Ft.isFinite,ec=Of.join,nc=C1(Rn.keys,Rn),gi=ii.max,Pi=ii.min,Mo=oe.now,Ro=Ft.parseInt,aa=ii.random,_s=Of.reverse,Oo=nl(Ft,"DataView"),so=nl(Ft,"Map"),Xd=nl(Ft,"Promise"),$a=nl(Ft,"Set"),Zl=nl(Ft,"WeakMap"),ic=nl(Rn,"create"),Mi=Zl&&new Zl,Bn={},hn=lr(Oo),Va=lr(so),Lo=lr(Xd),T1=lr($a),Wa=lr(Zl),kf=rs?rs.prototype:i,rc=kf?kf.valueOf:i,Ql=kf?kf.toString:i;function q(g){if(vi(g)&&!Ge(g)&&!(g instanceof $e)){if(g instanceof Or)return g;if(bn.call(g,"__wrapped__"))return T0(g)}return new Or(g)}var Xa=function(){function g(){}return function(y){if(!oi(y))return{};if(S1)return S1(y);g.prototype=y;var E=new g;return g.prototype=i,E}}();function qa(){}function Or(g,y){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=i}q.templateSettings={escape:Hl,evaluate:n1,interpolate:Cf,variable:"",imports:{_:q}},q.prototype=qa.prototype,q.prototype.constructor=q,Or.prototype=Xa(qa.prototype),Or.prototype.constructor=Or;function $e(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function la(){var g=new $e(this.__wrapped__);return g.__actions__=wr(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=wr(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=wr(this.__views__),g}function Ya(){if(this.__filtered__){var g=new $e(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function ua(){var g=this.__wrapped__.value(),y=this.__dir__,E=Ge(g),M=y<0,z=E?g.length:0,Z=IC(0,z,this.__views__),rt=Z.start,ht=Z.end,Tt=ht-rt,Vt=M?ht:rt-1,Wt=this.__iteratees__,Yt=Wt.length,re=0,ve=Pi(Tt,this.__takeCount__);if(!E||!M&&z==Tt&&ve==Tt)return N1(g,this.__actions__);var Le=[];t:for(;Tt--&&re<ve;){Vt+=y;for(var en=-1,_e=g[Vt];++en<Yt;){var dn=Wt[en],xn=dn.iteratee,ms=dn.type,wo=xn(_e);if(ms==V)_e=wo;else if(!wo){if(ms==wt)continue t;break t}}Le[re++]=_e}return Le}$e.prototype=Xa(qa.prototype),$e.prototype.constructor=$e;function ca(g){var y=-1,E=g==null?0:g.length;for(this.clear();++y<E;){var M=g[y];this.set(M[0],M[1])}}function A1(){this.__data__=ic?ic(null):{},this.size=0}function oc(g){var y=this.has(g)&&delete this.__data__[g];return this.size-=y?1:0,y}function qd(g){var y=this.__data__;if(ic){var E=y[g];return E===h?i:E}return bn.call(y,g)?y[g]:i}function Jl(g){var y=this.__data__;return ic?y[g]!==i:bn.call(y,g)}function Ki(g,y){var E=this.__data__;return this.size+=this.has(g)?0:1,E[g]=ic&&y===i?h:y,this}ca.prototype.clear=A1,ca.prototype.delete=oc,ca.prototype.get=qd,ca.prototype.has=Jl,ca.prototype.set=Ki;function _o(g){var y=-1,E=g==null?0:g.length;for(this.clear();++y<E;){var M=g[y];this.set(M[0],M[1])}}function ty(){this.__data__=[],this.size=0}function PC(g){var y=this.__data__,E=Fs(y,g);if(E<0)return!1;var M=y.length-1;return E==M?y.pop():oa.call(y,E,1),--this.size,!0}function MC(g){var y=this.__data__,E=Fs(y,g);return E<0?i:y[E][1]}function RC(g){return Fs(this.__data__,g)>-1}function Ri(g,y){var E=this.__data__,M=Fs(E,g);return M<0?(++this.size,E.push([g,y])):E[M][1]=y,this}_o.prototype.clear=ty,_o.prototype.delete=PC,_o.prototype.get=MC,_o.prototype.has=RC,_o.prototype.set=Ri;function os(g){var y=-1,E=g==null?0:g.length;for(this.clear();++y<E;){var M=g[y];this.set(M[0],M[1])}}function If(){this.size=0,this.__data__={hash:new ca,map:new(so||_o),string:new ca}}function Hf(g){var y=nh(this,g).delete(g);return this.size-=y?1:0,y}function D1(g){return nh(this,g).get(g)}function sc(g){return nh(this,g).has(g)}function ac(g,y){var E=nh(this,g),M=E.size;return E.set(g,y),this.size+=E.size==M?0:1,this}os.prototype.clear=If,os.prototype.delete=Hf,os.prototype.get=D1,os.prototype.has=sc,os.prototype.set=ac;function tu(g){var y=-1,E=g==null?0:g.length;for(this.__data__=new os;++y<E;)this.add(g[y])}function ey(g){return this.__data__.set(g,h),this}function OC(g){return this.__data__.has(g)}tu.prototype.add=tu.prototype.push=ey,tu.prototype.has=OC;function Fo(g){var y=this.__data__=new _o(g);this.size=y.size}function eu(){this.__data__=new _o,this.size=0}function b1(g){var y=this.__data__,E=y.delete(g);return this.size=y.size,E}function Yd(g){return this.__data__.get(g)}function ny(g){return this.__data__.has(g)}function lc(g,y){var E=this.__data__;if(E instanceof _o){var M=E.__data__;if(!so||M.length<o-1)return M.push([g,y]),this.size=++E.size,this;E=this.__data__=new os(M)}return E.set(g,y),this.size=E.size,this}Fo.prototype.clear=eu,Fo.prototype.delete=b1,Fo.prototype.get=Yd,Fo.prototype.has=ny,Fo.prototype.set=lc;function Kd(g,y){var E=Ge(g),M=!E&&uu(g),z=!E&&!M&&ul(g),Z=!E&&!M&&!z&&cl(g),rt=E||M||z||Z,ht=rt?kd(g.length,ql):[],Tt=ht.length;for(var Vt in g)(y||bn.call(g,Vt))&&!(rt&&(Vt=="length"||z&&(Vt=="offset"||Vt=="parent")||Z&&(Vt=="buffer"||Vt=="byteLength"||Vt=="byteOffset")||hs(Vt,Tt)))&&ht.push(Vt);return ht}function Nf(g){var y=g.length;return y?g[mc(0,y-1)]:i}function Zd(g,y){return ch(wr(g),as(y,0,g.length))}function iy(g){return ch(wr(g))}function Qd(g,y,E){(E!==i&&!mo(g[y],E)||E===i&&!(y in g))&&ao(g,y,E)}function ss(g,y,E){var M=g[y];(!(bn.call(g,y)&&mo(M,E))||E===i&&!(y in g))&&ao(g,y,E)}function Fs(g,y){for(var E=g.length;E--;)if(mo(g[E][0],y))return E;return-1}function ry(g,y,E,M){return ks(g,function(z,Z,rt){y(M,z,E(z),rt)}),M}function B1(g,y){return g&&No(y,$i(y),g)}function uc(g,y){return g&&No(y,jr(y),g)}function ao(g,y,E){y=="__proto__"&&Po?Po(g,y,{configurable:!0,enumerable:!0,value:E,writable:!0}):g[y]=E}function cc(g,y){for(var E=-1,M=y.length,z=Mt(M),Z=g==null;++E<M;)z[E]=Z?i:fl(g,y[E]);return z}function as(g,y,E){return g===g&&(E!==i&&(g=g<=E?g:E),y!==i&&(g=g>=y?g:y)),g}function yr(g,y,E,M,z,Z){var rt,ht=y&m,Tt=y&w,Vt=y&x;if(E&&(rt=z?E(g,M,z,Z):E(g)),rt!==i)return rt;if(!oi(g))return g;var Wt=Ge(g);if(Wt){if(rt=Cy(g),!ht)return wr(g,rt)}else{var Yt=Qi(g),re=Yt==It||Yt==he;if(ul(g))return j1(g,ht);if(Yt==ee||Yt==xt||re&&!z){if(rt=Tt||re?{}:np(g),!ht)return Tt?my(g,uc(rt,g)):py(g,B1(rt,g))}else{if(!Un[Yt])return z?g:{};rt=Ey(g,Yt,ht)}}Z||(Z=new Fo);var ve=Z.get(g);if(ve)return ve;Z.set(g,rt),Dh(g)?g.forEach(function(_e){rt.add(yr(_e,y,E,_e,g,Z))}):r2(g)&&g.forEach(function(_e,dn){rt.set(dn,yr(_e,y,E,dn,g,Z))});var Le=Vt?Tt?ep:m0:Tt?jr:$i,en=Wt?i:Le(g);return no(en||g,function(_e,dn){en&&(dn=_e,_e=g[dn]),ss(rt,dn,yr(_e,y,E,dn,g,Z))}),rt}function oy(g){var y=$i(g);return function(E){return Ka(E,g,y)}}function Ka(g,y,E){var M=E.length;if(g==null)return!M;for(g=Rn(g);M--;){var z=E[M],Z=y[z],rt=g[z];if(rt===i&&!(z in g)||!Z(rt))return!1}return!0}function P1(g,y,E){if(typeof g!="function")throw new ro(l);return uh(function(){g.apply(i,E)},y)}function ko(g,y,E,M){var z=-1,Z=Od,rt=!0,ht=g.length,Tt=[],Vt=y.length;if(!ht)return Tt;E&&(y=ni(y,io(E))),M?(Z=Bf,rt=!1):y.length>=o&&(Z=Pf,rt=!1,y=new tu(y));t:for(;++z<ht;){var Wt=g[z],Yt=E==null?Wt:E(Wt);if(Wt=M||Wt!==0?Wt:0,rt&&Yt===Yt){for(var re=Vt;re--;)if(y[re]===Yt)continue t;Tt.push(Wt)}else Z(y,Yt,M)||Tt.push(Wt)}return Tt}var ks=W1(us),Jd=W1(e0,!0);function Za(g,y){var E=!0;return ks(g,function(M,z,Z){return E=!!y(M,z,Z),E}),E}function ls(g,y,E){for(var M=-1,z=g.length;++M<z;){var Z=g[M],rt=y(Z);if(rt!=null&&(ht===i?rt===rt&&!zr(rt):E(rt,ht)))var ht=rt,Tt=Z}return Tt}function Gf(g,y,E,M){var z=g.length;for(E=Oe(E),E<0&&(E=-E>z?0:z+E),M=M===i||M>z?z:Oe(M),M<0&&(M+=z),M=E>M?0:zp(M);E<M;)g[E++]=y;return g}function t0(g,y){var E=[];return ks(g,function(M,z,Z){y(M,z,Z)&&E.push(M)}),E}function Hi(g,y,E,M,z){var Z=-1,rt=g.length;for(E||(E=rp),z||(z=[]);++Z<rt;){var ht=g[Z];y>0&&E(ht)?y>1?Hi(ht,y-1,E,M,z):Ua(z,ht):M||(z[z.length]=ht)}return z}var nu=X1(),fc=X1(!0);function us(g,y){return g&&nu(g,y,$i)}function e0(g,y){return g&&fc(g,y,$i)}function fa(g,y){return ja(y,function(E){return vo(g[E])})}function Is(g,y){y=fo(y,g);for(var E=0,M=y.length;g!=null&&E<M;)g=g[Fr(y[E++])];return E&&E==M?g:i}function M1(g,y,E){var M=y(g);return Ge(g)?M:Ua(M,E(g))}function Zi(g){return g==null?g===i?Fn:ae:sa&&sa in Rn(g)?ih(g):sp(g)}function zf(g,y){return g>y}function lo(g,y){return g!=null&&bn.call(g,y)}function Io(g,y){return g!=null&&y in Rn(g)}function Qa(g,y,E){return g>=Pi(y,E)&&g<gi(y,E)}function jf(g,y,E){for(var M=E?Bf:Od,z=g[0].length,Z=g.length,rt=Z,ht=Mt(Z),Tt=1/0,Vt=[];rt--;){var Wt=g[rt];rt&&y&&(Wt=ni(Wt,io(y))),Tt=Pi(Wt.length,Tt),ht[rt]=!E&&(y||z>=120&&Wt.length>=120)?new tu(rt&&Wt):i}Wt=g[0];var Yt=-1,re=ht[0];t:for(;++Yt<z&&Vt.length<Tt;){var ve=Wt[Yt],Le=y?y(ve):ve;if(ve=E||ve!==0?ve:0,!(re?Pf(re,Le):M(Vt,Le,E))){for(rt=Z;--rt;){var en=ht[rt];if(!(en?Pf(en,Le):M(g[rt],Le,E)))continue t}re&&re.push(Le),Vt.push(ve)}}return Vt}function sy(g,y,E,M){return us(g,function(z,Z,rt){y(M,E(z),Z,rt)}),M}function Ho(g,y,E){y=fo(y,g),g=ah(g,y);var M=g==null?g:g[Fr(Jn(y))];return M==null?i:eo(M,g,E)}function Lr(g){return vi(g)&&Zi(g)==xt}function Ti(g){return vi(g)&&Zi(g)==ji}function n0(g){return vi(g)&&Zi(g)==ot}function uo(g,y,E,M,z){return g===y?!0:g==null||y==null||!vi(g)&&!vi(y)?g!==g&&y!==y:Ve(g,y,E,M,uo,z)}function Ve(g,y,E,M,z,Z){var rt=Ge(g),ht=Ge(y),Tt=rt?gt:Qi(g),Vt=ht?gt:Qi(y);Tt=Tt==xt?ee:Tt,Vt=Vt==xt?ee:Vt;var Wt=Tt==ee,Yt=Vt==ee,re=Tt==Vt;if(re&&ul(g)){if(!ul(y))return!1;rt=!0,Wt=!1}if(re&&!Wt)return Z||(Z=new Fo),rt||cl(g)?th(g,y,E,M,z,Z):xy(g,y,Tt,E,M,z,Z);if(!(E&T)){var ve=Wt&&bn.call(g,"__wrapped__"),Le=Yt&&bn.call(y,"__wrapped__");if(ve||Le){var en=ve?g.value():g,_e=Le?y.value():y;return Z||(Z=new Fo),z(en,_e,E,M,Z)}}return re?(Z||(Z=new Fo),tp(g,y,E,M,z,Z)):!1}function In(g){return vi(g)&&Qi(g)==Nt}function pi(g,y,E,M){var z=E.length,Z=z,rt=!M;if(g==null)return!Z;for(g=Rn(g);z--;){var ht=E[z];if(rt&&ht[2]?ht[1]!==g[ht[0]]:!(ht[0]in g))return!1}for(;++z<Z;){ht=E[z];var Tt=ht[0],Vt=g[Tt],Wt=ht[1];if(rt&&ht[2]){if(Vt===i&&!(Tt in g))return!1}else{var Yt=new Fo;if(M)var re=M(Vt,Wt,Tt,g,y,Yt);if(!(re===i?uo(Wt,Vt,T|D,M,Yt):re))return!1}}return!0}function Uf(g){if(!oi(g)||Sy(g))return!1;var y=vo(g)?Qu:Sd;return y.test(lr(g))}function hc(g){return vi(g)&&Zi(g)==Re}function iu(g){return vi(g)&&Qi(g)==me}function i0(g){return vi(g)&&I0(g.length)&&!!kn[Zi(g)]}function dc(g){return typeof g=="function"?g:g==null?Cr:typeof g=="object"?Ge(g)?R1(g[0],g[1]):o0(g):X(g)}function Ja(g){if(!Cc(g))return nc(g);var y=[];for(var E in Rn(g))bn.call(g,E)&&E!="constructor"&&y.push(E);return y}function LC(g){if(!oi(g))return da(g);var y=Cc(g),E=[];for(var M in g)M=="constructor"&&(y||!bn.call(g,M))||E.push(M);return E}function ri(g,y){return g<y}function r0(g,y){var E=-1,M=Gr(g)?Mt(g.length):[];return ks(g,function(z,Z,rt){M[++E]=y(z,Z,rt)}),M}function o0(g){var y=v0(g);return y.length==1&&y[0][2]?E0(y[0][0],y[0][1]):function(E){return E===g||pi(E,g,y)}}function R1(g,y){return oh(g)&&Ns(y)?E0(Fr(g),y):function(E){var M=fl(E,g);return M===i&&M===y?Up(E,g):uo(y,M,T|D)}}function $f(g,y,E,M,z){g!==y&&nu(y,function(Z,rt){if(z||(z=new Fo),oi(Z))_C(g,y,rt,E,$f,M,z);else{var ht=M?M($n(g,rt),Z,rt+"",g,y,z):i;ht===i&&(ht=Z),Qd(g,rt,ht)}},jr)}function _C(g,y,E,M,z,Z,rt){var ht=$n(g,E),Tt=$n(y,E),Vt=rt.get(Tt);if(Vt){Qd(g,E,Vt);return}var Wt=Z?Z(ht,Tt,E+"",g,y,rt):i,Yt=Wt===i;if(Yt){var re=Ge(Tt),ve=!re&&ul(Tt),Le=!re&&!ve&&cl(Tt);Wt=Tt,re||ve||Le?Ge(ht)?Wt=ht:Di(ht)?Wt=wr(ht):ve?(Yt=!1,Wt=j1(Tt,!0)):Le?(Yt=!1,Wt=U1(Tt,!0)):Wt=[]:Th(Tt)||uu(Tt)?(Wt=ht,uu(ht)?Wt=H0(ht):(!oi(ht)||vo(ht))&&(Wt=np(Tt))):Yt=!1}Yt&&(rt.set(Tt,Wt),z(Wt,Tt,M,Z,rt),rt.delete(Tt)),Qd(g,E,Wt)}function s0(g,y){var E=g.length;if(E)return y+=y<0?E:0,hs(y,E)?g[y]:i}function a0(g,y,E){y.length?y=ni(y,function(Z){return Ge(Z)?function(rt){return Is(rt,Z.length===1?Z[0]:Z)}:Z}):y=[Cr];var M=-1;y=ni(y,io(De()));var z=r0(g,function(Z,rt,ht){var Tt=ni(y,function(Vt){return Vt(Z)});return{criteria:Tt,index:++M,value:Z}});return jv(z,function(Z,rt){return gy(Z,rt,E)})}function O1(g,y){return sr(g,y,function(E,M){return Up(g,M)})}function sr(g,y,E){for(var M=-1,z=y.length,Z={};++M<z;){var rt=y[M],ht=Is(g,rt);E(ht,rt)&&vc(Z,fo(rt,g),ht)}return Z}function Ai(g){return function(y){return Is(y,g)}}function gc(g,y,E,M){var z=M?TC:Xu,Z=-1,rt=y.length,ht=g;for(g===y&&(y=wr(y)),E&&(ht=ni(g,io(E)));++Z<rt;)for(var Tt=0,Vt=y[Z],Wt=E?E(Vt):Vt;(Tt=z(ht,Wt,Tt,M))>-1;)ht!==g&&oa.call(ht,Tt,1),oa.call(g,Tt,1);return g}function pc(g,y){for(var E=g?y.length:0,M=E-1;E--;){var z=y[E];if(E==M||z!==Z){var Z=z;hs(z)?oa.call(g,z,1):Vf(g,z)}}return g}function mc(g,y){return g+_f(aa()*(y-g+1))}function L1(g,y,E,M){for(var z=-1,Z=gi(tc((y-g)/(E||1)),0),rt=Mt(Z);Z--;)rt[M?Z:++z]=g,g+=E;return rt}function cs(g,y){var E="";if(!g||y<1||y>N)return E;do y%2&&(E+=g),y=_f(y/2),y&&(g+=g);while(y);return E}function We(g,y){return S0(ap(g,y,Cr),g+"")}function _1(g){return Nf(Fc(g))}function F1(g,y){var E=Fc(g);return ch(E,as(y,0,E.length))}function vc(g,y,E,M){if(!oi(g))return g;y=fo(y,g);for(var z=-1,Z=y.length,rt=Z-1,ht=g;ht!=null&&++z<Z;){var Tt=Fr(y[z]),Vt=E;if(Tt==="__proto__"||Tt==="constructor"||Tt==="prototype")return g;if(z!=rt){var Wt=ht[Tt];Vt=M?M(Wt,Tt,ht):i,Vt===i&&(Vt=oi(Wt)?Wt:hs(y[z+1])?[]:{})}ss(ht,Tt,Vt),ht=ht[Tt]}return g}var k1=Mi?function(g,y){return Mi.set(g,y),g}:Cr,ay=Po?function(g,y){return Po(g,"toString",{configurable:!0,enumerable:!1,value:Ic(y),writable:!0})}:Cr;function ly(g){return ch(Fc(g))}function co(g,y,E){var M=-1,z=g.length;y<0&&(y=-y>z?0:z+y),E=E>z?z:E,E<0&&(E+=z),z=y>E?0:E-y>>>0,y>>>=0;for(var Z=Mt(z);++M<z;)Z[M]=g[M+y];return Z}function uy(g,y){var E;return ks(g,function(M,z,Z){return E=y(M,z,Z),!E}),!!E}function yc(g,y,E){var M=0,z=g==null?M:g.length;if(typeof y=="number"&&y===y&&z<=tt){for(;M<z;){var Z=M+z>>>1,rt=g[Z];rt!==null&&!zr(rt)&&(E?rt<=y:rt<y)?M=Z+1:z=Z}return z}return l0(g,y,Cr,E)}function l0(g,y,E,M){var z=0,Z=g==null?0:g.length;if(Z===0)return 0;y=E(y);for(var rt=y!==y,ht=y===null,Tt=zr(y),Vt=y===i;z<Z;){var Wt=_f((z+Z)/2),Yt=E(g[Wt]),re=Yt!==i,ve=Yt===null,Le=Yt===Yt,en=zr(Yt);if(rt)var _e=M||Le;else Vt?_e=Le&&(M||re):ht?_e=Le&&re&&(M||!ve):Tt?_e=Le&&re&&!ve&&(M||!en):ve||en?_e=!1:_e=M?Yt<=y:Yt<y;_e?z=Wt+1:Z=Wt}return Pi(Z,J)}function cy(g,y){for(var E=-1,M=g.length,z=0,Z=[];++E<M;){var rt=g[E],ht=y?y(rt):rt;if(!E||!mo(ht,Tt)){var Tt=ht;Z[z++]=rt===0?0:rt}}return Z}function I1(g){return typeof g=="number"?g:zr(g)?Q:+g}function _r(g){if(typeof g=="string")return g;if(Ge(g))return ni(g,_r)+"";if(zr(g))return Ql?Ql.call(g):"";var y=g+"";return y=="0"&&1/g==-1/0?"-0":y}function ha(g,y,E){var M=-1,z=Od,Z=g.length,rt=!0,ht=[],Tt=ht;if(E)rt=!1,z=Bf;else if(Z>=o){var Vt=y?null:yy(g);if(Vt)return Nd(Vt);rt=!1,z=Pf,Tt=new tu}else Tt=y?[]:ht;t:for(;++M<Z;){var Wt=g[M],Yt=y?y(Wt):Wt;if(Wt=E||Wt!==0?Wt:0,rt&&Yt===Yt){for(var re=Tt.length;re--;)if(Tt[re]===Yt)continue t;y&&Tt.push(Yt),ht.push(Wt)}else z(Tt,Yt,E)||(Tt!==ht&&Tt.push(Yt),ht.push(Wt))}return ht}function Vf(g,y){return y=fo(y,g),g=ah(g,y),g==null||delete g[Fr(Jn(y))]}function H1(g,y,E,M){return vc(g,y,E(Is(g,y)),M)}function Wf(g,y,E,M){for(var z=g.length,Z=M?z:-1;(M?Z--:++Z<z)&&y(g[Z],Z,g););return E?co(g,M?0:Z,M?Z+1:z):co(g,M?Z+1:0,M?z:Z)}function N1(g,y){var E=g;return E instanceof $e&&(E=E.value()),h1(y,function(M,z){return z.func.apply(z.thisArg,Ua([M],z.args))},E)}function u0(g,y,E){var M=g.length;if(M<2)return M?ha(g[0]):[];for(var z=-1,Z=Mt(M);++z<M;)for(var rt=g[z],ht=-1;++ht<M;)ht!=z&&(Z[z]=ko(Z[z]||rt,g[ht],y,E));return ha(Hi(Z,1),y,E)}function G1(g,y,E){for(var M=-1,z=g.length,Z=y.length,rt={};++M<z;){var ht=M<Z?y[M]:i;E(rt,g[M],ht)}return rt}function z1(g){return Di(g)?g:[]}function c0(g){return typeof g=="function"?g:Cr}function fo(g,y){return Ge(g)?g:oh(g,y)?[g]:lp(Pn(g))}var fy=We;function fs(g,y,E){var M=g.length;return E=E===i?M:E,!y&&E>=M?g:co(g,y,E)}var Xf=Qv||function(g){return Ii.clearTimeout(g)};function j1(g,y){if(y)return g.slice();var E=g.length,M=Vd?Vd(E):new g.constructor(E);return g.copy(M),M}function qf(g){var y=new g.constructor(g.byteLength);return new Yl(y).set(new Yl(g)),y}function FC(g,y){var E=y?qf(g.buffer):g.buffer;return new g.constructor(E,g.byteOffset,g.byteLength)}function hy(g){var y=new g.constructor(g.source,Hu.exec(g));return y.lastIndex=g.lastIndex,y}function dy(g){return rc?Rn(rc.call(g)):{}}function U1(g,y){var E=y?qf(g.buffer):g.buffer;return new g.constructor(E,g.byteOffset,g.length)}function $1(g,y){if(g!==y){var E=g!==i,M=g===null,z=g===g,Z=zr(g),rt=y!==i,ht=y===null,Tt=y===y,Vt=zr(y);if(!ht&&!Vt&&!Z&&g>y||Z&&rt&&Tt&&!ht&&!Vt||M&&rt&&Tt||!E&&Tt||!z)return 1;if(!M&&!Z&&!Vt&&g<y||Vt&&E&&z&&!M&&!Z||ht&&E&&z||!rt&&z||!Tt)return-1}return 0}function gy(g,y,E){for(var M=-1,z=g.criteria,Z=y.criteria,rt=z.length,ht=E.length;++M<rt;){var Tt=$1(z[M],Z[M]);if(Tt){if(M>=ht)return Tt;var Vt=E[M];return Tt*(Vt=="desc"?-1:1)}}return g.index-y.index}function f0(g,y,E,M){for(var z=-1,Z=g.length,rt=E.length,ht=-1,Tt=y.length,Vt=gi(Z-rt,0),Wt=Mt(Tt+Vt),Yt=!M;++ht<Tt;)Wt[ht]=y[ht];for(;++z<rt;)(Yt||z<Z)&&(Wt[E[z]]=g[z]);for(;Vt--;)Wt[ht++]=g[z++];return Wt}function V1(g,y,E,M){for(var z=-1,Z=g.length,rt=-1,ht=E.length,Tt=-1,Vt=y.length,Wt=gi(Z-ht,0),Yt=Mt(Wt+Vt),re=!M;++z<Wt;)Yt[z]=g[z];for(var ve=z;++Tt<Vt;)Yt[ve+Tt]=y[Tt];for(;++rt<ht;)(re||z<Z)&&(Yt[ve+E[rt]]=g[z++]);return Yt}function wr(g,y){var E=-1,M=g.length;for(y||(y=Mt(M));++E<M;)y[E]=g[E];return y}function No(g,y,E,M){var z=!E;E||(E={});for(var Z=-1,rt=y.length;++Z<rt;){var ht=y[Z],Tt=M?M(E[ht],g[ht],ht,E,g):i;Tt===i&&(Tt=g[ht]),z?ao(E,ht,Tt):ss(E,ht,Tt)}return E}function py(g,y){return No(g,y0(g),y)}function my(g,y){return No(g,rh(g),y)}function h0(g,y){return function(E,M){var z=Ge(E)?wC:ry,Z=y?y():{};return z(E,g,De(M,2),Z)}}function tl(g){return We(function(y,E){var M=-1,z=E.length,Z=z>1?E[z-1]:i,rt=z>2?E[2]:i;for(Z=g.length>3&&typeof Z=="function"?(z--,Z):i,rt&&ar(E[0],E[1],rt)&&(Z=z<3?i:Z,z=1),y=Rn(y);++M<z;){var ht=E[M];ht&&g(y,ht,M,Z)}return y})}function W1(g,y){return function(E,M){if(E==null)return E;if(!Gr(E))return g(E,M);for(var z=E.length,Z=y?z:-1,rt=Rn(E);(y?Z--:++Z<z)&&M(rt[Z],Z,rt)!==!1;);return E}}function X1(g){return function(y,E,M){for(var z=-1,Z=Rn(y),rt=M(y),ht=rt.length;ht--;){var Tt=rt[g?ht:++z];if(E(Z[Tt],Tt,Z)===!1)break}return y}}function q1(g,y,E){var M=y&b,z=Yf(g);function Z(){var rt=this&&this!==Ii&&this instanceof Z?z:g;return rt.apply(M?E:this,arguments)}return Z}function Y1(g){return function(y){y=Pn(y);var E=Xl(y)?ai(y):i,M=E?E[0]:y.charAt(0),z=E?fs(E,1).join(""):y.slice(1);return M[g]()+z}}function ru(g){return function(y){return h1(R2(kc(y).replace(u1,"")),g,"")}}function Yf(g){return function(){var y=arguments;switch(y.length){case 0:return new g;case 1:return new g(y[0]);case 2:return new g(y[0],y[1]);case 3:return new g(y[0],y[1],y[2]);case 4:return new g(y[0],y[1],y[2],y[3]);case 5:return new g(y[0],y[1],y[2],y[3],y[4]);case 6:return new g(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new g(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var E=Xa(g.prototype),M=g.apply(E,y);return oi(M)?M:E}}function kC(g,y,E){var M=Yf(g);function z(){for(var Z=arguments.length,rt=Mt(Z),ht=Z,Tt=mi(z);ht--;)rt[ht]=arguments[ht];var Vt=Z<3&&rt[0]!==Tt&&rt[Z-1]!==Tt?[]:ra(rt,Tt);if(Z-=Vt.length,Z<E)return p0(g,y,xc,z.placeholder,i,rt,Vt,i,i,E-Z);var Wt=this&&this!==Ii&&this instanceof z?M:g;return eo(Wt,this,rt)}return z}function K1(g){return function(y,E,M){var z=Rn(y);if(!Gr(y)){var Z=De(E,3);y=$i(y),E=function(ht){return Z(z[ht],ht,z)}}var rt=g(y,E,M);return rt>-1?z[Z?y[rt]:rt]:i}}function wc(g){return Hs(function(y){var E=y.length,M=E,z=Or.prototype.thru;for(g&&y.reverse();M--;){var Z=y[M];if(typeof Z!="function")throw new ro(l);if(z&&!rt&&li(Z)=="wrapper")var rt=new Or([],!0)}for(M=rt?M:E;++M<E;){Z=y[M];var ht=li(Z),Tt=ht=="wrapper"?eh(Z):i;Tt&&sh(Tt[0])&&Tt[1]==(U|I|k|nt)&&!Tt[4].length&&Tt[9]==1?rt=rt[li(Tt[0])].apply(rt,Tt[3]):rt=Z.length==1&&sh(Z)?rt[ht]():rt.thru(Z)}return function(){var Vt=arguments,Wt=Vt[0];if(rt&&Vt.length==1&&Ge(Wt))return rt.plant(Wt).value();for(var Yt=0,re=E?y[Yt].apply(this,Vt):Wt;++Yt<E;)re=y[Yt].call(this,re);return re}})}function xc(g,y,E,M,z,Z,rt,ht,Tt,Vt){var Wt=y&U,Yt=y&b,re=y&B,ve=y&(I|R),Le=y&st,en=re?i:Yf(g);function _e(){for(var dn=arguments.length,xn=Mt(dn),ms=dn;ms--;)xn[ms]=arguments[ms];if(ve)var wo=mi(_e),vs=Mf(xn,wo);if(M&&(xn=f0(xn,M,z,ve)),Z&&(xn=V1(xn,Z,rt,ve)),dn-=vs,ve&&dn<Vt){var Gi=ra(xn,wo);return p0(g,y,xc,_e.placeholder,E,xn,Gi,ht,Tt,Vt-dn)}var Ea=Yt?E:this,fu=re?Ea[g]:g;return dn=xn.length,ht?xn=lh(xn,ht):Le&&dn>1&&xn.reverse(),Wt&&Tt<dn&&(xn.length=Tt),this&&this!==Ii&&this instanceof _e&&(fu=en||Yf(fu)),fu.apply(Ea,xn)}return _e}function Kf(g,y){return function(E,M){return sy(E,g,y(M),{})}}function Zf(g,y){return function(E,M){var z;if(E===i&&M===i)return y;if(E!==i&&(z=E),M!==i){if(z===i)return M;typeof E=="string"||typeof M=="string"?(E=_r(E),M=_r(M)):(E=I1(E),M=I1(M)),z=g(E,M)}return z}}function d0(g){return Hs(function(y){return y=ni(y,io(De())),We(function(E){var M=this;return g(y,function(z){return eo(z,M,E)})})})}function el(g,y){y=y===i?" ":_r(y);var E=y.length;if(E<2)return E?cs(y,g):y;var M=cs(y,tc(g/qu(y)));return Xl(y)?fs(ai(M),0,g).join(""):M.slice(0,g)}function vy(g,y,E,M){var z=y&b,Z=Yf(g);function rt(){for(var ht=-1,Tt=arguments.length,Vt=-1,Wt=M.length,Yt=Mt(Wt+Tt),re=this&&this!==Ii&&this instanceof rt?Z:g;++Vt<Wt;)Yt[Vt]=M[Vt];for(;Tt--;)Yt[Vt++]=arguments[++ht];return eo(re,z?E:this,Yt)}return rt}function g0(g){return function(y,E,M){return M&&typeof M!="number"&&ar(y,E,M)&&(E=M=i),y=xa(y),E===i?(E=y,y=0):E=xa(E),M=M===i?y<E?1:-1:xa(M),L1(y,E,M,g)}}function Qf(g){return function(y,E){return typeof y=="string"&&typeof E=="string"||(y=yo(y),E=yo(E)),g(y,E)}}function p0(g,y,E,M,z,Z,rt,ht,Tt,Vt){var Wt=y&I,Yt=Wt?rt:i,re=Wt?i:rt,ve=Wt?Z:i,Le=Wt?i:Z;y|=Wt?k:W,y&=~(Wt?W:k),y&A||(y&=-4);var en=[g,y,z,ve,Yt,Le,re,ht,Tt,Vt],_e=E.apply(i,en);return sh(g)&&Ay(_e,en),_e.placeholder=M,Ec(_e,g,y)}function Jf(g){var y=ii[g];return function(E,M){if(E=yo(E),M=M==null?0:Pi(Oe(M),292),M&&oo(E)){var z=(Pn(E)+"e").split("e"),Z=y(z[0]+"e"+(+z[1]+M));return z=(Pn(Z)+"e").split("e"),+(z[0]+"e"+(+z[1]-M))}return y(E)}}var yy=$a&&1/Nd(new $a([,-0]))[1]==_?function(g){return new $a(g)}:f;function Z1(g){return function(y){var E=Qi(y);return E==Nt?Hd(y):E==me?DC(y):Uv(y,g(y))}}function xr(g,y,E,M,z,Z,rt,ht){var Tt=y&B;if(!Tt&&typeof g!="function")throw new ro(l);var Vt=M?M.length:0;if(Vt||(y&=-97,M=z=i),rt=rt===i?rt:gi(Oe(rt),0),ht=ht===i?ht:Oe(ht),Vt-=z?z.length:0,y&W){var Wt=M,Yt=z;M=z=i}var re=Tt?i:eh(g),ve=[g,y,E,M,z,Wt,Yt,Z,rt,ht];if(re&&Ty(ve,re),g=ve[0],y=ve[1],E=ve[2],M=ve[3],z=ve[4],ht=ve[9]=ve[9]===i?Tt?0:g.length:gi(ve[9]-Vt,0),!ht&&y&(I|R)&&(y&=-25),!y||y==b)var Le=q1(g,y,E);else y==I||y==R?Le=kC(g,y,ht):(y==k||y==(b|k))&&!z.length?Le=vy(g,y,E,M):Le=xc.apply(i,ve);var en=re?k1:Ay;return Ec(en(Le,ve),g,y)}function Q1(g,y,E,M){return g===i||mo(g,Zu[E])&&!bn.call(M,E)?y:g}function J1(g,y,E,M,z,Z){return oi(g)&&oi(y)&&(Z.set(y,g),$f(g,y,i,J1,Z),Z.delete(y)),g}function wy(g){return Th(g)?i:g}function th(g,y,E,M,z,Z){var rt=E&T,ht=g.length,Tt=y.length;if(ht!=Tt&&!(rt&&Tt>ht))return!1;var Vt=Z.get(g),Wt=Z.get(y);if(Vt&&Wt)return Vt==y&&Wt==g;var Yt=-1,re=!0,ve=E&D?new tu:i;for(Z.set(g,y),Z.set(y,g);++Yt<ht;){var Le=g[Yt],en=y[Yt];if(M)var _e=rt?M(en,Le,Yt,y,g,Z):M(Le,en,Yt,g,y,Z);if(_e!==i){if(_e)continue;re=!1;break}if(ve){if(!d1(y,function(dn,xn){if(!Pf(ve,xn)&&(Le===dn||z(Le,dn,E,M,Z)))return ve.push(xn)})){re=!1;break}}else if(!(Le===en||z(Le,en,E,M,Z))){re=!1;break}}return Z.delete(g),Z.delete(y),re}function xy(g,y,E,M,z,Z,rt){switch(E){case An:if(g.byteLength!=y.byteLength||g.byteOffset!=y.byteOffset)return!1;g=g.buffer,y=y.buffer;case ji:return!(g.byteLength!=y.byteLength||!Z(new Yl(g),new Yl(y)));case $t:case ot:case ge:return mo(+g,+y);case Rt:return g.name==y.name&&g.message==y.message;case Re:case Qe:return g==y+"";case Nt:var ht=Hd;case me:var Tt=M&T;if(ht||(ht=Nd),g.size!=y.size&&!Tt)return!1;var Vt=rt.get(g);if(Vt)return Vt==y;M|=D,rt.set(g,y);var Wt=th(ht(g),ht(y),M,z,Z,rt);return rt.delete(g),Wt;case ei:if(rc)return rc.call(g)==rc.call(y)}return!1}function tp(g,y,E,M,z,Z){var rt=E&T,ht=m0(g),Tt=ht.length,Vt=m0(y),Wt=Vt.length;if(Tt!=Wt&&!rt)return!1;for(var Yt=Tt;Yt--;){var re=ht[Yt];if(!(rt?re in y:bn.call(y,re)))return!1}var ve=Z.get(g),Le=Z.get(y);if(ve&&Le)return ve==y&&Le==g;var en=!0;Z.set(g,y),Z.set(y,g);for(var _e=rt;++Yt<Tt;){re=ht[Yt];var dn=g[re],xn=y[re];if(M)var ms=rt?M(xn,dn,re,y,g,Z):M(dn,xn,re,g,y,Z);if(!(ms===i?dn===xn||z(dn,xn,E,M,Z):ms)){en=!1;break}_e||(_e=re=="constructor")}if(en&&!_e){var wo=g.constructor,vs=y.constructor;wo!=vs&&"constructor"in g&&"constructor"in y&&!(typeof wo=="function"&&wo instanceof wo&&typeof vs=="function"&&vs instanceof vs)&&(en=!1)}return Z.delete(g),Z.delete(y),en}function Hs(g){return S0(ap(g,i,Qn),g+"")}function m0(g){return M1(g,$i,y0)}function ep(g){return M1(g,jr,rh)}var eh=Mi?function(g){return Mi.get(g)}:f;function li(g){for(var y=g.name+"",E=Bn[y],M=bn.call(Bn,y)?E.length:0;M--;){var z=E[M],Z=z.func;if(Z==null||Z==g)return z.name}return y}function mi(g){var y=bn.call(q,"placeholder")?q:g;return y.placeholder}function De(){var g=q.iteratee||Oh;return g=g===Oh?dc:g,arguments.length?g(arguments[0],arguments[1]):g}function nh(g,y){var E=g.__data__;return C0(y)?E[typeof y=="string"?"string":"hash"]:E.map}function v0(g){for(var y=$i(g),E=y.length;E--;){var M=y[E],z=g[M];y[E]=[M,z,Ns(z)]}return y}function nl(g,y){var E=$v(g,y);return Uf(E)?E:i}function ih(g){var y=bn.call(g,sa),E=g[sa];try{g[sa]=i;var M=!0}catch{}var z=Rr.call(g);return M&&(y?g[sa]=E:delete g[sa]),z}var y0=Ff?function(g){return g==null?[]:(g=Rn(g),ja(Ff(g),function(y){return Lf.call(g,y)}))}:zt,rh=Ff?function(g){for(var y=[];g;)Ua(y,y0(g)),g=Ls(g);return y}:zt,Qi=Zi;(Oo&&Qi(new Oo(new ArrayBuffer(1)))!=An||so&&Qi(new so)!=Nt||Xd&&Qi(Xd.resolve())!=xe||$a&&Qi(new $a)!=me||Zl&&Qi(new Zl)!=Kn)&&(Qi=function(g){var y=Zi(g),E=y==ee?g.constructor:i,M=E?lr(E):"";if(M)switch(M){case hn:return An;case Va:return Nt;case Lo:return xe;case T1:return me;case Wa:return Kn}return y});function IC(g,y,E){for(var M=-1,z=E.length;++M<z;){var Z=E[M],rt=Z.size;switch(Z.type){case"drop":g+=rt;break;case"dropRight":y-=rt;break;case"take":y=Pi(y,g+rt);break;case"takeRight":g=gi(g,y-rt);break}}return{start:g,end:y}}function w0(g){var y=g.match(Cd);return y?y[1].split(Ed):[]}function x0(g,y,E){y=fo(y,g);for(var M=-1,z=y.length,Z=!1;++M<z;){var rt=Fr(y[M]);if(!(Z=g!=null&&E(g,rt)))break;g=g[rt]}return Z||++M!=z?Z:(z=g==null?0:g.length,!!z&&I0(z)&&hs(rt,z)&&(Ge(g)||uu(g)))}function Cy(g){var y=g.length,E=new g.constructor(y);return y&&typeof g[0]=="string"&&bn.call(g,"index")&&(E.index=g.index,E.input=g.input),E}function np(g){return typeof g.constructor=="function"&&!Cc(g)?Xa(Ls(g)):{}}function Ey(g,y,E){var M=g.constructor;switch(y){case ji:return qf(g);case $t:case ot:return new M(+g);case An:return FC(g,E);case Wn:case Zr:case Js:case ta:case Qr:case di:case Pr:case Ei:case Ms:return U1(g,E);case Nt:return new M;case ge:case Qe:return new M(g);case Re:return hy(g);case me:return new M;case ei:return dy(g)}}function ip(g,y){var E=y.length;if(!E)return g;var M=E-1;return y[M]=(E>1?"& ":"")+y[M],y=y.join(E>2?", ":" "),g.replace(Sf,`{
/* [wrapped with `+y+`] */
`)}function rp(g){return Ge(g)||uu(g)||!!(Zv&&g&&g[Zv])}function hs(g,y){var E=typeof g;return y=y??N,!!y&&(E=="number"||E!="symbol"&&Tf.test(g))&&g>-1&&g%1==0&&g<y}function ar(g,y,E){if(!oi(E))return!1;var M=typeof y;return(M=="number"?Gr(E)&&hs(y,E.length):M=="string"&&y in E)?mo(E[y],g):!1}function oh(g,y){if(Ge(g))return!1;var E=typeof g;return E=="number"||E=="symbol"||E=="boolean"||g==null||zr(g)?!0:Nl.test(g)||!Ef.test(g)||y!=null&&g in Rn(y)}function C0(g){var y=typeof g;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?g!=="__proto__":g===null}function sh(g){var y=li(g),E=q[y];if(typeof E!="function"||!(y in $e.prototype))return!1;if(g===E)return!0;var M=eh(E);return!!M&&g===M[0]}function Sy(g){return!!Ud&&Ud in g}var op=zd?vo:Bt;function Cc(g){var y=g&&g.constructor,E=typeof y=="function"&&y.prototype||Zu;return g===E}function Ns(g){return g===g&&!oi(g)}function E0(g,y){return function(E){return E==null?!1:E[g]===y&&(y!==i||g in Rn(E))}}function HC(g){var y=xh(g,function(M){return E.size===d&&E.clear(),M}),E=y.cache;return y}function Ty(g,y){var E=g[1],M=y[1],z=E|M,Z=z<(b|B|U),rt=M==U&&E==I||M==U&&E==nt&&g[7].length<=y[8]||M==(U|nt)&&y[7].length<=y[8]&&E==I;if(!(Z||rt))return g;M&b&&(g[2]=y[2],z|=E&b?0:A);var ht=y[3];if(ht){var Tt=g[3];g[3]=Tt?f0(Tt,ht,y[4]):ht,g[4]=Tt?ra(g[3],p):y[4]}return ht=y[5],ht&&(Tt=g[5],g[5]=Tt?V1(Tt,ht,y[6]):ht,g[6]=Tt?ra(g[5],p):y[6]),ht=y[7],ht&&(g[7]=ht),M&U&&(g[8]=g[8]==null?y[8]:Pi(g[8],y[8])),g[9]==null&&(g[9]=y[9]),g[0]=y[0],g[1]=z,g}function da(g){var y=[];if(g!=null)for(var E in Rn(g))y.push(E);return y}function sp(g){return Rr.call(g)}function ap(g,y,E){return y=gi(y===i?g.length-1:y,0),function(){for(var M=arguments,z=-1,Z=gi(M.length-y,0),rt=Mt(Z);++z<Z;)rt[z]=M[y+z];z=-1;for(var ht=Mt(y+1);++z<y;)ht[z]=M[z];return ht[y]=E(rt),eo(g,this,ht)}}function ah(g,y){return y.length<2?g:Is(g,co(y,0,-1))}function lh(g,y){for(var E=g.length,M=Pi(y.length,E),z=wr(g);M--;){var Z=y[M];g[M]=hs(Z,E)?z[Z]:i}return g}function $n(g,y){if(!(y==="constructor"&&typeof g[y]=="function")&&y!="__proto__")return g[y]}var Ay=ga(k1),uh=Kl||function(g,y){return Ii.setTimeout(g,y)},S0=ga(ay);function Ec(g,y,E){var M=y+"";return S0(g,ip(M,Dy(w0(M),E)))}function ga(g){var y=0,E=0;return function(){var M=Mo(),z=mt-(M-E);if(E=M,z>0){if(++y>=ct)return arguments[0]}else y=0;return g.apply(i,arguments)}}function ch(g,y){var E=-1,M=g.length,z=M-1;for(y=y===i?M:y;++E<y;){var Z=mc(E,z),rt=g[Z];g[Z]=g[E],g[E]=rt}return g.length=y,g}var lp=HC(function(g){var y=[];return g.charCodeAt(0)===46&&y.push(""),g.replace(i1,function(E,M,z,Z){y.push(z?Z.replace(or,"$1"):M||E)}),y});function Fr(g){if(typeof g=="string"||zr(g))return g;var y=g+"";return y=="0"&&1/g==-1/0?"-0":y}function lr(g){if(g!=null){try{return jd.call(g)}catch{}try{return g+""}catch{}}return""}function Dy(g,y){return no(it,function(E){var M="_."+E[0];y&E[1]&&!Od(g,M)&&g.push(M)}),g.sort()}function T0(g){if(g instanceof $e)return g.clone();var y=new Or(g.__wrapped__,g.__chain__);return y.__actions__=wr(g.__actions__),y.__index__=g.__index__,y.__values__=g.__values__,y}function by(g,y,E){(E?ar(g,y,E):y===i)?y=1:y=gi(Oe(y),0);var M=g==null?0:g.length;if(!M||y<1)return[];for(var z=0,Z=0,rt=Mt(tc(M/y));z<M;)rt[Z++]=co(g,z,z+=y);return rt}function up(g){for(var y=-1,E=g==null?0:g.length,M=0,z=[];++y<E;){var Z=g[y];Z&&(z[M++]=Z)}return z}function cp(){var g=arguments.length;if(!g)return[];for(var y=Mt(g-1),E=arguments[0],M=g;M--;)y[M-1]=arguments[M];return Ua(Ge(E)?wr(E):[E],Hi(y,1))}var A0=We(function(g,y){return Di(g)?ko(g,Hi(y,1,Di,!0)):[]}),By=We(function(g,y){var E=Jn(y);return Di(E)&&(E=i),Di(g)?ko(g,Hi(y,1,Di,!0),De(E,2)):[]}),pa=We(function(g,y){var E=Jn(y);return Di(E)&&(E=i),Di(g)?ko(g,Hi(y,1,Di,!0),i,E):[]});function Oi(g,y,E){var M=g==null?0:g.length;return M?(y=E||y===i?1:Oe(y),co(g,y<0?0:y,M)):[]}function fp(g,y,E){var M=g==null?0:g.length;return M?(y=E||y===i?1:Oe(y),y=M-y,co(g,0,y<0?0:y)):[]}function Py(g,y){return g&&g.length?Wf(g,De(y,3),!0,!0):[]}function Ui(g,y){return g&&g.length?Wf(g,De(y,3),!0):[]}function NC(g,y,E,M){var z=g==null?0:g.length;return z?(E&&typeof E!="number"&&ar(g,y,E)&&(E=0,M=z),Gf(g,y,E,M)):[]}function hp(g,y,E){var M=g==null?0:g.length;if(!M)return-1;var z=E==null?0:Oe(E);return z<0&&(z=gi(M+z,0)),Ld(g,De(y,3),z)}function dp(g,y,E){var M=g==null?0:g.length;if(!M)return-1;var z=M-1;return E!==i&&(z=Oe(E),z=E<0?gi(M+z,0):Pi(z,M-1)),Ld(g,De(y,3),z,!0)}function Qn(g){var y=g==null?0:g.length;return y?Hi(g,1):[]}function kr(g){var y=g==null?0:g.length;return y?Hi(g,_):[]}function ma(g,y){var E=g==null?0:g.length;return E?(y=y===i?1:Oe(y),Hi(g,y)):[]}function My(g){for(var y=-1,E=g==null?0:g.length,M={};++y<E;){var z=g[y];M[z[0]]=z[1]}return M}function gp(g){return g&&g.length?g[0]:i}function Ry(g,y,E){var M=g==null?0:g.length;if(!M)return-1;var z=E==null?0:Oe(E);return z<0&&(z=gi(M+z,0)),Xu(g,y,z)}function GC(g){var y=g==null?0:g.length;return y?co(g,0,-1):[]}var D0=We(function(g){var y=ni(g,z1);return y.length&&y[0]===g[0]?jf(y):[]}),Ir=We(function(g){var y=Jn(g),E=ni(g,z1);return y===Jn(E)?y=i:E.pop(),E.length&&E[0]===g[0]?jf(E,De(y,2)):[]}),ds=We(function(g){var y=Jn(g),E=ni(g,z1);return y=typeof y=="function"?y:i,y&&E.pop(),E.length&&E[0]===g[0]?jf(E,i,y):[]});function Oy(g,y){return g==null?"":ec.call(g,y)}function Jn(g){var y=g==null?0:g.length;return y?g[y-1]:i}function Ly(g,y,E){var M=g==null?0:g.length;if(!M)return-1;var z=M;return E!==i&&(z=Oe(E),z=z<0?gi(M+z,0):Pi(z,M-1)),y===y?BC(g,y,z):Ld(g,zv,z,!0)}function va(g,y){return g&&g.length?s0(g,Oe(y)):i}var ou=We(Gs);function Gs(g,y){return g&&g.length&&y&&y.length?gc(g,y):g}function pp(g,y,E){return g&&g.length&&y&&y.length?gc(g,y,De(E,2)):g}function mp(g,y,E){return g&&g.length&&y&&y.length?gc(g,y,i,E):g}var gs=Hs(function(g,y){var E=g==null?0:g.length,M=cc(g,y);return pc(g,ni(y,function(z){return hs(z,E)?+z:z}).sort($1)),M});function _y(g,y){var E=[];if(!(g&&g.length))return E;var M=-1,z=[],Z=g.length;for(y=De(y,3);++M<Z;){var rt=g[M];y(rt,M,g)&&(E.push(rt),z.push(M))}return pc(g,z),E}function il(g){return g==null?g:_s.call(g)}function fh(g,y,E){var M=g==null?0:g.length;return M?(E&&typeof E!="number"&&ar(g,y,E)?(y=0,E=M):(y=y==null?0:Oe(y),E=E===i?M:Oe(E)),co(g,y,E)):[]}function hh(g,y){return yc(g,y)}function Sc(g,y,E){return l0(g,y,De(E,2))}function Fy(g,y){var E=g==null?0:g.length;if(E){var M=yc(g,y);if(M<E&&mo(g[M],y))return M}return-1}function ky(g,y){return yc(g,y,!0)}function dh(g,y,E){return l0(g,y,De(E,2),!0)}function Iy(g,y){var E=g==null?0:g.length;if(E){var M=yc(g,y,!0)-1;if(mo(g[M],y))return M}return-1}function b0(g){return g&&g.length?cy(g):[]}function Hy(g,y){return g&&g.length?cy(g,De(y,2)):[]}function zC(g){var y=g==null?0:g.length;return y?co(g,1,y):[]}function jC(g,y,E){return g&&g.length?(y=E||y===i?1:Oe(y),co(g,0,y<0?0:y)):[]}function Dn(g,y,E){var M=g==null?0:g.length;return M?(y=E||y===i?1:Oe(y),y=M-y,co(g,y<0?0:y,M)):[]}function Vn(g,y){return g&&g.length?Wf(g,De(y,3),!1,!0):[]}function on(g,y){return g&&g.length?Wf(g,De(y,3)):[]}var cn=We(function(g){return ha(Hi(g,1,Di,!0))}),On=We(function(g){var y=Jn(g);return Di(y)&&(y=i),ha(Hi(g,1,Di,!0),De(y,2))}),ho=We(function(g){var y=Jn(g);return y=typeof y=="function"?y:i,ha(Hi(g,1,Di,!0),i,y)});function rl(g){return g&&g.length?ha(g):[]}function Tc(g,y){return g&&g.length?ha(g,De(y,2)):[]}function vp(g,y){return y=typeof y=="function"?y:i,g&&g.length?ha(g,i,y):[]}function ps(g){if(!(g&&g.length))return[];var y=0;return g=ja(g,function(E){if(Di(E))return y=gi(E.length,y),!0}),kd(y,function(E){return ni(g,Vl(E))})}function ui(g,y){if(!(g&&g.length))return[];var E=ps(g);return y==null?E:ni(E,function(M){return eo(y,i,M)})}var ol=We(function(g,y){return Di(g)?ko(g,y):[]}),su=We(function(g){return u0(ja(g,Di))}),yp=We(function(g){var y=Jn(g);return Di(y)&&(y=i),u0(ja(g,Di),De(y,2))}),go=We(function(g){var y=Jn(g);return y=typeof y=="function"?y:i,u0(ja(g,Di),i,y)}),Ac=We(ps);function gh(g,y){return G1(g||[],y||[],ss)}function Hr(g,y){return G1(g||[],y||[],vc)}var wp=We(function(g){var y=g.length,E=y>1?g[y-1]:i;return E=typeof E=="function"?(g.pop(),E):i,ui(g,E)});function ph(g){var y=q(g);return y.__chain__=!0,y}function Ny(g,y){return y(g),g}function au(g,y){return y(g)}var B0=Hs(function(g){var y=g.length,E=y?g[0]:0,M=this.__wrapped__,z=function(Z){return cc(Z,g)};return y>1||this.__actions__.length||!(M instanceof $e)||!hs(E)?this.thru(z):(M=M.slice(E,+E+(y?1:0)),M.__actions__.push({func:au,args:[z],thisArg:i}),new Or(M,this.__chain__).thru(function(Z){return y&&!Z.length&&Z.push(i),Z}))});function sl(){return ph(this)}function Ni(){return new Or(this.value(),this.__chain__)}function al(){this.__values__===i&&(this.__values__=u2(this.value()));var g=this.__index__>=this.__values__.length,y=g?i:this.__values__[this.__index__++];return{done:g,value:y}}function Dc(){return this}function ya(g){for(var y,E=this;E instanceof qa;){var M=T0(E);M.__index__=0,M.__values__=i,y?z.__wrapped__=M:y=M;var z=M;E=E.__wrapped__}return z.__wrapped__=g,y}function xp(){var g=this.__wrapped__;if(g instanceof $e){var y=g;return this.__actions__.length&&(y=new $e(this)),y=y.reverse(),y.__actions__.push({func:au,args:[il],thisArg:i}),new Or(y,this.__chain__)}return this.thru(il)}function Cp(){return N1(this.__wrapped__,this.__actions__)}var Gy=h0(function(g,y,E){bn.call(g,E)?++g[E]:ao(g,E,1)});function mh(g,y,E){var M=Ge(g)?Hv:Za;return E&&ar(g,y,E)&&(y=i),M(g,De(y,3))}function Ep(g,y){var E=Ge(g)?ja:t0;return E(g,De(y,3))}var po=K1(hp),zy=K1(dp);function Nr(g,y){return Hi(vh(g,y),1)}function jy(g,y){return Hi(vh(g,y),_)}function Uy(g,y,E){return E=E===i?1:Oe(E),Hi(vh(g,y),E)}function $y(g,y){var E=Ge(g)?no:ks;return E(g,De(y,3))}function wa(g,y){var E=Ge(g)?xC:Jd;return E(g,De(y,3))}var P0=h0(function(g,y,E){bn.call(g,E)?g[E].push(y):ao(g,E,[y])});function Sp(g,y,E,M){g=Gr(g)?g:Fc(g),E=E&&!M?Oe(E):0;var z=g.length;return E<0&&(E=gi(z+E,0)),bh(g)?E<=z&&g.indexOf(y,E)>-1:!!z&&Xu(g,y,E)>-1}var bc=We(function(g,y,E){var M=-1,z=typeof y=="function",Z=Gr(g)?Mt(g.length):[];return ks(g,function(rt){Z[++M]=z?eo(y,rt,E):Ho(rt,y,E)}),Z}),Vy=h0(function(g,y,E){ao(g,E,y)});function vh(g,y){var E=Ge(g)?ni:r0;return E(g,De(y,3))}function Wy(g,y,E,M){return g==null?[]:(Ge(y)||(y=y==null?[]:[y]),E=M?i:E,Ge(E)||(E=E==null?[]:[E]),a0(g,y,E))}var Xy=h0(function(g,y,E){g[E?0:1].push(y)},function(){return[[],[]]});function M0(g,y,E){var M=Ge(g)?h1:p1,z=arguments.length<3;return M(g,De(y,4),E,z,ks)}function Tp(g,y,E){var M=Ge(g)?Nv:p1,z=arguments.length<3;return M(g,De(y,4),E,z,Jd)}function UC(g,y){var E=Ge(g)?ja:t0;return E(g,L0(De(y,3)))}function $C(g){var y=Ge(g)?Nf:_1;return y(g)}function VC(g,y,E){(E?ar(g,y,E):y===i)?y=1:y=Oe(y);var M=Ge(g)?Zd:F1;return M(g,y)}function qy(g){var y=Ge(g)?iy:ly;return y(g)}function Yy(g){if(g==null)return 0;if(Gr(g))return bh(g)?qu(g):g.length;var y=Qi(g);return y==Nt||y==me?g.size:Ja(g).length}function Bc(g,y,E){var M=Ge(g)?d1:uy;return E&&ar(g,y,E)&&(y=i),M(g,De(y,3))}var R0=We(function(g,y){if(g==null)return[];var E=y.length;return E>1&&ar(g,y[0],y[1])?y=[]:E>2&&ar(y[0],y[1],y[2])&&(y=[y[0]]),a0(g,Hi(y,1),[])}),yh=Wd||function(){return Ii.Date.now()};function Ky(g,y){if(typeof y!="function")throw new ro(l);return g=Oe(g),function(){if(--g<1)return y.apply(this,arguments)}}function Ap(g,y,E){return y=E?i:y,y=g&&y==null?g.length:y,xr(g,U,i,i,i,i,y)}function Dp(g,y){var E;if(typeof y!="function")throw new ro(l);return g=Oe(g),function(){return--g>0&&(E=y.apply(this,arguments)),g<=1&&(y=i),E}}var O0=We(function(g,y,E){var M=b;if(E.length){var z=ra(E,mi(O0));M|=k}return xr(g,M,y,E,z)}),bp=We(function(g,y,E){var M=b|B;if(E.length){var z=ra(E,mi(bp));M|=k}return xr(y,M,g,E,z)});function wh(g,y,E){y=E?i:y;var M=xr(g,I,i,i,i,i,i,y);return M.placeholder=wh.placeholder,M}function Bp(g,y,E){y=E?i:y;var M=xr(g,R,i,i,i,i,i,y);return M.placeholder=Bp.placeholder,M}function Pp(g,y,E){var M,z,Z,rt,ht,Tt,Vt=0,Wt=!1,Yt=!1,re=!0;if(typeof g!="function")throw new ro(l);y=yo(y)||0,oi(E)&&(Wt=!!E.leading,Yt="maxWait"in E,Z=Yt?gi(yo(E.maxWait)||0,y):Z,re="trailing"in E?!!E.trailing:re);function ve(Gi){var Ea=M,fu=z;return M=z=i,Vt=Gi,rt=g.apply(fu,Ea),rt}function Le(Gi){return Vt=Gi,ht=uh(dn,y),Wt?ve(Gi):rt}function en(Gi){var Ea=Gi-Tt,fu=Gi-Vt,iD=y-Ea;return Yt?Pi(iD,Z-fu):iD}function _e(Gi){var Ea=Gi-Tt,fu=Gi-Vt;return Tt===i||Ea>=y||Ea<0||Yt&&fu>=Z}function dn(){var Gi=yh();if(_e(Gi))return xn(Gi);ht=uh(dn,en(Gi))}function xn(Gi){return ht=i,re&&M?ve(Gi):(M=z=i,rt)}function ms(){ht!==i&&Xf(ht),Vt=0,M=Tt=z=ht=i}function wo(){return ht===i?rt:xn(yh())}function vs(){var Gi=yh(),Ea=_e(Gi);if(M=arguments,z=this,Tt=Gi,Ea){if(ht===i)return Le(Tt);if(Yt)return Xf(ht),ht=uh(dn,y),ve(Tt)}return ht===i&&(ht=uh(dn,y)),rt}return vs.cancel=ms,vs.flush=wo,vs}var Ln=We(function(g,y){return P1(g,1,y)}),Mp=We(function(g,y,E){return P1(g,yo(y)||0,E)});function WC(g){return xr(g,st)}function xh(g,y){if(typeof g!="function"||y!=null&&typeof y!="function")throw new ro(l);var E=function(){var M=arguments,z=y?y.apply(this,M):M[0],Z=E.cache;if(Z.has(z))return Z.get(z);var rt=g.apply(this,M);return E.cache=Z.set(z,rt)||Z,rt};return E.cache=new(xh.Cache||os),E}xh.Cache=os;function L0(g){if(typeof g!="function")throw new ro(l);return function(){var y=arguments;switch(y.length){case 0:return!g.call(this);case 1:return!g.call(this,y[0]);case 2:return!g.call(this,y[0],y[1]);case 3:return!g.call(this,y[0],y[1],y[2])}return!g.apply(this,y)}}function XC(g){return Dp(2,g)}var qC=fy(function(g,y){y=y.length==1&&Ge(y[0])?ni(y[0],io(De())):ni(Hi(y,1),io(De()));var E=y.length;return We(function(M){for(var z=-1,Z=Pi(M.length,E);++z<Z;)M[z]=y[z].call(this,M[z]);return eo(g,this,M)})}),Pc=We(function(g,y){var E=ra(y,mi(Pc));return xr(g,k,i,y,E)}),lu=We(function(g,y){var E=ra(y,mi(lu));return xr(g,W,i,y,E)}),Rp=Hs(function(g,y){return xr(g,nt,i,i,i,y)});function _0(g,y){if(typeof g!="function")throw new ro(l);return y=y===i?y:Oe(y),We(g,y)}function Op(g,y){if(typeof g!="function")throw new ro(l);return y=y==null?0:gi(Oe(y),0),We(function(E){var M=E[y],z=fs(E,0,y);return M&&Ua(z,M),eo(g,this,z)})}function ll(g,y,E){var M=!0,z=!0;if(typeof g!="function")throw new ro(l);return oi(E)&&(M="leading"in E?!!E.leading:M,z="trailing"in E?!!E.trailing:z),Pp(g,y,{leading:M,maxWait:y,trailing:z})}function zs(g){return Ap(g,1)}function Ch(g,y){return Pc(c0(y),g)}function YC(){if(!arguments.length)return[];var g=arguments[0];return Ge(g)?g:[g]}function Zy(g){return yr(g,x)}function Qy(g,y){return y=typeof y=="function"?y:i,yr(g,x,y)}function Jy(g){return yr(g,m|x)}function t2(g,y){return y=typeof y=="function"?y:i,yr(g,m|x,y)}function KC(g,y){return y==null||Ka(g,y,$i(y))}function mo(g,y){return g===y||g!==g&&y!==y}var e2=Qf(zf),n2=Qf(function(g,y){return g>=y}),uu=Lr(function(){return arguments}())?Lr:function(g){return vi(g)&&bn.call(g,"callee")&&!Lf.call(g,"callee")},Ge=Mt.isArray,Lp=Lv?io(Lv):Ti;function Gr(g){return g!=null&&I0(g.length)&&!vo(g)}function Di(g){return vi(g)&&Gr(g)}function Eh(g){return g===!0||g===!1||vi(g)&&Zi(g)==$t}var ul=Jv||Bt,i2=_v?io(_v):n0;function sn(g){return vi(g)&&g.nodeType===1&&!Th(g)}function _p(g){if(g==null)return!0;if(Gr(g)&&(Ge(g)||typeof g=="string"||typeof g.splice=="function"||ul(g)||cl(g)||uu(g)))return!g.length;var y=Qi(g);if(y==Nt||y==me)return!g.size;if(Cc(g))return!Ja(g).length;for(var E in g)if(bn.call(g,E))return!1;return!0}function F0(g,y){return uo(g,y)}function Fp(g,y,E){E=typeof E=="function"?E:i;var M=E?E(g,y):i;return M===i?uo(g,y,i,E):!!M}function k0(g){if(!vi(g))return!1;var y=Zi(g);return y==Rt||y==Pt||typeof g.message=="string"&&typeof g.name=="string"&&!Th(g)}function kp(g){return typeof g=="number"&&oo(g)}function vo(g){if(!oi(g))return!1;var y=Zi(g);return y==It||y==he||y==Lt||y==le}function Sh(g){return typeof g=="number"&&g==Oe(g)}function I0(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=N}function oi(g){var y=typeof g;return g!=null&&(y=="object"||y=="function")}function vi(g){return g!=null&&typeof g=="object"}var r2=Rd?io(Rd):In;function o2(g,y){return g===y||pi(g,y,v0(y))}function s2(g,y,E){return E=typeof E=="function"?E:i,pi(g,y,v0(y),E)}function Hn(g){return Hp(g)&&g!=+g}function Ip(g){if(op(g))throw new Ne(a);return Uf(g)}function Ji(g){return g===null}function ZC(g){return g==null}function Hp(g){return typeof g=="number"||vi(g)&&Zi(g)==ge}function Th(g){if(!vi(g)||Zi(g)!=ee)return!1;var y=Ls(g);if(y===null)return!0;var E=bn.call(y,"constructor")&&y.constructor;return typeof E=="function"&&E instanceof E&&jd.call(E)==$d}var Ah=Fv?io(Fv):hc;function Np(g){return Sh(g)&&g>=-9007199254740991&&g<=N}var Dh=kv?io(kv):iu;function bh(g){return typeof g=="string"||!Ge(g)&&vi(g)&&Zi(g)==Qe}function zr(g){return typeof g=="symbol"||vi(g)&&Zi(g)==ei}var cl=Iv?io(Iv):i0;function Gp(g){return g===i}function QC(g){return vi(g)&&Qi(g)==Kn}function a2(g){return vi(g)&&Zi(g)==Br}var JC=Qf(ri),l2=Qf(function(g,y){return g<=y});function u2(g){if(!g)return[];if(Gr(g))return bh(g)?ai(g):wr(g);if(Yi&&g[Yi])return x1(g[Yi]());var y=Qi(g),E=y==Nt?Hd:y==me?Nd:Fc;return E(g)}function xa(g){if(!g)return g===0?g:0;if(g=yo(g),g===_||g===-1/0){var y=g<0?-1:1;return y*$}return g===g?g:0}function Oe(g){var y=xa(g),E=y%1;return y===y?E?y-E:y:0}function zp(g){return g?as(Oe(g),0,F):0}function yo(g){if(typeof g=="number")return g;if(zr(g))return Q;if(oi(g)){var y=typeof g.valueOf=="function"?g.valueOf():g;g=oi(y)?y+"":y}if(typeof g!="string")return g===0?g:+g;g=Wl(g);var E=o1.test(g);return E||Gl.test(g)?Pd(g.slice(2),E?2:8):r1.test(g)?Q:+g}function H0(g){return No(g,jr(g))}function tE(g){return g?as(Oe(g),-9007199254740991,N):g===0?g:0}function Pn(g){return g==null?"":_r(g)}var c2=tl(function(g,y){if(Cc(y)||Gr(y)){No(y,$i(y),g);return}for(var E in y)bn.call(y,E)&&ss(g,E,y[E])}),N0=tl(function(g,y){No(y,jr(y),g)}),Mc=tl(function(g,y,E,M){No(y,jr(y),g,M)}),eE=tl(function(g,y,E,M){No(y,$i(y),g,M)}),Go=Hs(cc);function jp(g,y){var E=Xa(g);return y==null?E:B1(E,y)}var f2=We(function(g,y){g=Rn(g);var E=-1,M=y.length,z=M>2?y[2]:i;for(z&&ar(y[0],y[1],z)&&(M=1);++E<M;)for(var Z=y[E],rt=jr(Z),ht=-1,Tt=rt.length;++ht<Tt;){var Vt=rt[ht],Wt=g[Vt];(Wt===i||mo(Wt,Zu[Vt])&&!bn.call(g,Vt))&&(g[Vt]=Z[Vt])}return g}),h2=We(function(g){return g.push(i,J1),eo(Oc,i,g)});function d2(g,y){return Gv(g,De(y,3),us)}function Bh(g,y){return Gv(g,De(y,3),e0)}function zo(g,y){return g==null?g:nu(g,De(y,3),jr)}function g2(g,y){return g==null?g:fc(g,De(y,3),jr)}function G0(g,y){return g&&us(g,De(y,3))}function Ca(g,y){return g&&e0(g,De(y,3))}function nE(g){return g==null?[]:fa(g,$i(g))}function iE(g){return g==null?[]:fa(g,jr(g))}function fl(g,y,E){var M=g==null?i:Is(g,y);return M===i?E:M}function p2(g,y){return g!=null&&x0(g,y,lo)}function Up(g,y){return g!=null&&x0(g,y,Io)}var rE=Kf(function(g,y,E){y!=null&&typeof y.toString!="function"&&(y=Rr.call(y)),g[y]=E},Ic(Cr)),oE=Kf(function(g,y,E){y!=null&&typeof y.toString!="function"&&(y=Rr.call(y)),bn.call(g,y)?g[y].push(E):g[y]=[E]},De),sE=We(Ho);function $i(g){return Gr(g)?Kd(g):Ja(g)}function jr(g){return Gr(g)?Kd(g,!0):LC(g)}function aE(g,y){var E={};return y=De(y,3),us(g,function(M,z,Z){ao(E,y(M,z,Z),M)}),E}function m2(g,y){var E={};return y=De(y,3),us(g,function(M,z,Z){ao(E,z,y(M,z,Z))}),E}var Rc=tl(function(g,y,E){$f(g,y,E)}),Oc=tl(function(g,y,E,M){$f(g,y,E,M)}),v2=Hs(function(g,y){var E={};if(g==null)return E;var M=!1;y=ni(y,function(Z){return Z=fo(Z,g),M||(M=Z.length>1),Z}),No(g,ep(g),E),M&&(E=yr(E,m|w|x,wy));for(var z=y.length;z--;)Vf(E,y[z]);return E});function lE(g,y){return _c(g,L0(De(y)))}var Lc=Hs(function(g,y){return g==null?{}:O1(g,y)});function _c(g,y){if(g==null)return{};var E=ni(ep(g),function(M){return[M]});return y=De(y),sr(g,E,function(M,z){return y(M,z[0])})}function y2(g,y,E){y=fo(y,g);var M=-1,z=y.length;for(z||(z=1,g=i);++M<z;){var Z=g==null?i:g[Fr(y[M])];Z===i&&(M=z,Z=E),g=vo(Z)?Z.call(g):Z}return g}function z0(g,y,E){return g==null?g:vc(g,y,E)}function $p(g,y,E,M){return M=typeof M=="function"?M:i,g==null?g:vc(g,y,E,M)}var j0=Z1($i),Ph=Z1(jr);function w2(g,y,E){var M=Ge(g),z=M||ul(g)||cl(g);if(y=De(y,4),E==null){var Z=g&&g.constructor;z?E=M?new Z:[]:oi(g)?E=vo(Z)?Xa(Ls(g)):{}:E={}}return(z?no:us)(g,function(rt,ht,Tt){return y(E,rt,ht,Tt)}),E}function x2(g,y){return g==null?!0:Vf(g,y)}function uE(g,y,E){return g==null?g:H1(g,y,c0(E))}function C2(g,y,E,M){return M=typeof M=="function"?M:i,g==null?g:H1(g,y,c0(E),M)}function Fc(g){return g==null?[]:m1(g,$i(g))}function Vp(g){return g==null?[]:m1(g,jr(g))}function cE(g,y,E){return E===i&&(E=y,y=i),E!==i&&(E=yo(E),E=E===E?E:0),y!==i&&(y=yo(y),y=y===y?y:0),as(yo(g),y,E)}function U0(g,y,E){return y=xa(y),E===i?(E=y,y=0):E=xa(E),g=yo(g),Qa(g,y,E)}function $0(g,y,E){if(E&&typeof E!="boolean"&&ar(g,y,E)&&(y=E=i),E===i&&(typeof y=="boolean"?(E=y,y=i):typeof g=="boolean"&&(E=g,g=i)),g===i&&y===i?(g=0,y=1):(g=xa(g),y===i?(y=g,g=0):y=xa(y)),g>y){var M=g;g=y,y=M}if(E||g%1||y%1){var z=aa();return Pi(g+z*(y-g+$l("1e-"+((z+"").length-1))),y)}return mc(g,y)}var V0=ru(function(g,y,E){return y=y.toLowerCase(),g+(E?E2(y):y)});function E2(g){return cu(Pn(g).toLowerCase())}function kc(g){return g=Pn(g),g&&g.replace(Na,Rf).replace(Rv,"")}function fE(g,y,E){g=Pn(g),y=_r(y);var M=g.length;E=E===i?M:as(Oe(E),0,M);var z=E;return E-=y.length,E>=0&&g.slice(E,z)==y}function S2(g){return g=Pn(g),g&&_u.test(g)?g.replace(Il,AC):g}function T2(g){return g=Pn(g),g&&xd.test(g)?g.replace(Fu,"\\$&"):g}var A2=ru(function(g,y,E){return g+(E?"-":"")+y.toLowerCase()}),D2=ru(function(g,y,E){return g+(E?" ":"")+y.toLowerCase()}),Wp=Y1("toLowerCase");function b2(g,y,E){g=Pn(g),y=Oe(y);var M=y?qu(g):0;if(!y||M>=y)return g;var z=(y-M)/2;return el(_f(z),E)+g+el(tc(z),E)}function B2(g,y,E){g=Pn(g),y=Oe(y);var M=y?qu(g):0;return y&&M<y?g+el(y-M,E):g}function W0(g,y,E){g=Pn(g),y=Oe(y);var M=y?qu(g):0;return y&&M<y?el(y-M,E)+g:g}function hE(g,y,E){return E||y==null?y=0:y&&(y=+y),Ro(Pn(g).replace(ku,""),y||0)}function dE(g,y,E){return(E?ar(g,y,E):y===i)?y=1:y=Oe(y),cs(Pn(g),y)}function Xp(){var g=arguments,y=Pn(g[0]);return g.length<3?y:y.replace(g[1],g[2])}var qp=ru(function(g,y,E){return g+(E?"_":"")+y.toLowerCase()});function X0(g,y,E){return E&&typeof E!="number"&&ar(g,y,E)&&(y=E=i),E=E===i?F:E>>>0,E?(g=Pn(g),g&&(typeof y=="string"||y!=null&&!Ah(y))&&(y=_r(y),!y&&Xl(g))?fs(ai(g),0,E):g.split(y,E)):[]}var Yp=ru(function(g,y,E){return g+(E?" ":"")+cu(y)});function P2(g,y,E){return g=Pn(g),E=E==null?0:as(Oe(E),0,g.length),y=_r(y),g.slice(E,E+y.length)==y}function Kp(g,y,E){var M=q.templateSettings;E&&ar(g,y,E)&&(y=i),g=Pn(g),y=Mc({},y,M,Q1);var z=Mc({},y.imports,M.imports,Q1),Z=$i(z),rt=m1(z,Z),ht,Tt,Vt=0,Wt=y.interpolate||ts,Yt="__p += '",re=Gd((y.escape||ts).source+"|"+Wt.source+"|"+(Wt===Cf?Ha:ts).source+"|"+(y.evaluate||ts).source+"|$","g"),ve="//# sourceURL="+(bn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++f1+"]")+`
`;g.replace(re,function(_e,dn,xn,ms,wo,vs){return xn||(xn=ms),Yt+=g.slice(Vt,vs).replace(Ga,Id),dn&&(ht=!0,Yt+=`' +
__e(`+dn+`) +
'`),wo&&(Tt=!0,Yt+=`';
`+wo+`;
__p += '`),xn&&(Yt+=`' +
((__t = (`+xn+`)) == null ? '' : __t) +
'`),Vt=vs+_e.length,_e}),Yt+=`';
`;var Le=bn.call(y,"variable")&&y.variable;if(!Le)Yt=`with (obj) {
`+Yt+`
}
`;else if(ki.test(Le))throw new Ne(c);Yt=(Tt?Yt.replace(wd,""):Yt).replace(e1,"$1").replace(Jr,"$1;"),Yt="function("+(Le||"obj")+`) {
`+(Le?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ht?", __e = _.escape":"")+(Tt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Yt+`return __p
}`;var en=Zp(function(){return rn(Z,ve+"return "+Yt).apply(i,rt)});if(en.source=Yt,k0(en))throw en;return en}function hl(g){return Pn(g).toLowerCase()}function dl(g){return Pn(g).toUpperCase()}function gl(g,y,E){if(g=Pn(g),g&&(E||y===i))return Wl(g);if(!g||!(y=_r(y)))return g;var M=ai(g),z=ai(y),Z=v1(M,z),rt=y1(M,z)+1;return fs(M,Z,rt).join("")}function Mh(g,y,E){if(g=Pn(g),g&&(E||y===i))return g.slice(0,Yu(g)+1);if(!g||!(y=_r(y)))return g;var M=ai(g),z=y1(M,ai(y))+1;return fs(M,0,z).join("")}function Rh(g,y,E){if(g=Pn(g),g&&(E||y===i))return g.replace(ku,"");if(!g||!(y=_r(y)))return g;var M=ai(g),z=v1(M,ai(y));return fs(M,z).join("")}function pl(g,y){var E=ft,M=Et;if(oi(y)){var z="separator"in y?y.separator:z;E="length"in y?Oe(y.length):E,M="omission"in y?_r(y.omission):M}g=Pn(g);var Z=g.length;if(Xl(g)){var rt=ai(g);Z=rt.length}if(E>=Z)return g;var ht=E-qu(M);if(ht<1)return M;var Tt=rt?fs(rt,0,ht).join(""):g.slice(0,ht);if(z===i)return Tt+M;if(rt&&(ht+=Tt.length-ht),Ah(z)){if(g.slice(ht).search(z)){var Vt,Wt=Tt;for(z.global||(z=Gd(z.source,Pn(Hu.exec(z))+"g")),z.lastIndex=0;Vt=z.exec(Wt);)var Yt=Vt.index;Tt=Tt.slice(0,Yt===i?ht:Yt)}}else if(g.indexOf(_r(z),ht)!=ht){var re=Tt.lastIndexOf(z);re>-1&&(Tt=Tt.slice(0,re))}return Tt+M}function gE(g){return g=Pn(g),g&&Rs.test(g)?g.replace(kl,Vv):g}var M2=ru(function(g,y,E){return g+(E?" ":"")+y.toUpperCase()}),cu=Y1("toUpperCase");function R2(g,y,E){return g=Pn(g),y=E?i:y,y===i?w1(g)?qv(g):SC(g):g.match(y)||[]}var Zp=We(function(g,y){try{return eo(g,i,y)}catch(E){return k0(E)?E:new Ne(E)}}),q0=Hs(function(g,y){return no(y,function(E){E=Fr(E),ao(g,E,O0(g[E],g))}),g});function O2(g){var y=g==null?0:g.length,E=De();return g=y?ni(g,function(M){if(typeof M[1]!="function")throw new ro(l);return[E(M[0]),M[1]]}):[],We(function(M){for(var z=-1;++z<y;){var Z=g[z];if(eo(Z[0],this,M))return eo(Z[1],this,M)}})}function pE(g){return oy(yr(g,m))}function Ic(g){return function(){return g}}function Y0(g,y){return g==null||g!==g?y:g}var L2=wc(),Hc=wc(!0);function Cr(g){return g}function Oh(g){return dc(typeof g=="function"?g:yr(g,m))}function K0(g){return o0(yr(g,m))}function _2(g,y){return R1(g,yr(y,m))}var mE=We(function(g,y){return function(E){return Ho(E,g,y)}}),Z0=We(function(g,y){return function(E){return Ho(g,E,y)}});function s(g,y,E){var M=$i(y),z=fa(y,M);E==null&&!(oi(y)&&(z.length||!M.length))&&(E=y,y=g,g=this,z=fa(y,$i(y)));var Z=!(oi(E)&&"chain"in E)||!!E.chain,rt=vo(g);return no(z,function(ht){var Tt=y[ht];g[ht]=Tt,rt&&(g.prototype[ht]=function(){var Vt=this.__chain__;if(Z||Vt){var Wt=g(this.__wrapped__),Yt=Wt.__actions__=wr(this.__actions__);return Yt.push({func:Tt,args:arguments,thisArg:g}),Wt.__chain__=Vt,Wt}return Tt.apply(g,Ua([this.value()],arguments))})}),g}function u(){return Ii._===this&&(Ii._=Bo),this}function f(){}function v(g){return g=Oe(g),We(function(y){return s0(y,g)})}var C=d0(ni),S=d0(Hv),L=d0(d1);function X(g){return oh(g)?Vl(Fr(g)):Ai(g)}function at(g){return function(y){return g==null?i:Is(g,y)}}var bt=g0(),kt=g0(!0);function zt(){return[]}function Bt(){return!1}function Ot(){return{}}function ce(){return""}function Be(){return!0}function Nn(g,y){if(g=Oe(g),g<1||g>N)return[];var E=F,M=Pi(g,F);y=De(y),g-=F;for(var z=kd(M,y);++E<g;)y(E);return z}function Ct(g){return Ge(g)?ni(g,Fr):zr(g)?[g]:wr(lp(Pn(g)))}function dt(g){var y=++Kv;return Pn(g)+y}var Dt=Zf(function(g,y){return g+y},0),Gt=Jf("ceil"),Ee=Zf(function(g,y){return g/y},1),Cn=Jf("floor");function pe(g){return g&&g.length?ls(g,Cr,zf):i}function Ke(g,y){return g&&g.length?ls(g,De(y,2),zf):i}function fn(g){return _d(g,Cr)}function En(g,y){return _d(g,De(y,2))}function ml(g){return g&&g.length?ls(g,Cr,ri):i}function vE(g,y){return g&&g.length?ls(g,De(y,2),ri):i}var q9=Zf(function(g,y){return g*y},1),Y9=Jf("round"),K9=Zf(function(g,y){return g-y},0);function Z9(g){return g&&g.length?Fd(g,Cr):0}function Q9(g,y){return g&&g.length?Fd(g,De(y,2)):0}return q.after=Ky,q.ary=Ap,q.assign=c2,q.assignIn=N0,q.assignInWith=Mc,q.assignWith=eE,q.at=Go,q.before=Dp,q.bind=O0,q.bindAll=q0,q.bindKey=bp,q.castArray=YC,q.chain=ph,q.chunk=by,q.compact=up,q.concat=cp,q.cond=O2,q.conforms=pE,q.constant=Ic,q.countBy=Gy,q.create=jp,q.curry=wh,q.curryRight=Bp,q.debounce=Pp,q.defaults=f2,q.defaultsDeep=h2,q.defer=Ln,q.delay=Mp,q.difference=A0,q.differenceBy=By,q.differenceWith=pa,q.drop=Oi,q.dropRight=fp,q.dropRightWhile=Py,q.dropWhile=Ui,q.fill=NC,q.filter=Ep,q.flatMap=Nr,q.flatMapDeep=jy,q.flatMapDepth=Uy,q.flatten=Qn,q.flattenDeep=kr,q.flattenDepth=ma,q.flip=WC,q.flow=L2,q.flowRight=Hc,q.fromPairs=My,q.functions=nE,q.functionsIn=iE,q.groupBy=P0,q.initial=GC,q.intersection=D0,q.intersectionBy=Ir,q.intersectionWith=ds,q.invert=rE,q.invertBy=oE,q.invokeMap=bc,q.iteratee=Oh,q.keyBy=Vy,q.keys=$i,q.keysIn=jr,q.map=vh,q.mapKeys=aE,q.mapValues=m2,q.matches=K0,q.matchesProperty=_2,q.memoize=xh,q.merge=Rc,q.mergeWith=Oc,q.method=mE,q.methodOf=Z0,q.mixin=s,q.negate=L0,q.nthArg=v,q.omit=v2,q.omitBy=lE,q.once=XC,q.orderBy=Wy,q.over=C,q.overArgs=qC,q.overEvery=S,q.overSome=L,q.partial=Pc,q.partialRight=lu,q.partition=Xy,q.pick=Lc,q.pickBy=_c,q.property=X,q.propertyOf=at,q.pull=ou,q.pullAll=Gs,q.pullAllBy=pp,q.pullAllWith=mp,q.pullAt=gs,q.range=bt,q.rangeRight=kt,q.rearg=Rp,q.reject=UC,q.remove=_y,q.rest=_0,q.reverse=il,q.sampleSize=VC,q.set=z0,q.setWith=$p,q.shuffle=qy,q.slice=fh,q.sortBy=R0,q.sortedUniq=b0,q.sortedUniqBy=Hy,q.split=X0,q.spread=Op,q.tail=zC,q.take=jC,q.takeRight=Dn,q.takeRightWhile=Vn,q.takeWhile=on,q.tap=Ny,q.throttle=ll,q.thru=au,q.toArray=u2,q.toPairs=j0,q.toPairsIn=Ph,q.toPath=Ct,q.toPlainObject=H0,q.transform=w2,q.unary=zs,q.union=cn,q.unionBy=On,q.unionWith=ho,q.uniq=rl,q.uniqBy=Tc,q.uniqWith=vp,q.unset=x2,q.unzip=ps,q.unzipWith=ui,q.update=uE,q.updateWith=C2,q.values=Fc,q.valuesIn=Vp,q.without=ol,q.words=R2,q.wrap=Ch,q.xor=su,q.xorBy=yp,q.xorWith=go,q.zip=Ac,q.zipObject=gh,q.zipObjectDeep=Hr,q.zipWith=wp,q.entries=j0,q.entriesIn=Ph,q.extend=N0,q.extendWith=Mc,s(q,q),q.add=Dt,q.attempt=Zp,q.camelCase=V0,q.capitalize=E2,q.ceil=Gt,q.clamp=cE,q.clone=Zy,q.cloneDeep=Jy,q.cloneDeepWith=t2,q.cloneWith=Qy,q.conformsTo=KC,q.deburr=kc,q.defaultTo=Y0,q.divide=Ee,q.endsWith=fE,q.eq=mo,q.escape=S2,q.escapeRegExp=T2,q.every=mh,q.find=po,q.findIndex=hp,q.findKey=d2,q.findLast=zy,q.findLastIndex=dp,q.findLastKey=Bh,q.floor=Cn,q.forEach=$y,q.forEachRight=wa,q.forIn=zo,q.forInRight=g2,q.forOwn=G0,q.forOwnRight=Ca,q.get=fl,q.gt=e2,q.gte=n2,q.has=p2,q.hasIn=Up,q.head=gp,q.identity=Cr,q.includes=Sp,q.indexOf=Ry,q.inRange=U0,q.invoke=sE,q.isArguments=uu,q.isArray=Ge,q.isArrayBuffer=Lp,q.isArrayLike=Gr,q.isArrayLikeObject=Di,q.isBoolean=Eh,q.isBuffer=ul,q.isDate=i2,q.isElement=sn,q.isEmpty=_p,q.isEqual=F0,q.isEqualWith=Fp,q.isError=k0,q.isFinite=kp,q.isFunction=vo,q.isInteger=Sh,q.isLength=I0,q.isMap=r2,q.isMatch=o2,q.isMatchWith=s2,q.isNaN=Hn,q.isNative=Ip,q.isNil=ZC,q.isNull=Ji,q.isNumber=Hp,q.isObject=oi,q.isObjectLike=vi,q.isPlainObject=Th,q.isRegExp=Ah,q.isSafeInteger=Np,q.isSet=Dh,q.isString=bh,q.isSymbol=zr,q.isTypedArray=cl,q.isUndefined=Gp,q.isWeakMap=QC,q.isWeakSet=a2,q.join=Oy,q.kebabCase=A2,q.last=Jn,q.lastIndexOf=Ly,q.lowerCase=D2,q.lowerFirst=Wp,q.lt=JC,q.lte=l2,q.max=pe,q.maxBy=Ke,q.mean=fn,q.meanBy=En,q.min=ml,q.minBy=vE,q.stubArray=zt,q.stubFalse=Bt,q.stubObject=Ot,q.stubString=ce,q.stubTrue=Be,q.multiply=q9,q.nth=va,q.noConflict=u,q.noop=f,q.now=yh,q.pad=b2,q.padEnd=B2,q.padStart=W0,q.parseInt=hE,q.random=$0,q.reduce=M0,q.reduceRight=Tp,q.repeat=dE,q.replace=Xp,q.result=y2,q.round=Y9,q.runInContext=yt,q.sample=$C,q.size=Yy,q.snakeCase=qp,q.some=Bc,q.sortedIndex=hh,q.sortedIndexBy=Sc,q.sortedIndexOf=Fy,q.sortedLastIndex=ky,q.sortedLastIndexBy=dh,q.sortedLastIndexOf=Iy,q.startCase=Yp,q.startsWith=P2,q.subtract=K9,q.sum=Z9,q.sumBy=Q9,q.template=Kp,q.times=Nn,q.toFinite=xa,q.toInteger=Oe,q.toLength=zp,q.toLower=hl,q.toNumber=yo,q.toSafeInteger=tE,q.toString=Pn,q.toUpper=dl,q.trim=gl,q.trimEnd=Mh,q.trimStart=Rh,q.truncate=pl,q.unescape=gE,q.uniqueId=dt,q.upperCase=M2,q.upperFirst=cu,q.each=$y,q.eachRight=wa,q.first=gp,s(q,function(){var g={};return us(q,function(y,E){bn.call(q.prototype,E)||(g[E]=y)}),g}(),{chain:!1}),q.VERSION=r,no(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){q[g].placeholder=q}),no(["drop","take"],function(g,y){$e.prototype[g]=function(E){E=E===i?1:gi(Oe(E),0);var M=this.__filtered__&&!y?new $e(this):this.clone();return M.__filtered__?M.__takeCount__=Pi(E,M.__takeCount__):M.__views__.push({size:Pi(E,F),type:g+(M.__dir__<0?"Right":"")}),M},$e.prototype[g+"Right"]=function(E){return this.reverse()[g](E).reverse()}}),no(["filter","map","takeWhile"],function(g,y){var E=y+1,M=E==wt||E==P;$e.prototype[g]=function(z){var Z=this.clone();return Z.__iteratees__.push({iteratee:De(z,3),type:E}),Z.__filtered__=Z.__filtered__||M,Z}}),no(["head","last"],function(g,y){var E="take"+(y?"Right":"");$e.prototype[g]=function(){return this[E](1).value()[0]}}),no(["initial","tail"],function(g,y){var E="drop"+(y?"":"Right");$e.prototype[g]=function(){return this.__filtered__?new $e(this):this[E](1)}}),$e.prototype.compact=function(){return this.filter(Cr)},$e.prototype.find=function(g){return this.filter(g).head()},$e.prototype.findLast=function(g){return this.reverse().find(g)},$e.prototype.invokeMap=We(function(g,y){return typeof g=="function"?new $e(this):this.map(function(E){return Ho(E,g,y)})}),$e.prototype.reject=function(g){return this.filter(L0(De(g)))},$e.prototype.slice=function(g,y){g=Oe(g);var E=this;return E.__filtered__&&(g>0||y<0)?new $e(E):(g<0?E=E.takeRight(-g):g&&(E=E.drop(g)),y!==i&&(y=Oe(y),E=y<0?E.dropRight(-y):E.take(y-g)),E)},$e.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},$e.prototype.toArray=function(){return this.take(F)},us($e.prototype,function(g,y){var E=/^(?:filter|find|map|reject)|While$/.test(y),M=/^(?:head|last)$/.test(y),z=q[M?"take"+(y=="last"?"Right":""):y],Z=M||/^find/.test(y);z&&(q.prototype[y]=function(){var rt=this.__wrapped__,ht=M?[1]:arguments,Tt=rt instanceof $e,Vt=ht[0],Wt=Tt||Ge(rt),Yt=function(dn){var xn=z.apply(q,Ua([dn],ht));return M&&re?xn[0]:xn};Wt&&E&&typeof Vt=="function"&&Vt.length!=1&&(Tt=Wt=!1);var re=this.__chain__,ve=!!this.__actions__.length,Le=Z&&!re,en=Tt&&!ve;if(!Z&&Wt){rt=en?rt:new $e(this);var _e=g.apply(rt,ht);return _e.__actions__.push({func:au,args:[Yt],thisArg:i}),new Or(_e,re)}return Le&&en?g.apply(this,ht):(_e=this.thru(Yt),Le?M?_e.value()[0]:_e.value():_e)})}),no(["pop","push","shift","sort","splice","unshift"],function(g){var y=Of[g],E=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",M=/^(?:pop|shift)$/.test(g);q.prototype[g]=function(){var z=arguments;if(M&&!this.__chain__){var Z=this.value();return y.apply(Ge(Z)?Z:[],z)}return this[E](function(rt){return y.apply(Ge(rt)?rt:[],z)})}}),us($e.prototype,function(g,y){var E=q[y];if(E){var M=E.name+"";bn.call(Bn,M)||(Bn[M]=[]),Bn[M].push({name:y,func:E})}}),Bn[xc(i,B).name]=[{name:"wrapper",func:i}],$e.prototype.clone=la,$e.prototype.reverse=Ya,$e.prototype.value=ua,q.prototype.at=B0,q.prototype.chain=sl,q.prototype.commit=Ni,q.prototype.next=al,q.prototype.plant=ya,q.prototype.reverse=xp,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=Cp,q.prototype.first=q.prototype.head,Yi&&(q.prototype[Yi]=Dc),q},Ku=E1();is?((is.exports=Ku)._=Ku,Df._=Ku):Ii._=Ku}).call(iQ)}(dm,dm.exports)),dm.exports}var oQ=rQ();const sQ=({min:e=0,max:n=100,step:i=1,defaultValue:r=100,disabled:o=!1,onChange:a,beforeStart:l,afterEnd:c,title:h})=>{const[d,p]=Y.useState(!1),[m,w]=Y.useState(r),x=Y.useRef(null),T=Y.useRef(null),D=(m-e)/(n-e)*100,b=Y.useCallback(oQ.throttle(A=>{if(x.current&&T.current){const I=x.current.getBoundingClientRect(),R=T.current.getBoundingClientRect(),k=A.clientX-I.left,W=wO(R.width/2/I.width*100);let U=Math.min(Math.max(k/I.width,0),1);U>=(100-W)/100?U=1:U<=W/100&&(U=0);const nt=Math.round(U*(n-e)/i)*i+e;w(nt),a&&a(nt)}},50,{leading:!0,trailing:!0}),[e,n,i,a]),B=Y.useCallback(()=>{const A=R=>{p(!0),b(R)},I=()=>{document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",I),c&&c(),setTimeout(()=>{p(!1)},0)};document.addEventListener("pointermove",A),document.addEventListener("pointerup",I)},[b]);return Y.useEffect(()=>{w(r)},[r]),O.jsx("div",{"data-tooltip":!0,title:h,className:mn("slider-container",{disabled:o}),children:O.jsxs("div",{ref:x,className:"slider-track",onClick:A=>{o||d||b(A)},onPointerDown:A=>{A.preventDefault(),!o&&(l&&l(),B())},children:[O.jsx("div",{className:"slider-range",style:{width:`${D}%`}}),O.jsx("div",{ref:T,className:"slider-thumb",style:{left:`${D}%`}})]})})},P8=GA(C9,4),YA=Ae.forwardRef((e,n)=>{const i=qi(),{t:r}=ti(),{currentColor:o,onColorChange:a,onOpacityChange:l}=e,[c,h]=Y.useState(o&&yd(o)||P8[0][0].value),[d,p]=Y.useState(()=>{const m=o&&t1(o);return td(m)?100:m});return O.jsxs(Yr.Col,{gap:3,children:[O.jsx(sQ,{title:r("popupToolbar.opacity"),step:5,defaultValue:d,onChange:m=>{p(m),l(m)},beforeStart:()=>{tr.set(i,!0),Us.setSplittingOnce(i,!0)},afterEnd:()=>{tr.set(i,!1)},disabled:c===C9[0].value}),O.jsx(Yr.Col,{gap:2,children:P8.map((m,w)=>O.jsx(Yr.Row,{gap:2,children:m.map(x=>O.jsxs("button",{className:`color-select-item ${c===x.value?"active":""} ${Tg(x.value)?"no-color":""}`,style:{backgroundColor:Tg(x.value)?QZ:x.value,color:nQ(x.value)?qA:gr},onClick:()=>{h(x.value),x.value===XA&&p(100),a(x.value)},title:r(x.name||"color.unknown"),"aria-label":r(x.name||"color.unknown"),children:[Tg(x.value)&&RY,c===x.value&&OY]},x.value))},w))})]})}),T9=(e,n)=>Ut.isMindElement(e,n)||At.isDrawElement(n)&&xv(n)||Yx(e,n),A9=(e,n)=>{let i=n.fill;return i||(Ut.isMindElement(e,n)&&(i=W6(e,n)),(At.isDrawElement(n)||At.isCustomGeometryElement(e,n))&&(i=Kx(e,n))),i},D9=(e,n)=>{let i=n.strokeColor;return i||(Ut.isMindElement(e,n)&&(i=bA(e,n)),(At.isDrawElement(n)||At.isCustomGeometryElement(e,n))&&(i=Kg(e,n))),i},aQ=(e,n)=>{Ia.setFillColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{if(!T9(e,i))return;const o=A9(e,i);if(!eQ(o))return;const a=yd(o),l=Bv(n)?a:Jg(a,n);Qt.setNode(e,{fill:l},r)}})},lQ=(e,n)=>{Ia.setFillColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{if(!T9(e,i))return;const o=A9(e,i),a=t1(o);Tg(n)?Qt.setNode(e,{fill:null},r):td(a)||Bv(a)?Qt.setNode(e,{fill:n},r):Qt.setNode(e,{fill:Jg(n,a)},r)}})},uQ=(e,n)=>{Ia.setStrokeColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{const o=D9(e,i),a=yd(o),l=Bv(n)?a:Jg(a,n);Qt.setNode(e,{strokeColor:l},r)}})},cQ=(e,n)=>{Ia.setStrokeColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{const o=D9(e,i),a=t1(o);Tg(n)?Qt.setNode(e,{strokeColor:null},r):td(a)||Bv(a)?Qt.setNode(e,{strokeColor:n},r):Qt.setNode(e,{strokeColor:Jg(n,a)},r)}})},fQ=(e,n,i)=>{const r=t1(n);Tg(i)?TS.setTextColor(e,null):TS.setTextColor(e,Jg(i,r))},hQ=(e,n,i)=>{const r=yd(n),o=Bv(i)?r:Jg(r,i);TS.setTextColor(e,o)},dQ=({board:e,currentColor:n,fontColorIcon:i,title:r})=>{const[o,a]=Y.useState(!1),l=G.getBoardContainer(e);return O.jsxs(Ra,{sideOffset:12,open:o,onOpenChange:c=>{a(c)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:mn("property-button"),selected:o,visible:!0,icon:i,type:"button",title:r,"aria-label":r,onPointerUp:()=>{a(!o)}})}),O.jsx(La,{container:l,children:O.jsx(Jo,{padding:4,className:mn(`${Fa}`),children:O.jsx(YA,{onColorChange:c=>{fQ(e,n||c,c)},onOpacityChange:c=>{n&&hQ(e,n,c)},currentColor:n})})})]})},gQ=({board:e,currentColor:n,currentStyle:i,title:r,hasStrokeStyle:o,children:a})=>{const[l,c]=Y.useState(!1),h=n&&yd(n),d=n?t1(n):100,p=G.getBoardContainer(e),{t:m}=ti(),w=S9(d)?LY:E9(h)?_Y:void 0,x=T=>{Ia.setStrokeStyle(e,T,{getMemorizeKey:qg})};return O.jsxs(Ra,{sideOffset:12,open:l,onOpenChange:T=>{c(T)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:mn("property-button"),visible:!0,icon:w,type:"button",title:r,"aria-label":r,onPointerUp:()=>{c(!l)},children:!w&&a})}),O.jsx(La,{container:p,children:O.jsx(Jo,{padding:4,className:mn(`${Fa}`,"stroke-setting",{"has-stroke-style":o}),children:O.jsxs(Yr.Col,{children:[o&&O.jsxs(Yr.Row,{className:mn("stroke-style-picker"),children:[O.jsx(jn,{visible:!0,selected:!i||i===Co.solid,icon:FY,type:"button",title:`${r}  ${m("stroke.solid")}`,"aria-label":`${r}  ${m("stroke.solid")}`,onPointerUp:()=>{x(Co.solid)}}),O.jsx(jn,{visible:!0,selected:i===Co.dashed,icon:kY,type:"button",title:`${r}  ${m("stroke.dashed")}`,"aria-label":`${r}  ${m("stroke.dashed")}`,onPointerUp:()=>{x(Co.dashed)}}),O.jsx(jn,{visible:!0,selected:i===Co.dotted,icon:IY,type:"button",title:`${r}  ${m("stroke.dotted")}`,"aria-label":`${r}  ${m("stroke.dotted")}`,onPointerUp:()=>{x(Co.dotted)}})]}),O.jsx(YA,{onColorChange:T=>{cQ(e,T)},onOpacityChange:T=>{uQ(e,T)},currentColor:n})]})})})]})},pQ=({board:e,currentColor:n,title:i,children:r})=>{const[o,a]=Y.useState(!1),l=n&&yd(n),c=n?t1(n):100,h=G.getBoardContainer(e),d=!l||S9(c)?MY:void 0;return O.jsxs(Ra,{sideOffset:12,open:o,onOpenChange:p=>{a(p)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:mn("property-button"),visible:!0,icon:d,type:"button",title:i,"aria-label":i,onPointerUp:()=>{a(!o)},children:!d&&r})}),O.jsx(La,{container:h,children:O.jsx(Jo,{padding:4,className:mn(`${Fa}`),children:O.jsx(YA,{onColorChange:p=>{lQ(e,p)},onOpacityChange:p=>{aQ(e,p)},currentColor:n})})})]})},mQ=({board:e,title:n})=>{const{t:i}=ti(),{appState:r,setAppState:o}=Ps();return O.jsx(jn,{className:mn("property-button"),visible:!0,icon:VY,type:"button",title:n,"aria-label":n,onPointerUp:()=>{const a=ne(e)[0],l=ZT(a);Tl.getLinkElement(l)||Tl.wrapLink(l,i("textPlaceholders.link"),""),setTimeout(()=>{const d=Tl.getLinkElement(l)[0],p=Kt.toDOMNode(l,d);o({...r,linkState:{editor:l,targetDom:p,targetElement:d,isEditing:!0,isHovering:!1,isHoveringOrigin:!1}})},0)}})},vQ=({end:e,property:n})=>{const i=qi(),{marker:r}=n,{t:o}=ti(),a=l=>{Ia.setProperty(i,{[e]:{...n,marker:l}})};return O.jsx(Jo,{padding:2,className:mn(`${Fa} ${e==="source"?"source-arrow-island":""} `),children:O.jsxs(Yr.Row,{gap:1,children:[O.jsx(jn,{className:mn("property-button"),visible:!0,icon:BM,type:"button",title:o("line.none"),"aria-label":o("line.none"),selected:r==="none",onPointerUp:()=>{a("none")}}),O.jsx(jn,{className:mn("property-button"),visible:!0,icon:bM,type:"button",title:o("line.arrow"),"aria-label":o("line.arrow"),selected:r==="arrow",onPointerUp:()=>{a("arrow")}})]})})},M8=({board:e,end:n,endProperty:i})=>{const[r,o]=Y.useState(!1),a=i==null?void 0:i.marker,l=G.getBoardContainer(e),{t:c}=ti(),h=`${c(`line.${n}`)}  ${c(`line.${a}`)}`;return O.jsxs(Ra,{sideOffset:12,open:r,onOpenChange:d=>{o(d)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:mn(`property-button  ${n==="source"?"source-arrow-button":""}`),visible:!0,icon:a==="none"?BM:bM,type:"button",title:h,"aria-label":h,selected:r,onPointerUp:()=>{o(!r)}})}),O.jsx(La,{container:l,children:O.jsx(vQ,{end:n,property:i})})]})},yQ=()=>{var x,T;const e=qi(),{t:n}=ti(),i=ne(e),[r,o]=Y.useState(!1),a=Y.useRef(r),l=i.length>0&&!Dr(e)&&!i.some(At.isImage),{viewport:c,selection:h,children:d}=e,{refs:p,floatingStyles:m}=mC({placement:"right-start",middleware:[$A(32),VA()]});let w={fill:"red"};if(l&&!r){const D=i.some(R=>EQ(e,R))&&!G.hasBeenTextEditing(e),b=i.some(R=>TQ(e,R)),B=i.some(R=>b9(e,R))&&!G.hasBeenTextEditing(e),A=i.some(R=>SQ(e,R))&&!G.hasBeenTextEditing(e),I=i.every(R=>At.isArrowLine(R));w={...CQ(e),hasFill:D,hasFontColor:b,hasStroke:B,hasStrokeStyle:A,hasText:b,isLine:I}}return Y.useEffect(()=>{if(l){const D=i.length>0;if(!r&&D){const b=ne(e),B=pn(e,b,!1),[A,I]=H.getPoints(B),R=nS(e,Uw(e,A)),k=nS(e,Uw(e,I)),W=k[0]-R[0],U=k[1]-R[1];p.setPositionReference({getBoundingClientRect(){return{width:W,height:U,x:R[0],y:R[1],top:R[1],left:R[0],right:R[0]+W,bottom:R[1]+U}}})}}},[c,h,d,r]),Y.useEffect(()=>{a.current=r},[r]),Y.useEffect(()=>{const{pointerUp:D,pointerMove:b}=e;return e.pointerMove=B=>{(sf(e)||of(e))&&!a.current&&o(!0),b(B)},e.pointerUp=B=>{a.current&&(sf(e)||of(e))&&o(!1),D(B)},()=>{e.pointerUp=D,e.pointerMove=b}},[e]),O.jsx(O.Fragment,{children:l&&!r&&O.jsx(Jo,{padding:1,className:mn("popup-toolbar",Fa),ref:p.setFloating,style:m,children:O.jsxs(Yr.Row,{gap:1,children:[w.hasFontColor&&O.jsx(dQ,{board:e,currentColor:(x=w.marks)==null?void 0:x.color,title:n("popupToolbar.fontColor"),fontColorIcon:O.jsx(HY,{currentColor:(T=w.marks)==null?void 0:T.color})},0),w.hasStroke&&O.jsx(gQ,{board:e,currentColor:w.strokeColor,currentStyle:w.strokeStyle,title:n("popupToolbar.stroke"),hasStrokeStyle:w.hasStrokeStyle||!1,children:O.jsx("label",{className:mn("stroke-label","color-label"),style:{borderColor:w.strokeColor}})},1),w.hasFill&&O.jsx(pQ,{board:e,currentColor:w.fill,title:n("popupToolbar.fillColor"),children:O.jsx("label",{className:mn("fill-label","color-label",{"color-white":w.fill&&E9(yd(w.fill))}),style:{backgroundColor:w.fill}})},2),w.hasText&&O.jsx(mQ,{board:e,title:n("popupToolbar.link")},3),w.isLine&&O.jsxs(O.Fragment,{children:[O.jsx(M8,{board:e,end:"source",endProperty:w.source},4),O.jsx(M8,{board:e,end:"target",endProperty:w.target},5)]})]})})})},wQ=(e,n)=>{const i=hP(n);return{fill:n.fill,strokeColor:bA(e,n),strokeStyle:Zg(e,n),marks:i}},xQ=(e,n)=>{const i=hP(n);return{fill:n.fill,strokeColor:Kg(e,n),strokeStyle:Zg(e,n),marks:i,source:(n==null?void 0:n.source)||{},target:(n==null?void 0:n.target)||{}}},CQ=e=>{const n=ne(e)[0];return Ut.isMindElement(e,n)?wQ(e,n):xQ(e,n)},EQ=(e,n)=>Ut.isMindElement(e,n)||Yx(e,n)?!0:At.isDrawElement(n)?At.isShapeElement(n)&&!At.isImage(n)&&!At.isText(n)&&xv(n):!1,b9=(e,n)=>Ut.isMindElement(e,n)||js.isFreehand(n)?!0:At.isDrawElement(n)?At.isShapeElement(n)&&!At.isImage(n)&&!At.isText(n)||At.isArrowLine(n)||At.isVectorLine(n)||At.isTable(n):!1,SQ=(e,n)=>b9(e,n),TQ=(e,n)=>Ut.isMindElement(e,n)?!0:At.isDrawElement(n)?wU([n]):!1,B9=({icon:e,shortcut:n,href:i,children:r,onSelect:o,className:a="",selected:l,...c})=>{const h=p9(c.onClick,o);return O.jsx("a",{...c,href:i,target:"_blank",rel:"noreferrer",className:ZS(a,l),title:c.title??c["aria-label"],onClick:h,children:O.jsx(m9,{icon:e,shortcut:n,children:r})})};B9.displayName="MenuItemLink";const P9=()=>{const e=qi(),{t:n}=ti(),{onSave:i}=Ps();return O.jsx(er,{"data-testid":"save-button",onSelect:()=>{i?i():wM(e)},icon:BY,"aria-label":n("menu.saveFile"),shortcut:rv("CtrlOrCmd+S"),children:n("menu.saveFile")})};P9.displayName="SaveToFile";const M9=()=>{const e=qi(),n=oB(),{t:i}=ti(),r=(o,a,l)=>{e.children=o,e.viewport=a||{zoom:1},e.theme={themeColorMode:Li.default},n.update(e.children,{board:e,parent:e,parentG:G.getElementHost(e)}),un.fitViewport(e)};return O.jsx(er,{"data-testid":"open-button",onSelect:()=>{Fq(e).then(o=>{r(o.elements,o.viewport)})},icon:PY,"aria-label":i("menu.open"),children:i("menu.open")})};M9.displayName="OpenFile";const R9=()=>{const e=qi(),n=Y.useContext(vC),{t:i}=ti();return O.jsx(er,{icon:AY,"data-testid":"image-export-button",onSelect:()=>{Rw(e,!0)},submenu:O.jsxs(Qg,{onSelect:()=>{var o;const r=new CustomEvent(Ig.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(o=n.onSelect)==null||o.call(n,r)},children:[O.jsx(er,{onSelect:()=>{qZ(e)},"aria-label":i("menu.exportImage.svg"),children:i("menu.exportImage.svg")}),O.jsx(er,{onSelect:()=>{Rw(e,!0)},"aria-label":i("menu.exportImage.png"),children:i("menu.exportImage.png")}),O.jsx(er,{onSelect:()=>{Rw(e,!1)},"aria-label":i("menu.exportImage.jpg"),children:i("menu.exportImage.jpg")})]}),shortcut:rv("CtrlOrCmd+Shift+E"),"aria-label":i("menu.exportImage"),children:i("menu.exportImage")})};R9.displayName="SaveAsImage";const O9=()=>{const{appState:e,setAppState:n}=Ps(),{t:i}=ti();return O.jsx(er,{icon:px,"data-testid":"reset-button",onSelect:()=>{n({...e,openCleanConfirm:!0})},shortcut:rv("CtrlOrCmd+Backspace"),"aria-label":i("menu.cleanBoard"),children:i("menu.cleanBoard")})};O9.displayName="CleanBoard";const L9=()=>O.jsx(B9,{icon:TY,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});L9.displayName="Socials";const _9=()=>{const{language:e,setLanguage:n,t:i}=ti(),r=Y.useContext(vC);return O.jsx(er,{icon:AM,"data-testid":"language-switcher-button",onSelect:()=>{},submenu:O.jsxs(Qg,{onSelect:()=>{var a;const o=new CustomEvent(Ig.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(a=r.onSelect)==null||a.call(r,o)},children:[O.jsx(er,{onSelect:()=>{n("zh")},"aria-label":i("language.chinese"),selected:e==="zh",children:i("language.chinese")}),O.jsx(er,{onSelect:()=>{n("en")},"aria-label":i("language.english"),selected:e==="en",children:i("language.english")}),O.jsx(er,{onSelect:()=>{n("ru")},"aria-label":i("language.russian"),selected:e==="ru",children:i("language.russian")}),O.jsx(er,{onSelect:()=>{n("ar")},"aria-label":i("language.arabic"),selected:e==="ar",children:i("language.arabic")}),O.jsx(er,{onSelect:()=>{n("vi")},"aria-label":i("language.vietnamese"),selected:e==="vi",children:i("language.vietnamese")})]}),"aria-label":i("language.switcher"),children:i("language.switcher")})};_9.displayName="LanguageSwitcherMenu";const F9=()=>O.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});F9.displayName="MenuSeparator";const AQ=()=>{const e=qi(),{t:n}=ti(),i=G.getBoardContainer(e),r=ne(e),[o,a]=Y.useState(!1),l=e.history.undos.length<=0,c=e.history.redos.length<=0;return O.jsx(Jo,{padding:1,className:mn("app-toolbar",Fa),children:O.jsxs(Yr.Row,{gap:1,children:[O.jsxs(Ra,{sideOffset:12,open:o,onOpenChange:h=>{a(h)},placement:"bottom-start",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:o,icon:AM,title:n("general.menu"),"aria-label":n("general.menu"),onPointerDown:()=>{a(!o)}})}),O.jsx(La,{container:i,children:O.jsxs(Qg,{onSelect:()=>{a(!1)},children:[O.jsx(M9,{}),O.jsx(P9,{}),O.jsx(R9,{}),O.jsx(O9,{}),O.jsx(F9,{}),O.jsx(_9,{}),O.jsx(L9,{})]})})]},0),O.jsx(jn,{type:"icon",icon:NY,visible:!0,title:n("general.undo"),"aria-label":n("general.undo"),onPointerUp:()=>{e.undo()},disabled:l},1),O.jsx(jn,{type:"icon",icon:GY,visible:!0,title:n("general.redo"),"aria-label":n("general.redo"),onPointerUp:()=>{e.redo()},disabled:c},2),r.length>0&&O.jsx(jn,{className:"duplicate",type:"icon",icon:zY,visible:!0,title:n("general.duplicate"),"aria-label":n("general.duplicate"),onPointerUp:()=>{PT(e)}},3),r.length>0&&O.jsx(jn,{className:"trash",type:"icon",icon:px,visible:!0,title:n("general.delete"),"aria-label":n("general.delete"),onPointerUp:()=>{BT(e)}},4)]})})},DQ=()=>{const{t:e}=ti(),[n,i]=Y.useState(""),[r,o]=Y.useState(!1);return Y.useEffect(()=>{const a=l=>{var m;const c=new Date,h=String(c.getHours()).padStart(2,"0"),d=String(c.getMinutes()).padStart(2,"0"),p=String(c.getSeconds()).padStart(2,"0");i(`${h}:${d}:${p}`),o(((m=l.detail)==null?void 0:m.isAutoSave)||!1)};return window.addEventListener("drawnix-saved",a),()=>{window.removeEventListener("drawnix-saved",a)}},[]),n?O.jsxs("div",{className:mn("   ",Fa),style:{position:"absolute",bottom:"36px",left:"36px",padding:"4px 12px",fontSize:"12px",color:"var(--color-text-3)",backgroundColor:"var(--color-bg-1)",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",display:"flex",alignItems:"center",whiteSpace:"nowrap",zIndex:100,border:"1px solid var(--color-border-2)"},title:e(r?"general.autoSaved":"general.lastSaved"),children:[e(r?"general.autoSave":"general.saved"),": ",n]}):null},bQ=(e,n)=>r=>{const{globalKeyDown:o,keyDown:a}=r;return r.globalKeyDown=l=>{if(!(l.target instanceof HTMLInputElement||l.target instanceof HTMLTextAreaElement)&&(G.getMovingPointInBoard(r)||G.isMovingPointInBoard(r))&&!G.hasBeenTextEditing(r)){if(ln.isHotkey(["mod+shift+e"],{byKey:!0})(l)){Rw(r,!0),l.preventDefault();return}if(ln.isHotkey(["mod+s"],{byKey:!0})(l)){n?n():wM(r),l.preventDefault();return}if(ln.isHotkey(["mod+backspace"])(l)||ln.isHotkey(["mod+delete"])(l)){e({openCleanConfirm:!0}),l.preventDefault();return}if(ln.isHotkey(["mod+u"])(l)){x9(r),l.preventDefault();return}if(!l.altKey&&!l.metaKey&&!l.ctrlKey){if(l.key==="h"){un.updatePointerType(r,nn.hand),e({pointer:nn.hand}),l.preventDefault();return}if(l.key==="v"){un.updatePointerType(r,nn.selection),e({pointer:nn.selection}),l.preventDefault();return}if(l.key==="m"){Vr(r,Xi.dnd),un.updatePointerType(r,wu.mind),e({pointer:wu.mind}),l.preventDefault();return}if(l.key==="e"){Vr(r,Xi.drawing),un.updatePointerType(r,Yo.eraser),e({pointer:Yo.eraser}),l.preventDefault();return}if(l.key==="p"){Vr(r,Xi.drawing),un.updatePointerType(r,Yo.feltTipPen),e({pointer:Yo.feltTipPen}),l.preventDefault();return}if(l.key==="a"&&!ln.isHotkey(["mod+a"])(l)&&ne(r).length===0){Vr(r,Xi.drawing),un.updatePointerType(r,qn.straight),e({pointer:qn.straight}),l.preventDefault();return}if(l.key==="r"||l.key==="o"||l.key==="t"){const h={r:we.rectangle,o:we.ellipse,t:we.text};h[l.key]===we.text?Vr(r,Xi.dnd):Vr(r,Xi.drawing),un.updatePointerType(r,h[l.key]),e({pointer:h[l.key]}),l.preventDefault();return}}}o(l)},r.keyDown=l=>{if(ln.isHotkey(["mod+z"],{byKey:!0})(l)){r.undo(),l.preventDefault();return}if(ln.isHotkey(["mod+shift+z"],{byKey:!0})(l)){r.redo(),l.preventDefault();return}a(l)},r};function R8(){return[Yo.feltTipPen,Yo.eraser]}const O8=(e,n)=>({id:Mn(),type:"freehand",shape:e,points:n}),k9=(e,n,i)=>{const r=af(e,i,n)||i,o=n.points;return Cv(n.points)&&rf(r,o)||Xm(o,r)},BQ=(e,n,i)=>{const r=H.getRectangleByPoints([i.anchor,i.focus]);return sx(r,n.points,n.angle)},L8=e=>ne(e).filter(n=>js.isFreehand(n)),PQ=e=>PM[e].strokeColor,MQ=e=>PM[e].fill,RQ=(e,n)=>{const i=PQ(e.theme.themeColorMode);return n.strokeColor||i},OQ=(e,n)=>{const i=js.isFreehand(n)&&Yx(e,n)?MQ(e.theme.themeColorMode):qx.fill;return n.fill||i};function LQ(e,n){return Math.exp(-(e*e)/(2*n*n))}function _Q(e,n,i){if(e.length<2)return e;const r=Math.floor(i/2),o=[];function a(c){if(c<0){const h=-c-1;if(h<e.length)return[2*e[0][0]-e[h][0],2*e[0][1]-e[h][1]]}else if(c>=e.length){const h=2*e.length-c-1;if(h>=0)return[2*e[e.length-1][0]-e[h][0],2*e[e.length-1][1]-e[h][1]]}return e[c]}function l(c){const h=Math.min(c,e.length-1-c);return Math.min(r,h+Math.floor(r/2))}for(let c=0;c<e.length;c++){let h=0,d=0,p=0;const m=l(c);for(let w=-m;w<=m;w++){const x=c+w,T=a(x);let D=LQ(w,n);if(c<r||c>=e.length-r){const b=1+.5*(1-Math.abs(w)/m);D*=w===0?b:1}h+=T[0]*D,d+=T[1]*D,p+=D}c===0||c===e.length-1?o.push([e[c][0],e[c][1]]):o.push([h/p,d/p])}return o}class I9 extends Bs{draw(n){const i=Tn(n),r=RQ(this.board,n),o=OQ(this.board,n),a={strokeWidth:i,stroke:r,fill:o,fillStyle:"solid"},l=G.getRoughSVG(this.board).curve(_Q(n.points,1,3),a);return Ze(l,"round"),l}canDraw(n){return!0}}class FQ extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=pv(this.board,{getRectangle:n=>H.getRectangleByPoints(n.points),getStrokeWidth:()=>Fi,getStrokeOpacity:()=>1,hasResizeHandle:()=>$x(this.board,this.element)}),this.generator=new I9(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(n,i){n.element!==i.element||n.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})):(n.selected!==i.selected||n.selected)&&this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}destroy(){var n;super.destroy(),(n=this.activeGenerator)==null||n.destroy()}}class kQ{constructor(n={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...n}}process(n,i={}){const r=i.timestamp??Date.now();if(this.points.length===0){const h={point:n,timestamp:r,...i};return this.points.push(h),this.lastProcessedTime=r,n}if(r-this.lastProcessedTime<this.options.samplingRate&&r-this.lastProcessedTime<2)return null;const o={point:n,timestamp:r,...i};if(!this.checkDistance(n)&&this.points.length>1&&r-this.lastProcessedTime<32)return null;this.updatePoints(o);const l=this.calculateDynamicParameters(o),c=this.smooth(n,l);return this.lastProcessedTime=r,c}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(n){this.points.push(n),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(n){if(this.points.length===0)return!0;const i=this.points[this.points.length-1].point,r=this.getDistance(i,n);let o=this.options.minDistance;if(this.movingAverageVelocity.length>0){const a=this.getAverageVelocity();o*=Math.max(.5,Math.min(1.5,a/200))}return r>=o}calculateDynamicParameters(n){const i=this.calculateVelocity(n);this.updateMovingAverage(i);const r=this.getAverageVelocity(),o={...this.options};if(n.pressure!==void 0){const l=Math.pow(n.pressure,1.2);o.smoothing*=1-l*o.pressureSensitivity*.8}const a=Math.min(r/o.velocityThreshold,1);if(o.velocityWeight=.2+a*.3,o.smoothing*=1+a*.2,n.tiltX!==void 0&&n.tiltY!==void 0){const l=Math.sqrt(n.tiltX**2+n.tiltY**2)/90;o.smoothing*=1+l*o.tiltSensitivity*.7}return o}smooth(n,i){if(this.points.length<2)return n;const r=this.calculateWeights(i),o=r.reduce((l,c)=>l+c,0);if(o===0)return n;const a=[0,0];for(let l=0;l<this.points.length;l++){const c=r[l]/o;a[0]+=this.points[l].point[0]*c,a[1]+=this.points[l].point[1]*c}return a}calculateWeights(n){const i=[],r=this.points.length-1;for(let o=0;o<this.points.length;o++){let a=Math.pow(n.smoothing,(r-o)*.8);if(o<r){const l=this.getPointVelocity(o);a*=1+l*n.velocityWeight*.8}if(o>0&&o<r){const l=this.getPointCurvature(o);a*=1+l*n.curvatureWeight*.7}i.push(a)}return i}getDistance(n,i){return be(n[0],n[1],i[0],i[1])}calculateVelocity(n){if(this.points.length<2)return 0;const i=this.points[this.points.length-1],r=this.getDistance(i.point,n.point),o=n.timestamp-i.timestamp;return o>0?r/o:0}updateMovingAverage(n){this.movingAverageVelocity.push(n),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((n,i)=>n+i)/this.movingAverageVelocity.length}getPointVelocity(n){if(n>=this.points.length-1)return 0;const i=this.points[n],r=this.points[n+1],o=this.getDistance(i.point,r.point),a=r.timestamp-i.timestamp;return a>0?o/a:0}getPointCurvature(n){if(n<=0||n>=this.points.length-1)return 0;const i=this.points[n-1].point,r=this.points[n].point,o=this.points[n+1].point,a=this.getDistance(i,r),l=this.getDistance(r,o),c=this.getDistance(i,o),h=(a+l+c)/2;return 4*Math.sqrt(Math.max(0,h*(h-a)*(h-l)*(h-c)))/(a*l*c+1e-4)}}const IQ=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,globalPointerUp:o,touchStart:a}=e;let l=!1,c=!1,h=[],d=null;const p=new I9(e),m=new kQ({smoothing:.7,pressureSensitivity:.6});let w=null;const x=T=>{if(l){const D=G.getPointer(e);c&&h.push(h[0]),w=O8(D,h)}w&&!T&&Qt.insertNode(e,w,[e.children.length]),p==null||p.destroy(),w=null,l=!1,h=[],m.reset()};return e.touchStart=T=>{const D=R8();if(G.isInPointer(e,D)&&Pl(e))return T.preventDefault();a(T)},e.pointerDown=T=>{const D=R8();if(G.isInPointer(e,D)&&Pl(e)){l=!0,d=[T.x,T.y];const B=m.process(d),A=Pe(e,ke(e,B[0],B[1]));h.push(A)}n(T)},e.pointerMove=T=>{if(l&&!ix(e)){const D=[T.x,T.y];d&&be(d[0],d[1],D[0],D[1])<8?c=!0:c=!1;const b=m.process(D);if(b){p==null||p.destroy();const B=Pe(e,ke(e,b[0],b[1]));h.push(B);const A=G.getPointer(e);w=O8(A,h),p.processDrawing(w,G.getElementTopHost(e))}return}if(ix(e)&&l){x(!0);return}i(T)},e.pointerUp=T=>{x(),r(T)},e.globalPointerUp=T=>{x(!0),o(T)},e},HQ=e=>{const n=e,{getDeletedFragment:i,buildFragment:r,insertFragment:o}=n;return n.getDeletedFragment=a=>{const l=L8(n);return l.length&&a.push(...l),i(a)},n.buildFragment=(a,l,c,h)=>{const d=L8(n);if(d.length){const p=aP(n,d,l?[l.x,l.y]:[0,0]);a=Gx(a,{text:"",type:Au.elements,elements:p})}return r(a,l,c,h)},n.insertFragment=(a,l,c)=>{var d;const h=(d=a==null?void 0:a.elements)==null?void 0:d.filter(p=>js.isFreehand(p));h&&h.length>0&&lP(n,h,l),o(a,l,c)},n};var Ow={exports:{}},NQ=Ow.exports,_8;function GQ(){return _8||(_8=1,function(e,n){(function(i,r){e.exports=r()})(NQ,function(){return(()=>{var i={607:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.drawLaserPen=a.drawRoundCap=a.drawDrawingBezierData=a.calDrawingData=a.transformPointToBezier=a.calControlPoints=a.drainPoints=a.setRoundCap=a.setColor=a.setOpacity=a.setTension=a.setMinWidth=a.setMaxWidth=a.setDelay=void 0;var c=l(405),h=10,d=0,p=300,m=.3,w=0,x=255,T=0,D=0,b=!1;function B(A,I){return Math.sqrt(A*A+I*I)}a.setDelay=function(A){p=A},a.setMaxWidth=function(A){h=A},a.setMinWidth=function(A){d=A},a.setTension=function(A){m=A},a.setOpacity=function(A){w=A},a.setColor=function(A,I,R){x=A,T=I,D=R},a.setRoundCap=function(A){b=A},a.drainPoints=function(A){for(var I,R=Date.now()-p,k=0;k<A.length;k++)if(A[k].time>=R){I=k;break}var W=I===0?A:I===void 0?[]:A.slice(I);for(k=W.length-1;k>0;k--)(U=W[k]).x===W[k-1].x&&U.y===W[k-1].y&&W.splice(k,1);for(k=W.length-1;k>1;k--){var U;(U=W[k]).x===W[k-2].x&&U.y===W[k-2].y&&(W.splice(k-1,2),k--)}return W},a.calControlPoints=function(A){if(A.length<3)throw new Error("to calculate control points, the point counts should be larger than 3");for(var I=Array(A.length),R=A.length,k=R-2;k>0;k--){var W=A[k],U=A[k+1],nt=A[k-1],st=nt.x-U.x,ft=nt.y-U.y,Et=B(st,ft),ct=st/Et,mt=ft/Et,wt=B(W.x-U.x,W.y-U.y),V=B(W.x-nt.x,W.y-nt.y),P=W.x-ct*wt*m,_=W.y-mt*wt*m,N=W.x+ct*V*m,$=W.y+mt*V*m;I[k]={cn:{x:P,y:_},cp:{x:N,y:$}},(isNaN(P)||isNaN(_)||isNaN(N)||isNaN($))&&console.log("a")}return I[R-1]={cn:{x:A[R-1].x,y:A[R-1].y},cp:{x:(A[R-1].x+A[R-2].x)/2,y:(A[R-1].y+A[R-2].y)/2}},I[0]={cn:{x:(A[0].x+A[k+1].x)/2,y:(A[0].y+A[k+1].y)/2},cp:{x:A[0].x,y:A[0].y}},I},a.transformPointToBezier=function(A,I){for(var R=[],k=1;k<A.length;k++){var W=A[k-1],U=A[k],nt=I[k-1].cn,st=I[k].cp,ft=new c.Bezier(W.x,W.y,nt.x,nt.y,st.x,st.y,U.x,U.y);R.push(ft)}return R},a.calDrawingData=function(A,I){for(var R=[],k=1-w,W=h-d,U=0,nt=0;nt<A.length;nt++){var st=A[nt],ft=st.length(),Et=w+(U+=ft)/I*k,ct=d+U/I*W;R.push({bezier:st,opacity:Et,width:ct})}return R},a.drawDrawingBezierData=function(A,I){A.save(),A.lineCap="butt";for(var R=0;R<I.length;R++){A.beginPath();var k=I[R],W=k.bezier,U=k.width,nt=k.opacity;A.lineWidth=U,A.strokeStyle="rgba(".concat(x,",").concat(T,",").concat(D,",").concat(nt,")");var st=W.points[0].x,ft=W.points[0].y;if(W.points[0].x!==W.points[1].x){var Et=W.points[0].x,ct=W.points[0].y,mt=(ct-W.points[1].y)/(Et-W.points[1].x),wt=ct-mt*Et,V=Math.sqrt(.005/(1+mt*mt));ft=mt*(st=(W.points[1].x>Et?-V:V)+Et)+wt}else ft+=W.points[0].y>W.points[1].y?.005:-.005;var P=W.points[3].x,_=W.points[3].y;if(W.points[2].x!==W.points[3].x){var N=W.points[3].x,$=W.points[3].y,Q=($-W.points[2].y)/(N-W.points[2].x),F=$-Q*N;V=Math.sqrt(.005/(1+Q*Q)),_=Q*(P=(W.points[2].x>N?-V:V)+N)+F}else _+=W.points[2].y>W.points[3].y?-.005:.005;A.moveTo(st,ft),A.bezierCurveTo(W.points[1].x,W.points[1].y,W.points[2].x,W.points[2].y,P,_),A.stroke(),A.closePath()}A.restore()},a.drawRoundCap=function(A,I){var R=I.bezier.points[3];A.save(),A.beginPath(),A.fillStyle="rgba(".concat(x,",").concat(T,",").concat(D,",").concat(I.opacity,")"),A.arc(R.x,R.y,I.width/2,0,2*Math.PI,!1),A.closePath(),A.fill(),A.restore()},a.drawLaserPen=function(A,I){if(I.length<3)throw new Error("too less points");var R=(0,a.calControlPoints)(I),k=(0,a.transformPointToBezier)(I,R),W=k.reduce(function(ct,mt){return ct+mt.length()},0),U=W/50,nt=[];k.forEach(function(ct,mt){var wt=ct.length(),V=Math.ceil(wt/U)+2,P=ct.getLUT(V);mt<k.length-1&&P.pop(),nt.push.apply(nt,P)});var st=(0,a.calControlPoints)(nt),ft=(0,a.transformPointToBezier)(nt,st),Et=(0,a.calDrawingData)(ft,W);(0,a.drawDrawingBezierData)(A,Et),b&&(0,a.drawRoundCap)(A,Et[Et.length-1])}},405:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Bezier=void 0;const{abs:l,cos:c,sin:h,acos:d,atan2:p,sqrt:m,pow:w}=Math;function x(V){return V<0?-w(-V,.3333333333333333):w(V,.3333333333333333)}const T=Math.PI,D=2*T,b=T/2,B=Number.MAX_SAFE_INTEGER||9007199254740991,A=Number.MIN_SAFE_INTEGER||-9007199254740991,I={x:0,y:0,z:0},R={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(V,P){const _=P(V);let N=_.x*_.x+_.y*_.y;return _.z!==void 0&&(N+=_.z*_.z),m(N)},compute:function(V,P,_){if(V===0)return P[0].t=0,P[0];const N=P.length-1;if(V===1)return P[N].t=1,P[N];const $=1-V;let Q=P;if(N===0)return P[0].t=V,P[0];if(N===1){const J={x:$*Q[0].x+V*Q[1].x,y:$*Q[0].y+V*Q[1].y,t:V};return _&&(J.z=$*Q[0].z+V*Q[1].z),J}if(N<4){let J,tt,it,xt=$*$,gt=V*V,Lt=0;N===2?(Q=[Q[0],Q[1],Q[2],I],J=xt,tt=$*V*2,it=gt):N===3&&(J=xt*$,tt=xt*V*3,it=$*gt*3,Lt=V*gt);const $t={x:J*Q[0].x+tt*Q[1].x+it*Q[2].x+Lt*Q[3].x,y:J*Q[0].y+tt*Q[1].y+it*Q[2].y+Lt*Q[3].y,t:V};return _&&($t.z=J*Q[0].z+tt*Q[1].z+it*Q[2].z+Lt*Q[3].z),$t}const F=JSON.parse(JSON.stringify(P));for(;F.length>1;){for(let J=0;J<F.length-1;J++)F[J]={x:F[J].x+(F[J+1].x-F[J].x)*V,y:F[J].y+(F[J+1].y-F[J].y)*V},F[J].z!==void 0&&(F[J]=F[J].z+(F[J+1].z-F[J].z)*V);F.splice(F.length-1,1)}return F[0].t=V,F[0]},computeWithRatios:function(V,P,_,N){const $=1-V,Q=_,F=P;let J,tt=Q[0],it=Q[1],xt=Q[2],gt=Q[3];return tt*=$,it*=V,F.length===2?(J=tt+it,{x:(tt*F[0].x+it*F[1].x)/J,y:(tt*F[0].y+it*F[1].y)/J,z:!!N&&(tt*F[0].z+it*F[1].z)/J,t:V}):(tt*=$,it*=2*$,xt*=V*V,F.length===3?(J=tt+it+xt,{x:(tt*F[0].x+it*F[1].x+xt*F[2].x)/J,y:(tt*F[0].y+it*F[1].y+xt*F[2].y)/J,z:!!N&&(tt*F[0].z+it*F[1].z+xt*F[2].z)/J,t:V}):(tt*=$,it*=1.5*$,xt*=3*$,gt*=V*V*V,F.length===4?(J=tt+it+xt+gt,{x:(tt*F[0].x+it*F[1].x+xt*F[2].x+gt*F[3].x)/J,y:(tt*F[0].y+it*F[1].y+xt*F[2].y+gt*F[3].y)/J,z:!!N&&(tt*F[0].z+it*F[1].z+xt*F[2].z+gt*F[3].z)/J,t:V}):void 0))},derive:function(V,P){const _=[];for(let N=V,$=N.length,Q=$-1;$>1;$--,Q--){const F=[];for(let J,tt=0;tt<Q;tt++)J={x:Q*(N[tt+1].x-N[tt].x),y:Q*(N[tt+1].y-N[tt].y)},P&&(J.z=Q*(N[tt+1].z-N[tt].z)),F.push(J);_.push(F),N=F}return _},between:function(V,P,_){return P<=V&&V<=_||R.approximately(V,P)||R.approximately(V,_)},approximately:function(V,P,_){return l(V-P)<=(_||1e-6)},length:function(V){const P=R.Tvalues.length;let _=0;for(let N,$=0;$<P;$++)N=.5*R.Tvalues[$]+.5,_+=R.Cvalues[$]*R.arcfn(N,V);return .5*_},map:function(V,P,_,N,$){return N+(V-P)/(_-P)*($-N)},lerp:function(V,P,_){const N={x:P.x+V*(_.x-P.x),y:P.y+V*(_.y-P.y)};return P.z!==void 0&&_.z!==void 0&&(N.z=P.z+V*(_.z-P.z)),N},pointToString:function(V){let P=V.x+"/"+V.y;return V.z!==void 0&&(P+="/"+V.z),P},pointsToString:function(V){return"["+V.map(R.pointToString).join(", ")+"]"},copy:function(V){return JSON.parse(JSON.stringify(V))},angle:function(V,P,_){const N=P.x-V.x,$=P.y-V.y,Q=_.x-V.x,F=_.y-V.y;return p(N*F-$*Q,N*Q+$*F)},round:function(V,P){const _=""+V,N=_.indexOf(".");return parseFloat(_.substring(0,N+1+P))},dist:function(V,P){const _=V.x-P.x,N=V.y-P.y;return m(_*_+N*N)},closest:function(V,P){let _,N,$=w(2,63);return V.forEach(function(Q,F){N=R.dist(P,Q),N<$&&($=N,_=F)}),{mdist:$,mpos:_}},abcratio:function(V,P){if(P!==2&&P!==3)return!1;if(V===void 0)V=.5;else if(V===0||V===1)return V;const _=w(V,P)+w(1-V,P);return l((_-1)/_)},projectionratio:function(V,P){if(P!==2&&P!==3)return!1;if(V===void 0)V=.5;else if(V===0||V===1)return V;const _=w(1-V,P);return _/(w(V,P)+_)},lli8:function(V,P,_,N,$,Q,F,J){const tt=(V-_)*(Q-J)-(P-N)*($-F);return tt!=0&&{x:((V*N-P*_)*($-F)-(V-_)*($*J-Q*F))/tt,y:((V*N-P*_)*(Q-J)-(P-N)*($*J-Q*F))/tt}},lli4:function(V,P,_,N){const $=V.x,Q=V.y,F=P.x,J=P.y,tt=_.x,it=_.y,xt=N.x,gt=N.y;return R.lli8($,Q,F,J,tt,it,xt,gt)},lli:function(V,P){return R.lli4(V,V.c,P,P.c)},makeline:function(V,P){return new wt(V.x,V.y,(V.x+P.x)/2,(V.y+P.y)/2,P.x,P.y)},findbbox:function(V){let P=B,_=B,N=A,$=A;return V.forEach(function(Q){const F=Q.bbox();P>F.x.min&&(P=F.x.min),_>F.y.min&&(_=F.y.min),N<F.x.max&&(N=F.x.max),$<F.y.max&&($=F.y.max)}),{x:{min:P,mid:(P+N)/2,max:N,size:N-P},y:{min:_,mid:(_+$)/2,max:$,size:$-_}}},shapeintersections:function(V,P,_,N,$){if(!R.bboxoverlap(P,N))return[];const Q=[],F=[V.startcap,V.forward,V.back,V.endcap],J=[_.startcap,_.forward,_.back,_.endcap];return F.forEach(function(tt){tt.virtual||J.forEach(function(it){if(it.virtual)return;const xt=tt.intersects(it,$);xt.length>0&&(xt.c1=tt,xt.c2=it,xt.s1=V,xt.s2=_,Q.push(xt))})}),Q},makeshape:function(V,P,_){const N=P.points.length,$=V.points.length,Q=R.makeline(P.points[N-1],V.points[0]),F=R.makeline(V.points[$-1],P.points[0]),J={startcap:Q,forward:V,back:P,endcap:F,bbox:R.findbbox([Q,V,P,F]),intersections:function(tt){return R.shapeintersections(J,J.bbox,tt,tt.bbox,_)}};return J},getminmax:function(V,P,_){if(!_)return{min:0,max:0};let N,$,Q=B,F=A;_.indexOf(0)===-1&&(_=[0].concat(_)),_.indexOf(1)===-1&&_.push(1);for(let J=0,tt=_.length;J<tt;J++)N=_[J],$=V.get(N),$[P]<Q&&(Q=$[P]),$[P]>F&&(F=$[P]);return{min:Q,mid:(Q+F)/2,max:F,size:F-Q}},align:function(V,P){const _=P.p1.x,N=P.p1.y,$=-p(P.p2.y-N,P.p2.x-_);return V.map(function(Q){return{x:(Q.x-_)*c($)-(Q.y-N)*h($),y:(Q.x-_)*h($)+(Q.y-N)*c($)}})},roots:function(V,P){P=P||{p1:{x:0,y:0},p2:{x:1,y:0}};const _=V.length-1,N=R.align(V,P),$=function(ee){return 0<=ee&&ee<=1};if(_===2){const ee=N[0].y,xe=N[1].y,le=N[2].y,Re=ee-2*xe+le;if(Re!==0){const me=-m(xe*xe-ee*le),Qe=-ee+xe;return[-(me+Qe)/Re,-(-me+Qe)/Re].filter($)}return xe!==le&&Re===0?[(2*xe-le)/(2*xe-2*le)].filter($):[]}const Q=N[0].y,F=N[1].y,J=N[2].y;let tt=3*F-Q-3*J+N[3].y,it=3*Q-6*F+3*J,xt=-3*Q+3*F,gt=Q;if(R.approximately(tt,0)){if(R.approximately(it,0))return R.approximately(xt,0)?[]:[-gt/xt].filter($);const ee=m(xt*xt-4*it*gt),xe=2*it;return[(ee-xt)/xe,(-xt-ee)/xe].filter($)}it/=tt,xt/=tt,gt/=tt;const Lt=(3*xt-it*it)/3,$t=Lt/3,ot=(2*it*it*it-9*it*xt+27*gt)/27,Pt=ot/2,Rt=Pt*Pt+$t*$t*$t;let It,he,Nt,ge,ae;if(Rt<0){const ee=-Lt/3,xe=m(ee*ee*ee),le=-ot/(2*xe),Re=d(le<-1?-1:le>1?1:le),me=2*x(xe);return Nt=me*c(Re/3)-it/3,ge=me*c((Re+D)/3)-it/3,ae=me*c((Re+2*D)/3)-it/3,[Nt,ge,ae].filter($)}if(Rt===0)return It=Pt<0?x(-Pt):-x(Pt),Nt=2*It-it/3,ge=-It-it/3,[Nt,ge].filter($);{const ee=m(Rt);return It=x(-Pt+ee),he=x(Pt+ee),[It-he-it/3].filter($)}},droots:function(V){if(V.length===3){const P=V[0],_=V[1],N=V[2],$=P-2*_+N;if($!==0){const Q=-m(_*_-P*N),F=-P+_;return[-(Q+F)/$,-(-Q+F)/$]}return _!==N&&$===0?[(2*_-N)/(2*(_-N))]:[]}if(V.length===2){const P=V[0],_=V[1];return P!==_?[P/(P-_)]:[]}return[]},curvature:function(V,P,_,N,$){let Q,F,J,tt,it=0,xt=0;const gt=R.compute(V,P),Lt=R.compute(V,_),$t=gt.x*gt.x+gt.y*gt.y;if(N?(Q=m(w(gt.y*Lt.z-Lt.y*gt.z,2)+w(gt.z*Lt.x-Lt.z*gt.x,2)+w(gt.x*Lt.y-Lt.x*gt.y,2)),F=w($t+gt.z*gt.z,1.5)):(Q=gt.x*Lt.y-gt.y*Lt.x,F=w($t,1.5)),Q===0||F===0)return{k:0,r:0};if(it=Q/F,xt=F/Q,!$){const ot=R.curvature(V-.001,P,_,N,!0).k,Pt=R.curvature(V+.001,P,_,N,!0).k;tt=(Pt-it+(it-ot))/2,J=(l(Pt-it)+l(it-ot))/2}return{k:it,r:xt,dk:tt,adk:J}},inflections:function(V){if(V.length<4)return[];const P=R.align(V,{p1:V[0],p2:V.slice(-1)[0]}),_=P[2].x*P[1].y,N=P[3].x*P[1].y,$=P[1].x*P[2].y,Q=18*(-3*_+2*N+3*$-P[3].x*P[2].y),F=18*(3*_-N-3*$),J=18*($-_);if(R.approximately(Q,0)){if(!R.approximately(F,0)){let gt=-J/F;if(0<=gt&&gt<=1)return[gt]}return[]}const tt=F*F-4*Q*J,it=Math.sqrt(tt),xt=2*Q;return R.approximately(xt,0)?[]:[(it-F)/xt,-(F+it)/xt].filter(function(gt){return 0<=gt&&gt<=1})},bboxoverlap:function(V,P){const _=["x","y"],N=_.length;for(let $,Q,F,J,tt=0;tt<N;tt++)if($=_[tt],Q=V[$].mid,F=P[$].mid,J=(V[$].size+P[$].size)/2,l(Q-F)>=J)return!1;return!0},expandbox:function(V,P){P.x.min<V.x.min&&(V.x.min=P.x.min),P.y.min<V.y.min&&(V.y.min=P.y.min),P.z&&P.z.min<V.z.min&&(V.z.min=P.z.min),P.x.max>V.x.max&&(V.x.max=P.x.max),P.y.max>V.y.max&&(V.y.max=P.y.max),P.z&&P.z.max>V.z.max&&(V.z.max=P.z.max),V.x.mid=(V.x.min+V.x.max)/2,V.y.mid=(V.y.min+V.y.max)/2,V.z&&(V.z.mid=(V.z.min+V.z.max)/2),V.x.size=V.x.max-V.x.min,V.y.size=V.y.max-V.y.min,V.z&&(V.z.size=V.z.max-V.z.min)},pairiteration:function(V,P,_){const N=V.bbox(),$=P.bbox(),Q=1e5,F=_||.5;if(N.x.size+N.y.size<F&&$.x.size+$.y.size<F)return[(Q*(V._t1+V._t2)/2|0)/Q+"/"+(Q*(P._t1+P._t2)/2|0)/Q];let J=V.split(.5),tt=P.split(.5),it=[{left:J.left,right:tt.left},{left:J.left,right:tt.right},{left:J.right,right:tt.right},{left:J.right,right:tt.left}];it=it.filter(function(gt){return R.bboxoverlap(gt.left.bbox(),gt.right.bbox())});let xt=[];return it.length===0||(it.forEach(function(gt){xt=xt.concat(R.pairiteration(gt.left,gt.right,F))}),xt=xt.filter(function(gt,Lt){return xt.indexOf(gt)===Lt})),xt},getccenter:function(V,P,_){const N=P.x-V.x,$=P.y-V.y,Q=_.x-P.x,F=_.y-P.y,J=N*c(b)-$*h(b),tt=N*h(b)+$*c(b),it=Q*c(b)-F*h(b),xt=Q*h(b)+F*c(b),gt=(V.x+P.x)/2,Lt=(V.y+P.y)/2,$t=(P.x+_.x)/2,ot=(P.y+_.y)/2,Pt=gt+J,Rt=Lt+tt,It=$t+it,he=ot+xt,Nt=R.lli8(gt,Lt,Pt,Rt,$t,ot,It,he),ge=R.dist(Nt,V);let ae,ee=p(V.y-Nt.y,V.x-Nt.x),xe=p(P.y-Nt.y,P.x-Nt.x),le=p(_.y-Nt.y,_.x-Nt.x);return ee<le?((ee>xe||xe>le)&&(ee+=D),ee>le&&(ae=le,le=ee,ee=ae)):le<xe&&xe<ee?(ae=le,le=ee,ee=ae):le+=D,Nt.s=ee,Nt.e=le,Nt.r=ge,Nt},numberSort:function(V,P){return V-P}};class k{constructor(P){this.curves=[],this._3d=!1,P&&(this.curves=P,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(P){return R.pointsToString(P.points)}).join(", ")+"]"}addCurve(P){this.curves.push(P),this._3d=this._3d||P._3d}length(){return this.curves.map(function(P){return P.length()}).reduce(function(P,_){return P+_})}curve(P){return this.curves[P]}bbox(){const P=this.curves;for(var _=P[0].bbox(),N=1;N<P.length;N++)R.expandbox(_,P[N].bbox());return _}offset(P){const _=[];return this.curves.forEach(function(N){_.push(...N.offset(P))}),new k(_)}}const{abs:W,min:U,max:nt,cos:st,sin:ft,acos:Et,sqrt:ct}=Math,mt=Math.PI;class wt{constructor(P){let _=P&&P.forEach?P:Array.from(arguments).slice(),N=!1;if(typeof _[0]=="object"){N=_.length;const $t=[];_.forEach(function(ot){["x","y","z"].forEach(function(Pt){ot[Pt]!==void 0&&$t.push(ot[Pt])})}),_=$t}let $=!1;const Q=_.length;if(N){if(N>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");$=!0}}else if(Q!==6&&Q!==8&&Q!==9&&Q!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const F=this._3d=!$&&(Q===9||Q===12)||P&&P[0]&&P[0].z!==void 0,J=this.points=[];for(let $t=0,ot=F?3:2;$t<Q;$t+=ot){var tt={x:_[$t],y:_[$t+1]};F&&(tt.z=_[$t+2]),J.push(tt)}const it=this.order=J.length-1,xt=this.dims=["x","y"];F&&xt.push("z"),this.dimlen=xt.length;const gt=R.align(J,{p1:J[0],p2:J[it]}),Lt=R.dist(J[0],J[it]);this._linear=gt.reduce(($t,ot)=>$t+W(ot.y),0)<Lt/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(P,_,N,$){if($===void 0&&($=.5),$===0)return new wt(_,_,N);if($===1)return new wt(P,_,_);const Q=wt.getABC(2,P,_,N,$);return new wt(P,Q.A,N)}static cubicFromPoints(P,_,N,$,Q){$===void 0&&($=.5);const F=wt.getABC(3,P,_,N,$);Q===void 0&&(Q=R.dist(_,F.C));const J=Q*(1-$)/$,tt=R.dist(P,N),it=(N.x-P.x)/tt,xt=(N.y-P.y)/tt,gt=Q*it,Lt=Q*xt,$t=J*it,ot=J*xt,Pt=_.x-gt,Rt=_.y-Lt,It=_.x+$t,he=_.y+ot,Nt=F.A,ge=Nt.x+(Pt-Nt.x)/(1-$),ae=Nt.y+(Rt-Nt.y)/(1-$),ee=Nt.x+(It-Nt.x)/$,xe=Nt.y+(he-Nt.y)/$,le={x:P.x+(ge-P.x)/$,y:P.y+(ae-P.y)/$},Re={x:N.x+(ee-N.x)/(1-$),y:N.y+(xe-N.y)/(1-$)};return new wt(P,le,Re,N)}static getUtils(){return R}getUtils(){return wt.getUtils()}static get PolyBezier(){return k}valueOf(){return this.toString()}toString(){return R.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const P=this.points,_=["M",P[0].x,P[0].y,this.order===2?"Q":"C"];for(let N=1,$=P.length;N<$;N++)_.push(P[N].x),_.push(P[N].y);return _.join(" ")}setRatios(P){if(P.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=P,this._lut=[]}verify(){const P=this.coordDigest();P!==this._print&&(this._print=P,this.update())}coordDigest(){return this.points.map(function(P,_){return""+_+P.x+P.y+(P.z?P.z:0)}).join("")}update(){this._lut=[],this.dpoints=R.derive(this.points,this._3d),this.computedirection()}computedirection(){const P=this.points,_=R.angle(P[0],P[this.order],P[1]);this.clockwise=_>0}length(){return R.length(this.derivative.bind(this))}static getABC(P=2,_,N,$,Q=.5){const F=R.projectionratio(Q,P),J=1-F,tt={x:F*_.x+J*$.x,y:F*_.y+J*$.y},it=R.abcratio(Q,P);return{A:{x:N.x+(N.x-tt.x)/it,y:N.y+(N.y-tt.y)/it},B:N,C:tt,S:_,E:$}}getABC(P,_){_=_||this.get(P);let N=this.points[0],$=this.points[this.order];return wt.getABC(this.order,N,_,$,P)}getLUT(P){if(this.verify(),P=P||100,this._lut.length===P)return this._lut;this._lut=[],P++,this._lut=[];for(let _,N,$=0;$<P;$++)N=$/(P-1),_=this.compute(N),_.t=N,this._lut.push(_);return this._lut}on(P,_){_=_||5;const N=this.getLUT(),$=[];for(let Q,F=0,J=0;F<N.length;F++)Q=N[F],R.dist(Q,P)<_&&($.push(Q),J+=F/N.length);return!!$.length&&(t/=$.length)}project(P){const _=this.getLUT(),N=_.length-1,$=R.closest(_,P),Q=$.mpos,F=(Q-1)/N,J=(Q+1)/N,tt=.1/N;let it,xt,gt=$.mdist,Lt=F,$t=Lt;for(gt+=1;Lt<J+tt;Lt+=tt)it=this.compute(Lt),xt=R.dist(P,it),xt<gt&&(gt=xt,$t=Lt);return $t=$t<0?0:$t>1?1:$t,it=this.compute($t),it.t=$t,it.d=gt,it}get(P){return this.compute(P)}point(P){return this.points[P]}compute(P){return this.ratios?R.computeWithRatios(P,this.points,this.ratios,this._3d):R.compute(P,this.points,this._3d,this.ratios)}raise(){const P=this.points,_=[P[0]],N=P.length;for(let $,Q,F=1;F<N;F++)$=P[F],Q=P[F-1],_[F]={x:(N-F)/N*$.x+F/N*Q.x,y:(N-F)/N*$.y+F/N*Q.y};return _[N]=P[N-1],new wt(_)}derivative(P){return R.compute(P,this.dpoints[0],this._3d)}dderivative(P){return R.compute(P,this.dpoints[1],this._3d)}align(){let P=this.points;return new wt(R.align(P,{p1:P[0],p2:P[P.length-1]}))}curvature(P){return R.curvature(P,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return R.inflections(this.points)}normal(P){return this._3d?this.__normal3(P):this.__normal2(P)}__normal2(P){const _=this.derivative(P),N=ct(_.x*_.x+_.y*_.y);return{x:-_.y/N,y:_.x/N}}__normal3(P){const _=this.derivative(P),N=this.derivative(P+.01),$=ct(_.x*_.x+_.y*_.y+_.z*_.z),Q=ct(N.x*N.x+N.y*N.y+N.z*N.z);_.x/=$,_.y/=$,_.z/=$,N.x/=Q,N.y/=Q,N.z/=Q;const F={x:N.y*_.z-N.z*_.y,y:N.z*_.x-N.x*_.z,z:N.x*_.y-N.y*_.x},J=ct(F.x*F.x+F.y*F.y+F.z*F.z);F.x/=J,F.y/=J,F.z/=J;const tt=[F.x*F.x,F.x*F.y-F.z,F.x*F.z+F.y,F.x*F.y+F.z,F.y*F.y,F.y*F.z-F.x,F.x*F.z-F.y,F.y*F.z+F.x,F.z*F.z];return{x:tt[0]*_.x+tt[1]*_.y+tt[2]*_.z,y:tt[3]*_.x+tt[4]*_.y+tt[5]*_.z,z:tt[6]*_.x+tt[7]*_.y+tt[8]*_.z}}hull(P){let _=this.points,N=[],$=[],Q=0;for($[Q++]=_[0],$[Q++]=_[1],$[Q++]=_[2],this.order===3&&($[Q++]=_[3]);_.length>1;){N=[];for(let F,J=0,tt=_.length-1;J<tt;J++)F=R.lerp(P,_[J],_[J+1]),$[Q++]=F,N.push(F);_=N}return $}split(P,_){if(P===0&&_)return this.split(_).left;if(_===1)return this.split(P).right;const N=this.hull(P),$={left:this.order===2?new wt([N[0],N[3],N[5]]):new wt([N[0],N[4],N[7],N[9]]),right:this.order===2?new wt([N[5],N[4],N[2]]):new wt([N[9],N[8],N[6],N[3]]),span:N};return $.left._t1=R.map(0,0,1,this._t1,this._t2),$.left._t2=R.map(P,0,1,this._t1,this._t2),$.right._t1=R.map(P,0,1,this._t1,this._t2),$.right._t2=R.map(1,0,1,this._t1,this._t2),_?(_=R.map(_,P,1,0,1),$.right.split(_).left):$}extrema(){const P={};let _=[];return this.dims.forEach((function(N){let $=function(F){return F[N]},Q=this.dpoints[0].map($);P[N]=R.droots(Q),this.order===3&&(Q=this.dpoints[1].map($),P[N]=P[N].concat(R.droots(Q))),P[N]=P[N].filter(function(F){return F>=0&&F<=1}),_=_.concat(P[N].sort(R.numberSort))}).bind(this)),P.values=_.sort(R.numberSort).filter(function(N,$){return _.indexOf(N)===$}),P}bbox(){const P=this.extrema(),_={};return this.dims.forEach((function(N){_[N]=R.getminmax(this,N,P[N])}).bind(this)),_}overlaps(P){const _=this.bbox(),N=P.bbox();return R.bboxoverlap(_,N)}offset(P,_){if(_!==void 0){const N=this.get(P),$=this.normal(P),Q={c:N,n:$,x:N.x+$.x*_,y:N.y+$.y*_};return this._3d&&(Q.z=N.z+$.z*_),Q}if(this._linear){const N=this.normal(0),$=this.points.map(function(Q){const F={x:Q.x+P*N.x,y:Q.y+P*N.y};return Q.z&&N.z&&(F.z=Q.z+P*N.z),F});return[new wt($)]}return this.reduce().map(function(N){return N._linear?N.offset(P)[0]:N.scale(P)})}simple(){if(this.order===3){const $=R.angle(this.points[0],this.points[3],this.points[1]),Q=R.angle(this.points[0],this.points[3],this.points[2]);if($>0&&Q<0||$<0&&Q>0)return!1}const P=this.normal(0),_=this.normal(1);let N=P.x*_.x+P.y*_.y;return this._3d&&(N+=P.z*_.z),W(Et(N))<mt/3}reduce(){let P,_,N=0,$=0,Q=.01,F=[],J=[],tt=this.extrema().values;for(tt.indexOf(0)===-1&&(tt=[0].concat(tt)),tt.indexOf(1)===-1&&tt.push(1),N=tt[0],P=1;P<tt.length;P++)$=tt[P],_=this.split(N,$),_._t1=N,_._t2=$,F.push(_),N=$;return F.forEach(function(it){for(N=0,$=0;$<=1;)for($=N+Q;$<=1.01;$+=Q)if(_=it.split(N,$),!_.simple()){if($-=Q,W(N-$)<Q)return[];_=it.split(N,$),_._t1=R.map(N,0,1,it._t1,it._t2),_._t2=R.map($,0,1,it._t1,it._t2),J.push(_),N=$;break}N<1&&(_=it.split(N,1),_._t1=R.map(N,0,1,it._t1,it._t2),_._t2=it._t2,J.push(_))}),J}translate(P,_,N){N=typeof N=="number"?N:_;const $=this.order;let Q=this.points.map((F,J)=>(1-J/$)*_+J/$*N);return new wt(this.points.map((F,J)=>({x:F.x+P.x*Q[J],y:F.y+P.y*Q[J]})))}scale(P){const _=this.order;let N=!1;if(typeof P=="function"&&(N=P),N&&_===2)return this.raise().scale(N);const $=this.clockwise,Q=this.points;if(this._linear)return this.translate(this.normal(0),N?N(0):P,N?N(1):P);const F=N?N(0):P,J=N?N(1):P,tt=[this.offset(0,10),this.offset(1,10)],it=[],xt=R.lli4(tt[0],tt[0].c,tt[1],tt[1].c);if(!xt)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(gt){const Lt=it[gt*_]=R.copy(Q[gt*_]);Lt.x+=(gt?J:F)*tt[gt].n.x,Lt.y+=(gt?J:F)*tt[gt].n.y}),N?([0,1].forEach(function(gt){if(_!==2||!gt){var Lt=Q[gt+1],$t={x:Lt.x-xt.x,y:Lt.y-xt.y},ot=N?N((gt+1)/_):P;N&&!$&&(ot=-ot);var Pt=ct($t.x*$t.x+$t.y*$t.y);$t.x/=Pt,$t.y/=Pt,it[gt+1]={x:Lt.x+ot*$t.x,y:Lt.y+ot*$t.y}}}),new wt(it)):([0,1].forEach(gt=>{if(_===2&&gt)return;const Lt=it[gt*_],$t=this.derivative(gt),ot={x:Lt.x+$t.x,y:Lt.y+$t.y};it[gt+1]=R.lli4(Lt,ot,xt,Q[gt+1])}),new wt(it))}outline(P,_,N,$){if(_=_===void 0?P:_,this._linear){const ae=this.normal(0),ee=this.points[0],xe=this.points[this.points.length-1];let le,Re,me;N===void 0&&(N=P,$=_),le={x:ee.x+ae.x*P,y:ee.y+ae.y*P},me={x:xe.x+ae.x*N,y:xe.y+ae.y*N},Re={x:(le.x+me.x)/2,y:(le.y+me.y)/2};const Qe=[le,Re,me];le={x:ee.x-ae.x*_,y:ee.y-ae.y*_},me={x:xe.x-ae.x*$,y:xe.y-ae.y*$},Re={x:(le.x+me.x)/2,y:(le.y+me.y)/2};const ei=[me,Re,le],Fn=R.makeline(ei[2],Qe[0]),Kn=R.makeline(Qe[2],ei[0]),Br=[Fn,new wt(Qe),Kn,new wt(ei)];return new k(Br)}const Q=this.reduce(),F=Q.length,J=[];let tt,it=[],xt=0,gt=this.length();const Lt=N!==void 0&&$!==void 0;function $t(ae,ee,xe,le,Re){return function(me){const Qe=le/xe,ei=(le+Re)/xe,Fn=ee-ae;return R.map(me,0,1,ae+Qe*Fn,ae+ei*Fn)}}Q.forEach(function(ae){const ee=ae.length();Lt?(J.push(ae.scale($t(P,N,gt,xt,ee))),it.push(ae.scale($t(-_,-$,gt,xt,ee)))):(J.push(ae.scale(P)),it.push(ae.scale(-_))),xt+=ee}),it=it.map(function(ae){return tt=ae.points,tt[3]?ae.points=[tt[3],tt[2],tt[1],tt[0]]:ae.points=[tt[2],tt[1],tt[0]],ae}).reverse();const ot=J[0].points[0],Pt=J[F-1].points[J[F-1].points.length-1],Rt=it[F-1].points[it[F-1].points.length-1],It=it[0].points[0],he=R.makeline(Rt,ot),Nt=R.makeline(Pt,It),ge=[he].concat(J).concat([Nt]).concat(it);return new k(ge)}outlineshapes(P,_,N){_=_||P;const $=this.outline(P,_).curves,Q=[];for(let F=1,J=$.length;F<J/2;F++){const tt=R.makeshape($[F],$[J-F],N);tt.startcap.virtual=F>1,tt.endcap.virtual=F<J/2-1,Q.push(tt)}return Q}intersects(P,_){return P?P.p1&&P.p2?this.lineIntersects(P):(P instanceof wt&&(P=P.reduce()),this.curveintersects(this.reduce(),P,_)):this.selfintersects(_)}lineIntersects(P){const _=U(P.p1.x,P.p2.x),N=U(P.p1.y,P.p2.y),$=nt(P.p1.x,P.p2.x),Q=nt(P.p1.y,P.p2.y);return R.roots(this.points,P).filter(F=>{var J=this.get(F);return R.between(J.x,_,$)&&R.between(J.y,N,Q)})}selfintersects(P){const _=this.reduce(),N=_.length-2,$=[];for(let Q,F,J,tt=0;tt<N;tt++)F=_.slice(tt,tt+1),J=_.slice(tt+2),Q=this.curveintersects(F,J,P),$.push(...Q);return $}curveintersects(P,_,N){const $=[];P.forEach(function(F){_.forEach(function(J){F.overlaps(J)&&$.push({left:F,right:J})})});let Q=[];return $.forEach(function(F){const J=R.pairiteration(F.left,F.right,N);J.length>0&&(Q=Q.concat(J))}),Q}arcs(P){return P=P||.5,this._iterate(P,[])}_error(P,_,N,$){const Q=($-N)/4,F=this.get(N+Q),J=this.get($-Q),tt=R.dist(P,_),it=R.dist(P,F),xt=R.dist(P,J);return W(it-tt)+W(xt-tt)}_iterate(P,_){let N,$=0,Q=1;do{N=0,Q=1;let F,J,tt,it,xt,gt=this.get($),Lt=!1,$t=!1,ot=Q,Pt=1;do if($t=Lt,it=tt,ot=($+Q)/2,F=this.get(ot),J=this.get(Q),tt=R.getccenter(gt,F,J),tt.interval={start:$,end:Q},Lt=this._error(tt,gt,$,Q)<=P,xt=$t&&!Lt,xt||(Pt=Q),Lt){if(Q>=1){if(tt.interval.end=Pt=1,it=tt,Q>1){let Rt={x:tt.x+tt.r*st(tt.e),y:tt.y+tt.r*ft(tt.e)};tt.e+=R.angle({x:tt.x,y:tt.y},Rt,this.get(1))}break}Q+=(Q-$)/2}else Q=ot;while(!xt&&N++<100);if(N>=100)break;it=it||tt,_.push(it),$=Pt}while(Q<1);return _}}a.Bezier=wt}},r={};return function o(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a](c,c.exports,o),c.exports}(607)})()})}(Ow)),Ow.exports}var zc=GQ();const H9="laser-pointer",zQ=e=>{const n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/n};class jQ{constructor(){this.mouseTrack=[],this.mouseMoveHandler=null,this.resizeHandler=null,this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1,this.container=null}init(n){this.container=G.getBoardContainer(n).closest(".drawnix"),this.cvsDom=this.container.querySelector(`.${H9}`),this.ctx=this.cvsDom.getContext("2d"),this.canvasPos=this.cvsDom.getBoundingClientRect(),this.mouseMoveHandler=i=>{if(!this.canvasPos)return;const r=i.clientX-this.canvasPos.x,o=i.clientY-this.canvasPos.y;this.mouseTrack.push({x:r,y:o,time:Date.now()}),this.ctx&&this.startDraw()},this.resizeHandler=()=>this.setCanvasSize(),this.container.addEventListener("pointermove",this.mouseMoveHandler),window.addEventListener("resize",this.resizeHandler),this.setCanvasSize()}destroy(){this.mouseMoveHandler&&this.container&&(this.container.removeEventListener("pointermove",this.mouseMoveHandler),this.mouseMoveHandler=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.ctx&&this.cvsDom&&this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height),this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1}startDraw(){this.drawing||(this.drawing=!0,this.draw())}draw(){if(!this.ctx||!this.cvsDom)return;this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height);let n=!1;if(this.mouseTrack=zc.drainPoints(this.mouseTrack),this.mouseTrack.length>=3)zc.setColor(211,211,211),zc.setDelay(180),zc.setRoundCap(!0),zc.setMaxWidth(10),zc.setMinWidth(0),zc.setOpacity(.6),zc.drawLaserPen(this.ctx,this.mouseTrack),n=!0;else{const i=this.mouseTrack[this.mouseTrack.length-1];if(!i)return;this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle="rgba(211, 211, 211)",this.ctx.arc(i.x,i.y,5,0,Math.PI*2,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}n?requestAnimationFrame(()=>this.draw()):this.drawing=!1}setCanvasSize(){if(!this.cvsDom||!this.ctx)return;const n=this.cvsDom.getBoundingClientRect(),i=zQ(this.ctx);this.cvsDom.setAttribute("width",`${n.width*i}px`),this.cvsDom.setAttribute("height",`${n.height*i}px`),this.ctx.scale(i,i),this.canvasPos=this.cvsDom.getBoundingClientRect()}}const UQ=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,globalPointerUp:o,touchStart:a}=e,l=new jQ;let c=!1;const h=new Set,d=w=>{const x=Pe(e,ke(e,w[0],w[1]));e.children.filter(D=>js.isFreehand(D)).forEach(D=>{!h.has(D.id)&&k9(e,D,x)&&(gn.getElementG(D).style.opacity="0.2",h.add(D.id))})},p=()=>{if(h.size>0){const w=e.children.filter(x=>h.has(x.id));w.length>0&&MT.removeElements(e,w)}},m=()=>{c&&(p(),c=!1,h.clear(),l.destroy())};return e.touchStart=w=>{if(G.isInPointer(e,[Yo.eraser])&&Pl(e))return w.preventDefault();a(w)},e.pointerDown=w=>{if(G.isInPointer(e,[Yo.eraser])&&Pl(e)){c=!0,h.clear();const T=[w.x,w.y];d(T),l.init(e);return}n(w)},e.pointerMove=w=>{if(c&&!ix(e)){_a(e,"with-freehand-erase",()=>{const x=[w.x,w.y];d(x)});return}if(c&&ix(e)){m();return}i(w)},e.pointerUp=w=>{if(c){m();return}r(w)},e.globalPointerUp=w=>{if(c){m();return}o(w)},e},$Q=e=>{const{getRectangle:n,drawElement:i,isHit:r,isRectangleHit:o,getOneHitElement:a,isMovable:l,isAlign:c}=e;return e.drawElement=h=>js.isFreehand(h.element)?FQ:i(h),e.getRectangle=h=>js.isFreehand(h)?H.getRectangleByPoints(h.points):n(h),e.isRectangleHit=(h,d)=>js.isFreehand(h)?BQ(e,h,d):o(h,d),e.isHit=(h,d,p)=>js.isFreehand(h)?k9(e,h,d):r(h,d,p),e.getOneHitElement=h=>h.every(p=>js.isFreehand(p))?UP(e,h):a(h),e.isMovable=h=>js.isFreehand(h)?!0:l(h),e.isAlign=h=>js.isFreehand(h)?!0:c(h),e.setPluginOptions(gP,{customGeometryTypes:[MM]}),UQ(HQ(IQ(e)))},VQ=()=>{const e=qi(),{t:n}=ti(),i=e.theme;return O.jsx(Jo,{padding:1,className:mn("theme-toolbar",Fa),children:O.jsxs("select",{onChange:r=>{const o=r.target.value;un.updateThemeColor(e,o)},value:i.themeColorMode,children:[O.jsx("option",{value:"default",children:n("theme.default")}),O.jsx("option",{value:"colorful",children:n("theme.colorful")}),O.jsx("option",{value:"soft",children:n("theme.soft")}),O.jsx("option",{value:"retro",children:n("theme.retro")}),O.jsx("option",{value:"dark",children:n("theme.dark")}),O.jsx("option",{value:"starry",children:n("theme.starry")})]})})},N9=new WeakMap,F8=e=>!!N9.get(e),G9=(e,n)=>{N9.set(e,n)},WQ=e=>i=>{const{pointerDown:r}=i;return i.pointerDown=o=>{aS(o)&&!F8(i)&&(G9(i,!0),e({isPencilMode:!0})),!(F8(i)&&!aS(o))&&r(o)},i},XQ=()=>{const e=qi(),{appState:n,setAppState:i}=Ps();return O.jsx(O.Fragment,{children:n.isPencilMode&&O.jsx("div",{className:"pencil-mode-toolbar",children:O.jsx(jn,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{i({...n,isPencilMode:!1}),G9(e,!1)}})})})};function qQ({initialOpen:e=!1,open:n,onOpenChange:i}={}){const[r,o]=Y.useState(e),[a,l]=Y.useState(),[c,h]=Y.useState(),d=n??r,p=i??o,m=mC({open:d,onOpenChange:p}),w=m.context,x=l9(w,{enabled:n==null}),T=u9(w,{outsidePressEvent:"mousedown"}),D=f9(w),b=c9([x,T,D]);return Y.useMemo(()=>({open:d,setOpen:p,...b,...m,labelId:a,descriptionId:c,setLabelId:l,setDescriptionId:h}),[d,p,b,m,a,c])}const z9=Y.createContext(null),Pv=()=>{const e=Y.useContext(z9);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function QS({children:e,...n}){const i=qQ(n);return O.jsx(z9.Provider,{value:i,children:e})}Y.forwardRef(function({children:n,asChild:i=!1,...r},o){const a=Pv(),l=n.ref,c=gC([a.refs.setReference,o,l]);return i&&Y.isValidElement(n)?Y.cloneElement(n,a.getReferenceProps({ref:c,...r,...n.props,"data-state":a.open?"open":"closed"})):O.jsx("button",{ref:c,"data-state":a.open?"open":"closed",...a.getReferenceProps(r),children:n})});const JS=Y.forwardRef(function(n,i){const{context:r,...o}=Pv(),a=gC([o.refs.setFloating,i]);return r.open?O.jsx(o9,{root:n.container,children:O.jsx(GZ,{className:"Dialog-overlay",lockScroll:!0,children:O.jsx(a9,{context:r,children:O.jsx("div",{ref:a,"aria-labelledby":o.labelId,"aria-describedby":o.descriptionId,...o.getFloatingProps(n),children:n.children})})})}):null});Y.forwardRef(function({children:n,...i},r){const{setLabelId:o}=Pv(),a=bv();return Y.useLayoutEffect(()=>(o(a),()=>o(void 0)),[a,o]),O.jsx("h2",{...i,ref:r,id:a,children:n})});Y.forwardRef(function({children:n,...i},r){const{setDescriptionId:o}=Pv(),a=bv();return Y.useLayoutEffect(()=>(o(a),()=>o(void 0)),[a,o]),O.jsx("p",{...i,ref:r,id:a,children:n})});Y.forwardRef(function(n,i){const{setOpen:r}=Pv();return O.jsx("button",{type:"button",...n,ref:i,onClick:()=>r(!1)})});const YQ="modulepreload",KQ=function(e){return"/"+e},k8={},j9=function(n,i,r){let o=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(i.map(h=>{if(h=KQ(h),h in k8)return;k8[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":YQ,d||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((w,x)=>{m.addEventListener("load",w),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return n().catch(a)})},U9=({children:e})=>O.jsx("div",{className:"ttd-dialog-panels",children:e}),Ax=({label:e,children:n,panelAction:i,panelActionDisabled:r=!1,onTextSubmitInProgress:o,renderTopRight:a,renderSubmitShortcut:l,renderBottomRight:c})=>O.jsxs("div",{className:"ttd-dialog-panel",children:[O.jsxs("div",{className:"ttd-dialog-panel__header",children:[O.jsx("label",{children:e}),a==null?void 0:a()]}),n,O.jsxs("div",{className:mn("ttd-dialog-panel-button-container",{invisible:!i}),style:{display:"flex",alignItems:"center"},children:[O.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:i&&i.action,disabled:r||o,children:O.jsxs("div",{className:mn({invisible:o}),children:[i==null?void 0:i.label,(i==null?void 0:i.icon)&&O.jsx("span",{children:i.icon})]})}),!r&&!o&&(l==null?void 0:l()),c==null?void 0:c()]})]}),I8={CTRL_OR_CMD:OO||jw?"metaKey":"ctrlKey",ENTER:"Enter"},$9=({input:e,placeholder:n,onChange:i,onKeyboardSubmit:r})=>{const o=Y.useRef(null),a=Y.useRef(r);return a.current=r,Y.useEffect(()=>{if(!a.current)return;const l=o.current;if(l){const c=h=>{var d;h[I8.CTRL_OR_CMD]&&h.key===I8.ENTER&&(h.preventDefault(),(d=a.current)==null||d.call(a))};return l.addEventListener(Ig.KEYDOWN,c),()=>{l.removeEventListener(Ig.KEYDOWN,c)}}},[]),O.jsx("textarea",{className:"ttd-dialog-input",onChange:i,value:e,placeholder:n,autoFocus:!0,ref:o})},ZQ=({error:e})=>O.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",O.jsx("p",{children:e})]}),V9=({error:e,value:n,loaded:i})=>{const r=[S6,mM,cP,EM],o={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:_6};return O.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&O.jsx(ZQ,{error:e.message}),O.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:O.jsx(dP,{value:n,options:o,plugins:r,children:O.jsx(sB,{})})})]})},W9=()=>O.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[O.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:rv("CtrlOrCmd")}),O.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:rv("Enter")})]}),QQ=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,JQ=()=>{const{appState:e,setAppState:n}=Ps(),{t:i,language:r}=ti(),[o,a]=Y.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});Y.useEffect(()=>{(async()=>{try{const b=await j9(()=>import("./index2.js").then(B=>B.b6),[]);a({loaded:!0,api:Promise.resolve(b)})}catch(b){console.error("Failed to load mermaid library:",b),w(new Error(i("dialog.error.loadMermaid")))}})()},[]);const[l,c]=Y.useState(()=>QQ),[h,d]=Y.useState(()=>[]),p=Y.useDeferredValue(l.trim()),[m,w]=Y.useState(null),x=qi();Y.useEffect(()=>{(async()=>{try{const b=await o.api;let B;try{B=await b.parseMermaidToDrawnix(p)}catch{B=await b.parseMermaidToDrawnix(p.replace(/"/g,"'"))}const{elements:A}=B;d(A),w(null)}catch(b){w(b)}})()},[p,o]);const T=()=>{if(!h.length)return;const D=G.getBoardContainer(x).getBoundingClientRect(),b=[D.width/2,D.height/2],B=x.viewport.zoom,A=$g(x),I=A[0]+b[0]/B,R=A[1]+b[1]/B,k=h,W=H.getBoundingRectangle(k.filter(nt=>!So.isGroup(nt)).map(nt=>H.getRectangleByPoints(nt.points))),U=[I-W.width/2,R-W.height/2];x.insertFragment({elements:JSON.parse(JSON.stringify(k))},U,Ma.paste),n({...e,openDialogType:null})};return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"ttd-dialog-desc",children:r==="zh"?O.jsxs(O.Fragment,{children:[i("dialog.mermaid.description")," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.flowchart")}),"",O.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.sequence")})," ",""," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.class")}),i("dialog.mermaid.otherTypes")]}):O.jsxs(O.Fragment,{children:[i("dialog.mermaid.description")," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.flowchart")}),","," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.sequence")}),","," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.class")}),i("dialog.mermaid.otherTypes")]})}),O.jsxs(U9,{children:[O.jsx(Ax,{label:i("dialog.mermaid.syntax"),children:O.jsx($9,{input:l,placeholder:i("dialog.mermaid.placeholder"),onChange:D=>c(D.target.value),onKeyboardSubmit:()=>{T()}})}),O.jsx(Ax,{label:i("dialog.mermaid.preview"),panelAction:{action:()=>{T()},label:i("dialog.mermaid.insert")},renderSubmitShortcut:()=>O.jsx(W9,{}),children:O.jsx(V9,{value:h,loaded:o.loaded,error:m})})]})]})},tJ=()=>{const{appState:e,setAppState:n}=Ps(),{t:i,language:r}=ti(),[o,a]=Y.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(D,b)=>null})});Y.useEffect(()=>{(async()=>{try{const b=await j9(()=>import("./index3.js"),__vite__mapDeps([0,1]));a({loaded:!0,api:Promise.resolve(b)})}catch(b){console.error("Failed to load mermaid library:",b),w(new Error(i("dialog.error.loadMermaid")))}})()},[]);const[l,c]=Y.useState(()=>i("markdown.example")),[h,d]=Y.useState(()=>[]),p=Y.useDeferredValue(l.trim()),[m,w]=Y.useState(null),x=qi();Y.useEffect(()=>{c(i("markdown.example"))},[r]),Y.useEffect(()=>{(async()=>{try{const b=await o.api;let B;try{B=await b.parseMarkdownToDrawnix(p)}catch{B=await b.parseMarkdownToDrawnix(p.replace(/"/g,"'"))}const A=B;A.points=[[0,0]],A&&(d([A]),w(null))}catch(b){w(b)}})()},[p,o]);const T=()=>{if(!h.length)return;const D=G.getBoardContainer(x).getBoundingClientRect(),b=[D.width/4,D.height/2-20],B=x.viewport.zoom,A=$g(x),I=A[0]+b[0]/B,R=A[1]+b[1]/B,k=h;x.insertFragment({elements:JSON.parse(JSON.stringify(k))},[I,R],Ma.paste),n({...e,openDialogType:null})};return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"ttd-dialog-desc",children:i("dialog.markdown.description")}),O.jsxs(U9,{children:[O.jsx(Ax,{label:i("dialog.markdown.syntax"),children:O.jsx($9,{input:l,placeholder:i("dialog.markdown.placeholder"),onChange:D=>c(D.target.value),onKeyboardSubmit:()=>{T()}})}),O.jsx(Ax,{label:i("dialog.markdown.preview"),panelAction:{action:()=>{T()},label:i("dialog.markdown.insert")},renderSubmitShortcut:()=>O.jsx(W9,{}),children:O.jsx(V9,{value:h,loaded:o.loaded,error:m})})]})]})},eJ=({container:e})=>{const{appState:n,setAppState:i}=Ps();return O.jsxs(O.Fragment,{children:[O.jsx(QS,{open:n.openDialogType===Vh.mermaidToDrawnix,onOpenChange:r=>{i({...n,openDialogType:r?Vh.mermaidToDrawnix:null})},children:O.jsx(JS,{className:"Dialog ttd-dialog",container:e,children:O.jsx(JQ,{})})}),O.jsx(QS,{open:n.openDialogType===Vh.markdownToDrawnix,onOpenChange:r=>{i({...n,openDialogType:r?Vh.markdownToDrawnix:null})},children:O.jsx(JS,{className:"Dialog ttd-dialog",container:e,children:O.jsx(tJ,{})})})]})},nJ=({container:e})=>{const{appState:n,setAppState:i}=Ps(),{t:r}=ti(),o=qi();return O.jsx(QS,{open:n.openCleanConfirm,onOpenChange:a=>{i({...n,openCleanConfirm:a})},children:O.jsxs(JS,{className:"clean-confirm",container:e,children:[O.jsx("h2",{className:"clean-confirm__title",children:r("cleanConfirm.title")}),O.jsx("p",{className:"clean-confirm__description",children:r("cleanConfirm.description")}),O.jsxs("div",{className:"clean-confirm__actions",children:[O.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{i({...n,openCleanConfirm:!1})},children:r("cleanConfirm.cancel")}),O.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{o.deleteFragment(o.children),i({...n,openCleanConfirm:!1})},children:r("cleanConfirm.ok")})]})]})})},H8=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isHovering},N8=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isEditing},iJ=e=>i=>{const{pointerMove:r}=i;let o=null,a=null;return i.pointerMove=l=>{(G.isPointer(i,nn.selection)||G.isPointer(i,nn.hand))&&!sf(i)&&!vu(i)&&!H8(i)&&!N8(i)&&_a(i,"with-text-link",()=>{const c=l.target.closest(".plait-board-link");if(c&&c!==o){const h=c.closest(".plait-text-container"),d=Kt.toSlateNode(void 0,h),p=Kt.toSlateNode(void 0,c);o=c,e({linkState:{targetDom:c,targetElement:p,editor:d,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(a)}else!c&&o&&(a=setTimeout(()=>{!H8(i)&&!N8(i)&&e({linkState:null})},300),o=null)}),r(l)},i},rJ=()=>{var b,B,A,I;const{t:e}=ti(),[n,i]=Y.useState(""),{appState:r,setAppState:o}=Ps(),a=qi(),{refs:l,floatingStyles:c}=mC({placement:"top",middleware:[$A(20),VA()]}),h=r.linkState,d=((b=r.linkState)==null?void 0:b.targetDom)||null,p=((B=r.linkState)==null?void 0:B.isEditing)||!1,m=((A=r.linkState)==null?void 0:A.isHoveringOrigin)||!1,w=((I=r.linkState)==null?void 0:I.isHovering)||!1,x=p||m||w,T=Y.useRef(r.linkState);Y.useEffect(()=>{T.current=r.linkState,r.linkState?i(r.linkState.targetElement.url):i("")},[r.linkState]),Y.useEffect(()=>{if(d){const R=d.getBoundingClientRect();l.setPositionReference({getBoundingClientRect(){return{x:R.x,y:R.y,width:R.width,height:R.height,top:R.y,left:R.x,right:R.x+R.width,bottom:R.y+R.height}}})}},[a.viewport,d]),Y.useEffect(()=>{const R=k=>{if(l.floating.current&&!l.floating.current.contains(k.target)){if(T.current){const W=Tl.getLinkElement(T.current.editor);W&&!W[0].url.trim()&&Tl.unwrapLink(T.current.editor)}o({...r,linkState:null})}};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]);const D=()=>{if(n!==h.targetElement.url){const k=h.editor,W=h.targetElement,U=Kt.findPath(k,W);jt.setNodes(k,{url:n},{at:U})}const R=Tl.getLinkElement(h.editor);o({...r,linkState:{...r.linkState,targetElement:R[0],isEditing:!1,isHoveringOrigin:!0}})};return x&&O.jsx(Jo,{ref:l.setFloating,style:c,padding:1,className:mn("link-popup"),onPointerEnter:()=>{w||o({...r,linkState:{...r.linkState,isHovering:!0}})},onPointerLeave:()=>{p||o({...r,linkState:{...r.linkState,isHovering:!1}})},children:O.jsx(Yr.Row,{gap:1,align:"center",children:p?O.jsxs(O.Fragment,{children:[O.jsx("input",{type:"text",value:n,onChange:R=>{i(R.target.value)},onKeyDown:R=>{R.key==="Enter"&&D()},className:"link-popup__input",autoFocus:!0}),O.jsx(jn,{type:"icon",visible:!0,icon:px,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const R=h.editor,k=h.targetElement,W=Kt.findPath(R,k);jt.unwrapNodes(R,{at:W}),o({...r,linkState:null})}})]}):O.jsxs(O.Fragment,{children:[O.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"link-popup__link",children:n}),O.jsx(jn,{className:"link-popup__edit",type:"icon",visible:!0,icon:zA,title:"Edit link","aria-label":"Edit link",onPointerDown:({event:R})=>{R.preventDefault(),o({...r,linkState:{...r.linkState,isEditing:!0}})}}),O.jsx(jn,{type:"icon",visible:!0,icon:px,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const R=h.editor,k=h.targetElement,W=Kt.findPath(R,k);jt.unwrapNodes(R,{at:W}),o({...r,linkState:null})}})]})})})},oJ=()=>{const{t:e}=ti();return O.jsx("div",{className:"drawnix-tutorial",children:O.jsx("div",{className:"tutorial-overlay",children:O.jsxs("div",{className:"tutorial-content",children:[O.jsx("h1",{className:"brand-title",children:e("tutorial.title")}),O.jsx("p",{className:"brand-description",children:e("tutorial.description")}),O.jsx("p",{className:"brand-tooltip",children:e("tutorial.dataDescription")}),O.jsxs("div",{className:"feature-pointer top-left",children:[O.jsxs("svg",{className:"pointer-arrow-svg",width:"130",height:"100",viewBox:"0 0 130 100",children:[O.jsx("defs",{children:O.jsx("marker",{id:"arrow-left",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:O.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),O.jsx("path",{d:"M 80,70 Q 35,60 15,15",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-left)"})]}),O.jsx("div",{className:"pointer-content",children:O.jsx("p",{children:e("tutorial.appToolbar")})})]}),O.jsxs("div",{className:"feature-pointer top-center",children:[O.jsxs("svg",{className:"pointer-arrow-svg",width:"100",height:"130",viewBox:"0 0 100 130",children:[O.jsx("defs",{children:O.jsx("marker",{id:"arrow-top",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:O.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),O.jsx("path",{d:"M 45,90 Q 20,50 45,10",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-top)"})]}),O.jsx("div",{className:"pointer-content",children:O.jsx("p",{children:e("tutorial.creationToolbar")})})]}),O.jsxs("div",{className:"feature-pointer bottom-right",children:[O.jsxs("svg",{className:"pointer-arrow-svg",width:"180",height:"100",viewBox:"0 0 180 100",children:[O.jsx("defs",{children:O.jsx("marker",{id:"arrow-right",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:O.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),O.jsx("path",{d:"M 20,25 Q 75,20 105,70",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-right)"})]}),O.jsx("div",{className:"pointer-content",children:O.jsx("p",{children:e("tutorial.themeDescription")})})]})]})})})},sJ=({value:e,viewport:n,theme:i,onChange:r,onSelectionChange:o,onViewportChange:a,onThemeChange:l,onValueChange:c,afterInit:h,tutorial:d=!1,onSave:p})=>{const m={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:_6},[w,x]=Y.useState(()=>{const I=new dq(window.navigator.userAgent);return{pointer:nn.hand,isMobile:I.mobile()!==null,isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[T,D]=Y.useState(null);T&&(T.appState=w);const b=I=>{x({...w,...I})},B=[S6,cP,mM,gq,EM,bQ(b,p),$Q,WQ(b),iJ(b)],A=Y.useRef(null);return O.jsx(Jq,{children:O.jsx(g9.Provider,{value:{appState:w,setAppState:x,onSave:p},children:O.jsxs("div",{className:mn("drawnix",{"drawnix--mobile":w.isMobile}),ref:A,children:[O.jsxs(dP,{value:e,viewport:n,theme:i,options:m,plugins:B,onChange:I=>{r&&r(I)},onSelectionChange:o,onViewportChange:a,onThemeChange:l,onValueChange:c,children:[O.jsx(sB,{afterInit:I=>{D(I),h&&h(I)},children:d&&T&&G.isPointer(T,nn.selection)&&O.jsx(oJ,{})}),O.jsx(AQ,{}),O.jsx(DQ,{}),O.jsx(KZ,{}),O.jsx(ZZ,{}),O.jsx(VQ,{}),O.jsx(yQ,{}),O.jsx(rJ,{}),O.jsx(XQ,{}),O.jsx(eJ,{container:A.current}),O.jsx(nJ,{container:A.current})]}),O.jsx("canvas",{className:`${H9} mouse-course-hidden`})]})})})};function cw(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P3={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var G8;function aJ(){return G8||(G8=1,function(e,n){(function(i){e.exports=i()})(function(){return function i(r,o,a){function l(d,p){if(!o[d]){if(!r[d]){var m=typeof cw=="function"&&cw;if(!p&&m)return m(d,!0);if(c)return c(d,!0);var w=new Error("Cannot find module '"+d+"'");throw w.code="MODULE_NOT_FOUND",w}var x=o[d]={exports:{}};r[d][0].call(x.exports,function(T){var D=r[d][1][T];return l(D||T)},x,x.exports,i,r,o,a)}return o[d].exports}for(var c=typeof cw=="function"&&cw,h=0;h<a.length;h++)l(a[h]);return l}({1:[function(i,r,o){(function(a){var l=a.MutationObserver||a.WebKitMutationObserver,c;if(l){var h=0,d=new l(T),p=a.document.createTextNode("");d.observe(p,{characterData:!0}),c=function(){p.data=h=++h%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var m=new a.MessageChannel;m.port1.onmessage=T,c=function(){m.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?c=function(){var b=a.document.createElement("script");b.onreadystatechange=function(){T(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:c=function(){setTimeout(T,0)};var w,x=[];function T(){w=!0;for(var b,B,A=x.length;A;){for(B=x,x=[],b=-1;++b<A;)B[b]();A=x.length}w=!1}r.exports=D;function D(b){x.push(b)===1&&!w&&c()}}).call(this,typeof Ws<"u"?Ws:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(i,r,o){var a=i(1);function l(){}var c={},h=["REJECTED"],d=["FULFILLED"],p=["PENDING"];r.exports=m;function m(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,k!==l&&D(this,k)}m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,W){if(typeof k!="function"&&this.state===d||typeof W!="function"&&this.state===h)return this;var U=new this.constructor(l);if(this.state!==p){var nt=this.state===d?k:W;x(U,nt,this.outcome)}else this.queue.push(new w(U,k,W));return U};function w(k,W,U){this.promise=k,typeof W=="function"&&(this.onFulfilled=W,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(k){c.resolve(this.promise,k)},w.prototype.otherCallFulfilled=function(k){x(this.promise,this.onFulfilled,k)},w.prototype.callRejected=function(k){c.reject(this.promise,k)},w.prototype.otherCallRejected=function(k){x(this.promise,this.onRejected,k)};function x(k,W,U){a(function(){var nt;try{nt=W(U)}catch(st){return c.reject(k,st)}nt===k?c.reject(k,new TypeError("Cannot resolve promise with itself")):c.resolve(k,nt)})}c.resolve=function(k,W){var U=b(T,W);if(U.status==="error")return c.reject(k,U.value);var nt=U.value;if(nt)D(k,nt);else{k.state=d,k.outcome=W;for(var st=-1,ft=k.queue.length;++st<ft;)k.queue[st].callFulfilled(W)}return k},c.reject=function(k,W){k.state=h,k.outcome=W;for(var U=-1,nt=k.queue.length;++U<nt;)k.queue[U].callRejected(W);return k};function T(k){var W=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof W=="function")return function(){W.apply(k,arguments)}}function D(k,W){var U=!1;function nt(ct){U||(U=!0,c.reject(k,ct))}function st(ct){U||(U=!0,c.resolve(k,ct))}function ft(){W(st,nt)}var Et=b(ft);Et.status==="error"&&nt(Et.value)}function b(k,W){var U={};try{U.value=k(W),U.status="success"}catch(nt){U.status="error",U.value=nt}return U}m.resolve=B;function B(k){return k instanceof this?k:c.resolve(new this(l),k)}m.reject=A;function A(k){var W=new this(l);return c.reject(W,k)}m.all=I;function I(k){var W=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=k.length,nt=!1;if(!U)return this.resolve([]);for(var st=new Array(U),ft=0,Et=-1,ct=new this(l);++Et<U;)mt(k[Et],Et);return ct;function mt(wt,V){W.resolve(wt).then(P,function(_){nt||(nt=!0,c.reject(ct,_))});function P(_){st[V]=_,++ft===U&&!nt&&(nt=!0,c.resolve(ct,st))}}}m.race=R;function R(k){var W=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=k.length,nt=!1;if(!U)return this.resolve([]);for(var st=-1,ft=new this(l);++st<U;)Et(k[st]);return ft;function Et(ct){W.resolve(ct).then(function(mt){nt||(nt=!0,c.resolve(ft,mt))},function(mt){nt||(nt=!0,c.reject(ft,mt))})}}},{1:1}],3:[function(i,r,o){(function(a){typeof a.Promise!="function"&&(a.Promise=i(2))}).call(this,typeof Ws<"u"?Ws:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(i,r,o){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function l(K,lt){if(!(K instanceof lt))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var h=c();function d(){try{if(!h||!h.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),lt=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||lt)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function p(K,lt){K=K||[],lt=lt||{};try{return new Blob(K,lt)}catch(pt){if(pt.name!=="TypeError")throw pt;for(var et=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,vt=new et,St=0;St<K.length;St+=1)vt.append(K[St]);return vt.getBlob(lt.type)}}typeof Promise>"u"&&i(3);var m=Promise;function w(K,lt){lt&&K.then(function(et){lt(null,et)},function(et){lt(et)})}function x(K,lt,et){typeof lt=="function"&&K.then(lt),typeof et=="function"&&K.catch(et)}function T(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function D(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var b="local-forage-detect-blob-support",B=void 0,A={},I=Object.prototype.toString,R="readonly",k="readwrite";function W(K){for(var lt=K.length,et=new ArrayBuffer(lt),vt=new Uint8Array(et),St=0;St<lt;St++)vt[St]=K.charCodeAt(St);return et}function U(K){return new m(function(lt){var et=K.transaction(b,k),vt=p([""]);et.objectStore(b).put(vt,"key"),et.onabort=function(St){St.preventDefault(),St.stopPropagation(),lt(!1)},et.oncomplete=function(){var St=navigator.userAgent.match(/Chrome\/(\d+)/),pt=navigator.userAgent.match(/Edge\//);lt(pt||!St||parseInt(St[1],10)>=43)}}).catch(function(){return!1})}function nt(K){return typeof B=="boolean"?m.resolve(B):U(K).then(function(lt){return B=lt,B})}function st(K){var lt=A[K.name],et={};et.promise=new m(function(vt,St){et.resolve=vt,et.reject=St}),lt.deferredOperations.push(et),lt.dbReady?lt.dbReady=lt.dbReady.then(function(){return et.promise}):lt.dbReady=et.promise}function ft(K){var lt=A[K.name],et=lt.deferredOperations.pop();if(et)return et.resolve(),et.promise}function Et(K,lt){var et=A[K.name],vt=et.deferredOperations.pop();if(vt)return vt.reject(lt),vt.promise}function ct(K,lt){return new m(function(et,vt){if(A[K.name]=A[K.name]||J(),K.db)if(lt)st(K),K.db.close();else return et(K.db);var St=[K.name];lt&&St.push(K.version);var pt=h.open.apply(h,St);lt&&(pt.onupgradeneeded=function(Ht){var Xt=pt.result;try{Xt.createObjectStore(K.storeName),Ht.oldVersion<=1&&Xt.createObjectStore(b)}catch(Zt){if(Zt.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+Ht.oldVersion+" to version "+Ht.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw Zt}}),pt.onerror=function(Ht){Ht.preventDefault(),vt(pt.error)},pt.onsuccess=function(){var Ht=pt.result;Ht.onversionchange=function(Xt){Xt.target.close()},et(Ht),ft(K)}})}function mt(K){return ct(K,!1)}function wt(K){return ct(K,!0)}function V(K,lt){if(!K.db)return!0;var et=!K.db.objectStoreNames.contains(K.storeName),vt=K.version<K.db.version,St=K.version>K.db.version;if(vt&&(K.version!==lt&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),St||et){if(et){var pt=K.db.version+1;pt>K.version&&(K.version=pt)}return!0}return!1}function P(K){return new m(function(lt,et){var vt=new FileReader;vt.onerror=et,vt.onloadend=function(St){var pt=btoa(St.target.result||"");lt({__local_forage_encoded_blob:!0,data:pt,type:K.type})},vt.readAsBinaryString(K)})}function _(K){var lt=W(atob(K.data));return p([lt],{type:K.type})}function N(K){return K&&K.__local_forage_encoded_blob}function $(K){var lt=this,et=lt._initReady().then(function(){var vt=A[lt._dbInfo.name];if(vt&&vt.dbReady)return vt.dbReady});return x(et,K,K),et}function Q(K){st(K);for(var lt=A[K.name],et=lt.forages,vt=0;vt<et.length;vt++){var St=et[vt];St._dbInfo.db&&(St._dbInfo.db.close(),St._dbInfo.db=null)}return K.db=null,mt(K).then(function(pt){return K.db=pt,V(K)?wt(K):pt}).then(function(pt){K.db=lt.db=pt;for(var Ht=0;Ht<et.length;Ht++)et[Ht]._dbInfo.db=pt}).catch(function(pt){throw Et(K,pt),pt})}function F(K,lt,et,vt){vt===void 0&&(vt=1);try{var St=K.db.transaction(K.storeName,lt);et(null,St)}catch(pt){if(vt>0&&(!K.db||pt.name==="InvalidStateError"||pt.name==="NotFoundError"))return m.resolve().then(function(){if(!K.db||pt.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),wt(K)}).then(function(){return Q(K).then(function(){F(K,lt,et,vt-1)})}).catch(et);et(pt)}}function J(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function tt(K){var lt=this,et={db:null};if(K)for(var vt in K)et[vt]=K[vt];var St=A[et.name];St||(St=J(),A[et.name]=St),St.forages.push(lt),lt._initReady||(lt._initReady=lt.ready,lt.ready=$);var pt=[];function Ht(){return m.resolve()}for(var Xt=0;Xt<St.forages.length;Xt++){var Zt=St.forages[Xt];Zt!==lt&&pt.push(Zt._initReady().catch(Ht))}var qt=St.forages.slice(0);return m.all(pt).then(function(){return et.db=St.db,mt(et)}).then(function(Jt){return et.db=Jt,V(et,lt._defaultConfig.version)?wt(et):Jt}).then(function(Jt){et.db=St.db=Jt,lt._dbInfo=et;for(var ue=0;ue<qt.length;ue++){var Ue=qt[ue];Ue!==lt&&(Ue._dbInfo.db=et.db,Ue._dbInfo.version=et.version)}})}function it(K,lt){var et=this;K=T(K);var vt=new m(function(St,pt){et.ready().then(function(){F(et._dbInfo,R,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=Zt.get(K);qt.onsuccess=function(){var Jt=qt.result;Jt===void 0&&(Jt=null),N(Jt)&&(Jt=_(Jt)),St(Jt)},qt.onerror=function(){pt(qt.error)}}catch(Jt){pt(Jt)}})}).catch(pt)});return w(vt,lt),vt}function xt(K,lt){var et=this,vt=new m(function(St,pt){et.ready().then(function(){F(et._dbInfo,R,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=Zt.openCursor(),Jt=1;qt.onsuccess=function(){var ue=qt.result;if(ue){var Ue=ue.value;N(Ue)&&(Ue=_(Ue));var tn=K(Ue,ue.key,Jt++);tn!==void 0?St(tn):ue.continue()}else St()},qt.onerror=function(){pt(qt.error)}}catch(ue){pt(ue)}})}).catch(pt)});return w(vt,lt),vt}function gt(K,lt,et){var vt=this;K=T(K);var St=new m(function(pt,Ht){var Xt;vt.ready().then(function(){return Xt=vt._dbInfo,I.call(lt)==="[object Blob]"?nt(Xt.db).then(function(Zt){return Zt?lt:P(lt)}):lt}).then(function(Zt){F(vt._dbInfo,k,function(qt,Jt){if(qt)return Ht(qt);try{var ue=Jt.objectStore(vt._dbInfo.storeName);Zt===null&&(Zt=void 0);var Ue=ue.put(Zt,K);Jt.oncomplete=function(){Zt===void 0&&(Zt=null),pt(Zt)},Jt.onabort=Jt.onerror=function(){var tn=Ue.error?Ue.error:Ue.transaction.error;Ht(tn)}}catch(tn){Ht(tn)}})}).catch(Ht)});return w(St,et),St}function Lt(K,lt){var et=this;K=T(K);var vt=new m(function(St,pt){et.ready().then(function(){F(et._dbInfo,k,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=Zt.delete(K);Xt.oncomplete=function(){St()},Xt.onerror=function(){pt(qt.error)},Xt.onabort=function(){var Jt=qt.error?qt.error:qt.transaction.error;pt(Jt)}}catch(Jt){pt(Jt)}})}).catch(pt)});return w(vt,lt),vt}function $t(K){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){F(lt._dbInfo,k,function(pt,Ht){if(pt)return St(pt);try{var Xt=Ht.objectStore(lt._dbInfo.storeName),Zt=Xt.clear();Ht.oncomplete=function(){vt()},Ht.onabort=Ht.onerror=function(){var qt=Zt.error?Zt.error:Zt.transaction.error;St(qt)}}catch(qt){St(qt)}})}).catch(St)});return w(et,K),et}function ot(K){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){F(lt._dbInfo,R,function(pt,Ht){if(pt)return St(pt);try{var Xt=Ht.objectStore(lt._dbInfo.storeName),Zt=Xt.count();Zt.onsuccess=function(){vt(Zt.result)},Zt.onerror=function(){St(Zt.error)}}catch(qt){St(qt)}})}).catch(St)});return w(et,K),et}function Pt(K,lt){var et=this,vt=new m(function(St,pt){if(K<0){St(null);return}et.ready().then(function(){F(et._dbInfo,R,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=!1,Jt=Zt.openKeyCursor();Jt.onsuccess=function(){var ue=Jt.result;if(!ue){St(null);return}K===0||qt?St(ue.key):(qt=!0,ue.advance(K))},Jt.onerror=function(){pt(Jt.error)}}catch(ue){pt(ue)}})}).catch(pt)});return w(vt,lt),vt}function Rt(K){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){F(lt._dbInfo,R,function(pt,Ht){if(pt)return St(pt);try{var Xt=Ht.objectStore(lt._dbInfo.storeName),Zt=Xt.openKeyCursor(),qt=[];Zt.onsuccess=function(){var Jt=Zt.result;if(!Jt){vt(qt);return}qt.push(Jt.key),Jt.continue()},Zt.onerror=function(){St(Zt.error)}}catch(Jt){St(Jt)}})}).catch(St)});return w(et,K),et}function It(K,lt){lt=D.apply(this,arguments);var et=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||et.name,K.storeName=K.storeName||et.storeName);var vt=this,St;if(!K.name)St=m.reject("Invalid arguments");else{var pt=K.name===et.name&&vt._dbInfo.db,Ht=pt?m.resolve(vt._dbInfo.db):mt(K).then(function(Xt){var Zt=A[K.name],qt=Zt.forages;Zt.db=Xt;for(var Jt=0;Jt<qt.length;Jt++)qt[Jt]._dbInfo.db=Xt;return Xt});K.storeName?St=Ht.then(function(Xt){if(Xt.objectStoreNames.contains(K.storeName)){var Zt=Xt.version+1;st(K);var qt=A[K.name],Jt=qt.forages;Xt.close();for(var ue=0;ue<Jt.length;ue++){var Ue=Jt[ue];Ue._dbInfo.db=null,Ue._dbInfo.version=Zt}var tn=new m(function(vn,Zn){var wn=h.open(K.name,Zt);wn.onerror=function(vr){var na=wn.result;na.close(),Zn(vr)},wn.onupgradeneeded=function(){var vr=wn.result;vr.deleteObjectStore(K.storeName)},wn.onsuccess=function(){var vr=wn.result;vr.close(),vn(vr)}});return tn.then(function(vn){qt.db=vn;for(var Zn=0;Zn<Jt.length;Zn++){var wn=Jt[Zn];wn._dbInfo.db=vn,ft(wn._dbInfo)}}).catch(function(vn){throw(Et(K,vn)||m.resolve()).catch(function(){}),vn})}}):St=Ht.then(function(Xt){st(K);var Zt=A[K.name],qt=Zt.forages;Xt.close();for(var Jt=0;Jt<qt.length;Jt++){var ue=qt[Jt];ue._dbInfo.db=null}var Ue=new m(function(tn,vn){var Zn=h.deleteDatabase(K.name);Zn.onerror=function(){var wn=Zn.result;wn&&wn.close(),vn(Zn.error)},Zn.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},Zn.onsuccess=function(){var wn=Zn.result;wn&&wn.close(),tn(wn)}});return Ue.then(function(tn){Zt.db=tn;for(var vn=0;vn<qt.length;vn++){var Zn=qt[vn];ft(Zn._dbInfo)}}).catch(function(tn){throw(Et(K,tn)||m.resolve()).catch(function(){}),tn})})}return w(St,lt),St}var he={_driver:"asyncStorage",_initStorage:tt,_support:d(),iterate:xt,getItem:it,setItem:gt,removeItem:Lt,clear:$t,length:ot,key:Pt,keys:Rt,dropInstance:It};function Nt(){return typeof openDatabase=="function"}var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae="~~local_forage_type~",ee=/^~~local_forage_type~([^~]+)~/,xe="__lfsc__:",le=xe.length,Re="arbf",me="blob",Qe="si08",ei="ui08",Fn="uic8",Kn="si16",Br="si32",ji="ur16",An="ui32",Wn="fl32",Zr="fl64",Js=le+Re.length,ta=Object.prototype.toString;function Qr(K){var lt=K.length*.75,et=K.length,vt,St=0,pt,Ht,Xt,Zt;K[K.length-1]==="="&&(lt--,K[K.length-2]==="="&&lt--);var qt=new ArrayBuffer(lt),Jt=new Uint8Array(qt);for(vt=0;vt<et;vt+=4)pt=ge.indexOf(K[vt]),Ht=ge.indexOf(K[vt+1]),Xt=ge.indexOf(K[vt+2]),Zt=ge.indexOf(K[vt+3]),Jt[St++]=pt<<2|Ht>>4,Jt[St++]=(Ht&15)<<4|Xt>>2,Jt[St++]=(Xt&3)<<6|Zt&63;return qt}function di(K){var lt=new Uint8Array(K),et="",vt;for(vt=0;vt<lt.length;vt+=3)et+=ge[lt[vt]>>2],et+=ge[(lt[vt]&3)<<4|lt[vt+1]>>4],et+=ge[(lt[vt+1]&15)<<2|lt[vt+2]>>6],et+=ge[lt[vt+2]&63];return lt.length%3===2?et=et.substring(0,et.length-1)+"=":lt.length%3===1&&(et=et.substring(0,et.length-2)+"=="),et}function Pr(K,lt){var et="";if(K&&(et=ta.call(K)),K&&(et==="[object ArrayBuffer]"||K.buffer&&ta.call(K.buffer)==="[object ArrayBuffer]")){var vt,St=xe;K instanceof ArrayBuffer?(vt=K,St+=Re):(vt=K.buffer,et==="[object Int8Array]"?St+=Qe:et==="[object Uint8Array]"?St+=ei:et==="[object Uint8ClampedArray]"?St+=Fn:et==="[object Int16Array]"?St+=Kn:et==="[object Uint16Array]"?St+=ji:et==="[object Int32Array]"?St+=Br:et==="[object Uint32Array]"?St+=An:et==="[object Float32Array]"?St+=Wn:et==="[object Float64Array]"?St+=Zr:lt(new Error("Failed to get type for BinaryArray"))),lt(St+di(vt))}else if(et==="[object Blob]"){var pt=new FileReader;pt.onload=function(){var Ht=ae+K.type+"~"+di(this.result);lt(xe+me+Ht)},pt.readAsArrayBuffer(K)}else try{lt(JSON.stringify(K))}catch(Ht){console.error("Couldn't convert value into a JSON string: ",K),lt(null,Ht)}}function Ei(K){if(K.substring(0,le)!==xe)return JSON.parse(K);var lt=K.substring(Js),et=K.substring(le,Js),vt;if(et===me&&ee.test(lt)){var St=lt.match(ee);vt=St[1],lt=lt.substring(St[0].length)}var pt=Qr(lt);switch(et){case Re:return pt;case me:return p([pt],{type:vt});case Qe:return new Int8Array(pt);case ei:return new Uint8Array(pt);case Fn:return new Uint8ClampedArray(pt);case Kn:return new Int16Array(pt);case ji:return new Uint16Array(pt);case Br:return new Int32Array(pt);case An:return new Uint32Array(pt);case Wn:return new Float32Array(pt);case Zr:return new Float64Array(pt);default:throw new Error("Unkown type: "+et)}}var Ms={serialize:Pr,deserialize:Ei,stringToBuffer:Qr,bufferToString:di};function wd(K,lt,et,vt){K.executeSql("CREATE TABLE IF NOT EXISTS "+lt.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],et,vt)}function e1(K){var lt=this,et={db:null};if(K)for(var vt in K)et[vt]=typeof K[vt]!="string"?K[vt].toString():K[vt];var St=new m(function(pt,Ht){try{et.db=openDatabase(et.name,String(et.version),et.description,et.size)}catch(Xt){return Ht(Xt)}et.db.transaction(function(Xt){wd(Xt,et,function(){lt._dbInfo=et,pt()},function(Zt,qt){Ht(qt)})},Ht)});return et.serializer=Ms,St}function Jr(K,lt,et,vt,St,pt){K.executeSql(et,vt,St,function(Ht,Xt){Xt.code===Xt.SYNTAX_ERR?Ht.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[lt.storeName],function(Zt,qt){qt.rows.length?pt(Zt,Xt):wd(Zt,lt,function(){Zt.executeSql(et,vt,St,pt)},pt)},pt):pt(Ht,Xt)},pt)}function kl(K,lt){var et=this;K=T(K);var vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"SELECT * FROM "+Ht.storeName+" WHERE key = ? LIMIT 1",[K],function(Zt,qt){var Jt=qt.rows.length?qt.rows.item(0).value:null;Jt&&(Jt=Ht.serializer.deserialize(Jt)),St(Jt)},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function Il(K,lt){var et=this,vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"SELECT * FROM "+Ht.storeName,[],function(Zt,qt){for(var Jt=qt.rows,ue=Jt.length,Ue=0;Ue<ue;Ue++){var tn=Jt.item(Ue),vn=tn.value;if(vn&&(vn=Ht.serializer.deserialize(vn)),vn=K(vn,tn.key,Ue+1),vn!==void 0){St(vn);return}}St()},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function Rs(K,lt,et,vt){var St=this;K=T(K);var pt=new m(function(Ht,Xt){St.ready().then(function(){lt===void 0&&(lt=null);var Zt=lt,qt=St._dbInfo;qt.serializer.serialize(lt,function(Jt,ue){ue?Xt(ue):qt.db.transaction(function(Ue){Jr(Ue,qt,"INSERT OR REPLACE INTO "+qt.storeName+" (key, value) VALUES (?, ?)",[K,Jt],function(){Ht(Zt)},function(tn,vn){Xt(vn)})},function(Ue){if(Ue.code===Ue.QUOTA_ERR){if(vt>0){Ht(Rs.apply(St,[K,Zt,et,vt-1]));return}Xt(Ue)}})})}).catch(Xt)});return w(pt,et),pt}function _u(K,lt,et){return Rs.apply(this,[K,lt,et,1])}function Hl(K,lt){var et=this;K=T(K);var vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"DELETE FROM "+Ht.storeName+" WHERE key = ?",[K],function(){St()},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function n1(K){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){var pt=lt._dbInfo;pt.db.transaction(function(Ht){Jr(Ht,pt,"DELETE FROM "+pt.storeName,[],function(){vt()},function(Xt,Zt){St(Zt)})})}).catch(St)});return w(et,K),et}function Cf(K){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){var pt=lt._dbInfo;pt.db.transaction(function(Ht){Jr(Ht,pt,"SELECT COUNT(key) as c FROM "+pt.storeName,[],function(Xt,Zt){var qt=Zt.rows.item(0).c;vt(qt)},function(Xt,Zt){St(Zt)})})}).catch(St)});return w(et,K),et}function Ef(K,lt){var et=this,vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"SELECT key FROM "+Ht.storeName+" WHERE id = ? LIMIT 1",[K+1],function(Zt,qt){var Jt=qt.rows.length?qt.rows.item(0).key:null;St(Jt)},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function Nl(K){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){var pt=lt._dbInfo;pt.db.transaction(function(Ht){Jr(Ht,pt,"SELECT key FROM "+pt.storeName,[],function(Xt,Zt){for(var qt=[],Jt=0;Jt<Zt.rows.length;Jt++)qt.push(Zt.rows.item(Jt).key);vt(qt)},function(Xt,Zt){St(Zt)})})}).catch(St)});return w(et,K),et}function i1(K){return new m(function(lt,et){K.transaction(function(vt){vt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(St,pt){for(var Ht=[],Xt=0;Xt<pt.rows.length;Xt++)Ht.push(pt.rows.item(Xt).name);lt({db:K,storeNames:Ht})},function(St,pt){et(pt)})},function(vt){et(vt)})})}function Fu(K,lt){lt=D.apply(this,arguments);var et=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||et.name,K.storeName=K.storeName||et.storeName);var vt=this,St;return K.name?St=new m(function(pt){var Ht;K.name===et.name?Ht=vt._dbInfo.db:Ht=openDatabase(K.name,"","",0),K.storeName?pt({db:Ht,storeNames:[K.storeName]}):pt(i1(Ht))}).then(function(pt){return new m(function(Ht,Xt){pt.db.transaction(function(Zt){function qt(tn){return new m(function(vn,Zn){Zt.executeSql("DROP TABLE IF EXISTS "+tn,[],function(){vn()},function(wn,vr){Zn(vr)})})}for(var Jt=[],ue=0,Ue=pt.storeNames.length;ue<Ue;ue++)Jt.push(qt(pt.storeNames[ue]));m.all(Jt).then(function(){Ht()}).catch(function(tn){Xt(tn)})},function(Zt){Xt(Zt)})})}):St=m.reject("Invalid arguments"),w(St,lt),St}var xd={_driver:"webSQLStorage",_initStorage:e1,_support:Nt(),iterate:Il,getItem:kl,setItem:_u,removeItem:Hl,clear:n1,length:Cf,key:Ef,keys:Nl,dropInstance:Fu};function ku(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Iu(K,lt){var et=K.name+"/";return K.storeName!==lt.storeName&&(et+=K.storeName+"/"),et}function Sf(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function Cd(){return!Sf()||localStorage.length>0}function Ed(K){var lt=this,et={};if(K)for(var vt in K)et[vt]=K[vt];return et.keyPrefix=Iu(K,lt._defaultConfig),Cd()?(lt._dbInfo=et,et.serializer=Ms,m.resolve()):m.reject()}function Os(K){var lt=this,et=lt.ready().then(function(){for(var vt=lt._dbInfo.keyPrefix,St=localStorage.length-1;St>=0;St--){var pt=localStorage.key(St);pt.indexOf(vt)===0&&localStorage.removeItem(pt)}});return w(et,K),et}function ki(K,lt){var et=this;K=T(K);var vt=et.ready().then(function(){var St=et._dbInfo,pt=localStorage.getItem(St.keyPrefix+K);return pt&&(pt=St.serializer.deserialize(pt)),pt});return w(vt,lt),vt}function or(K,lt){var et=this,vt=et.ready().then(function(){for(var St=et._dbInfo,pt=St.keyPrefix,Ht=pt.length,Xt=localStorage.length,Zt=1,qt=0;qt<Xt;qt++){var Jt=localStorage.key(qt);if(Jt.indexOf(pt)===0){var ue=localStorage.getItem(Jt);if(ue&&(ue=St.serializer.deserialize(ue)),ue=K(ue,Jt.substring(Ht),Zt++),ue!==void 0)return ue}}});return w(vt,lt),vt}function Ha(K,lt){var et=this,vt=et.ready().then(function(){var St=et._dbInfo,pt;try{pt=localStorage.key(K)}catch{pt=null}return pt&&(pt=pt.substring(St.keyPrefix.length)),pt});return w(vt,lt),vt}function Hu(K){var lt=this,et=lt.ready().then(function(){for(var vt=lt._dbInfo,St=localStorage.length,pt=[],Ht=0;Ht<St;Ht++){var Xt=localStorage.key(Ht);Xt.indexOf(vt.keyPrefix)===0&&pt.push(Xt.substring(vt.keyPrefix.length))}return pt});return w(et,K),et}function r1(K){var lt=this,et=lt.keys().then(function(vt){return vt.length});return w(et,K),et}function o1(K,lt){var et=this;K=T(K);var vt=et.ready().then(function(){var St=et._dbInfo;localStorage.removeItem(St.keyPrefix+K)});return w(vt,lt),vt}function Sd(K,lt,et){var vt=this;K=T(K);var St=vt.ready().then(function(){lt===void 0&&(lt=null);var pt=lt;return new m(function(Ht,Xt){var Zt=vt._dbInfo;Zt.serializer.serialize(lt,function(qt,Jt){if(Jt)Xt(Jt);else try{localStorage.setItem(Zt.keyPrefix+K,qt),Ht(pt)}catch(ue){(ue.name==="QuotaExceededError"||ue.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Xt(ue),Xt(ue)}})})});return w(St,et),St}function Gl(K,lt){if(lt=D.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var et=this.config();K.name=K.name||et.name,K.storeName=K.storeName||et.storeName}var vt=this,St;return K.name?St=new m(function(pt){K.storeName?pt(Iu(K,vt._defaultConfig)):pt(K.name+"/")}).then(function(pt){for(var Ht=localStorage.length-1;Ht>=0;Ht--){var Xt=localStorage.key(Ht);Xt.indexOf(pt)===0&&localStorage.removeItem(Xt)}}):St=m.reject("Invalid arguments"),w(St,lt),St}var Tf={_driver:"localStorageWrapper",_initStorage:Ed,_support:ku(),iterate:or,getItem:ki,setItem:Sd,removeItem:o1,clear:Os,length:r1,key:Ha,keys:Hu,dropInstance:Gl},Na=function(lt,et){return lt===et||typeof lt=="number"&&typeof et=="number"&&isNaN(lt)&&isNaN(et)},ts=function(lt,et){for(var vt=lt.length,St=0;St<vt;){if(Na(lt[St],et))return!0;St++}return!1},Ga=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},mr={},Si={},ea={INDEXEDDB:he,WEBSQL:xd,LOCALSTORAGE:Tf},Td=[ea.INDEXEDDB._driver,ea.WEBSQL._driver,ea.LOCALSTORAGE._driver],to=["dropInstance"],es=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(to),Ad={description:"",driver:Td.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Dd(K,lt){K[lt]=function(){var et=arguments;return K.ready().then(function(){return K[lt].apply(K,et)})}}function Nu(){for(var K=1;K<arguments.length;K++){var lt=arguments[K];if(lt)for(var et in lt)lt.hasOwnProperty(et)&&(Ga(lt[et])?arguments[0][et]=lt[et].slice():arguments[0][et]=lt[et])}return arguments[0]}var s1=function(){function K(lt){l(this,K);for(var et in ea)if(ea.hasOwnProperty(et)){var vt=ea[et],St=vt._driver;this[et]=St,mr[St]||this.defineDriver(vt)}this._defaultConfig=Nu({},Ad),this._config=Nu({},this._defaultConfig,lt),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(et){if((typeof et>"u"?"undefined":a(et))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var vt in et){if(vt==="storeName"&&(et[vt]=et[vt].replace(/\W/g,"_")),vt==="version"&&typeof et[vt]!="number")return new Error("Database version must be a number.");this._config[vt]=et[vt]}return"driver"in et&&et.driver?this.setDriver(this._config.driver):!0}else return typeof et=="string"?this._config[et]:this._config},K.prototype.defineDriver=function(et,vt,St){var pt=new m(function(Ht,Xt){try{var Zt=et._driver,qt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!et._driver){Xt(qt);return}for(var Jt=es.concat("_initStorage"),ue=0,Ue=Jt.length;ue<Ue;ue++){var tn=Jt[ue],vn=!ts(to,tn);if((vn||et[tn])&&typeof et[tn]!="function"){Xt(qt);return}}var Zn=function(){for(var na=function(zl){return function(){var ns=new Error("Method "+zl+" is not implemented by the current driver"),$u=m.reject(ns);return w($u,arguments[arguments.length-1]),$u}},zu=0,ju=to.length;zu<ju;zu++){var Uu=to[zu];et[Uu]||(et[Uu]=na(Uu))}};Zn();var wn=function(na){mr[Zt]&&console.info("Redefining LocalForage driver: "+Zt),mr[Zt]=et,Si[Zt]=na,Ht()};"_support"in et?et._support&&typeof et._support=="function"?et._support().then(wn,Xt):wn(!!et._support):wn(!0)}catch(vr){Xt(vr)}});return x(pt,vt,St),pt},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(et,vt,St){var pt=mr[et]?m.resolve(mr[et]):m.reject(new Error("Driver not found."));return x(pt,vt,St),pt},K.prototype.getSerializer=function(et){var vt=m.resolve(Ms);return x(vt,et),vt},K.prototype.ready=function(et){var vt=this,St=vt._driverSet.then(function(){return vt._ready===null&&(vt._ready=vt._initDriver()),vt._ready});return x(St,et,et),St},K.prototype.setDriver=function(et,vt,St){var pt=this;Ga(et)||(et=[et]);var Ht=this._getSupportedDrivers(et);function Xt(){pt._config.driver=pt.driver()}function Zt(ue){return pt._extend(ue),Xt(),pt._ready=pt._initStorage(pt._config),pt._ready}function qt(ue){return function(){var Ue=0;function tn(){for(;Ue<ue.length;){var vn=ue[Ue];return Ue++,pt._dbInfo=null,pt._ready=null,pt.getDriver(vn).then(Zt).catch(tn)}Xt();var Zn=new Error("No available storage method found.");return pt._driverSet=m.reject(Zn),pt._driverSet}return tn()}}var Jt=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=Jt.then(function(){var ue=Ht[0];return pt._dbInfo=null,pt._ready=null,pt.getDriver(ue).then(function(Ue){pt._driver=Ue._driver,Xt(),pt._wrapLibraryMethodsWithReady(),pt._initDriver=qt(Ht)})}).catch(function(){Xt();var ue=new Error("No available storage method found.");return pt._driverSet=m.reject(ue),pt._driverSet}),x(this._driverSet,vt,St),this._driverSet},K.prototype.supports=function(et){return!!Si[et]},K.prototype._extend=function(et){Nu(this,et)},K.prototype._getSupportedDrivers=function(et){for(var vt=[],St=0,pt=et.length;St<pt;St++){var Ht=et[St];this.supports(Ht)&&vt.push(Ht)}return vt},K.prototype._wrapLibraryMethodsWithReady=function(){for(var et=0,vt=es.length;et<vt;et++)Dd(this,es[et])},K.prototype.createInstance=function(et){return new K(et)},K}(),Gu=new s1;r.exports=Gu},{3:3}]},{},[4])(4)})}(P3)),P3.exports}var lJ=aJ();const M3=hf(lJ);M3.config({name:"Drawnix",storeName:"drawnix_store",driver:[M3.INDEXEDDB,M3.LOCALSTORAGE]});function X9({initialValue:e,onChange:n,onSave:i}){const[r,o]=Y.useState({children:[]}),a=Y.useRef(r),[l,c]=Y.useState(!1);return Y.useEffect(()=>{if(e){o(e),a.current=e,e.children&&e.children.length===0&&c(!0);return}},[e]),O.jsx(sJ,{value:r.children,viewport:r.viewport,theme:r.theme,onChange:h=>{const d=h;o(d),a.current=d,d.children&&d.children.length>0&&c(!1),n&&n(d)},onSave:()=>{i&&i(a.current)},tutorial:l,afterInit:h=>{window.drawnixApi={exportImage:async d=>{if(d==="svg"){const p=await YZ(h);return p?`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(p)))}`:""}else return await SM(h,{fillStyle:"white"})}}}})}window.initDrawnix=(e,n,i,r)=>{const o=lv.createRoot(e);return o.render(O.jsx(Y.StrictMode,{children:O.jsx(X9,{initialValue:n,onChange:i,onSave:r})})),o};const R3=document.getElementById("root");R3&&!R3.hasAttribute("data-no-auto-init")&&lv.createRoot(R3).render(O.jsx(Y.StrictMode,{children:O.jsx(X9,{})}));export{ur as A,we as B,Um as D,ye as F,ie as M,te as N,So as P,H as R,Co as S,j9 as _,vA as a,gd as b,JL as c,pA as d,xg as e,Kj as f,hf as g,SP as h,qn as i,Me as j,Mn as k,rC as l,Xx as m,Ws as n,cw as o};
