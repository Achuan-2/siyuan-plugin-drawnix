const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index3.js","assets/index.dom.js"])))=>i.map(i=>d[i]);
function $9(e,n){for(var r=0;r<n.length;r++){const i=n[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(i,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var Ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R2={exports:{}},cp={},k2={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OP;function W9(){if(OP)return an;OP=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function D(I,Q,ee){this.props=I,this.context=Q,this.refs=S,this.updater=ee||w}D.prototype.isReactComponent={},D.prototype.setState=function(I,Q){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Q,"setState")},D.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function A(){}A.prototype=D.prototype;function P(I,Q,ee){this.props=I,this.context=Q,this.refs=S,this.updater=ee||w}var b=P.prototype=new A;b.constructor=P,E(b,D.prototype),b.isPureReactComponent=!0;var R=Array.isArray,L=Object.prototype.hasOwnProperty,V={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function ne(I,Q,ee){var se,Ee={},ve=null,be=null;if(Q!=null)for(se in Q.ref!==void 0&&(be=Q.ref),Q.key!==void 0&&(ve=""+Q.key),Q)L.call(Q,se)&&!Z.hasOwnProperty(se)&&(Ee[se]=Q[se]);var Oe=arguments.length-2;if(Oe===1)Ee.children=ee;else if(1<Oe){for(var ie=Array(Oe),De=0;De<Oe;De++)ie[De]=arguments[De+2];Ee.children=ie}if(I&&I.defaultProps)for(se in Oe=I.defaultProps,Oe)Ee[se]===void 0&&(Ee[se]=Oe[se]);return{$$typeof:e,type:I,key:ve,ref:be,props:Ee,_owner:V.current}}function le(I,Q){return{$$typeof:e,type:I.type,key:Q,ref:I.ref,props:I.props,_owner:I._owner}}function de(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function Pe(I){var Q={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ee){return Q[ee]})}var ue=/\/+/g;function he(I,Q){return typeof I=="object"&&I!==null&&I.key!=null?Pe(""+I.key):Q.toString(36)}function ye(I,Q,ee,se,Ee){var ve=typeof I;(ve==="undefined"||ve==="boolean")&&(I=null);var be=!1;if(I===null)be=!0;else switch(ve){case"string":case"number":be=!0;break;case"object":switch(I.$$typeof){case e:case n:be=!0}}if(be)return be=I,Ee=Ee(be),I=se===""?"."+he(be,0):se,R(Ee)?(ee="",I!=null&&(ee=I.replace(ue,"$&/")+"/"),ye(Ee,Q,ee,"",function(De){return De})):Ee!=null&&(de(Ee)&&(Ee=le(Ee,ee+(!Ee.key||be&&be.key===Ee.key?"":(""+Ee.key).replace(ue,"$&/")+"/")+I)),Q.push(Ee)),1;if(be=0,se=se===""?".":se+":",R(I))for(var Oe=0;Oe<I.length;Oe++){ve=I[Oe];var ie=se+he(ve,Oe);be+=ye(ve,Q,ee,ie,Ee)}else if(ie=y(I),typeof ie=="function")for(I=ie.call(I),Oe=0;!(ve=I.next()).done;)ve=ve.value,ie=se+he(ve,Oe++),be+=ye(ve,Q,ee,ie,Ee);else if(ve==="object")throw Q=String(I),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return be}function W(I,Q,ee){if(I==null)return I;var se=[],Ee=0;return ye(I,se,"","",function(ve){return Q.call(ee,ve,Ee++)}),se}function O(I){if(I._status===-1){var Q=I._result;Q=Q(),Q.then(function(ee){(I._status===0||I._status===-1)&&(I._status=1,I._result=ee)},function(ee){(I._status===0||I._status===-1)&&(I._status=2,I._result=ee)}),I._status===-1&&(I._status=0,I._result=Q)}if(I._status===1)return I._result.default;throw I._result}var N={current:null},F={transition:null},j={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:F,ReactCurrentOwner:V};function U(){throw Error("act(...) is not supported in production builds of React.")}return an.Children={map:W,forEach:function(I,Q,ee){W(I,function(){Q.apply(this,arguments)},ee)},count:function(I){var Q=0;return W(I,function(){Q++}),Q},toArray:function(I){return W(I,function(Q){return Q})||[]},only:function(I){if(!de(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},an.Component=D,an.Fragment=r,an.Profiler=o,an.PureComponent=P,an.StrictMode=i,an.Suspense=f,an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,an.act=U,an.cloneElement=function(I,Q,ee){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var se=E({},I.props),Ee=I.key,ve=I.ref,be=I._owner;if(Q!=null){if(Q.ref!==void 0&&(ve=Q.ref,be=V.current),Q.key!==void 0&&(Ee=""+Q.key),I.type&&I.type.defaultProps)var Oe=I.type.defaultProps;for(ie in Q)L.call(Q,ie)&&!Z.hasOwnProperty(ie)&&(se[ie]=Q[ie]===void 0&&Oe!==void 0?Oe[ie]:Q[ie])}var ie=arguments.length-2;if(ie===1)se.children=ee;else if(1<ie){Oe=Array(ie);for(var De=0;De<ie;De++)Oe[De]=arguments[De+2];se.children=Oe}return{$$typeof:e,type:I.type,key:Ee,ref:ve,props:se,_owner:be}},an.createContext=function(I){return I={$$typeof:a,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:s,_context:I},I.Consumer=I},an.createElement=ne,an.createFactory=function(I){var Q=ne.bind(null,I);return Q.type=I,Q},an.createRef=function(){return{current:null}},an.forwardRef=function(I){return{$$typeof:u,render:I}},an.isValidElement=de,an.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:O}},an.memo=function(I,Q){return{$$typeof:d,type:I,compare:Q===void 0?null:Q}},an.startTransition=function(I){var Q=F.transition;F.transition={};try{I()}finally{F.transition=Q}},an.unstable_act=U,an.useCallback=function(I,Q){return N.current.useCallback(I,Q)},an.useContext=function(I){return N.current.useContext(I)},an.useDebugValue=function(){},an.useDeferredValue=function(I){return N.current.useDeferredValue(I)},an.useEffect=function(I,Q){return N.current.useEffect(I,Q)},an.useId=function(){return N.current.useId()},an.useImperativeHandle=function(I,Q,ee){return N.current.useImperativeHandle(I,Q,ee)},an.useInsertionEffect=function(I,Q){return N.current.useInsertionEffect(I,Q)},an.useLayoutEffect=function(I,Q){return N.current.useLayoutEffect(I,Q)},an.useMemo=function(I,Q){return N.current.useMemo(I,Q)},an.useReducer=function(I,Q,ee){return N.current.useReducer(I,Q,ee)},an.useRef=function(I){return N.current.useRef(I)},an.useState=function(I){return N.current.useState(I)},an.useSyncExternalStore=function(I,Q,ee){return N.current.useSyncExternalStore(I,Q,ee)},an.useTransition=function(){return N.current.useTransition()},an.version="18.3.1",an}var IP;function hE(){return IP||(IP=1,k2.exports=W9()),k2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FP;function V9(){if(FP)return cp;FP=1;var e=hE(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,f,d){var g,p={},y=null,w=null;d!==void 0&&(y=""+d),f.key!==void 0&&(y=""+f.key),f.ref!==void 0&&(w=f.ref);for(g in f)i.call(f,g)&&!s.hasOwnProperty(g)&&(p[g]=f[g]);if(u&&u.defaultProps)for(g in f=u.defaultProps,f)p[g]===void 0&&(p[g]=f[g]);return{$$typeof:n,type:u,key:y,ref:w,props:p,_owner:o.current}}return cp.Fragment=r,cp.jsx=a,cp.jsxs=a,cp}var LP;function U9(){return LP||(LP=1,R2.exports=V9()),R2.exports}var k=U9(),K=hE();const Bt=vc(K),X9=$9({__proto__:null,default:Bt},[K]);var rv={},b2={exports:{}},po={},O2={exports:{}},I2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _P;function K9(){return _P||(_P=1,function(e){function n(F,j){var U=F.length;F.push(j);e:for(;0<U;){var I=U-1>>>1,Q=F[I];if(0<o(Q,j))F[I]=j,F[U]=Q,U=I;else break e}}function r(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var j=F[0],U=F.pop();if(U!==j){F[0]=U;e:for(var I=0,Q=F.length,ee=Q>>>1;I<ee;){var se=2*(I+1)-1,Ee=F[se],ve=se+1,be=F[ve];if(0>o(Ee,U))ve<Q&&0>o(be,Ee)?(F[I]=be,F[ve]=U,I=ve):(F[I]=Ee,F[se]=U,I=se);else if(ve<Q&&0>o(be,U))F[I]=be,F[ve]=U,I=ve;else break e}}return j}function o(F,j){var U=F.sortIndex-j.sortIndex;return U!==0?U:F.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var f=[],d=[],g=1,p=null,y=3,w=!1,E=!1,S=!1,D=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var j=r(d);j!==null;){if(j.callback===null)i(d);else if(j.startTime<=F)i(d),j.sortIndex=j.expirationTime,n(f,j);else break;j=r(d)}}function R(F){if(S=!1,b(F),!E)if(r(f)!==null)E=!0,O(L);else{var j=r(d);j!==null&&N(R,j.startTime-F)}}function L(F,j){E=!1,S&&(S=!1,A(ne),ne=-1),w=!0;var U=y;try{for(b(j),p=r(f);p!==null&&(!(p.expirationTime>j)||F&&!Pe());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var Q=I(p.expirationTime<=j);j=e.unstable_now(),typeof Q=="function"?p.callback=Q:p===r(f)&&i(f),b(j)}else i(f);p=r(f)}if(p!==null)var ee=!0;else{var se=r(d);se!==null&&N(R,se.startTime-j),ee=!1}return ee}finally{p=null,y=U,w=!1}}var V=!1,Z=null,ne=-1,le=5,de=-1;function Pe(){return!(e.unstable_now()-de<le)}function ue(){if(Z!==null){var F=e.unstable_now();de=F;var j=!0;try{j=Z(!0,F)}finally{j?he():(V=!1,Z=null)}}else V=!1}var he;if(typeof P=="function")he=function(){P(ue)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,W=ye.port2;ye.port1.onmessage=ue,he=function(){W.postMessage(null)}}else he=function(){D(ue,0)};function O(F){Z=F,V||(V=!0,he())}function N(F,j){ne=D(function(){F(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){E||w||(E=!0,O(L))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(F){switch(y){case 1:case 2:case 3:var j=3;break;default:j=y}var U=y;y=j;try{return F()}finally{y=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=y;y=F;try{return j()}finally{y=U}},e.unstable_scheduleCallback=function(F,j,U){var I=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?I+U:I):U=I,F){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=U+Q,F={id:g++,callback:j,priorityLevel:F,startTime:U,expirationTime:Q,sortIndex:-1},U>I?(F.sortIndex=U,n(d,F),r(f)===null&&F===r(d)&&(S?(A(ne),ne=-1):S=!0,N(R,U-I))):(F.sortIndex=Q,n(f,F),E||w||(E=!0,O(L))),F},e.unstable_shouldYield=Pe,e.unstable_wrapCallback=function(F){var j=y;return function(){var U=y;y=j;try{return F.apply(this,arguments)}finally{y=U}}}}(I2)),I2}var NP;function q9(){return NP||(NP=1,O2.exports=K9()),O2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP;function Y9(){if(HP)return po;HP=1;var e=hE(),n=q9();function r(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)c+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function s(l,c){a(l,c),a(l+"Capture",c)}function a(l,c){for(o[l]=c,l=0;l<c.length;l++)i.add(c[l])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},p={};function y(l){return f.call(p,l)?!0:f.call(g,l)?!1:d.test(l)?p[l]=!0:(g[l]=!0,!1)}function w(l,c,v,x){if(v!==null&&v.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:v!==null?!v.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function E(l,c,v,x){if(c===null||typeof c>"u"||w(l,c,v,x))return!0;if(x)return!1;if(v!==null)switch(v.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function S(l,c,v,x,T,B,$){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=T,this.mustUseProperty=v,this.propertyName=l,this.type=c,this.sanitizeURL=B,this.removeEmptyString=$}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){D[l]=new S(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];D[c]=new S(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){D[l]=new S(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){D[l]=new S(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){D[l]=new S(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){D[l]=new S(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){D[l]=new S(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){D[l]=new S(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){D[l]=new S(l,5,!1,l.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function P(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(A,P);D[c]=new S(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(A,P);D[c]=new S(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(A,P);D[c]=new S(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){D[l]=new S(l,1,!1,l.toLowerCase(),null,!1,!1)}),D.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){D[l]=new S(l,1,!1,l.toLowerCase(),null,!0,!0)});function b(l,c,v,x){var T=D.hasOwnProperty(c)?D[c]:null;(T!==null?T.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(E(c,v,T,x)&&(v=null),x||T===null?y(c)&&(v===null?l.removeAttribute(c):l.setAttribute(c,""+v)):T.mustUseProperty?l[T.propertyName]=v===null?T.type===3?!1:"":v:(c=T.attributeName,x=T.attributeNamespace,v===null?l.removeAttribute(c):(T=T.type,v=T===3||T===4&&v===!0?"":""+v,x?l.setAttributeNS(x,c,v):l.setAttribute(c,v))))}var R=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),V=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),F=Symbol.iterator;function j(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}var U=Object.assign,I;function Q(l){if(I===void 0)try{throw Error()}catch(v){var c=v.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+l}var ee=!1;function se(l,c){if(!l||ee)return"";ee=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Me){var x=Me}Reflect.construct(l,[],c)}else{try{c.call()}catch(Me){x=Me}l.call(c.prototype)}else{try{throw Error()}catch(Me){x=Me}l()}}catch(Me){if(Me&&x&&typeof Me.stack=="string"){for(var T=Me.stack.split(`
`),B=x.stack.split(`
`),$=T.length-1,te=B.length-1;1<=$&&0<=te&&T[$]!==B[te];)te--;for(;1<=$&&0<=te;$--,te--)if(T[$]!==B[te]){if($!==1||te!==1)do if($--,te--,0>te||T[$]!==B[te]){var ce=`
`+T[$].replace(" at new "," at ");return l.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",l.displayName)),ce}while(1<=$&&0<=te);break}}}finally{ee=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?Q(l):""}function Ee(l){switch(l.tag){case 5:return Q(l.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return l=se(l.type,!1),l;case 11:return l=se(l.type.render,!1),l;case 1:return l=se(l.type,!0),l;default:return""}}function ve(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Z:return"Fragment";case V:return"Portal";case le:return"Profiler";case ne:return"StrictMode";case he:return"Suspense";case ye:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Pe:return(l.displayName||"Context")+".Consumer";case de:return(l._context.displayName||"Context")+".Provider";case ue:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case W:return c=l.displayName||null,c!==null?c:ve(l.type)||"Memo";case O:c=l._payload,l=l._init;try{return ve(l(c))}catch{}}return null}function be(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(c);case 8:return c===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Oe(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ie(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function De(l){var c=ie(l)?"checked":"value",v=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),x=""+l[c];if(!l.hasOwnProperty(c)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var T=v.get,B=v.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return T.call(this)},set:function($){x=""+$,B.call(this,$)}}),Object.defineProperty(l,c,{enumerable:v.enumerable}),{getValue:function(){return x},setValue:function($){x=""+$},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Re(l){l._valueTracker||(l._valueTracker=De(l))}function Ie(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var v=c.getValue(),x="";return l&&(x=ie(l)?l.checked?"true":"false":l.value),l=x,l!==v?(c.setValue(l),!0):!1}function ct(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Ne(l,c){var v=c.checked;return U({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??l._wrapperState.initialChecked})}function yt(l,c){var v=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;v=Oe(c.value!=null?c.value:v),l._wrapperState={initialChecked:x,initialValue:v,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function lt(l,c){c=c.checked,c!=null&&b(l,"checked",c,!1)}function Qe(l,c){lt(l,c);var v=Oe(c.value),x=c.type;if(v!=null)x==="number"?(v===0&&l.value===""||l.value!=v)&&(l.value=""+v):l.value!==""+v&&(l.value=""+v);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?ft(l,c.type,v):c.hasOwnProperty("defaultValue")&&ft(l,c.type,Oe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function St(l,c,v){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,v||c===l.value||(l.value=c),l.defaultValue=c}v=l.name,v!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,v!==""&&(l.name=v)}function ft(l,c,v){(c!=="number"||ct(l.ownerDocument)!==l)&&(v==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+v&&(l.defaultValue=""+v))}var Ot=Array.isArray;function mt(l,c,v,x){if(l=l.options,c){c={};for(var T=0;T<v.length;T++)c["$"+v[T]]=!0;for(v=0;v<l.length;v++)T=c.hasOwnProperty("$"+l[v].value),l[v].selected!==T&&(l[v].selected=T),T&&x&&(l[v].defaultSelected=!0)}else{for(v=""+Oe(v),c=null,T=0;T<l.length;T++){if(l[T].value===v){l[T].selected=!0,x&&(l[T].defaultSelected=!0);return}c!==null||l[T].disabled||(c=l[T])}c!==null&&(c.selected=!0)}}function Ut(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return U({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Gn(l,c){var v=c.value;if(v==null){if(v=c.children,c=c.defaultValue,v!=null){if(c!=null)throw Error(r(92));if(Ot(v)){if(1<v.length)throw Error(r(93));v=v[0]}c=v}c==null&&(c=""),v=c}l._wrapperState={initialValue:Oe(v)}}function Ar(l,c){var v=Oe(c.value),x=Oe(c.defaultValue);v!=null&&(v=""+v,v!==l.value&&(l.value=v),c.defaultValue==null&&l.defaultValue!==v&&(l.defaultValue=v)),x!=null&&(l.defaultValue=""+x)}function Fn(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function wi(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mr(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?wi(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var En,In=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,v,x,T){MSApp.execUnsafeLocalFunction(function(){return l(c,v,x,T)})}:l}(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(En=En||document.createElement("div"),En.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=En.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function _r(l,c){if(c){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=c;return}}l.textContent=c}var Ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fs=["Webkit","ms","Moz","O"];Object.keys(Ii).forEach(function(l){Fs.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),Ii[c]=Ii[l]})});function ts(l,c,v){return c==null||typeof c=="boolean"||c===""?"":v||typeof c!="number"||c===0||Ii.hasOwnProperty(l)&&Ii[l]?(""+c).trim():c+"px"}function Mo(l,c){l=l.style;for(var v in c)if(c.hasOwnProperty(v)){var x=v.indexOf("--")===0,T=ts(v,c[v],x);v==="float"&&(v="cssFloat"),x?l.setProperty(v,T):l[v]=T}}var sl=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ro(l,c){if(c){if(sl[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Zi(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=null;function Dc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Qi=null,Ls=null,_s=null;function Ac(l){if(l=jr(l)){if(typeof Qi!="function")throw Error(r(280));var c=l.stateNode;c&&(c=Vh(c),Qi(l.stateNode,l.type,c))}}function fh(l){Ls?_s?_s.push(l):_s=[l]:Ls=l}function hh(){if(Ls){var l=Ls,c=_s;if(_s=Ls=null,Ac(l),c)for(l=0;l<c.length;l++)Ac(c[l])}}function dh(l,c){return l(c)}function Bc(){}var Mc=!1;function gh(l,c,v){if(Mc)return l(c,v);Mc=!0;try{return dh(l,c,v)}finally{Mc=!1,(Ls!==null||_s!==null)&&(Bc(),hh())}}function al(l,c){var v=l.stateNode;if(v===null)return null;var x=Vh(v);if(x===null)return null;v=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(r(231,c,typeof v));return v}var ll=!1;if(u)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){ll=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{ll=!1}function Rc(l,c,v,x,T,B,$,te,ce){var Me=Array.prototype.slice.call(arguments,3);try{c.apply(v,Me)}catch($e){this.onError($e)}}var pa=!1,au=null,lu=!1,kc=null,Vg={onError:function(l){pa=!0,au=l}};function Ug(l,c,v,x,T,B,$,te,ce){pa=!1,au=null,Rc.apply(Vg,arguments)}function Xg(l,c,v,x,T,B,$,te,ce){if(Ug.apply(this,arguments),pa){if(pa){var Me=au;pa=!1,au=null}else throw Error(r(198));lu||(lu=!0,kc=Me)}}function Ns(l){var c=l,v=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(v=c.return),l=c.return;while(l)}return c.tag===3?v:null}function bc(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function ph(l){if(Ns(l)!==l)throw Error(r(188))}function Kg(l){var c=l.alternate;if(!c){if(c=Ns(l),c===null)throw Error(r(188));return c!==l?null:l}for(var v=l,x=c;;){var T=v.return;if(T===null)break;var B=T.alternate;if(B===null){if(x=T.return,x!==null){v=x;continue}break}if(T.child===B.child){for(B=T.child;B;){if(B===v)return ph(T),l;if(B===x)return ph(T),c;B=B.sibling}throw Error(r(188))}if(v.return!==x.return)v=T,x=B;else{for(var $=!1,te=T.child;te;){if(te===v){$=!0,v=T,x=B;break}if(te===x){$=!0,x=T,v=B;break}te=te.sibling}if(!$){for(te=B.child;te;){if(te===v){$=!0,v=B,x=T;break}if(te===x){$=!0,x=B,v=T;break}te=te.sibling}if(!$)throw Error(r(189))}}if(v.alternate!==x)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?l:c}function mh(l){return l=Kg(l),l!==null?vh(l):null}function vh(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=vh(l);if(c!==null)return c;l=l.sibling}return null}var yh=n.unstable_scheduleCallback,wh=n.unstable_cancelCallback,uu=n.unstable_shouldYield,xh=n.unstable_requestPaint,Pn=n.unstable_now,Ch=n.unstable_getCurrentPriorityLevel,ns=n.unstable_ImmediatePriority,Eh=n.unstable_UserBlockingPriority,rs=n.unstable_NormalPriority,cu=n.unstable_LowPriority,Oc=n.unstable_IdlePriority,fu=null,xi=null;function qg(l){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(fu,l,void 0,(l.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:J,q=Math.log,ae=Math.LN2;function J(l){return l>>>=0,l===0?32:31-(q(l)/ae|0)|0}var me=64,xe=4194304;function ge(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Fe(l,c){var v=l.pendingLanes;if(v===0)return 0;var x=0,T=l.suspendedLanes,B=l.pingedLanes,$=v&268435455;if($!==0){var te=$&~T;te!==0?x=ge(te):(B&=$,B!==0&&(x=ge(B)))}else $=v&~T,$!==0?x=ge($):B!==0&&(x=ge(B));if(x===0)return 0;if(c!==0&&c!==x&&(c&T)===0&&(T=x&-x,B=c&-c,T>=B||T===16&&(B&4194240)!==0))return c;if((x&4)!==0&&(x|=v&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=x;0<c;)v=31-Fi(c),T=1<<v,x|=l[v],c&=~T;return x}function We(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qe(l,c){for(var v=l.suspendedLanes,x=l.pingedLanes,T=l.expirationTimes,B=l.pendingLanes;0<B;){var $=31-Fi(B),te=1<<$,ce=T[$];ce===-1?((te&v)===0||(te&x)!==0)&&(T[$]=We(te,c)):ce<=c&&(l.expiredLanes|=te),B&=~te}}function Xe(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function et(){var l=me;return me<<=1,(me&4194240)===0&&(me=64),l}function ut(l){for(var c=[],v=0;31>v;v++)c.push(l);return c}function Wt(l,c,v){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-Fi(c),l[c]=v}function pn(l,c){var v=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<v;){var T=31-Fi(v),B=1<<T;c[T]=0,x[T]=-1,l[T]=-1,v&=~B}}function ln(l,c){var v=l.entangledLanes|=c;for(l=l.entanglements;v;){var x=31-Fi(v),T=1<<x;T&c|l[x]&c&&(l[x]|=c),v&=~T}}var Mt=0;function Dn(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Nr,is,hu,Ic,cl,Fc=!1,fl=[],os=null,ko=null,ma=null,du=new Map,Lc=new Map,va=[],Iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z1(l,c){switch(l){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":du.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(c.pointerId)}}function hl(l,c,v,x,T,B){return l===null||l.nativeEvent!==B?(l={blockedOn:c,domEventName:v,eventSystemFlags:x,nativeEvent:B,targetContainers:[T]},c!==null&&(c=jr(c),c!==null&&is(c)),l):(l.eventSystemFlags|=x,c=l.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),l)}function Fw(l,c,v,x,T){switch(c){case"focusin":return os=hl(os,l,c,v,x,T),!0;case"dragenter":return ko=hl(ko,l,c,v,x,T),!0;case"mouseover":return ma=hl(ma,l,c,v,x,T),!0;case"pointerover":var B=T.pointerId;return du.set(B,hl(du.get(B)||null,l,c,v,x,T)),!0;case"gotpointercapture":return B=T.pointerId,Lc.set(B,hl(Lc.get(B)||null,l,c,v,x,T)),!0}return!1}function $1(l){var c=us(l.target);if(c!==null){var v=Ns(c);if(v!==null){if(c=v.tag,c===13){if(c=bc(v),c!==null){l.blockedOn=c,cl(l.priority,function(){hu(v)});return}}else if(c===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ph(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var v=Dh(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(v===null){v=l.nativeEvent;var x=new v.constructor(v.type,v);su=x,v.target.dispatchEvent(x),su=null}else return c=jr(v),c!==null&&is(c),l.blockedOn=v,!1;c.shift()}return!0}function W1(l,c,v){Ph(l)&&v.delete(c)}function Lw(){Fc=!1,os!==null&&Ph(os)&&(os=null),ko!==null&&Ph(ko)&&(ko=null),ma!==null&&Ph(ma)&&(ma=null),du.forEach(W1),Lc.forEach(W1)}function An(l,c){l.blockedOn===c&&(l.blockedOn=null,Fc||(Fc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Lw)))}function Sn(l){function c(T){return An(T,l)}if(0<fl.length){An(fl[0],l);for(var v=1;v<fl.length;v++){var x=fl[v];x.blockedOn===l&&(x.blockedOn=null)}}for(os!==null&&An(os,l),ko!==null&&An(ko,l),ma!==null&&An(ma,l),du.forEach(c),Lc.forEach(c),v=0;v<va.length;v++)x=va[v],x.blockedOn===l&&(x.blockedOn=null);for(;0<va.length&&(v=va[0],v.blockedOn===null);)$1(v),v.blockedOn===null&&va.shift()}var gu=R.ReactCurrentBatchConfig,Sh=!0;function _w(l,c,v,x){var T=Mt,B=gu.transition;gu.transition=null;try{Mt=1,Yg(l,c,v,x)}finally{Mt=T,gu.transition=B}}function Nw(l,c,v,x){var T=Mt,B=gu.transition;gu.transition=null;try{Mt=4,Yg(l,c,v,x)}finally{Mt=T,gu.transition=B}}function Yg(l,c,v,x){if(Sh){var T=Dh(l,c,v,x);if(T===null)d0(l,c,x,Th,v),z1(l,x);else if(Fw(T,l,c,v,x))x.stopPropagation();else if(z1(l,x),c&4&&-1<Iw.indexOf(l)){for(;T!==null;){var B=jr(T);if(B!==null&&Nr(B),B=Dh(l,c,v,x),B===null&&d0(l,c,x,Th,v),B===T)break;T=B}T!==null&&x.stopPropagation()}else d0(l,c,x,null,v)}}var Th=null;function Dh(l,c,v,x){if(Th=null,l=Dc(x),l=us(l),l!==null)if(c=Ns(l),c===null)l=null;else if(v=c.tag,v===13){if(l=bc(c),l!==null)return l;l=null}else if(v===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return Th=l,null}function V1(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ch()){case ns:return 1;case Eh:return 4;case rs:case cu:return 16;case Oc:return 536870912;default:return 16}default:return 16}}var Vn=null,_c=null,ss=null;function Zg(){if(ss)return ss;var l,c=_c,v=c.length,x,T="value"in Vn?Vn.value:Vn.textContent,B=T.length;for(l=0;l<v&&c[l]===T[l];l++);var $=v-l;for(x=1;x<=$&&c[v-x]===T[B-x];x++);return ss=T.slice(l,1<x?1-x:void 0)}function pu(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function ri(){return!0}function Qg(){return!1}function Ci(l){function c(v,x,T,B,$){this._reactName=v,this._targetInst=T,this.type=x,this.nativeEvent=B,this.target=$,this.currentTarget=null;for(var te in l)l.hasOwnProperty(te)&&(v=l[te],this[te]=v?v(B):B[te]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?ri:Qg,this.isPropagationStopped=Qg,this}return U(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),c}var dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ah=Ci(dl),mu=U({},dl,{view:0,detail:0}),U1=Ci(mu),ii,Jg,Hr,Bh=U({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:i0,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Hr&&(Hr&&l.type==="mousemove"?(ii=l.screenX-Hr.screenX,Jg=l.screenY-Hr.screenY):Jg=ii=0,Hr=l),ii)},movementY:function(l){return"movementY"in l?l.movementY:Jg}}),e0=Ci(Bh),ya=U({},Bh,{dataTransfer:0}),Mh=Ci(ya),t0=U({},mu,{relatedTarget:0}),Ln=Ci(t0),wa=U({},dl,{animationName:0,elapsedTime:0,pseudoElement:0}),n0=Ci(wa),Hw=U({},dl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),r0=Ci(Hw),Gw=U({},dl,{data:0}),X1=Ci(Gw),jw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=Rh[l])?!!c[l]:!1}function i0(){return vu}var q1=U({},mu,{key:function(l){if(l.key){var c=jw[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=pu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?K1[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:i0,charCode:function(l){return l.type==="keypress"?pu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?pu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Y1=Ci(q1),o0=U({},Bh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=Ci(o0),Z1=U({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:i0}),zw=Ci(Z1),s0=U({},dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),a0=Ci(s0),$w=U({},Bh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Q1=Ci($w),Li=[9,13,27,32],Nc=u&&"CompositionEvent"in window,Hs=null;u&&"documentMode"in document&&(Hs=document.documentMode);var J1=u&&"TextEvent"in window&&!Hs,l0=u&&(!Nc||Hs&&8<Hs&&11>=Hs),em=" ",tm=!1;function nm(l,c){switch(l){case"keyup":return Li.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rm(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var yu=!1;function wu(l,c){switch(l){case"compositionend":return rm(c);case"keypress":return c.which!==32?null:(tm=!0,em);case"textInput":return l=c.data,l===em&&tm?null:l;default:return null}}function Ww(l,c){if(yu)return l==="compositionend"||!Nc&&nm(l,c)?(l=Zg(),ss=_c=Vn=null,yu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return l0&&c.locale!=="ko"?null:c.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!Vw[l.type]:c==="textarea"}function u0(l,c,v,x){fh(x),c=jh(c,"onChange"),0<c.length&&(v=new Ah("onChange","change",null,v,x),l.push({event:v,listeners:c}))}var Ji=null,xa=null;function Uw(l){cm(l,0)}function Oh(l){var c=qt(l);if(Ie(c))return l}function Xw(l,c){if(l==="change")return c}var gl=!1;if(u){var _i;if(u){var Ih="oninput"in document;if(!Ih){var im=document.createElement("div");im.setAttribute("oninput","return;"),Ih=typeof im.oninput=="function"}_i=Ih}else _i=!1;gl=_i&&(!document.documentMode||9<document.documentMode)}function om(){Ji&&(Ji.detachEvent("onpropertychange",sm),xa=Ji=null)}function sm(l){if(l.propertyName==="value"&&Oh(xa)){var c=[];u0(c,xa,l,Dc(l)),gh(Uw,c)}}function Kw(l,c,v){l==="focusin"?(om(),Ji=c,xa=v,Ji.attachEvent("onpropertychange",sm)):l==="focusout"&&om()}function qw(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Oh(xa)}function xu(l,c){if(l==="click")return Oh(c)}function we(l,c){if(l==="input"||l==="change")return Oh(c)}function Le(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var Be=typeof Object.is=="function"?Object.is:Le;function it(l,c){if(Be(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var v=Object.keys(l),x=Object.keys(c);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var T=v[x];if(!f.call(c,T)||!Be(l[T],c[T]))return!1}return!0}function zt(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function yn(l,c){var v=zt(l);l=0;for(var x;v;){if(v.nodeType===3){if(x=l+v.textContent.length,l<=c&&x>=c)return{node:v,offset:c-l};l=x}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=zt(v)}}function ur(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?ur(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function Mn(){for(var l=window,c=ct();c instanceof l.HTMLIFrameElement;){try{var v=typeof c.contentWindow.location.href=="string"}catch{v=!1}if(v)l=c.contentWindow;else break;c=ct(l.document)}return c}function Hc(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function Yw(l){var c=Mn(),v=l.focusedElem,x=l.selectionRange;if(c!==v&&v&&v.ownerDocument&&ur(v.ownerDocument.documentElement,v)){if(x!==null&&Hc(v)){if(c=x.start,l=x.end,l===void 0&&(l=c),"selectionStart"in v)v.selectionStart=c,v.selectionEnd=Math.min(l,v.value.length);else if(l=(c=v.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var T=v.textContent.length,B=Math.min(x.start,T);x=x.end===void 0?B:Math.min(x.end,T),!l.extend&&B>x&&(T=x,x=B,B=T),T=yn(v,B);var $=yn(v,x);T&&$&&(l.rangeCount!==1||l.anchorNode!==T.node||l.anchorOffset!==T.offset||l.focusNode!==$.node||l.focusOffset!==$.offset)&&(c=c.createRange(),c.setStart(T.node,T.offset),l.removeAllRanges(),B>x?(l.addRange(c),l.extend($.node,$.offset)):(c.setEnd($.node,$.offset),l.addRange(c)))}}for(c=[],l=v;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<c.length;v++)l=c[v],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var eo=u&&"documentMode"in document&&11>=document.documentMode,Gs=null,c0=null,as=null,Cu=!1;function Gc(l,c,v){var x=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Cu||Gs==null||Gs!==ct(x)||(x=Gs,"selectionStart"in x&&Hc(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),as&&it(as,x)||(as=x,x=jh(c0,"onSelect"),0<x.length&&(c=new Ah("onSelect","select",null,c,v),l.push({event:c,listeners:x}),c.target=Gs)))}function wn(l,c){var v={};return v[l.toLowerCase()]=c.toLowerCase(),v["Webkit"+l]="webkit"+c,v["Moz"+l]="moz"+c,v}var Eu={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},Fh={},jc={};u&&(jc=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function Lh(l){if(Fh[l])return Fh[l];if(!Eu[l])return l;var c=Eu[l],v;for(v in c)if(c.hasOwnProperty(v)&&v in jc)return Fh[l]=c[v];return l}var am=Lh("animationend"),lm=Lh("animationiteration"),zc=Lh("animationstart"),js=Lh("transitionend"),$c=new Map,f0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(l,c){$c.set(l,c),s(c,[l])}for(var _h=0;_h<f0.length;_h++){var Nh=f0[_h],Hh=Nh.toLowerCase(),um=Nh[0].toUpperCase()+Nh.slice(1);bo(Hh,"on"+um)}bo(am,"onAnimationEnd"),bo(lm,"onAnimationIteration"),bo(zc,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo(js,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pl=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Wc(l,c,v){var x=l.type||"unknown-event";l.currentTarget=v,Xg(x,c,void 0,l),l.currentTarget=null}function cm(l,c){c=(c&4)!==0;for(var v=0;v<l.length;v++){var x=l[v],T=x.event;x=x.listeners;e:{var B=void 0;if(c)for(var $=x.length-1;0<=$;$--){var te=x[$],ce=te.instance,Me=te.currentTarget;if(te=te.listener,ce!==B&&T.isPropagationStopped())break e;Wc(T,te,Me),B=ce}else for($=0;$<x.length;$++){if(te=x[$],ce=te.instance,Me=te.currentTarget,te=te.listener,ce!==B&&T.isPropagationStopped())break e;Wc(T,te,Me),B=ce}}}if(lu)throw l=kc,lu=!1,kc=null,l}function jn(l,c){var v=c[Wh];v===void 0&&(v=c[Wh]=new Set);var x=l+"__bubble";v.has(x)||(Gh(c,l,2,!1),v.add(x))}function h0(l,c,v){var x=0;c&&(x|=4),Gh(v,l,x,c)}var ml="_reactListening"+Math.random().toString(36).slice(2);function Ca(l){if(!l[ml]){l[ml]=!0,i.forEach(function(v){v!=="selectionchange"&&(pl.has(v)||h0(v,!1,l),h0(v,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[ml]||(c[ml]=!0,h0("selectionchange",!1,c))}}function Gh(l,c,v,x){switch(V1(c)){case 1:var T=_w;break;case 4:T=Nw;break;default:T=Yg}v=T.bind(null,c,v,l),T=void 0,!ll||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),x?T!==void 0?l.addEventListener(c,v,{capture:!0,passive:T}):l.addEventListener(c,v,!0):T!==void 0?l.addEventListener(c,v,{passive:T}):l.addEventListener(c,v,!1)}function d0(l,c,v,x,T){var B=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var $=x.tag;if($===3||$===4){var te=x.stateNode.containerInfo;if(te===T||te.nodeType===8&&te.parentNode===T)break;if($===4)for($=x.return;$!==null;){var ce=$.tag;if((ce===3||ce===4)&&(ce=$.stateNode.containerInfo,ce===T||ce.nodeType===8&&ce.parentNode===T))return;$=$.return}for(;te!==null;){if($=us(te),$===null)return;if(ce=$.tag,ce===5||ce===6){x=B=$;continue e}te=te.parentNode}}x=x.return}gh(function(){var Me=B,$e=Dc(v),Ue=[];e:{var ze=$c.get(l);if(ze!==void 0){var ot=Ah,ht=l;switch(l){case"keypress":if(pu(v)===0)break e;case"keydown":case"keyup":ot=Y1;break;case"focusin":ht="focus",ot=Ln;break;case"focusout":ht="blur",ot=Ln;break;case"beforeblur":case"afterblur":ot=Ln;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=e0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=zw;break;case am:case lm:case zc:ot=n0;break;case js:ot=a0;break;case"scroll":ot=U1;break;case"wheel":ot=Q1;break;case"copy":case"cut":case"paste":ot=r0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=kh}var pt=(c&4)!==0,sr=!pt&&l==="scroll",Te=pt?ze!==null?ze+"Capture":null:ze;pt=[];for(var pe=Me,Ae;pe!==null;){Ae=pe;var Ye=Ae.stateNode;if(Ae.tag===5&&Ye!==null&&(Ae=Ye,Te!==null&&(Ye=al(pe,Te),Ye!=null&&pt.push(Pu(pe,Ye,Ae)))),sr)break;pe=pe.return}0<pt.length&&(ze=new ot(ze,ht,null,v,$e),Ue.push({event:ze,listeners:pt}))}}if((c&7)===0){e:{if(ze=l==="mouseover"||l==="pointerover",ot=l==="mouseout"||l==="pointerout",ze&&v!==su&&(ht=v.relatedTarget||v.fromElement)&&(us(ht)||ht[Ni]))break e;if((ot||ze)&&(ze=$e.window===$e?$e:(ze=$e.ownerDocument)?ze.defaultView||ze.parentWindow:window,ot?(ht=v.relatedTarget||v.toElement,ot=Me,ht=ht?us(ht):null,ht!==null&&(sr=Ns(ht),ht!==sr||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(ot=null,ht=Me),ot!==ht)){if(pt=e0,Ye="onMouseLeave",Te="onMouseEnter",pe="mouse",(l==="pointerout"||l==="pointerover")&&(pt=kh,Ye="onPointerLeave",Te="onPointerEnter",pe="pointer"),sr=ot==null?ze:qt(ot),Ae=ht==null?ze:qt(ht),ze=new pt(Ye,pe+"leave",ot,v,$e),ze.target=sr,ze.relatedTarget=Ae,Ye=null,us($e)===Me&&(pt=new pt(Te,pe+"enter",ht,v,$e),pt.target=Ae,pt.relatedTarget=sr,Ye=pt),sr=Ye,ot&&ht)t:{for(pt=ot,Te=ht,pe=0,Ae=pt;Ae;Ae=Su(Ae))pe++;for(Ae=0,Ye=Te;Ye;Ye=Su(Ye))Ae++;for(;0<pe-Ae;)pt=Su(pt),pe--;for(;0<Ae-pe;)Te=Su(Te),Ae--;for(;pe--;){if(pt===Te||Te!==null&&pt===Te.alternate)break t;pt=Su(pt),Te=Su(Te)}pt=null}else pt=null;ot!==null&&cr(Ue,ze,ot,pt,!1),ht!==null&&sr!==null&&cr(Ue,sr,ht,pt,!0)}}e:{if(ze=Me?qt(Me):window,ot=ze.nodeName&&ze.nodeName.toLowerCase(),ot==="select"||ot==="input"&&ze.type==="file")var wt=Xw;else if(bh(ze))if(gl)wt=we;else{wt=qw;var Rt=Kw}else(ot=ze.nodeName)&&ot.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(wt=xu);if(wt&&(wt=wt(l,Me))){u0(Ue,wt,v,$e);break e}Rt&&Rt(l,ze,Me),l==="focusout"&&(Rt=ze._wrapperState)&&Rt.controlled&&ze.type==="number"&&ft(ze,"number",ze.value)}switch(Rt=Me?qt(Me):window,l){case"focusin":(bh(Rt)||Rt.contentEditable==="true")&&(Gs=Rt,c0=Me,as=null);break;case"focusout":as=c0=Gs=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,Gc(Ue,v,$e);break;case"selectionchange":if(eo)break;case"keydown":case"keyup":Gc(Ue,v,$e)}var At;if(Nc)e:{switch(l){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else yu?nm(l,v)&&(_t="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(_t="onCompositionStart");_t&&(l0&&v.locale!=="ko"&&(yu||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&yu&&(At=Zg()):(Vn=$e,_c="value"in Vn?Vn.value:Vn.textContent,yu=!0)),Rt=jh(Me,_t),0<Rt.length&&(_t=new X1(_t,l,null,v,$e),Ue.push({event:_t,listeners:Rt}),At?_t.data=At:(At=rm(v),At!==null&&(_t.data=At)))),(At=J1?wu(l,v):Ww(l,v))&&(Me=jh(Me,"onBeforeInput"),0<Me.length&&($e=new X1("onBeforeInput","beforeinput",null,v,$e),Ue.push({event:$e,listeners:Me}),$e.data=At))}cm(Ue,c)})}function Pu(l,c,v){return{instance:l,listener:c,currentTarget:v}}function jh(l,c){for(var v=c+"Capture",x=[];l!==null;){var T=l,B=T.stateNode;T.tag===5&&B!==null&&(T=B,B=al(l,v),B!=null&&x.unshift(Pu(l,B,T)),B=al(l,c),B!=null&&x.push(Pu(l,B,T))),l=l.return}return x}function Su(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function cr(l,c,v,x,T){for(var B=c._reactName,$=[];v!==null&&v!==x;){var te=v,ce=te.alternate,Me=te.stateNode;if(ce!==null&&ce===x)break;te.tag===5&&Me!==null&&(te=Me,T?(ce=al(v,B),ce!=null&&$.unshift(Pu(v,ce,te))):T||(ce=al(v,B),ce!=null&&$.push(Pu(v,ce,te)))),v=v.return}$.length!==0&&l.push({event:c,listeners:$})}var Gr=/\r\n?/g,Zw=/\u0000|\uFFFD/g;function fm(l){return(typeof l=="string"?l:""+l).replace(Gr,`
`).replace(Zw,"")}function Vc(l,c,v){if(c=fm(c),fm(l)!==c&&v)throw Error(r(425))}function zh(){}var Uc=null,vl=null;function Xc(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,Kc=typeof clearTimeout=="function"?clearTimeout:void 0,Tu=typeof Promise=="function"?Promise:void 0,$h=typeof queueMicrotask=="function"?queueMicrotask:typeof Tu<"u"?function(l){return Tu.resolve(null).then(l).catch(Du)}:Ea;function Du(l){setTimeout(function(){throw l})}function g0(l,c){var v=c,x=0;do{var T=v.nextSibling;if(l.removeChild(v),T&&T.nodeType===8)if(v=T.data,v==="/$"){if(x===0){l.removeChild(T),Sn(c);return}x--}else v!=="$"&&v!=="$?"&&v!=="$!"||x++;v=T}while(v);Sn(c)}function Pa(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function hm(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"){if(c===0)return l;c--}else v==="/$"&&c++}l=l.previousSibling}return null}var Au=Math.random().toString(36).slice(2),ls="__reactFiber$"+Au,Sa="__reactProps$"+Au,Ni="__reactContainer$"+Au,Wh="__reactEvents$"+Au,X="__reactListeners$"+Au,Bu="__reactHandles$"+Au;function us(l){var c=l[ls];if(c)return c;for(var v=l.parentNode;v;){if(c=v[Ni]||v[ls]){if(v=c.alternate,c.child!==null||v!==null&&v.child!==null)for(l=hm(l);l!==null;){if(v=l[ls])return v;l=hm(l)}return c}l=v,v=l.parentNode}return null}function jr(l){return l=l[ls]||l[Ni],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function qt(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(r(33))}function Vh(l){return l[Sa]||null}var p0=[],Mu=-1;function Ei(l){return{current:l}}function zn(l){0>Mu||(l.current=p0[Mu],p0[Mu]=null,Mu--)}function _n(l,c){Mu++,p0[Mu]=l.current,l.current=c}var Ta={},zr=Ei(Ta),Pi=Ei(!1),oi=Ta;function Ru(l,c){var v=l.type.contextTypes;if(!v)return Ta;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var T={},B;for(B in v)T[B]=c[B];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=T),T}function Si(l){return l=l.childContextTypes,l!=null}function Uh(){zn(Pi),zn(zr)}function dm(l,c,v){if(zr.current!==Ta)throw Error(r(168));_n(zr,c),_n(Pi,v)}function gm(l,c,v){var x=l.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return v;x=x.getChildContext();for(var T in x)if(!(T in c))throw Error(r(108,be(l)||"Unknown",T));return U({},v,x)}function to(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ta,oi=zr.current,_n(zr,l),_n(Pi,Pi.current),!0}function pm(l,c,v){var x=l.stateNode;if(!x)throw Error(r(169));v?(l=gm(l,c,oi),x.__reactInternalMemoizedMergedChildContext=l,zn(Pi),zn(zr),_n(zr,l)):zn(Pi),_n(Pi,v)}var $s=null,Xh=!1,m0=!1;function mm(l){$s===null?$s=[l]:$s.push(l)}function yl(l){Xh=!0,mm(l)}function Da(){if(!m0&&$s!==null){m0=!0;var l=0,c=Mt;try{var v=$s;for(Mt=1;l<v.length;l++){var x=v[l];do x=x(!0);while(x!==null)}$s=null,Xh=!1}catch(T){throw $s!==null&&($s=$s.slice(l+1)),yh(ns,Da),T}finally{Mt=c,m0=!1}}return null}var ku=[],$r=0,Kh=null,qh=0,no=[],ro=0,wl=null,cs=1,fs="";function xl(l,c){ku[$r++]=qh,ku[$r++]=Kh,Kh=l,qh=c}function vm(l,c,v){no[ro++]=cs,no[ro++]=fs,no[ro++]=wl,wl=l;var x=cs;l=fs;var T=32-Fi(x)-1;x&=~(1<<T),v+=1;var B=32-Fi(c)+T;if(30<B){var $=T-T%5;B=(x&(1<<$)-1).toString(32),x>>=$,T-=$,cs=1<<32-Fi(c)+T|v<<T|x,fs=B+l}else cs=1<<B|v<<T|x,fs=l}function qc(l){l.return!==null&&(xl(l,1),vm(l,1,0))}function Cl(l){for(;l===Kh;)Kh=ku[--$r],ku[$r]=null,qh=ku[--$r],ku[$r]=null;for(;l===wl;)wl=no[--ro],no[ro]=null,fs=no[--ro],no[ro]=null,cs=no[--ro],no[ro]=null}var Wr=null,Hi=null,$n=!1,Oo=null;function hs(l,c){var v=co(5,null,null,0);v.elementType="DELETED",v.stateNode=c,v.return=l,c=l.deletions,c===null?(l.deletions=[v],l.flags|=16):c.push(v)}function Yh(l,c){switch(l.tag){case 5:var v=l.type;return c=c.nodeType!==1||v.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,Wr=l,Hi=Pa(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,Wr=l,Hi=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(v=wl!==null?{id:cs,overflow:fs}:null,l.memoizedState={dehydrated:c,treeContext:v,retryLane:1073741824},v=co(18,null,null,0),v.stateNode=c,v.return=l,l.child=v,Wr=l,Hi=null,!0):!1;default:return!1}}function Ws(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Ti(l){if($n){var c=Hi;if(c){var v=c;if(!Yh(l,c)){if(Ws(l))throw Error(r(418));c=Pa(v.nextSibling);var x=Wr;c&&Yh(l,c)?hs(x,v):(l.flags=l.flags&-4097|2,$n=!1,Wr=l)}}else{if(Ws(l))throw Error(r(418));l.flags=l.flags&-4097|2,$n=!1,Wr=l}}}function ym(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Wr=l}function Yc(l){if(l!==Wr)return!1;if(!$n)return ym(l),$n=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!Xc(l.type,l.memoizedProps)),c&&(c=Hi)){if(Ws(l))throw v0(),Error(r(418));for(;c;)hs(l,c),c=Pa(c.nextSibling)}if(ym(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"){if(c===0){Hi=Pa(l.nextSibling);break e}c--}else v!=="$"&&v!=="$!"&&v!=="$?"||c++}l=l.nextSibling}Hi=null}}else Hi=Wr?Pa(l.stateNode.nextSibling):null;return!0}function v0(){for(var l=Hi;l;)l=Pa(l.nextSibling)}function ds(){Hi=Wr=null,$n=!1}function gs(l){Oo===null?Oo=[l]:Oo.push(l)}var wm=R.ReactCurrentBatchConfig;function Zc(l,c,v){if(l=v.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(r(309));var x=v.stateNode}if(!x)throw Error(r(147,l));var T=x,B=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===B?c.ref:(c=function($){var te=T.refs;$===null?delete te[B]:te[B]=$},c._stringRef=B,c)}if(typeof l!="string")throw Error(r(284));if(!v._owner)throw Error(r(290,l))}return l}function El(l,c){throw l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function xm(l){var c=l._init;return c(l._payload)}function y0(l){function c(Te,pe){if(l){var Ae=Te.deletions;Ae===null?(Te.deletions=[pe],Te.flags|=16):Ae.push(pe)}}function v(Te,pe){if(!l)return null;for(;pe!==null;)c(Te,pe),pe=pe.sibling;return null}function x(Te,pe){for(Te=new Map;pe!==null;)pe.key!==null?Te.set(pe.key,pe):Te.set(pe.index,pe),pe=pe.sibling;return Te}function T(Te,pe){return Te=Go(Te,pe),Te.index=0,Te.sibling=null,Te}function B(Te,pe,Ae){return Te.index=Ae,l?(Ae=Te.alternate,Ae!==null?(Ae=Ae.index,Ae<pe?(Te.flags|=2,pe):Ae):(Te.flags|=2,pe)):(Te.flags|=1048576,pe)}function $(Te){return l&&Te.alternate===null&&(Te.flags|=2),Te}function te(Te,pe,Ae,Ye){return pe===null||pe.tag!==6?(pe=ip(Ae,Te.mode,Ye),pe.return=Te,pe):(pe=T(pe,Ae),pe.return=Te,pe)}function ce(Te,pe,Ae,Ye){var wt=Ae.type;return wt===Z?$e(Te,pe,Ae.props.children,Ye,Ae.key):pe!==null&&(pe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===O&&xm(wt)===pe.type)?(Ye=T(pe,Ae.props),Ye.ref=Zc(Te,pe,Ae),Ye.return=Te,Ye):(Ye=kd(Ae.type,Ae.key,Ae.props,null,Te.mode,Ye),Ye.ref=Zc(Te,pe,Ae),Ye.return=Te,Ye)}function Me(Te,pe,Ae,Ye){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ae.containerInfo||pe.stateNode.implementation!==Ae.implementation?(pe=op(Ae,Te.mode,Ye),pe.return=Te,pe):(pe=T(pe,Ae.children||[]),pe.return=Te,pe)}function $e(Te,pe,Ae,Ye,wt){return pe===null||pe.tag!==7?(pe=Ol(Ae,Te.mode,Ye,wt),pe.return=Te,pe):(pe=T(pe,Ae),pe.return=Te,pe)}function Ue(Te,pe,Ae){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return pe=ip(""+pe,Te.mode,Ae),pe.return=Te,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case L:return Ae=kd(pe.type,pe.key,pe.props,null,Te.mode,Ae),Ae.ref=Zc(Te,null,pe),Ae.return=Te,Ae;case V:return pe=op(pe,Te.mode,Ae),pe.return=Te,pe;case O:var Ye=pe._init;return Ue(Te,Ye(pe._payload),Ae)}if(Ot(pe)||j(pe))return pe=Ol(pe,Te.mode,Ae,null),pe.return=Te,pe;El(Te,pe)}return null}function ze(Te,pe,Ae,Ye){var wt=pe!==null?pe.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return wt!==null?null:te(Te,pe,""+Ae,Ye);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case L:return Ae.key===wt?ce(Te,pe,Ae,Ye):null;case V:return Ae.key===wt?Me(Te,pe,Ae,Ye):null;case O:return wt=Ae._init,ze(Te,pe,wt(Ae._payload),Ye)}if(Ot(Ae)||j(Ae))return wt!==null?null:$e(Te,pe,Ae,Ye,null);El(Te,Ae)}return null}function ot(Te,pe,Ae,Ye,wt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Te=Te.get(Ae)||null,te(pe,Te,""+Ye,wt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case L:return Te=Te.get(Ye.key===null?Ae:Ye.key)||null,ce(pe,Te,Ye,wt);case V:return Te=Te.get(Ye.key===null?Ae:Ye.key)||null,Me(pe,Te,Ye,wt);case O:var Rt=Ye._init;return ot(Te,pe,Ae,Rt(Ye._payload),wt)}if(Ot(Ye)||j(Ye))return Te=Te.get(Ae)||null,$e(pe,Te,Ye,wt,null);El(pe,Ye)}return null}function ht(Te,pe,Ae,Ye){for(var wt=null,Rt=null,At=pe,_t=pe=0,Pr=null;At!==null&&_t<Ae.length;_t++){At.index>_t?(Pr=At,At=null):Pr=At.sibling;var xn=ze(Te,At,Ae[_t],Ye);if(xn===null){At===null&&(At=Pr);break}l&&At&&xn.alternate===null&&c(Te,At),pe=B(xn,pe,_t),Rt===null?wt=xn:Rt.sibling=xn,Rt=xn,At=Pr}if(_t===Ae.length)return v(Te,At),$n&&xl(Te,_t),wt;if(At===null){for(;_t<Ae.length;_t++)At=Ue(Te,Ae[_t],Ye),At!==null&&(pe=B(At,pe,_t),Rt===null?wt=At:Rt.sibling=At,Rt=At);return $n&&xl(Te,_t),wt}for(At=x(Te,At);_t<Ae.length;_t++)Pr=ot(At,Te,_t,Ae[_t],Ye),Pr!==null&&(l&&Pr.alternate!==null&&At.delete(Pr.key===null?_t:Pr.key),pe=B(Pr,pe,_t),Rt===null?wt=Pr:Rt.sibling=Pr,Rt=Pr);return l&&At.forEach(function(Na){return c(Te,Na)}),$n&&xl(Te,_t),wt}function pt(Te,pe,Ae,Ye){var wt=j(Ae);if(typeof wt!="function")throw Error(r(150));if(Ae=wt.call(Ae),Ae==null)throw Error(r(151));for(var Rt=wt=null,At=pe,_t=pe=0,Pr=null,xn=Ae.next();At!==null&&!xn.done;_t++,xn=Ae.next()){At.index>_t?(Pr=At,At=null):Pr=At.sibling;var Na=ze(Te,At,xn.value,Ye);if(Na===null){At===null&&(At=Pr);break}l&&At&&Na.alternate===null&&c(Te,At),pe=B(Na,pe,_t),Rt===null?wt=Na:Rt.sibling=Na,Rt=Na,At=Pr}if(xn.done)return v(Te,At),$n&&xl(Te,_t),wt;if(At===null){for(;!xn.done;_t++,xn=Ae.next())xn=Ue(Te,xn.value,Ye),xn!==null&&(pe=B(xn,pe,_t),Rt===null?wt=xn:Rt.sibling=xn,Rt=xn);return $n&&xl(Te,_t),wt}for(At=x(Te,At);!xn.done;_t++,xn=Ae.next())xn=ot(At,Te,_t,xn.value,Ye),xn!==null&&(l&&xn.alternate!==null&&At.delete(xn.key===null?_t:xn.key),pe=B(xn,pe,_t),Rt===null?wt=xn:Rt.sibling=xn,Rt=xn);return l&&At.forEach(function(y2){return c(Te,y2)}),$n&&xl(Te,_t),wt}function sr(Te,pe,Ae,Ye){if(typeof Ae=="object"&&Ae!==null&&Ae.type===Z&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case L:e:{for(var wt=Ae.key,Rt=pe;Rt!==null;){if(Rt.key===wt){if(wt=Ae.type,wt===Z){if(Rt.tag===7){v(Te,Rt.sibling),pe=T(Rt,Ae.props.children),pe.return=Te,Te=pe;break e}}else if(Rt.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===O&&xm(wt)===Rt.type){v(Te,Rt.sibling),pe=T(Rt,Ae.props),pe.ref=Zc(Te,Rt,Ae),pe.return=Te,Te=pe;break e}v(Te,Rt);break}else c(Te,Rt);Rt=Rt.sibling}Ae.type===Z?(pe=Ol(Ae.props.children,Te.mode,Ye,Ae.key),pe.return=Te,Te=pe):(Ye=kd(Ae.type,Ae.key,Ae.props,null,Te.mode,Ye),Ye.ref=Zc(Te,pe,Ae),Ye.return=Te,Te=Ye)}return $(Te);case V:e:{for(Rt=Ae.key;pe!==null;){if(pe.key===Rt)if(pe.tag===4&&pe.stateNode.containerInfo===Ae.containerInfo&&pe.stateNode.implementation===Ae.implementation){v(Te,pe.sibling),pe=T(pe,Ae.children||[]),pe.return=Te,Te=pe;break e}else{v(Te,pe);break}else c(Te,pe);pe=pe.sibling}pe=op(Ae,Te.mode,Ye),pe.return=Te,Te=pe}return $(Te);case O:return Rt=Ae._init,sr(Te,pe,Rt(Ae._payload),Ye)}if(Ot(Ae))return ht(Te,pe,Ae,Ye);if(j(Ae))return pt(Te,pe,Ae,Ye);El(Te,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,pe!==null&&pe.tag===6?(v(Te,pe.sibling),pe=T(pe,Ae),pe.return=Te,Te=pe):(v(Te,pe),pe=ip(Ae,Te.mode,Ye),pe.return=Te,Te=pe),$(Te)):v(Te,pe)}return sr}var er=y0(!0),Zh=y0(!1),Qc=Ei(null),Gi=null,Aa=null,bu=null;function Vs(){bu=Aa=Gi=null}function Qh(l){var c=Qc.current;zn(Qc),l._currentValue=c}function Br(l,c,v){for(;l!==null;){var x=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),l===v)break;l=l.return}}function Ba(l,c){Gi=l,bu=Aa=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(ai=!0),l.firstContext=null)}function io(l){var c=l._currentValue;if(bu!==l)if(l={context:l,memoizedValue:c,next:null},Aa===null){if(Gi===null)throw Error(r(308));Aa=l,Gi.dependencies={lanes:0,firstContext:l}}else Aa=Aa.next=l;return c}var Pl=null;function w0(l){Pl===null?Pl=[l]:Pl.push(l)}function Jh(l,c,v,x){var T=c.interleaved;return T===null?(v.next=v,w0(c)):(v.next=T.next,T.next=v),c.interleaved=v,Us(l,x)}function Us(l,c){l.lanes|=c;var v=l.alternate;for(v!==null&&(v.lanes|=c),v=l,l=l.return;l!==null;)l.childLanes|=c,v=l.alternate,v!==null&&(v.childLanes|=c),v=l,l=l.return;return v.tag===3?v.stateNode:null}var oo=!1;function ed(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cm(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Xs(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function so(l,c,v){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(mn&2)!==0){var T=x.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),x.pending=c,Us(l,v)}return T=x.interleaved,T===null?(c.next=c,w0(x)):(c.next=T.next,T.next=c),x.interleaved=c,Us(l,v)}function td(l,c,v){if(c=c.updateQueue,c!==null&&(c=c.shared,(v&4194240)!==0)){var x=c.lanes;x&=l.pendingLanes,v|=x,c.lanes=v,ln(l,v)}}function Em(l,c){var v=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,v===x)){var T=null,B=null;if(v=v.firstBaseUpdate,v!==null){do{var $={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};B===null?T=B=$:B=B.next=$,v=v.next}while(v!==null);B===null?T=B=c:B=B.next=c}else T=B=c;v={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:B,shared:x.shared,effects:x.effects},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=c:l.next=c,v.lastBaseUpdate=c}function Ou(l,c,v,x){var T=l.updateQueue;oo=!1;var B=T.firstBaseUpdate,$=T.lastBaseUpdate,te=T.shared.pending;if(te!==null){T.shared.pending=null;var ce=te,Me=ce.next;ce.next=null,$===null?B=Me:$.next=Me,$=ce;var $e=l.alternate;$e!==null&&($e=$e.updateQueue,te=$e.lastBaseUpdate,te!==$&&(te===null?$e.firstBaseUpdate=Me:te.next=Me,$e.lastBaseUpdate=ce))}if(B!==null){var Ue=T.baseState;$=0,$e=Me=ce=null,te=B;do{var ze=te.lane,ot=te.eventTime;if((x&ze)===ze){$e!==null&&($e=$e.next={eventTime:ot,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var ht=l,pt=te;switch(ze=c,ot=v,pt.tag){case 1:if(ht=pt.payload,typeof ht=="function"){Ue=ht.call(ot,Ue,ze);break e}Ue=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=pt.payload,ze=typeof ht=="function"?ht.call(ot,Ue,ze):ht,ze==null)break e;Ue=U({},Ue,ze);break e;case 2:oo=!0}}te.callback!==null&&te.lane!==0&&(l.flags|=64,ze=T.effects,ze===null?T.effects=[te]:ze.push(te))}else ot={eventTime:ot,lane:ze,tag:te.tag,payload:te.payload,callback:te.callback,next:null},$e===null?(Me=$e=ot,ce=Ue):$e=$e.next=ot,$|=ze;if(te=te.next,te===null){if(te=T.shared.pending,te===null)break;ze=te,te=ze.next,ze.next=null,T.lastBaseUpdate=ze,T.shared.pending=null}}while(!0);if($e===null&&(ce=Ue),T.baseState=ce,T.firstBaseUpdate=Me,T.lastBaseUpdate=$e,c=T.shared.interleaved,c!==null){T=c;do $|=T.lane,T=T.next;while(T!==c)}else B===null&&(T.shared.lanes=0);Oa|=$,l.lanes=$,l.memoizedState=Ue}}function x0(l,c,v){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var x=l[c],T=x.callback;if(T!==null){if(x.callback=null,x=v,typeof T!="function")throw Error(r(191,T));T.call(x)}}}var Jc={},ps=Ei(Jc),ef=Ei(Jc),Iu=Ei(Jc);function Ks(l){if(l===Jc)throw Error(r(174));return l}function C0(l,c){switch(_n(Iu,c),_n(ef,l),_n(ps,Jc),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:mr(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=mr(c,l)}zn(ps),_n(ps,c)}function Ma(){zn(ps),zn(ef),zn(Iu)}function E0(l){Ks(Iu.current);var c=Ks(ps.current),v=mr(c,l.type);c!==v&&(_n(ef,l),_n(ps,v))}function nd(l){ef.current===l&&(zn(ps),zn(ef))}var Un=Ei(0);function Sl(l){for(var c=l;c!==null;){if(c.tag===13){var v=c.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var P0=[];function rd(){for(var l=0;l<P0.length;l++)P0[l]._workInProgressVersionPrimary=null;P0.length=0}var tf=R.ReactCurrentDispatcher,S0=R.ReactCurrentBatchConfig,Ra=0,qn=null,or=null,vr=null,Fu=!1,nf=!1,Tl=0,Jt=0;function Vr(){throw Error(r(321))}function T0(l,c){if(c===null)return!1;for(var v=0;v<c.length&&v<l.length;v++)if(!Be(l[v],c[v]))return!1;return!0}function Dl(l,c,v,x,T,B){if(Ra=B,qn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,tf.current=l===null||l.memoizedState===null?Jw:cd,l=v(x,T),nf){B=0;do{if(nf=!1,Tl=0,25<=B)throw Error(r(301));B+=1,vr=or=null,c.updateQueue=null,tf.current=Hu,l=v(x,T)}while(nf)}if(tf.current=ud,c=or!==null&&or.next!==null,Ra=0,vr=or=qn=null,Fu=!1,c)throw Error(r(300));return l}function id(){var l=Tl!==0;return Tl=0,l}function ms(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?qn.memoizedState=vr=l:vr=vr.next=l,vr}function ao(){if(or===null){var l=qn.alternate;l=l!==null?l.memoizedState:null}else l=or.next;var c=vr===null?qn.memoizedState:vr.next;if(c!==null)vr=c,or=l;else{if(l===null)throw Error(r(310));or=l,l={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},vr===null?qn.memoizedState=vr=l:vr=vr.next=l}return vr}function Ur(l,c){return typeof c=="function"?c(l):c}function D0(l){var c=ao(),v=c.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=l;var x=or,T=x.baseQueue,B=v.pending;if(B!==null){if(T!==null){var $=T.next;T.next=B.next,B.next=$}x.baseQueue=T=B,v.pending=null}if(T!==null){B=T.next,x=x.baseState;var te=$=null,ce=null,Me=B;do{var $e=Me.lane;if((Ra&$e)===$e)ce!==null&&(ce=ce.next={lane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),x=Me.hasEagerState?Me.eagerState:l(x,Me.action);else{var Ue={lane:$e,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};ce===null?(te=ce=Ue,$=x):ce=ce.next=Ue,qn.lanes|=$e,Oa|=$e}Me=Me.next}while(Me!==null&&Me!==B);ce===null?$=x:ce.next=te,Be(x,c.memoizedState)||(ai=!0),c.memoizedState=x,c.baseState=$,c.baseQueue=ce,v.lastRenderedState=x}if(l=v.interleaved,l!==null){T=l;do B=T.lane,qn.lanes|=B,Oa|=B,T=T.next;while(T!==l)}else T===null&&(v.lanes=0);return[c.memoizedState,v.dispatch]}function Lu(l){var c=ao(),v=c.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=l;var x=v.dispatch,T=v.pending,B=c.memoizedState;if(T!==null){v.pending=null;var $=T=T.next;do B=l(B,$.action),$=$.next;while($!==T);Be(B,c.memoizedState)||(ai=!0),c.memoizedState=B,c.baseQueue===null&&(c.baseState=B),v.lastRenderedState=B}return[B,x]}function od(){}function A0(l,c){var v=qn,x=ao(),T=c(),B=!Be(x.memoizedState,T);if(B&&(x.memoizedState=T,ai=!0),x=x.queue,vs(qs.bind(null,v,x,l),[l]),x.getSnapshot!==c||B||vr!==null&&vr.memoizedState.tag&1){if(v.flags|=2048,_u(9,Di.bind(null,v,x,T,c),void 0,null),Er===null)throw Error(r(349));(Ra&30)!==0||B0(v,c,T)}return T}function B0(l,c,v){l.flags|=16384,l={getSnapshot:c,value:v},c=qn.updateQueue,c===null?(c={lastEffect:null,stores:null},qn.updateQueue=c,c.stores=[l]):(v=c.stores,v===null?c.stores=[l]:v.push(l))}function Di(l,c,v,x){c.value=v,c.getSnapshot=x,sd(c)&&M0(l)}function qs(l,c,v){return v(function(){sd(c)&&M0(l)})}function sd(l){var c=l.getSnapshot;l=l.value;try{var v=c();return!Be(l,v)}catch{return!0}}function M0(l){var c=Us(l,1);c!==null&&Ho(c,l,1,-1)}function rf(l){var c=ms();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:l},c.queue=l,l=l.dispatch=Bm.bind(null,qn,l),[c.memoizedState,l]}function _u(l,c,v,x){return l={tag:l,create:c,destroy:v,deps:x,next:null},c=qn.updateQueue,c===null?(c={lastEffect:null,stores:null},qn.updateQueue=c,c.lastEffect=l.next=l):(v=c.lastEffect,v===null?c.lastEffect=l.next=l:(x=v.next,v.next=l,l.next=x,c.lastEffect=l)),l}function ad(){return ao().memoizedState}function of(l,c,v,x){var T=ms();qn.flags|=l,T.memoizedState=_u(1|c,v,void 0,x===void 0?null:x)}function Nu(l,c,v,x){var T=ao();x=x===void 0?null:x;var B=void 0;if(or!==null){var $=or.memoizedState;if(B=$.destroy,x!==null&&T0(x,$.deps)){T.memoizedState=_u(c,v,B,x);return}}qn.flags|=l,T.memoizedState=_u(1|c,v,B,x)}function ld(l,c){return of(8390656,8,l,c)}function vs(l,c){return Nu(2048,8,l,c)}function Pm(l,c){return Nu(4,2,l,c)}function Ys(l,c){return Nu(4,4,l,c)}function R0(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function k0(l,c,v){return v=v!=null?v.concat([l]):null,Nu(4,4,R0.bind(null,c,l),v)}function sf(){}function Sm(l,c){var v=ao();c=c===void 0?null:c;var x=v.memoizedState;return x!==null&&c!==null&&T0(c,x[1])?x[0]:(v.memoizedState=[l,c],l)}function Tm(l,c){var v=ao();c=c===void 0?null:c;var x=v.memoizedState;return x!==null&&c!==null&&T0(c,x[1])?x[0]:(l=l(),v.memoizedState=[l,c],l)}function Dm(l,c,v){return(Ra&21)===0?(l.baseState&&(l.baseState=!1,ai=!0),l.memoizedState=v):(Be(v,c)||(v=et(),qn.lanes|=v,Oa|=v,l.baseState=!0),c)}function Am(l,c){var v=Mt;Mt=v!==0&&4>v?v:4,l(!0);var x=S0.transition;S0.transition={};try{l(!1),c()}finally{Mt=v,S0.transition=x}}function b0(){return ao().memoizedState}function Qw(l,c,v){var x=La(l);if(v={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null},O0(l))si(c,v);else if(v=Jh(l,c,v,x),v!==null){var T=ci();Ho(v,l,x,T),Io(v,c,x)}}function Bm(l,c,v){var x=La(l),T={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null};if(O0(l))si(c,T);else{var B=l.alternate;if(l.lanes===0&&(B===null||B.lanes===0)&&(B=c.lastRenderedReducer,B!==null))try{var $=c.lastRenderedState,te=B($,v);if(T.hasEagerState=!0,T.eagerState=te,Be(te,$)){var ce=c.interleaved;ce===null?(T.next=T,w0(c)):(T.next=ce.next,ce.next=T),c.interleaved=T;return}}catch{}finally{}v=Jh(l,c,T,x),v!==null&&(T=ci(),Ho(v,l,x,T),Io(v,c,x))}}function O0(l){var c=l.alternate;return l===qn||c!==null&&c===qn}function si(l,c){nf=Fu=!0;var v=l.pending;v===null?c.next=c:(c.next=v.next,v.next=c),l.pending=c}function Io(l,c,v){if((v&4194240)!==0){var x=c.lanes;x&=l.pendingLanes,v|=x,c.lanes=v,ln(l,v)}}var ud={readContext:io,useCallback:Vr,useContext:Vr,useEffect:Vr,useImperativeHandle:Vr,useInsertionEffect:Vr,useLayoutEffect:Vr,useMemo:Vr,useReducer:Vr,useRef:Vr,useState:Vr,useDebugValue:Vr,useDeferredValue:Vr,useTransition:Vr,useMutableSource:Vr,useSyncExternalStore:Vr,useId:Vr,unstable_isNewReconciler:!1},Jw={readContext:io,useCallback:function(l,c){return ms().memoizedState=[l,c===void 0?null:c],l},useContext:io,useEffect:ld,useImperativeHandle:function(l,c,v){return v=v!=null?v.concat([l]):null,of(4194308,4,R0.bind(null,c,l),v)},useLayoutEffect:function(l,c){return of(4194308,4,l,c)},useInsertionEffect:function(l,c){return of(4,2,l,c)},useMemo:function(l,c){var v=ms();return c=c===void 0?null:c,l=l(),v.memoizedState=[l,c],l},useReducer:function(l,c,v){var x=ms();return c=v!==void 0?v(c):c,x.memoizedState=x.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},x.queue=l,l=l.dispatch=Qw.bind(null,qn,l),[x.memoizedState,l]},useRef:function(l){var c=ms();return l={current:l},c.memoizedState=l},useState:rf,useDebugValue:sf,useDeferredValue:function(l){return ms().memoizedState=l},useTransition:function(){var l=rf(!1),c=l[0];return l=Am.bind(null,l[1]),ms().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,v){var x=qn,T=ms();if($n){if(v===void 0)throw Error(r(407));v=v()}else{if(v=c(),Er===null)throw Error(r(349));(Ra&30)!==0||B0(x,c,v)}T.memoizedState=v;var B={value:v,getSnapshot:c};return T.queue=B,ld(qs.bind(null,x,B,l),[l]),x.flags|=2048,_u(9,Di.bind(null,x,B,v,c),void 0,null),v},useId:function(){var l=ms(),c=Er.identifierPrefix;if($n){var v=fs,x=cs;v=(x&~(1<<32-Fi(x)-1)).toString(32)+v,c=":"+c+"R"+v,v=Tl++,0<v&&(c+="H"+v.toString(32)),c+=":"}else v=Jt++,c=":"+c+"r"+v.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},cd={readContext:io,useCallback:Sm,useContext:io,useEffect:vs,useImperativeHandle:k0,useInsertionEffect:Pm,useLayoutEffect:Ys,useMemo:Tm,useReducer:D0,useRef:ad,useState:function(){return D0(Ur)},useDebugValue:sf,useDeferredValue:function(l){var c=ao();return Dm(c,or.memoizedState,l)},useTransition:function(){var l=D0(Ur)[0],c=ao().memoizedState;return[l,c]},useMutableSource:od,useSyncExternalStore:A0,useId:b0,unstable_isNewReconciler:!1},Hu={readContext:io,useCallback:Sm,useContext:io,useEffect:vs,useImperativeHandle:k0,useInsertionEffect:Pm,useLayoutEffect:Ys,useMemo:Tm,useReducer:Lu,useRef:ad,useState:function(){return Lu(Ur)},useDebugValue:sf,useDeferredValue:function(l){var c=ao();return or===null?c.memoizedState=l:Dm(c,or.memoizedState,l)},useTransition:function(){var l=Lu(Ur)[0],c=ao().memoizedState;return[l,c]},useMutableSource:od,useSyncExternalStore:A0,useId:b0,unstable_isNewReconciler:!1};function lo(l,c){if(l&&l.defaultProps){c=U({},c),l=l.defaultProps;for(var v in l)c[v]===void 0&&(c[v]=l[v]);return c}return c}function fd(l,c,v,x){c=l.memoizedState,v=v(x,c),v=v==null?c:U({},c,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var hd={isMounted:function(l){return(l=l._reactInternals)?Ns(l)===l:!1},enqueueSetState:function(l,c,v){l=l._reactInternals;var x=ci(),T=La(l),B=Xs(x,T);B.payload=c,v!=null&&(B.callback=v),c=so(l,B,T),c!==null&&(Ho(c,l,T,x),td(c,l,T))},enqueueReplaceState:function(l,c,v){l=l._reactInternals;var x=ci(),T=La(l),B=Xs(x,T);B.tag=1,B.payload=c,v!=null&&(B.callback=v),c=so(l,B,T),c!==null&&(Ho(c,l,T,x),td(c,l,T))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var v=ci(),x=La(l),T=Xs(v,x);T.tag=2,c!=null&&(T.callback=c),c=so(l,T,x),c!==null&&(Ho(c,l,x,v),td(c,l,x))}};function I0(l,c,v,x,T,B,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,B,$):c.prototype&&c.prototype.isPureReactComponent?!it(v,x)||!it(T,B):!0}function Al(l,c,v){var x=!1,T=Ta,B=c.contextType;return typeof B=="object"&&B!==null?B=io(B):(T=Si(c)?oi:zr.current,x=c.contextTypes,B=(x=x!=null)?Ru(l,T):Ta),c=new c(v,B),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=hd,l.stateNode=c,c._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=T,l.__reactInternalMemoizedMaskedChildContext=B),c}function Gu(l,c,v,x){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(v,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(v,x),c.state!==l&&hd.enqueueReplaceState(c,c.state,null)}function F0(l,c,v,x){var T=l.stateNode;T.props=v,T.state=l.memoizedState,T.refs={},ed(l);var B=c.contextType;typeof B=="object"&&B!==null?T.context=io(B):(B=Si(c)?oi:zr.current,T.context=Ru(l,B)),T.state=l.memoizedState,B=c.getDerivedStateFromProps,typeof B=="function"&&(fd(l,c,B,v),T.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&hd.enqueueReplaceState(T,T.state,null),Ou(l,v,T,x),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308)}function Bl(l,c){try{var v="",x=c;do v+=Ee(x),x=x.return;while(x);var T=v}catch(B){T=`
Error generating stack: `+B.message+`
`+B.stack}return{value:l,source:c,stack:T,digest:null}}function dd(l,c,v){return{value:l,source:null,stack:v??null,digest:c??null}}function ju(l,c){try{console.error(c.value)}catch(v){setTimeout(function(){throw v})}}var Mm=typeof WeakMap=="function"?WeakMap:Map;function af(l,c,v){v=Xs(-1,v),v.tag=3,v.payload={element:null};var x=c.value;return v.callback=function(){Sd||(Sd=!0,Z0=x),ju(l,c)},v}function gd(l,c,v){v=Xs(-1,v),v.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var T=c.value;v.payload=function(){return x(T)},v.callback=function(){ju(l,c)}}var B=l.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(v.callback=function(){ju(l,c),typeof x!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var $=c.stack;this.componentDidCatch(c.value,{componentStack:$!==null?$:""})}),v}function lf(l,c,v){var x=l.pingCache;if(x===null){x=l.pingCache=new Mm;var T=new Set;x.set(c,T)}else T=x.get(c),T===void 0&&(T=new Set,x.set(c,T));T.has(v)||(T.add(v),l=a2.bind(null,l,c,v),c.then(l,l))}function Rm(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function L0(l,c,v,x,T){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(c=Xs(-1,1),c.tag=2,so(v,c,1))),v.lanes|=1),l):(l.flags|=65536,l.lanes=T,l)}var pd=R.ReactCurrentOwner,ai=!1;function Mr(l,c,v,x){c.child=l===null?Zh(c,null,v,x):er(c,l.child,v,x)}function km(l,c,v,x,T){v=v.render;var B=c.ref;return Ba(c,T),x=Dl(l,c,v,x,B,T),v=id(),l!==null&&!ai?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,Fo(l,c,T)):($n&&v&&qc(c),c.flags|=1,Mr(l,c,x,T),c.child)}function _0(l,c,v,x,T){if(l===null){var B=v.type;return typeof B=="function"&&!Rd(B)&&B.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(c.tag=15,c.type=B,ys(l,c,B,x,T)):(l=kd(v.type,null,x,c,c.mode,T),l.ref=c.ref,l.return=c,c.child=l)}if(B=l.child,(l.lanes&T)===0){var $=B.memoizedProps;if(v=v.compare,v=v!==null?v:it,v($,x)&&l.ref===c.ref)return Fo(l,c,T)}return c.flags|=1,l=Go(B,x),l.ref=c.ref,l.return=c,c.child=l}function ys(l,c,v,x,T){if(l!==null){var B=l.memoizedProps;if(it(B,x)&&l.ref===c.ref)if(ai=!1,c.pendingProps=x=B,(l.lanes&T)!==0)(l.flags&131072)!==0&&(ai=!0);else return c.lanes=l.lanes,Fo(l,c,T)}return G0(l,c,v,x,T)}function N0(l,c,v){var x=c.pendingProps,T=x.children,B=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Vu,zi),zi|=v;else{if((v&1073741824)===0)return l=B!==null?B.baseLanes|v:v,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,_n(Vu,zi),zi|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=B!==null?B.baseLanes:v,_n(Vu,zi),zi|=x}else B!==null?(x=B.baseLanes|v,c.memoizedState=null):x=v,_n(Vu,zi),zi|=x;return Mr(l,c,T,v),c.child}function H0(l,c){var v=c.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(c.flags|=512,c.flags|=2097152)}function G0(l,c,v,x,T){var B=Si(v)?oi:zr.current;return B=Ru(c,B),Ba(c,T),v=Dl(l,c,v,x,B,T),x=id(),l!==null&&!ai?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,Fo(l,c,T)):($n&&x&&qc(c),c.flags|=1,Mr(l,c,v,T),c.child)}function j0(l,c,v,x,T){if(Si(v)){var B=!0;to(c)}else B=!1;if(Ba(c,T),c.stateNode===null)vd(l,c),Al(c,v,x),F0(c,v,x,T),x=!0;else if(l===null){var $=c.stateNode,te=c.memoizedProps;$.props=te;var ce=$.context,Me=v.contextType;typeof Me=="object"&&Me!==null?Me=io(Me):(Me=Si(v)?oi:zr.current,Me=Ru(c,Me));var $e=v.getDerivedStateFromProps,Ue=typeof $e=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ue||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(te!==x||ce!==Me)&&Gu(c,$,x,Me),oo=!1;var ze=c.memoizedState;$.state=ze,Ou(c,x,$,T),ce=c.memoizedState,te!==x||ze!==ce||Pi.current||oo?(typeof $e=="function"&&(fd(c,v,$e,x),ce=c.memoizedState),(te=oo||I0(c,v,te,x,ze,ce,Me))?(Ue||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(c.flags|=4194308)):(typeof $.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=ce),$.props=x,$.state=ce,$.context=Me,x=te):(typeof $.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{$=c.stateNode,Cm(l,c),te=c.memoizedProps,Me=c.type===c.elementType?te:lo(c.type,te),$.props=Me,Ue=c.pendingProps,ze=$.context,ce=v.contextType,typeof ce=="object"&&ce!==null?ce=io(ce):(ce=Si(v)?oi:zr.current,ce=Ru(c,ce));var ot=v.getDerivedStateFromProps;($e=typeof ot=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(te!==Ue||ze!==ce)&&Gu(c,$,x,ce),oo=!1,ze=c.memoizedState,$.state=ze,Ou(c,x,$,T);var ht=c.memoizedState;te!==Ue||ze!==ht||Pi.current||oo?(typeof ot=="function"&&(fd(c,v,ot,x),ht=c.memoizedState),(Me=oo||I0(c,v,Me,x,ze,ht,ce)||!1)?($e||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(x,ht,ce),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(x,ht,ce)),typeof $.componentDidUpdate=="function"&&(c.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof $.componentDidUpdate!="function"||te===l.memoizedProps&&ze===l.memoizedState||(c.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===l.memoizedProps&&ze===l.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=ht),$.props=x,$.state=ht,$.context=ce,x=Me):(typeof $.componentDidUpdate!="function"||te===l.memoizedProps&&ze===l.memoizedState||(c.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===l.memoizedProps&&ze===l.memoizedState||(c.flags|=1024),x=!1)}return z0(l,c,v,x,B,T)}function z0(l,c,v,x,T,B){H0(l,c);var $=(c.flags&128)!==0;if(!x&&!$)return T&&pm(c,v,!1),Fo(l,c,B);x=c.stateNode,pd.current=c;var te=$&&typeof v.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,l!==null&&$?(c.child=er(c,l.child,null,B),c.child=er(c,null,te,B)):Mr(l,c,te,B),c.memoizedState=x.state,T&&pm(c,v,!0),c.child}function bm(l){var c=l.stateNode;c.pendingContext?dm(l,c.pendingContext,c.pendingContext!==c.context):c.context&&dm(l,c.context,!1),C0(l,c.containerInfo)}function ws(l,c,v,x,T){return ds(),gs(T),c.flags|=256,Mr(l,c,v,x),c.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(l){return{baseLanes:l,cachePool:null,transitions:null}}function md(l,c,v){var x=c.pendingProps,T=Un.current,B=!1,$=(c.flags&128)!==0,te;if((te=$)||(te=l!==null&&l.memoizedState===null?!1:(T&2)!==0),te?(B=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(T|=1),_n(Un,T&1),l===null)return Ti(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):($=x.children,l=x.fallback,B?(x=c.mode,B=c.child,$={mode:"hidden",children:$},(x&1)===0&&B!==null?(B.childLanes=0,B.pendingProps=$):B=bd($,x,0,null),l=Ol(l,x,v,null),B.return=c,l.return=c,B.sibling=l,c.child=B,c.child.memoizedState=cf(v),c.memoizedState=uf,l):zu(c,$));if(T=l.memoizedState,T!==null&&(te=T.dehydrated,te!==null))return kt(l,c,$,x,te,T,v);if(B){B=x.fallback,$=c.mode,T=l.child,te=T.sibling;var ce={mode:"hidden",children:x.children};return($&1)===0&&c.child!==T?(x=c.child,x.childLanes=0,x.pendingProps=ce,c.deletions=null):(x=Go(T,ce),x.subtreeFlags=T.subtreeFlags&14680064),te!==null?B=Go(te,B):(B=Ol(B,$,v,null),B.flags|=2),B.return=c,x.return=c,x.sibling=B,c.child=x,x=B,B=c.child,$=l.child.memoizedState,$=$===null?cf(v):{baseLanes:$.baseLanes|v,cachePool:null,transitions:$.transitions},B.memoizedState=$,B.childLanes=l.childLanes&~v,c.memoizedState=uf,x}return B=l.child,l=B.sibling,x=Go(B,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=v),x.return=c,x.sibling=null,l!==null&&(v=c.deletions,v===null?(c.deletions=[l],c.flags|=16):v.push(l)),c.child=x,c.memoizedState=null,x}function zu(l,c){return c=bd({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function Zs(l,c,v,x){return x!==null&&gs(x),er(c,l.child,null,v),l=zu(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function kt(l,c,v,x,T,B,$){if(v)return c.flags&256?(c.flags&=-257,x=dd(Error(r(422))),Zs(l,c,$,x)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(B=x.fallback,T=c.mode,x=bd({mode:"visible",children:x.children},T,0,null),B=Ol(B,T,$,null),B.flags|=2,x.return=c,B.return=c,x.sibling=B,c.child=x,(c.mode&1)!==0&&er(c,l.child,null,$),c.child.memoizedState=cf($),c.memoizedState=uf,B);if((c.mode&1)===0)return Zs(l,c,$,null);if(T.data==="$!"){if(x=T.nextSibling&&T.nextSibling.dataset,x)var te=x.dgst;return x=te,B=Error(r(419)),x=dd(B,x,void 0),Zs(l,c,$,x)}if(te=($&l.childLanes)!==0,ai||te){if(x=Er,x!==null){switch($&-$){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(x.suspendedLanes|$))!==0?0:T,T!==0&&T!==B.retryLane&&(B.retryLane=T,Us(l,T),Ho(x,l,T,-1))}return rp(),x=dd(Error(r(421))),Zs(l,c,$,x)}return T.data==="$?"?(c.flags|=128,c.child=l.child,c=l2.bind(null,l),T._reactRetry=c,null):(l=B.treeContext,Hi=Pa(T.nextSibling),Wr=c,$n=!0,Oo=null,l!==null&&(no[ro++]=cs,no[ro++]=fs,no[ro++]=wl,cs=l.id,fs=l.overflow,wl=c),c=zu(c,x.children),c.flags|=4096,c)}function ff(l,c,v){l.lanes|=c;var x=l.alternate;x!==null&&(x.lanes|=c),Br(l.return,c,v)}function hf(l,c,v,x,T){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:T}:(B.isBackwards=c,B.rendering=null,B.renderingStartTime=0,B.last=x,B.tail=v,B.tailMode=T)}function ka(l,c,v){var x=c.pendingProps,T=x.revealOrder,B=x.tail;if(Mr(l,c,x.children,v),x=Un.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&ff(l,v,c);else if(l.tag===19)ff(l,v,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(_n(Un,x),(c.mode&1)===0)c.memoizedState=null;else switch(T){case"forwards":for(v=c.child,T=null;v!==null;)l=v.alternate,l!==null&&Sl(l)===null&&(T=v),v=v.sibling;v=T,v===null?(T=c.child,c.child=null):(T=v.sibling,v.sibling=null),hf(c,!1,T,v,B);break;case"backwards":for(v=null,T=c.child,c.child=null;T!==null;){if(l=T.alternate,l!==null&&Sl(l)===null){c.child=T;break}l=T.sibling,T.sibling=v,v=T,T=l}hf(c,!0,v,null,B);break;case"together":hf(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function vd(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Fo(l,c,v){if(l!==null&&(c.dependencies=l.dependencies),Oa|=c.lanes,(v&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,v=Go(l,l.pendingProps),c.child=v,v.return=c;l.sibling!==null;)l=l.sibling,v=v.sibling=Go(l,l.pendingProps),v.return=c;v.sibling=null}return c.child}function Om(l,c,v){switch(c.tag){case 3:bm(c),ds();break;case 5:E0(c);break;case 1:Si(c.type)&&to(c);break;case 4:C0(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,T=c.memoizedProps.value;_n(Qc,x._currentValue),x._currentValue=T;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(_n(Un,Un.current&1),c.flags|=128,null):(v&c.child.childLanes)!==0?md(l,c,v):(_n(Un,Un.current&1),l=Fo(l,c,v),l!==null?l.sibling:null);_n(Un,Un.current&1);break;case 19:if(x=(v&c.childLanes)!==0,(l.flags&128)!==0){if(x)return ka(l,c,v);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),_n(Un,Un.current),x)break;return null;case 22:case 23:return c.lanes=0,N0(l,c,v)}return Fo(l,c,v)}var Rr,$0,Im,W0;Rr=function(l,c){for(var v=c.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},$0=function(){},Im=function(l,c,v,x){var T=l.memoizedProps;if(T!==x){l=c.stateNode,Ks(ps.current);var B=null;switch(v){case"input":T=Ne(l,T),x=Ne(l,x),B=[];break;case"select":T=U({},T,{value:void 0}),x=U({},x,{value:void 0}),B=[];break;case"textarea":T=Ut(l,T),x=Ut(l,x),B=[];break;default:typeof T.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=zh)}Ro(v,x);var $;v=null;for(Me in T)if(!x.hasOwnProperty(Me)&&T.hasOwnProperty(Me)&&T[Me]!=null)if(Me==="style"){var te=T[Me];for($ in te)te.hasOwnProperty($)&&(v||(v={}),v[$]="")}else Me!=="dangerouslySetInnerHTML"&&Me!=="children"&&Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&Me!=="autoFocus"&&(o.hasOwnProperty(Me)?B||(B=[]):(B=B||[]).push(Me,null));for(Me in x){var ce=x[Me];if(te=T!=null?T[Me]:void 0,x.hasOwnProperty(Me)&&ce!==te&&(ce!=null||te!=null))if(Me==="style")if(te){for($ in te)!te.hasOwnProperty($)||ce&&ce.hasOwnProperty($)||(v||(v={}),v[$]="");for($ in ce)ce.hasOwnProperty($)&&te[$]!==ce[$]&&(v||(v={}),v[$]=ce[$])}else v||(B||(B=[]),B.push(Me,v)),v=ce;else Me==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,te=te?te.__html:void 0,ce!=null&&te!==ce&&(B=B||[]).push(Me,ce)):Me==="children"?typeof ce!="string"&&typeof ce!="number"||(B=B||[]).push(Me,""+ce):Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&(o.hasOwnProperty(Me)?(ce!=null&&Me==="onScroll"&&jn("scroll",l),B||te===ce||(B=[])):(B=B||[]).push(Me,ce))}v&&(B=B||[]).push("style",v);var Me=B;(c.updateQueue=Me)&&(c.flags|=4)}},W0=function(l,c,v,x){v!==x&&(c.flags|=4)};function df(l,c){if(!$n)switch(l.tailMode){case"hidden":c=l.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function kr(l){var c=l.alternate!==null&&l.alternate.child===l.child,v=0,x=0;if(c)for(var T=l.child;T!==null;)v|=T.lanes|T.childLanes,x|=T.subtreeFlags&14680064,x|=T.flags&14680064,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)v|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=x,l.childLanes=v,c}function e2(l,c,v){var x=c.pendingProps;switch(Cl(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(c),null;case 1:return Si(c.type)&&Uh(),kr(c),null;case 3:return x=c.stateNode,Ma(),zn(Pi),zn(zr),rd(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(Yc(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Oo!==null&&(ep(Oo),Oo=null))),$0(l,c),kr(c),null;case 5:nd(c);var T=Ks(Iu.current);if(v=c.type,l!==null&&c.stateNode!=null)Im(l,c,v,x,T),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(r(166));return kr(c),null}if(l=Ks(ps.current),Yc(c)){x=c.stateNode,v=c.type;var B=c.memoizedProps;switch(x[ls]=c,x[Sa]=B,l=(c.mode&1)!==0,v){case"dialog":jn("cancel",x),jn("close",x);break;case"iframe":case"object":case"embed":jn("load",x);break;case"video":case"audio":for(T=0;T<zs.length;T++)jn(zs[T],x);break;case"source":jn("error",x);break;case"img":case"image":case"link":jn("error",x),jn("load",x);break;case"details":jn("toggle",x);break;case"input":yt(x,B),jn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!B.multiple},jn("invalid",x);break;case"textarea":Gn(x,B),jn("invalid",x)}Ro(v,B),T=null;for(var $ in B)if(B.hasOwnProperty($)){var te=B[$];$==="children"?typeof te=="string"?x.textContent!==te&&(B.suppressHydrationWarning!==!0&&Vc(x.textContent,te,l),T=["children",te]):typeof te=="number"&&x.textContent!==""+te&&(B.suppressHydrationWarning!==!0&&Vc(x.textContent,te,l),T=["children",""+te]):o.hasOwnProperty($)&&te!=null&&$==="onScroll"&&jn("scroll",x)}switch(v){case"input":Re(x),St(x,B,!0);break;case"textarea":Re(x),Fn(x);break;case"select":case"option":break;default:typeof B.onClick=="function"&&(x.onclick=zh)}x=T,c.updateQueue=x,x!==null&&(c.flags|=4)}else{$=T.nodeType===9?T:T.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=wi(v)),l==="http://www.w3.org/1999/xhtml"?v==="script"?(l=$.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=$.createElement(v,{is:x.is}):(l=$.createElement(v),v==="select"&&($=l,x.multiple?$.multiple=!0:x.size&&($.size=x.size))):l=$.createElementNS(l,v),l[ls]=c,l[Sa]=x,Rr(l,c,!1,!1),c.stateNode=l;e:{switch($=Zi(v,x),v){case"dialog":jn("cancel",l),jn("close",l),T=x;break;case"iframe":case"object":case"embed":jn("load",l),T=x;break;case"video":case"audio":for(T=0;T<zs.length;T++)jn(zs[T],l);T=x;break;case"source":jn("error",l),T=x;break;case"img":case"image":case"link":jn("error",l),jn("load",l),T=x;break;case"details":jn("toggle",l),T=x;break;case"input":yt(l,x),T=Ne(l,x),jn("invalid",l);break;case"option":T=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},T=U({},x,{value:void 0}),jn("invalid",l);break;case"textarea":Gn(l,x),T=Ut(l,x),jn("invalid",l);break;default:T=x}Ro(v,T),te=T;for(B in te)if(te.hasOwnProperty(B)){var ce=te[B];B==="style"?Mo(l,ce):B==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&In(l,ce)):B==="children"?typeof ce=="string"?(v!=="textarea"||ce!=="")&&_r(l,ce):typeof ce=="number"&&_r(l,""+ce):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?ce!=null&&B==="onScroll"&&jn("scroll",l):ce!=null&&b(l,B,ce,$))}switch(v){case"input":Re(l),St(l,x,!1);break;case"textarea":Re(l),Fn(l);break;case"option":x.value!=null&&l.setAttribute("value",""+Oe(x.value));break;case"select":l.multiple=!!x.multiple,B=x.value,B!=null?mt(l,!!x.multiple,B,!1):x.defaultValue!=null&&mt(l,!!x.multiple,x.defaultValue,!0);break;default:typeof T.onClick=="function"&&(l.onclick=zh)}switch(v){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return kr(c),null;case 6:if(l&&c.stateNode!=null)W0(l,c,l.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(r(166));if(v=Ks(Iu.current),Ks(ps.current),Yc(c)){if(x=c.stateNode,v=c.memoizedProps,x[ls]=c,(B=x.nodeValue!==v)&&(l=Wr,l!==null))switch(l.tag){case 3:Vc(x.nodeValue,v,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Vc(x.nodeValue,v,(l.mode&1)!==0)}B&&(c.flags|=4)}else x=(v.nodeType===9?v:v.ownerDocument).createTextNode(x),x[ls]=c,c.stateNode=x}return kr(c),null;case 13:if(zn(Un),x=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if($n&&Hi!==null&&(c.mode&1)!==0&&(c.flags&128)===0)v0(),ds(),c.flags|=98560,B=!1;else if(B=Yc(c),x!==null&&x.dehydrated!==null){if(l===null){if(!B)throw Error(r(318));if(B=c.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(r(317));B[ls]=c}else ds(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;kr(c),B=!1}else Oo!==null&&(ep(Oo),Oo=null),B=!0;if(!B)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=v,c):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(Un.current&1)!==0?yr===0&&(yr=3):rp())),c.updateQueue!==null&&(c.flags|=4),kr(c),null);case 4:return Ma(),$0(l,c),l===null&&Ca(c.stateNode.containerInfo),kr(c),null;case 10:return Qh(c.type._context),kr(c),null;case 17:return Si(c.type)&&Uh(),kr(c),null;case 19:if(zn(Un),B=c.memoizedState,B===null)return kr(c),null;if(x=(c.flags&128)!==0,$=B.rendering,$===null)if(x)df(B,!1);else{if(yr!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if($=Sl(l),$!==null){for(c.flags|=128,df(B,!1),x=$.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=v,v=c.child;v!==null;)B=v,l=x,B.flags&=14680066,$=B.alternate,$===null?(B.childLanes=0,B.lanes=l,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=$.childLanes,B.lanes=$.lanes,B.child=$.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=$.memoizedProps,B.memoizedState=$.memoizedState,B.updateQueue=$.updateQueue,B.type=$.type,l=$.dependencies,B.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),v=v.sibling;return _n(Un,Un.current&1|2),c.child}l=l.sibling}B.tail!==null&&Pn()>Ml&&(c.flags|=128,x=!0,df(B,!1),c.lanes=4194304)}else{if(!x)if(l=Sl($),l!==null){if(c.flags|=128,x=!0,v=l.updateQueue,v!==null&&(c.updateQueue=v,c.flags|=4),df(B,!0),B.tail===null&&B.tailMode==="hidden"&&!$.alternate&&!$n)return kr(c),null}else 2*Pn()-B.renderingStartTime>Ml&&v!==1073741824&&(c.flags|=128,x=!0,df(B,!1),c.lanes=4194304);B.isBackwards?($.sibling=c.child,c.child=$):(v=B.last,v!==null?v.sibling=$:c.child=$,B.last=$)}return B.tail!==null?(c=B.tail,B.rendering=c,B.tail=c.sibling,B.renderingStartTime=Pn(),c.sibling=null,v=Un.current,_n(Un,x?v&1|2:v&1),c):(kr(c),null);case 22:case 23:return np(),x=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(zi&1073741824)!==0&&(kr(c),c.subtreeFlags&6&&(c.flags|=8192)):kr(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function t2(l,c){switch(Cl(c),c.tag){case 1:return Si(c.type)&&Uh(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Ma(),zn(Pi),zn(zr),rd(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return nd(c),null;case 13:if(zn(Un),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));ds()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return zn(Un),null;case 4:return Ma(),null;case 10:return Qh(c.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var yd=!1,Xn=!1,li=typeof WeakSet=="function"?WeakSet:Set,st=null;function $u(l,c){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(x){Yn(l,c,x)}else v.current=null}function gf(l,c,v){try{v()}catch(x){Yn(l,c,x)}}var Fm=!1;function n2(l,c){if(Uc=Sh,l=Mn(),Hc(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var x=v.getSelection&&v.getSelection();if(x&&x.rangeCount!==0){v=x.anchorNode;var T=x.anchorOffset,B=x.focusNode;x=x.focusOffset;try{v.nodeType,B.nodeType}catch{v=null;break e}var $=0,te=-1,ce=-1,Me=0,$e=0,Ue=l,ze=null;t:for(;;){for(var ot;Ue!==v||T!==0&&Ue.nodeType!==3||(te=$+T),Ue!==B||x!==0&&Ue.nodeType!==3||(ce=$+x),Ue.nodeType===3&&($+=Ue.nodeValue.length),(ot=Ue.firstChild)!==null;)ze=Ue,Ue=ot;for(;;){if(Ue===l)break t;if(ze===v&&++Me===T&&(te=$),ze===B&&++$e===x&&(ce=$),(ot=Ue.nextSibling)!==null)break;Ue=ze,ze=Ue.parentNode}Ue=ot}v=te===-1||ce===-1?null:{start:te,end:ce}}else v=null}v=v||{start:0,end:0}}else v=null;for(vl={focusedElem:l,selectionRange:v},Sh=!1,st=c;st!==null;)if(c=st,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,st=l;else for(;st!==null;){c=st;try{var ht=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var pt=ht.memoizedProps,sr=ht.memoizedState,Te=c.stateNode,pe=Te.getSnapshotBeforeUpdate(c.elementType===c.type?pt:lo(c.type,pt),sr);Te.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:var Ae=c.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ye){Yn(c,c.return,Ye)}if(l=c.sibling,l!==null){l.return=c.return,st=l;break}st=c.return}return ht=Fm,Fm=!1,ht}function Qs(l,c,v){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var T=x=x.next;do{if((T.tag&l)===l){var B=T.destroy;T.destroy=void 0,B!==void 0&&gf(c,v,B)}T=T.next}while(T!==x)}}function pf(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var v=c=c.next;do{if((v.tag&l)===l){var x=v.create;v.destroy=x()}v=v.next}while(v!==c)}}function wd(l){var c=l.ref;if(c!==null){var v=l.stateNode;switch(l.tag){case 5:l=v;break;default:l=v}typeof c=="function"?c(l):c.current=l}}function Lm(l){var c=l.alternate;c!==null&&(l.alternate=null,Lm(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[ls],delete c[Sa],delete c[Wh],delete c[X],delete c[Bu])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function _m(l){return l.tag===5||l.tag===3||l.tag===4}function Nm(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||_m(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function V0(l,c,v){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?v.nodeType===8?v.parentNode.insertBefore(l,c):v.insertBefore(l,c):(v.nodeType===8?(c=v.parentNode,c.insertBefore(l,v)):(c=v,c.appendChild(l)),v=v._reactRootContainer,v!=null||c.onclick!==null||(c.onclick=zh));else if(x!==4&&(l=l.child,l!==null))for(V0(l,c,v),l=l.sibling;l!==null;)V0(l,c,v),l=l.sibling}function xd(l,c,v){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?v.insertBefore(l,c):v.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for(xd(l,c,v),l=l.sibling;l!==null;)xd(l,c,v),l=l.sibling}var Cr=null,Lo=!1;function xs(l,c,v){for(v=v.child;v!==null;)U0(l,c,v),v=v.sibling}function U0(l,c,v){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(fu,v)}catch{}switch(v.tag){case 5:Xn||$u(v,c);case 6:var x=Cr,T=Lo;Cr=null,xs(l,c,v),Cr=x,Lo=T,Cr!==null&&(Lo?(l=Cr,v=v.stateNode,l.nodeType===8?l.parentNode.removeChild(v):l.removeChild(v)):Cr.removeChild(v.stateNode));break;case 18:Cr!==null&&(Lo?(l=Cr,v=v.stateNode,l.nodeType===8?g0(l.parentNode,v):l.nodeType===1&&g0(l,v),Sn(l)):g0(Cr,v.stateNode));break;case 4:x=Cr,T=Lo,Cr=v.stateNode.containerInfo,Lo=!0,xs(l,c,v),Cr=x,Lo=T;break;case 0:case 11:case 14:case 15:if(!Xn&&(x=v.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){T=x=x.next;do{var B=T,$=B.destroy;B=B.tag,$!==void 0&&((B&2)!==0||(B&4)!==0)&&gf(v,c,$),T=T.next}while(T!==x)}xs(l,c,v);break;case 1:if(!Xn&&($u(v,c),x=v.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=v.memoizedProps,x.state=v.memoizedState,x.componentWillUnmount()}catch(te){Yn(v,c,te)}xs(l,c,v);break;case 21:xs(l,c,v);break;case 22:v.mode&1?(Xn=(x=Xn)||v.memoizedState!==null,xs(l,c,v),Xn=x):xs(l,c,v);break;default:xs(l,c,v)}}function Wu(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new li),c.forEach(function(x){var T=u2.bind(null,l,x);v.has(x)||(v.add(x),x.then(T,T))})}}function ji(l,c){var v=c.deletions;if(v!==null)for(var x=0;x<v.length;x++){var T=v[x];try{var B=l,$=c,te=$;e:for(;te!==null;){switch(te.tag){case 5:Cr=te.stateNode,Lo=!1;break e;case 3:Cr=te.stateNode.containerInfo,Lo=!0;break e;case 4:Cr=te.stateNode.containerInfo,Lo=!0;break e}te=te.return}if(Cr===null)throw Error(r(160));U0(B,$,T),Cr=null,Lo=!1;var ce=T.alternate;ce!==null&&(ce.return=null),T.return=null}catch(Me){Yn(T,c,Me)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)X0(c,l),c=c.sibling}function X0(l,c){var v=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ji(c,l),_o(l),x&4){try{Qs(3,l,l.return),pf(3,l)}catch(pt){Yn(l,l.return,pt)}try{Qs(5,l,l.return)}catch(pt){Yn(l,l.return,pt)}}break;case 1:ji(c,l),_o(l),x&512&&v!==null&&$u(v,v.return);break;case 5:if(ji(c,l),_o(l),x&512&&v!==null&&$u(v,v.return),l.flags&32){var T=l.stateNode;try{_r(T,"")}catch(pt){Yn(l,l.return,pt)}}if(x&4&&(T=l.stateNode,T!=null)){var B=l.memoizedProps,$=v!==null?v.memoizedProps:B,te=l.type,ce=l.updateQueue;if(l.updateQueue=null,ce!==null)try{te==="input"&&B.type==="radio"&&B.name!=null&&lt(T,B),Zi(te,$);var Me=Zi(te,B);for($=0;$<ce.length;$+=2){var $e=ce[$],Ue=ce[$+1];$e==="style"?Mo(T,Ue):$e==="dangerouslySetInnerHTML"?In(T,Ue):$e==="children"?_r(T,Ue):b(T,$e,Ue,Me)}switch(te){case"input":Qe(T,B);break;case"textarea":Ar(T,B);break;case"select":var ze=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!B.multiple;var ot=B.value;ot!=null?mt(T,!!B.multiple,ot,!1):ze!==!!B.multiple&&(B.defaultValue!=null?mt(T,!!B.multiple,B.defaultValue,!0):mt(T,!!B.multiple,B.multiple?[]:"",!1))}T[Sa]=B}catch(pt){Yn(l,l.return,pt)}}break;case 6:if(ji(c,l),_o(l),x&4){if(l.stateNode===null)throw Error(r(162));T=l.stateNode,B=l.memoizedProps;try{T.nodeValue=B}catch(pt){Yn(l,l.return,pt)}}break;case 3:if(ji(c,l),_o(l),x&4&&v!==null&&v.memoizedState.isDehydrated)try{Sn(c.containerInfo)}catch(pt){Yn(l,l.return,pt)}break;case 4:ji(c,l),_o(l);break;case 13:ji(c,l),_o(l),T=l.child,T.flags&8192&&(B=T.memoizedState!==null,T.stateNode.isHidden=B,!B||T.alternate!==null&&T.alternate.memoizedState!==null||(Y0=Pn())),x&4&&Wu(l);break;case 22:if($e=v!==null&&v.memoizedState!==null,l.mode&1?(Xn=(Me=Xn)||$e,ji(c,l),Xn=Me):ji(c,l),_o(l),x&8192){if(Me=l.memoizedState!==null,(l.stateNode.isHidden=Me)&&!$e&&(l.mode&1)!==0)for(st=l,$e=l.child;$e!==null;){for(Ue=st=$e;st!==null;){switch(ze=st,ot=ze.child,ze.tag){case 0:case 11:case 14:case 15:Qs(4,ze,ze.return);break;case 1:$u(ze,ze.return);var ht=ze.stateNode;if(typeof ht.componentWillUnmount=="function"){x=ze,v=ze.return;try{c=x,ht.props=c.memoizedProps,ht.state=c.memoizedState,ht.componentWillUnmount()}catch(pt){Yn(x,v,pt)}}break;case 5:$u(ze,ze.return);break;case 22:if(ze.memoizedState!==null){ba(Ue);continue}}ot!==null?(ot.return=ze,st=ot):ba(Ue)}$e=$e.sibling}e:for($e=null,Ue=l;;){if(Ue.tag===5){if($e===null){$e=Ue;try{T=Ue.stateNode,Me?(B=T.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none"):(te=Ue.stateNode,ce=Ue.memoizedProps.style,$=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,te.style.display=ts("display",$))}catch(pt){Yn(l,l.return,pt)}}}else if(Ue.tag===6){if($e===null)try{Ue.stateNode.nodeValue=Me?"":Ue.memoizedProps}catch(pt){Yn(l,l.return,pt)}}else if((Ue.tag!==22&&Ue.tag!==23||Ue.memoizedState===null||Ue===l)&&Ue.child!==null){Ue.child.return=Ue,Ue=Ue.child;continue}if(Ue===l)break e;for(;Ue.sibling===null;){if(Ue.return===null||Ue.return===l)break e;$e===Ue&&($e=null),Ue=Ue.return}$e===Ue&&($e=null),Ue.sibling.return=Ue.return,Ue=Ue.sibling}}break;case 19:ji(c,l),_o(l),x&4&&Wu(l);break;case 21:break;default:ji(c,l),_o(l)}}function _o(l){var c=l.flags;if(c&2){try{e:{for(var v=l.return;v!==null;){if(_m(v)){var x=v;break e}v=v.return}throw Error(r(160))}switch(x.tag){case 5:var T=x.stateNode;x.flags&32&&(_r(T,""),x.flags&=-33);var B=Nm(l);xd(l,B,T);break;case 3:case 4:var $=x.stateNode.containerInfo,te=Nm(l);V0(l,te,$);break;default:throw Error(r(161))}}catch(ce){Yn(l,l.return,ce)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function Cd(l,c,v){st=l,K0(l)}function K0(l,c,v){for(var x=(l.mode&1)!==0;st!==null;){var T=st,B=T.child;if(T.tag===22&&x){var $=T.memoizedState!==null||yd;if(!$){var te=T.alternate,ce=te!==null&&te.memoizedState!==null||Xn;te=yd;var Me=Xn;if(yd=$,(Xn=ce)&&!Me)for(st=T;st!==null;)$=st,ce=$.child,$.tag===22&&$.memoizedState!==null?Hm(T):ce!==null?(ce.return=$,st=ce):Hm(T);for(;B!==null;)st=B,K0(B),B=B.sibling;st=T,yd=te,Xn=Me}No(l)}else(T.subtreeFlags&8772)!==0&&B!==null?(B.return=T,st=B):No(l)}}function No(l){for(;st!==null;){var c=st;if((c.flags&8772)!==0){var v=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Xn||pf(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!Xn)if(v===null)x.componentDidMount();else{var T=c.elementType===c.type?v.memoizedProps:lo(c.type,v.memoizedProps);x.componentDidUpdate(T,v.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var B=c.updateQueue;B!==null&&x0(c,B,x);break;case 3:var $=c.updateQueue;if($!==null){if(v=null,c.child!==null)switch(c.child.tag){case 5:v=c.child.stateNode;break;case 1:v=c.child.stateNode}x0(c,$,v)}break;case 5:var te=c.stateNode;if(v===null&&c.flags&4){v=te;var ce=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&v.focus();break;case"img":ce.src&&(v.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Me=c.alternate;if(Me!==null){var $e=Me.memoizedState;if($e!==null){var Ue=$e.dehydrated;Ue!==null&&Sn(Ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Xn||c.flags&512&&wd(c)}catch(ze){Yn(c,c.return,ze)}}if(c===l){st=null;break}if(v=c.sibling,v!==null){v.return=c.return,st=v;break}st=c.return}}function ba(l){for(;st!==null;){var c=st;if(c===l){st=null;break}var v=c.sibling;if(v!==null){v.return=c.return,st=v;break}st=c.return}}function Hm(l){for(;st!==null;){var c=st;try{switch(c.tag){case 0:case 11:case 15:var v=c.return;try{pf(4,c)}catch(ce){Yn(c,v,ce)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var T=c.return;try{x.componentDidMount()}catch(ce){Yn(c,T,ce)}}var B=c.return;try{wd(c)}catch(ce){Yn(c,B,ce)}break;case 5:var $=c.return;try{wd(c)}catch(ce){Yn(c,$,ce)}}}catch(ce){Yn(c,c.return,ce)}if(c===l){st=null;break}var te=c.sibling;if(te!==null){te.return=c.return,st=te;break}st=c.return}}var Gm=Math.ceil,Ed=R.ReactCurrentDispatcher,q0=R.ReactCurrentOwner,uo=R.ReactCurrentBatchConfig,mn=0,Er=null,fr=null,br=0,zi=0,Vu=Ei(0),yr=0,mf=null,Oa=0,vf=0,Pd=0,yf=null,Ai=null,Y0=0,Ml=1/0,Js=null,Sd=!1,Z0=null,Ia=null,Td=!1,Fa=null,ui=0,wf=0,Q0=null,Dd=-1,xf=0;function ci(){return(mn&6)!==0?Pn():Dd!==-1?Dd:Dd=Pn()}function La(l){return(l.mode&1)===0?1:(mn&2)!==0&&br!==0?br&-br:wm.transition!==null?(xf===0&&(xf=et()),xf):(l=Mt,l!==0||(l=window.event,l=l===void 0?16:V1(l.type)),l)}function Ho(l,c,v,x){if(50<wf)throw wf=0,Q0=null,Error(r(185));Wt(l,v,x),((mn&2)===0||l!==Er)&&(l===Er&&((mn&2)===0&&(vf|=v),yr===4&&_a(l,br)),Bi(l,x),v===1&&mn===0&&(c.mode&1)===0&&(Ml=Pn()+500,Xh&&Da()))}function Bi(l,c){var v=l.callbackNode;qe(l,c);var x=Fe(l,l===Er?br:0);if(x===0)v!==null&&wh(v),l.callbackNode=null,l.callbackPriority=0;else if(c=x&-x,l.callbackPriority!==c){if(v!=null&&wh(v),c===1)l.tag===0?yl(jm.bind(null,l)):mm(jm.bind(null,l)),$h(function(){(mn&6)===0&&Da()}),v=null;else{switch(Dn(x)){case 1:v=ns;break;case 4:v=Eh;break;case 16:v=rs;break;case 536870912:v=Oc;break;default:v=rs}v=Km(v,Ad.bind(null,l))}l.callbackPriority=c,l.callbackNode=v}}function Ad(l,c){if(Dd=-1,xf=0,(mn&6)!==0)throw Error(r(327));var v=l.callbackNode;if(Uu()&&l.callbackNode!==v)return null;var x=Fe(l,l===Er?br:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||c)c=Bd(l,x);else{c=x;var T=mn;mn|=2;var B=$m();(Er!==l||br!==c)&&(Js=null,Ml=Pn()+500,kl(l,c));do try{o2();break}catch(te){zm(l,te)}while(!0);Vs(),Ed.current=B,mn=T,fr!==null?c=0:(Er=null,br=0,c=yr)}if(c!==0){if(c===2&&(T=Xe(l),T!==0&&(x=T,c=J0(l,T))),c===1)throw v=mf,kl(l,0),_a(l,x),Bi(l,Pn()),v;if(c===6)_a(l,x);else{if(T=l.current.alternate,(x&30)===0&&!r2(T)&&(c=Bd(l,x),c===2&&(B=Xe(l),B!==0&&(x=B,c=J0(l,B))),c===1))throw v=mf,kl(l,0),_a(l,x),Bi(l,Pn()),v;switch(l.finishedWork=T,l.finishedLanes=x,c){case 0:case 1:throw Error(r(345));case 2:bl(l,Ai,Js);break;case 3:if(_a(l,x),(x&130023424)===x&&(c=Y0+500-Pn(),10<c)){if(Fe(l,0)!==0)break;if(T=l.suspendedLanes,(T&x)!==x){ci(),l.pingedLanes|=l.suspendedLanes&T;break}l.timeoutHandle=Ea(bl.bind(null,l,Ai,Js),c);break}bl(l,Ai,Js);break;case 4:if(_a(l,x),(x&4194240)===x)break;for(c=l.eventTimes,T=-1;0<x;){var $=31-Fi(x);B=1<<$,$=c[$],$>T&&(T=$),x&=~B}if(x=T,x=Pn()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Gm(x/1960))-x,10<x){l.timeoutHandle=Ea(bl.bind(null,l,Ai,Js),x);break}bl(l,Ai,Js);break;case 5:bl(l,Ai,Js);break;default:throw Error(r(329))}}}return Bi(l,Pn()),l.callbackNode===v?Ad.bind(null,l):null}function J0(l,c){var v=yf;return l.current.memoizedState.isDehydrated&&(kl(l,c).flags|=256),l=Bd(l,c),l!==2&&(c=Ai,Ai=v,c!==null&&ep(c)),l}function ep(l){Ai===null?Ai=l:Ai.push.apply(Ai,l)}function r2(l){for(var c=l;;){if(c.flags&16384){var v=c.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var x=0;x<v.length;x++){var T=v[x],B=T.getSnapshot;T=T.value;try{if(!Be(B(),T))return!1}catch{return!1}}}if(v=c.child,c.subtreeFlags&16384&&v!==null)v.return=c,c=v;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function _a(l,c){for(c&=~Pd,c&=~vf,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var v=31-Fi(c),x=1<<v;l[v]=-1,c&=~x}}function jm(l){if((mn&6)!==0)throw Error(r(327));Uu();var c=Fe(l,0);if((c&1)===0)return Bi(l,Pn()),null;var v=Bd(l,c);if(l.tag!==0&&v===2){var x=Xe(l);x!==0&&(c=x,v=J0(l,x))}if(v===1)throw v=mf,kl(l,0),_a(l,c),Bi(l,Pn()),v;if(v===6)throw Error(r(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,bl(l,Ai,Js),Bi(l,Pn()),null}function tp(l,c){var v=mn;mn|=1;try{return l(c)}finally{mn=v,mn===0&&(Ml=Pn()+500,Xh&&Da())}}function Rl(l){Fa!==null&&Fa.tag===0&&(mn&6)===0&&Uu();var c=mn;mn|=1;var v=uo.transition,x=Mt;try{if(uo.transition=null,Mt=1,l)return l()}finally{Mt=x,uo.transition=v,mn=c,(mn&6)===0&&Da()}}function np(){zi=Vu.current,zn(Vu)}function kl(l,c){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==-1&&(l.timeoutHandle=-1,Kc(v)),fr!==null)for(v=fr.return;v!==null;){var x=v;switch(Cl(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Uh();break;case 3:Ma(),zn(Pi),zn(zr),rd();break;case 5:nd(x);break;case 4:Ma();break;case 13:zn(Un);break;case 19:zn(Un);break;case 10:Qh(x.type._context);break;case 22:case 23:np()}v=v.return}if(Er=l,fr=l=Go(l.current,null),br=zi=c,yr=0,mf=null,Pd=vf=Oa=0,Ai=yf=null,Pl!==null){for(c=0;c<Pl.length;c++)if(v=Pl[c],x=v.interleaved,x!==null){v.interleaved=null;var T=x.next,B=v.pending;if(B!==null){var $=B.next;B.next=T,x.next=$}v.pending=x}Pl=null}return l}function zm(l,c){do{var v=fr;try{if(Vs(),tf.current=ud,Fu){for(var x=qn.memoizedState;x!==null;){var T=x.queue;T!==null&&(T.pending=null),x=x.next}Fu=!1}if(Ra=0,vr=or=qn=null,nf=!1,Tl=0,q0.current=null,v===null||v.return===null){yr=1,mf=c,fr=null;break}e:{var B=l,$=v.return,te=v,ce=c;if(c=br,te.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Me=ce,$e=te,Ue=$e.tag;if(($e.mode&1)===0&&(Ue===0||Ue===11||Ue===15)){var ze=$e.alternate;ze?($e.updateQueue=ze.updateQueue,$e.memoizedState=ze.memoizedState,$e.lanes=ze.lanes):($e.updateQueue=null,$e.memoizedState=null)}var ot=Rm($);if(ot!==null){ot.flags&=-257,L0(ot,$,te,B,c),ot.mode&1&&lf(B,Me,c),c=ot,ce=Me;var ht=c.updateQueue;if(ht===null){var pt=new Set;pt.add(ce),c.updateQueue=pt}else ht.add(ce);break e}else{if((c&1)===0){lf(B,Me,c),rp();break e}ce=Error(r(426))}}else if($n&&te.mode&1){var sr=Rm($);if(sr!==null){(sr.flags&65536)===0&&(sr.flags|=256),L0(sr,$,te,B,c),gs(Bl(ce,te));break e}}B=ce=Bl(ce,te),yr!==4&&(yr=2),yf===null?yf=[B]:yf.push(B),B=$;do{switch(B.tag){case 3:B.flags|=65536,c&=-c,B.lanes|=c;var Te=af(B,ce,c);Em(B,Te);break e;case 1:te=ce;var pe=B.type,Ae=B.stateNode;if((B.flags&128)===0&&(typeof pe.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(Ia===null||!Ia.has(Ae)))){B.flags|=65536,c&=-c,B.lanes|=c;var Ye=gd(B,te,c);Em(B,Ye);break e}}B=B.return}while(B!==null)}Vm(v)}catch(wt){c=wt,fr===v&&v!==null&&(fr=v=v.return);continue}break}while(!0)}function $m(){var l=Ed.current;return Ed.current=ud,l===null?ud:l}function rp(){(yr===0||yr===3||yr===2)&&(yr=4),Er===null||(Oa&268435455)===0&&(vf&268435455)===0||_a(Er,br)}function Bd(l,c){var v=mn;mn|=2;var x=$m();(Er!==l||br!==c)&&(Js=null,kl(l,c));do try{i2();break}catch(T){zm(l,T)}while(!0);if(Vs(),mn=v,Ed.current=x,fr!==null)throw Error(r(261));return Er=null,br=0,yr}function i2(){for(;fr!==null;)Wm(fr)}function o2(){for(;fr!==null&&!uu();)Wm(fr)}function Wm(l){var c=Xm(l.alternate,l,zi);l.memoizedProps=l.pendingProps,c===null?Vm(l):fr=c,q0.current=null}function Vm(l){var c=l;do{var v=c.alternate;if(l=c.return,(c.flags&32768)===0){if(v=e2(v,c,zi),v!==null){fr=v;return}}else{if(v=t2(v,c),v!==null){v.flags&=32767,fr=v;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{yr=6,fr=null;return}}if(c=c.sibling,c!==null){fr=c;return}fr=c=l}while(c!==null);yr===0&&(yr=5)}function bl(l,c,v){var x=Mt,T=uo.transition;try{uo.transition=null,Mt=1,s2(l,c,v,x)}finally{uo.transition=T,Mt=x}return null}function s2(l,c,v,x){do Uu();while(Fa!==null);if((mn&6)!==0)throw Error(r(327));v=l.finishedWork;var T=l.finishedLanes;if(v===null)return null;if(l.finishedWork=null,l.finishedLanes=0,v===l.current)throw Error(r(177));l.callbackNode=null,l.callbackPriority=0;var B=v.lanes|v.childLanes;if(pn(l,B),l===Er&&(fr=Er=null,br=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||Td||(Td=!0,Km(rs,function(){return Uu(),null})),B=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||B){B=uo.transition,uo.transition=null;var $=Mt;Mt=1;var te=mn;mn|=4,q0.current=null,n2(l,v),X0(v,l),Yw(vl),Sh=!!Uc,vl=Uc=null,l.current=v,Cd(v),xh(),mn=te,Mt=$,uo.transition=B}else l.current=v;if(Td&&(Td=!1,Fa=l,ui=T),B=l.pendingLanes,B===0&&(Ia=null),qg(v.stateNode),Bi(l,Pn()),c!==null)for(x=l.onRecoverableError,v=0;v<c.length;v++)T=c[v],x(T.value,{componentStack:T.stack,digest:T.digest});if(Sd)throw Sd=!1,l=Z0,Z0=null,l;return(ui&1)!==0&&l.tag!==0&&Uu(),B=l.pendingLanes,(B&1)!==0?l===Q0?wf++:(wf=0,Q0=l):wf=0,Da(),null}function Uu(){if(Fa!==null){var l=Dn(ui),c=uo.transition,v=Mt;try{if(uo.transition=null,Mt=16>l?16:l,Fa===null)var x=!1;else{if(l=Fa,Fa=null,ui=0,(mn&6)!==0)throw Error(r(331));var T=mn;for(mn|=4,st=l.current;st!==null;){var B=st,$=B.child;if((st.flags&16)!==0){var te=B.deletions;if(te!==null){for(var ce=0;ce<te.length;ce++){var Me=te[ce];for(st=Me;st!==null;){var $e=st;switch($e.tag){case 0:case 11:case 15:Qs(8,$e,B)}var Ue=$e.child;if(Ue!==null)Ue.return=$e,st=Ue;else for(;st!==null;){$e=st;var ze=$e.sibling,ot=$e.return;if(Lm($e),$e===Me){st=null;break}if(ze!==null){ze.return=ot,st=ze;break}st=ot}}}var ht=B.alternate;if(ht!==null){var pt=ht.child;if(pt!==null){ht.child=null;do{var sr=pt.sibling;pt.sibling=null,pt=sr}while(pt!==null)}}st=B}}if((B.subtreeFlags&2064)!==0&&$!==null)$.return=B,st=$;else e:for(;st!==null;){if(B=st,(B.flags&2048)!==0)switch(B.tag){case 0:case 11:case 15:Qs(9,B,B.return)}var Te=B.sibling;if(Te!==null){Te.return=B.return,st=Te;break e}st=B.return}}var pe=l.current;for(st=pe;st!==null;){$=st;var Ae=$.child;if(($.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=$,st=Ae;else e:for($=pe;st!==null;){if(te=st,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:pf(9,te)}}catch(wt){Yn(te,te.return,wt)}if(te===$){st=null;break e}var Ye=te.sibling;if(Ye!==null){Ye.return=te.return,st=Ye;break e}st=te.return}}if(mn=T,Da(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(fu,l)}catch{}x=!0}return x}finally{Mt=v,uo.transition=c}}return!1}function Md(l,c,v){c=Bl(v,c),c=af(l,c,1),l=so(l,c,1),c=ci(),l!==null&&(Wt(l,1,c),Bi(l,c))}function Yn(l,c,v){if(l.tag===3)Md(l,l,v);else for(;c!==null;){if(c.tag===3){Md(c,l,v);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ia===null||!Ia.has(x))){l=Bl(v,l),l=gd(c,l,1),c=so(c,l,1),l=ci(),c!==null&&(Wt(c,1,l),Bi(c,l));break}}c=c.return}}function a2(l,c,v){var x=l.pingCache;x!==null&&x.delete(c),c=ci(),l.pingedLanes|=l.suspendedLanes&v,Er===l&&(br&v)===v&&(yr===4||yr===3&&(br&130023424)===br&&500>Pn()-Y0?kl(l,0):Pd|=v),Bi(l,c)}function Um(l,c){c===0&&((l.mode&1)===0?c=1:(c=xe,xe<<=1,(xe&130023424)===0&&(xe=4194304)));var v=ci();l=Us(l,c),l!==null&&(Wt(l,c,v),Bi(l,v))}function l2(l){var c=l.memoizedState,v=0;c!==null&&(v=c.retryLane),Um(l,v)}function u2(l,c){var v=0;switch(l.tag){case 13:var x=l.stateNode,T=l.memoizedState;T!==null&&(v=T.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(r(314))}x!==null&&x.delete(c),Um(l,v)}var Xm;Xm=function(l,c,v){if(l!==null)if(l.memoizedProps!==c.pendingProps||Pi.current)ai=!0;else{if((l.lanes&v)===0&&(c.flags&128)===0)return ai=!1,Om(l,c,v);ai=(l.flags&131072)!==0}else ai=!1,$n&&(c.flags&1048576)!==0&&vm(c,qh,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;vd(l,c),l=c.pendingProps;var T=Ru(c,zr.current);Ba(c,v),T=Dl(null,c,x,l,T,v);var B=id();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Si(x)?(B=!0,to(c)):B=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,ed(c),T.updater=hd,c.stateNode=T,T._reactInternals=c,F0(c,x,l,v),c=z0(null,c,x,!0,B,v)):(c.tag=0,$n&&B&&qc(c),Mr(null,c,T,v),c=c.child),c;case 16:x=c.elementType;e:{switch(vd(l,c),l=c.pendingProps,T=x._init,x=T(x._payload),c.type=x,T=c.tag=f2(x),l=lo(x,l),T){case 0:c=G0(null,c,x,l,v);break e;case 1:c=j0(null,c,x,l,v);break e;case 11:c=km(null,c,x,l,v);break e;case 14:c=_0(null,c,x,lo(x.type,l),v);break e}throw Error(r(306,x,""))}return c;case 0:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:lo(x,T),G0(l,c,x,T,v);case 1:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:lo(x,T),j0(l,c,x,T,v);case 3:e:{if(bm(c),l===null)throw Error(r(387));x=c.pendingProps,B=c.memoizedState,T=B.element,Cm(l,c),Ou(c,x,null,v);var $=c.memoizedState;if(x=$.element,B.isDehydrated)if(B={element:x,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},c.updateQueue.baseState=B,c.memoizedState=B,c.flags&256){T=Bl(Error(r(423)),c),c=ws(l,c,x,v,T);break e}else if(x!==T){T=Bl(Error(r(424)),c),c=ws(l,c,x,v,T);break e}else for(Hi=Pa(c.stateNode.containerInfo.firstChild),Wr=c,$n=!0,Oo=null,v=Zh(c,null,x,v),c.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(ds(),x===T){c=Fo(l,c,v);break e}Mr(l,c,x,v)}c=c.child}return c;case 5:return E0(c),l===null&&Ti(c),x=c.type,T=c.pendingProps,B=l!==null?l.memoizedProps:null,$=T.children,Xc(x,T)?$=null:B!==null&&Xc(x,B)&&(c.flags|=32),H0(l,c),Mr(l,c,$,v),c.child;case 6:return l===null&&Ti(c),null;case 13:return md(l,c,v);case 4:return C0(c,c.stateNode.containerInfo),x=c.pendingProps,l===null?c.child=er(c,null,x,v):Mr(l,c,x,v),c.child;case 11:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:lo(x,T),km(l,c,x,T,v);case 7:return Mr(l,c,c.pendingProps,v),c.child;case 8:return Mr(l,c,c.pendingProps.children,v),c.child;case 12:return Mr(l,c,c.pendingProps.children,v),c.child;case 10:e:{if(x=c.type._context,T=c.pendingProps,B=c.memoizedProps,$=T.value,_n(Qc,x._currentValue),x._currentValue=$,B!==null)if(Be(B.value,$)){if(B.children===T.children&&!Pi.current){c=Fo(l,c,v);break e}}else for(B=c.child,B!==null&&(B.return=c);B!==null;){var te=B.dependencies;if(te!==null){$=B.child;for(var ce=te.firstContext;ce!==null;){if(ce.context===x){if(B.tag===1){ce=Xs(-1,v&-v),ce.tag=2;var Me=B.updateQueue;if(Me!==null){Me=Me.shared;var $e=Me.pending;$e===null?ce.next=ce:(ce.next=$e.next,$e.next=ce),Me.pending=ce}}B.lanes|=v,ce=B.alternate,ce!==null&&(ce.lanes|=v),Br(B.return,v,c),te.lanes|=v;break}ce=ce.next}}else if(B.tag===10)$=B.type===c.type?null:B.child;else if(B.tag===18){if($=B.return,$===null)throw Error(r(341));$.lanes|=v,te=$.alternate,te!==null&&(te.lanes|=v),Br($,v,c),$=B.sibling}else $=B.child;if($!==null)$.return=B;else for($=B;$!==null;){if($===c){$=null;break}if(B=$.sibling,B!==null){B.return=$.return,$=B;break}$=$.return}B=$}Mr(l,c,T.children,v),c=c.child}return c;case 9:return T=c.type,x=c.pendingProps.children,Ba(c,v),T=io(T),x=x(T),c.flags|=1,Mr(l,c,x,v),c.child;case 14:return x=c.type,T=lo(x,c.pendingProps),T=lo(x.type,T),_0(l,c,x,T,v);case 15:return ys(l,c,c.type,c.pendingProps,v);case 17:return x=c.type,T=c.pendingProps,T=c.elementType===x?T:lo(x,T),vd(l,c),c.tag=1,Si(x)?(l=!0,to(c)):l=!1,Ba(c,v),Al(c,x,T),F0(c,x,T,v),z0(null,c,x,!0,l,v);case 19:return ka(l,c,v);case 22:return N0(l,c,v)}throw Error(r(156,c.tag))};function Km(l,c){return yh(l,c)}function c2(l,c,v,x){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function co(l,c,v,x){return new c2(l,c,v,x)}function Rd(l){return l=l.prototype,!(!l||!l.isReactComponent)}function f2(l){if(typeof l=="function")return Rd(l)?1:0;if(l!=null){if(l=l.$$typeof,l===ue)return 11;if(l===W)return 14}return 2}function Go(l,c){var v=l.alternate;return v===null?(v=co(l.tag,c,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=c,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&14680064,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,c=l.dependencies,v.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function kd(l,c,v,x,T,B){var $=2;if(x=l,typeof l=="function")Rd(l)&&($=1);else if(typeof l=="string")$=5;else e:switch(l){case Z:return Ol(v.children,T,B,c);case ne:$=8,T|=8;break;case le:return l=co(12,v,c,T|2),l.elementType=le,l.lanes=B,l;case he:return l=co(13,v,c,T),l.elementType=he,l.lanes=B,l;case ye:return l=co(19,v,c,T),l.elementType=ye,l.lanes=B,l;case N:return bd(v,T,B,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case de:$=10;break e;case Pe:$=9;break e;case ue:$=11;break e;case W:$=14;break e;case O:$=16,x=null;break e}throw Error(r(130,l==null?l:typeof l,""))}return c=co($,v,c,T),c.elementType=l,c.type=x,c.lanes=B,c}function Ol(l,c,v,x){return l=co(7,l,x,c),l.lanes=v,l}function bd(l,c,v,x){return l=co(22,l,x,c),l.elementType=N,l.lanes=v,l.stateNode={isHidden:!1},l}function ip(l,c,v){return l=co(6,l,null,c),l.lanes=v,l}function op(l,c,v){return c=co(4,l.children!==null?l.children:[],l.key,c),c.lanes=v,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function h2(l,c,v,x,T){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ut(0),this.expirationTimes=ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ut(0),this.identifierPrefix=x,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function sp(l,c,v,x,T,B,$,te,ce){return l=new h2(l,c,v,te,ce),c===1?(c=1,B===!0&&(c|=8)):c=0,B=co(3,null,null,c),l.current=B,B.stateNode=l,B.memoizedState={element:x,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},ed(B),l}function d2(l,c,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:x==null?null:""+x,children:l,containerInfo:c,implementation:v}}function qm(l){if(!l)return Ta;l=l._reactInternals;e:{if(Ns(l)!==l||l.tag!==1)throw Error(r(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Si(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(l.tag===1){var v=l.type;if(Si(v))return gm(l,v,c)}return c}function Ym(l,c,v,x,T,B,$,te,ce){return l=sp(v,x,!0,l,T,B,$,te,ce),l.context=qm(null),v=l.current,x=ci(),T=La(v),B=Xs(x,T),B.callback=c??null,so(v,B,T),l.current.lanes=T,Wt(l,T,x),Bi(l,x),l}function Od(l,c,v,x){var T=c.current,B=ci(),$=La(T);return v=qm(v),c.context===null?c.context=v:c.pendingContext=v,c=Xs(B,$),c.payload={element:l},x=x===void 0?null:x,x!==null&&(c.callback=x),l=so(T,c,$),l!==null&&(Ho(l,T,$,B),td(l,T,$)),$}function Id(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Zm(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<c?v:c}}function ap(l,c){Zm(l,c),(l=l.alternate)&&Zm(l,c)}function g2(){return null}var Qm=typeof reportError=="function"?reportError:function(l){console.error(l)};function Fd(l){this._internalRoot=l}Cf.prototype.render=Fd.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));Od(l,c,null,null)},Cf.prototype.unmount=Fd.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;Rl(function(){Od(null,l,null,null)}),c[Ni]=null}};function Cf(l){this._internalRoot=l}Cf.prototype.unstable_scheduleHydration=function(l){if(l){var c=Ic();l={blockedOn:null,target:l,priority:c};for(var v=0;v<va.length&&c!==0&&c<va[v].priority;v++);va.splice(v,0,l),v===0&&$1(l)}};function lp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Ld(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function p2(l,c,v,x,T){if(T){if(typeof x=="function"){var B=x;x=function(){var Me=Id($);B.call(Me)}}var $=Ym(c,x,l,0,null,!1,!1,"",Jm);return l._reactRootContainer=$,l[Ni]=$.current,Ca(l.nodeType===8?l.parentNode:l),Rl(),$}for(;T=l.lastChild;)l.removeChild(T);if(typeof x=="function"){var te=x;x=function(){var Me=Id(ce);te.call(Me)}}var ce=sp(l,0,!1,null,null,!1,!1,"",Jm);return l._reactRootContainer=ce,l[Ni]=ce.current,Ca(l.nodeType===8?l.parentNode:l),Rl(function(){Od(c,ce,v,x)}),ce}function Il(l,c,v,x,T){var B=v._reactRootContainer;if(B){var $=B;if(typeof T=="function"){var te=T;T=function(){var ce=Id($);te.call(ce)}}Od(c,$,l,T)}else $=p2(v,c,l,T,x);return Id($)}Nr=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var v=ge(c.pendingLanes);v!==0&&(ln(c,v|1),Bi(c,Pn()),(mn&6)===0&&(Ml=Pn()+500,Da()))}break;case 13:Rl(function(){var x=Us(l,1);if(x!==null){var T=ci();Ho(x,l,1,T)}}),ap(l,1)}},is=function(l){if(l.tag===13){var c=Us(l,134217728);if(c!==null){var v=ci();Ho(c,l,134217728,v)}ap(l,134217728)}},hu=function(l){if(l.tag===13){var c=La(l),v=Us(l,c);if(v!==null){var x=ci();Ho(v,l,c,x)}ap(l,c)}},Ic=function(){return Mt},cl=function(l,c){var v=Mt;try{return Mt=l,c()}finally{Mt=v}},Qi=function(l,c,v){switch(c){case"input":if(Qe(l,v),c=v.name,v.type==="radio"&&c!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<v.length;c++){var x=v[c];if(x!==l&&x.form===l.form){var T=Vh(x);if(!T)throw Error(r(90));Ie(x),Qe(x,T)}}}break;case"textarea":Ar(l,v);break;case"select":c=v.value,c!=null&&mt(l,!!v.multiple,c,!1)}},dh=tp,Bc=Rl;var m2={usingClientEntryPoint:!1,Events:[jr,qt,Vh,fh,hh,tp]},Ef={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v2={bundleType:Ef.bundleType,version:Ef.version,rendererPackageName:Ef.rendererPackageName,rendererConfig:Ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=mh(l),l===null?null:l.stateNode},findFiberByHostInstance:Ef.findFiberByHostInstance||g2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{fu=_d.inject(v2),xi=_d}catch{}}return po.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m2,po.createPortal=function(l,c){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lp(c))throw Error(r(200));return d2(l,c,null,v)},po.createRoot=function(l,c){if(!lp(l))throw Error(r(299));var v=!1,x="",T=Qm;return c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),c=sp(l,1,!1,null,null,v,!1,x,T),l[Ni]=c.current,Ca(l.nodeType===8?l.parentNode:l),new Fd(c)},po.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=mh(c),l=l===null?null:l.stateNode,l},po.flushSync=function(l){return Rl(l)},po.hydrate=function(l,c,v){if(!Ld(c))throw Error(r(200));return Il(null,l,c,!0,v)},po.hydrateRoot=function(l,c,v){if(!lp(l))throw Error(r(405));var x=v!=null&&v.hydratedSources||null,T=!1,B="",$=Qm;if(v!=null&&(v.unstable_strictMode===!0&&(T=!0),v.identifierPrefix!==void 0&&(B=v.identifierPrefix),v.onRecoverableError!==void 0&&($=v.onRecoverableError)),c=Ym(c,null,l,1,v??null,T,!1,B,$),l[Ni]=c.current,Ca(l),x)for(l=0;l<x.length;l++)v=x[l],T=v._getVersion,T=T(v._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[v,T]:c.mutableSourceEagerHydrationData.push(v,T);return new Cf(c)},po.render=function(l,c,v){if(!Ld(c))throw Error(r(200));return Il(null,l,c,!1,v)},po.unmountComponentAtNode=function(l){if(!Ld(l))throw Error(r(40));return l._reactRootContainer?(Rl(function(){Il(null,null,l,!1,function(){l._reactRootContainer=null,l[Ni]=null})}),!0):!1},po.unstable_batchedUpdates=tp,po.unstable_renderSubtreeIntoContainer=function(l,c,v,x){if(!Ld(v))throw Error(r(200));if(l==null||l._reactInternals===void 0)throw Error(r(38));return Il(l,c,v,!1,x)},po.version="18.3.1-next-f1338f8080-20240426",po}var GP;function cA(){if(GP)return b2.exports;GP=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),b2.exports=Y9(),b2.exports}var jP;function Z9(){if(jP)return rv;jP=1;var e=cA();return rv.createRoot=e.createRoot,rv.hydrateRoot=e.hydrateRoot,rv}var w1=Z9();function $x(e,n,r){if(e&&e.length){const[i,o]=n,s=Math.PI/180*r,a=Math.cos(s),u=Math.sin(s);for(const f of e){const[d,g]=f;f[0]=(d-i)*a-(g-o)*u+i,f[1]=(d-i)*u+(g-o)*a+o}}}function Q9(e,n,r){const i=[];e.forEach(o=>i.push(...o)),$x(i,n,r)}function J9(e,n){return e[0]===n[0]&&e[1]===n[1]}function ek(e,n,r,i=1){const o=r,s=Math.max(n,.1),a=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,u=[0,0];if(o)for(const d of a)$x(d,u,o);const f=tk(a,s,i);if(o){for(const d of a)$x(d,u,-o);Q9(f,u,-o)}return f}function tk(e,n,r){const i=[];for(const d of e){const g=[...d];J9(g[0],g[g.length-1])||g.push([g[0][0],g[0][1]]),g.length>2&&i.push(g)}const o=[];n=Math.max(n,.1);const s=[];for(const d of i)for(let g=0;g<d.length-1;g++){const p=d[g],y=d[g+1];if(p[1]!==y[1]){const w=Math.min(p[1],y[1]);s.push({ymin:w,ymax:Math.max(p[1],y[1]),x:w===p[1]?p[0]:y[0],islope:(y[0]-p[0])/(y[1]-p[1])})}}if(s.sort((d,g)=>d.ymin<g.ymin?-1:d.ymin>g.ymin?1:d.x<g.x?-1:d.x>g.x?1:d.ymax===g.ymax?0:(d.ymax-g.ymax)/Math.abs(d.ymax-g.ymax)),!s.length)return o;let a=[],u=s[0].ymin,f=0;for(;a.length||s.length;){if(s.length){let d=-1;for(let p=0;p<s.length&&!(s[p].ymin>u);p++)d=p;s.splice(0,d+1).forEach(p=>{a.push({s:u,edge:p})})}if(a=a.filter(d=>!(d.edge.ymax<=u)),a.sort((d,g)=>d.edge.x===g.edge.x?0:(d.edge.x-g.edge.x)/Math.abs(d.edge.x-g.edge.x)),(r!==1||f%n===0)&&a.length>1)for(let d=0;d<a.length;d=d+2){const g=d+1;if(g>=a.length)break;const p=a[d].edge,y=a[g].edge;o.push([[Math.round(p.x),u],[Math.round(y.x),u]])}u+=r,a.forEach(d=>{d.edge.x=d.edge.x+r*d.edge.islope}),f++}return o}function x1(e,n){var r;const i=n.hachureAngle+90;let o=n.hachureGap;o<0&&(o=n.strokeWidth*4),o=Math.round(Math.max(o,.1));let s=1;return n.roughness>=1&&(((r=n.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(s=o),ek(e,o,i,s||1)}class dE{constructor(n){this.helper=n}fillPolygons(n,r){return this._fillPolygons(n,r)}_fillPolygons(n,r){const i=x1(n,r);return{type:"fillSketch",ops:this.renderLines(i,r)}}renderLines(n,r){const i=[];for(const o of n)i.push(...this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],r));return i}}function Wy(e){const n=e[0],r=e[1];return Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2))}class nk extends dE{fillPolygons(n,r){let i=r.hachureGap;i<0&&(i=r.strokeWidth*4),i=Math.max(i,.1);const o=Object.assign({},r,{hachureGap:i}),s=x1(n,o),a=Math.PI/180*r.hachureAngle,u=[],f=i*.5*Math.cos(a),d=i*.5*Math.sin(a);for(const[p,y]of s)Wy([p,y])&&u.push([[p[0]-f,p[1]+d],[...y]],[[p[0]+f,p[1]-d],[...y]]);return{type:"fillSketch",ops:this.renderLines(u,r)}}}class rk extends dE{fillPolygons(n,r){const i=this._fillPolygons(n,r),o=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(n,o);return i.ops=i.ops.concat(s.ops),i}}class ik{constructor(n){this.helper=n}fillPolygons(n,r){r=Object.assign({},r,{hachureAngle:0});const i=x1(n,r);return this.dotsOnLines(i,r)}dotsOnLines(n,r){const i=[];let o=r.hachureGap;o<0&&(o=r.strokeWidth*4),o=Math.max(o,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const a=o/4;for(const u of n){const f=Wy(u),d=f/o,g=Math.ceil(d)-1,p=f-g*o,y=(u[0][0]+u[1][0])/2-o/4,w=Math.min(u[0][1],u[1][1]);for(let E=0;E<g;E++){const S=w+p+E*o,D=y-a+Math.random()*2*a,A=S-a+Math.random()*2*a,P=this.helper.ellipse(D,A,s,s,r);i.push(...P.ops)}}return{type:"fillSketch",ops:i}}}class ok{constructor(n){this.helper=n}fillPolygons(n,r){const i=x1(n,r);return{type:"fillSketch",ops:this.dashedLine(i,r)}}dashedLine(n,r){const i=r.dashOffset<0?r.hachureGap<0?r.strokeWidth*4:r.hachureGap:r.dashOffset,o=r.dashGap<0?r.hachureGap<0?r.strokeWidth*4:r.hachureGap:r.dashGap,s=[];return n.forEach(a=>{const u=Wy(a),f=Math.floor(u/(i+o)),d=(u+o-f*(i+o))/2;let g=a[0],p=a[1];g[0]>p[0]&&(g=a[1],p=a[0]);const y=Math.atan((p[1]-g[1])/(p[0]-g[0]));for(let w=0;w<f;w++){const E=w*(i+o),S=E+i,D=[g[0]+E*Math.cos(y)+d*Math.cos(y),g[1]+E*Math.sin(y)+d*Math.sin(y)],A=[g[0]+S*Math.cos(y)+d*Math.cos(y),g[1]+S*Math.sin(y)+d*Math.sin(y)];s.push(...this.helper.doubleLineOps(D[0],D[1],A[0],A[1],r))}}),s}}class sk{constructor(n){this.helper=n}fillPolygons(n,r){const i=r.hachureGap<0?r.strokeWidth*4:r.hachureGap,o=r.zigzagOffset<0?i:r.zigzagOffset;r=Object.assign({},r,{hachureGap:i+o});const s=x1(n,r);return{type:"fillSketch",ops:this.zigzagLines(s,o,r)}}zigzagLines(n,r,i){const o=[];return n.forEach(s=>{const a=Wy(s),u=Math.round(a/(2*r));let f=s[0],d=s[1];f[0]>d[0]&&(f=s[1],d=s[0]);const g=Math.atan((d[1]-f[1])/(d[0]-f[0]));for(let p=0;p<u;p++){const y=p*2*r,w=(p+1)*2*r,E=Math.sqrt(2*Math.pow(r,2)),S=[f[0]+y*Math.cos(g),f[1]+y*Math.sin(g)],D=[f[0]+w*Math.cos(g),f[1]+w*Math.sin(g)],A=[S[0]+E*Math.cos(g+Math.PI/4),S[1]+E*Math.sin(g+Math.PI/4)];o.push(...this.helper.doubleLineOps(S[0],S[1],A[0],A[1],i),...this.helper.doubleLineOps(A[0],A[1],D[0],D[1],i))}}),o}}const mo={};function ak(e,n){let r=e.fillStyle||"hachure";if(!mo[r])switch(r){case"zigzag":mo[r]||(mo[r]=new nk(n));break;case"cross-hatch":mo[r]||(mo[r]=new rk(n));break;case"dots":mo[r]||(mo[r]=new ik(n));break;case"dashed":mo[r]||(mo[r]=new ok(n));break;case"zigzag-line":mo[r]||(mo[r]=new sk(n));break;case"hachure":default:r="hachure",mo[r]||(mo[r]=new dE(n));break}return mo[r]}function lk(){return Math.floor(Math.random()*2**31)}class uk{constructor(n){this.seed=n}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ck=0,Wx=1,fA=2,iv={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function fk(e){const n=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]={type:ck,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))n[n.length]={type:Wx,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return n[n.length]={type:fA,text:""},n}function F2(e,n){return e.type===n}function gE(e){const n=[],r=fk(e);let i="BOD",o=0,s=r[o];for(;!F2(s,fA);){let a=0;const u=[];if(i==="BOD")if(s.text==="M"||s.text==="m")o++,a=iv[s.text],i=s.text;else return gE("M0,0"+e);else F2(s,Wx)?a=iv[i]:(o++,a=iv[s.text],i=s.text);if(o+a<r.length){for(let f=o;f<o+a;f++){const d=r[f];if(F2(d,Wx))u[u.length]=+d.text;else throw new Error("Param not a number: "+i+","+d.text)}if(typeof iv[i]=="number"){const f={key:i,data:u};n.push(f),o+=a,s=r[o],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return n}function hA(e){let n=0,r=0,i=0,o=0;const s=[];for(const{key:a,data:u}of e)switch(a){case"M":s.push({key:"M",data:[...u]}),[n,r]=u,[i,o]=u;break;case"m":n+=u[0],r+=u[1],s.push({key:"M",data:[n,r]}),i=n,o=r;break;case"L":s.push({key:"L",data:[...u]}),[n,r]=u;break;case"l":n+=u[0],r+=u[1],s.push({key:"L",data:[n,r]});break;case"C":s.push({key:"C",data:[...u]}),n=u[4],r=u[5];break;case"c":{const f=u.map((d,g)=>g%2?d+r:d+n);s.push({key:"C",data:f}),n=f[4],r=f[5];break}case"Q":s.push({key:"Q",data:[...u]}),n=u[2],r=u[3];break;case"q":{const f=u.map((d,g)=>g%2?d+r:d+n);s.push({key:"Q",data:f}),n=f[2],r=f[3];break}case"A":s.push({key:"A",data:[...u]}),n=u[5],r=u[6];break;case"a":n+=u[5],r+=u[6],s.push({key:"A",data:[u[0],u[1],u[2],u[3],u[4],n,r]});break;case"H":s.push({key:"H",data:[...u]}),n=u[0];break;case"h":n+=u[0],s.push({key:"H",data:[n]});break;case"V":s.push({key:"V",data:[...u]}),r=u[0];break;case"v":r+=u[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...u]}),n=u[2],r=u[3];break;case"s":{const f=u.map((d,g)=>g%2?d+r:d+n);s.push({key:"S",data:f}),n=f[2],r=f[3];break}case"T":s.push({key:"T",data:[...u]}),n=u[0],r=u[1];break;case"t":n+=u[0],r+=u[1],s.push({key:"T",data:[n,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),n=i,r=o;break}return s}function dA(e){const n=[];let r="",i=0,o=0,s=0,a=0,u=0,f=0;for(const{key:d,data:g}of e){switch(d){case"M":n.push({key:"M",data:[...g]}),[i,o]=g,[s,a]=g;break;case"C":n.push({key:"C",data:[...g]}),i=g[4],o=g[5],u=g[2],f=g[3];break;case"L":n.push({key:"L",data:[...g]}),[i,o]=g;break;case"H":i=g[0],n.push({key:"L",data:[i,o]});break;case"V":o=g[0],n.push({key:"L",data:[i,o]});break;case"S":{let p=0,y=0;r==="C"||r==="S"?(p=i+(i-u),y=o+(o-f)):(p=i,y=o),n.push({key:"C",data:[p,y,...g]}),u=g[0],f=g[1],i=g[2],o=g[3];break}case"T":{const[p,y]=g;let w=0,E=0;r==="Q"||r==="T"?(w=i+(i-u),E=o+(o-f)):(w=i,E=o);const S=i+2*(w-i)/3,D=o+2*(E-o)/3,A=p+2*(w-p)/3,P=y+2*(E-y)/3;n.push({key:"C",data:[S,D,A,P,p,y]}),u=w,f=E,i=p,o=y;break}case"Q":{const[p,y,w,E]=g,S=i+2*(p-i)/3,D=o+2*(y-o)/3,A=w+2*(p-w)/3,P=E+2*(y-E)/3;n.push({key:"C",data:[S,D,A,P,w,E]}),u=p,f=y,i=w,o=E;break}case"A":{const p=Math.abs(g[0]),y=Math.abs(g[1]),w=g[2],E=g[3],S=g[4],D=g[5],A=g[6];p===0||y===0?(n.push({key:"C",data:[i,o,D,A,D,A]}),i=D,o=A):(i!==D||o!==A)&&(gA(i,o,D,A,p,y,w,E,S).forEach(function(b){n.push({key:"C",data:b})}),i=D,o=A);break}case"Z":n.push({key:"Z",data:[]}),i=s,o=a;break}r=d}return n}function hk(e){return Math.PI*e/180}function fp(e,n,r){const i=e*Math.cos(r)-n*Math.sin(r),o=e*Math.sin(r)+n*Math.cos(r);return[i,o]}function gA(e,n,r,i,o,s,a,u,f,d){const g=hk(a);let p=[],y=0,w=0,E=0,S=0;if(d)[y,w,E,S]=d;else{[e,n]=fp(e,n,-g),[r,i]=fp(r,i,-g);const ue=(e-r)/2,he=(n-i)/2;let ye=ue*ue/(o*o)+he*he/(s*s);ye>1&&(ye=Math.sqrt(ye),o=ye*o,s=ye*s);const W=u===f?-1:1,O=o*o,N=s*s,F=O*N-O*he*he-N*ue*ue,j=O*he*he+N*ue*ue,U=W*Math.sqrt(Math.abs(F/j));E=U*o*he/s+(e+r)/2,S=U*-s*ue/o+(n+i)/2,y=Math.asin(parseFloat(((n-S)/s).toFixed(9))),w=Math.asin(parseFloat(((i-S)/s).toFixed(9))),e<E&&(y=Math.PI-y),r<E&&(w=Math.PI-w),y<0&&(y=Math.PI*2+y),w<0&&(w=Math.PI*2+w),f&&y>w&&(y=y-Math.PI*2),!f&&w>y&&(w=w-Math.PI*2)}let D=w-y;if(Math.abs(D)>Math.PI*120/180){const ue=w,he=r,ye=i;f&&w>y?w=y+Math.PI*120/180*1:w=y+Math.PI*120/180*-1,r=E+o*Math.cos(w),i=S+s*Math.sin(w),p=gA(r,i,he,ye,o,s,a,0,f,[w,ue,E,S])}D=w-y;const A=Math.cos(y),P=Math.sin(y),b=Math.cos(w),R=Math.sin(w),L=Math.tan(D/4),V=4/3*o*L,Z=4/3*s*L,ne=[e,n],le=[e+V*P,n-Z*A],de=[r+V*R,i-Z*b],Pe=[r,i];if(le[0]=2*ne[0]-le[0],le[1]=2*ne[1]-le[1],d)return[le,de,Pe].concat(p);{p=[le,de,Pe].concat(p);const ue=[];for(let he=0;he<p.length;he+=3){const ye=fp(p[he][0],p[he][1],g),W=fp(p[he+1][0],p[he+1][1],g),O=fp(p[he+2][0],p[he+2][1],g);ue.push([ye[0],ye[1],W[0],W[1],O[0],O[1]])}return ue}}const dk={randOffset:yk,randOffsetWithRange:wk,ellipse:mk,doubleLineOps:xk};function pA(e,n,r,i,o){return{type:"path",ops:lc(e,n,r,i,o)}}function Iv(e,n,r){const i=(e||[]).length;if(i>2){const o=[];for(let s=0;s<i-1;s++)o.push(...lc(e[s][0],e[s][1],e[s+1][0],e[s+1][1],r));return n&&o.push(...lc(e[i-1][0],e[i-1][1],e[0][0],e[0][1],r)),{type:"path",ops:o}}else if(i===2)return pA(e[0][0],e[0][1],e[1][0],e[1][1],r);return{type:"path",ops:[]}}function gk(e,n){return Iv(e,!0,n)}function pk(e,n,r,i,o){const s=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];return gk(s,o)}function zP(e,n){if(e.length){const i=typeof e[0][0]=="number"?[e]:e,o=ov(i[0],1*(1+n.roughness*.2),n),s=n.disableMultiStroke?[]:ov(i[0],1.5*(1+n.roughness*.22),VP(n));for(let a=1;a<i.length;a++){const u=i[a];if(u.length){const f=ov(u,1*(1+n.roughness*.2),n),d=n.disableMultiStroke?[]:ov(u,1.5*(1+n.roughness*.22),VP(n));for(const g of f)g.op!=="move"&&o.push(g);for(const g of d)g.op!=="move"&&s.push(g)}}return{type:"path",ops:o.concat(s)}}return{type:"path",ops:[]}}function mk(e,n,r,i,o){const s=mA(r,i,o);return Vx(e,n,o,s).opset}function mA(e,n,r){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(n/2,2))/2)),o=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/o;let a=Math.abs(e/2),u=Math.abs(n/2);const f=1-r.curveFitting;return a+=jt(a*f,r),u+=jt(u*f,r),{increment:s,rx:a,ry:u}}function Vx(e,n,r,i){const[o,s]=UP(i.increment,e,n,i.rx,i.ry,1,i.increment*Jv(.1,Jv(.4,1,r),r),r);let a=ey(o,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[u]=UP(i.increment,e,n,i.rx,i.ry,1.5,0,r),f=ey(u,null,r);a=a.concat(f)}return{estimatedPoints:s,opset:{type:"path",ops:a}}}function $P(e,n,r,i,o,s,a,u,f){const d=e,g=n;let p=Math.abs(r/2),y=Math.abs(i/2);p+=jt(p*.01,f),y+=jt(y*.01,f);let w=o,E=s;for(;w<0;)w+=Math.PI*2,E+=Math.PI*2;E-w>Math.PI*2&&(w=0,E=Math.PI*2);const S=Math.PI*2/f.curveStepCount,D=Math.min(S/2,(E-w)/2),A=XP(D,d,g,p,y,w,E,1,f);if(!f.disableMultiStroke){const P=XP(D,d,g,p,y,w,E,1.5,f);A.push(...P)}return a&&(u?A.push(...lc(d,g,d+p*Math.cos(w),g+y*Math.sin(w),f),...lc(d,g,d+p*Math.cos(E),g+y*Math.sin(E),f)):A.push({op:"lineTo",data:[d,g]},{op:"lineTo",data:[d+p*Math.cos(w),g+y*Math.sin(w)]})),{type:"path",ops:A}}function WP(e,n){const r=dA(hA(gE(e))),i=[];let o=[0,0],s=[0,0];for(const{key:a,data:u}of r)switch(a){case"M":{s=[u[0],u[1]],o=[u[0],u[1]];break}case"L":i.push(...lc(s[0],s[1],u[0],u[1],n)),s=[u[0],u[1]];break;case"C":{const[f,d,g,p,y,w]=u;i.push(...Ck(f,d,g,p,y,w,s,n)),s=[y,w];break}case"Z":i.push(...lc(s[0],s[1],o[0],o[1],n)),s=[o[0],o[1]];break}return{type:"path",ops:i}}function L2(e,n){const r=[];for(const i of e)if(i.length){const o=n.maxRandomnessOffset||0,s=i.length;if(s>2){r.push({op:"move",data:[i[0][0]+jt(o,n),i[0][1]+jt(o,n)]});for(let a=1;a<s;a++)r.push({op:"lineTo",data:[i[a][0]+jt(o,n),i[a][1]+jt(o,n)]})}}return{type:"fillPath",ops:r}}function qd(e,n){return ak(n,dk).fillPolygons(e,n)}function vk(e,n,r,i,o,s,a){const u=e,f=n;let d=Math.abs(r/2),g=Math.abs(i/2);d+=jt(d*.01,a),g+=jt(g*.01,a);let p=o,y=s;for(;p<0;)p+=Math.PI*2,y+=Math.PI*2;y-p>Math.PI*2&&(p=0,y=Math.PI*2);const w=(y-p)/a.curveStepCount,E=[];for(let S=p;S<=y;S=S+w)E.push([u+d*Math.cos(S),f+g*Math.sin(S)]);return E.push([u+d*Math.cos(y),f+g*Math.sin(y)]),E.push([u,f]),qd([E],a)}function yk(e,n){return jt(e,n)}function wk(e,n,r){return Jv(e,n,r)}function xk(e,n,r,i,o){return lc(e,n,r,i,o,!0)}function VP(e){const n=Object.assign({},e);return n.randomizer=void 0,e.seed&&(n.seed=e.seed+1),n}function vA(e){return e.randomizer||(e.randomizer=new uk(e.seed||0)),e.randomizer.next()}function Jv(e,n,r,i=1){return r.roughness*i*(vA(r)*(n-e)+e)}function jt(e,n,r=1){return Jv(-e,e,n,r)}function lc(e,n,r,i,o,s=!1){const a=s?o.disableMultiStrokeFill:o.disableMultiStroke,u=Ux(e,n,r,i,o,!0,!1);if(a)return u;const f=Ux(e,n,r,i,o,!0,!0);return u.concat(f)}function Ux(e,n,r,i,o,s,a){const u=Math.pow(e-r,2)+Math.pow(n-i,2),f=Math.sqrt(u);let d=1;f<200?d=1:f>500?d=.4:d=-.0016668*f+1.233334;let g=o.maxRandomnessOffset||0;g*g*100>u&&(g=f/10);const p=g/2,y=.2+vA(o)*.2;let w=o.bowing*o.maxRandomnessOffset*(i-n)/200,E=o.bowing*o.maxRandomnessOffset*(e-r)/200;w=jt(w,o,d),E=jt(E,o,d);const S=[],D=()=>jt(p,o,d),A=()=>jt(g,o,d),P=o.preserveVertices;return a?S.push({op:"move",data:[e+(P?0:D()),n+(P?0:D())]}):S.push({op:"move",data:[e+(P?0:jt(g,o,d)),n+(P?0:jt(g,o,d))]}),a?S.push({op:"bcurveTo",data:[w+e+(r-e)*y+D(),E+n+(i-n)*y+D(),w+e+2*(r-e)*y+D(),E+n+2*(i-n)*y+D(),r+(P?0:D()),i+(P?0:D())]}):S.push({op:"bcurveTo",data:[w+e+(r-e)*y+A(),E+n+(i-n)*y+A(),w+e+2*(r-e)*y+A(),E+n+2*(i-n)*y+A(),r+(P?0:A()),i+(P?0:A())]}),S}function ov(e,n,r){if(!e.length)return[];const i=[];i.push([e[0][0]+jt(n,r),e[0][1]+jt(n,r)]),i.push([e[0][0]+jt(n,r),e[0][1]+jt(n,r)]);for(let o=1;o<e.length;o++)i.push([e[o][0]+jt(n,r),e[o][1]+jt(n,r)]),o===e.length-1&&i.push([e[o][0]+jt(n,r),e[o][1]+jt(n,r)]);return ey(i,null,r)}function ey(e,n,r){const i=e.length,o=[];if(i>3){const s=[],a=1-r.curveTightness;o.push({op:"move",data:[e[1][0],e[1][1]]});for(let u=1;u+2<i;u++){const f=e[u];s[0]=[f[0],f[1]],s[1]=[f[0]+(a*e[u+1][0]-a*e[u-1][0])/6,f[1]+(a*e[u+1][1]-a*e[u-1][1])/6],s[2]=[e[u+1][0]+(a*e[u][0]-a*e[u+2][0])/6,e[u+1][1]+(a*e[u][1]-a*e[u+2][1])/6],s[3]=[e[u+1][0],e[u+1][1]],o.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(o.push({op:"move",data:[e[1][0],e[1][1]]}),o.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&o.push(...Ux(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return o}function UP(e,n,r,i,o,s,a,u){const f=u.roughness===0,d=[],g=[];if(f){e=e/4,g.push([n+i*Math.cos(-e),r+o*Math.sin(-e)]);for(let p=0;p<=Math.PI*2;p=p+e){const y=[n+i*Math.cos(p),r+o*Math.sin(p)];d.push(y),g.push(y)}g.push([n+i*Math.cos(0),r+o*Math.sin(0)]),g.push([n+i*Math.cos(e),r+o*Math.sin(e)])}else{const p=jt(.5,u)-Math.PI/2;g.push([jt(s,u)+n+.9*i*Math.cos(p-e),jt(s,u)+r+.9*o*Math.sin(p-e)]);const y=Math.PI*2+p-.01;for(let w=p;w<y;w=w+e){const E=[jt(s,u)+n+i*Math.cos(w),jt(s,u)+r+o*Math.sin(w)];d.push(E),g.push(E)}g.push([jt(s,u)+n+i*Math.cos(p+Math.PI*2+a*.5),jt(s,u)+r+o*Math.sin(p+Math.PI*2+a*.5)]),g.push([jt(s,u)+n+.98*i*Math.cos(p+a),jt(s,u)+r+.98*o*Math.sin(p+a)]),g.push([jt(s,u)+n+.9*i*Math.cos(p+a*.5),jt(s,u)+r+.9*o*Math.sin(p+a*.5)])}return[g,d]}function XP(e,n,r,i,o,s,a,u,f){const d=s+jt(.1,f),g=[];g.push([jt(u,f)+n+.9*i*Math.cos(d-e),jt(u,f)+r+.9*o*Math.sin(d-e)]);for(let p=d;p<=a;p=p+e)g.push([jt(u,f)+n+i*Math.cos(p),jt(u,f)+r+o*Math.sin(p)]);return g.push([n+i*Math.cos(a),r+o*Math.sin(a)]),g.push([n+i*Math.cos(a),r+o*Math.sin(a)]),ey(g,null,f)}function Ck(e,n,r,i,o,s,a,u){const f=[],d=[u.maxRandomnessOffset||1,(u.maxRandomnessOffset||1)+.3];let g=[0,0];const p=u.disableMultiStroke?1:2,y=u.preserveVertices;for(let w=0;w<p;w++)w===0?f.push({op:"move",data:[a[0],a[1]]}):f.push({op:"move",data:[a[0]+(y?0:jt(d[0],u)),a[1]+(y?0:jt(d[0],u))]}),g=y?[o,s]:[o+jt(d[w],u),s+jt(d[w],u)],f.push({op:"bcurveTo",data:[e+jt(d[w],u),n+jt(d[w],u),r+jt(d[w],u),i+jt(d[w],u),g[0],g[1]]});return f}function hp(e){return[...e]}function KP(e,n=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const i=[];if(r===3)i.push(hp(e[0]),hp(e[1]),hp(e[2]),hp(e[2]));else{const o=[];o.push(e[0],e[0]);for(let u=1;u<e.length;u++)o.push(e[u]),u===e.length-1&&o.push(e[u]);const s=[],a=1-n;i.push(hp(o[0]));for(let u=1;u+2<o.length;u++){const f=o[u];s[0]=[f[0],f[1]],s[1]=[f[0]+(a*o[u+1][0]-a*o[u-1][0])/6,f[1]+(a*o[u+1][1]-a*o[u-1][1])/6],s[2]=[o[u+1][0]+(a*o[u][0]-a*o[u+2][0])/6,o[u+1][1]+(a*o[u][1]-a*o[u+2][1])/6],s[3]=[o[u+1][0],o[u+1][1]],i.push(s[1],s[2],s[3])}}return i}function Ek(e,n){return Math.sqrt(Fv(e,n))}function Fv(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function Pk(e,n,r){const i=Fv(n,r);if(i===0)return Fv(e,n);let o=((e[0]-n[0])*(r[0]-n[0])+(e[1]-n[1])*(r[1]-n[1]))/i;return o=Math.max(0,Math.min(1,o)),Fv(e,Af(n,r,o))}function Af(e,n,r){return[e[0]+(n[0]-e[0])*r,e[1]+(n[1]-e[1])*r]}function Sk(e,n){const r=e[n+0],i=e[n+1],o=e[n+2],s=e[n+3];let a=3*i[0]-2*r[0]-s[0];a*=a;let u=3*i[1]-2*r[1]-s[1];u*=u;let f=3*o[0]-2*s[0]-r[0];f*=f;let d=3*o[1]-2*s[1]-r[1];return d*=d,a<f&&(a=f),u<d&&(u=d),a+u}function Xx(e,n,r,i){const o=i||[];if(Sk(e,n)<r){const s=e[n+0];o.length?Ek(o[o.length-1],s)>1&&o.push(s):o.push(s),o.push(e[n+3])}else{const a=e[n+0],u=e[n+1],f=e[n+2],d=e[n+3],g=Af(a,u,.5),p=Af(u,f,.5),y=Af(f,d,.5),w=Af(g,p,.5),E=Af(p,y,.5),S=Af(w,E,.5);Xx([a,g,w,S],0,r,o),Xx([S,E,y,d],0,r,o)}return o}function Kx(e,n,r,i,o){const s=o||[],a=e[n],u=e[r-1];let f=0,d=1;for(let g=n+1;g<r-1;++g){const p=Pk(e[g],a,u);p>f&&(f=p,d=g)}return Math.sqrt(f)>i?(Kx(e,n,d+1,i,s),Kx(e,d,r,i,s)):(s.length||s.push(a),s.push(u)),s}function qP(e,n=.15,r){const i=[],o=(e.length-1)/3;for(let s=0;s<o;s++){const a=s*3;Xx(e,a,n,i)}return r&&r>0?Kx(i,0,i.length,r):i}function Tk(e,n){return Math.sqrt(Lv(e,n))}function Lv(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function Dk(e,n,r){const i=Lv(n,r);if(i===0)return Lv(e,n);let o=((e[0]-n[0])*(r[0]-n[0])+(e[1]-n[1])*(r[1]-n[1]))/i;return o=Math.max(0,Math.min(1,o)),Lv(e,Bf(n,r,o))}function Bf(e,n,r){return[e[0]+(n[0]-e[0])*r,e[1]+(n[1]-e[1])*r]}function Ak(e,n){const r=e[n+0],i=e[n+1],o=e[n+2],s=e[n+3];let a=3*i[0]-2*r[0]-s[0];a*=a;let u=3*i[1]-2*r[1]-s[1];u*=u;let f=3*o[0]-2*s[0]-r[0];f*=f;let d=3*o[1]-2*s[1]-r[1];return d*=d,a<f&&(a=f),u<d&&(u=d),a+u}function qx(e,n,r,i){const o=i||[];if(Ak(e,n)<r){const s=e[n+0];o.length?Tk(o[o.length-1],s)>1&&o.push(s):o.push(s),o.push(e[n+3])}else{const a=e[n+0],u=e[n+1],f=e[n+2],d=e[n+3],g=Bf(a,u,.5),p=Bf(u,f,.5),y=Bf(f,d,.5),w=Bf(g,p,.5),E=Bf(p,y,.5),S=Bf(w,E,.5);qx([a,g,w,S],0,r,o),qx([S,E,y,d],0,r,o)}return o}function Bk(e,n){return Yx(e,0,e.length,n)}function Yx(e,n,r,i,o){const s=o||[],a=e[n],u=e[r-1];let f=0,d=1;for(let g=n+1;g<r-1;++g){const p=Dk(e[g],a,u);p>f&&(f=p,d=g)}return Math.sqrt(f)>i?(Yx(e,n,d+1,i,s),Yx(e,d,r,i,s)):(s.length||s.push(a),s.push(u)),s}function Mk(e,n=.15,r){const i=[],o=(e.length-1)/3;for(let s=0;s<o;s++){const a=s*3;qx(e,a,n,i)}return i}function Rk(e,n,r){const i=gE(e),o=dA(hA(i)),s=[];let a=[],u=[0,0],f=[];const d=()=>{f.length>=4&&a.push(...Mk(f,n)),f=[]},g=()=>{d(),a.length&&(s.push(a),a=[])};for(const{key:y,data:w}of o)switch(y){case"M":g(),u=[w[0],w[1]],a.push(u);break;case"L":d(),a.push([w[0],w[1]]);break;case"C":if(!f.length){const E=a.length?a[a.length-1]:u;f.push([E[0],E[1]])}f.push([w[0],w[1]]),f.push([w[2],w[3]]),f.push([w[4],w[5]]);break;case"Z":d(),a.push([u[0],u[1]]);break}if(g(),!r)return s;const p=[];for(const y of s){const w=Bk(y,r);w.length&&p.push(w)}return p}const Wo="none";class ty{constructor(n){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=n||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return lk()}_o(n){return n?Object.assign({},this.defaultOptions,n):this.defaultOptions}_d(n,r,i){return{shape:n,sets:r||[],options:i||this.defaultOptions}}line(n,r,i,o,s){const a=this._o(s);return this._d("line",[pA(n,r,i,o,a)],a)}rectangle(n,r,i,o,s){const a=this._o(s),u=[],f=pk(n,r,i,o,a);if(a.fill){const d=[[n,r],[n+i,r],[n+i,r+o],[n,r+o]];a.fillStyle==="solid"?u.push(L2([d],a)):u.push(qd([d],a))}return a.stroke!==Wo&&u.push(f),this._d("rectangle",u,a)}ellipse(n,r,i,o,s){const a=this._o(s),u=[],f=mA(i,o,a),d=Vx(n,r,a,f);if(a.fill)if(a.fillStyle==="solid"){const g=Vx(n,r,a,f).opset;g.type="fillPath",u.push(g)}else u.push(qd([d.estimatedPoints],a));return a.stroke!==Wo&&u.push(d.opset),this._d("ellipse",u,a)}circle(n,r,i,o){const s=this.ellipse(n,r,i,i,o);return s.shape="circle",s}linearPath(n,r){const i=this._o(r);return this._d("linearPath",[Iv(n,!1,i)],i)}arc(n,r,i,o,s,a,u=!1,f){const d=this._o(f),g=[],p=$P(n,r,i,o,s,a,u,!0,d);if(u&&d.fill)if(d.fillStyle==="solid"){const y=Object.assign({},d);y.disableMultiStroke=!0;const w=$P(n,r,i,o,s,a,!0,!1,y);w.type="fillPath",g.push(w)}else g.push(vk(n,r,i,o,s,a,d));return d.stroke!==Wo&&g.push(p),this._d("arc",g,d)}curve(n,r){const i=this._o(r),o=[],s=zP(n,i);if(i.fill&&i.fill!==Wo)if(i.fillStyle==="solid"){const a=zP(n,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],u=n;if(u.length){const d=typeof u[0][0]=="number"?[u]:u;for(const g of d)g.length<3?a.push(...g):g.length===3?a.push(...qP(KP([g[0],g[0],g[1],g[2]]),10,(1+i.roughness)/2)):a.push(...qP(KP(g),10,(1+i.roughness)/2))}a.length&&o.push(qd([a],i))}return i.stroke!==Wo&&o.push(s),this._d("curve",o,i)}polygon(n,r){const i=this._o(r),o=[],s=Iv(n,!0,i);return i.fill&&(i.fillStyle==="solid"?o.push(L2([n],i)):o.push(qd([n],i))),i.stroke!==Wo&&o.push(s),this._d("polygon",o,i)}path(n,r){const i=this._o(r),o=[];if(!n)return this._d("path",o,i);n=(n||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==Wo,a=i.stroke!==Wo,u=!!(i.simplification&&i.simplification<1),f=u?4-4*(i.simplification||1):(1+i.roughness)/2,d=Rk(n,1,f),g=WP(n,i);if(s)if(i.fillStyle==="solid")if(d.length===1){const p=WP(n,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(p.ops)})}else o.push(L2(d,i));else o.push(qd(d,i));return a&&(u?d.forEach(p=>{o.push(Iv(p,!1,i))}):o.push(g)),this._d("path",o,i)}opsToPath(n,r){let i="";for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(a=>+a.toFixed(r)):o.data;switch(o.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(n){const r=n.sets||[],i=n.options||this.defaultOptions,o=[];for(const s of r){let a=null;switch(s.type){case"path":a={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Wo};break;case"fillPath":a={d:this.opsToPath(s),stroke:Wo,strokeWidth:0,fill:i.fill||Wo};break;case"fillSketch":a=this.fillSketch(s,i);break}a&&o.push(a)}return o}fillSketch(n,r){let i=r.fillWeight;return i<0&&(i=r.strokeWidth/2),{d:this.opsToPath(n),stroke:r.fill||Wo,strokeWidth:i,fill:Wo}}_mergedShape(n){return n.filter((r,i)=>i===0?!0:r.op!=="move")}}class kk{constructor(n,r){this.canvas=n,this.ctx=this.canvas.getContext("2d"),this.gen=new ty(r)}draw(n){const r=n.sets||[],i=n.options||this.getDefaultOptions(),o=this.ctx,s=n.options.fixedDecimalPlaceDigits;for(const a of r)switch(a.type){case"path":o.save(),o.strokeStyle=i.stroke==="none"?"transparent":i.stroke,o.lineWidth=i.strokeWidth,i.strokeLineDash&&o.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(o.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(o,a,s),o.restore();break;case"fillPath":{o.save(),o.fillStyle=i.fill||"";const u=n.shape==="curve"||n.shape==="polygon"||n.shape==="path"?"evenodd":"nonzero";this._drawToContext(o,a,s,u),o.restore();break}case"fillSketch":this.fillSketch(o,a,i);break}}fillSketch(n,r,i){let o=i.fillWeight;o<0&&(o=i.strokeWidth/2),n.save(),i.fillLineDash&&n.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(n.lineDashOffset=i.fillLineDashOffset),n.strokeStyle=i.fill||"",n.lineWidth=o,this._drawToContext(n,r,i.fixedDecimalPlaceDigits),n.restore()}_drawToContext(n,r,i,o="nonzero"){n.beginPath();for(const s of r.ops){const a=typeof i=="number"&&i>=0?s.data.map(u=>+u.toFixed(i)):s.data;switch(s.op){case"move":n.moveTo(a[0],a[1]);break;case"bcurveTo":n.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":n.lineTo(a[0],a[1]);break}}r.type==="fillPath"?n.fill(o):n.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(n,r,i,o,s){const a=this.gen.line(n,r,i,o,s);return this.draw(a),a}rectangle(n,r,i,o,s){const a=this.gen.rectangle(n,r,i,o,s);return this.draw(a),a}ellipse(n,r,i,o,s){const a=this.gen.ellipse(n,r,i,o,s);return this.draw(a),a}circle(n,r,i,o){const s=this.gen.circle(n,r,i,o);return this.draw(s),s}linearPath(n,r){const i=this.gen.linearPath(n,r);return this.draw(i),i}polygon(n,r){const i=this.gen.polygon(n,r);return this.draw(i),i}arc(n,r,i,o,s,a,u=!1,f){const d=this.gen.arc(n,r,i,o,s,a,u,f);return this.draw(d),d}curve(n,r){const i=this.gen.curve(n,r);return this.draw(i),i}path(n,r){const i=this.gen.path(n,r);return this.draw(i),i}}const sv="http://www.w3.org/2000/svg";class bk{constructor(n,r){this.svg=n,this.gen=new ty(r)}draw(n){const r=n.sets||[],i=n.options||this.getDefaultOptions(),o=this.svg.ownerDocument||window.document,s=o.createElementNS(sv,"g"),a=n.options.fixedDecimalPlaceDigits;for(const u of r){let f=null;switch(u.type){case"path":{f=o.createElementNS(sv,"path"),f.setAttribute("d",this.opsToPath(u,a)),f.setAttribute("stroke",i.stroke),f.setAttribute("stroke-width",i.strokeWidth+""),f.setAttribute("fill","none"),i.strokeLineDash&&f.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&f.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{f=o.createElementNS(sv,"path"),f.setAttribute("d",this.opsToPath(u,a)),f.setAttribute("stroke","none"),f.setAttribute("stroke-width","0"),f.setAttribute("fill",i.fill||""),(n.shape==="curve"||n.shape==="polygon")&&f.setAttribute("fill-rule","evenodd");break}case"fillSketch":{f=this.fillSketch(o,u,i);break}}f&&s.appendChild(f)}return s}fillSketch(n,r,i){let o=i.fillWeight;o<0&&(o=i.strokeWidth/2);const s=n.createElementNS(sv,"path");return s.setAttribute("d",this.opsToPath(r,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",o+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(n,r){return this.gen.opsToPath(n,r)}line(n,r,i,o,s){const a=this.gen.line(n,r,i,o,s);return this.draw(a)}rectangle(n,r,i,o,s){const a=this.gen.rectangle(n,r,i,o,s);return this.draw(a)}ellipse(n,r,i,o,s){const a=this.gen.ellipse(n,r,i,o,s);return this.draw(a)}circle(n,r,i,o){const s=this.gen.circle(n,r,i,o);return this.draw(s)}linearPath(n,r){const i=this.gen.linearPath(n,r);return this.draw(i)}polygon(n,r){const i=this.gen.polygon(n,r);return this.draw(i)}arc(n,r,i,o,s,a,u=!1,f){const d=this.gen.arc(n,r,i,o,s,a,u,f);return this.draw(d)}curve(n,r){const i=this.gen.curve(n,r);return this.draw(i)}path(n,r){const i=this.gen.path(n,r);return this.draw(i)}}const Ok={canvas(e,n){return new kk(e,n)},svg(e,n){return new bk(e,n)},generator(e){return new ty(e)},newSeed(){return ty.newSeed()}};var yA=Symbol.for("immer-nothing"),YP=Symbol.for("immer-draftable"),Zo=Symbol.for("immer-state");function ia(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dg=Object.getPrototypeOf;function Ul(e){return!!e&&!!e[Zo]}function Wf(e){var n;return e?wA(e)||Array.isArray(e)||!!e[YP]||!!((n=e.constructor)!=null&&n[YP])||Uy(e)||Xy(e):!1}var Ik=Object.prototype.constructor.toString();function wA(e){if(!e||typeof e!="object")return!1;const n=dg(e);if(n===null)return!0;const r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Ik}function ny(e,n){Vy(e)===0?Reflect.ownKeys(e).forEach(r=>{n(r,e[r],e)}):e.forEach((r,i)=>n(i,r,e))}function Vy(e){const n=e[Zo];return n?n.type_:Array.isArray(e)?1:Uy(e)?2:Xy(e)?3:0}function Zx(e,n){return Vy(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function xA(e,n,r){const i=Vy(e);i===2?e.set(n,r):i===3?e.add(r):e[n]=r}function Fk(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function Uy(e){return e instanceof Map}function Xy(e){return e instanceof Set}function Mf(e){return e.copy_||e.base_}function Qx(e,n){if(Uy(e))return new Map(e);if(Xy(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=wA(e);if(n===!0||n==="class_only"&&!r){const i=Object.getOwnPropertyDescriptors(e);delete i[Zo];let o=Reflect.ownKeys(i);for(let s=0;s<o.length;s++){const a=o[s],u=i[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(i[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[a]})}return Object.create(dg(e),i)}else{const i=dg(e);if(i!==null&&r)return{...e};const o=Object.create(i);return Object.assign(o,e)}}function pE(e,n=!1){return Ky(e)||Ul(e)||!Wf(e)||(Vy(e)>1&&(e.set=e.add=e.clear=e.delete=Lk),Object.freeze(e),n&&Object.entries(e).forEach(([r,i])=>pE(i,!0))),e}function Lk(){ia(2)}function Ky(e){return Object.isFrozen(e)}var _k={};function Vf(e){const n=_k[e];return n||ia(0,e),n}var Hp;function CA(){return Hp}function Nk(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ZP(e,n){n&&(Vf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function Jx(e){eC(e),e.drafts_.forEach(Hk),e.drafts_=null}function eC(e){e===Hp&&(Hp=e.parent_)}function QP(e){return Hp=Nk(Hp,e)}function Hk(e){const n=e[Zo];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function JP(e,n){n.unfinalizedDrafts_=n.drafts_.length;const r=n.drafts_[0];return e!==void 0&&e!==r?(r[Zo].modified_&&(Jx(n),ia(4)),Wf(e)&&(e=ry(n,e),n.parent_||iy(n,e)),n.patches_&&Vf("Patches").generateReplacementPatches_(r[Zo].base_,e,n.patches_,n.inversePatches_)):e=ry(n,r,[]),Jx(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==yA?e:void 0}function ry(e,n,r){if(Ky(n))return n;const i=n[Zo];if(!i)return ny(n,(o,s)=>eS(e,i,n,o,s,r)),n;if(i.scope_!==e)return n;if(!i.modified_)return iy(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let s=o,a=!1;i.type_===3&&(s=new Set(o),o.clear(),a=!0),ny(s,(u,f)=>eS(e,i,o,u,f,r,a)),iy(e,o,!1),r&&e.patches_&&Vf("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function eS(e,n,r,i,o,s,a){if(Ul(o)){const u=s&&n&&n.type_!==3&&!Zx(n.assigned_,i)?s.concat(i):void 0,f=ry(e,o,u);if(xA(r,i,f),Ul(f))e.canAutoFreeze_=!1;else return}else a&&r.add(o);if(Wf(o)&&!Ky(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ry(e,o),(!n||!n.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,i)&&iy(e,o)}}function iy(e,n,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pE(n,r)}function Gk(e,n){const r=Array.isArray(e),i={type_:r?1:0,scope_:n?n.scope_:CA(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=i,s=mE;r&&(o=[i],s=Gp);const{revoke:a,proxy:u}=Proxy.revocable(o,s);return i.draft_=u,i.revoke_=a,u}var mE={get(e,n){if(n===Zo)return e;const r=Mf(e);if(!Zx(r,n))return jk(e,r,n);const i=r[n];return e.finalized_||!Wf(i)?i:i===_2(e.base_,n)?(N2(e),e.copy_[n]=nC(i,e)):i},has(e,n){return n in Mf(e)},ownKeys(e){return Reflect.ownKeys(Mf(e))},set(e,n,r){const i=EA(Mf(e),n);if(i!=null&&i.set)return i.set.call(e.draft_,r),!0;if(!e.modified_){const o=_2(Mf(e),n),s=o==null?void 0:o[Zo];if(s&&s.base_===r)return e.copy_[n]=r,e.assigned_[n]=!1,!0;if(Fk(r,o)&&(r!==void 0||Zx(e.base_,n)))return!0;N2(e),tC(e)}return e.copy_[n]===r&&(r!==void 0||n in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=r,e.assigned_[n]=!0),!0},deleteProperty(e,n){return _2(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,N2(e),tC(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const r=Mf(e),i=Reflect.getOwnPropertyDescriptor(r,n);return i&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:i.enumerable,value:r[n]}},defineProperty(){ia(11)},getPrototypeOf(e){return dg(e.base_)},setPrototypeOf(){ia(12)}},Gp={};ny(mE,(e,n)=>{Gp[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Gp.deleteProperty=function(e,n){return Gp.set.call(this,e,n,void 0)};Gp.set=function(e,n,r){return mE.set.call(this,e[0],n,r,e[0])};function _2(e,n){const r=e[Zo];return(r?Mf(r):e)[n]}function jk(e,n,r){var o;const i=EA(n,r);return i?"value"in i?i.value:(o=i.get)==null?void 0:o.call(e.draft_):void 0}function EA(e,n){if(!(n in e))return;let r=dg(e);for(;r;){const i=Object.getOwnPropertyDescriptor(r,n);if(i)return i;r=dg(r)}}function tC(e){e.modified_||(e.modified_=!0,e.parent_&&tC(e.parent_))}function N2(e){e.copy_||(e.copy_=Qx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zk=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,r,i)=>{if(typeof n=="function"&&typeof r!="function"){const s=r;r=n;const a=this;return function(f=s,...d){return a.produce(f,g=>r.call(this,g,...d))}}typeof r!="function"&&ia(6),i!==void 0&&typeof i!="function"&&ia(7);let o;if(Wf(n)){const s=QP(this),a=nC(n,void 0);let u=!0;try{o=r(a),u=!1}finally{u?Jx(s):eC(s)}return ZP(s,i),JP(o,s)}else if(!n||typeof n!="object"){if(o=r(n),o===void 0&&(o=n),o===yA&&(o=void 0),this.autoFreeze_&&pE(o,!0),i){const s=[],a=[];Vf("Patches").generateReplacementPatches_(n,o,s,a),i(s,a)}return o}else ia(1,n)},this.produceWithPatches=(n,r)=>{if(typeof n=="function")return(a,...u)=>this.produceWithPatches(a,f=>n(f,...u));let i,o;return[this.produce(n,r,(a,u)=>{i=a,o=u}),i,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Wf(e)||ia(8),Ul(e)&&(e=$k(e));const n=QP(this),r=nC(e,void 0);return r[Zo].isManual_=!0,eC(n),r}finishDraft(e,n){const r=e&&e[Zo];(!r||!r.isManual_)&&ia(9);const{scope_:i}=r;return ZP(i,n),JP(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(n=n.slice(r+1));const i=Vf("Patches").applyPatches_;return Ul(e)?i(e,n):this.produce(e,o=>i(o,n))}};function nC(e,n){const r=Uy(e)?Vf("MapSet").proxyMap_(e,n):Xy(e)?Vf("MapSet").proxySet_(e,n):Gk(e,n);return(n?n.scope_:CA()).drafts_.push(r),r}function $k(e){return Ul(e)||ia(10,e),PA(e)}function PA(e){if(!Wf(e)||Ky(e))return e;const n=e[Zo];let r;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=Qx(e,n.scope_.immer_.useStrictShallowCopy_)}else r=Qx(e,!0);return ny(r,(i,o)=>{xA(r,i,PA(o))}),n&&(n.finalized_=!1),r}var Qo=new zk,Wk=Qo.produce;Qo.produceWithPatches.bind(Qo);Qo.setAutoFreeze.bind(Qo);Qo.setUseStrictShallowCopy.bind(Qo);Qo.applyPatches.bind(Qo);var av=Qo.createDraft.bind(Qo),lv=Qo.finishDraft.bind(Qo),na={},tS;function Vk(){if(tS)return na;tS=1,Object.defineProperty(na,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},r={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=1;o<20;o++)i["f"+o]=111+o;function s(y,w,E){w&&!("byKey"in w)&&(E=w,w=null),Array.isArray(y)||(y=[y]);var S=y.map(function(P){return f(P,w)}),D=function(b){return S.some(function(R){return d(R,b)})},A=E==null?D:D(E);return A}function a(y,w){return s(y,w)}function u(y,w){return s(y,{byKey:!0},w)}function f(y,w){var E=w&&w.byKey,S={};y=y.replace("++","+add");var D=y.split("+"),A=D.length;for(var P in n)S[n[P]]=!1;var b=!0,R=!1,L=void 0;try{for(var V=D[Symbol.iterator](),Z;!(b=(Z=V.next()).done);b=!0){var ne=Z.value,le=ne.endsWith("?")&&ne.length>1;le&&(ne=ne.slice(0,-1));var de=p(ne),Pe=n[de];if(ne.length>1&&!Pe&&!r[ne]&&!i[de])throw new TypeError('Unknown modifier: "'+ne+'"');(A===1||!Pe)&&(E?S.key=de:S.which=g(ne)),Pe&&(S[Pe]=le?null:!0)}}catch(ue){R=!0,L=ue}finally{try{!b&&V.return&&V.return()}finally{if(R)throw L}}return S}function d(y,w){for(var E in y){var S=y[E],D=void 0;if(S!=null&&(E==="key"&&w.key!=null?D=w.key.toLowerCase():E==="which"?D=S===91&&w.which===93?91:w.which:D=w[E],!(D==null&&S===!1)&&D!==S))return!1}return!0}function g(y){y=p(y);var w=i[y]||y.toUpperCase().charCodeAt(0);return w}function p(y){return y=y.toLowerCase(),y=r[y]||y,y}return na.default=s,na.isHotkey=s,na.isCodeHotkey=a,na.isKeyHotkey=u,na.parseHotkey=f,na.compareHotkey=d,na.toKeyCode=g,na.toKeyName=p,na}var on=Vk(),oa;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(oa||(oa={}));var Sp;(function(e){e.crosshair="crosshair"})(Sp||(Sp={}));const H2=[oa.ns,oa.nesw,oa.ew,oa.nwse],el="plait-board-attached",pr=1,rC=2,C1="selection-rectangle",Uk="selection-rectangle-bounding",Xk=.1,SA=.1,TA=4,Kk="plait-board-container",DA="active-with-moving",nS="rotate-handle",qk="resize-handle",Yk=20,AA={MAIN:0,WHEEL:1},vE=3,BA=10,yE=5;function Zk(e){return!!e.beforeContextChange}function Qk(e){return!!e.onContextChanged}const rS=new WeakMap,_v=new WeakMap,og=new WeakMap,_f=new WeakMap,iC=new WeakMap,yp=new WeakMap,wp=new WeakMap,oC=new WeakMap,oy=new WeakMap,sy=new WeakMap,sC=new WeakMap,aC=new WeakMap,lC=new WeakMap,uC=new WeakMap,Hl=new WeakMap,MA=new WeakMap,cC=new WeakMap,RA=new WeakMap,wE=new WeakMap,xE=new WeakMap,qy=new WeakMap,Yy=new WeakMap,iS=new WeakMap,xp=new WeakMap;function Uf(e){return e==null}const jp=(e,n)=>e+Math.floor(n*255).toString(16);function Jk(e){return e.button===2}function CE(e){const n=new Map;return e.forEach(r=>{n.has(r.id)||n.set(r.id,r)}),Array.from(n.values())}const eb=(e,n,r=e.length-1)=>{r<0&&(r=e.length+r),r=Math.min(e.length-1,Math.max(r,0));let i=r+1;for(;--i>-1;)if(n(e[i],i,e))return i;return-1},tb=(e,n,r=0)=>{r<0&&(r=e.length+r),r=Math.min(e.length,Math.max(r,0));let i=r-1;for(;++i<e.length;)if(n(e[i],i,e))return i;return-1},nb=e=>{e.sort((n,r)=>n-r);for(let n=1;n<e.length;n++)if(e[n]!==e[n-1]+1)return!1;return!0},rb={isViewport:e=>!Uf(e.zoom)&&!Uf(e.viewBackgroundColor)},Dt={ancestors(e,n={}){const{reverse:r=!1}=n;let i=Dt.levels(e,n);return r?i=i.slice(1):i=i.slice(0,-1),i},levels(e,n={}){const{reverse:r=!1}=n,i=[];for(let o=0;o<=e.length;o++)i.push(e.slice(0,o));return r&&i.reverse(),i},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const n=e[e.length-1];return e.slice(0,-1).concat(n+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const n=e[e.length-1];if(n<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(n-1)},isAncestor(e,n){return e.length<n.length&&Dt.compare(e,n)===0},compare(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){if(e[i]<n[i])return-1;if(e[i]>n[i])return 1}return 0},equals(e,n){return e.length===n.length&&e.every((r,i)=>r===n[i])},endsBefore(e,n){const r=e.length-1,i=e.slice(0,r),o=n.slice(0,r),s=e[r],a=n[r];return Dt.equals(i,o)&&s<a},isSibling(e,n){if(e.length!==n.length)return!1;const r=e.slice(0,-1),i=n.slice(0,-1),o=e[e.length-1],s=n[n.length-1];return o!==s&&Dt.equals(r,i)},transform(e,n){if(!e)return null;const r=[...e];if(e.length===0)return r;switch(n.type){case"insert_node":{const{path:i}=n;(Dt.equals(i,r)||Dt.endsBefore(i,r)||Dt.isAncestor(i,r))&&(r[i.length-1]+=1);break}case"remove_node":{const{path:i}=n;if(Dt.equals(i,r)||Dt.isAncestor(i,r))return null;Dt.endsBefore(i,r)&&(r[i.length-1]-=1);break}case"move_node":{const{path:i,newPath:o}=n;if(Dt.equals(i,o))return r;if(Dt.isAncestor(i,r)||Dt.equals(i,r)){const s=o.slice();return Dt.endsBefore(i,o)&&i.length<o.length&&(s[i.length-1]-=1),s.concat(r.slice(i.length))}else Dt.isSibling(i,o)&&(Dt.isAncestor(o,r)||Dt.equals(o,r))?Dt.endsBefore(i,r)?r[i.length-1]-=1:r[i.length-1]+=1:Dt.endsBefore(o,r)||Dt.equals(o,r)||Dt.isAncestor(o,r)?(Dt.endsBefore(i,r)&&(r[i.length-1]-=1),r[o.length-1]+=1):Dt.endsBefore(i,r)&&(Dt.equals(o,r)&&(r[o.length-1]+=1),r[i.length-1]-=1);break}}return r}},tn={parent:(e,n)=>{const r=Dt.parent(n);return tn.get(e,r)},*parents(e,n,r={}){for(const i of Dt.ancestors(n,r))yield tn.get(e,i)},get(e,n){let r=e;for(let i=0;i<n.length;i++){const o=n[i];if(!r||!r.children||!r.children[o])throw new Error(`Cannot find a descendant at path [${n}]`);r=r.children[o]}return r},last(e,n){let r=tn.get(e,n);for(;r&&r.children&&r.children.length>0;){const i=r.children.length-1;r=r.children[i]}return r},first(e,n){const r=n.slice();let i=tn.get(e,r);if(!i.children||!e.isExpanded(i))return i;for(;i&&i.children&&i.children.length>0&&e.isExpanded(i)&&i.children.length!==0;)i=i.children[0],r.push(0);return i}},ib=(e,n,r,i,o)=>{var s,a;switch(o.type){case"insert_node":{const{path:u,node:f}=o,d=tn.parent(e,u),g=u[u.length-1];if(!d.children||g>d.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);d.children.splice(g,0,f);break}case"remove_node":{const{path:u}=o,f=tn.parent(e,u),d=u[u.length-1];if(!f.children||d>f.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);f.children.splice(d,1);break}case"move_node":{const{path:u,newPath:f}=o;if(Dt.isAncestor(u,f))throw new Error(`Cannot move a path [${u}] to new path [${f}] because the destination is inside itself.`);const d=tn.get(e,u),g=tn.parent(e,u),p=u[u.length-1];(s=g.children)==null||s.splice(p,1);const y=Dt.transform(u,o),w=tn.get(e,Dt.parent(y)),E=y[y.length-1];(a=w.children)==null||a.splice(E,0,d);break}case"set_node":{const{path:u,properties:f,newProperties:d}=o;if(u.length===0)throw new Error("Cannot set properties on the root node!");const g=tn.get(e,u);for(const p in d){const y=d[p];y==null?delete g[p]:g[p]=y}for(const p in f)d.hasOwnProperty(p)||delete g[p];break}case"set_viewport":{const{newProperties:u}=o;if(u==null)r=u;else{if(r==null){if(!rb.isViewport(u))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(u)} when there is no current viewport.`);r={...u}}for(const f in u){const d=u[f];d==null?delete r[f]:r[f]=d}}break}case"set_selection":{const{newProperties:u}=o;u==null?n=u:n===null?n=o.newProperties:n=u;break}case"set_theme":{const{newProperties:u}=o;i=u;break}}return{selection:n,viewport:r,theme:i}},ob={transform(e,n){e.children=av(e.children);let r=e.viewport&&av(e.viewport),i=e.selection&&av(e.selection),o=e.theme&&av(e.theme);try{const s=ib(e,i,r,o,n);r=s.viewport,i=s.selection,o=s.theme}finally{e.children=lv(e.children),i?e.selection=Ul(i)?lv(i):i:e.selection=null,e.viewport=Ul(r)?lv(r):r,e.theme=Ul(o)?lv(o):o}}},_={isHit:(e,n)=>_.isHitX(e,n)&&_.isHitY(e,n),isHitX:(e,n)=>{const r=e.x<n.x?e.x:n.x,i=e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width;return Math.floor(i-r-e.width-n.width)<=0},isHitY:(e,n)=>{const r=e.y<n.y?e.y:n.y,i=e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height;return Math.floor(i-r-e.height-n.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,n,r){return _.getRectangleByPoint([e[0]-n/2,e[1]-r/2],n,r)},getRectangleByPoint(e,n,r){return{x:e[0],y:e[1],width:n,height:r}},getRectangleByPoints(e){sb(e)&&(e=[e]);let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const a of e){const u=a.map(d=>d[0]),f=a.map(d=>d[1]);n=Math.min(n,...u),r=Math.min(r,...f),i=Math.max(i,...u),r=Math.min(r,...f),o=Math.max(o,...f)}return{x:n,y:r,width:i-n,height:o-r}},getCornerPointsByPoints(e){const n=e.map(u=>u[0]),r=e.map(u=>u[1]),i=Math.min(...n),o=Math.max(...n),s=Math.min(...r),a=Math.max(...r);return[[i,s],[o,s],[o,a],[i,a]]},getOutlineRectangle:(e,n)=>({x:e.x+n,y:e.y+n,width:e.width-n*2,height:e.height-n*2}),inflate:(e,n)=>{const r=n/2;return{x:e.x-r,y:e.y-r,width:e.width+r*2,height:e.height+r*2}},isEqual:(e,n)=>e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>_.getCenterPoint(_.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,n)=>[e.x+e.width*n[0],e.y+e.height*n[1]],expand(e,n,r=n,i=n,o=r){return{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}},getGapCenter(e,n,r){const i=r?"x":"y",o=r?"width":"height",a=[e[i],e[i]+e[o],n[i],n[i]+n[o]].sort((u,f)=>u-f);return(a[1]+a[2])/2},isPointInRectangle(e,n){const r=n[0],i=n[1];return r>e.x&&r<e.x+e.width&&i>e.y&&i<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.forEach(s=>{n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x+s.width),o=Math.max(o,s.y+s.height)}),{x:n,y:r,width:i-n,height:o-r}}};function sb(e){return Array.isArray(e)&&e.every(n=>Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")}function kA(e,n,r,i,o,s){const a=e-r,u=n-i,f=o-r,d=s-i,g=a*f+u*d,p=f*f+d*d;let y=-1;p!==0&&(y=g/p);let w,E;y<0?(w=r,E=i):y>1?(w=o,E=s):(w=r+y*f,E=i+y*d);const S=e-w,D=n-E;return Math.hypot(S,D)}function Zy(e,n){const r=e[0],i=e[1],o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],f=r-o,d=i-s,g=a-o,p=u-s,y=f*g+d*p,w=g*g+p*p;let E=-1;w!==0&&(E=y/w);let S,D;return E<0?(S=o,D=s):E>1?(S=a,D=u):(S=o+E*g,D=s+E*p),[S,D]}function bA(e,n){const r=n.length;let i=1/0;if(n.length===1)return bt(...n[0],...e);for(let o=0;o<r-1;o++){const s=n[o],a=n[o+1],u=kA(e[0],e[1],s[0],s[1],a[0],a[1]);u<i&&(i=u)}return i}function Hn(e,n,r=!0){const i=n.length;let o=1/0,s=e;for(let a=0;a<i;a++){const u=n[a];if(a===i-1&&!r)continue;const f=a===i-1?n[0]:n[a+1],d=kA(e[0],e[1],u[0],u[1],f[0],f[1]);d<o&&(o=d,s=Zy(e,[u,f]))}return s}function EE(e,n){let r=1/0,i=e;for(const o of n){const s=Zy(e,o),a=bt(e[0],e[1],s[0],s[1]);a<r&&(r=a,i=s)}return i}function Oi(e,n,r,i){const o={x:n[0]-r,y:n[1]-i,height:i*2,width:r*2},s=Math.abs(e[0]-o.x-o.width/2),a=Math.abs(e[1]-o.y-o.height/2);let u=.707,f=.707;const d=Math.abs(o.width)/2,g=Math.abs(o.height)/2;[0,1,2,3].forEach(w=>{const E=d*u,S=g*f,D=(d*d-g*g)*u**3/d,A=(g*g-d*d)*f**3/g,P=E-D,b=S-A,R=s-D,L=a-A,V=Math.hypot(b,P),Z=Math.hypot(L,R);u=Math.min(1,Math.max(0,(R*V/Z+D)/d)),f=Math.min(1,Math.max(0,(L*V/Z+A)/g));const ne=Math.hypot(f,u);u/=ne,f/=ne});const p=e[0]>n[0]?1:-1,y=e[1]>n[1]?1:-1;return[n[0]+d*u*p,n[1]+g*f*y]}function gg(e,n,r,i,o){return[(e-r)*Math.cos(o)-(n-i)*Math.sin(o)+r,(e-r)*Math.sin(o)+(n-i)*Math.cos(o)+i]}function bt(e,n,r,i){const o=e-r,s=n-i;return Math.hypot(o,s)}function E1(e,n,r){var i=Math.max(r.x-e,0,e-(r.x+r.width)),o=Math.max(r.y-n,0,n-(r.y+r.height));return Math.sqrt(i*i+o*o)}const uv=(e,n,r,i)=>{if(Pt.isEquals(e,n)&&Pt.isEquals(r,i)&&!Pt.isEquals(e,r))return!1;const o=(p,y)=>p[0]*y[1]-p[1]*y[0],s=[n[0]-e[0],n[1]-e[1]],a=[r[0]-e[0],r[1]-e[1]],u=[i[0]-e[0],i[1]-e[1]],f=[e[0]-r[0],e[1]-r[1]],d=[n[0]-r[0],n[1]-r[1]],g=[i[0]-r[0],i[1]-r[1]];return o(s,a)*o(s,u)<=0&&o(g,f)*o(g,d)<=0},ay=(e,n)=>{if(e.length===1)return _.isPointInRectangle(n,e[0]);const r=_.getCornerPoints(n),i=e.length;for(let o=0;o<i;o++){const s=e[o],a=e[(o+1)%i];if(o===i-1&&Pt.isEquals(s,a))continue;if(ab(s,a,n)||uc(s,r)||uc(a,r))return!0}return!1},ab=(e,n,r)=>{const i=_.getCornerPoints(r);return uv(e,n,i[0],i[1])||uv(e,n,i[1],i[2])||uv(e,n,i[2],i[3])||uv(e,n,i[3],i[0])},uc=(e,n)=>{const r=e[0],i=e[1];let o=!1;for(var s=0,a=n.length-1;s<n.length;a=s++){let u=n[s][0],f=n[s][1],d=n[a][0],g=n[a][1];f>i!=g>i&&r<(d-u)*(i-f)/(g-f)+u&&(o=!o)}return o},Yl=(e,n,r,i,o=0)=>{const s=Math.cos(o),a=Math.sin(o),u=(e[0]-n[0])*s+(e[1]-n[1])*a,f=(e[1]-n[1])*s-(e[0]-n[0])*a;return u*u/(r*r)+f*f/(i*i)<=1},PE=(e,n,r,i=0)=>{const{x:o,y:s,width:a,height:u}=n,f=e[0]>=o&&e[0]<=o+a&&e[1]>=s&&e[1]<=s+u,d=e[0]>=o&&e[0]<=o+r&&e[1]>=s&&e[1]<=s+r&&Math.hypot(e[0]-(o+r),e[1]-(s+r))>r,g=e[0]>=o&&e[0]<=o+r&&e[1]>=s+u&&e[1]<=s+u-r&&Math.hypot(e[0]-(o+r),e[1]-(s+u-r))>r,p=e[0]>=o+a-r&&e[0]<=o+a&&e[1]>=s&&e[1]<=s+r&&Math.hypot(e[0]-(o+a-r),e[1]-(s+r))>r,y=e[0]>=o+a-r&&e[0]<=o+a&&e[1]>=s+u-r&&e[1]<=s+u&&Math.hypot(e[0]-(o+a-r),e[1]-(s+u-r))>r;return f&&!(d||g||p||y)},P1=function(e){let r,i,o,s,a,u,f,d,g,p,y,w,E;var S,D,A,P,b,R;const L=[];L.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var V=e.length,Z=0;Z<V-1;Z++)r=Z==0?e[0]:e[Z-1],i=e[Z],o=e[Z+1],s=Z+2<V?e[Z+2]:o,f=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)),d=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),g=Math.sqrt(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)),S=Math.pow(g,.5),A=Math.pow(g,2*.5),D=Math.pow(d,.5),P=Math.pow(d,2*.5),R=Math.pow(f,.5),b=Math.pow(f,2*.5),p=2*b+3*R*D+P,y=2*A+3*S*D+P,w=3*R*(R+D),w>0&&(w=1/w),E=3*S*(S+D),E>0&&(E=1/E),a=[(-P*r[0]+p*i[0]+b*o[0])*w,(-P*r[1]+p*i[1]+b*o[1])*w],u=[(A*i[0]+y*o[0]-P*s[0])*E,(A*i[1]+y*o[1]-P*s[1])*E],a[0]==0&&a[1]==0&&(a=i),u[0]==0&&u[1]==0&&(u=o),L.push(a,u,o);return L};function tl(e,n,r,i){return Math.abs(n)===0?e>0?-1/0:1/0:-i*i*e/(r*r*n)}function nl(e,n,r){if(r===1/0)return[0,-1];if(r===-1/0)return[0,1];let i=[1,-r];return n<0&&(i=[-i[0],-i[1]]),i}function lb(e){return+e.toFixed(2)}function SE(e,n){const r=Math.pow(10,n);return Math.ceil(e*r)/r}function fC(e,n,r=1e-6){return Math.abs(e-n)<=r}function oS(e,n,r,i,o,s,a=!0){if(o===0||s===0||e[0]===n[0]&&e[1]===n[1])return[];o=o<0?o:-o,s=s<0?s:-s,e[0]-=r,e[1]-=i,n[0]-=r,n[1]-=i;var u=(n[0]-e[0])*(n[0]-e[0])/o/o+(n[1]-e[1])*(n[1]-e[1])/s/s,f=2*e[0]*(n[0]-e[0])/o/o+2*e[1]*(n[1]-e[1])/s/s,d=e[0]*e[0]/o/o+e[1]*e[1]/s/s-1,g=[],p=f*f-4*u*d;return p===0?g.push(-f/2/u):p>0&&(g.push((-f+Math.sqrt(p))/2/u),g.push((-f-Math.sqrt(p))/2/u)),g.filter(y=>!a||y>=0&&y<=1).map(y=>[e[0]+(n[0]-e[0])*y+r,e[1]+(n[1]-e[1])*y+i])}function sS(e,n,r,i,o=.5){return[e+(r-e)*o,n+(i-n)*o]}function OA(e,n){const r=(n.endX-e[0])/2,i=(n.endY-e[1])/2,o=Math.cos(n.xAxisRotation),s=Math.sin(n.xAxisRotation),a=o*r+s*i,u=-s*r+o*i,f=Math.abs(n.rx),d=Math.abs(n.ry),g=a*a/(f*f)+u*u/(d*d),p=g>1?Math.sqrt(g):1,y=f*p,w=d*p,E=n.largeArcFlag===n.sweepFlag?-1:1,S=(y*y*w*w-y*y*u*u-w*w*a*a)/(y*y*u*u+w*w*a*a),D=E*Math.sqrt(Math.max(0,S)),A=D*(y*u/w),P=D*(-(w*a)/y),b=o*A-s*P+(e[0]+n.endX)/2,R=s*A+o*P+(e[1]+n.endY)/2;return{center:[b,R],rx:y,ry:w}}function Qy(e,n,r){const{center:i,rx:o,ry:s}=OA(n,r),a=Oi(e,i,o,s),u=Math.atan2(n[1]-i[1],n[0]-i[0]),f=Math.atan2(r.endY-i[1],r.endX-i[0]),d=Math.atan2(a[1]-i[1],a[0]-i[0]);if(ub(d,u,f,r.sweepFlag===1))return a;const p=bt(e[0],e[1],n[0],n[1]),y=bt(e[0],e[1],r.endX,r.endY);return p<y?n:[r.endX,r.endY]}function ub(e,n,r,i){const o=f=>(f%(2*Math.PI)+2*Math.PI)%(2*Math.PI),s=o(e),a=o(n),u=o(r);return i?a<=u?s>=a&&s<=u:s>=a||s<=u:a>=u?s<=a&&s>=u:s<=a||s>=u}function cb(e,n,r){const o=H.getBoardContainer(e).getBoundingClientRect();return E1(n,r,o)===0}function TE(e){const{hideScrollbar:n}=e.options;let r=0;if(!n){const i=H.getViewportContainer(e);r=i.offsetWidth-i.clientWidth}return r}const Ag="http://www.w3.org/2000/svg";function $t(){return document.createElementNS(Ag,"g")}function DE(){return document.createElementNS(Ag,"path")}function G2(e,n){const r=document.createElementNS(Ag,"rect");r.setAttribute("x",`${e.x}`),r.setAttribute("y",`${e.y}`),r.setAttribute("width",`${e.width}`),r.setAttribute("height",`${e.height}`);for(let i in n){const o=i;r.setAttribute(i,`${n[o]}`)}return r}const Zt=(e,n)=>{e.setAttribute("stroke-linecap",n)},fb=(e,n)=>{e.querySelectorAll("path").forEach(r=>{r.setAttribute("stroke-linecap",n)})};function hb(){return document.createElementNS(Ag,"mask")}function db(e,n,r,i){var o=document.createElementNS(Ag,"text");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("fill",r),o.textContent=i,o}const gb=e=>pb(e)&&e.nodeType===1,pb=e=>e instanceof window.Node,mb=e=>!!(gb(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),Ya=e=>e.button===AA.MAIN,vb=e=>e.button===AA.WHEEL;function AE(e,n,r,i){var o=document.createElementNS(Ag,"foreignObject");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("width",`${SE(r,0)}`),o.setAttribute("height",`${i}`),o}function Tp(e,n,r,i,o){const s=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");s&&(s.setAttribute("width",`${SE(n,0)}`),s.setAttribute("height",`${r}`),s.setAttribute("x",`${i}`),s.setAttribute("y",`${o}`))}function yb(e,n){const r=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");r&&r.setAttribute("width",`${SE(n,0)}`)}const wb=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),xb=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ly=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Cb=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Eb=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Pb=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Sb=(e,n)=>e.type==="set_viewport"&&e.type===(n==null?void 0:n.type),Tb=(e,n)=>!(e.type==="set_selection"||e.type==="set_viewport"),Db=e=>e.type!=="set_selection",Ps={isSaving(e){return j2.get(e)},isMerging(e){return Or.get(e)},isSplittingOnce(e){return fv.get(e)},setSplittingOnce(e,n){fv.set(e,n)},withMerging(e,n){const r=Ps.isMerging(e);Or.set(e,!0),n(),Or.set(e,r)},withNewBatch(e,n){const r=Ps.isMerging(e);Or.set(e,!0),fv.set(e,!0),n(),Or.set(e,r),fv.delete(e)},withoutMerging(e,n){const r=Ps.isMerging(e);Or.set(e,!1),n(),Or.set(e,r)},withoutSaving(e,n){const r=Ps.isSaving(e);j2.set(e,!1),n(),j2.set(e,r)}},Ab={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},Bb={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Mb={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},kn=e=>{const n=Ab[e],r=Bb[e],i=Mb[e],o=n&&on.isKeyHotkey(n),s=r&&on.isKeyHotkey(r),a=i&&on.isKeyHotkey(i);return u=>!!(o&&o(u)||ly&&s&&s(u)||!ly&&a&&a(u))},Mi={isBold:kn("bold"),isCompose:kn("compose"),isArrow:kn("arrow"),isMoveBackward:kn("moveBackward"),isMoveForward:kn("moveForward"),isMoveUp:kn("moveUp"),isMoveDown:kn("moveDown"),isDeleteBackward:kn("deleteBackward"),isDeleteForward:kn("deleteForward"),isDeleteLineBackward:kn("deleteLineBackward"),isDeleteLineForward:kn("deleteLineForward"),isDeleteWordBackward:kn("deleteWordBackward"),isDeleteWordForward:kn("deleteWordForward"),isExtendBackward:kn("extendBackward"),isExtendForward:kn("extendForward"),isExtendUp:kn("extendUp"),isExtendDown:kn("extendDown"),isExtendArrow:kn("extendArrow"),isExtendLineBackward:kn("extendLineBackward"),isExtendLineForward:kn("extendLineForward"),isItalic:kn("italic"),isMoveLineBackward:kn("moveLineBackward"),isMoveLineForward:kn("moveLineForward"),isMoveWordBackward:kn("moveWordBackward"),isMoveWordForward:kn("moveWordForward"),isRedo:kn("redo"),isSplitBlock:kn("splitBlock"),isTransposeCharacter:kn("transposeCharacter"),isUndo:kn("undo"),isShift:kn("shift")};function Tn(e=5){const n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",r=n.length;let i="";for(let o=0;o<e;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}function mi(e,n,r,i){if(e.children&&(!r||r(e))){let o=[...e.children];o=i?o.reverse():o,o.forEach(s=>{mi(s,n,r)})}n(e)}const nh=e=>n=>!!(H.isBoard(n)||e.isRecursion(n)),So="#6698FF",BE="#6698FF25",pg={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},hn={isRootElement(e){const n=_f.get(e);return!!(n&&H.isBoard(n))},getElementRef(e){return xp.get(e)},getElementG(e){const n=yp.get(e);if(!n)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return n},hasMounted(e){return!!hn.getContainerG(e,{suppressThrow:!0})},getContainerG(e,n){const r=wp.get(e)||null;if(!r){if(n.suppressThrow)return null;throw new Error("can not resolve container g")}return r}},Jy=(e,n,r=!0)=>[...n].sort((i,o)=>{const s=H.findPath(e,i),a=H.findPath(e,o);return r?s[0]-a[0]:a[0]-s[0]}),IA=new Map,dp=e=>IA.get(e)||[],gp=(e,n)=>{IA.set(e,n)};class Rb{constructor(n){this.debugKey=n}isDebug(){return Ju(this.debugKey)}clear(){if(!this.isDebug())return;const n=dp(this.debugKey);gp(this.debugKey,[]),n.forEach(r=>r.remove())}drawPolygon(n,r,i){if(!Ju(this.debugKey))return;const o=H.getRoughSVG(n).polygon(r,i||{stroke:"red"});o.classList.add(this.debugKey),H.getElementTopHost(n).append(o);const s=dp(this.debugKey);return s.push(o),gp(this.debugKey,s),o}drawLine(n,r,i){if(!Ju(this.debugKey))return;const o=H.getRoughSVG(n).linearPath(r,i||{stroke:"red"});o.classList.add(this.debugKey),H.getElementTopHost(n).append(o);const s=dp(this.debugKey);return s.push(o),gp(this.debugKey,s),o}drawRectangle(n,r,i){if(!Ju(this.debugKey))return;let o;r instanceof Array?o=_.getRectangleByPoints(r):o=r;const s=H.getRoughSVG(n).rectangle(o.x,o.y,o.width,o.height,i||{stroke:"red"});s.classList.add(this.debugKey),H.getElementTopHost(n).append(s);const a=dp(this.debugKey);return a.push(s),gp(this.debugKey,a),s}drawCircles(n,r,i=0,o=!1,s){if(!Ju(this.debugKey))return;const a=[];return r.forEach((u,f)=>{const d=H.getRoughSVG(n).circle(u[0],u[1],o?i*(f+1):i,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},s||{}));d.classList.add(this.debugKey),H.getElementTopHost(n).append(d);const g=dp(this.debugKey);g.push(d),a.push(d),gp(this.debugKey,g)}),a}}const Bg=e=>new Rb(e),Ju=e=>localStorage.getItem(e||"debug:plait")==="true";var Xa;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Xa||(Xa={}));const FA=(e,n,r=()=>!0)=>{const i=n||e.selection,o=[];if(!i)return[];if(pg.isCollapsed(i)){const a=LA(e,i.anchor,r);return a!=null&&a.length?a:[]}return mi(e,a=>{if(!H.isBoard(a)&&r(a)){let u=!1;try{u=e.isRectangleHit(a,i)}catch(f){Ju()&&console.error("isRectangleHit",f,"node",a)}u&&o.push(a)}},nh(e),!0),o},LA=(e,n,r=()=>!0,i=!0)=>{let o=[];return mi(e,s=>{if(H.isBoard(s)||!r(s)||!hn.hasMounted(s))return;let a=!1;try{a=e.isHit(s,n,i)}catch(u){Ju()&&console.error("isHit",u,"node",s)}if(a){o.push(s);return}},nh(e),!0),o},rl=(e,n,r=()=>!0,i=!0)=>{const o=LA(e,n,r,i);return e.getOneHitElement(o)},kb=(e,n)=>{const r=tt(e),i=r.length>0&&dn(e,r,!1);return i&&_.isPointInRectangle(i,n)?r:[]},Va=(e,n)=>{const r=Jy(e,n);MA.set(e,r)},tt=e=>MA.get(e)||[],rh=(e,n)=>{let r=[];Array.isArray(n)?r.push(...n):r.push(n);const i=tt(e);Va(e,[...i,...r])},ew=(e,n,r=!1)=>{const i=tt(e);if(i.includes(n)){const o=[];e.isRecursion(n)&&r?mi(n,a=>{o.push(a)},a=>e.isRecursion(a)):o.push(n);const s=i.filter(a=>!o.includes(a));Va(e,s)}},bb=(e,n,r)=>{const i=tt(e);i.splice(i.indexOf(n),1,r)},Mg=e=>{Va(e,[])},Nf=(e,n)=>!!tt(e).find(i=>i===n),hC=e=>{const n=e.getPluginOptions(Xa.withSelection);e.setPluginOptions(Xa.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Xa.withSelection,{...n})},0)},Ob=(e,n)=>kb(e,n).length>0,_A=(e,n)=>!!rl(e,n)||Ob(e,n);function Rg(e,n,r,i,o,s,a=!1,u){let f=u||0;const d=[n+f,r],g=[i-f,r],p=[i,r+f],y=[i,o-f],w=[i-f,o],E=[n+f,o],S=[n,o-f],D=[n,r+f],A=e.path(`M${g[0]} ${g[1]} A ${f} ${f}, 0, 0, 1, ${p[0]} ${p[1]} L ${y[0]} ${y[1]} A ${f} ${f}, 0, 0, 1, ${w[0]} ${w[1]} L ${E[0]} ${E[1]} A ${f} ${f}, 0, 0, 1, ${S[0]} ${S[1]} L ${D[0]} ${D[1]} A ${f} ${f}, 0, 0, 1, ${d[0]} ${d[1]} Z`,s);return Zt(A,"round"),A}const da=(e,n,r)=>{const o=H.getRoughSVG(e).rectangle(n.x,n.y,n.width,n.height,r);return Zt(o,"round"),o};function kg(e,n,r=40){const i=Math.abs(e[0]-n[0]),o=Math.abs(e[1]-n[1]);let s=Math.hypot(i,o);const a=s/2,u=a/s*i,f=a/s*o,d=[n[0]>e[0]?n[0]-u:n[0]+u,n[1]>e[1]?n[1]-f:n[1]+f],g=gg(d[0],d[1],n[0],n[1],r*Math.PI/180);return{pointLeft:gg(d[0],d[1],n[0],n[1],-r*Math.PI/180),pointRight:g}}function ih(e,n,r,i){return e.circle(n[0],n[1],r,i)}function cv(e,n,r,i){return e.linearPath([n,r],i)}function ks(e,n,r){const i=$t(),o=DE();let s="";return e.forEach((a,u)=>{u===0?s+=`M ${a[0]} ${a[1]} `:s+=`L ${a[0]} ${a[1]} `}),r&&(s+="Z"),o.setAttribute("d",s),o.setAttribute("stroke",`${n==null?void 0:n.stroke}`),o.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),o.setAttribute("fill",`${(n==null?void 0:n.fill)||"none"}`),n!=null&&n.strokeLineDash&&o.setAttribute("stroke-dasharray",`${n.strokeLineDash}`),i.appendChild(o),i}function Ib(e,n){const r=$t(),i=DE();let o="";for(let s=0;s<e.length-3;s+=3)s===0?o+=`M ${e[0][0]} ${e[0][1]} `:o+=`C ${e[s+1][0]} ${e[s+1][1]}, ${e[s+2][0]} ${e[s+2][1]}, ${e[s+3][0]} ${e[s+3][1]}`;return i.setAttribute("d",o),i.setAttribute("stroke",`${n==null?void 0:n.stroke}`),i.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),i.setAttribute("fill","none"),r.appendChild(i),r}function ME(e,n){const r={type:"set_viewport",properties:e.viewport,newProperties:n};e.apply(r)}const Fb={setViewport:ME};function Lb(e,n){const r={type:"set_theme",properties:e.theme,newProperties:n};e.apply(r)}function tw(e,n,r){r=r??e.viewport.zoom,ME(e,{...e.viewport,zoom:r,origination:n}),XA(e)}function _b(e,n,r){n=Ub(n);const o=H.getBoardContainer(e).getBoundingClientRect(),s=H.getBoardContainer(e).getBoundingClientRect();let a=[s.width/2,s.height/2];r&&E1(r[0],r[1],o)===0&&(a=[r[0]-o.x,r[1]-o.y]);const u=e.viewport.zoom,f=bg(e),d=f[0]+a[0]/u,g=f[1]+a[1]/u,p=[d-a[0]/n,g-a[1]/n];tw(e,p,n)}function Nb(e){let n=TE(e);const r=H.getBoardContainer(e).getBoundingClientRect(),i=dn(e,e.children,!0),o=e.viewport.zoom,s=16,a=r.width-2*s,u=r.height-2*s;let f=o;a<i.width||u<i.height?f=Math.min(a/i.width,u/i.height):f=1;const d=$A(e),g=[d[0]-r.width/2/f+n/2/o,d[1]-r.height/2/f+n/2/o];tw(e,g,f)}function Hb(e,n){let r=TE(e);const i=H.getBoardContainer(e),o=i.getBoundingClientRect();let s=0;n.maxWidth?s=n.maxWidth:s=o.width;const a=dn(e,e.children,!0),u=s-2*n.autoFitPadding;let f=0;u<a.width?f=Math.min(u/a.width):f=1;let d=a.height*f+2*n.autoFitPadding;if(d>n.limitHeight){const w=i.closest(`.${n.containerClass}`);w.style.height=`${d}px`,kE(e)}else d=n.limitHeight;const g=a.x+a.width/2,p=a.y+a.height/2,y=[g-s/2/f+r/2/f,p-d/2/f+r/2/f];tw(e,y,f)}function Gb(e,n){n=n??e.theme.themeColorMode,Lb(e,{themeColorMode:n}),mi(e,r=>{e.applyTheme(r)})}const jb=(e,n)=>{e.pointer!==n&&(e.pointer=n)};function zb(e,n){var i;if((i=tt(e))==null?void 0:i[0]){const o=H.getBoardContainer(e).getBoundingClientRect(),s=TE(e),a=$A(e),u=n[0]-a[0],f=n[1]-a[1],d=e.viewport.zoom,g=[u-o.width/2/d+s/2/d,f-o.height/2/d+s/2/d];ME(e,{...e.viewport,origination:g}),XA(e)}}const sn={updatePointerType:jb,updateViewport:tw,fitViewport:Nb,updateZoom:_b,updateThemeColor:Gb,fitViewportWidth:Hb,moveToCenter:zb},RE=e=>H.getHost(e).viewBox.baseVal;function Lt(e,n,r){const o=H.getHost(e).getBoundingClientRect();return[n-o.x,r-o.y]}function ki(e,n){const r=[n.x,n.y],i=[n.x+n.width,n.y+n.height],o=zp(e,r),s=zp(e,i);return _.getRectangleByPoints([o,s])}function zp(e,n){const r=dC(e,uy(e,n));return Xf(e,r[0],r[1])}function Xf(e,n,r){const o=H.getBoardContainer(e).getBoundingClientRect();return[n-o.x,r-o.y]}function $b(e,n){const i=H.getBoardContainer(e).getBoundingClientRect();return[i.x+n[0],i.y+n[1]]}function It(e,n){const r=RE(e),{zoom:i}=e.viewport,o=n[0]/i+r.x,s=n[1]/i+r.y;return[o,s]}function dC(e,n){const i=H.getHost(e).getBoundingClientRect();return[n[0]+i.x,n[1]+i.y]}function uy(e,n){const{zoom:r}=e.viewport,i=RE(e),o=(n[0]-i.x)*r,s=(n[1]-i.y)*r;return[o,s]}const NA=.75,HA=new WeakMap,GA=new WeakMap;function Wb(e){const{hideScrollbar:n}=e.options,r=n?Yk:0,i=H.getBoardContainer(e).getBoundingClientRect();return{width:i.width+r,height:i.height+r}}function Vb(e,n){const r=dn(e,e.children,!0);let i,o,s,a;return i=r.x,o=r.x+r.width,s=r.y,a=r.y+r.height,{left:i,right:o,top:s,bottom:a}}function Ub(e,n=SA,r=TA){return e<n?n:e>r?r:e}function jA(e,n){const r=H.getBoardContainer(e).getBoundingClientRect(),i=Vb(e),o=r.width,s=r.height;let a=i.right-i.left,u=i.bottom-i.top;const f=o/2,d=s/2;if(a<f/n){const g=i.left+a/2;i.left=g-f/2/n,i.right=g+f/2/n,a=f/n}if(u<d/n){const g=i.top+u/2;i.top=g-d/2/n,i.bottom=g+d/2/n,u=d/n}return{elementHostBBox:i,containerWidth:o,containerHeight:s,width:a,height:u}}function gC(e,n,r,i,o,s,a=NA){const u=n*a/s,f=r*a/s;return[e.left-u,e.top-f,i+u*2,o+f*2]}function zA(e,n){const{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:a}=jA(e,n);return gC(r,i,o,s,a,n)}function $A(e){const n=dn(e,e.children,!0);return[n.x+n.width/2,n.y+n.height/2]}function WA(e,n){const r=e.viewport.zoom,i=H.getHost(e);i.style.display="block",i.style.width=`${n[2]*r}px`,i.style.height=`${n[3]*r}px`,n&&n[2]>0&&n[3]>0&&i.setAttribute("viewBox",n.join(" "))}function cy(e){const n=bg(e);if(!n)return;const[r,i]=uy(e,n);VA(e,r,i)}function VA(e,n,r,i=!0){const o=H.getViewportContainer(e),s=o.scrollLeft,a=o.scrollTop;if(!fC(o.scrollLeft,n,1)||!fC(o.scrollTop,r,1)){o.scrollLeft=n,o.scrollTop=r;const u=o.offsetWidth,f=o.offsetHeight;if(s===o.scrollLeft&&a===o.scrollTop)UA(e,s,a);else{const d=n>0&&r>0&&n<o.scrollWidth-u&&r<o.scrollHeight-f;i&&d&&qA(e,!0)}}}function UA(e,n,r){const i=It(e,[n,r]);Pt.isEquals(i,bg(e))||(sn.updateViewport(e,i),KA(e,!0))}function kE(e){const{width:n,height:r}=Wb(e),i=H.getViewportContainer(e);i.style.width=`${n}px`,i.style.height=`${r}px`}function bE(e){const n=e.viewport.zoom,r=zA(e,n);WA(e,r)}function Xb(e){const n=e.viewport.zoom,{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:a}=jA(e,n),u=gC(r,i,o,s,a,n,.5),f=RE(e);if(u[0]<f.x||u[1]<f.y||u[0]+u[2]>f.x+f.width||u[1]+u[3]>f.y+f.height){const d=gC(r,i,o,s,a,n,NA);WA(e,d)}}function Kb(e){var n;if(!((n=e.viewport)!=null&&n.origination)){const r=e.viewport.zoom,i=H.getBoardContainer(e).getBoundingClientRect(),o=zA(e,r),s=o[0]+o[2]/2,a=o[1]+o[3]/2,u=[s-i.width/2/r,a-i.height/2/r];qb(e,u),cy(e);return}cy(e)}const qb=(e,n)=>{wE.set(e,n)},XA=e=>{wE.delete(e)},bg=e=>{const n=wE.get(e);return n||e.viewport.origination},Yb=e=>!!HA.get(e),KA=(e,n)=>{HA.set(e,n)},Zb=e=>!!GA.get(e),qA=(e,n)=>{GA.set(e,n)};function Qb(e,n,r){const i={type:"insert_node",node:n,path:r};e.apply(i)}function Jb(e,n,r){const i={},o={},s=tn.get(e,r);for(const u in n)s[u]!==n[u]&&(s.hasOwnProperty(u)&&(i[u]=s[u]),n[u]!=null&&(o[u]=n[u]));const a={type:"set_node",properties:i,newProperties:o,path:r};e.apply(a)}function YA(e,n){const r=tn.get(e,n),i={type:"remove_node",path:n,node:r};e.apply(i)}function eO(e,n,r){const i={type:"move_node",path:n,newPath:r};e.apply(i)}const Hf={insertNode:Qb,setNode:Jb,removeNode:YA,moveNode:eO},Nv=new WeakMap,tO=(e,n)=>ZA(e)[n]||null,ZA=e=>Nv.get(e)||{},ha=(e,n,r)=>{const i=()=>{let s=requestAnimationFrame(()=>{const u=Nv.get(e)||{};u[n]=null,Nv.set(e,u),H.isAlive(e)&&r()});const a=ZA(e);a[n]=s,Nv.set(e,a)};let o=tO(e,n);o!==null&&cancelAnimationFrame(o),i()},nw=(e,n)=>(Jy(e,n),n.map(r=>e.children.map(i=>i.id).indexOf(r.id)).filter(r=>r>=0)),nO=(e,n)=>{const r=nw(e,n);return r[r.length-1]},S1=(e,n)=>{n.map(r=>{const i=H.findPath(e,r.element),o=e.pathRef(i);return()=>{o.current&&Hf.moveNode(e,o.current,r.newPath),o.unref()}}).forEach(r=>{r()})},QA=new WeakMap,cc=e=>!!QA.get(e),ou=(e,n)=>{QA.set(e,n)},rO=e=>Yy.get(e)||[],fc=e=>(Yy.get(e)||[]).length>0,iO=e=>{Yy.delete(e),ou(e,!1)},aS=(e,n)=>{Yy.set(e,n),ou(e,!0)},pC="foreignObject[class^='foreign-object']";function lS(e){return e.nodeType===Node.ELEMENT_NODE}function oO(e){return new Promise((n,r)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>n(i),i.onerror=()=>r(new Error("Failed to load image")),i.src=e})}function sO(e,n,r="transparent"){const i=document.createElement("canvas"),o=i.getContext("2d");return i.width=e,i.height=n,i.style.width=`${e}px`,i.style.height=`${n}px`,o.strokeStyle="#ffffff",o.fillStyle=r,o.fillRect(0,0,e,n),{canvas:i,ctx:o}}async function aO(e){const r=await(await fetch(e)).blob();return new Promise((i,o)=>{const s=new FileReader;s.onloadend=()=>i(s.result),s.onerror=o,s.readAsDataURL(r)})}function lO(e,n){const r=n==null?void 0:n.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Array.from(i).forEach(o=>{let s=i.getPropertyValue(o);r.setProperty(o,s,i.getPropertyPriority(o))})}function uO(e,n,r){if(r){const i=r+`, ${pC}`,o=Array.from(e.querySelectorAll(i)),s=Array.from(n.querySelectorAll(i));o.forEach((a,u)=>{const f=Array.from(a.querySelectorAll("*")).filter(lS),d=Array.from(s[u].querySelectorAll("*")).filter(lS);o.push(...f),s.push(...d)}),o.map((a,u)=>{lO(a,s[u])})}}async function cO(e,n){const r=Array.from(e.querySelectorAll(`${pC}`)),i=Array.from(n.querySelectorAll(`${pC}`));await Promise.all(r.map((o,s)=>new Promise(a=>{const f=i[s].querySelector("img"),d=f==null?void 0:f.getAttribute("src");if(!d)return a(!0);aO(d).then(g=>{f==null||f.setAttribute("src",g),a(!0)})})))}async function fO(e,n,r,i){const{width:o,height:s,x:a,y:u}=r,{padding:f=4,inlineStyleClassNames:d}=i,g=H.getHost(e),p=n.map(S=>hn.getElementG(S)),y=g.cloneNode(),w=H.getElementHost(e).cloneNode();y.style.width=`${o}px`,y.style.height=`${s}px`,y.style.backgroundColor="",y.setAttribute("width",`${o}`),y.setAttribute("height",`${s}`),y.setAttribute("viewBox",[a-f,u-f,o+2*f,s+2*f].join(","));const E=new Array(p.length);return await Promise.all(p.map(async(S,D)=>{const A=S.cloneNode(!0);uO(S,A,d),await cO(S,A),E[D]=A})),w.append(...E),y.appendChild(w),y}async function hO(e,n){if(!e)return;const r=n.elements||Og(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),i=dn(e,r,!1),{ratio:o=2,fillStyle:s="transparent"}=n,{width:a,height:u}=i,f=a*o,d=u*o,g=await fO(e,r,i,n),{canvas:p,ctx:y}=sO(f,d,s),w=new XMLSerializer().serializeToString(g),E=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(w)}`;try{const S=await oO(E);return y.drawImage(S,0,0,f,d),p.toDataURL("image/png")}catch(S){console.error("Error converting SVG to image:",S);return}}var Zl;(function(e){e.medias="medias",e.elements="elements"})(Zl||(Zl={}));var la;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(la||(la={}));const OE=(e,n)=>`<plait>${mO(JSON.stringify({type:e,data:n}))}</plait>`,IE=e=>{var r;let n=(r=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:r[1];if(n){n=vO(n);try{const i=JSON.parse(n);if(i){if(i.type===Zl.elements)return{elements:i.data};if(i.type===Zl.medias)return{medias:i.data}}}catch(i){return console.error(i),null}}return null},uS=e=>{const n=document.implementation.createHTMLDocument("");return n.documentElement.innerHTML=e.trim(),n.body.textContent||n.body.innerText||""},JA=()=>"clipboard"in navigator&&"write"in navigator.clipboard,dO=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,e7=()=>"clipboard"in navigator&&"read"in navigator.clipboard,gO=(e,n,r)=>({type:e,elements:n,text:r}),pO=(e,n)=>{const{type:r,elements:i,text:o}=e;return r===n.type?{type:r,elements:i.concat(n.elements),text:o+" "+n.text}:e},rw=(e,n)=>e?pO(e,n):n,mO=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),vO=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),yO=(e,n,r)=>{e==null||e.setData("text/html",OE(n,r))},wO=(e,n)=>{e==null||e.setData("text/plain",n)},xO=e=>{const n=e==null?void 0:e.getData("text/html");if(n){const r=IE(n);if(r)return r}return{}},CO=e=>{if(!e)return{};const n=e==null?void 0:e.getData("text/plain");if(n){const r=IE(n);if(r)return r}return{text:n}},EO=async(e,n,r="")=>{let i=r;JA()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([OE(e,n)],{type:"text/html"}),"text/plain":new Blob([i??JSON.stringify(n)],{type:"text/plain"})})])},PO=async()=>{if(!e7())return{};const e=await navigator.clipboard.read();let n={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const r of e){if(SO(r)){const i=r.types.filter(u=>u.match(/^image\//)),s=(await Promise.all(i.map(u=>r.getType(u)))).filter(Boolean).map(u=>URL.createObjectURL(u));return{files:await Promise.all(s.map(async u=>{const f=await(await fetch(u)).blob();return new File([f],"plait-file",{type:f.type})}))}}if(r.types.includes("text/html")){const i=await cS(await r.getType("text/html")),o=IE(i);if(o)return o;i&&i.trim()&&(n={text:uS(i)})}if(r.types.includes("text/plain")){const i=await cS(await r.getType("text/plain"));n={text:uS(i)}}}return n},SO=e=>e.types.find(n=>n.match(/^image\//)),cS=e=>new Promise((n,r)=>{const i=new FileReader;i.addEventListener("loadend",()=>{const o=i.result;n(o)}),i.addEventListener("error",()=>{r(i.error)}),i.readAsText(e)}),TO=async e=>{let n={};return e?e.files.length?{files:Array.from(e.files)}:(n=xO(e),Object.keys(n).length===0&&(n=CO(e)),n):e7()?await PO():n},DO=async(e,n)=>{if(!n)return;const{type:r,elements:i,text:o}=n;if(JA())return await EO(r,i,o);if(e){yO(e,r,i),wO(e,o);return}if(dO())return await navigator.clipboard.writeText(OE(r,i))};function vi(e){return!!xE.get(e)}function AO(e){H.getBoardContainer(e).classList.add("selection-moving"),xE.set(e,!0),ou(e,!0)}function BO(e){H.getBoardContainer(e).classList.remove("selection-moving"),xE.delete(e),ou(e,!1)}function fS(e){const n=Hv(e);return e.pointer!==nn.hand&&!n.isDisabledSelection&&!H.isReadonly(e)}function hS(e){return!!e.operations.find(n=>Yu.isSetSelectionOperation(n))}function MO(e){const n=qy.get(e);if(n)return n.elements}function RO(e){return qy.get(e)}function kO(e){qy.delete(e)}function bO(e){const n=tt(e),r=dn(e,n,!1),i=ki(e,r);if(i.width>0&&i.height>0&&n.length>1){const o=da(e,_.inflate(i,pr),{stroke:So,strokeWidth:pr,fillStyle:"solid"});o.classList.add(C1,Uk);const s=Co(n);return s&&Rs(o,_.getCenterPoint(i),s),o}return null}function OO(e,n,r){if(!e.selection)return;const i=tt(e);if(!pg.isCollapsed(e.selection)){let o=[...i];n.forEach(s=>{s.groupId?o.push(...LE(e,s)):o.push(s)}),Va(e,CE(o));return}if(pg.isCollapsed(e.selection)){const o=n[0],s=yc(e,o,!0);if(s.length>0){const a=Os(e,s[s.length-1],!0)||[],u=i.some(f=>a.map(d=>d.id).includes(f.id));r?IO(e,n,u,a):FO(e,n,u,s)}}}function IO(e,n,r,i){const o=tt(e);let s=[...o];const a=n[0];let u=[];if(!r)u=i;else{const f=o.some(g=>g.id===a.id),d=i.filter(g=>o.includes(g));f?u=d.filter(g=>g.id!==a.id):u.push(...d,...n)}i.forEach(f=>{s.includes(f)&&s.splice(s.indexOf(f),1)}),u.length&&s.push(...u),Va(e,CE(s))}function FO(e,n,r,i){let o=[...n];const s=t7(e,i);if(s.length>0)if(s.length>1)o=fy(e,s[s.length-2],!0);else{const a=e.getOneHitElement(n);a&&(o=[a])}else{const a=fy(e,i[i.length-1],!0);if(!r)o=a;else{const u=e.getOneHitElement(n);u&&(o=[u])}}Va(e,CE(o))}const Hv=e=>e.getPluginOptions(Xa.withSelection),mC=(e,n)=>{e.setPluginOptions(Xa.withSelection,n)},Os=(e,n,r,i)=>{let o=[];const s=e.children.filter(a=>a.groupId===n.id);return r?s.forEach(a=>{Xi.isGroup(a)?(i&&o.push(a),o.push(...Os(e,a,r,i))):o.push(a)}):o=i?s:s.filter(a=>!Xi.isGroup(a)),o},fy=(e,n,r,i)=>{const o=Os(e,n,r,i),s=[];return o.forEach(a=>{mi(a,u=>{s.push(u)},()=>!0)}),s},FE=(e,n,r)=>{const i=fy(e,n,r);return dn(e,i,!1)},yc=(e,n,r,i)=>{const o=(i||e.children).find(s=>s.id===(n==null?void 0:n.groupId));if(!o)return[];{const s=[o],a=yc(e,o,r,i);return a.length&&s.push(...a),s}},vC=(e,n)=>{const r=yc(e,n,!0);return r.length?r[r.length-1]:null},LE=(e,n)=>{const r=vC(e,n);return r?fy(e,r,!0):[n]},LO=e=>e.children.filter(r=>Xi.isGroup(r)),yC=(e,n,r)=>{const i=r!=null&&r.length?r:tt(e);return Xi.isGroup(n)?hy(e,n,r):i.map(o=>o.id).includes(n.id)},hy=(e,n,r)=>{const i=r!=null&&r.length?r:tt(e);return Os(e,n,!0).every(s=>i.map(a=>a.id).includes(s.id))},t7=(e,n,r)=>{const i=[];return n.forEach(o=>{yC(e,o,r)&&i.push(o)}),i},_O=(e,n,r)=>{const i=wc(e,n,r),o=[];return i.forEach(s=>{o.push(s);const a=Os(e,s,!0,!0);o.push(...a.filter(u=>Xi.isGroup(u)))}),o},n7=(e,n,r,i)=>{const o=yc(e,n,!0,i),s=t7(e,o,r);return s.length?s[s.length-1]:null},wc=(e,n,r)=>{let i=[];return(n!=null&&n.length?n:tt(e)).forEach(s=>{if(s.groupId){const a=n7(e,s,n,r);a&&!i.includes(a)&&i.push(a)}}),i},_E=(e,n)=>{let r=[];return(n!=null&&n.length?n:tt(e)).filter(o=>!Xi.isGroup(o)).forEach(o=>{o.groupId&&n7(e,o,n)||r.push(o)}),r},NE=(e,n)=>_E(e,n).filter(i=>e.canAddToGroup(i)),NO=(e,n)=>[...wc(e,n),..._E(e,n)],HO=(e,n)=>{const r=tt(e).map(s=>s.id);let i=null;const o=vi(e);return n.forEach(s=>{const a=!r.includes(s.id)&&!o||o;if(s.groupId&&a){i||(i=$t());const u=LE(e,s),f=dn(e,u,!1),d=da(e,f,{stroke:So,strokeWidth:pr,strokeLineDash:[5]}),g=Co(u);g&&Rs(d,_.getCenterPoint(f),g),i.append(d)}}),i},GO=e=>({id:Tn(),type:"group"}),jO=e=>e.every(n=>!n.groupId),r7=e=>e.every(n=>n.groupId&&n.groupId===e[0].groupId),zO=(e,n)=>{const i=NO(e,n).filter(o=>e.canAddToGroup(o));return i.length>1?jO(i)||r7(i):!1},$O=(e,n,r)=>{const i=wc(e,n,r);return tt(e).length>0&&i.length>0},i7=(e,n)=>{const r=yc(e,n,!0);let i=null;if(r!=null&&r.length){for(let o=0;o<(r==null?void 0:r.length);o++)if(!hy(e,r[o])){i=r[o];break}}return i},WO=(e,n,r)=>{const i=[...n];Jy(e,i),i.pop(),S1(e,i.map(o=>({element:o,newPath:r})))},HE=e=>{const n=e.getDeletedFragment([]);e.deleteFragment(n)},dS=(e,n,r)=>{const i=tt(e),o=dn(e,i,!1),s=e.buildFragment(null,o,n);s&&DO(r,s)},GE=(e,n,r)=>{const i=n!=null&&n.length?n:tt(e),o=dn(e,i,!1),s=e.buildFragment(null,o,la.duplicate,i),a=s&&JSON.stringify(s),u=a&&JSON.parse(a);u&&e.insertFragment({...u,text:void 0},r||[o.x+o.width/2,o.y+o.height/2],la.duplicate)},Xl=2,VO=24;function o7(e,n){return Og(e,{match:i=>e.isAlign(i)&&!n.some(o=>o.id===i.id),recursion:()=>!0,isReverse:!1}).map(i=>{const o=e.getRectangle(i);return T1(o,i.angle||0)})}function UO(e,n){return n?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function Dp(e,n,r){let i=Xl;return e.forEach(o=>{const s=XO(n,o,r);Math.abs(s)<Math.abs(i)&&(i=s)}),i}const XO=(e,n,r)=>{const o=Kf(n,r).map(u=>u-e),s=o.map(u=>Math.abs(u)),a=s.indexOf(Math.min(...s));return o[a]},Kf=(e,n)=>{const r=n?"x":"y",i=n?"width":"height";return[e[r],e[r]+e[i]/2,e[r]+e[i]]};function Gd(e,n){let r=1/0,i=e[0];return e.forEach(o=>{const s=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2));s<r&&(r=s,i=o)}),i}const jd=(e,n,r)=>Kf(n,r).includes(e);function s7(e,n,r,i=!0,o=!0,s=!1){let a=[];const u=Kf(n,!0),f=Kf(n,!1),d=[{axis:u[0],isHorizontal:!0,pointRectangles:[]},{axis:u[1],isHorizontal:!0,pointRectangles:[]},{axis:u[2],isHorizontal:!0,pointRectangles:[]},{axis:f[0],isHorizontal:!1,pointRectangles:[]},{axis:f[1],isHorizontal:!1,pointRectangles:[]},{axis:f[2],isHorizontal:!1,pointRectangles:[]}];for(let p=0;p<r.length;p++){const y=r[p];jd(d[0].axis,y,d[0].isHorizontal)&&d[0].pointRectangles.push(y),jd(d[1].axis,y,d[1].isHorizontal)&&d[1].pointRectangles.push(y),jd(d[2].axis,y,d[2].isHorizontal)&&d[2].pointRectangles.push(y),jd(d[3].axis,y,d[3].isHorizontal)&&d[3].pointRectangles.push(y),jd(d[4].axis,y,d[4].isHorizontal)&&d[4].pointRectangles.push(y),jd(d[5].axis,y,d[5].isHorizontal)&&d[5].pointRectangles.push(y)}const g=(p,y,w)=>{const E=_.inflate(_.getBoundingRectangle([n,y]),VO);if(w){const S=[p,E.y],D=[p,E.y+E.height];a.push([S,D])}else{const S=[E.x,p],D=[E.x+E.width,p];a.push([S,D])}};if(i&&d[0].pointRectangles.length){const p=d[0].pointRectangles.length===1?d[0].pointRectangles[0]:Gd(d[0].pointRectangles,n);g(d[0].axis,p,d[0].isHorizontal)}if(i&&s&&d[1].pointRectangles.length){const p=d[1].pointRectangles.length===1?d[1].pointRectangles[0]:Gd(d[1].pointRectangles,n);g(d[1].axis,p,d[1].isHorizontal)}if(i&&d[2].pointRectangles.length){const p=d[2].pointRectangles.length===1?d[2].pointRectangles[0]:Gd(d[2].pointRectangles,n);g(d[2].axis,p,d[2].isHorizontal)}if(o&&d[3].pointRectangles.length){const p=d[3].pointRectangles.length===1?d[3].pointRectangles[0]:Gd(d[3].pointRectangles,n);g(d[3].axis,p,d[3].isHorizontal)}if(o&&s&&d[4].pointRectangles.length){const p=d[4].pointRectangles.length===1?d[4].pointRectangles[0]:Gd(d[4].pointRectangles,n);g(d[4].axis,p,d[4].isHorizontal)}if(o&&d[5].pointRectangles.length){const p=d[5].pointRectangles.length===1?d[5].pointRectangles[0]:Gd(d[5].pointRectangles,n);g(d[5].axis,p,d[5].isHorizontal)}return KO(e,a)}function KO(e,n){const r=$t();return n.forEach(i=>{if(!i.length)return;const o=H.getRoughSVG(e).line(i[0][0],i[0][1],i[1][0],i[1][1],{stroke:So,strokeWidth:1,strokeLineDash:[4,4]});r.appendChild(o)}),r}function a7(e,n){const r=$t();return n.forEach(i=>{if(!i.length)return;let o=i[0][1]===i[1][1];const s=H.getRoughSVG(e).line(i[0][0],i[0][1],i[1][0],i[1][1],{stroke:So,strokeWidth:1});r.appendChild(s),i.forEach(a=>{const u=UO(a,o),f=H.getRoughSVG(e).line(u[0][0],u[0][1],u[1][0],u[1][1],{stroke:So,strokeWidth:1});r.appendChild(f)})}),r}const l7=(e,n)=>{const r=nw(e,tt(e));let i=c7(e,r);n==="up"&&(i=i.reverse());let o=[];return i.forEach((s,a)=>{const u=s[0],f=s[s.length-1],d=n==="down"?u:f,g=qO(e,d,n);g===-1||d===g||(n==="down"&&(s=s.reverse()),o.push(...s.map(p=>({element:e.children[p],newPath:[g]}))))}),o},u7=(e,n)=>{const r=nw(e,tt(e));let i=c7(e,r),o=[];return n==="down"&&(i=i.reverse()),i.forEach(s=>{const a=s[0],u=s[s.length-1],f=n==="down"?a:u,d=e.children[f],g=i7(e,d);let p=n==="down"?0:e.children.length-1;if(g){const y=Jy(e,Os(e,g,!0,!0));p=n==="down"?e.children.indexOf(y[0]):e.children.indexOf(y[y.length-1])}n==="down"&&(s=s.reverse()),o.push(...s.map(y=>({element:e.children[y],newPath:[p]})))}),o},c7=(e,n)=>{let r=0;return n.reduce((i,o,s)=>{if(s>0){const a=e.children[o],u=e.children[n[s-1]],f=o-1===n[s-1]?!0:e.children.every((g,p)=>p>n[s-1]&&p<=o-1?Xi.isGroup(g):!0);let d=!1;if(u!=null&&u.groupId||a!=null&&a.groupId&&(u==null?void 0:u.groupId)!==(a==null?void 0:a.groupId)){let g=!1,p=!1;if(u.groupId){const y=vC(e,u);g=!hy(e,y)}if(a.groupId){const y=vC(e,a);p=!hy(e,y)}d=g||p}(!f||d)&&(r=++r)}return(i[r]||(i[r]=[])).push(o),i},[])},qO=(e,n,r)=>{if(n===0&&r==="down"||n===e.children.length-1&&r==="up")return-1;const i=p=>!(p.isDeleted||Xi.isGroup(p)),o=r==="down"?eb(e.children,p=>i(p),Math.max(0,n-1)):tb(e.children,p=>i(p),n+1),s=e.children[o];if(!s)return-1;const a=[...e.children],u=a[n],f=i7(e,u),d=yc(e,s,!0)||[];if(f&&(u==null?void 0:u.groupId)!==(s==null?void 0:s.groupId)&&!d.find(p=>p.id===f.id))return-1;if(!s.groupId)return o;let g;if(f?g=d[d.indexOf(f)-1]:g=d[d.length-1],g){let p=Os(e,g,!0,!1);if(p.length)return p.sort((y,w)=>{const E=e.children.findIndex(D=>D.id===y.id),S=e.children.findIndex(D=>D.id===w.id);return E-S}),r==="down"?a.indexOf(p[0]):a.indexOf(p[p.length-1])}return o},f7=e=>wC(e)||YO(e),wC=e=>e.pointerType==="pen",YO=e=>e.pointerType==="touch",ZO=(e,n)=>{const r=wc(e,n),i=NE(e),o=[...r,...i],s=GO();if(zO(e)){o.forEach(g=>{const p=H.findPath(e,g);Hf.setNode(e,{groupId:s.id},p)});const a=tt(e),u=nO(e,a),f=nw(e,o);if(nb(f)||WO(e,a,[u-1]),r7(o)){const g=i[0].groupId;Hf.insertNode(e,{...s,groupId:g},[e.children.length])}else Hf.insertNode(e,s,[e.children.length])}},QO=(e,n)=>{const r=wc(e,n);$O(e)&&(r.forEach(i=>{Og(e,{match:s=>s.groupId===i.id,recursion:()=>!1}).forEach(s=>{const a=H.findPath(e,s);Hf.setNode(e,{groupId:i.groupId||void 0},a)})}),r.map(i=>{const o=H.findPath(e,i),s=e.pathRef(o);return()=>{s.current&&Hf.removeNode(e,s.current),s.unref()}}).forEach(i=>{i()}))},JO={addGroup:ZO,removeGroup:QO};function h7(e,n){const r={type:"set_selection",properties:e.selection,newProperties:n};e.apply(r)}const eI={setSelection:h7,addSelectionWithTemporaryElements:d7};function d7(e,n){const r=setTimeout(()=>{h7(e,{anchor:[0,0],focus:[0,0]})},0);let i=RO(e);if(i){clearTimeout(i.timeoutId);const o=i.elements;i.elements.push(...n.filter(s=>!o.includes(s))),i.timeoutId=r}else qy.set(e,{timeoutId:r,elements:n})}const tI=e=>{const n=u7(e,"up");S1(e,n)},nI=e=>{const n=u7(e,"down");S1(e,n)},rI=e=>{const n=l7(e,"up");S1(e,n)},iI=e=>{const n=l7(e,"down");S1(e,n)},oI={moveUp:rI,moveDown:iI,moveToTop:tI,moveToBottom:nI},sI=(e,n)=>{n.map(r=>{const i=H.findPath(e,r),o=e.pathRef(i);return()=>{o.current&&YA(e,o.current),o.unref(),ew(e,r,!0)}}).forEach(r=>{r()})},jE={removeElements:sI},Ze={...ob,...Fb,...eI,...Hf,...JO,...oI},Ir=(e,n,r)=>(r||(r=0),Array.isArray(e)&&typeof e[0]=="number"?gg(e[0],e[1],n[0],n[1],r):e.map(i=>gg(i[0],i[1],n[0],n[1],r||0))),Co=e=>{var r;let n=((r=e[0])==null?void 0:r.angle)||0;return e.forEach(i=>{i.angle!==n&&!fC((i.angle||0)%(Math.PI/2)-n%(Math.PI/2),0)&&(n=0)}),n},aI=e=>{if(!e.length)return!1;const n=e[0].angle;return n===void 0?!1:!e.some(r=>r.angle!==n)},lI=(e,n)=>{let r=[];for(let u=0;u<e.length;u++){const f=e[u],d=Ir(f,[0,0],-n);r.push(_.getRectangleByPoints(d))}const i=_.getBoundingRectangle(r),o=_.getCornerPoints(i),s=Ir(o,[0,0],n),a=_.getCenterPoint(_.getRectangleByPoints(s));return _.getRectangleByPoints(Ir(s,a,-n))},uI=(e,n,r)=>{const i=_.getCenterPoint(e),[o]=Ir([i],n,r),s=o[0]-i[0],a=o[1]-i[1];return{offsetX:s,offsetY:a}},xC=(e,n,r)=>{const{offsetX:i,offsetY:o}=uI(_.getRectangleByPoints(e),n,r);return e.map(s=>[s[0]+i,s[1]+o])},Za=e=>g7(e.angle),g7=e=>e&&e!==0,Qa=(e,n)=>{if(Za(n)){let r=_.getRectangleByPoints(n.points);const i=_.getCenterPoint(r);return Ir(e,i,n.angle)}else return null},cI=(e,n)=>{if(g7(n)){let r=_.getRectangleByPoints(e);const i=_.getCenterPoint(r);return Ir(e,i,n)}else return null},hc=(e,n,r,i=!1)=>{if(Za(r)){let o=_.getRectangleByPoints(r.points);const s=i?ki(e,o):o,a=_.getCenterPoint(s);return Ir(n,a,r.angle?-r.angle:0)}else return null},T1=(e,n)=>{if(n){const r=_.getCornerPoints(e),i=_.getCenterPoint(e);return _.getRectangleByPoints(Ir(r,i,n))}return e},fI=e=>{const n=Math.abs(e)%Math.PI;return n>=1/4*Math.PI&&n<=3/4*Math.PI};function CC(e){return e/180*Math.PI}function hI(e,n,r){const i=dn(e,n,!1),o=_.getCenterPoint(i);n.forEach(s=>{const a=s.angle,u=xC(s.points,o,$p(r)),f=H.findPath(e,s);Ze.setNode(e,{points:u,angle:$p((a||0)+r)},f)})}const $p=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,dI=(e,n,r)=>{const i=5*Math.PI/2+Math.atan2(e[1]-r[1],e[0]-r[0]),o=5*Math.PI/2+Math.atan2(n[1]-r[1],n[0]-r[0]);return $p(o-i)},gI=e=>e==null?void 0:e.angle,Rs=(e,n,r)=>{if(r===0){e.removeAttribute("transform");return}var i=n[0],o=n[1];let s=Math.cos(r),a=Math.sin(r),f="matrix("+[s,a,-a,s,i*(1-s)+o*a,o*(1-s)-i*a].join(",")+")";e.setAttribute("transform",`${f}`)};function dn(e,n,r){const i=[],o=s=>{const a=e.getRectangle(s);if(a){const u=_.getCornerPoints(a),f=Qa(u,s)||u;i.push(f)}else console.error("can not get rectangle of element:",s)};if(n.forEach(s=>{r?mi(s,a=>o(a),a=>e.isRecursion(a)):o(s)}),i.length>0)if(aI(n)){const s=Co(n);return lI(i,s)}else{const s=i.reduce((a,u)=>a.concat(u),[]);return _.getRectangleByPoints(s)}else return{x:0,y:0,width:0,height:0}}function As(e,n,r){const i=!r&&Gv(e).get(n);return i||(r||(r=Og(e,{match:s=>!0,recursion:s=>!0})),r.find(s=>s.id===n))}function Gv(e){const n=iC.get(e);if(!n)throw new Error("can not resolve element map");return n}function Og(e,n){let r=[];const i=n.isReverse??!0;return mi(e,o=>{!H.isBoard(o)&&n.match(o)&&r.push(o)},o=>H.isBoard(o)?!0:nh(e)(o)&&n.recursion(o),i),r}var dr;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(dr||(dr={}));const ti="#333333",p7={mode:dr.default,boardBackground:"#ffffff",textColor:ti},m7={mode:dr.colorful,boardBackground:"#ffffff",textColor:ti},v7={mode:dr.soft,boardBackground:"#f5f5f5",textColor:ti},y7={mode:dr.retro,boardBackground:"#f9f8ed",textColor:ti},w7={mode:dr.dark,boardBackground:"#141414",textColor:"#FFFFFF"},x7={mode:dr.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},pI=[p7,m7,v7,y7,w7,x7],H={isBoard(e){const n=rS.get(e);if(n!==void 0)return n;const r=typeof e.onChange=="function"&&typeof e.apply=="function";return rS.set(e,r),r},isAlive(e){return!!uC.get(e)},findPath(e,n){const r=[];let i=n;for(;;){const o=_f.get(i);if(o==null){if(H.isBoard(i))return r;break}const s=og.get(i);if(s==null)break;r.unshift(s),i=o}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(n)}`)},getHost(e){return aC.get(e)},getElementLowerHost(e){var n;return(n=Hl.get(e))==null?void 0:n.lowerHost},getElementHost(e){var n;return(n=Hl.get(e))==null?void 0:n.host},getElementUpperHost(e){var n;return(n=Hl.get(e))==null?void 0:n.upperHost},getElementTopHost(e){var n;return(n=Hl.get(e))==null?void 0:n.topHost},getActiveHost(e){var n;return(n=Hl.get(e))==null?void 0:n.activeHost},getRoughSVG(e){return sC.get(e)},getBoardContainer(e){var n;return(n=Hl.get(e))==null?void 0:n.container},getBoardContext(e){return lC.get(e)},getRectangle(e){return dn(e,e.children,!0)},getViewportContainer(e){var n;return(n=Hl.get(e))==null?void 0:n.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!oC.get(e)},getPointer(e){return e.pointer},isPointer(e,n){return e.pointer===n},isInPointer(e,n){const r=e.pointer;return n.includes(r)},getMovingPointInBoard(e){return cC.get(e)},isMovingPointInBoard(e){const n=RA.get(e),r=H.getBoardContainer(e).getBoundingClientRect();return!!(n&&E1(n[0],n[1],r)===0)},getThemeColors(e){return e.options.themeColors||pI}};var nn;(function(e){e.hand="hand",e.selection="selection"})(nn||(nn={}));const mI=e=>e.type==="set_viewport",vI=e=>e.type==="set_selection",yI=e=>e.type==="set_theme",wI=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:n,path:r}=e;if(Dt.equals(n,r))return e;const i=Dt.transform(r,e),o=Dt.transform(Dt.next(r),e);return{...e,path:i,newPath:o}}case"set_node":{const{properties:n,newProperties:r}=e;return{...e,properties:r,newProperties:n}}case"set_selection":{const{properties:n,newProperties:r}=e;return n==null?{...e,properties:r,newProperties:null}:r==null?{...e,properties:null,newProperties:n}:{...e,properties:r,newProperties:n}}case"set_viewport":{const{properties:n,newProperties:r}=e;return n==null?{...e,properties:r,newProperties:r}:r==null?{...e,properties:n,newProperties:n}:{...e,properties:r,newProperties:n}}case"set_theme":{const{properties:n,newProperties:r}=e;return{...e,properties:r,newProperties:n}}}},Yu={isSetViewportOperation:mI,isSetSelectionOperation:vI,isSetThemeOperation:yI,inverse:wI},Pt={isEquals(e,n){return e&&n&&e[0]===n[0]&&e[1]===n[1]},isHorizontal(e,n,r=0){return e&&n&&Pt.isOverHorizontal([e,n],r)},isOverHorizontal(e,n=0){return e.every(r=>Math.abs(r[1]-e[0][1])<=n)},isVertical(e,n,r=0){return e&&n&&Pt.isOverVertical([e,n],r)},isOverVertical(e,n=0){return e.every(r=>Math.abs(r[0]-e[0][0])<=n)},isAlign(e,n=0){return Pt.isOverHorizontal(e,n)||Pt.isOverVertical(e,n)},getOffsetX(e,n){return n[0]-e[0]},getOffsetY(e,n){return n[1]-e[1]}},j2=new WeakMap,Or=new WeakMap,fv=new WeakMap;var Gt;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(Gt||(Gt={}));const xI=e=>e===Gt.left||e===Gt.right,Xi={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function CI(e){return EI(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function EI(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function PI(e,n){if(Array.isArray(e))for(let r=0;r<e.length;r++)n(e[r]);else{const r=e[Symbol.iterator]();let i;for(;!(i=r.next()).done;)n(i.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const SI=(e,n)=>n;class TI{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||SI}forEachItem(n){let r;for(r=this._itHead;r!==null;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,i=this._removalsHead,o=0,s=null;for(;r||i;){const a=!i||r&&r.currentIndex<pS(i,o,s)?r:i,u=pS(a,o,s),f=a.currentIndex;if(a===i)o--,i=i._nextRemoved;else if(r=r._next,a.previousIndex==null)o++;else{s||(s=[]);const d=u-o,g=f-o;if(d!=g){for(let y=0;y<d;y++){const w=y<s.length?s[y]:s[y]=0,E=w+y;g<=E&&E<d&&(s[y]=w+1)}const p=a.previousIndex;s[p]=g-d}}u!==f&&n(a,u,f)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;r!==null;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;r!==null;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;r!==null;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;r!==null;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;r!==null;r=r._nextIdentityChange)n(r)}diff(n){if(n==null&&(n=[]),!CI(n))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._itHead,i=!1,o,s,a;if(Array.isArray(n)){this.length=n.length;for(let u=0;u<this.length;u++)s=n[u],a=this._trackByFn(u,s),r===null||!Object.is(r.trackById,a)?(r=this._mismatch(r,s,a,u),i=!0):(i&&(r=this._verifyReinsertion(r,s,a,u)),Object.is(r.item,s)||this._addIdentityChange(r,s)),r=r._next}else o=0,PI(n,u=>{a=this._trackByFn(o,u),r===null||!Object.is(r.trackById,a)?(r=this._mismatch(r,u,a,o),i=!0):(i&&(r=this._verifyReinsertion(r,u,a,o)),Object.is(r.item,u)||this._addIdentityChange(r,u)),r=r._next,o++}),this.length=o;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,i,o){let s;return n===null?s=this._itTail:(s=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,s,o)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,o),n!==null?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,s,o)):n=this._addAfter(new DI(r,i),s,o)),n}_verifyReinsertion(n,r,i,o){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?n=this._reinsertAfter(s,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;n!==null;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,s=n._nextRemoved;return o===null?this._removalsHead=s:o._nextRemoved=s,s===null?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(n,r,i),this._addToMoves(n,i),n}_moveAfter(n,r,i){return this._unlink(n),this._insertAfter(n,r,i),this._addToMoves(n,i),n}_addAfter(n,r,i){return this._insertAfter(n,r,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,r,i){const o=r===null?this._itHead:r._next;return n._next=o,n._prev=r,o===null?this._itTail=n:o._prev=n,r===null?this._itHead=n:r._next=n,this._linkedRecords===null&&(this._linkedRecords=new gS),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);const r=n._prev,i=n._next;return r===null?this._itHead=i:r._next=i,i===null?this._itTail=r:i._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gS),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}}class DI{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AI{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let i;for(i=this._head;i!==null;i=i._nextDup)if((r===null||r<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const r=n._prevDup,i=n._nextDup;return r===null?this._head=i:r._nextDup=i,i===null?this._tail=r:i._prevDup=r,this._head===null}}class gS{constructor(){this.map=new Map}put(n){const r=n.trackById;let i=this.map.get(r);i||(i=new AI,this.map.set(r,i)),i.add(n)}get(n,r){const i=n,o=this.map.get(i);return o?o.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function pS(e,n,r){const i=e.previousIndex;if(i===null)return i;let o=0;return r&&i<r.length&&(o=r[i]),i+n+o}class C7{constructor(n){this.board=n,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(n,r){this.initialized=!0,this.children=n,n.forEach((i,o)=>{og.set(i,o),_f.set(i,r.parent);const s=z2(this.board,i,o,r.parent),a=vS(this.board,s),u=mS(this.board,a,s,r);this.instances.push(u),this.contexts.push(s)}),this.differ=new TI(BI),this.differ.diff(n)}update(n,r){if(!this.initialized){this.initialize(n,r);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:i,parent:o}=r,s=this.differ.diff(n);if(s){const a=[],u=[];let f=null;s.forEachItem(d=>{var y;og.set(d.item,d.currentIndex),_f.set(d.item,r.parent);const g=d.previousIndex===null?void 0:this.contexts[d.previousIndex],p=z2(i,d.item,d.currentIndex,o,g);if(d.previousIndex===null){const w=vS(i,p),E=mS(i,w,p,r);a.push(p),u.push(E)}else{const w=this.instances[d.previousIndex];w.context=p,u.push(w),a.push(p)}(d.item===this.children[0]||d.item.id===((y=this.children[0])==null?void 0:y.id))&&(f=d.currentIndex)}),s.forEachOperation(d=>{if(d.currentIndex===null){const g=this.instances[d.previousIndex];g==null||g.destroy()}d.previousIndex!==null&&d.currentIndex!==null&&P7(d.item,d.currentIndex,r,f)}),this.instances=u,this.contexts=a,this.children=n}else{const a=[];this.children.forEach((u,f)=>{og.set(u,f),_f.set(u,r.parent);const d=this.contexts[f],g=this.instances[f],p=z2(i,u,f,o,d);g.context=p,a.push(p)}),this.contexts=a}}destroy(){this.children.forEach((n,r)=>{this.instances[r]&&this.instances[r].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const BI=(e,n)=>n.id,mS=(e,n,r,i)=>{const o=new n;o.context=r,e.normalizeElement(r);try{o.initialize()}catch(a){Ju()&&console.error("list-render-initialize",a,"context",r)}const s=o.getContainerG();return E7(r.index,s,i),o.initializeListRender(),o},vS=(e,n)=>e.drawElement(n),z2=(e,n,r,i,o)=>{var f;let s=Nf(e,n);const a=o&&o.element;return a&&a!==n&&Nf(e,a)&&(s=!0,bb(e,a,n)),{element:n,parent:i,board:e,selected:s,index:r,hasThemeChanged:!!((f=e.operations)!=null&&f.find(d=>d.type==="set_theme"))}},E7=(e,n,r,i=null)=>{const{parent:o,parentG:s}=r;if(H.isBoard(o))if(e>0){const a=o.children[e-1];hn.getContainerG(a,{suppressThrow:!1}).insertAdjacentElement("afterend",n)}else if(i!==null){const a=o.children[i],u=a&&hn.getContainerG(a,{suppressThrow:!0});if(a&&u)s.insertBefore(n,u);else throw new Error("fail to mount container on moving")}else s.append(n);else if(e>0){const a=o.children[e-1];hn.getElementG(a).insertAdjacentElement("afterend",n)}else if(i){const a=o.children[i],u=a&&H.findPath(r.board,a),f=u&&tn.first(r.board,u),d=f&&hn.getContainerG(f,{suppressThrow:!1});if(d)s.insertBefore(n,d);else throw new Error("fail to mount container on moving")}else{let a=hn.getElementG(o);s.insertBefore(n,a)}},P7=(e,n,r,i)=>{const o=hn.getContainerG(e,{suppressThrow:!1});E7(n,o,r,i),e.children&&!hn.isRootElement(e)&&r.board.isExpanded(e)&&e.children.forEach((s,a)=>{P7(s,a,{...r,parent:e},null)})};class MI{get hasChildren(){return!!this.element.children}set context(n){Zk(this)&&this.beforeContextChange(n);const r=this._context;if(this._context=n,this.initialized){const i=this.getElementG(),o=this.getContainerG();yp.set(this.element,i),wp.set(this.element,o),Gv(this.board).set(this.element.id,this.element),xp.set(this.element,this.ref),this.updateListRender(),Qk(this)&&this.onContextChanged(n,r)}else hn.isRootElement(this.element)&&this.hasChildren?(this._g=$t(),this._containerG=$t(),this._containerG.append(this._g)):(this._g=$t(),this._containerG=this._g),yp.set(this.element,this._g),wp.set(this.element,this._containerG),xp.set(this.element,this.ref),Gv(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(n){this.ref=n,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(hn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const n=H.findPath(this.board,this.element),r=tn.get(this.board,n.slice(0,1));this._rootContainerG=hn.getContainerG(r,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new C7(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var n;yp.get(this.element)===this._g&&yp.delete(this.element),Gv(this.board).delete(this.element.id),wp.get(this.element)===this._containerG&&wp.delete(this.element),xp.get(this.element)===this.ref&&xp.set(this.element,this.ref),ew(this.board,this.element),this.getContainerG().remove(),(n=this.listRender)==null||n.destroy()}}class RI{constructor(){this.uploadingFiles=[]}getUploadingFile(n){return this.uploadingFiles.find(r=>r.url===n)}setUploadingFile(n){return this.uploadingFiles.push(n)}removeUploadingFile(n){this.uploadingFiles=this.uploadingFiles.filter(r=>r.url!==n.url)}}const kI={transform(e,n){const{current:r}=e;if(r==null)return;const i=Dt.transform(r,n);e.current=i,i==null&&e.unref()}};function bI(e,n){const r={viewport:{zoom:1},children:e,theme:{themeColorMode:dr.default},operations:[],history:{redos:[],undos:[]},selection:null,options:n||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:n!=null&&n.readonly?nn.hand:nn.selection,undo:()=>{},redo:()=>{},apply:i=>{for(const o of r.pathRefs())kI.transform(o,i);r.operations.push(i),Ze.transform(r,i),_v.get(r)||(_v.set(r,!0),Promise.resolve().then(()=>{_v.set(r,!1),r.onChange(),r.afterChange(),r.operations=[]}))},pathRef:(i,o)=>{const s=(o==null?void 0:o.affinity)||"forward",a={current:i,affinity:s,unref(){const{current:f}=a;return r.pathRefs().delete(a),a.current=null,f}};return r.pathRefs().add(a),a},pathRefs:()=>{let i=iS.get(r);return i||(i=new Set,iS.set(r,i)),i},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>bO(r),mousedown:i=>{},mousemove:i=>{},mouseleave:i=>{},globalMousemove:i=>{},mouseup:i=>{},globalMouseup:i=>{},keyDown:i=>{},globalKeyDown:i=>{},keyUp:i=>{},dblClick:i=>{},buildFragment:(i,o,s,a)=>i,insertFragment:(i,o,s)=>{},deleteFragment:i=>{jE.removeElements(r,i)},getDeletedFragment:i=>i,getRelatedFragment:(i,o)=>i,normalizeElement:i=>{},drawElement:i=>{throw new Error(`can not resolve plugin element component type: ${i.element.type}`)},isWithinSelection:i=>!1,isRectangleHit:i=>!1,isHit:i=>!1,isInsidePoint:i=>!1,getOneHitElement:i=>i[0],isRecursion:i=>!0,isMovable:i=>!1,getRectangle:i=>null,applyTheme:i=>{},isAlign:i=>!1,pointerDown:i=>{},pointerMove:i=>{},pointerUp:i=>{},pointerCancel:i=>{},pointerOut:i=>{},pointerLeave:i=>{},globalPointerMove:i=>{},globalPointerUp:i=>{},drop:i=>!1,isImageBindingAllowed:i=>!1,canAddToGroup:i=>!0,canSetZIndex:i=>!0,isExpanded:i=>!0};return r}function OI(e){const{onChange:n,afterChange:r}=e;return e.onChange=()=>{const i=oy.get(e);i&&i(),n()},e.afterChange=()=>{const i=sy.get(e);i&&i(),r()},e}const yS=(e,n)=>H.isPointer(e,nn.selection)&&f7(n),wS="Space";function II(e){const{pointerDown:n,pointerMove:r,globalPointerUp:i,keyDown:o,keyUp:s,pointerUp:a}=e;let u=!1,f=null,d=null,g=!1,p=!1;return e.pointerDown=y=>{const w=e.getPluginOptions(Xa.withHand),E=It(e,Lt(e,y.x,y.y)),S=_A(e,E);((w==null?void 0:w.isHandMode(e,y))||H.isPointer(e,nn.hand)||yS(e,y)&&!S||p)&&Ya(y)?(f={x:y.x,y:y.y},H.isPointer(e,nn.hand)||H.getBoardContainer(e).classList.add("viewport-moving")):vb(y)&&(g=!0,y.preventDefault(),f={x:y.x,y:y.y},u=!0,H.getBoardContainer(e).classList.add("viewport-moving")),d=y,n(y)},e.pointerMove=y=>{const w=e.getPluginOptions(Xa.withHand),E=BA+4;if(f&&!u&&!vi(e)&&d&&bt(d.x,d.y,y.x,y.y)>E&&!fc(e)&&(u=!0,H.getBoardContainer(e).classList.add("viewport-moving")),((w==null?void 0:w.isHandMode(e,y))||H.isPointer(e,nn.hand)||yS(e,y)||g||p)&&u&&f&&!vi(e)&&!fc(e)){const D=H.getViewportContainer(e),A=D.scrollLeft-(y.x-f.x),P=D.scrollTop-(y.y-f.y);VA(e,A,P,!1),f.x=y.x,f.y=y.y}r(y)},e.pointerUp=y=>{u||a(y)},e.globalPointerUp=y=>{f&&(f=null),u=!1,H.getBoardContainer(e).classList.remove("viewport-moving"),g=!1,i(y)},e.keyDown=y=>{y.code===wS&&(!e.options.readonly&&!H.isPointer(e,nn.hand)&&(p=!0,mC(e,{isDisabledSelection:!0}),H.getBoardContainer(e).classList.add("viewport-moving")),y.preventDefault()),o(y)},e.keyUp=y=>{!e.options.readonly&&y.code===wS&&(p=!1,mC(e,{isDisabledSelection:!1}),H.getBoardContainer(e).classList.remove("viewport-moving")),s(y)},e}function FI(e){const{apply:n,keyDown:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:i}=e,{redos:o}=i;if(o.length>0){const s=o[o.length-1];Ps.withoutSaving(e,()=>{for(const a of s)e.apply(a)}),i.redos.pop(),i.undos.push(s)}},e.undo=()=>{const{history:i}=e,{undos:o}=i;if(o.length>0){const s=o[o.length-1];Ps.withoutSaving(e,()=>{const a=s.map(Yu.inverse).reverse();for(const u of a)e.apply(u)}),i.redos.push(s),i.undos.pop()}},e.apply=i=>{const{operations:o,history:s}=e,{undos:a}=s,u=a[a.length-1],f=u&&u[u.length-1];let d=Ps.isSaving(e),g=Ps.isMerging(e);if(d==null&&(d=Tb(i)),d){if(g||(u==null?g=!1:o.length!==0?g=!0:g=Sb(i,f)),Ps.isSplittingOnce(e)&&(g=!1,Ps.setSplittingOnce(e,void 0)),u&&g)u.push(i);else{const p=[i];a.push(p)}for(;a.length>100;)a.shift();Db(i)&&(s.redos=[])}n(i)},e.keyDown=i=>{if(on.isHotkey("mod+z",i)){e.undo();return}if(on.isHotkey("mod+shift+z",i)){e.redo();return}r(i)},e}const LI=e=>{const{keyDown:n,keyUp:r,globalKeyDown:i}=e;return e.keyDown=o=>{const s=e.getPluginOptions(Xa.withSelection);if(!H.isReadonly(e)&&s.isMultipleSelection&&on.isHotkey("mod+a",o)){o.preventDefault();let u=[];mi(e,f=>{H.isBoard(f)||u.push(f)},f=>!!(H.isBoard(f)||e.isRecursion(f)),!0),Ze.addSelectionWithTemporaryElements(e,u);return}if(!H.isReadonly(e)){if(on.isKeyHotkey("mod+]",o)){o.preventDefault(),Ze.moveUp(e);return}if(on.isKeyHotkey("mod+[",o)){o.preventDefault(),Ze.moveDown(e);return}if(on.isKeyHotkey("mod+option+",o)){o.preventDefault(),Ze.moveToTop(e);return}if(on.isKeyHotkey("mod+option+",o)){o.preventDefault(),Ze.moveToBottom(e);return}}const a=tt(e);if(!H.isReadonly(e)&&a.length>0&&on.isKeyHotkey("mod+d",o)){o.preventDefault(),GE(e);return}!H.isReadonly(e)&&a.length>0&&(Mi.isDeleteBackward(o)||Mi.isDeleteForward(o))&&(o.preventDefault(),HE(e)),n(o)},e.keyUp=o=>{r(o)},e.globalKeyDown=o=>{if(H.getMovingPointInBoard(e)||H.isMovingPointInBoard(e)){if(on.isHotkey(["mod+=","mod++"],{byKey:!0})(o)){o.preventDefault(),sn.updateZoom(e,e.viewport.zoom+.1);return}if(on.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(o)){o.preventDefault(),sn.fitViewport(e);return}if(on.isHotkey(["mod+-","mod+shift+-"])(o)){o.preventDefault(),sn.updateZoom(e,e.viewport.zoom-.1);return}if(on.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(o)){o.preventDefault(),sn.updateZoom(e,1);return}}i(o)},e};function _I(e,n,r){const i=o7(e,r),o=$t();let s=HI(n,i);const a=jI(e,s,n,i);o.append(a);const u=zI(e,s,n,i);return s=u.snapDelta,o.append(u.snapG),{...s,snapG:o}}function NI(e,n,r){const i=Kf(e,r),o=Dp(n,i[0],r),s=Dp(n,i[1],r),a=Dp(n,i[2],r);return[o,s,a]}function HI(e,n){let r={deltaX:0,deltaY:0};function i(o){let s=0;const a=NI(e,n,o);for(let u=0;u<a.length;u++)if(Math.abs(a[u])<Xl){s=a[u];break}return s}return r.deltaX=i(!0),r.deltaY=i(!1),r}function GI(e,n){const{deltaX:r,deltaY:i}=e,{x:o,y:s,width:a,height:u}=n;return{x:o+r,y:s+i,width:a,height:u}}function jI(e,n,r,i){const o=GI(n,r);return s7(e,o,i,!0,!0,!0)}function zI(e,n,r,i){let o=n.deltaX,s=n.deltaY;const a=xS(r,i,!0),u=xS(r,i,!1),f=[...a.lines,...u.lines];return a.delta&&(o=a.delta),u.delta&&(s=u.delta),{snapDelta:{deltaX:o,deltaY:s},snapG:a7(e,f)}}function xS(e,n,r){var P,b;let i=[],o=0,s=[];const a=r?"x":"y",u=r?"width":"height",f=e[a]+e[u]/2;n.forEach(R=>{(r?$I(R,e):WI(R,e))&&!_.isHit(R,e)&&s.push(R)}),s=[...s,e].sort((R,L)=>R[a]-L[a]);const d=[];let g=0,p,y;for(let R=0;R<s.length;R++)for(let L=R+1;L<s.length;L++){const V=s[R],Z=s[L],ne=Z[a]-(V[a]+V[u]);let le=1/0;(P=d[R])!=null&&P.after?d[R].after.push({distance:ne,index:L}):d[R]={...d[R],after:[{distance:ne,index:L}]},(b=d[L])!=null&&b.before?d[L].before.push({distance:ne,index:R}):d[L]={...d[L],before:[{distance:ne,index:R}]};let de=(V[a]+V[u]+Z[a])/2;le=Math.abs(de-f),le<Xl&&(g=(Z[a]-(V[a]+V[u])-e[u])/2,o=de-f,p=R,y=L);const Pe=Z[a]-(V[a]+V[u]);de=Z[a]+Z[u]+Pe+e[u]/2,le=Math.abs(de-f),(!g||g!==Pe)&&le<Xl&&(g=Pe,p=L,o=de-f);const ue=Z[a]-(V[a]+V[u]);de=V[a]-ue-e[u]/2,le=Math.abs(de-f),!g&&le<Xl&&(g=ue,y=R,o=de-f)}const w=s.indexOf(e);let E=[],S=[];if(p!==void 0&&(E.push(p),D(g,d[p],"before",E)),y!==void 0&&(S.push(y),D(g,d[y],"after",S)),E.length||S.length){const R=[...E.reverse(),w,...S];e[a]+=o;for(let L=1;L<R.length;L++)i.push(A(s[R[L-1]],s[R[L]]))}function D(R,L,V,Z){const ne=L[V],le=d.indexOf(L);if(!(le===0&&V==="before"||le===d.length-1&&V==="after")){for(let de=0;de<ne.length;de++)if(Math.abs(ne[de].distance-R)<.1){Z.push(ne[de].index),D(R,d[ne[de].index],V,Z);return}}}function A(R,L){const V=a==="x"?"y":"x",Z=u==="width"?"height":"width",le=[R[V],R[V]+R[Z],L[V],L[V]+L[Z]].sort((ue,he)=>ue-he),de=(le[1]+le[2])/2,Pe=3;return r?[[R.x+R.width+Pe,de],[L.x-Pe,de]]:[[de,R.y+R.height+Pe],[de,L.y-Pe]]}return{delta:o,lines:i}}function $I(e,n){return!(e.y+e.height<n.y||e.y>n.y+n.height)}function WI(e,n){return!(e.x+e.width<n.x||e.x>n.x+n.width)}function VI(e){const{pointerDown:n,pointerMove:r,globalPointerUp:i,globalPointerMove:o,globalKeyDown:s,keyUp:a}=e;let u=0,f=0,d=!1,g,p=[],y=null,w=null,E=null,S,D,A=null;e.globalKeyDown=b=>{H.isReadonly(e)||on.isKeyHotkey("option",b)&&(b.preventDefault(),g&&p.length&&!H.hasBeenTextEditing(e)&&(A=CS(e,p,u,f),A&&H.getElementTopHost(e).append(A))),s(b)},e.keyUp=b=>{if(!H.isReadonly(e)&&A&&g&&p.length&&!H.hasBeenTextEditing(e)){b.preventDefault();const R=EC(e,p,u,f);H.getBoardContainer(e).classList.add("element-moving"),aS(e,R)}A==null||A.remove(),a(b)},e.pointerDown=b=>{if(H.isReadonly(e)||!H.isPointer(e,nn.selection)||!Ya(b)){n(b);return}const R=It(e,Lt(e,b.x,b.y));if(S=rl(e,R,L=>e.isMovable(L)),E=S7(e),D=S&&E.includes(S),S&&D)g=R,p=E,w=dn(e,p,!0);else if(S){g=R;const L=e.getRelatedFragment([],[S]);p=[...LE(e,S),...L],w=dn(e,p,!0)}else{const L=E.length>0&&dn(e,E,!1);L&&_.isPointInRectangle(L,R)&&(g=R,p=E,w=L)}n(b)},e.pointerMove=b=>{if(g&&p.length&&!H.hasBeenTextEditing(e)){d||(d=!0),y==null||y.remove(),A==null||A.remove();const R=It(e,Lt(e,b.x,b.y));u=R[0]-g[0],f=R[1]-g[1],(bt(...R,...g)>vE||rO(e).length>0)&&(S&&!D&&E&&E.length>0&&(d7(e,[]),S=void 0,E=null,D=void 0),ha(e,"with-moving",()=>{if(!w)return;const V={...w,x:w.x+u,y:w.y+f},Z=T1(V,Co(p)),ne=_I(e,Z,p);if(u+=ne.deltaX,f+=ne.deltaY,y=ne.snapG,y.classList.add(DA),H.getElementTopHost(e).append(y),b.altKey)A=CS(e,p,u,f),A&&H.getElementTopHost(e).append(A);else{const le=EC(e,p,u,f);H.getBoardContainer(e).classList.add("element-moving"),aS(e,le)}}))}d&&b.preventDefault(),r(b)},e.globalPointerMove=b=>{g&&(cb(e,b.x,b.y)||P(e)),o(b)},e.globalPointerUp=b=>{if(b.altKey&&p.length){const R=zE(e,p),L=dn(e,R,!1);GE(e,R,[L.x+u,L.y+f])}d=!1,S=void 0,E=null,D=void 0,g&&P(e),i(b)};function P(b){y==null||y.remove(),A==null||A.remove(),g=null,w=null,u=0,f=0,p=[],fc(b)&&iO(b),Or.set(b,!1),H.getBoardContainer(b).classList.remove("element-moving")}return UI(e)}function UI(e){const{keyDown:n,keyUp:r}=e;return e.keyDown=i=>{const o=tt(e);if(!H.isReadonly(e)&&o.length>0&&(Mi.isArrow(i)||Mi.isExtendArrow(i))){i.preventDefault();const s=!!i.shiftKey,a=[0,0],u=s?10:1;switch(!0){case(Mi.isMoveUp(i)||Mi.isExtendUp(i)):{a[1]=-u;break}case(Mi.isMoveDown(i)||Mi.isExtendDown(i)):{a[1]=u;break}case(Mi.isMoveBackward(i)||Mi.isExtendBackward(i)):{a[0]=-u;break}case(Mi.isMoveForward(i)||Mi.isExtendForward(i)):{a[0]=u;break}}const f=S7(e);ha(e,"with-arrow-moving",()=>{EC(e,f,a[0],a[1])})}n(i)},e.keyUp=i=>{Or.set(e,!1),r(i)},e}function S7(e){const n=tt(e),r=e.children.filter(s=>e.isMovable(s)),i=n.filter(s=>r.includes(s)),o=e.getRelatedFragment([]);return i.push(...o),i}function zE(e,n){return[...n].filter(i=>!Xi.isGroup(i)&&hn.isRootElement(i))}function EC(e,n,r,i){return zE(e,n).map(a=>{const f=(a.points||[]).map(g=>[g[0]+r,g[1]+i]),d=og.get(a);return Ze.setNode(e,{points:f},[d]),Or.set(e,!0),tn.get(e,[d])})}function CS(e,n,r,i){let o=null;const s=[];return zE(e,n).forEach(u=>{mi(u,f=>{s.push(f)},()=>!0)}),s.forEach(u=>{let f=e.getRectangle(u);if(f){f={x:f.x+r,y:f.y+i,width:f.width,height:f.height};const d=da(e,f,{stroke:So,strokeWidth:1,fill:BE,fillStyle:"solid"});o||(o=$t(),o.classList.add(DA));const g=gI(u);g&&Rs(d,_.getCenterPoint(f),g),o.append(d)}}),o}const XI=e=>{const n=new Map,r=e;return r.getPluginOptions=i=>n.get(i),r.setPluginOptions=(i,o)=>{const s=r.getPluginOptions(i)||{};n.set(i,{...s,...o})},r};function KI(e){const{buildFragment:n}=e;return e.buildFragment=(r,i,o,s)=>{let a=e.getRelatedFragment(s||[]);if(a&&(s!=null&&s.length&&(a=a.filter(u=>!s.map(f=>f.id).includes(u.id))),a.length)){const u={text:"",type:Zl.elements,elements:a};r=rw(r,u)}return n(r,i,o,s)},e}function qI(e){const{pointerDown:n,pointerUp:r,pointerMove:i,globalPointerUp:o,onChange:s,afterChange:a,drawSelectionRectangle:u}=e;let f=null,d=null,g,p,y=!1,w=null,E=null;return e.pointerDown=S=>{!y&&S.shiftKey&&(y=!0),y&&!S.shiftKey&&(y=!1);const D=It(e,Lt(e,S.x,S.y)),A=_A(e,D),P=Hv(e);H.isPointer(e,nn.selection)&&Ya(S)&&!A&&P.isMultipleSelection&&!P.isDisabledSelection&&(f7(S)?w=setTimeout(()=>{f=[S.x,S.y],w=null},120):f=[S.x,S.y]),E=S,n(S)},e.pointerMove=S=>{if(w&&E&&bt(E.x,E.y,S.x,S.y)>BA&&(clearTimeout(w),w=null),H.isPointer(e,nn.selection)&&f){S.preventDefault(),d=[S.x,S.y];const D=_.getRectangleByPoints([Xf(e,...f),Xf(e,...d)]);g==null||g.remove(),ha(e,"with-selection",()=>{f&&d&&Ze.setSelection(e,{anchor:It(e,Lt(e,f[0],f[1])),focus:It(e,Lt(e,d[0],d[1]))})}),AO(e),g=da(e,D,{stroke:So,strokeWidth:1,fill:BE,fillStyle:"solid"}),H.getActiveHost(e).append(g)}i(S)},e.pointerUp=S=>{const D=H.isPointer(e,nn.selection)||H.isPointer(e,nn.hand);if(!Ya(S)||cc(e)||!D){r(S);return}const P=It(e,Lt(e,S.x,S.y)),b={anchor:P,focus:P};Ze.setSelection(e,b),r(S)},e.globalPointerUp=S=>{f&&d&&(g==null||g.remove(),BO(e),Ze.setSelection(e,{anchor:It(e,Lt(e,f[0],f[1])),focus:It(e,Lt(e,d[0],d[1]))}));const D=Hv(e);if(H.isFocus(e)&&!D.isPreventClearSelection){const A=S.target instanceof Node&&H.getBoardContainer(e).contains(S.target),P=S.target instanceof Node&&document.contains(S.target),b=S.target instanceof Element&&S.target.closest(`.${el}`);!A&&!f&&!b&&P&&Ze.setSelection(e,null)}f=null,d=null,w&&(clearTimeout(w),w=null),E=null,o(S)},e.onChange=()=>{const S=Hv(e);if(S.isDisabledSelection&&Mg(e),e.operations.forEach(D=>{D.type==="remove_node"&&ew(e,D.node,!0)}),fS(e)&&hS(e))try{y||p==null||p.remove();const D=MO(e);if(D)Va(e,[...D]);else{let P=FA(e);!S.isMultipleSelection&&P.length>1&&(P=[P[0]]);const b=P.some(L=>L.groupId),R=tt(e);if(b)OO(e,P,y);else{if(e.selection&&pg.isCollapsed(e.selection)){const L=e.getOneHitElement(P);L&&(P=[L])}if(y){const L=[...R];e.selection&&pg.isCollapsed(e.selection)?(P.forEach(V=>{L.includes(V)?L.splice(L.indexOf(V),1):L.push(V)}),Va(e,L)):(P.forEach(V=>{L.includes(V)||L.push(V)}),Va(e,[...L]))}else Va(e,[...P])}}const A=tt(e);kO(e),vi(e)||(p==null||p.remove(),A.length>1&&(p=e.drawSelectionRectangle(),H.getActiveHost(e).append(p)))}catch(D){console.error(D)}s()},e.afterChange=()=>{if(fS(e)&&!hS(e))try{const S=tt(e);S.length&&S.length>1?(p==null||p.remove(),p=e.drawSelectionRectangle(),H.getActiveHost(e).append(p)):p==null||p.remove()}catch(S){console.error(S)}a()},mC(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const YI=e=>{const n=e;return n.getI18nValue=r=>(console.warn(`I18n key "${r}" is not found.`),null),n},iw=(e,n,r="")=>e.getI18nValue(n)||r;var $2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var ES;function ZI(){return ES||(ES=1,function(e){(function(){var n={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var u=arguments[a];u&&(s=o(s,i(u)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var u in s)n.call(s,u)&&s[u]&&(a=o(a,u));return a}function o(s,a){return a?s?s+" "+a:s+a:s}e.exports?(r.default=r,e.exports=r):window.classNames=r})()}($2)),$2.exports}var QI=ZI();const gn=vc(QI);var JI=function(e){return typeof e=="function"};function PS(e,n){if(e===n)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],n[r]))return!1;return!0}function T7(e){var n=K.useRef(e);return n.current=e,n}var eF=function(e){var n=T7(e);K.useEffect(function(){return function(){n.current()}},[])},W2,SS;function $E(){if(SS)return W2;SS=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return W2=e,W2}var V2,TS;function tF(){if(TS)return V2;TS=1;var e=typeof Ds=="object"&&Ds&&Ds.Object===Object&&Ds;return V2=e,V2}var U2,DS;function D7(){if(DS)return U2;DS=1;var e=tF(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return U2=r,U2}var X2,AS;function nF(){if(AS)return X2;AS=1;var e=D7(),n=function(){return e.Date.now()};return X2=n,X2}var K2,BS;function rF(){if(BS)return K2;BS=1;var e=/\s/;function n(r){for(var i=r.length;i--&&e.test(r.charAt(i)););return i}return K2=n,K2}var q2,MS;function iF(){if(MS)return q2;MS=1;var e=rF(),n=/^\s+/;function r(i){return i&&i.slice(0,e(i)+1).replace(n,"")}return q2=r,q2}var Y2,RS;function A7(){if(RS)return Y2;RS=1;var e=D7(),n=e.Symbol;return Y2=n,Y2}var Z2,kS;function oF(){if(kS)return Z2;kS=1;var e=A7(),n=Object.prototype,r=n.hasOwnProperty,i=n.toString,o=e?e.toStringTag:void 0;function s(a){var u=r.call(a,o),f=a[o];try{a[o]=void 0;var d=!0}catch{}var g=i.call(a);return d&&(u?a[o]=f:delete a[o]),g}return Z2=s,Z2}var Q2,bS;function sF(){if(bS)return Q2;bS=1;var e=Object.prototype,n=e.toString;function r(i){return n.call(i)}return Q2=r,Q2}var J2,OS;function aF(){if(OS)return J2;OS=1;var e=A7(),n=oF(),r=sF(),i="[object Null]",o="[object Undefined]",s=e?e.toStringTag:void 0;function a(u){return u==null?u===void 0?o:i:s&&s in Object(u)?n(u):r(u)}return J2=a,J2}var ex,IS;function lF(){if(IS)return ex;IS=1;function e(n){return n!=null&&typeof n=="object"}return ex=e,ex}var tx,FS;function uF(){if(FS)return tx;FS=1;var e=aF(),n=lF(),r="[object Symbol]";function i(o){return typeof o=="symbol"||n(o)&&e(o)==r}return tx=i,tx}var nx,LS;function cF(){if(LS)return nx;LS=1;var e=iF(),n=$E(),r=uF(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt;function f(d){if(typeof d=="number")return d;if(r(d))return i;if(n(d)){var g=typeof d.valueOf=="function"?d.valueOf():d;d=n(g)?g+"":g}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||a.test(d)?u(d.slice(2),p?2:8):o.test(d)?i:+d}return nx=f,nx}var rx,_S;function B7(){if(_S)return rx;_S=1;var e=$E(),n=nF(),r=cF(),i="Expected a function",o=Math.max,s=Math.min;function a(u,f,d){var g,p,y,w,E,S,D=0,A=!1,P=!1,b=!0;if(typeof u!="function")throw new TypeError(i);f=r(f)||0,e(d)&&(A=!!d.leading,P="maxWait"in d,y=P?o(r(d.maxWait)||0,f):y,b="trailing"in d?!!d.trailing:b);function R(he){var ye=g,W=p;return g=p=void 0,D=he,w=u.apply(W,ye),w}function L(he){return D=he,E=setTimeout(ne,f),A?R(he):w}function V(he){var ye=he-S,W=he-D,O=f-ye;return P?s(O,y-W):O}function Z(he){var ye=he-S,W=he-D;return S===void 0||ye>=f||ye<0||P&&W>=y}function ne(){var he=n();if(Z(he))return le(he);E=setTimeout(ne,V(he))}function le(he){return E=void 0,b&&g?R(he):(g=p=void 0,w)}function de(){E!==void 0&&clearTimeout(E),D=0,g=S=p=E=void 0}function Pe(){return E===void 0?w:le(n())}function ue(){var he=n(),ye=Z(he);if(g=arguments,p=this,S=he,ye){if(E===void 0)return L(S);if(P)return clearTimeout(E),E=setTimeout(ne,f),R(S)}return E===void 0&&(E=setTimeout(ne,f)),w}return ue.cancel=de,ue.flush=Pe,ue}return rx=a,rx}var fF=B7();const hF=vc(fF);var dF=!!(typeof window<"u"&&window.document&&window.document.createElement),ix,NS;function gF(){if(NS)return ix;NS=1;var e=B7(),n=$E(),r="Expected a function";function i(o,s,a){var u=!0,f=!0;if(typeof o!="function")throw new TypeError(r);return n(a)&&(u="leading"in a?!!a.leading:u,f="trailing"in a?!!a.trailing:f),e(o,s,{leading:u,maxWait:s,trailing:f})}return ix=i,ix}var pF=gF();const mF=vc(pF);function M7(e,n){if(dF){if(!e)return n;var r;return JI(e)?r=e():"current"in e?r=e.current:r=e,r}}var vF=function(e){var n=function(r,i,o){var s=K.useRef(!1),a=K.useRef([]),u=K.useRef([]),f=K.useRef();e(function(){var d,g=Array.isArray(o)?o:[o],p=g.map(function(y){return M7(y)});if(!s.current){s.current=!0,a.current=p,u.current=i,f.current=r();return}(p.length!==a.current.length||!PS(a.current,p)||!PS(u.current,i))&&((d=f.current)===null||d===void 0||d.call(f),a.current=p,u.current=i,f.current=r())}),eF(function(){var d;(d=f.current)===null||d===void 0||d.call(f),s.current=!1})};return n},yF=vF(K.useEffect);function fi(e,n,r){r===void 0&&(r={});var i=r.enable,o=i===void 0?!0:i,s=T7(n);yF(function(){if(o){var a=M7(r.target,window);if(a!=null&&a.addEventListener){var u=function(d){return s.current(d)},f=Array.isArray(e)?e:[e];return f.forEach(function(d){a.addEventListener(d,u,{capture:r.capture,once:r.once,passive:r.passive})}),function(){f.forEach(function(d){a.removeEventListener(d,u,{capture:r.capture})})}}}},[e,r.capture,r.once,r.passive,o],r.target)}const wF=(e,n,r)=>{fi("pointerdown",i=>{e.pointerDown(i)},{target:r}),fi("pointermove",i=>{cC.set(e,[i.x,i.y]),e.pointerMove(i)},{target:n}),fi("pointerleave",i=>{cC.delete(e),e.pointerLeave(i)},{target:n}),fi("pointerup",i=>{e.pointerUp(i)},{target:n}),fi("dblclick",i=>{H.isFocus(e)&&!H.hasBeenTextEditing(e)&&e.dblClick(i)},{target:r}),fi("pointermove",i=>{RA.set(e,[i.x,i.y]),e.globalPointerMove(i)}),fi("pointerup",i=>{e.globalPointerUp(i)}),fi("keydown",i=>{e.globalKeyDown(i),H.isFocus(e)&&!H.hasBeenTextEditing(e)&&!mb(i.target)&&e.keyDown(i)}),fi("keyup",i=>{H.isFocus(e)&&!H.hasBeenTextEditing(e)&&(e==null||e.keyUp(i))}),fi("copy",i=>{H.isFocus(e)&&!H.hasBeenTextEditing(e)&&(i.preventDefault(),dS(e,la.copy,i.clipboardData))}),fi("paste",async i=>{if(H.isFocus(e)&&!H.isReadonly(e)&&!H.hasBeenTextEditing(e)){const o=H.getMovingPointInBoard(e);if(o){const s=It(e,Lt(e,o[0],o[1])),a=await TO(i.clipboardData);e.insertFragment(a,s,la.paste)}}}),fi("cut",i=>{H.isFocus(e)&&!H.isReadonly(e)&&!H.hasBeenTextEditing(e)&&(i.preventDefault(),dS(e,la.cut,i.clipboardData),HE(e))}),fi("drop",i=>{H.isReadonly(e)||(i.preventDefault(),e.drop(i))},{target:n}),fi("dragover",i=>{i.preventDefault()},{target:n})},xF=(e,n)=>{fi("scroll",i=>{if(Zb(e))qA(e,!1);else{const{scrollLeft:o,scrollTop:s}=i.target;UA(e,o,s)}},{target:n}),fi("touchstart",i=>{i.preventDefault()},{target:n,passive:!1}),fi("wheel",i=>{if(i.metaKey||i.ctrlKey){i.preventDefault();const{deltaX:o,deltaY:s}=i,a=e.viewport.zoom,u=Math.sign(s),f=Xk*100,d=Math.abs(s);let g=s;d>f&&(g=f*u);let p=a-g/100;p+=Math.log10(Math.max(1,a))*-u*Math.min(1,d/20),sn.updateZoom(e,p,H.getMovingPointInBoard(e))}},{target:n,passive:!1});const r=K.useRef(!1);K.useEffect(()=>{const i=new ResizeObserver(()=>{if(!r.current){r.current=!0;return}kE(e),bE(e),cy(e)});return i.observe(H.getBoardContainer(e)),()=>{i&&i.disconnect()}},[])},WE=K.createContext(null),Tr=()=>{const e=K.useContext(WE);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:n}=e;return n},R7=()=>{const e=K.useContext(WE);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:n}=e;return n},k7=({style:e,className:n,children:r,afterInit:i})=>{var E,S;const o=K.useRef(null),s=K.useRef(null),a=K.useRef(null),u=K.useRef(null),f=K.useRef(null),d=K.useRef(null),g=K.useRef(null),p=K.useRef(null),y=Tr(),w=R7();return K.useEffect(()=>{const D=Ok.svg(o.current,{options:{roughness:0,strokeWidth:1}});sC.set(y,D),aC.set(y,o.current),uC.set(y,!0),Hl.set(y,{lowerHost:s.current,host:a.current,upperHost:u.current,topHost:f.current,activeHost:d.current,container:p.current,viewportContainer:g.current});const A=new RI;return lC.set(y,A),iC.set(y,new Map),w.initialized||(w.initialize(y.children,{board:y,parent:y,parentG:H.getElementHost(y)}),i&&i(y)),kE(y),bE(y),Kb(y),()=>{lC.delete(y),sy.delete(y),oy.delete(y),Hl.delete(y),uC.delete(y),aC.delete(y),sC.delete(y),iC.delete(y)}},[]),wF(y,g,o),xF(y,g),k.jsx("div",{className:gn(n,Kk,`${CF()}`,`theme-${(E=y.theme)==null?void 0:E.themeColorMode}`,`pointer-${y.pointer}`,{focused:H.isFocus(y),readonly:H.isReadonly(y),"disabled-scroll":((S=y.options)==null?void 0:S.disabledScrollOnNonFocus)&&!H.isFocus(y)}),ref:p,style:e,children:k.jsxs("div",{className:"viewport-container",ref:g,style:{width:"100%",height:"100%",overflow:"auto"},children:[k.jsxs("svg",{ref:o,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[k.jsx("g",{className:"element-lower-host",ref:s}),k.jsx("g",{className:"element-host",ref:a}),k.jsx("g",{className:"element-upper-host",ref:u}),k.jsx("g",{className:"element-top-host",ref:f})]}),k.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:k.jsx("g",{className:"active-host-g",ref:d})}),r]})})},CF=()=>Eb?"safari":Pb?"chrome":Cb?"firefox":"";var EF={transform(e,n){var{current:r,affinity:i}=e;if(r!=null){var o=oe.transform(r,n,{affinity:i});e.current=o,o==null&&e.unref()}}},PF={transform(e,n){var{current:r,affinity:i}=e;if(r!=null){var o=Cn.transform(r,n,{affinity:i});e.current=o,o==null&&e.unref()}}},SF={transform(e,n){var{current:r,affinity:i}=e;if(r!=null){var o=ke.transform(r,n,{affinity:i});e.current=o,o==null&&e.unref()}}},dy=new WeakMap,gy=new WeakMap,Ap=new WeakMap,b7=new WeakMap,HS=new WeakMap,GS=new WeakMap,jS=new WeakMap,oe={ancestors(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=n,i=oe.levels(e,n);return r?i=i.slice(1):i=i.slice(0,-1),i},common(e,n){for(var r=[],i=0;i<e.length&&i<n.length;i++){var o=e[i],s=n[i];if(o!==s)break;r.push(o)}return r},compare(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++){if(e[i]<n[i])return-1;if(e[i]>n[i])return 1}return 0},endsAfter(e,n){var r=e.length-1,i=e.slice(0,r),o=n.slice(0,r),s=e[r],a=n[r];return oe.equals(i,o)&&s>a},endsAt(e,n){var r=e.length,i=e.slice(0,r),o=n.slice(0,r);return oe.equals(i,o)},endsBefore(e,n){var r=e.length-1,i=e.slice(0,r),o=n.slice(0,r),s=e[r],a=n[r];return oe.equals(i,o)&&s<a},equals(e,n){return e.length===n.length&&e.every((r,i)=>r===n[i])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,n){return oe.compare(e,n)===1},isAncestor(e,n){return e.length<n.length&&oe.compare(e,n)===0},isBefore(e,n){return oe.compare(e,n)===-1},isChild(e,n){return e.length===n.length+1&&oe.compare(e,n)===0},isCommon(e,n){return e.length<=n.length&&oe.compare(e,n)===0},isDescendant(e,n){return e.length>n.length&&oe.compare(e,n)===0},isParent(e,n){return e.length+1===n.length&&oe.compare(e,n)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,n){if(e.length!==n.length)return!1;var r=e.slice(0,-1),i=n.slice(0,-1),o=e[e.length-1],s=n[n.length-1];return o!==s&&oe.equals(r,i)},levels(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=n,i=[],o=0;o<=e.length;o++)i.push(e.slice(0,o));return r&&i.reverse(),i},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var n=e[e.length-1];return e.slice(0,-1).concat(n+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var n=e[e.length-1];if(n<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(n-1)},relative(e,n){if(!oe.isAncestor(n,e)&&!oe.equals(e,n))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(n,"], because it is not above or equal to the path."));return e.slice(n.length)},transform(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var i=[...e],{affinity:o="forward"}=r;if(e.length===0)return i;switch(n.type){case"insert_node":{var{path:s}=n;(oe.equals(s,i)||oe.endsBefore(s,i)||oe.isAncestor(s,i))&&(i[s.length-1]+=1);break}case"remove_node":{var{path:a}=n;if(oe.equals(a,i)||oe.isAncestor(a,i))return null;oe.endsBefore(a,i)&&(i[a.length-1]-=1);break}case"merge_node":{var{path:u,position:f}=n;oe.equals(u,i)||oe.endsBefore(u,i)?i[u.length-1]-=1:oe.isAncestor(u,i)&&(i[u.length-1]-=1,i[u.length]+=f);break}case"split_node":{var{path:d,position:g}=n;if(oe.equals(d,i)){if(o==="forward")i[i.length-1]+=1;else if(o!=="backward")return null}else oe.endsBefore(d,i)?i[d.length-1]+=1:oe.isAncestor(d,i)&&e[d.length]>=g&&(i[d.length-1]+=1,i[d.length]-=g);break}case"move_node":{var{path:p,newPath:y}=n;if(oe.equals(p,y))return i;if(oe.isAncestor(p,i)||oe.equals(p,i)){var w=y.slice();return oe.endsBefore(p,y)&&p.length<y.length&&(w[p.length-1]-=1),w.concat(i.slice(p.length))}else oe.isSibling(p,y)&&(oe.isAncestor(y,i)||oe.equals(y,i))?oe.endsBefore(p,i)?i[p.length-1]-=1:i[p.length-1]+=1:oe.endsBefore(y,i)||oe.equals(y,i)||oe.isAncestor(y,i)?(oe.endsBefore(p,i)&&(i[p.length-1]-=1),i[y.length-1]+=1):oe.endsBefore(p,i)&&(oe.equals(y,i)&&(i[y.length-1]+=1),i[p.length-1]-=1);break}}return i}};function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wp(e)}function TF(e,n){if(Wp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(Wp(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function DF(e){var n=TF(e,"string");return Wp(n)==="symbol"?n:String(n)}function Yi(e,n,r){return n=DF(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function zS(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Zn(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?zS(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zS(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var $S=function(n,r){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return[...n.slice(0,r),...o,...n.slice(r)]},Vp=function(n,r,i){for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return[...n.slice(0,r),...s,...n.slice(r+i)]},WS=Vp,VE=(e,n,r)=>{if(n.length===0)throw new Error("Cannot modify the editor");for(var i=Je.get(e,n),o=n.slice(),s=r(i);o.length>1;){var a=o.pop(),u=Je.get(e,o);s=Zn(Zn({},u),{},{children:Vp(u.children,a,1,s)})}var f=o.pop();e.children=Vp(e.children,f,1,s)},zd=(e,n,r)=>{n.length===0?e.children=r(e.children):VE(e,n,i=>{if(at.isText(i))throw new Error("Cannot get the element at path [".concat(n,"] because it refers to a leaf node: ").concat(Sr.stringify(i)));return Zn(Zn({},i),{},{children:r(i.children)})})},VS=(e,n,r)=>VE(e,n,i=>{if(!at.isText(i))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(Sr.stringify(i)));return r(i)}),AF={transform(e,n){var r=!1;switch(n.type){case"insert_node":{var{path:i,node:o}=n;zd(e,oe.parent(i),De=>{var Re=i[i.length-1];if(Re>De.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(i,"] because the destination is past the end of the node."));return $S(De,Re,o)}),r=!0;break}case"insert_text":{var{path:s,offset:a,text:u}=n;if(u.length===0)break;VS(e,s,De=>{var Re=De.text.slice(0,a),Ie=De.text.slice(a);return Zn(Zn({},De),{},{text:Re+u+Ie})}),r=!0;break}case"merge_node":{var{path:f}=n,d=f[f.length-1],g=oe.previous(f),p=g[g.length-1];zd(e,oe.parent(f),De=>{var Re=De[d],Ie=De[p],ct;if(at.isText(Re)&&at.isText(Ie))ct=Zn(Zn({},Ie),{},{text:Ie.text+Re.text});else if(!at.isText(Re)&&!at.isText(Ie))ct=Zn(Zn({},Ie),{},{children:Ie.children.concat(Re.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(f,"] to nodes of different interfaces: ").concat(Sr.stringify(Re)," ").concat(Sr.stringify(Ie)));return Vp(De,p,2,ct)}),r=!0;break}case"move_node":{var{path:y,newPath:w}=n,E=y[y.length-1];if(oe.isAncestor(y,w))throw new Error("Cannot move a path [".concat(y,"] to new path [").concat(w,"] because the destination is inside itself."));var S=Je.get(e,y);zd(e,oe.parent(y),De=>WS(De,E,1));var D=oe.transform(y,n),A=D[D.length-1];zd(e,oe.parent(D),De=>$S(De,A,S)),r=!0;break}case"remove_node":{var{path:P}=n,b=P[P.length-1];if(zd(e,oe.parent(P),De=>WS(De,b,1)),e.selection){var R=Zn({},e.selection);for(var[L,V]of ke.points(R)){var Z=Cn.transform(L,n);if(R!=null&&Z!=null)R[V]=Z;else{var ne=void 0,le=void 0;for(var[de,Pe]of Je.texts(e))if(oe.compare(Pe,P)===-1)ne=[de,Pe];else{le=[de,Pe];break}var ue=!1;ne&&le&&(oe.equals(le[1],P)?ue=!oe.hasPrevious(le[1]):ue=oe.common(ne[1],P).length<oe.common(le[1],P).length),ne&&!ue?R[V]={path:ne[1],offset:ne[0].text.length}:le?R[V]={path:le[1],offset:0}:R=null}}e.selection=R}break}case"remove_text":{var{path:he,offset:ye,text:W}=n;if(W.length===0)break;VS(e,he,De=>{var Re=De.text.slice(0,ye),Ie=De.text.slice(ye+W.length);return Zn(Zn({},De),{},{text:Re+Ie})}),r=!0;break}case"set_node":{var{path:O,properties:N,newProperties:F}=n;if(O.length===0)throw new Error("Cannot set properties on the root node!");VE(e,O,De=>{var Re=Zn({},De);for(var Ie in F){if(Ie==="children"||Ie==="text")throw new Error('Cannot set the "'.concat(Ie,'" property of nodes!'));var ct=F[Ie];ct==null?delete Re[Ie]:Re[Ie]=ct}for(var Ne in N)F.hasOwnProperty(Ne)||delete Re[Ne];return Re});break}case"set_selection":{var{newProperties:j}=n;if(j==null){e.selection=null;break}if(e.selection==null){if(!ke.isRange(j))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Sr.stringify(j)," when there is no current selection."));e.selection=Zn({},j);break}var U=Zn({},e.selection);for(var I in j){var Q=j[I];if(Q==null){if(I==="anchor"||I==="focus")throw new Error('Cannot remove the "'.concat(I,'" selection property'));delete U[I]}else U[I]=Q}e.selection=U;break}case"split_node":{var{path:ee,position:se,properties:Ee}=n,ve=ee[ee.length-1];if(ee.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ee,"] because the root node cannot be split."));zd(e,oe.parent(ee),De=>{var Re=De[ve],Ie,ct;if(at.isText(Re)){var Ne=Re.text.slice(0,se),yt=Re.text.slice(se);Ie=Zn(Zn({},Re),{},{text:Ne}),ct=Zn(Zn({},Ee),{},{text:yt})}else{var lt=Re.children.slice(0,se),Qe=Re.children.slice(se);Ie=Zn(Zn({},Re),{},{children:lt}),ct=Zn(Zn({},Ee),{},{children:Qe})}return Vp(De,ve,1,Ie,ct)}),r=!0;break}}if(r&&e.selection){var be=Zn({},e.selection);for(var[Oe,ie]of ke.points(be))be[ie]=Cn.transform(Oe,n);e.selection=be}}},BF={insertNodes(e,n,r){e.insertNodes(n,r)},liftNodes(e,n){e.liftNodes(n)},mergeNodes(e,n){e.mergeNodes(n)},moveNodes(e,n){e.moveNodes(n)},removeNodes(e,n){e.removeNodes(n)},setNodes(e,n,r){e.setNodes(n,r)},splitNodes(e,n){e.splitNodes(n)},unsetNodes(e,n,r){e.unsetNodes(n,r)},unwrapNodes(e,n){e.unwrapNodes(n)},wrapNodes(e,n,r){e.wrapNodes(n,r)}},MF={collapse(e,n){e.collapse(n)},deselect(e){e.deselect()},move(e,n){e.move(n)},select(e,n){e.select(n)},setPoint(e,n,r){e.setPoint(n,r)},setSelection(e,n){e.setSelection(n)}},hi=e=>typeof e=="object"&&e!==null,O7=(e,n)=>{for(var r in e){var i=e[r],o=n[r];if(Array.isArray(i)&&Array.isArray(o)){if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!==o[s])return!1}else if(hi(i)&&hi(o)){if(!O7(i,o))return!1}else if(i!==o)return!1}for(var a in n)if(e[a]===void 0&&n[a]!==void 0)return!1;return!0};function RF(e,n){if(e==null)return{};var r={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(n.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Ql(e,n){if(e==null)return{};var r=RF(e,n),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var kF=["anchor","focus"];function US(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function bF(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?US(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var ke={edges(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=n,{anchor:i,focus:o}=e;return ke.isBackward(e)===r?[i,o]:[o,i]},end(e){var[,n]=ke.edges(e);return n},equals(e,n){return Cn.equals(e.anchor,n.anchor)&&Cn.equals(e.focus,n.focus)},surrounds(e,n){var r=ke.intersection(e,n);return r?ke.equals(r,n):!1},includes(e,n){if(ke.isRange(n)){if(ke.includes(e,n.anchor)||ke.includes(e,n.focus))return!0;var[r,i]=ke.edges(e),[o,s]=ke.edges(n);return Cn.isBefore(r,o)&&Cn.isAfter(i,s)}var[a,u]=ke.edges(e),f=!1,d=!1;return Cn.isPoint(n)?(f=Cn.compare(n,a)>=0,d=Cn.compare(n,u)<=0):(f=oe.compare(n,a.path)>=0,d=oe.compare(n,u.path)<=0),f&&d},intersection(e,n){var r=Ql(e,kF),[i,o]=ke.edges(e),[s,a]=ke.edges(n),u=Cn.isBefore(i,s)?s:i,f=Cn.isBefore(o,a)?o:a;return Cn.isBefore(f,u)?null:bF({anchor:u,focus:f},r)},isBackward(e){var{anchor:n,focus:r}=e;return Cn.isAfter(n,r)},isCollapsed(e){var{anchor:n,focus:r}=e;return Cn.equals(n,r)},isExpanded(e){return!ke.isCollapsed(e)},isForward(e){return!ke.isBackward(e)},isRange(e){return hi(e)&&Cn.isPoint(e.anchor)&&Cn.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[n]=ke.edges(e);return n},transform(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:i="inward"}=r,o,s;if(i==="inward"){var a=ke.isCollapsed(e);ke.isForward(e)?(o="forward",s=a?o:"backward"):(o="backward",s=a?o:"forward")}else i==="outward"?ke.isForward(e)?(o="backward",s="forward"):(o="forward",s="backward"):(o=i,s=i);var u=Cn.transform(e.anchor,n,{affinity:o}),f=Cn.transform(e.focus,n,{affinity:s});return!u||!f?null:{anchor:u,focus:f}}},XS=function(n){var{deep:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hi(n))return!1;var i=typeof n.apply=="function";if(i)return!1;var o=r?Je.isNodeList(n.children):Array.isArray(n.children);return o},dt={isAncestor(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return hi(e)&&Je.isNodeList(e.children,{deep:n})},isElement:XS,isElementList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(r=>dt.isElement(r,{deep:n}))},isElementProps(e){return e.children!==void 0},isElementType:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return XS(n)&&n[i]===r},matches(e,n){for(var r in n)if(r!=="children"&&e[r]!==n[r])return!1;return!0}},OF=["children"],IF=["text"],Je={ancestor(e,n){var r=Je.get(e,n);if(at.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(n,"] because it refers to a text node instead: ").concat(Sr.stringify(r)));return r},ancestors(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var i of oe.ancestors(n,r)){var o=Je.ancestor(e,i),s=[o,i];yield s}}()},child(e,n){if(at.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Sr.stringify(e)));var r=e.children[n];if(r==null)throw new Error("Cannot get child at index `".concat(n,"` in node: ").concat(Sr.stringify(e)));return r},children(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:i=!1}=r,o=Je.ancestor(e,n),{children:s}=o,a=i?s.length-1:0;i?a>=0:a<s.length;){var u=Je.child(o,a),f=n.concat(a);yield[u,f],a=i?a-1:a+1}}()},common(e,n,r){var i=oe.common(n,r),o=Je.get(e,i);return[o,i]},descendant(e,n){var r=Je.get(e,n);if(z.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(n,"] because it refers to the root editor node instead: ").concat(Sr.stringify(r)));return r},descendants(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,i]of Je.nodes(e,n))i.length!==0&&(yield[r,i])}()},elements(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,i]of Je.nodes(e,n))dt.isElement(r)&&(yield[r,i])}()},extractProps(e){if(dt.isAncestor(e)){var n=Ql(e,OF);return n}else{var n=Ql(e,IF);return n}},first(e,n){for(var r=n.slice(),i=Je.get(e,r);i&&!(at.isText(i)||i.children.length===0);)i=i.children[0],r.push(0);return[i,r]},fragment(e,n){if(at.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Sr.stringify(e)));var r=Wk({children:e.children},i=>{var[o,s]=ke.edges(n),a=Je.nodes(i,{reverse:!0,pass:y=>{var[,w]=y;return!ke.includes(n,w)}});for(var[,u]of a){if(!ke.includes(n,u)){var f=Je.parent(i,u),d=u[u.length-1];f.children.splice(d,1)}if(oe.equals(u,s.path)){var g=Je.leaf(i,u);g.text=g.text.slice(0,s.offset)}if(oe.equals(u,o.path)){var p=Je.leaf(i,u);p.text=p.text.slice(o.offset)}}z.isEditor(i)&&(i.selection=null)});return r.children},get(e,n){var r=Je.getIf(e,n);if(r===void 0)throw new Error("Cannot find a descendant at path [".concat(n,"] in node: ").concat(Sr.stringify(e)));return r},getIf(e,n){for(var r=e,i=0;i<n.length;i++){var o=n[i];if(at.isText(r)||!r.children[o])return;r=r.children[o]}return r},has(e,n){for(var r=e,i=0;i<n.length;i++){var o=n[i];if(at.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return at.isText(e)||dt.isElement(e,{deep:n})||z.isEditor(e,{deep:n})},isNodeList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(r=>Je.isNode(r,{deep:n}))},last(e,n){for(var r=n.slice(),i=Je.get(e,r);i&&!(at.isText(i)||i.children.length===0);){var o=i.children.length-1;i=i.children[o],r.push(o)}return[i,r]},leaf(e,n){var r=Je.get(e,n);if(!at.isText(r))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(Sr.stringify(r)));return r},levels(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var i of oe.levels(n,r)){var o=Je.get(e,i);yield[o,i]}}()},matches(e,n){return dt.isElement(e)&&dt.isElementProps(n)&&dt.matches(e,n)||at.isText(e)&&at.isTextProps(n)&&at.matches(e,n)},nodes(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:r,reverse:i=!1}=n,{from:o=[],to:s}=n,a=new Set,u=[],f=e;!(s&&(i?oe.isBefore(u,s):oe.isAfter(u,s)));){if(a.has(f)||(yield[f,u]),!a.has(f)&&!at.isText(f)&&f.children.length!==0&&(r==null||r([f,u])===!1)){a.add(f);var d=i?f.children.length-1:0;oe.isAncestor(u,o)&&(d=o[u.length]),u=u.concat(d),f=Je.get(e,u);continue}if(u.length===0)break;if(!i){var g=oe.next(u);if(Je.has(e,g)){u=g,f=Je.get(e,u);continue}}if(i&&u[u.length-1]!==0){var p=oe.previous(u);u=p,f=Je.get(e,u);continue}u=oe.parent(u),f=Je.get(e,u),a.add(f)}}()},parent(e,n){var r=oe.parent(n),i=Je.get(e,r);if(at.isText(i))throw new Error("Cannot get the parent of path [".concat(n,"] because it does not exist in the root."));return i},string(e){return at.isText(e)?e.text:e.children.map(Je.string).join("")},texts(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,i]of Je.nodes(e,n))at.isText(r)&&(yield[r,i])}()}};function KS(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function tr(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?KS(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KS(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var jl={isNodeOperation(e){return jl.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!hi(e))return!1;switch(e.type){case"insert_node":return oe.isPath(e.path)&&Je.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&oe.isPath(e.path);case"merge_node":return typeof e.position=="number"&&oe.isPath(e.path)&&hi(e.properties);case"move_node":return oe.isPath(e.path)&&oe.isPath(e.newPath);case"remove_node":return oe.isPath(e.path)&&Je.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&oe.isPath(e.path);case"set_node":return oe.isPath(e.path)&&hi(e.properties)&&hi(e.newProperties);case"set_selection":return e.properties===null&&ke.isRange(e.newProperties)||e.newProperties===null&&ke.isRange(e.properties)||hi(e.properties)&&hi(e.newProperties);case"split_node":return oe.isPath(e.path)&&typeof e.position=="number"&&hi(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(n=>jl.isOperation(n))},isSelectionOperation(e){return jl.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return jl.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return tr(tr({},e),{},{type:"remove_node"});case"insert_text":return tr(tr({},e),{},{type:"remove_text"});case"merge_node":return tr(tr({},e),{},{type:"split_node",path:oe.previous(e.path)});case"move_node":{var{newPath:n,path:r}=e;if(oe.equals(n,r))return e;if(oe.isSibling(r,n))return tr(tr({},e),{},{path:n,newPath:r});var i=oe.transform(r,e),o=oe.transform(oe.next(r),e);return tr(tr({},e),{},{path:i,newPath:o})}case"remove_node":return tr(tr({},e),{},{type:"insert_node"});case"remove_text":return tr(tr({},e),{},{type:"insert_text"});case"set_node":{var{properties:s,newProperties:a}=e;return tr(tr({},e),{},{properties:a,newProperties:s})}case"set_selection":{var{properties:u,newProperties:f}=e;return u==null?tr(tr({},e),{},{properties:f,newProperties:null}):f==null?tr(tr({},e),{},{properties:null,newProperties:u}):tr(tr({},e),{},{properties:f,newProperties:u})}case"split_node":return tr(tr({},e),{},{type:"merge_node",path:oe.next(e.path)})}}},FF=function(n){var{deep:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hi(n))return!1;var i=typeof n.addMark=="function"&&typeof n.apply=="function"&&typeof n.deleteFragment=="function"&&typeof n.insertBreak=="function"&&typeof n.insertSoftBreak=="function"&&typeof n.insertFragment=="function"&&typeof n.insertNode=="function"&&typeof n.insertText=="function"&&typeof n.isElementReadOnly=="function"&&typeof n.isInline=="function"&&typeof n.isSelectable=="function"&&typeof n.isVoid=="function"&&typeof n.normalizeNode=="function"&&typeof n.onChange=="function"&&typeof n.removeMark=="function"&&typeof n.getDirtyPaths=="function"&&(n.marks===null||hi(n.marks))&&(n.selection===null||ke.isRange(n.selection))&&(!r||Je.isNodeList(n.children))&&jl.isOperationList(n.operations);return i},z={above(e,n){return e.above(n)},addMark(e,n,r){e.addMark(n,r)},after(e,n,r){return e.after(n,r)},before(e,n,r){return e.before(n,r)},deleteBackward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=n;e.deleteBackward(r)},deleteForward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=n;e.deleteForward(r)},deleteFragment(e,n){e.deleteFragment(n)},edges(e,n){return e.edges(n)},elementReadOnly(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(n)},end(e,n){return e.end(n)},first(e,n){return e.first(n)},fragment(e,n){return e.fragment(n)},hasBlocks(e,n){return e.hasBlocks(n)},hasInlines(e,n){return e.hasInlines(n)},hasPath(e,n){return e.hasPath(n)},hasTexts(e,n){return e.hasTexts(n)},insertBreak(e){e.insertBreak()},insertFragment(e,n,r){e.insertFragment(n,r)},insertNode(e,n){e.insertNode(n)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,n){e.insertText(n)},isBlock(e,n){return e.isBlock(n)},isEdge(e,n,r){return e.isEdge(n,r)},isEditor(e){return FF(e)},isElementReadOnly(e,n){return e.isElementReadOnly(n)},isEmpty(e,n){return e.isEmpty(n)},isEnd(e,n,r){return e.isEnd(n,r)},isInline(e,n){return e.isInline(n)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,n){return e.isSelectable(n)},isStart(e,n,r){return e.isStart(n,r)},isVoid(e,n){return e.isVoid(n)},last(e,n){return e.last(n)},leaf(e,n,r){return e.leaf(n,r)},levels(e,n){return e.levels(n)},marks(e){return e.getMarks()},next(e,n){return e.next(n)},node(e,n,r){return e.node(n,r)},nodes(e,n){return e.nodes(n)},normalize(e,n){e.normalize(n)},parent(e,n,r){return e.parent(n,r)},path(e,n,r){return e.path(n,r)},pathRef(e,n,r){return e.pathRef(n,r)},pathRefs(e){return e.pathRefs()},point(e,n,r){return e.point(n,r)},pointRef(e,n,r){return e.pointRef(n,r)},pointRefs(e){return e.pointRefs()},positions(e,n){return e.positions(n)},previous(e,n){return e.previous(n)},range(e,n,r){return e.range(n,r)},rangeRef(e,n,r){return e.rangeRef(n,r)},rangeRefs(e){return e.rangeRefs()},removeMark(e,n){e.removeMark(n)},setNormalizing(e,n){e.setNormalizing(n)},start(e,n){return e.start(n)},string(e,n,r){return e.string(n,r)},unhangRange(e,n,r){return e.unhangRange(n,r)},void(e,n){return e.void(n)},withoutNormalizing(e,n){e.withoutNormalizing(n)},shouldMergeNodesRemovePrevNode:(e,n,r)=>e.shouldMergeNodesRemovePrevNode(n,r)},LF={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(oe.isPath)}};function qS(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function YS(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?qS(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Cn={compare(e,n){var r=oe.compare(e.path,n.path);return r===0?e.offset<n.offset?-1:e.offset>n.offset?1:0:r},isAfter(e,n){return Cn.compare(e,n)===1},isBefore(e,n){return Cn.compare(e,n)===-1},equals(e,n){return e.offset===n.offset&&oe.equals(e.path,n.path)},isPoint(e){return hi(e)&&typeof e.offset=="number"&&oe.isPath(e.path)},transform(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:i="forward"}=r,{path:o,offset:s}=e;switch(n.type){case"insert_node":case"move_node":{o=oe.transform(o,n,r);break}case"insert_text":{oe.equals(n.path,o)&&(n.offset<s||n.offset===s&&i==="forward")&&(s+=n.text.length);break}case"merge_node":{oe.equals(n.path,o)&&(s+=n.position),o=oe.transform(o,n,r);break}case"remove_text":{oe.equals(n.path,o)&&n.offset<=s&&(s-=Math.min(s-n.offset,n.text.length));break}case"remove_node":{if(oe.equals(n.path,o)||oe.isAncestor(n.path,o))return null;o=oe.transform(o,n,r);break}case"split_node":{if(oe.equals(n.path,o)){if(n.position===s&&i==null)return null;(n.position<s||n.position===s&&i==="forward")&&(s-=n.position,o=oe.transform(o,n,YS(YS({},r),{},{affinity:"forward"})))}else o=oe.transform(o,n,r);break}default:return e}return{path:o,offset:s}}},ZS=void 0,Sr={setScrubber(e){ZS=e},stringify(e){return JSON.stringify(e,ZS)}},_F=["text"],NF=["anchor","focus","merge"];function QS(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Nl(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?QS(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QS(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var at={equals(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:i=!1}=r;function o(s){var a=Ql(s,_F);return a}return O7(i?o(e):e,i?o(n):n)},isText(e){return hi(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(n=>at.isText(n))},isTextProps(e){return e.text!==void 0},matches(e,n){for(var r in n)if(r!=="text"&&(!e.hasOwnProperty(r)||e[r]!==n[r]))return!1;return!0},decorations(e,n){var r=[{leaf:Nl({},e)}];for(var i of n){var{anchor:o,focus:s,merge:a}=i,u=Ql(i,NF),[f,d]=ke.edges(i),g=[],p=0,y=f.offset,w=d.offset,E=a??Object.assign;for(var{leaf:S}of r){var{length:D}=S.text,A=p;if(p+=D,y<=A&&p<=w){E(S,u),g.push({leaf:S});continue}if(y!==w&&(y===p||w===A)||y>p||w<A||w===A&&A!==0){g.push({leaf:S});continue}var P=S,b=void 0,R=void 0;if(w<p){var L=w-A;R={leaf:Nl(Nl({},P),{},{text:P.text.slice(L)})},P=Nl(Nl({},P),{},{text:P.text.slice(0,L)})}if(y>A){var V=y-A;b={leaf:Nl(Nl({},P),{},{text:P.text.slice(0,V)})},P=Nl(Nl({},P),{},{text:P.text.slice(V)})}E(P,u),b&&g.push(b),g.push({leaf:P}),R&&g.push(R)}r=g}if(r.length>1){var Z=0;for(var[ne,le]of r.entries()){var de=Z,Pe=de+le.leaf.text.length,ue={start:de,end:Pe};ne===0&&(ue.isFirst=!0),ne===r.length-1&&(ue.isLast=!0),le.position=ue,Z=Pe}}return r}},UE=e=>e.selection?e.selection:e.children.length>0?z.end(e,[]):[0],Ig=(e,n)=>{var[r]=z.node(e,n);return i=>i===r},XE=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=!r,o=r?WF(n):n,s=Vt.None,a=Vt.None,u=0,f=null,d=null;for(var g of o){var p=g.codePointAt(0);if(!p)break;var y=nL(g,p);if([s,a]=i?[a,y]:[y,s],Qd(s,Vt.ZWJ)&&Qd(a,Vt.ExtPict)&&(i?f=JS(n.substring(0,u)):f=JS(n.substring(0,n.length-u)),!f)||Qd(s,Vt.RI)&&Qd(a,Vt.RI)&&(d!==null?d=!d:i?d=!0:d=aL(n.substring(0,n.length-u)),!d)||s!==Vt.None&&a!==Vt.None&&iL(s,a))break;u+=g.length}return u||1},HF=/\s/,GF=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,jF=/['\u2018\u2019]/,zF=function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0,o=!1;n.length>0;){var s=XE(n,r),[a,u]=KE(n,s,r);if($F(a,u,r))o=!0,i+=s;else if(!o)i+=s;else break;n=u}return i},KE=(e,n,r)=>{if(r){var i=e.length-n;return[e.slice(i,e.length),e.slice(0,i)]}return[e.slice(0,n),e.slice(n)]},$F=function e(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(HF.test(n))return!1;if(jF.test(n)){var o=XE(r,i),[s,a]=KE(r,o,i);if(e(s,a,i))return!0}return!GF.test(n)},WF=function*(n){for(var r=n.length-1,i=0;i<n.length;i++){var o=n.charAt(r-i);if(UF(o.charCodeAt(0))){var s=n.charAt(r-i-1);if(VF(s.charCodeAt(0))){yield s+o,i++;continue}}yield o}},VF=e=>e>=55296&&e<=56319,UF=e=>e>=56320&&e<=57343,Vt;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(Vt||(Vt={}));var XF=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,KF=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,qF=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,YF=/^[\u1100-\u115F\uA960-\uA97C]$/,ZF=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,QF=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,JF=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,eL=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,tL=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,nL=(e,n)=>{var r=Vt.Any;return e.search(XF)!==-1&&(r|=Vt.Extend),n===8205&&(r|=Vt.ZWJ),n>=127462&&n<=127487&&(r|=Vt.RI),e.search(KF)!==-1&&(r|=Vt.Prepend),e.search(qF)!==-1&&(r|=Vt.SpacingMark),e.search(YF)!==-1&&(r|=Vt.L),e.search(ZF)!==-1&&(r|=Vt.V),e.search(QF)!==-1&&(r|=Vt.T),e.search(JF)!==-1&&(r|=Vt.LV),e.search(eL)!==-1&&(r|=Vt.LVT),e.search(tL)!==-1&&(r|=Vt.ExtPict),r};function Qd(e,n){return(e&n)!==0}var rL=[[Vt.L,Vt.L|Vt.V|Vt.LV|Vt.LVT],[Vt.LV|Vt.V,Vt.V|Vt.T],[Vt.LVT|Vt.T,Vt.T],[Vt.Any,Vt.Extend|Vt.ZWJ],[Vt.Any,Vt.SpacingMark],[Vt.Prepend,Vt.Any],[Vt.ZWJ,Vt.ExtPict],[Vt.RI,Vt.RI]];function iL(e,n){return rL.findIndex(r=>Qd(e,r[0])&&Qd(n,r[1]))===-1}var oL=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,JS=e=>e.search(oL)!==-1,sL=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,aL=e=>{var n=e.match(sL);if(n===null)return!1;var r=n[0].length/2;return r%2===1},lL={delete(e,n){e.delete(n)},insertFragment(e,n,r){e.insertFragment(n,r)},insertText(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};z.withoutNormalizing(e,()=>{var{voids:i=!1}=r,{at:o=UE(e)}=r;if(oe.isPath(o)&&(o=z.range(e,o)),ke.isRange(o))if(ke.isCollapsed(o))o=o.anchor;else{var s=ke.end(o);if(!i&&z.void(e,{at:s}))return;var a=ke.start(o),u=z.pointRef(e,a),f=z.pointRef(e,s);He.delete(e,{at:o,voids:i});var d=u.unref(),g=f.unref();o=d||g,He.setSelection(e,{anchor:o,focus:o})}if(!(!i&&z.void(e,{at:o})||z.elementReadOnly(e,{at:o}))){var{path:p,offset:y}=o;n.length>0&&e.apply({type:"insert_text",path:p,offset:y,text:n})}})}};function eT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function hv(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?eT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var He=hv(hv(hv(hv({},AF),BF),MF),lL),jv=new WeakMap,uL=e=>jv.get(e)||!1,cL=(e,n,r)=>{var i=jv.get(e)||!1;jv.set(e,!0);try{n(),r()}finally{jv.set(e,i)}};function I7(e,n,r){var i=dy.get(e)||[],o=gy.get(e)||new Set,s,a,u=p=>{if(p){var y=p.join(",");a.has(y)||(a.add(y),s.push(p))}};if(r){s=[],a=new Set;for(var f of i){var d=r(f);u(d)}}else s=i,a=o;for(var g of n)u(g);dy.set(e,s),gy.set(e,a)}var fL=(e,n)=>{for(var r of z.pathRefs(e))EF.transform(r,n);for(var i of z.pointRefs(e))PF.transform(i,n);for(var o of z.rangeRefs(e))SF.transform(o,n);if(!uL(e)){var s=oe.operationCanTransformPath(n)?a=>oe.transform(a,n):void 0;I7(e,e.getDirtyPaths(n),s)}He.transform(e,n),e.operations.push(n),z.normalize(e,{operation:n}),n.type==="set_selection"&&(e.marks=null),Ap.get(e)||(Ap.set(e,!0),Promise.resolve().then(()=>{Ap.set(e,!1),e.onChange({operation:n}),e.operations=[]}))},hL=(e,n)=>{switch(n.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=n;return oe.levels(r)}case"insert_node":{var{node:i,path:o}=n,s=oe.levels(o),a=at.isText(i)?[]:Array.from(Je.nodes(i),de=>{var[,Pe]=de;return o.concat(Pe)});return[...s,...a]}case"merge_node":{var{path:u}=n,f=oe.ancestors(u),d=oe.previous(u);return[...f,d]}case"move_node":{var{path:g,newPath:p}=n;if(oe.equals(g,p))return[];var y=[],w=[];for(var E of oe.ancestors(g)){var S=oe.transform(E,n);y.push(S)}for(var D of oe.ancestors(p)){var A=oe.transform(D,n);w.push(A)}var P=w[w.length-1],b=p[p.length-1],R=P.concat(b);return[...y,...w,R]}case"remove_node":{var{path:L}=n,V=oe.ancestors(L);return[...V]}case"split_node":{var{path:Z}=n,ne=oe.levels(Z),le=oe.next(Z);return[...ne,le]}default:return[]}},dL=e=>{var{selection:n}=e;return n?Je.fragment(e,n):[]},gL=(e,n,r)=>{var[i,o]=n;if(!at.isText(i)){if(dt.isElement(i)&&i.children.length===0){var s={text:""};He.insertNodes(e,s,{at:o.concat(0),voids:!0});return}for(var a=z.isEditor(i)?!1:dt.isElement(i)&&(e.isInline(i)||i.children.length===0||at.isText(i.children[0])||e.isInline(i.children[0])),u=0,f=0;f<i.children.length;f++,u++){var d=Je.get(e,o);if(!at.isText(d)){var g=d.children[u],p=d.children[u-1],y=f===i.children.length-1,w=at.isText(g)||dt.isElement(g)&&e.isInline(g);if(w!==a)w?r!=null&&r.fallbackElement?He.wrapNodes(e,r.fallbackElement(),{at:o.concat(u),voids:!0}):He.removeNodes(e,{at:o.concat(u),voids:!0}):He.unwrapNodes(e,{at:o.concat(u),voids:!0}),u--;else if(dt.isElement(g)){if(e.isInline(g)){if(p==null||!at.isText(p)){var E={text:""};He.insertNodes(e,E,{at:o.concat(u),voids:!0}),u++}else if(y){var S={text:""};He.insertNodes(e,S,{at:o.concat(u+1),voids:!0}),u++}}}else{if(!at.isText(g)&&!("children"in g)){var D=g;D.children=[]}p!=null&&at.isText(p)&&(at.equals(g,p,{loose:!0})?(He.mergeNodes(e,{at:o.concat(u),voids:!0}),u--):p.text===""?(He.removeNodes(e,{at:o.concat(u-1),voids:!0}),u--):g.text===""&&(He.removeNodes(e,{at:o.concat(u),voids:!0}),u--))}}}}},pL=(e,n)=>{var{iteration:r,initialDirtyPathsLength:i}=n,o=i*42;if(r>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},mL=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:i=!1,mode:o="lowest",at:s=n.selection,match:a}=r;if(s){var u=z.path(n,s);if(!ke.isRange(s)||oe.equals(s.focus.path,s.anchor.path)){if(u.length===0)return;u=oe.parent(u)}var f=o==="lowest",[d]=z.levels(n,{at:u,voids:i,match:a,reverse:f});return d}};function tT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function nT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?tT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var vL=(e,n,r)=>{var{selection:i}=e;if(i){var o=(p,y)=>{if(!at.isText(p))return!1;var[w,E]=z.parent(e,y);return!e.isVoid(w)||e.markableVoid(w)},s=ke.isExpanded(i),a=!1;if(!s){var[u,f]=z.node(e,i);if(u&&o(u,f)){var[d]=z.parent(e,f);a=d&&e.markableVoid(d)}}if(s||a)He.setNodes(e,{[n]:r},{match:o,split:!0,voids:!0});else{var g=nT(nT({},z.marks(e)||{}),{},{[n]:r});e.marks=g,Ap.get(e)||e.onChange()}}};function rT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function iT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?rT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var yL=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=z.point(n,r,{edge:"end"}),s=z.end(n,[]),a={anchor:o,focus:s},{distance:u=1}=i,f=0,d;for(var g of z.positions(n,iT(iT({},i),{},{at:a}))){if(f>u)break;f!==0&&(d=g),f++}return d};function oT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function sT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?oT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var wL=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=z.start(n,[]),s=z.point(n,r,{edge:"start"}),a={anchor:o,focus:s},{distance:u=1}=i,f=0,d;for(var g of z.positions(n,sT(sT({},i),{},{at:a,reverse:!0}))){if(f>u)break;f!==0&&(d=g),f++}return d},xL=(e,n)=>{var{selection:r}=e;r&&ke.isCollapsed(r)&&He.delete(e,{unit:n,reverse:!0})},CL=(e,n)=>{var{selection:r}=e;r&&ke.isCollapsed(r)&&He.delete(e,{unit:n})},EL=function(n){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:i}=n;i&&ke.isExpanded(i)&&He.delete(n,{reverse:r==="backward"})},PL=(e,n)=>[z.start(e,n),z.end(e,n)];function aT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function lT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?aT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var SL=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return z.above(n,lT(lT({},r),{},{match:i=>dt.isElement(i)&&z.isElementReadOnly(n,i)}))},TL=(e,n)=>z.point(e,n,{edge:"end"}),DL=(e,n)=>{var r=z.path(e,n,{edge:"start"});return z.node(e,r)},AL=(e,n)=>{var r=z.range(e,n);return Je.fragment(e,r)};function uT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function cT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?uT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var BL=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return z.above(n,cT(cT({},r),{},{match:i=>dt.isElement(i)&&z.isVoid(n,i)}))},ML=(e,n)=>n.children.some(r=>dt.isElement(r)&&z.isBlock(e,r)),RL=(e,n)=>n.children.some(r=>at.isText(r)||z.isInline(e,r)),kL=(e,n)=>Je.has(e,n),bL=(e,n)=>n.children.every(r=>at.isText(r)),OL=e=>{He.splitNodes(e,{always:!0})},IL=(e,n,r)=>{He.insertNodes(e,n,r)},FL=e=>{He.splitNodes(e,{always:!0})};function fT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function LL(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?fT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var _L=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:s}=n;if(o){if(s){var a=LL({text:r},s);He.insertNodes(n,a,{at:i.at,voids:i.voids})}else He.insertText(n,r,i);n.marks=null}},NL=(e,n)=>!e.isInline(n),HL=(e,n,r)=>z.isStart(e,n,r)||z.isEnd(e,n,r),GL=(e,n)=>{var{children:r}=n,[i]=r;return r.length===0||r.length===1&&at.isText(i)&&i.text===""&&!e.isVoid(n)},jL=(e,n,r)=>{var i=z.end(e,r);return Cn.equals(n,i)},zL=e=>{var n=b7.get(e);return n===void 0?!0:n},$L=(e,n,r)=>{if(n.offset!==0)return!1;var i=z.start(e,r);return Cn.equals(n,i)},WL=(e,n)=>{var r=z.path(e,n,{edge:"end"});return z.node(e,r)},VL=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=z.path(n,r,i),s=Je.leaf(n,o);return[s,o]};function UL(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=e.selection,reverse:i=!1,voids:o=!1}=n,{match:s}=n;if(s==null&&(s=()=>!0),!!r){var a=[],u=z.path(e,r);for(var[f,d]of Je.levels(e,u))if(s(f,d)&&(a.push([f,d]),!o&&dt.isElement(f)&&z.isVoid(e,f)))break;i&&a.reverse(),yield*a}}()}var XL=["text"],KL=["text"],qL=function(n){var{marks:r,selection:i}=n;if(!i)return null;var{anchor:o,focus:s}=i;if(r)return r;if(ke.isExpanded(i)){var a=ke.isBackward(i);a&&([s,o]=[o,s]);var u=z.isEnd(n,o,o.path);if(u){var f=z.after(n,o);f&&(o=f)}var[d]=z.nodes(n,{match:at.isText,at:{anchor:o,focus:s}});if(d){var[g]=d,p=Ql(g,XL);return p}else return{}}var{path:y}=o,[w]=z.leaf(n,y);if(o.offset===0){var E=z.previous(n,{at:y,match:at.isText}),S=z.above(n,{match:L=>dt.isElement(L)&&z.isVoid(n,L)&&n.markableVoid(L)});if(!S){var D=z.above(n,{match:L=>dt.isElement(L)&&z.isBlock(n,L)});if(E&&D){var[A,P]=E,[,b]=D;oe.isAncestor(b,P)&&(w=A)}}}var R=Ql(w,KL);return R},YL=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:i="lowest",voids:o=!1}=r,{match:s,at:a=n.selection}=r;if(a){var u=z.after(n,a,{voids:o});if(u){var[,f]=z.last(n,[]),d=[u.path,f];if(oe.isPath(a)&&a.length===0)throw new Error("Cannot get the next node from the root node!");if(s==null)if(oe.isPath(a)){var[g]=z.parent(n,a);s=y=>g.children.includes(y)}else s=()=>!0;var[p]=z.nodes(n,{at:d,match:s,mode:i,voids:o});return p}}},ZL=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=z.path(n,r,i),s=Je.get(n,o);return[s,o]};function QL(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=e.selection,mode:i="all",universal:o=!1,reverse:s=!1,voids:a=!1,pass:u,ignoreNonSelectable:f=!1}=n,{match:d}=n;if(d||(d=()=>!0),!!r){var g,p;if(LF.isSpan(r))g=r[0],p=r[1];else{var y=z.path(e,r,{edge:"start"}),w=z.path(e,r,{edge:"end"});g=s?w:y,p=s?y:w}var E=Je.nodes(e,{reverse:s,from:g,to:p,pass:L=>{var[V,Z]=L;return u&&u([V,Z])?!0:dt.isElement(V)?!!(!a&&(z.isVoid(e,V)||z.isElementReadOnly(e,V))||f&&!z.isSelectable(e,V)):!1}}),S=[],D;for(var[A,P]of E)if(!(f&&dt.isElement(A)&&!z.isSelectable(e,A))){var b=D&&oe.compare(P,D[1])===0;if(!(i==="highest"&&b)){if(!d(A,P)){if(o&&!b&&at.isText(A))return;continue}if(i==="lowest"&&b){D=[A,P];continue}var R=i==="lowest"?D:[A,P];R&&(o?S.push(R):yield R),D=[A,P]}}i==="lowest"&&D&&(o?S.push(D):yield D),o&&(yield*S)}}()}var JL=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:i=!1,operation:o}=r,s=g=>dy.get(g)||[],a=g=>gy.get(g)||new Set,u=g=>{var p=s(g).pop(),y=p.join(",");return a(g).delete(y),p};if(z.isNormalizing(n)){if(i){var f=Array.from(Je.nodes(n),g=>{var[,p]=g;return p}),d=new Set(f.map(g=>g.join(",")));dy.set(n,f),gy.set(n,d)}s(n).length!==0&&z.withoutNormalizing(n,()=>{for(var g of s(n))if(Je.has(n,g)){var p=z.node(n,g),[y,w]=p;dt.isElement(y)&&y.children.length===0&&n.normalizeNode(p,{operation:o})}for(var E=s(n),S=E.length,D=0;E.length!==0;){if(!n.shouldNormalize({dirtyPaths:E,iteration:D,initialDirtyPathsLength:S,operation:o}))return;var A=u(n);if(Je.has(n,A)){var P=z.node(n,A);n.normalizeNode(P,{operation:o})}D++,E=s(n)}})}},e_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=z.path(n,r,i),s=oe.parent(o),a=z.node(n,s);return a},t_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=i,s={current:r,affinity:o,unref(){var{current:u}=s,f=z.pathRefs(n);return f.delete(s),s.current=null,u}},a=z.pathRefs(n);return a.add(s),s},n_=e=>{var n=HS.get(e);return n||(n=new Set,HS.set(e,n)),n},r_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:s}=i;if(oe.isPath(r)){if(s==="start"){var[,a]=Je.first(n,r);r=a}else if(s==="end"){var[,u]=Je.last(n,r);r=u}}return ke.isRange(r)&&(s==="start"?r=ke.start(r):s==="end"?r=ke.end(r):r=oe.common(r.anchor.path,r.focus.path)),Cn.isPoint(r)&&(r=r.path),o!=null&&(r=r.slice(0,o)),r},i_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=i,s={current:r,affinity:o,unref(){var{current:u}=s,f=z.pointRefs(n);return f.delete(s),s.current=null,u}},a=z.pointRefs(n);return a.add(s),s},o_=e=>{var n=GS.get(e);return n||(n=new Set,GS.set(e,n)),n},s_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=i;if(oe.isPath(r)){var s;if(o==="end"){var[,a]=Je.last(n,r);s=a}else{var[,u]=Je.first(n,r);s=u}var f=Je.get(n,s);if(!at.isText(f))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(r,"] because it has no ").concat(o," text node."));return{path:s,offset:o==="end"?f.text.length:0}}if(ke.isRange(r)){var[d,g]=ke.edges(r);return o==="start"?d:g}return r};function a_(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=e.selection,unit:i="offset",reverse:o=!1,voids:s=!1,ignoreNonSelectable:a=!1}=n;if(!r)return;var u=z.range(e,r),[f,d]=ke.edges(u),g=o?d:f,p=!1,y="",w=0,E=0,S=0;for(var[D,A]of z.nodes(e,{at:r,reverse:o,voids:s,ignoreNonSelectable:a})){if(dt.isElement(D)){if(!s&&(e.isVoid(D)||e.isElementReadOnly(D))){yield z.start(e,A);continue}if(e.isInline(D))continue;if(z.hasInlines(e,D)){var P=oe.isAncestor(A,d.path)?d:z.end(e,A),b=oe.isAncestor(A,f.path)?f:z.start(e,A);y=z.string(e,{anchor:b,focus:P},{voids:s}),p=!0}}if(at.isText(D)){var R=oe.equals(A,g.path);for(R?(E=o?g.offset:D.text.length-g.offset,S=g.offset):(E=D.text.length,S=o?E:0),(R||p||i==="offset")&&(yield{path:A,offset:S},p=!1);;){if(w===0){if(y==="")break;w=L(y,i,o),y=KE(y,w,o)[1]}if(S=o?S-w:S+w,E=E-w,E<0){w=-E;break}w=0,yield{path:A,offset:S}}}}function L(V,Z,ne){return Z==="character"?XE(V,ne):Z==="word"?zF(V,ne):Z==="line"||Z==="block"?V.length:1}}()}var l_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:i="lowest",voids:o=!1}=r,{match:s,at:a=n.selection}=r;if(a){var u=z.before(n,a,{voids:o});if(u){var[,f]=z.first(n,[]),d=[u.path,f];if(oe.isPath(a)&&a.length===0)throw new Error("Cannot get the previous node from the root node!");if(s==null)if(oe.isPath(a)){var[g]=z.parent(n,a);s=y=>g.children.includes(y)}else s=()=>!0;var[p]=z.nodes(n,{reverse:!0,at:d,match:s,mode:i,voids:o});return p}}},u_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=i,s={current:r,affinity:o,unref(){var{current:u}=s,f=z.rangeRefs(n);return f.delete(s),s.current=null,u}},a=z.rangeRefs(n);return a.add(s),s},c_=e=>{var n=jS.get(e);return n||(n=new Set,jS.set(e,n)),n},f_=(e,n,r)=>{if(ke.isRange(n)&&!r)return n;var i=z.start(e,n),o=z.end(e,r||n);return{anchor:i,focus:o}};function hT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function h_(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?hT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var d_=(e,n)=>{var{selection:r}=e;if(r){var i=(g,p)=>{if(!at.isText(g))return!1;var[y,w]=z.parent(e,p);return!e.isVoid(y)||e.markableVoid(y)},o=ke.isExpanded(r),s=!1;if(!o){var[a,u]=z.node(e,r);if(a&&i(a,u)){var[f]=z.parent(e,u);s=f&&e.markableVoid(f)}}if(o||s)He.unsetNodes(e,n,{match:i,split:!0,voids:!0});else{var d=h_({},z.marks(e)||{});delete d[n],e.marks=d,Ap.get(e)||e.onChange()}}},g_=(e,n)=>{b7.set(e,n)},p_=(e,n)=>z.point(e,n,{edge:"start"}),m_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=i,s=z.range(n,r),[a,u]=ke.edges(s),f="";for(var[d,g]of z.nodes(n,{at:s,match:at.isText,voids:o})){var p=d.text;oe.equals(g,u.path)&&(p=p.slice(0,u.offset)),oe.equals(g,a.path)&&(p=p.slice(a.offset)),f+=p}return f},v_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=i,[s,a]=ke.edges(r);if(s.offset!==0||a.offset!==0||ke.isCollapsed(r)||oe.hasPrevious(a.path))return r;var u=z.above(n,{at:a,match:E=>dt.isElement(E)&&z.isBlock(n,E),voids:o}),f=u?u[1]:[],d=z.start(n,s),g={anchor:d,focus:a},p=!0;for(var[y,w]of z.nodes(n,{at:g,match:at.isText,reverse:!0,voids:o})){if(p){p=!1;continue}if(y.text!==""||oe.isBefore(w,f)){a={path:w,offset:y.text.length};break}}return{anchor:s,focus:a}},y_=(e,n)=>{var r=z.isNormalizing(e);z.setNormalizing(e,!1);try{n()}finally{z.setNormalizing(e,r)}z.normalize(e)},w_=(e,n,r)=>{var[i,o]=n;return dt.isElement(i)&&z.isEmpty(e,i)||at.isText(i)&&i.text===""&&o[o.length-1]!==0},x_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.withoutNormalizing(n,()=>{var i,o,{reverse:s=!1,unit:a="character",distance:u=1,voids:f=!1}=r,{at:d=n.selection,hanging:g=!1}=r;if(d){var p=!1;if(ke.isRange(d)&&ke.isCollapsed(d)&&(p=!0,d=d.anchor),Cn.isPoint(d)){var y=z.void(n,{at:d,mode:"highest"});if(!f&&y){var[,w]=y;d=w}else{var E={unit:a,distance:u},S=s?z.before(n,d,E)||z.start(n,[]):z.after(n,d,E)||z.end(n,[]);d={anchor:d,focus:S},g=!0}}if(oe.isPath(d)){He.removeNodes(n,{at:d,voids:f});return}if(!ke.isCollapsed(d)){if(!g){var[,D]=ke.edges(d),A=z.end(n,[]);Cn.equals(D,A)||(d=z.unhangRange(n,d,{voids:f}))}var[P,b]=ke.edges(d),R=z.above(n,{match:Ne=>dt.isElement(Ne)&&z.isBlock(n,Ne),at:P,voids:f}),L=z.above(n,{match:Ne=>dt.isElement(Ne)&&z.isBlock(n,Ne),at:b,voids:f}),V=R&&L&&!oe.equals(R[1],L[1]),Z=oe.equals(P.path,b.path),ne=f?null:(i=z.void(n,{at:P,mode:"highest"}))!==null&&i!==void 0?i:z.elementReadOnly(n,{at:P,mode:"highest"}),le=f?null:(o=z.void(n,{at:b,mode:"highest"}))!==null&&o!==void 0?o:z.elementReadOnly(n,{at:b,mode:"highest"});if(ne){var de=z.before(n,P);de&&R&&oe.isAncestor(R[1],de.path)&&(P=de)}if(le){var Pe=z.after(n,b);Pe&&L&&oe.isAncestor(L[1],Pe.path)&&(b=Pe)}var ue=[],he;for(var ye of z.nodes(n,{at:d,voids:f})){var[W,O]=ye;he&&oe.compare(O,he)===0||(!f&&dt.isElement(W)&&(z.isVoid(n,W)||z.isElementReadOnly(n,W))||!oe.isCommon(O,P.path)&&!oe.isCommon(O,b.path))&&(ue.push(ye),he=O)}var N=Array.from(ue,Ne=>{var[,yt]=Ne;return z.pathRef(n,yt)}),F=z.pointRef(n,P),j=z.pointRef(n,b),U="";if(!Z&&!ne){var I=F.current,[Q]=z.leaf(n,I),{path:ee}=I,{offset:se}=P,Ee=Q.text.slice(se);Ee.length>0&&(n.apply({type:"remove_text",path:ee,offset:se,text:Ee}),U=Ee)}if(N.reverse().map(Ne=>Ne.unref()).filter(Ne=>Ne!==null).forEach(Ne=>He.removeNodes(n,{at:Ne,voids:f})),!le){var ve=j.current,[be]=z.leaf(n,ve),{path:Oe}=ve,ie=Z?P.offset:0,De=be.text.slice(ie,b.offset);De.length>0&&(n.apply({type:"remove_text",path:Oe,offset:ie,text:De}),U=De)}!Z&&V&&j.current&&F.current&&He.mergeNodes(n,{at:j.current,hanging:!0,voids:f}),p&&s&&a==="character"&&U.length>1&&U.match(/[\u0980-\u09FF\u0E00-\u0E7F]+/)&&He.insertText(n,U.slice(0,U.length-u));var Re=F.unref(),Ie=j.unref(),ct=s?Re||Ie:Ie||Re;r.at==null&&ct&&He.select(n,ct)}}})},C_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};z.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:s=!1}=i,{at:a=UE(n),batchDirty:u=!0}=i;if(r.length){if(ke.isRange(a))if(o||(a=z.unhangRange(n,a,{voids:s})),ke.isCollapsed(a))a=a.anchor;else{var[,f]=ke.edges(a);if(!s&&z.void(n,{at:f}))return;var d=z.pointRef(n,f);He.delete(n,{at:a}),a=d.unref()}else oe.isPath(a)&&(a=z.start(n,a));if(!(!s&&z.void(n,{at:a}))){var g=z.above(n,{at:a,match:ee=>dt.isElement(ee)&&z.isInline(n,ee),mode:"highest",voids:s});if(g){var[,p]=g;if(z.isEnd(n,a,p)){var y=z.after(n,p);a=y}else if(z.isStart(n,a,p)){var w=z.before(n,p);a=w}}var E=z.above(n,{match:ee=>dt.isElement(ee)&&z.isBlock(n,ee),at:a,voids:s}),[,S]=E,D=z.isStart(n,a,S),A=z.isEnd(n,a,S),P=D&&A,[,b]=Je.first({children:r},[]),[,R]=Je.last({children:r},[]),L=ee=>{var[se,Ee]=ee,ve=Ee.length===0;return ve?!1:P?!0:!(!D&&oe.isAncestor(Ee,b)&&dt.isElement(se)&&!n.isVoid(se)&&!n.isInline(se)||!A&&oe.isAncestor(Ee,R)&&dt.isElement(se)&&!n.isVoid(se)&&!n.isInline(se))},V=!0,Z=[],ne=[],le=[];for(var de of Je.nodes({children:r},{pass:L})){var[Pe,ue]=de;V&&dt.isElement(Pe)&&!n.isInline(Pe)&&!oe.isAncestor(ue,b)&&(V=!1),L(de)&&(dt.isElement(Pe)&&!n.isInline(Pe)?(V=!1,ne.push(Pe)):V?Z.push(Pe):le.push(Pe))}var[he]=z.nodes(n,{at:a,match:ee=>at.isText(ee)||z.isInline(n,ee),mode:"highest",voids:s}),[,ye]=he,W=z.isStart(n,a,ye),O=z.isEnd(n,a,ye),N=z.pathRef(n,A&&!le.length?oe.next(S):S),F=z.pathRef(n,O?oe.next(ye):ye),j=le.length>0;He.splitNodes(n,{at:a,match:ee=>j?dt.isElement(ee)&&z.isBlock(n,ee):at.isText(ee)||z.isInline(n,ee),mode:j?"lowest":"highest",always:j&&(!D||Z.length>0)&&(!A||le.length>0),voids:s});var U=z.pathRef(n,!W||W&&O?oe.next(ye):ye);if(He.insertNodes(n,Z,{at:U.current,match:ee=>at.isText(ee)||z.isInline(n,ee),mode:"highest",voids:s,batchDirty:u}),P&&!Z.length&&ne.length&&!le.length&&He.delete(n,{at:S,voids:s}),He.insertNodes(n,ne,{at:N.current,match:ee=>dt.isElement(ee)&&z.isBlock(n,ee),mode:"lowest",voids:s,batchDirty:u}),He.insertNodes(n,le,{at:F.current,match:ee=>at.isText(ee)||z.isInline(n,ee),mode:"highest",voids:s,batchDirty:u}),!i.at){var I;if(le.length>0&&F.current?I=oe.previous(F.current):ne.length>0&&N.current?I=oe.previous(N.current):U.current&&(I=oe.previous(U.current)),I){var Q=z.end(n,I);He.select(n,Q)}}U.unref(),N.unref(),F.unref()}}})},E_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:i="anchor"}=r,{selection:o}=n;if(o){if(i==="anchor")He.select(n,o.anchor);else if(i==="focus")He.select(n,o.focus);else if(i==="start"){var[s]=ke.edges(o);He.select(n,s)}else if(i==="end"){var[,a]=ke.edges(o);He.select(n,a)}}else return},P_=e=>{var{selection:n}=e;n&&e.apply({type:"set_selection",properties:n,newProperties:null})},S_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:i}=n,{distance:o=1,unit:s="character",reverse:a=!1}=r,{edge:u=null}=r;if(i){u==="start"&&(u=ke.isBackward(i)?"focus":"anchor"),u==="end"&&(u=ke.isBackward(i)?"anchor":"focus");var{anchor:f,focus:d}=i,g={distance:o,unit:s,ignoreNonSelectable:!0},p={};if(u==null||u==="anchor"){var y=a?z.before(n,f,g):z.after(n,f,g);y&&(p.anchor=y)}if(u==null||u==="focus"){var w=a?z.before(n,d,g):z.after(n,d,g);w&&(p.focus=w)}He.setSelection(n,p)}},T_=(e,n)=>{var{selection:r}=e;if(n=z.range(e,n),r){He.setSelection(e,n);return}if(!ke.isRange(n))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Sr.stringify(n)));e.apply({type:"set_selection",properties:r,newProperties:n})};function dT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function gT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?dT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var D_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=n,{edge:s="both"}=i;if(o){s==="start"&&(s=ke.isBackward(o)?"focus":"anchor"),s==="end"&&(s=ke.isBackward(o)?"anchor":"focus");var{anchor:a,focus:u}=o,f=s==="anchor"?a:u;He.setSelection(n,{[s==="anchor"?"anchor":"focus"]:gT(gT({},f),r)})}},A_=(e,n)=>{var{selection:r}=e,i={},o={};if(r){for(var s in n)(s==="anchor"&&n.anchor!=null&&!Cn.equals(n.anchor,r.anchor)||s==="focus"&&n.focus!=null&&!Cn.equals(n.focus,r.focus)||s!=="anchor"&&s!=="focus"&&n[s]!==r[s])&&(i[s]=r[s],o[s]=n[s]);Object.keys(i).length>0&&e.apply({type:"set_selection",properties:i,newProperties:o})}},B_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};z.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:s=!1,mode:a="lowest",batchDirty:u=!0}=i,{at:f,match:d,select:g}=i;if(Je.isNode(r)&&(r=[r]),r.length!==0){var[p]=r;if(f||(f=UE(n),g!==!1&&(g=!0)),g==null&&(g=!1),ke.isRange(f))if(o||(f=z.unhangRange(n,f,{voids:s})),ke.isCollapsed(f))f=f.anchor;else{var[,y]=ke.edges(f),w=z.pointRef(n,y);He.delete(n,{at:f}),f=w.unref()}if(Cn.isPoint(f)){d==null&&(at.isText(p)?d=de=>at.isText(de):n.isInline(p)?d=de=>at.isText(de)||z.isInline(n,de):d=de=>dt.isElement(de)&&z.isBlock(n,de));var[E]=z.nodes(n,{at:f.path,match:d,mode:a,voids:s});if(E){var[,S]=E,D=z.pathRef(n,S),A=z.isEnd(n,f,S);He.splitNodes(n,{at:f,match:d,mode:a,voids:s});var P=D.unref();f=A?oe.next(P):P}else return}var b=oe.parent(f),R=f[f.length-1];if(!(!s&&z.void(n,{at:b}))){if(u){var L=[],V=oe.levels(b);cL(n,()=>{var de=function(){var he=b.concat(R);R++;var ye={type:"insert_node",path:he,node:Pe};n.apply(ye),f=oe.next(f),L.push(ye),at.isText(Pe)?V.push(he):V.push(...Array.from(Je.nodes(Pe),W=>{var[,O]=W;return he.concat(O)}))};for(var Pe of r)de()},()=>{I7(n,V,de=>{var Pe=de;for(var ue of L)if(oe.operationCanTransformPath(ue)&&(Pe=oe.transform(Pe,ue),!Pe))return null;return Pe})})}else for(var Z of r){var ne=b.concat(R);R++,n.apply({type:"insert_node",path:ne,node:Z}),f=oe.next(f)}if(f=oe.previous(f),g){var le=z.end(n,f);le&&He.select(n,le)}}}})},M_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.withoutNormalizing(n,()=>{var{at:i=n.selection,mode:o="lowest",voids:s=!1}=r,{match:a}=r;if(a==null&&(a=oe.isPath(i)?Ig(n,i):R=>dt.isElement(R)&&z.isBlock(n,R)),!!i){var u=z.nodes(n,{at:i,match:a,mode:o,voids:s}),f=Array.from(u,R=>{var[,L]=R;return z.pathRef(n,L)});for(var d of f){var g=d.unref();if(g.length<2)throw new Error("Cannot lift node at a path [".concat(g,"] because it has a depth of less than `2`."));var p=z.node(n,oe.parent(g)),[y,w]=p,E=g[g.length-1],{length:S}=y.children;if(S===1){var D=oe.next(w);He.moveNodes(n,{at:g,to:D,voids:s}),He.removeNodes(n,{at:w,voids:s})}else if(E===0)He.moveNodes(n,{at:g,to:w,voids:s});else if(E===S-1){var A=oe.next(w);He.moveNodes(n,{at:g,to:A,voids:s})}else{var P=oe.next(g),b=oe.next(w);He.splitNodes(n,{at:P,voids:s}),He.moveNodes(n,{at:g,to:b,voids:s})}}}})},R_=["text"],k_=["children"],F7=(e,n)=>{if(dt.isElement(n)){var r=n;return z.isVoid(e,n)?!0:r.children.length===1?F7(e,r.children[0]):!1}else return!z.isEditor(n)},b_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.withoutNormalizing(n,()=>{var{match:i,at:o=n.selection}=r,{hanging:s=!1,voids:a=!1,mode:u="lowest"}=r;if(o){if(i==null)if(oe.isPath(o)){var[f]=z.parent(n,o);i=de=>f.children.includes(de)}else i=de=>dt.isElement(de)&&z.isBlock(n,de);if(!s&&ke.isRange(o)&&(o=z.unhangRange(n,o,{voids:a})),ke.isRange(o))if(ke.isCollapsed(o))o=o.anchor;else{var[,d]=ke.edges(o),g=z.pointRef(n,d);He.delete(n,{at:o}),o=g.unref(),r.at==null&&He.select(n,o)}var[p]=z.nodes(n,{at:o,match:i,voids:a,mode:u}),y=z.previous(n,{at:o,match:i,voids:a,mode:u});if(!(!p||!y)){var[w,E]=p,[S,D]=y;if(!(E.length===0||D.length===0)){var A=oe.next(D),P=oe.common(E,D),b=oe.isSibling(E,D),R=Array.from(z.levels(n,{at:E}),de=>{var[Pe]=de;return Pe}).slice(P.length).slice(0,-1),L=z.above(n,{at:E,mode:"highest",match:de=>R.includes(de)&&F7(n,de)}),V=L&&z.pathRef(n,L[1]),Z,ne;if(at.isText(w)&&at.isText(S)){var le=Ql(w,R_);ne=S.text.length,Z=le}else if(dt.isElement(w)&&dt.isElement(S)){var le=Ql(w,k_);ne=S.children.length,Z=le}else throw new Error("Cannot merge the node at path [".concat(E,"] with the previous sibling because it is not the same kind: ").concat(Sr.stringify(w)," ").concat(Sr.stringify(S)));b||He.moveNodes(n,{at:E,to:A,voids:a}),V&&He.removeNodes(n,{at:V.current,voids:a}),z.shouldMergeNodesRemovePrevNode(n,y,p)?He.removeNodes(n,{at:D,voids:a}):n.apply({type:"merge_node",path:A,position:ne,properties:Z}),V&&V.unref()}}}})},O_=(e,n)=>{z.withoutNormalizing(e,()=>{var{to:r,at:i=e.selection,mode:o="lowest",voids:s=!1}=n,{match:a}=n;if(i){a==null&&(a=oe.isPath(i)?Ig(e,i):w=>dt.isElement(w)&&z.isBlock(e,w));var u=z.pathRef(e,r),f=z.nodes(e,{at:i,match:a,mode:o,voids:s}),d=Array.from(f,w=>{var[,E]=w;return z.pathRef(e,E)});for(var g of d){var p=g.unref(),y=u.current;p.length!==0&&e.apply({type:"move_node",path:p,newPath:y}),u.current&&oe.isSibling(y,p)&&oe.isAfter(y,p)&&(u.current=oe.next(u.current))}u.unref()}})},I_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.withoutNormalizing(n,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest"}=r,{at:a=n.selection,match:u}=r;if(a){u==null&&(u=oe.isPath(a)?Ig(n,a):w=>dt.isElement(w)&&z.isBlock(n,w)),!i&&ke.isRange(a)&&(a=z.unhangRange(n,a,{voids:o}));var f=z.nodes(n,{at:a,match:u,mode:s,voids:o}),d=Array.from(f,w=>{var[,E]=w;return z.pathRef(n,E)});for(var g of d){var p=g.unref();if(p){var[y]=z.node(n,p);n.apply({type:"remove_node",path:p,node:y})}}}})},F_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};z.withoutNormalizing(n,()=>{var{match:o,at:s=n.selection,compare:a,merge:u}=i,{hanging:f=!1,mode:d="lowest",split:g=!1,voids:p=!1}=i;if(s){if(o==null&&(o=oe.isPath(s)?Ig(n,s):ne=>dt.isElement(ne)&&z.isBlock(n,ne)),!f&&ke.isRange(s)&&(s=z.unhangRange(n,s,{voids:p})),g&&ke.isRange(s)){if(ke.isCollapsed(s)&&z.leaf(n,s.anchor)[0].text.length>0)return;var y=z.rangeRef(n,s,{affinity:"inward"}),[w,E]=ke.edges(s),S=d==="lowest"?"lowest":"highest",D=z.isEnd(n,E,E.path);He.splitNodes(n,{at:E,match:o,mode:S,voids:p,always:!D});var A=z.isStart(n,w,w.path);He.splitNodes(n,{at:w,match:o,mode:S,voids:p,always:!A}),s=y.unref(),i.at==null&&He.select(n,s)}a||(a=(ne,le)=>ne!==le);for(var[P,b]of z.nodes(n,{at:s,match:o,mode:d,voids:p})){var R={},L={};if(b.length!==0){var V=!1;for(var Z in r)Z==="children"||Z==="text"||a(r[Z],P[Z])&&(V=!0,P.hasOwnProperty(Z)&&(R[Z]=P[Z]),u?r[Z]!=null&&(L[Z]=u(P[Z],r[Z])):r[Z]!=null&&(L[Z]=r[Z]));V&&n.apply({type:"set_node",path:b,properties:R,newProperties:L})}}}})},L_=(e,n)=>{if(ke.isCollapsed(n))return n.anchor;var[,r]=ke.edges(n),i=z.pointRef(e,r);return He.delete(e,{at:n}),i.unref()},__=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.withoutNormalizing(n,()=>{var{mode:i="lowest",voids:o=!1}=r,{match:s,at:a=n.selection,height:u=0,always:f=!1}=r;if(s==null&&(s=j=>dt.isElement(j)&&z.isBlock(n,j)),ke.isRange(a)&&(a=L_(n,a)),oe.isPath(a)){var d=a,g=z.point(n,d),[p]=z.parent(n,d);s=j=>j===p,u=g.path.length-d.length+1,a=g,f=!0}if(a){var y=z.pointRef(n,a,{affinity:"backward"}),w;try{var[E]=z.nodes(n,{at:a,match:s,mode:i,voids:o});if(!E)return;var S=z.void(n,{at:a,mode:"highest"}),D=0;if(!o&&S){var[A,P]=S;if(dt.isElement(A)&&n.isInline(A)){var b=z.after(n,P);if(!b){var R={text:""},L=oe.next(P);He.insertNodes(n,R,{at:L,voids:o}),b=z.point(n,L)}a=b,f=!0}var V=a.path.length-P.length;u=V+1,f=!0}w=z.pointRef(n,a);var Z=a.path.length-u,[,ne]=E,le=a.path.slice(0,Z),de=u===0?a.offset:a.path[Z]+D;for(var[Pe,ue]of z.levels(n,{at:le,reverse:!0,voids:o})){var he=!1;if(ue.length<ne.length||ue.length===0||!o&&dt.isElement(Pe)&&z.isVoid(n,Pe))break;var ye=y.current,W=z.isEnd(n,ye,ue);if(f||!y||!z.isEdge(n,ye,ue)){he=!0;var O=Je.extractProps(Pe);n.apply({type:"split_node",path:ue,position:de,properties:O})}de=ue[ue.length-1]+(he||W?1:0)}if(r.at==null){var N=w.current||z.end(n,[]);He.select(n,N)}}finally{var F;y.unref(),(F=w)===null||F===void 0||F.unref()}}})},N_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var o={};for(var s of r)o[s]=null;He.setNodes(n,o,i)},H_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.withoutNormalizing(n,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{at:a=n.selection,match:u}=r;if(a){u==null&&(u=oe.isPath(a)?Ig(n,a):w=>dt.isElement(w)&&z.isBlock(n,w)),oe.isPath(a)&&(a=z.range(n,a));var f=ke.isRange(a)?z.rangeRef(n,a):null,d=z.nodes(n,{at:a,match:u,mode:i,voids:s}),g=Array.from(d,w=>{var[,E]=w;return z.pathRef(n,E)}).reverse(),p=function(){var E=y.unref(),[S]=z.node(n,E),D=z.range(n,E);o&&f&&(D=ke.intersection(f.current,D)),He.liftNodes(n,{at:D,match:A=>dt.isAncestor(S)&&S.children.includes(A),voids:s})};for(var y of g)p();f&&f.unref()}})};function pT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function mT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?pT(Object(r),!0).forEach(function(i){Yi(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var G_=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};z.withoutNormalizing(n,()=>{var{mode:o="lowest",split:s=!1,voids:a=!1}=i,{match:u,at:f=n.selection}=i;if(f){if(u==null&&(oe.isPath(f)?u=Ig(n,f):n.isInline(r)?u=D=>dt.isElement(D)&&z.isInline(n,D)||at.isText(D):u=D=>dt.isElement(D)&&z.isBlock(n,D)),s&&ke.isRange(f)){var[d,g]=ke.edges(f),p=z.rangeRef(n,f,{affinity:"inward"});He.splitNodes(n,{at:g,match:u,voids:a}),He.splitNodes(n,{at:d,match:u,voids:a}),f=p.unref(),i.at==null&&He.select(n,f)}var y=Array.from(z.nodes(n,{at:f,match:n.isInline(r)?D=>dt.isElement(D)&&z.isBlock(n,D):D=>z.isEditor(D),mode:"lowest",voids:a})),w=function(){var A=ke.isRange(f)?ke.intersection(f,z.range(n,S)):f;if(!A)return 0;var P=Array.from(z.nodes(n,{at:A,match:u,mode:o,voids:a}));if(P.length>0){var[b]=P,R=P[P.length-1],[,L]=b,[,V]=R;if(L.length===0&&V.length===0)return 0;var Z=oe.equals(L,V)?oe.parent(L):oe.common(L,V),ne=z.range(n,L,V),le=z.node(n,Z),[de]=le,Pe=Z.length+1,ue=oe.next(V.slice(0,Pe)),he=mT(mT({},r),{},{children:[]});He.insertNodes(n,he,{at:ue,voids:a}),He.moveNodes(n,{at:ne,match:ye=>dt.isAncestor(de)&&de.children.includes(ye),to:ue.concat(0),voids:a})}},E;for(var[,S]of y)E=w()}})},j_=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return fL(e,...i)},addMark:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vL(e,...i)},deleteBackward:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return xL(e,...i)},deleteForward:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return CL(e,...i)},deleteFragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return EL(e,...i)},getFragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return dL(e,...i)},insertBreak:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return OL(e,...i)},insertSoftBreak:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return FL(e,...i)},insertFragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return C_(e,...i)},insertNode:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return IL(e,...i)},insertText:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _L(e,...i)},normalizeNode:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return gL(e,...i)},removeMark:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return d_(e,...i)},getDirtyPaths:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return hL(e,...i)},shouldNormalize:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return pL(e,...i)},above:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return mL(e,...i)},after:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return yL(e,...i)},before:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return wL(e,...i)},collapse:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E_(e,...i)},delete:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return x_(e,...i)},deselect:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return P_(e,...i)},edges:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return PL(e,...i)},elementReadOnly:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return SL(e,...i)},end:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return TL(e,...i)},first:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return DL(e,...i)},fragment:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return AL(e,...i)},getMarks:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return qL(e,...i)},hasBlocks:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ML(e,...i)},hasInlines:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return RL(e,...i)},hasPath:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return kL(e,...i)},hasTexts:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return bL(e,...i)},insertNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return B_(e,...i)},isBlock:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return NL(e,...i)},isEdge:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return HL(e,...i)},isEmpty:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return GL(e,...i)},isEnd:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return jL(e,...i)},isNormalizing:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return zL(e,...i)},isStart:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return $L(e,...i)},last:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return WL(e,...i)},leaf:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return VL(e,...i)},levels:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return UL(e,...i)},liftNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return M_(e,...i)},mergeNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return b_(e,...i)},move:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return S_(e,...i)},moveNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O_(e,...i)},next:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return YL(e,...i)},node:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ZL(e,...i)},nodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return QL(e,...i)},normalize:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return JL(e,...i)},parent:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e_(e,...i)},path:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return r_(e,...i)},pathRef:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t_(e,...i)},pathRefs:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n_(e,...i)},point:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s_(e,...i)},pointRef:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i_(e,...i)},pointRefs:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return o_(e,...i)},positions:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return a_(e,...i)},previous:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return l_(e,...i)},range:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return f_(e,...i)},rangeRef:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return u_(e,...i)},rangeRefs:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return c_(e,...i)},removeNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return I_(e,...i)},select:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return T_(e,...i)},setNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return F_(e,...i)},setNormalizing:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return g_(e,...i)},setPoint:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return D_(e,...i)},setSelection:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return A_(e,...i)},splitNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return __(e,...i)},start:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return p_(e,...i)},string:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return m_(e,...i)},unhangRange:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return v_(e,...i)},unsetNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return N_(e,...i)},unwrapNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return H_(e,...i)},void:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return BL(e,...i)},withoutNormalizing:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return y_(e,...i)},wrapNodes:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return G_(e,...i)},shouldMergeNodesRemovePrevNode:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return w_(e,...i)}};return e},ox,vT;function z_(){if(vT)return ox;vT=1,ox=o;var e="---",n="A-Za-z--------",r=new RegExp("^[^"+n+"]*["+e+"]"),i=new RegExp("^[^"+e+"]*["+n+"]");function o(s){return s=String(s||""),r.test(s)?"rtl":i.test(s)?"ltr":"neutral"}return ox}var $_=z_();const L7=vc($_),yT=e=>typeof e=="object"&&e!=null&&e.nodeType===1,wT=(e,n)=>(!n||e!=="hidden")&&e!=="visible"&&e!=="clip",dv=(e,n)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const r=getComputedStyle(e,null);return wT(r.overflowY,n)||wT(r.overflowX,n)||(i=>{const o=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!o&&(o.clientHeight<i.scrollHeight||o.clientWidth<i.scrollWidth)})(e)}return!1},gv=(e,n,r,i,o,s,a,u)=>s<e&&a>n||s>e&&a<n?0:s<=e&&u<=r||a>=n&&u>=r?s-e-i:a>n&&u<r||s<e&&u>r?a-n+o:0,W_=e=>{const n=e.parentElement;return n??(e.getRootNode().host||null)},xT=(e,n)=>{var r,i,o,s;if(typeof document>"u")return[];const{scrollMode:a,block:u,inline:f,boundary:d,skipOverflowHiddenElements:g}=n,p=typeof d=="function"?d:O=>O!==d;if(!yT(e))throw new TypeError("Invalid target");const y=document.scrollingElement||document.documentElement,w=[];let E=e;for(;yT(E)&&p(E);){if(E=W_(E),E===y){w.push(E);break}E!=null&&E===document.body&&dv(E)&&!dv(document.documentElement)||E!=null&&dv(E,g)&&w.push(E)}const S=(i=(r=window.visualViewport)==null?void 0:r.width)!=null?i:innerWidth,D=(s=(o=window.visualViewport)==null?void 0:o.height)!=null?s:innerHeight,{scrollX:A,scrollY:P}=window,{height:b,width:R,top:L,right:V,bottom:Z,left:ne}=e.getBoundingClientRect(),{top:le,right:de,bottom:Pe,left:ue}=(O=>{const N=window.getComputedStyle(O);return{top:parseFloat(N.scrollMarginTop)||0,right:parseFloat(N.scrollMarginRight)||0,bottom:parseFloat(N.scrollMarginBottom)||0,left:parseFloat(N.scrollMarginLeft)||0}})(e);let he=u==="start"||u==="nearest"?L-le:u==="end"?Z+Pe:L+b/2-le+Pe,ye=f==="center"?ne+R/2-ue+de:f==="end"?V+de:ne-ue;const W=[];for(let O=0;O<w.length;O++){const N=w[O],{height:F,width:j,top:U,right:I,bottom:Q,left:ee}=N.getBoundingClientRect();if(a==="if-needed"&&L>=0&&ne>=0&&Z<=D&&V<=S&&(N===y&&!dv(N)||L>=U&&Z<=Q&&ne>=ee&&V<=I))return W;const se=getComputedStyle(N),Ee=parseInt(se.borderLeftWidth,10),ve=parseInt(se.borderTopWidth,10),be=parseInt(se.borderRightWidth,10),Oe=parseInt(se.borderBottomWidth,10);let ie=0,De=0;const Re="offsetWidth"in N?N.offsetWidth-N.clientWidth-Ee-be:0,Ie="offsetHeight"in N?N.offsetHeight-N.clientHeight-ve-Oe:0,ct="offsetWidth"in N?N.offsetWidth===0?0:j/N.offsetWidth:0,Ne="offsetHeight"in N?N.offsetHeight===0?0:F/N.offsetHeight:0;if(y===N)ie=u==="start"?he:u==="end"?he-D:u==="nearest"?gv(P,P+D,D,ve,Oe,P+he,P+he+b,b):he-D/2,De=f==="start"?ye:f==="center"?ye-S/2:f==="end"?ye-S:gv(A,A+S,S,Ee,be,A+ye,A+ye+R,R),ie=Math.max(0,ie+P),De=Math.max(0,De+A);else{ie=u==="start"?he-U-ve:u==="end"?he-Q+Oe+Ie:u==="nearest"?gv(U,Q,F,ve,Oe+Ie,he,he+b,b):he-(U+F/2)+Ie/2,De=f==="start"?ye-ee-Ee:f==="center"?ye-(ee+j/2)+Re/2:f==="end"?ye-I+be+Re:gv(ee,I,j,Ee,be+Re,ye,ye+R,R);const{scrollLeft:yt,scrollTop:lt}=N;ie=Ne===0?0:Math.max(0,Math.min(lt+ie/Ne,N.scrollHeight-F/Ne+Ie)),De=ct===0?0:Math.max(0,Math.min(yt+De/ct,N.scrollWidth-j/ct+Re)),he+=lt-ie,ye+=yt-De}W.push({el:N,top:ie,left:De})}return W},V_=e=>e===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(e)?e:{block:"start",inline:"nearest"};function U_(e,n){if(!e.isConnected||!(o=>{let s=o;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(e))return;const r=(o=>{const s=window.getComputedStyle(o);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(e);if((o=>typeof o=="object"&&typeof o.behavior=="function")(n))return n.behavior(xT(e,n));const i=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:o,top:s,left:a}of xT(e,V_(n))){const u=s-r.top+r.bottom,f=a-r.left+r.right;o.scroll({top:u,left:f,behavior:i})}}var _7=globalThis.Node,X_=globalThis.Text,qE=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,K_=e=>dc(e)&&e.nodeType===8,Ts=e=>dc(e)&&e.nodeType===1,dc=e=>{var n=qE(e);return!!n&&e instanceof n.Node},PC=e=>{var n=e&&e.anchorNode&&qE(e.anchorNode);return!!n&&e instanceof n.Selection},N7=e=>dc(e)&&e.nodeType===3,q_=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,Y_=e=>{var[n,r]=e;if(Ts(n)&&n.childNodes.length){var i=r===n.childNodes.length,o=i?r-1:r;for([n,o]=H7(n,o,i?"backward":"forward"),i=o<r;Ts(n)&&n.childNodes.length;){var s=i?n.childNodes.length-1:0;n=Q_(n,s,i?"backward":"forward")}r=i&&n.textContent!=null?n.textContent.length:0}return[n,r]},Z_=e=>{for(var n=e&&e.parentNode;n;){if(n.toString()==="[object ShadowRoot]")return!0;n=n.parentNode}return!1},H7=(e,n,r)=>{for(var{childNodes:i}=e,o=i[n],s=n,a=!1,u=!1;(K_(o)||Ts(o)&&o.childNodes.length===0||Ts(o)&&o.getAttribute("contenteditable")==="false")&&!(a&&u);){if(s>=i.length){a=!0,s=n-1,r="backward";continue}if(s<0){u=!0,s=n+1,r="forward";continue}o=i[s],n=s,s+=r==="forward"?1:-1}return[o,n]},Q_=(e,n,r)=>{var[i]=H7(e,n,r);return i},G7=e=>{var n="";if(N7(e)&&e.nodeValue)return e.nodeValue;if(Ts(e)){for(var r of Array.from(e.childNodes))n+=G7(r);var i=getComputedStyle(e).getPropertyValue("display");(i==="block"||i==="list"||e.tagName==="BR")&&(n+=`
`)}return n},J_=/data-slate-fragment="(.+?)"/m,eN=e=>{var n=e.getData("text/html"),[,r]=n.match(J_)||[];return r},Bp=e=>e.getSelection!=null?e.getSelection():document.getSelection(),YE=(e,n,r)=>{var{target:i}=n;if(Ts(i)&&i.matches('[contentEditable="false"]'))return!1;var{document:o}=Xt.getWindow(e);if(o.contains(i))return Xt.hasDOMNode(e,i,{editable:!0});var s=r.find(a=>{var{addedNodes:u,removedNodes:f}=a;for(var d of u)if(d===i||d.contains(i))return!0;for(var g of f)if(g===i||g.contains(i))return!0});return!s||s===n?!1:YE(e,s,r)},tN=()=>{for(var e=document.activeElement;(n=e)!==null&&n!==void 0&&n.shadowRoot&&(r=e.shadowRoot)!==null&&r!==void 0&&r.activeElement;){var n,r,i;e=(i=e)===null||i===void 0||(i=i.shadowRoot)===null||i===void 0?void 0:i.activeElement}return e},CT=(e,n)=>!!(e.compareDocumentPosition(n)&_7.DOCUMENT_POSITION_PRECEDING),nN=(e,n)=>!!(e.compareDocumentPosition(n)&_7.DOCUMENT_POSITION_FOLLOWING),sx,ax,rN=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ET=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Ui=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Jd=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Rf=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),iN=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),j7=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),oN=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),sN=Ui&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),aN=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),lN=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),uN=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),zv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((sx=navigator.userAgent.match(/Version\/(\d+)/))!==null&&sx!==void 0&&sx[1]&&parseInt((ax=navigator.userAgent.match(/Version\/(\d+)/))===null||ax===void 0?void 0:ax[1],10)<17);var Ku=(!oN||!sN)&&!iN&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Up(e)}function cN(e,n){if(Up(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(Up(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function fN(e){var n=cN(e,"string");return Up(n)==="symbol"?n:String(n)}function ZE(e,n,r){return n=fN(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var hN=0;class z7{constructor(){ZE(this,"id",void 0),this.id="".concat(hN++)}}var sg=new WeakMap,eg=new WeakMap,Mp=new WeakMap,$7=new WeakMap,$v=new WeakMap,SC=new WeakMap,Xp=new WeakMap,Gf=new WeakMap,py=new WeakMap,ow=new WeakMap,TC=new WeakMap,tc=new WeakMap,If=new WeakMap,Rp=new WeakMap,DC=new WeakMap,QE=new WeakMap,sa=new WeakMap,zl=new WeakMap,yo=new WeakMap,Zu=new WeakMap,Qu=new WeakMap,W7=new WeakMap,mg=Symbol("placeholder"),V7=Symbol("mark-placeholder"),Xt={androidPendingDiffs:e=>yo.get(e),androidScheduleFlush:e=>{var n;(n=QE.get(e))===null||n===void 0||n()},blur:e=>{var n=Xt.toDOMNode(e,e),r=Xt.findDocumentOrShadowRoot(e);tc.set(e,!1),r.activeElement===n&&n.blur()},deselect:e=>{var{selection:n}=e,r=Xt.findDocumentOrShadowRoot(e),i=Bp(r);i&&i.rangeCount>0&&i.removeAllRanges(),n&&He.deselect(e)},findDocumentOrShadowRoot:e=>{var n=Xt.toDOMNode(e,e),r=n.getRootNode();return r instanceof Document||r instanceof ShadowRoot?r:n.ownerDocument},findEventRange:(e,n)=>{"nativeEvent"in n&&(n=n.nativeEvent);var{clientX:r,clientY:i,target:o}=n;if(r==null||i==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var s=Xt.toSlateNode(e,n.target),a=Xt.findPath(e,s);if(dt.isElement(s)&&z.isVoid(e,s)){var u=o.getBoundingClientRect(),f=e.isInline(s)?r-u.left<u.left+u.width-r:i-u.top<u.top+u.height-i,d=z.point(e,a,{edge:f?"start":"end"}),g=f?z.before(e,d):z.after(e,d);if(g){var p=z.range(e,g);return p}}var y,{document:w}=Xt.getWindow(e);if(w.caretRangeFromPoint)y=w.caretRangeFromPoint(r,i);else{var E=w.caretPositionFromPoint(r,i);E&&(y=w.createRange(),y.setStart(E.offsetNode,E.offset),y.setEnd(E.offsetNode,E.offset))}if(!y)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var S=Xt.toSlateRange(e,y,{exactMatch:!1,suppressThrow:!1});return S},findKey:(e,n)=>{var r=py.get(n);return r||(r=new z7,py.set(n,r)),r},findPath:(e,n)=>{for(var r=[],i=n;;){var o=Mp.get(i);if(o==null){if(z.isEditor(i))return r;break}var s=eg.get(i);if(s==null)break;r.unshift(s),i=o}throw new Error("Unable to find the path for Slate node: ".concat(Sr.stringify(n)))},focus:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!tc.get(n)){if(r.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(n.operations.length>0){setTimeout(()=>{Xt.focus(n,{retries:r.retries-1})},10);return}var i=Xt.toDOMNode(n,n),o=Xt.findDocumentOrShadowRoot(n);if(o.activeElement!==i){if(n.selection&&o instanceof Document){var s=Bp(o),a=Xt.toDOMRange(n,n.selection);s==null||s.removeAllRanges(),s==null||s.addRange(a)}n.selection||He.select(n,z.start(n,[])),tc.set(n,!0),i.focus({preventScroll:!0})}}},getWindow:e=>{var n=$7.get(e);if(!n)throw new Error("Unable to find a host window element for this editor");return n},hasDOMNode:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=i,s=Xt.toDOMNode(n,n),a;try{a=Ts(r)?r:r.parentElement}catch(u){if(u instanceof Error&&!u.message.includes('Permission denied to access property "nodeType"'))throw u}return a?a.closest("[data-slate-editor]")===s&&(!o||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===s||!!a.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,n)=>dc(n)&&Xt.hasDOMNode(e,n,{editable:!0}),hasRange:(e,n)=>{var{anchor:r,focus:i}=n;return z.hasPath(e,r.path)&&z.hasPath(e,i.path)},hasSelectableTarget:(e,n)=>Xt.hasEditableTarget(e,n)||Xt.isTargetInsideNonReadonlyVoid(e,n),hasTarget:(e,n)=>dc(n)&&Xt.hasDOMNode(e,n),insertData:(e,n)=>{e.insertData(n)},insertFragmentData:(e,n)=>e.insertFragmentData(n),insertTextData:(e,n)=>e.insertTextData(n),isComposing:e=>!!If.get(e),isFocused:e=>!!tc.get(e),isReadOnly:e=>!!TC.get(e),isTargetInsideNonReadonlyVoid:(e,n)=>{if(TC.get(e))return!1;var r=Xt.hasTarget(e,n)&&Xt.toSlateNode(e,n);return dt.isElement(r)&&z.isVoid(e,r)},setFragmentData:(e,n,r)=>e.setFragmentData(n,r),toDOMNode:(e,n)=>{var r=ow.get(e),i=z.isEditor(n)?$v.get(e):r==null?void 0:r.get(Xt.findKey(e,n));if(!i)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Sr.stringify(n)));return i},toDOMPoint:(e,n)=>{var[r]=z.node(e,n.path),i=Xt.toDOMNode(e,r),o;z.void(e,{at:n})&&(n={path:n.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",a=Array.from(i.querySelectorAll(s)),u=0,f=0;f<a.length;f++){var d=a[f],g=d.childNodes[0];if(!(g==null||g.textContent==null)){var{length:p}=g.textContent,y=d.getAttribute("data-slate-length"),w=y==null?p:parseInt(y,10),E=u+w,S=a[f+1];if(n.offset===E&&S!==null&&S!==void 0&&S.hasAttribute("data-slate-mark-placeholder")){var D,A=S.childNodes[0];o=[A instanceof X_?A:S,(D=S.textContent)!==null&&D!==void 0&&D.startsWith("\uFEFF")?1:0];break}if(n.offset<=E){var P=Math.min(p,Math.max(0,n.offset-u));o=[g,P];break}u=E}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Sr.stringify(n)));return o},toDOMRange:(e,n)=>{var{anchor:r,focus:i}=n,o=ke.isBackward(n),s=Xt.toDOMPoint(e,r),a=ke.isCollapsed(n)?s:Xt.toDOMPoint(e,i),u=Xt.getWindow(e),f=u.document.createRange(),[d,g]=o?a:s,[p,y]=o?s:a,w=Ts(d)?d:d.parentElement,E=!!w.getAttribute("data-slate-zero-width"),S=Ts(p)?p:p.parentElement,D=!!S.getAttribute("data-slate-zero-width");return f.setStart(d,E?1:g),f.setEnd(p,D?1:y),f},toSlateNode:(e,n)=>{var r=Ts(n)?n:n.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var i=r?Xp.get(r):null;if(!i)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return i},toSlatePoint:(e,n,r)=>{var{exactMatch:i,suppressThrow:o,searchDirection:s="backward"}=r,[a,u]=i?n:Y_(n),f=a.parentNode,d=null,g=0;if(f){var p,y,w=Xt.toDOMNode(e,e),E=f.closest('[data-slate-void="true"]'),S=E&&w.contains(E)?E:null,D=f.closest('[contenteditable="false"]'),A=D&&w.contains(D)?D:null,P=f.closest("[data-slate-leaf]"),b=null;if(P){if(d=P.closest('[data-slate-node="text"]'),d){var R=Xt.getWindow(e),L=R.document.createRange();L.setStart(d,0),L.setEnd(a,u);var V=L.cloneContents(),Z=[...Array.prototype.slice.call(V.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(V.querySelectorAll("[contenteditable=false]"))];Z.forEach(ee=>{if(Ui&&!i&&ee.hasAttribute("data-slate-zero-width")&&ee.textContent.length>0&&ee.textContext!=="\uFEFF"){ee.textContent.startsWith("\uFEFF")&&(ee.textContent=ee.textContent.slice(1));return}ee.parentNode.removeChild(ee)}),g=V.textContent.length,b=d}}else if(S){for(var ne=S.querySelectorAll("[data-slate-leaf]"),le=0;le<ne.length;le++){var de=ne[le];if(Xt.hasDOMNode(e,de)){P=de;break}}P?(d=P.closest('[data-slate-node="text"]'),b=P,g=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(ee=>{g-=ee.textContent.length})):g=1}else if(A){var Pe=ee=>ee?ee.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],ue=A.closest('[data-slate-node="element"]');if(s==="forward"){var he,ye=[...Pe(ue),...Pe(ue==null?void 0:ue.nextElementSibling)];P=(he=ye.find(ee=>nN(A,ee)))!==null&&he!==void 0?he:null}else{var W,O=[...Pe(ue==null?void 0:ue.previousElementSibling),...Pe(ue)];P=(W=O.findLast(ee=>CT(A,ee)))!==null&&W!==void 0?W:null}P&&(d=P.closest('[data-slate-node="text"]'),b=P,s==="forward"?g=0:(g=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(ee=>{g-=ee.textContent.length})))}b&&g===b.textContent.length&&Ui&&b.getAttribute("data-slate-zero-width")==="z"&&(p=b.textContent)!==null&&p!==void 0&&p.startsWith("\uFEFF")&&(f.hasAttribute("data-slate-zero-width")||Jd&&(y=b.textContent)!==null&&y!==void 0&&y.endsWith(`

`))&&g--}if(Ui&&!d&&!i){var N=f.hasAttribute("data-slate-node")?f:f.closest("[data-slate-node]");if(N&&Xt.hasDOMNode(e,N,{editable:!0})){var F=Xt.toSlateNode(e,N),{path:j,offset:U}=z.start(e,Xt.findPath(e,F));return N.querySelector("[data-slate-leaf]")||(U=u),{path:j,offset:U}}}if(!d){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(n))}var I=Xt.toSlateNode(e,d),Q=Xt.findPath(e,I);return{path:Q,offset:g}},toSlateRange:(e,n,r)=>{var i,{exactMatch:o,suppressThrow:s}=r,a=PC(n)?n.anchorNode:n.startContainer,u,f,d,g,p;if(a)if(PC(n)){if(Jd&&n.rangeCount>1){d=n.focusNode;var y=n.getRangeAt(0),w=n.getRangeAt(n.rangeCount-1);if(d instanceof HTMLTableRowElement&&y.startContainer instanceof HTMLTableRowElement&&w.startContainer instanceof HTMLTableRowElement){let V=function(Z){return Z.childElementCount>0?V(Z.children[0]):Z};var E=y.startContainer,S=w.startContainer,D=V(E.children[y.startOffset]),A=V(S.children[w.startOffset]);g=0,A.childNodes.length>0?u=A.childNodes[0]:u=A,D.childNodes.length>0?d=D.childNodes[0]:d=D,A instanceof HTMLElement?f=A.innerHTML.length:f=0}else y.startContainer===d?(u=w.endContainer,f=w.endOffset,g=y.startOffset):(u=y.startContainer,f=y.endOffset,g=w.startOffset)}else u=n.anchorNode,f=n.anchorOffset,d=n.focusNode,g=n.focusOffset;j7&&Z_(u)||Jd?p=n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset:p=n.isCollapsed}else u=n.startContainer,f=n.startOffset,d=n.endContainer,g=n.endOffset,p=n.collapsed;if(u==null||d==null||f==null||g==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(n));Jd&&(i=d.textContent)!==null&&i!==void 0&&i.endsWith(`

`)&&g===d.textContent.length&&g--;var P=Xt.toSlatePoint(e,[u,f],{exactMatch:o,suppressThrow:s});if(!P)return null;var b=CT(u,d)||u===d&&g<f,R=p?P:Xt.toSlatePoint(e,[d,g],{exactMatch:o,suppressThrow:s,searchDirection:b?"forward":"backward"});if(!R)return null;var L={anchor:P,focus:R};return ke.isExpanded(L)&&ke.isForward(L)&&Ts(d)&&z.void(e,{at:L.focus,mode:"highest"})&&(L=z.unhangRange(e,L,{voids:!0})),L}};function dN(e,n){var{path:r,diff:i}=n;if(!z.hasPath(e,r))return!1;var o=Je.get(e,r);if(!at.isText(o))return!1;if(i.start!==o.text.length||i.text.length===0)return o.text.slice(i.start,i.start+i.text.length)===i.text;var s=oe.next(r);if(!z.hasPath(e,s))return!1;var a=Je.get(e,s);return at.isText(a)&&a.text.startsWith(i.text)}function U7(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>o.slice(0,s.start)+s.text+o.slice(s.end),e)}function gN(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++)if(e.charAt(i)!==n.charAt(i))return i;return r}function pN(e,n,r){for(var i=Math.min(e.length,n.length,r),o=0;o<i;o++)if(e.charAt(e.length-o-1)!==n.charAt(n.length-o-1))return o;return i}function X7(e,n){var{start:r,end:i,text:o}=n,s=e.slice(r,i),a=gN(s,o),u=Math.min(s.length-a,o.length-a),f=pN(s,o,u),d={start:r+a,end:i-f,text:o.slice(a,o.length-f)};return d.start===d.end&&d.text.length===0?null:d}function mN(e,n,r){var i=Math.min(n.start,r.start),o=Math.max(0,Math.min(n.start+n.text.length,r.end)-r.start),s=U7(e,n,r),a=Math.max(r.start+r.text.length,n.start+n.text.length+(n.start+n.text.length>r.start?r.text.length:0)-o),u=s.slice(i,a),f=Math.max(n.end,r.end-n.text.length+(n.end-n.start));return X7(e,{start:i,end:f,text:u})}function vN(e){var{path:n,diff:r}=e;return{anchor:{path:n,offset:r.start},focus:{path:n,offset:r.end}}}function AC(e,n){var{path:r,offset:i}=n;if(!z.hasPath(e,r))return null;var o=Je.get(e,r);if(!at.isText(o))return null;var s=z.above(e,{match:u=>dt.isElement(u)&&z.isBlock(e,u),at:r});if(!s)return null;for(;i>o.text.length;){var a=z.next(e,{at:r,match:at.isText});if(!a||!oe.isDescendant(a[1],s[1]))return null;i-=o.text.length,o=a[0],r=a[1]}return{path:r,offset:i}}function PT(e,n){var r=AC(e,n.anchor);if(!r)return null;if(ke.isCollapsed(n))return{anchor:r,focus:r};var i=AC(e,n.focus);return i?{anchor:r,focus:i}:null}function BC(e,n,r){var i=yo.get(e),o=i==null?void 0:i.find(g=>{var{path:p}=g;return oe.equals(p,n.path)});if(!o||n.offset<=o.diff.start)return Cn.transform(n,r,{affinity:"backward"});var{diff:s}=o;if(n.offset<=s.start+s.text.length){var a={path:n.path,offset:s.start},u=Cn.transform(a,r,{affinity:"backward"});return u?{path:u.path,offset:u.offset+n.offset-s.start}:null}var f={path:n.path,offset:n.offset-s.text.length+s.end-s.start},d=Cn.transform(f,r,{affinity:"backward"});return d?r.type==="split_node"&&oe.equals(r.path,n.path)&&f.offset<r.position&&s.start<r.position?d:{path:d.path,offset:d.offset+s.text.length-s.end+s.start}:null}function ST(e,n,r){var i=BC(e,n.anchor,r);if(!i)return null;if(ke.isCollapsed(n))return{anchor:i,focus:i};var o=BC(e,n.focus,r);return o?{anchor:i,focus:o}:null}function yN(e,n){var{path:r,diff:i,id:o}=e;switch(n.type){case"insert_text":return!oe.equals(n.path,r)||n.offset>=i.end?e:n.offset<=i.start?{diff:{start:n.text.length+i.start,end:n.text.length+i.end,text:i.text},id:o,path:r}:{diff:{start:i.start,end:i.end+n.text.length,text:i.text},id:o,path:r};case"remove_text":return!oe.equals(n.path,r)||n.offset>=i.end?e:n.offset+n.text.length<=i.start?{diff:{start:i.start-n.text.length,end:i.end-n.text.length,text:i.text},id:o,path:r}:{diff:{start:i.start,end:i.end-n.text.length,text:i.text},id:o,path:r};case"split_node":return!oe.equals(n.path,r)||n.position>=i.end?{diff:i,id:o,path:oe.transform(r,n,{affinity:"backward"})}:n.position>i.start?{diff:{start:i.start,end:Math.min(n.position,i.end),text:i.text},id:o,path:r}:{diff:{start:i.start-n.position,end:i.end-n.position,text:i.text},id:o,path:oe.transform(r,n,{affinity:"forward"})};case"merge_node":return oe.equals(n.path,r)?{diff:{start:i.start+n.position,end:i.end+n.position,text:i.text},id:o,path:oe.transform(r,n)}:{diff:i,id:o,path:oe.transform(r,n)}}var s=oe.transform(r,n);return s?{diff:i,path:s,id:o}:null}var TT=(e,n)=>{var r=(n.top+n.bottom)/2;return e.top<=r&&e.bottom>=r},DT=(e,n,r)=>{var i=Xt.toDOMRange(e,n).getBoundingClientRect(),o=Xt.toDOMRange(e,r).getBoundingClientRect();return TT(i,o)&&TT(o,i)},wN=(e,n)=>{var r=z.range(e,ke.end(n)),i=Array.from(z.positions(e,{at:n})),o=0,s=i.length,a=Math.floor(s/2);if(DT(e,z.range(e,i[o]),r))return z.range(e,i[o],r);if(i.length<2)return z.range(e,i[i.length-1],r);for(;a!==i.length&&a!==o;)DT(e,z.range(e,i[a]),r)?s=a:o=a,a=Math.floor((o+s)/2);return z.range(e,i[o],r)};function AT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function BT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?AT(Object(r),!0).forEach(function(i){ZE(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var xN=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",i=n,{apply:o,onChange:s,deleteBackward:a,addMark:u,removeMark:f}=i;return ow.set(i,new WeakMap),i.addMark=(d,g)=>{var p,y;(p=QE.get(i))===null||p===void 0||p(),!sa.get(i)&&(y=yo.get(i))!==null&&y!==void 0&&y.length&&sa.set(i,null),zl.delete(i),u(d,g)},i.removeMark=d=>{var g;!sa.get(i)&&(g=yo.get(i))!==null&&g!==void 0&&g.length&&sa.set(i,null),zl.delete(i),f(d)},i.deleteBackward=d=>{if(d!=="line")return a(d);if(i.selection&&ke.isCollapsed(i.selection)){var g=z.above(i,{match:E=>dt.isElement(E)&&z.isBlock(i,E),at:i.selection});if(g){var[,p]=g,y=z.range(i,p,i.selection.anchor),w=wN(i,y);ke.isCollapsed(w)||He.delete(i,{at:w})}}},i.apply=d=>{var g=[],p=[],y=yo.get(i);if(y!=null&&y.length){var w=y.map(ye=>yN(ye,d)).filter(Boolean);yo.set(i,w)}var E=Qu.get(i);E&&Qu.set(i,ST(i,E,d));var S=Zu.get(i);if(S!=null&&S.at){var D=Cn.isPoint(S==null?void 0:S.at)?BC(i,S.at,d):ST(i,S.at,d);Zu.set(i,D?BT(BT({},S),{},{at:D}):null)}switch(d.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{g.push(...$d(i,d.path));break}case"set_selection":{var A;(A=Rp.get(i))===null||A===void 0||A.unref(),Rp.delete(i);break}case"insert_node":case"remove_node":{g.push(...$d(i,oe.parent(d.path)));break}case"merge_node":{var P=oe.previous(d.path);g.push(...$d(i,P));break}case"move_node":{var b=oe.common(oe.parent(d.path),oe.parent(d.newPath));g.push(...$d(i,b));var R;oe.isBefore(d.path,d.newPath)?(g.push(...$d(i,oe.parent(d.path))),R=d.newPath):(g.push(...$d(i,oe.parent(d.newPath))),R=d.path);var L=Je.get(n,oe.parent(R)),V=Xt.findKey(i,L),Z=z.pathRef(i,oe.parent(R));p.push([Z,V]);break}}switch(o(d),d.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":sg.set(i,!0)}for(var[ne,le]of g){var[de]=z.node(i,ne);py.set(de,le)}for(var[Pe,ue]of p){if(Pe.current){var[he]=z.node(i,Pe.current);py.set(he,ue)}Pe.unref()}},i.setFragmentData=d=>{var{selection:g}=i;if(g){var[p,y]=ke.edges(g),w=z.void(i,{at:p.path}),E=z.void(i,{at:y.path});if(!(ke.isCollapsed(g)&&!w)){var S=Xt.toDOMRange(i,g),D=S.cloneContents(),A=D.childNodes[0];if(D.childNodes.forEach(de=>{de.textContent&&de.textContent.trim()!==""&&(A=de)}),E){var[P]=E,b=S.cloneRange(),R=Xt.toDOMNode(i,P);b.setEndAfter(R),D=b.cloneContents()}if(w&&(A=D.querySelector("[data-slate-spacer]")),Array.from(D.querySelectorAll("[data-slate-zero-width]")).forEach(de=>{var Pe=de.getAttribute("data-slate-zero-width")==="n";de.textContent=Pe?`
`:""}),N7(A)){var L=A.ownerDocument.createElement("span");L.style.whiteSpace="pre",L.appendChild(A),D.appendChild(L),A=L}var V=i.getFragment(),Z=JSON.stringify(V),ne=window.btoa(encodeURIComponent(Z));A.setAttribute("data-slate-fragment",ne),d.setData("application/".concat(r),ne);var le=D.ownerDocument.createElement("div");return le.appendChild(D),le.setAttribute("hidden","true"),D.ownerDocument.body.appendChild(le),d.setData("text/html",le.innerHTML),d.setData("text/plain",G7(le)),D.ownerDocument.body.removeChild(le),d}}},i.insertData=d=>{i.insertFragmentData(d)||i.insertTextData(d)},i.insertFragmentData=d=>{var g=d.getData("application/".concat(r))||eN(d);if(g){var p=decodeURIComponent(window.atob(g)),y=JSON.parse(p);return i.insertFragment(y),!0}return!1},i.insertTextData=d=>{var g=d.getData("text/plain");if(g){var p=g.split(/\r\n|\r|\n/),y=!1;for(var w of p)y&&He.splitNodes(i,{always:!0}),i.insertText(w),y=!0;return!0}return!1},i.onChange=d=>{var g=DC.get(i);g&&g(d),s(d)},i},$d=(e,n)=>{var r=[];for(var[i,o]of z.levels(e,{at:n})){var s=Xt.findKey(e,i);r.push([o,s])}return r},CN=3,EN={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},PN={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},SN={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},nr=e=>{var n=EN[e],r=PN[e],i=SN[e],o=n&&on.isHotkey(n),s=r&&on.isHotkey(r),a=i&&on.isHotkey(i);return u=>!!(o&&o(u)||ET&&s&&s(u)||!ET&&a&&a(u))},lr={isBold:nr("bold"),isCompose:nr("compose"),isMoveBackward:nr("moveBackward"),isMoveForward:nr("moveForward"),isDeleteBackward:nr("deleteBackward"),isDeleteForward:nr("deleteForward"),isDeleteLineBackward:nr("deleteLineBackward"),isDeleteLineForward:nr("deleteLineForward"),isDeleteWordBackward:nr("deleteWordBackward"),isDeleteWordForward:nr("deleteWordForward"),isExtendBackward:nr("extendBackward"),isExtendForward:nr("extendForward"),isExtendLineBackward:nr("extendLineBackward"),isExtendLineForward:nr("extendLineForward"),isItalic:nr("italic"),isMoveLineBackward:nr("moveLineBackward"),isMoveLineForward:nr("moveLineForward"),isMoveWordBackward:nr("moveWordBackward"),isMoveWordForward:nr("moveWordForward"),isRedo:nr("redo"),isSoftBreak:nr("insertSoftBreak"),isSplitBlock:nr("splitBlock"),isTransposeCharacter:nr("transposeCharacter"),isUndo:nr("undo")};function TN(e,n){if(e==null)return{};var r={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(n.indexOf(o)>=0)&&(r[o]=e[o]);return r}function MT(e,n){if(e==null)return{};var r=TN(e,n),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var DN=["anchor","focus"],AN=["anchor","focus"];function RT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function kT(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?RT(Object(r),!0).forEach(function(i){ZE(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var BN=(e,n)=>Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every(r=>n.hasOwnProperty(r)&&e[r]===n[r]),K7=(e,n)=>{var r=MT(e,DN),i=MT(n,AN);return e[mg]===n[mg]&&BN(r,i)},JE=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],o=n[r];if(!ke.equals(i,o)||!K7(i,o))return!1}return!0},q7=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],o=n[r];if(i.anchor.offset!==o.anchor.offset||i.focus.offset!==o.focus.offset||!K7(i,o))return!1}return!0},MN=(e,n,r)=>{var i=Array.from(n.children,()=>[]);if(r.length===0)return i;var o=Xt.findPath(e,n),s=o.length,a=z.range(e,o),u=new Array(n.children.length),f=b=>{var R=u[b];if(R)return R;var L=z.range(e,[...o,b]);return u[b]=L,L};for(var d of r){var g=ke.intersection(a,d);if(g)for(var[p,y]=ke.edges(g),w=p.path[s],E=y.path[s],S=w;S<=E;S++){var D=i[S];if(D){var A=f(S),P=ke.intersection(A,d);P&&D.push(kT(kT({},d),P))}}}return i},jf=[],RN=function(){return jf.some(function(e){return e.activeTargets.length>0})},kN=function(){return jf.some(function(e){return e.skippedTargets.length>0})},bT="ResizeObserver loop completed with undelivered notifications.",bN=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:bT}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=bT),window.dispatchEvent(e)},Kp;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Kp||(Kp={}));var zf=function(e){return Object.freeze(e)},ON=function(){function e(n,r){this.inlineSize=n,this.blockSize=r,zf(this)}return e}(),Y7=function(){function e(n,r,i,o){return this.x=n,this.y=r,this.width=i,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,zf(this)}return e.prototype.toJSON=function(){var n=this,r=n.x,i=n.y,o=n.top,s=n.right,a=n.bottom,u=n.left,f=n.width,d=n.height;return{x:r,y:i,top:o,right:s,bottom:a,left:u,width:f,height:d}},e.fromRect=function(n){return new e(n.x,n.y,n.width,n.height)},e}(),e3=function(e){return e instanceof SVGElement&&"getBBox"in e},Z7=function(e){if(e3(e)){var n=e.getBBox(),r=n.width,i=n.height;return!r&&!i}var o=e,s=o.offsetWidth,a=o.offsetHeight;return!(s||a||e.getClientRects().length)},OT=function(e){var n;if(e instanceof Element)return!0;var r=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},IN=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},kp=typeof window<"u"?window:{},pv=new WeakMap,IT=/auto|scroll/,FN=/^tb|vertical/,LN=/msie|trident/i.test(kp.navigator&&kp.navigator.userAgent),Ha=function(e){return parseFloat(e||"0")},ag=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=!1),new ON((r?n:e)||0,(r?e:n)||0)},FT=zf({devicePixelContentBoxSize:ag(),borderBoxSize:ag(),contentBoxSize:ag(),contentRect:new Y7(0,0,0,0)}),Q7=function(e,n){if(n===void 0&&(n=!1),pv.has(e)&&!n)return pv.get(e);if(Z7(e))return pv.set(e,FT),FT;var r=getComputedStyle(e),i=e3(e)&&e.ownerSVGElement&&e.getBBox(),o=!LN&&r.boxSizing==="border-box",s=FN.test(r.writingMode||""),a=!i&&IT.test(r.overflowY||""),u=!i&&IT.test(r.overflowX||""),f=i?0:Ha(r.paddingTop),d=i?0:Ha(r.paddingRight),g=i?0:Ha(r.paddingBottom),p=i?0:Ha(r.paddingLeft),y=i?0:Ha(r.borderTopWidth),w=i?0:Ha(r.borderRightWidth),E=i?0:Ha(r.borderBottomWidth),S=i?0:Ha(r.borderLeftWidth),D=p+d,A=f+g,P=S+w,b=y+E,R=u?e.offsetHeight-b-e.clientHeight:0,L=a?e.offsetWidth-P-e.clientWidth:0,V=o?D+P:0,Z=o?A+b:0,ne=i?i.width:Ha(r.width)-V-L,le=i?i.height:Ha(r.height)-Z-R,de=ne+D+L+P,Pe=le+A+R+b,ue=zf({devicePixelContentBoxSize:ag(Math.round(ne*devicePixelRatio),Math.round(le*devicePixelRatio),s),borderBoxSize:ag(de,Pe,s),contentBoxSize:ag(ne,le,s),contentRect:new Y7(p,f,ne,le)});return pv.set(e,ue),ue},J7=function(e,n,r){var i=Q7(e,r),o=i.borderBoxSize,s=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(n){case Kp.DEVICE_PIXEL_CONTENT_BOX:return a;case Kp.BORDER_BOX:return o;default:return s}},_N=function(){function e(n){var r=Q7(n);this.target=n,this.contentRect=r.contentRect,this.borderBoxSize=zf([r.borderBoxSize]),this.contentBoxSize=zf([r.contentBoxSize]),this.devicePixelContentBoxSize=zf([r.devicePixelContentBoxSize])}return e}(),e8=function(e){if(Z7(e))return 1/0;for(var n=0,r=e.parentNode;r;)n+=1,r=r.parentNode;return n},NN=function(){var e=1/0,n=[];jf.forEach(function(a){if(a.activeTargets.length!==0){var u=[];a.activeTargets.forEach(function(d){var g=new _N(d.target),p=e8(d.target);u.push(g),d.lastReportedSize=J7(d.target,d.observedBox),p<e&&(e=p)}),n.push(function(){a.callback.call(a.observer,u,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,i=n;r<i.length;r++){var o=i[r];o()}return e},LT=function(e){jf.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(e8(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})},HN=function(){var e=0;for(LT(e);RN();)e=NN(),LT(e);return kN()&&bN(),e>0},lx,t8=[],GN=function(){return t8.splice(0).forEach(function(e){return e()})},jN=function(e){if(!lx){var n=0,r=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return GN()}).observe(r,i),lx=function(){r.textContent="".concat(n?n--:n++)}}t8.push(e),lx()},zN=function(e){jN(function(){requestAnimationFrame(e)})},Wv=0,$N=function(){return!!Wv},WN=250,VN={attributes:!0,characterData:!0,childList:!0,subtree:!0},_T=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],NT=function(e){return e===void 0&&(e=0),Date.now()+e},ux=!1,UN=function(){function e(){var n=this;this.stopped=!0,this.listener=function(){return n.schedule()}}return e.prototype.run=function(n){var r=this;if(n===void 0&&(n=WN),!ux){ux=!0;var i=NT(n);zN(function(){var o=!1;try{o=HN()}finally{if(ux=!1,n=i-NT(),!$N())return;o?r.run(1e3):n>0?r.run(n):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var n=this,r=function(){return n.observer&&n.observer.observe(document.body,VN)};document.body?r():kp.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var n=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),_T.forEach(function(r){return kp.addEventListener(r,n.listener,!0)}))},e.prototype.stop=function(){var n=this;this.stopped||(this.observer&&this.observer.disconnect(),_T.forEach(function(r){return kp.removeEventListener(r,n.listener,!0)}),this.stopped=!0)},e}(),MC=new UN,HT=function(e){!Wv&&e>0&&MC.start(),Wv+=e,!Wv&&MC.stop()},XN=function(e){return!e3(e)&&!IN(e)&&getComputedStyle(e).display==="inline"},KN=function(){function e(n,r){this.target=n,this.observedBox=r||Kp.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var n=J7(this.target,this.observedBox,!0);return XN(this.target)&&(this.lastReportedSize=n),this.lastReportedSize.inlineSize!==n.inlineSize||this.lastReportedSize.blockSize!==n.blockSize},e}(),qN=function(){function e(n,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=n,this.callback=r}return e}(),mv=new WeakMap,GT=function(e,n){for(var r=0;r<e.length;r+=1)if(e[r].target===n)return r;return-1},vv=function(){function e(){}return e.connect=function(n,r){var i=new qN(n,r);mv.set(n,i)},e.observe=function(n,r,i){var o=mv.get(n),s=o.observationTargets.length===0;GT(o.observationTargets,r)<0&&(s&&jf.push(o),o.observationTargets.push(new KN(r,i&&i.box)),HT(1),MC.schedule())},e.unobserve=function(n,r){var i=mv.get(n),o=GT(i.observationTargets,r),s=i.observationTargets.length===1;o>=0&&(s&&jf.splice(jf.indexOf(i),1),i.observationTargets.splice(o,1),HT(-1))},e.disconnect=function(n){var r=this,i=mv.get(n);i.observationTargets.slice().forEach(function(o){return r.unobserve(n,o.target)}),i.activeTargets.splice(0,i.activeTargets.length)},e}(),YN=function(){function e(n){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof n!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");vv.connect(this,n)}return e.prototype.observe=function(n,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!OT(n))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");vv.observe(this,n,r)},e.prototype.unobserve=function(n){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!OT(n))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");vv.unobserve(this,n)},e.prototype.disconnect=function(){vv.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),t3=cA();const ZN=vc(t3);function QN(e,n){if(e==null)return{};var r={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(n.indexOf(o)>=0)&&(r[o]=e[o]);return r}function my(e,n){if(e==null)return{};var r=QN(e,n),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qp(e)}function JN(e,n){if(qp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(qp(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function eH(e){var n=JN(e,"string");return qp(n)==="symbol"?n:String(n)}function rr(e,n,r){return n=eH(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var n3=K.createContext(null),il=()=>{var e=K.useContext(n3);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Ke=Xt;function jT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function yv(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?jT(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var tH=25,nH=200,rH=function(){},iH=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function oH(e){var{editor:n,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:i}=e,o=!1,s=null,a=null,u=null,f=0,d=!1,g=()=>{var ue=Qu.get(n);if(Qu.delete(n),ue){var{selection:he}=n,ye=PT(n,ue);ye&&(!he||!ke.equals(ye,he))&&He.select(n,ye)}},p=()=>{var ue=Zu.get(n);if(Zu.delete(n),!!ue){if(ue.at){var he=Cn.isPoint(ue.at)?AC(n,ue.at):PT(n,ue.at);if(!he)return;var ye=z.range(n,he);(!n.selection||!ke.equals(n.selection,ye))&&He.select(n,he)}ue.run()}},y=()=>{if(a&&(clearTimeout(a),a=null),u&&(clearTimeout(u),u=null),!R()&&!b()){g();return}o||(o=!0,setTimeout(()=>o=!1)),b()&&(o="action");var ue=n.selection&&z.rangeRef(n,n.selection,{affinity:"forward"});zl.set(n,n.marks),rH("flush",Zu.get(n),yo.get(n));for(var he=R(),ye;ye=(W=yo.get(n))===null||W===void 0?void 0:W[0];){var W,O,N=sa.get(n);N!==void 0&&(sa.delete(n),n.marks=N),N&&d===!1&&(d=null);var F=vN(ye);(!n.selection||!ke.equals(n.selection,F))&&He.select(n,F),ye.diff.text?z.insertText(n,ye.diff.text):z.deleteFragment(n),yo.set(n,(O=yo.get(n))===null||O===void 0?void 0:O.filter(I=>{var{id:Q}=I;return Q!==ye.id})),dN(n,ye)||(he=!1,Zu.delete(n),zl.delete(n),o="action",Qu.delete(n),r.cancel(),i.cancel(),ue==null||ue.unref())}var j=ue==null?void 0:ue.unref();if(j&&!Qu.get(n)&&(!n.selection||!ke.equals(j,n.selection))&&He.select(n,j),b()){p();return}he&&r(),r.flush(),i.flush(),g();var U=zl.get(n);zl.delete(n),U!==void 0&&(n.marks=U,n.onChange())},w=ue=>{s&&clearTimeout(s),s=setTimeout(()=>{If.set(n,!1),y()},tH)},E=ue=>{If.set(n,!0),s&&(clearTimeout(s),s=null)},S=function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ye=SC.get(n);if(ye){if(R()||he){ye.style.display="none";return}ye.style.removeProperty("display")}},D=(ue,he)=>{var ye,W=(ye=yo.get(n))!==null&&ye!==void 0?ye:[];yo.set(n,W);var O=Je.leaf(n,ue),N=W.findIndex(U=>oe.equals(U.path,ue));if(N<0){var F=X7(O.text,he);F&&W.push({path:ue,diff:he,id:f++}),S();return}var j=mN(O.text,W[N].diff,he);if(!j){W.splice(N,1),S();return}W[N]=yv(yv({},W[N]),{},{diff:j})},A=function(he){var{at:ye}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d=!1,Qu.delete(n),r.cancel(),i.cancel(),b()&&y(),Zu.set(n,{at:ye,run:he}),u=setTimeout(y)},P=ue=>{var he;if(a&&(clearTimeout(a),a=null),!sg.get(n)){var{inputType:ye}=ue,W=null,O=ue.dataTransfer||ue.data||void 0;d!==!1&&ye!=="insertText"&&ye!=="insertCompositionText"&&(d=!1);var[N]=ue.getTargetRanges();N&&(W=Ke.toSlateRange(n,N,{exactMatch:!1,suppressThrow:!0}));var F=Ke.getWindow(n),j=F.getSelection();if(!W&&j&&(N=j,W=Ke.toSlateRange(n,j,{exactMatch:!1,suppressThrow:!0})),W=(he=W)!==null&&he!==void 0?he:n.selection,!!W){var U=!0;if(ye.startsWith("delete")){if(ke.isExpanded(W)){var[I,Q]=ke.edges(W),ee=Je.leaf(n,I.path);if(ee.text.length===I.offset&&Q.offset===0){var se=z.next(n,{at:I.path,match:at.isText});se&&oe.equals(se[1],Q.path)&&(W={anchor:Q,focus:Q})}}var Ee=ye.endsWith("Backward")?"backward":"forward",[ve,be]=ke.edges(W),[Oe,ie]=z.leaf(n,ve.path),De={text:"",start:ve.offset,end:be.offset},Re=yo.get(n),Ie=Re==null?void 0:Re.find(En=>oe.equals(En.path,ie)),ct=Ie?[Ie.diff,De]:[De],Ne=U7(Oe.text,...ct);if(Ne.length===0&&(U=!1),ke.isExpanded(W)){if(U&&oe.equals(W.anchor.path,W.focus.path)){var yt={path:W.anchor.path,offset:ve.offset},lt=z.range(n,yt,yt);return Z(lt),D(W.anchor.path,{text:"",end:be.offset,start:ve.offset})}return A(()=>z.deleteFragment(n,{direction:Ee}),{at:W})}}switch(ye){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return A(()=>z.deleteFragment(n),{at:W});case"deleteContent":case"deleteContentForward":{var{anchor:Qe}=W;if(U&&ke.isCollapsed(W)){var St=Je.leaf(n,Qe.path);if(Qe.offset<St.text.length)return D(Qe.path,{text:"",start:Qe.offset,end:Qe.offset+1})}return A(()=>z.deleteForward(n),{at:W})}case"deleteContentBackward":{var ft,{anchor:Ot}=W,mt=PC(N)?N.isCollapsed:!!((ft=N)!==null&&ft!==void 0&&ft.collapsed);return U&&mt&&ke.isCollapsed(W)&&Ot.offset>0?D(Ot.path,{text:"",start:Ot.offset-1,end:Ot.offset}):A(()=>z.deleteBackward(n),{at:W})}case"deleteEntireSoftLine":return A(()=>{z.deleteBackward(n,{unit:"line"}),z.deleteForward(n,{unit:"line"})},{at:W});case"deleteHardLineBackward":return A(()=>z.deleteBackward(n,{unit:"block"}),{at:W});case"deleteSoftLineBackward":return A(()=>z.deleteBackward(n,{unit:"line"}),{at:W});case"deleteHardLineForward":return A(()=>z.deleteForward(n,{unit:"block"}),{at:W});case"deleteSoftLineForward":return A(()=>z.deleteForward(n,{unit:"line"}),{at:W});case"deleteWordBackward":return A(()=>z.deleteBackward(n,{unit:"word"}),{at:W});case"deleteWordForward":return A(()=>z.deleteForward(n,{unit:"word"}),{at:W});case"insertLineBreak":return A(()=>z.insertSoftBreak(n),{at:W});case"insertParagraph":return A(()=>z.insertBreak(n),{at:W});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(iH(O))return A(()=>Ke.insertData(n,O),{at:W});var Ut=O??"";if(sa.get(n)&&(Ut=Ut.replace("\uFEFF","")),ye==="insertText"&&/.*\n.*\n$/.test(Ut)&&(Ut=Ut.slice(0,-1)),Ut.includes(`
`))return A(()=>{var En=Ut.split(`
`);En.forEach((In,_r)=>{In&&z.insertText(n,In),_r!==En.length-1&&z.insertSoftBreak(n)})},{at:W});if(oe.equals(W.anchor.path,W.focus.path)){var[Gn,Ar]=ke.edges(W),Fn={start:Gn.offset,end:Ar.offset,text:Ut};if(Ut&&d&&ye==="insertCompositionText"){var wi=d.start+d.text.search(/\S|$/),mr=Fn.start+Fn.text.search(/\S|$/);mr===wi+1&&Fn.end===d.start+d.text.length?(Fn.start-=1,d=null,de()):d=!1}else ye==="insertText"?d===null?d=Fn:d&&ke.isCollapsed(W)&&d.end+d.text.length===Gn.offset?d=yv(yv({},d),{},{text:d.text+Ut}):d=!1:d=!1;if(U){D(Gn.path,Fn);return}}return A(()=>z.insertText(n,Ut),{at:W})}}}}},b=()=>!!Zu.get(n),R=()=>{var ue;return!!((ue=yo.get(n))!==null&&ue!==void 0&&ue.length)},L=()=>b()||R(),V=()=>o,Z=ue=>{Qu.set(n,ue),a&&(clearTimeout(a),a=null);var{selection:he}=n;if(ue){var ye=!he||!oe.equals(he.anchor.path,ue.anchor.path),W=!he||!oe.equals(he.anchor.path.slice(0,-1),ue.anchor.path.slice(0,-1));(ye&&d||W)&&(d=!1),(ye||R())&&(a=setTimeout(y,nH))}},ne=()=>{(b()||!R())&&y()},le=ue=>{R()||(S(!0),setTimeout(S))},de=()=>{b()||(u=setTimeout(y))},Pe=ue=>{if(!(R()||b())&&ue.some(ye=>YE(n,ye,ue))){var he;(he=W7.get(n))===null||he===void 0||he()}};return{flush:y,scheduleFlush:de,hasPendingDiffs:R,hasPendingAction:b,hasPendingChanges:L,isFlushing:V,handleUserSelect:Z,handleCompositionEnd:w,handleCompositionStart:E,handleDOMBeforeInput:P,handleKeyDown:le,handleDomMutations:Pe,handleInput:ne}}function sH(){var e=K.useRef(!1);return K.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var Jl=zv?K.useLayoutEffect:K.useEffect;function aH(e,n,r){var[i]=K.useState(()=>new MutationObserver(n));Jl(()=>{i.takeRecords()}),K.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return i.observe(e.current,r),()=>i.disconnect()},[i,e,r])}var lH=["node"];function zT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function uH(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?zT(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var cH={subtree:!0,childList:!0,characterData:!0},fH=Ui?e=>{var{node:n}=e,r=my(e,lH);if(!Ui)return null;var i=il(),o=sH(),[s]=K.useState(()=>oH(uH({editor:i},r)));return aH(n,s.handleDomMutations,cH),QE.set(i,s.scheduleFlush),o&&s.flush(),s}:()=>null;function $T(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function hH(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?$T(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$T(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var dH=e=>{var{isLast:n,leaf:r,parent:i,text:o}=e,s=il(),a=Ke.findPath(s,o),u=oe.parent(a),f=!!r[V7];return s.isVoid(i)?Bt.createElement(cx,{length:Je.string(i).length}):r.text===""&&i.children[i.children.length-1]===o&&!s.isInline(i)&&z.string(s,u)===""?Bt.createElement(cx,{isLineBreak:!0,isMarkPlaceholder:f}):r.text===""?Bt.createElement(cx,{isMarkPlaceholder:f}):n&&r.text.slice(-1)===`
`?Bt.createElement(WT,{isTrailing:!0,text:r.text}):Bt.createElement(WT,{text:r.text})},WT=e=>{var{text:n,isTrailing:r=!1}=e,i=K.useRef(null),o=()=>"".concat(n??"").concat(r?`
`:""),[s]=K.useState(o);return Jl(()=>{var a=o();i.current&&i.current.textContent!==a&&(i.current.textContent=a)}),Bt.createElement(gH,{ref:i},s)},gH=K.memo(K.forwardRef((e,n)=>Bt.createElement("span",{"data-slate-string":!0,ref:n},e.children))),cx=e=>{var{length:n=0,isLineBreak:r=!1,isMarkPlaceholder:i=!1}=e,o={"data-slate-zero-width":r?"n":"z","data-slate-length":n};return i&&(o["data-slate-mark-placeholder"]=!0),Bt.createElement("span",hH({},o),!Ui||!r?"\uFEFF":null,r?Bt.createElement("br",null):null)};function VT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function n8(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?VT(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var pH=Ui?300:0;function mH(e,n){e.current&&(e.current.disconnect(),n&&(e.current=null))}function UT(e){e.current&&(clearTimeout(e.current),e.current=null)}var vH=e=>Bt.createElement(xH,n8({},e)),yH=e=>{var{leaf:n,isLast:r,text:i,parent:o,renderPlaceholder:s,renderLeaf:a=vH,leafPosition:u}=e,f=il(),d=K.useRef(null),g=K.useRef(null),[p,y]=K.useState(!1),w=K.useRef(null),E=K.useCallback(b=>{if(mH(d,b==null),b==null){var R;SC.delete(f),(R=n.onPlaceholderResize)===null||R===void 0||R.call(n,null)}else{if(SC.set(f,b),!d.current){var L=window.ResizeObserver||YN;d.current=new L(()=>{var V;(V=n.onPlaceholderResize)===null||V===void 0||V.call(n,b)})}d.current.observe(b),g.current=b}},[g,n,f]),S=Bt.createElement(dH,{isLast:r,leaf:n,parent:o,text:i}),D=!!n[mg];if(K.useEffect(()=>(D?w.current||(w.current=setTimeout(()=>{y(!0),w.current=null},pH)):(UT(w),y(!1)),()=>UT(w)),[D,y]),D&&p){var A={children:n.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Rf?"inherit":void 0},contentEditable:!1,ref:E}};S=Bt.createElement(Bt.Fragment,null,S,s(A))}var P={"data-slate-leaf":!0};return a({attributes:P,children:S,leaf:n,text:i,leafPosition:u})},wH=Bt.memo(yH,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&at.equals(n.leaf,e.leaf)&&n.leaf[mg]===e.leaf[mg]),xH=e=>{var{attributes:n,children:r}=e;return Bt.createElement("span",n8({},n),r)};function CH(e,n){var[,r]=K.useReducer(d=>d+1,0),i=K.useRef(),o=K.useRef(()=>null),s=K.useRef(null),a;try{if(e!==o.current||i.current){var u=e();n(s.current,u)?a=s.current:a=u}else a=s.current}catch(d){throw i.current&&EH(d)&&(d.message+=`
The error may be correlated with this previous error:
`.concat(i.current.stack,`

`)),d}o.current=e,s.current=a,i.current=void 0;var f=K.useCallback(()=>{try{var d=o.current();if(n(s.current,d))return;s.current=d}catch(g){g instanceof Error?i.current=g:i.current=new Error(String(g))}r()},[]);return[a,f]}function EH(e){return e instanceof Error}var r8=K.createContext({}),i8=(e,n)=>{var r=il(),{decorate:i,addEventListener:o}=K.useContext(r8),s=()=>{var d=Ke.findPath(r,e);return i([e,d])},a=at.isText(e)?q7:JE,[u,f]=CH(s,a);return Jl(()=>{var d=o(f);return f(),d},[o,f]),K.useMemo(()=>[...u,...n],[u,n])},PH=e=>{var n=K.useRef(new Set),r=K.useRef(e);Jl(()=>{r.current=e,n.current.forEach(s=>s())},[e]);var i=K.useCallback(s=>r.current(s),[]),o=K.useCallback(s=>(n.current.add(s),()=>{n.current.delete(s)}),[]);return K.useMemo(()=>({decorate:i,addEventListener:o}),[i,o])};function XT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function o8(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?XT(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var SH=e=>Bt.createElement(DH,o8({},e)),TH=e=>{for(var{decorations:n,isLast:r,parent:i,renderPlaceholder:o,renderLeaf:s,renderText:a=SH,text:u}=e,f=il(),d=K.useRef(null),g=i8(u,n),p=at.decorations(u,g),y=Ke.findKey(f,u),w=[],E=0;E<p.length;E++){var{leaf:S,position:D}=p[E];w.push(Bt.createElement(wH,{isLast:r&&E===p.length-1,key:"".concat(y.id,"-").concat(E),renderPlaceholder:o,leaf:S,leafPosition:D,text:u,parent:i,renderLeaf:s}))}var A=K.useCallback(b=>{var R=ow.get(f);b?(R==null||R.set(y,b),Gf.set(u,b),Xp.set(b,u)):(R==null||R.delete(y),Gf.delete(u),d.current&&Xp.delete(d.current)),d.current=b},[d,f,y,u]),P={"data-slate-node":"text",ref:A};return a({text:u,children:w,attributes:P})},s8=Bt.memo(TH,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderText===e.renderText&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&q7(n.decorations,e.decorations)),DH=e=>{var{attributes:n,children:r}=e;return Bt.createElement("span",o8({},n),r)};function KT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function RC(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?KT(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var AH=e=>Bt.createElement(RH,RC({},e)),BH=e=>{var{decorations:n,element:r,renderElement:i=AH,renderChunk:o,renderPlaceholder:s,renderLeaf:a,renderText:u}=e,f=il(),d=GH(),g=f.isInline(r),p=i8(r,n),y=Ke.findKey(f,r),w=K.useCallback(R=>{var L=ow.get(f);R?(L==null||L.set(y,R),Gf.set(r,R),Xp.set(R,r)):(L==null||L.delete(y),Gf.delete(r))},[f,y,r]),E=u8({decorations:p,node:r,renderElement:i,renderChunk:o,renderPlaceholder:s,renderLeaf:a,renderText:u}),S={"data-slate-node":"element",ref:w};if(g&&(S["data-slate-inline"]=!0),!g&&z.hasInlines(f,r)){var D=Je.string(r),A=L7(D);A==="rtl"&&(S.dir=A)}if(z.isVoid(f,r)){S["data-slate-void"]=!0,!d&&g&&(S.contentEditable=!1);var P=g?"span":"div",[[b]]=Je.texts(r);E=Bt.createElement(P,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Bt.createElement(s8,{renderPlaceholder:s,decorations:[],isLast:!1,parent:r,text:b})),eg.set(b,0),Mp.set(b,r)}return i({attributes:S,children:E,element:r})},MH=Bt.memo(BH,(e,n)=>e.element===n.element&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&e.renderText===n.renderText&&e.renderLeaf===n.renderLeaf&&e.renderPlaceholder===n.renderPlaceholder&&JE(e.decorations,n.decorations)),RH=e=>{var{attributes:n,children:r,element:i}=e,o=il(),s=o.isInline(i)?"span":"div";return Bt.createElement(s,RC(RC({},n),{},{style:{position:"relative"}}),r)};class kH{constructor(n,r){var{chunkSize:i,debug:o}=r;rr(this,"root",void 0),rr(this,"chunkSize",void 0),rr(this,"debug",void 0),rr(this,"reachedEnd",void 0),rr(this,"pointerChunk",void 0),rr(this,"pointerIndex",void 0),rr(this,"pointerIndexStack",void 0),rr(this,"cachedPointerNode",void 0),this.root=n,this.chunkSize=i,this.debug=o??!1,this.pointerChunk=n,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(n){this.returnToPreviousLeaf(),this.insertAfter(n),this.readLeaf()}insertAfter(n){if(n.length!==0){for(var r=0,i=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var o=this.chunkSize-this.pointerSiblings.length,s=Math.min(o,n.length);if(s>0){var a=n.splice(0,s);this.rawInsertAfter(a,r)}this.exitChunk(),r++}if(n.length!==0){var u=this.savePointer(),f=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var d=this.chunkSize-this.pointerSiblings.length,g=Math.min(d,n.length);if(g>0){var p=n.splice(-g,g);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(p,i),f||(f=this.savePointer())}this.exitChunk(),i++}this.restorePointer(u);var y=Math.max(r,i);this.rawInsertAfter(n,y),f&&this.restorePointer(f),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var n=this.pointerChunk;n.type==="chunk";n=n.parent)this.root.modifiedChunks.add(n)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var n=this.getPointerNode();return this.cachedPointerNode=n,n}getChunkPath(n){for(var r=[],i=n;i.type==="chunk";i=i.parent){var o=i.parent.children.indexOf(i);if(o===-1)return null;r.unshift(o)}return r}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(n){if(n==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:r,node:i}=n,o=r.children.indexOf(i);if(o===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var s=this.getChunkPath(r);if(!s)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=r,this.pointerIndex=o,this.pointerIndexStack=s,this.reachedEnd=!1,this.cachedPointerNode=i,this.validateState()}enterChunk(n){var r;if(((r=this.pointerNode)===null||r===void 0?void 0:r.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=n?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(n){for(;((r=this.pointerNode)===null||r===void 0?void 0:r.type)==="chunk";){var r;this.enterChunk(n)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var n=this.pointerChunk;this.pointerChunk=n.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(n,r){if(n.length!==0){for(var i=(g,p,y)=>{if(y===1)return g;for(var w=[],E=0;E<this.chunkSize;E++){var S=g.slice(E*y,(E+1)*y);if(S.length===0)break;var D={type:"chunk",key:new z7,parent:p,children:[]};D.children=i(S,D,y/this.chunkSize),w.push(D)}return w},o=this.pointerSiblings.length+n.length,s=0,a=this.chunkSize;a<o;a*=this.chunkSize)s++;var u=Math.max(s,r),f=Math.pow(this.chunkSize,u),d=i(n,this.pointerChunk,f);this.pointerSiblings.splice(this.pointerIndex+1,0,...d),this.pointerIndex+=d.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var n=i=>{if(i.type==="chunk"){var{parent:o,children:s}=i;if(!o.children.includes(i))throw new Error("Debug: Chunk ".concat(i.key.id," has an incorrect parent property"));s.forEach(n)}};if(this.root.children.forEach(n),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var r=this.getChunkPath(this.pointerChunk);if(!r)throw new Error("Debug: The pointer chunk is not connected to the root");if(!oe.equals(this.pointerIndexStack,r))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(r.join(", "),"]"))}}}class bH{constructor(n,r){rr(this,"editor",void 0),rr(this,"children",void 0),rr(this,"cachedKeys",void 0),rr(this,"pointerIndex",void 0),this.editor=n,this.children=r,this.cachedKeys=new Array(r.length),this.pointerIndex=0}read(n){if(n===1)return[this.children[this.pointerIndex++]];var r=this.remaining(n);return this.pointerIndex+=n,r}remaining(n){return n===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+n)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(n,r){var i=this.children.indexOf(n,this.pointerIndex);if(i>-1)return i-this.pointerIndex;for(var o=this.pointerIndex;o<this.children.length;o++){var s=this.children[o],a=this.findKey(s,o);if(a===r)return o-this.pointerIndex}return-1}toChunkLeaves(n,r){return n.map((i,o)=>({type:"leaf",node:i,key:this.findKey(i,r+o),index:r+o}))}findKey(n,r){var i=this.cachedKeys[r];if(i)return i;var o=Ke.findKey(this.editor,n);return this.cachedKeys[r]=o,o}}var OH=(e,n)=>{var{chunkTree:r,children:i,chunkSize:o,rerenderChildren:s=[],onInsert:a,onUpdate:u,onIndexChange:f,debug:d}=n;r.modifiedChunks.clear();for(var g=new kH(r,{chunkSize:o,debug:d}),p=new bH(e,i),y,w=function(){var A=p.lookAhead(y.node,y.key),P=A>0&&r.movedNodeKeys.has(y.key);if(A===-1||P)return g.remove(),1;var b=p.pointerIndex,R=p.read(A+1),L=R.pop();if(R.length){var V=p.toChunkLeaves(R,b);g.insertBefore(V),R.forEach((ne,le)=>{a==null||a(ne,b+le)})}var Z=p.pointerIndex-1;y.node!==L&&(y.node=L,g.invalidateChunk(),u==null||u(L,Z)),y.index!==Z&&(y.index=Z,f==null||f(L,Z)),s.includes(Z)&&g.invalidateChunk()};y=g.readLeaf();)w();if(!p.reachedEnd){var E=p.remaining(),S=p.toChunkLeaves(E,p.pointerIndex);g.returnToPreviousLeaf(),g.insertAfter(S),E.forEach((D,A)=>{a==null||a(D,p.pointerIndex+A)})}r.movedNodeKeys.clear()};function qT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function IH(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?qT(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var YT=new WeakMap,a8=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Ke.findKey(n,r),s=YT.get(o);return s||(s={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},YT.set(o,s)),i.reconcile&&OH(n,IH({chunkTree:s,children:r.children},i.reconcile)),s},FH=e=>{var{children:n}=e;return n},l8=e=>{var{root:n,ancestor:r,renderElement:i,renderChunk:o=FH}=e;return r.children.map(s=>{if(s.type==="chunk"){var a=s.key.id,u=o({highest:r===n,lowest:s.children.some(d=>d.type==="leaf"),attributes:{"data-slate-chunk":!0},children:Bt.createElement(_H,{root:n,ancestor:s,renderElement:i,renderChunk:o})});return Bt.createElement(K.Fragment,{key:a},u)}var f=s.node;return i(f,s.index,s.key)})},LH=l8,_H=Bt.memo(l8,(e,n)=>e.root===n.root&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&!n.root.modifiedChunks.has(n.ancestor)),NH=K.createContext(null),u8=e=>{var{decorations:n,node:r,renderElement:i,renderChunk:o,renderPlaceholder:s,renderText:a,renderLeaf:u}=e,f=il();sg.set(f,!1);var d=z.isEditor(r),g=!d&&dt.isElement(r)&&!f.isInline(r),p=g&&z.hasInlines(f,r),y=p?null:f.getChunkSize(r),w=!!y,{decorationsByChild:E,childrenToRedecorate:S}=HH(f,r,n);w||r.children.forEach((b,R)=>{eg.set(b,R),Mp.set(b,r)});var D=K.useCallback((b,R,L)=>{var V=L??Ke.findKey(f,b);return Bt.createElement(NH.Provider,{key:"provider-".concat(V.id),value:b},Bt.createElement(MH,{decorations:E[R],element:b,key:V.id,renderElement:i,renderChunk:o,renderPlaceholder:s,renderLeaf:u,renderText:a}))},[f,E,i,o,s,u,a]),A=(b,R)=>{var L=Ke.findKey(f,b);return Bt.createElement(s8,{decorations:E[R],key:L.id,isLast:R===r.children.length-1,parent:r,renderPlaceholder:s,renderLeaf:u,renderText:a,text:b})};if(!w)return r.children.map((b,R)=>at.isText(b)?A(b,R):D(b,R));var P=a8(f,r,{reconcile:{chunkSize:y,rerenderChildren:S,onInsert:(b,R)=>{eg.set(b,R),Mp.set(b,r)},onUpdate:(b,R)=>{eg.set(b,R),Mp.set(b,r)},onIndexChange:(b,R)=>{eg.set(b,R)}}});return Bt.createElement(LH,{root:P,ancestor:P,renderElement:D,renderChunk:o})},HH=(e,n,r)=>{var i=MN(e,n,r),o=K.useRef(i).current,s=[];o.length=i.length;for(var a=0;a<i.length;a++){var u,f=i[a],d=(u=o[a])!==null&&u!==void 0?u:null;JE(d,f)||(o[a]=f,s.push(a))}return{decorationsByChild:o,childrenToRedecorate:s}},c8=K.createContext(!1),GH=()=>K.useContext(c8),r3=K.createContext({});function jH(){var e=K.useRef(new Set),n=K.useRef(new Set),r=K.useCallback(()=>{e.current.forEach(a=>a())},[]),i=K.useCallback(()=>{n.current.forEach(a=>a()),n.current.clear()},[]),o=K.useCallback(function(a){var{deferred:u=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=u?()=>n.current.add(a):a;return e.current.add(f),()=>{e.current.delete(f)}},[]),s=K.useMemo(()=>({addEventListener:o,flushDeferred:i}),[o,i]);return{selectorContext:s,onChange:r}}function zH(){var{flushDeferred:e}=K.useContext(r3);Jl(e)}var $H=()=>{var{addEventListener:e}=K.useContext(r3),[,n]=K.useReducer(r=>r+1,0);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return Jl(()=>e(n),[e]),il()};function WH(){var e=il(),n=K.useRef(!1),r=K.useRef(0),i=K.useCallback(()=>{if(!n.current){n.current=!0;var o=Ke.getWindow(e);o.cancelAnimationFrame(r.current),r.current=o.requestAnimationFrame(()=>{n.current=!1})}},[e]);return K.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:n,onUserInput:i}}var VH=(e,n)=>{var r=[],i=()=>{r=[]},o=a=>{if(n.current){var u=a.filter(f=>YE(e,f,a));r.push(...u)}};function s(){r.length>0&&(r.reverse().forEach(a=>{a.type!=="characterData"&&(a.removedNodes.forEach(u=>{a.target.insertBefore(u,a.nextSibling)}),a.addedNodes.forEach(u=>{a.target.removeChild(u)}))}),i())}return{registerMutations:o,restoreDOM:s,clear:i}},UH={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class f8 extends K.Component{constructor(){super(...arguments),rr(this,"context",null),rr(this,"manager",null),rr(this,"mutationObserver",null)}observe(){var n,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(n=this.mutationObserver)===null||n===void 0||n.observe(r.current,UH)}componentDidMount(){var{receivedUserInput:n}=this.props,r=this.context;this.manager=VH(r,n),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var n,r,i,o=(n=this.mutationObserver)===null||n===void 0?void 0:n.takeRecords();if(o!=null&&o.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(o)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(i=this.manager)===null||i===void 0||i.restoreDOM(),null}componentDidUpdate(){var n;(n=this.manager)===null||n===void 0||n.clear(),this.observe()}componentWillUnmount(){var n;(n=this.mutationObserver)===null||n===void 0||n.disconnect()}render(){return this.props.children}}rr(f8,"contextType",n3);var XH=Ui?f8:e=>{var{children:n}=e;return Bt.createElement(Bt.Fragment,null,n)},KH=K.createContext(!1),qH=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],YH=["text"];function ZT(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function za(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ZT(Object(r),!0).forEach(function(i){rr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZT(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var ZH=e=>Bt.createElement(Bt.Fragment,null,u8(e)),QH=K.forwardRef((e,n)=>{var r=K.useCallback(ie=>Bt.createElement(JH,za({},ie)),[]),{autoFocus:i,decorate:o=eG,onDOMBeforeInput:s,placeholder:a,readOnly:u=!1,renderElement:f,renderChunk:d,renderLeaf:g,renderText:p,renderPlaceholder:y=r,scrollSelectionIntoView:w=tG,style:E={},as:S="div",disableDefaultStyles:D=!1}=e,A=my(e,qH),P=$H(),[b,R]=K.useState(!1),L=K.useRef(null),V=K.useRef([]),[Z,ne]=K.useState(),le=K.useRef(!1),{onUserInput:de,receivedUserInput:Pe}=WH(),[,ue]=K.useReducer(ie=>ie+1,0);W7.set(P,ue),TC.set(P,u);var he=K.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);K.useEffect(()=>{L.current&&i&&L.current.focus()},[i]);var ye=K.useRef(),W=K.useMemo(()=>mF(()=>{if(sg.get(P)){W();return}var ie=Ke.toDOMNode(P,P),De=ie.getRootNode();if(!le.current&&Rf&&De instanceof ShadowRoot){le.current=!0;var Re=tN();Re?document.execCommand("indent"):He.deselect(P),le.current=!1;return}var Ie=ye.current;if((Ui||!Ke.isComposing(P))&&(!he.isUpdatingSelection||Ie!=null&&Ie.isFlushing())&&!he.isDraggingInternally){var ct=Ke.findDocumentOrShadowRoot(P),{activeElement:Ne}=ct,yt=Ke.toDOMNode(P,P),lt=Bp(ct);if(Ne===yt?(he.latestElement=Ne,tc.set(P,!0)):tc.delete(P),!lt)return He.deselect(P);var{anchorNode:Qe,focusNode:St}=lt,ft=Ke.hasEditableTarget(P,Qe)||Ke.isTargetInsideNonReadonlyVoid(P,Qe),Ot=Ke.hasTarget(P,St);if(ft&&Ot){var mt=Ke.toSlateRange(P,lt,{exactMatch:!1,suppressThrow:!0});mt&&(!Ke.isComposing(P)&&!(Ie!=null&&Ie.hasPendingChanges())&&!(Ie!=null&&Ie.isFlushing())?He.select(P,mt):Ie==null||Ie.handleUserSelect(mt))}u&&(!ft||!Ot)&&He.deselect(P)}},100),[P,u,he]),O=K.useMemo(()=>hF(W,0),[W]);ye.current=fH({node:L,onDOMSelectionChange:W,scheduleOnDOMSelectionChange:O}),Jl(()=>{var ie,De,Re;L.current&&(Re=qE(L.current))?($7.set(P,Re),$v.set(P,L.current),Gf.set(P,L.current),Xp.set(L.current,P)):Gf.delete(P);var{selection:Ie}=P,ct=Ke.findDocumentOrShadowRoot(P),Ne=Bp(ct);if(!(!Ne||!Ke.isFocused(P)||(ie=ye.current)!==null&&ie!==void 0&&ie.hasPendingAction())){var yt=ft=>{var Ot=Ne.type!=="None";if(!(!Ie&&!Ot)){var mt=Ne.focusNode,Ut;if(Jd&&Ne.rangeCount>1){var Gn=Ne.getRangeAt(0),Ar=Ne.getRangeAt(Ne.rangeCount-1);Gn.startContainer===mt?Ut=Ar.endContainer:Ut=Gn.startContainer}else Ut=Ne.anchorNode;var Fn=$v.get(P),wi=!1;if(Fn.contains(Ut)&&Fn.contains(mt)&&(wi=!0),Ot&&wi&&Ie&&!ft){var mr=Ke.toSlateRange(P,Ne,{exactMatch:!0,suppressThrow:!0});if(mr&&ke.equals(mr,Ie)){var En;if(!he.hasMarkPlaceholder||(En=Ut)!==null&&En!==void 0&&(En=En.parentElement)!==null&&En!==void 0&&En.hasAttribute("data-slate-mark-placeholder"))return}}if(Ie&&!Ke.hasRange(P,Ie)){P.selection=Ke.toSlateRange(P,Ne,{exactMatch:!1,suppressThrow:!0});return}he.isUpdatingSelection=!0;var In=null;try{In=Ie&&Ke.toDOMRange(P,Ie)}catch{}return In?(Ke.isComposing(P)&&!Ui?Ne.collapseToEnd():ke.isBackward(Ie)?Ne.setBaseAndExtent(In.endContainer,In.endOffset,In.startContainer,In.startOffset):Ne.setBaseAndExtent(In.startContainer,In.startOffset,In.endContainer,In.endOffset),w(P,In)):Ne.removeAllRanges(),In}};Ne.rangeCount<=1&&yt();var lt=((De=ye.current)===null||De===void 0?void 0:De.isFlushing())==="action";if(!Ui||!lt){setTimeout(()=>{he.isUpdatingSelection=!1});return}var Qe=null,St=requestAnimationFrame(()=>{if(lt){var ft=Ot=>{try{var mt=Ke.toDOMNode(P,P);mt.focus(),yt(Ot)}catch{}};ft(),Qe=setTimeout(()=>{ft(!0),he.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(St),Qe&&clearTimeout(Qe)}}});var N=K.useCallback(ie=>{JT(P,ie);var De=Ke.toDOMNode(P,P),Re=De.getRootNode();if(le!=null&&le.current&&Rf&&Re instanceof ShadowRoot){var Ie=ie.getTargetRanges(),ct=Ie[0],Ne=new window.Range;Ne.setStart(ct.startContainer,ct.startOffset),Ne.setEnd(ct.endContainer,ct.endOffset);var yt=Ke.toSlateRange(P,Ne,{exactMatch:!1,suppressThrow:!1});He.select(P,yt),ie.preventDefault(),ie.stopImmediatePropagation();return}if(de(),!u&&Ke.hasEditableTarget(P,ie.target)&&!nG(ie,s)){var lt;if(ye.current)return ye.current.handleDOMBeforeInput(ie);O.flush(),W.flush();var{selection:Qe}=P,{inputType:St}=ie,ft=ie.dataTransfer||ie.data||void 0,Ot=St==="insertCompositionText"||St==="deleteCompositionText";if(Ot&&Ke.isComposing(P))return;var mt=!1;if(St==="insertText"&&Qe&&ke.isCollapsed(Qe)&&ie.data&&ie.data.length===1&&/[a-z ]/i.test(ie.data)&&Qe.anchor.offset!==0&&(mt=!0,P.marks&&(mt=!1),!sg.get(P))){var Ut,Gn,{anchor:Ar}=Qe,[Fn,wi]=Ke.toDOMPoint(P,Ar),mr=(Ut=Fn.parentElement)===null||Ut===void 0?void 0:Ut.closest("a"),En=Ke.getWindow(P);if(mt&&mr&&Ke.hasDOMNode(P,mr)){var In,_r=En==null?void 0:En.document.createTreeWalker(mr,NodeFilter.SHOW_TEXT).lastChild();_r===Fn&&((In=_r.textContent)===null||In===void 0?void 0:In.length)===wi&&(mt=!1)}if(mt&&Fn.parentElement&&(En==null||(Gn=En.getComputedStyle(Fn.parentElement))===null||Gn===void 0?void 0:Gn.whiteSpace)==="pre"){var Ii=z.above(P,{at:Ar.path,match:Zi=>dt.isElement(Zi)&&z.isBlock(P,Zi)});Ii&&Je.string(Ii[0]).includes("	")&&(mt=!1)}}if((!St.startsWith("delete")||St.startsWith("deleteBy"))&&!sg.get(P)){var[Fs]=ie.getTargetRanges();if(Fs){var ts=Ke.toSlateRange(P,Fs,{exactMatch:!1,suppressThrow:!1});if(!Qe||!ke.equals(Qe,ts)){mt=!1;var Mo=!Ot&&P.selection&&z.rangeRef(P,P.selection);He.select(P,ts),Mo&&Rp.set(P,Mo)}}}if(Ot)return;if(mt||ie.preventDefault(),Qe&&ke.isExpanded(Qe)&&St.startsWith("delete")){var sl=St.endsWith("Backward")?"backward":"forward";z.deleteFragment(P,{direction:sl});return}switch(St){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{z.deleteFragment(P);break}case"deleteContent":case"deleteContentForward":{z.deleteForward(P);break}case"deleteContentBackward":{z.deleteBackward(P);break}case"deleteEntireSoftLine":{z.deleteBackward(P,{unit:"line"}),z.deleteForward(P,{unit:"line"});break}case"deleteHardLineBackward":{z.deleteBackward(P,{unit:"block"});break}case"deleteSoftLineBackward":{z.deleteBackward(P,{unit:"line"});break}case"deleteHardLineForward":{z.deleteForward(P,{unit:"block"});break}case"deleteSoftLineForward":{z.deleteForward(P,{unit:"line"});break}case"deleteWordBackward":{z.deleteBackward(P,{unit:"word"});break}case"deleteWordForward":{z.deleteForward(P,{unit:"word"});break}case"insertLineBreak":z.insertSoftBreak(P);break;case"insertParagraph":{z.insertBreak(P);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{St==="insertFromComposition"&&Ke.isComposing(P)&&(R(!1),If.set(P,!1)),(ft==null?void 0:ft.constructor.name)==="DataTransfer"?Ke.insertData(P,ft):typeof ft=="string"&&(mt?V.current.push(()=>z.insertText(P,ft)):z.insertText(P,ft));break}}var Ro=(lt=Rp.get(P))===null||lt===void 0?void 0:lt.unref();Rp.delete(P),Ro&&(!P.selection||!ke.equals(P.selection,Ro))&&He.select(P,Ro)}},[P,W,de,s,u,O]),F=K.useCallback(ie=>{ie==null?(W.cancel(),O.cancel(),$v.delete(P),Gf.delete(P),L.current&&Ku&&L.current.removeEventListener("beforeinput",N)):Ku&&ie.addEventListener("beforeinput",N),L.current=ie,typeof n=="function"?n(ie):n&&(n.current=ie)},[W,O,P,N,n]);Jl(()=>{var ie=Ke.getWindow(P),De=Ie=>{var{target:ct}=Ie,Ne=ct instanceof HTMLElement?ct:null,yt=Ne==null?void 0:Ne.tagName;yt==="INPUT"||yt==="TEXTAREA"||O()};ie.document.addEventListener("selectionchange",De);var Re=()=>{he.isDraggingInternally=!1};return ie.document.addEventListener("dragend",Re),ie.document.addEventListener("drop",Re),()=>{ie.document.removeEventListener("selectionchange",De),ie.document.removeEventListener("dragend",Re),ie.document.removeEventListener("drop",Re)}},[O,he]);var j=o([P,[]]),U=PH(o),I=a&&P.children.length===1&&Array.from(Je.texts(P)).length===1&&Je.string(P)===""&&!b,Q=K.useCallback(ie=>{if(ie&&I){var De;ne((De=ie.getBoundingClientRect())===null||De===void 0?void 0:De.height)}else ne(void 0)},[I]);if(I){var ee=z.start(P,[]);j.push({[mg]:!0,placeholder:a,onPlaceholderResize:Q,anchor:ee,focus:ee})}var{marks:se}=P;if(he.hasMarkPlaceholder=!1,P.selection&&ke.isCollapsed(P.selection)&&se){var{anchor:Ee}=P.selection,ve=Je.leaf(P,Ee.path),be=my(ve,YH);if(!at.equals(ve,se,{loose:!0})){he.hasMarkPlaceholder=!0;var Oe=Object.fromEntries(Object.keys(be).map(ie=>[ie,null]));j.push(za(za(za({[V7]:!0},Oe),se),{},{anchor:Ee,focus:Ee}))}}return K.useEffect(()=>{setTimeout(()=>{var{selection:ie}=P;if(ie){var{anchor:De}=ie,Re=Je.leaf(P,De.path);if(se&&!at.equals(Re,se,{loose:!0})){sa.set(P,se);return}}sa.delete(P)})}),zH(),Bt.createElement(c8.Provider,{value:u},Bt.createElement(KH.Provider,{value:b},Bt.createElement(r8.Provider,{value:U},Bt.createElement(XH,{node:L,receivedUserInput:Pe},Bt.createElement(S,za(za({role:u?void 0:"textbox","aria-multiline":u?void 0:!0},A),{},{spellCheck:Ku||!zv?A.spellCheck:!1,autoCorrect:Ku||!zv?A.autoCorrect:"false",autoCapitalize:Ku||!zv?A.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!u,zindex:-1,suppressContentEditableWarning:!0,ref:F,style:za(za({},D?{}:za({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},Z?{minHeight:Z}:{})),E),onBeforeInput:K.useCallback(ie=>{if(!Ku&&!u&&!Wi(ie,A.onBeforeInput)&&Ke.hasSelectableTarget(P,ie.target)&&(ie.preventDefault(),!Ke.isComposing(P))){var De=ie.data;z.insertText(P,De)}},[A.onBeforeInput,P,u]),onInput:K.useCallback(ie=>{if(!Wi(ie,A.onInput)){if(ye.current){ye.current.handleInput();return}for(var De of V.current)De();V.current=[],Ke.isFocused(P)||JT(P,ie.nativeEvent)}},[A.onInput,P]),onBlur:K.useCallback(ie=>{if(!(u||he.isUpdatingSelection||!Ke.hasSelectableTarget(P,ie.target)||Wi(ie,A.onBlur))){var De=Ke.findDocumentOrShadowRoot(P);if(he.latestElement!==De.activeElement){var{relatedTarget:Re}=ie,Ie=Ke.toDOMNode(P,P);if(Re!==Ie&&!(Ts(Re)&&Re.hasAttribute("data-slate-spacer"))){if(Re!=null&&dc(Re)&&Ke.hasDOMNode(P,Re)){var ct=Ke.toSlateNode(P,Re);if(dt.isElement(ct)&&!P.isVoid(ct))return}if(Rf){var Ne=Bp(De);Ne==null||Ne.removeAllRanges()}tc.delete(P)}}}},[u,he.isUpdatingSelection,he.latestElement,P,A.onBlur]),onClick:K.useCallback(ie=>{if(Ke.hasTarget(P,ie.target)&&!Wi(ie,A.onClick)&&dc(ie.target)){var De=Ke.toSlateNode(P,ie.target),Re=Ke.findPath(P,De);if(!z.hasPath(P,Re)||Je.get(P,Re)!==De)return;if(ie.detail===CN&&Re.length>=1){var Ie=Re;if(!(dt.isElement(De)&&z.isBlock(P,De))){var ct,Ne=z.above(P,{match:mt=>dt.isElement(mt)&&z.isBlock(P,mt),at:Re});Ie=(ct=Ne==null?void 0:Ne[1])!==null&&ct!==void 0?ct:Re.slice(0,1)}var yt=z.range(P,Ie);He.select(P,yt);return}if(u)return;var lt=z.start(P,Re),Qe=z.end(P,Re),St=z.void(P,{at:lt}),ft=z.void(P,{at:Qe});if(St&&ft&&oe.equals(St[1],ft[1])){var Ot=z.range(P,lt);He.select(P,Ot)}}},[P,A.onClick,u]),onCompositionEnd:K.useCallback(ie=>{if(Ke.hasSelectableTarget(P,ie.target)){var De;if(Ke.isComposing(P)&&Promise.resolve().then(()=>{R(!1),If.set(P,!1)}),(De=ye.current)===null||De===void 0||De.handleCompositionEnd(ie),Wi(ie,A.onCompositionEnd)||Ui)return;if(!Rf&&!aN&&!rN&&!uN&&!lN&&ie.data){var Re=sa.get(P);sa.delete(P),Re!==void 0&&(zl.set(P,P.marks),P.marks=Re),z.insertText(P,ie.data);var Ie=zl.get(P);zl.delete(P),Ie!==void 0&&(P.marks=Ie)}}},[A.onCompositionEnd,P]),onCompositionUpdate:K.useCallback(ie=>{Ke.hasSelectableTarget(P,ie.target)&&!Wi(ie,A.onCompositionUpdate)&&(Ke.isComposing(P)||(R(!0),If.set(P,!0)))},[A.onCompositionUpdate,P]),onCompositionStart:K.useCallback(ie=>{if(Ke.hasSelectableTarget(P,ie.target)){var De;if((De=ye.current)===null||De===void 0||De.handleCompositionStart(ie),Wi(ie,A.onCompositionStart)||Ui)return;R(!0);var{selection:Re}=P;if(Re&&ke.isExpanded(Re)){z.deleteFragment(P);return}}},[A.onCompositionStart,P]),onCopy:K.useCallback(ie=>{Ke.hasSelectableTarget(P,ie.target)&&!Wi(ie,A.onCopy)&&!QT(ie)&&(ie.preventDefault(),Ke.setFragmentData(P,ie.clipboardData,"copy"))},[A.onCopy,P]),onCut:K.useCallback(ie=>{if(!u&&Ke.hasSelectableTarget(P,ie.target)&&!Wi(ie,A.onCut)&&!QT(ie)){ie.preventDefault(),Ke.setFragmentData(P,ie.clipboardData,"cut");var{selection:De}=P;if(De)if(ke.isExpanded(De))z.deleteFragment(P);else{var Re=Je.parent(P,De.anchor.path);z.isVoid(P,Re)&&He.delete(P)}}},[u,P,A.onCut]),onDragOver:K.useCallback(ie=>{if(Ke.hasTarget(P,ie.target)&&!Wi(ie,A.onDragOver)){var De=Ke.toSlateNode(P,ie.target);dt.isElement(De)&&z.isVoid(P,De)&&ie.preventDefault()}},[A.onDragOver,P]),onDragStart:K.useCallback(ie=>{if(!u&&Ke.hasTarget(P,ie.target)&&!Wi(ie,A.onDragStart)){var De=Ke.toSlateNode(P,ie.target),Re=Ke.findPath(P,De),Ie=dt.isElement(De)&&z.isVoid(P,De)||z.void(P,{at:Re,voids:!0});if(Ie){var ct=z.range(P,Re);He.select(P,ct)}he.isDraggingInternally=!0,Ke.setFragmentData(P,ie.dataTransfer,"drag")}},[u,P,A.onDragStart,he]),onDrop:K.useCallback(ie=>{if(!u&&Ke.hasTarget(P,ie.target)&&!Wi(ie,A.onDrop)){ie.preventDefault();var De=P.selection,Re=Ke.findEventRange(P,ie),Ie=ie.dataTransfer;He.select(P,Re),he.isDraggingInternally&&De&&!ke.equals(De,Re)&&!z.void(P,{at:Re,voids:!0})&&He.delete(P,{at:De}),Ke.insertData(P,Ie),Ke.isFocused(P)||Ke.focus(P)}},[u,P,A.onDrop,he]),onDragEnd:K.useCallback(ie=>{!u&&he.isDraggingInternally&&A.onDragEnd&&Ke.hasTarget(P,ie.target)&&A.onDragEnd(ie)},[u,he,A,P]),onFocus:K.useCallback(ie=>{if(!u&&!he.isUpdatingSelection&&Ke.hasEditableTarget(P,ie.target)&&!Wi(ie,A.onFocus)){var De=Ke.toDOMNode(P,P),Re=Ke.findDocumentOrShadowRoot(P);if(he.latestElement=Re.activeElement,Jd&&ie.target!==De){De.focus();return}tc.set(P,!0)}},[u,he,P,A.onFocus]),onKeyDown:K.useCallback(ie=>{if(!u&&Ke.hasEditableTarget(P,ie.target)){var De;(De=ye.current)===null||De===void 0||De.handleKeyDown(ie);var{nativeEvent:Re}=ie;if(Ke.isComposing(P)&&Re.isComposing===!1&&(If.set(P,!1),R(!1)),Wi(ie,A.onKeyDown)||Ke.isComposing(P))return;var{selection:Ie}=P,ct=P.children[Ie!==null?Ie.focus.path[0]:0],Ne=L7(Je.string(ct))==="rtl";if(lr.isRedo(Re)){ie.preventDefault();var yt=P;typeof yt.redo=="function"&&yt.redo();return}if(lr.isUndo(Re)){ie.preventDefault();var lt=P;typeof lt.undo=="function"&&lt.undo();return}if(lr.isMoveLineBackward(Re)){ie.preventDefault(),He.move(P,{unit:"line",reverse:!0});return}if(lr.isMoveLineForward(Re)){ie.preventDefault(),He.move(P,{unit:"line"});return}if(lr.isExtendLineBackward(Re)){ie.preventDefault(),He.move(P,{unit:"line",edge:"focus",reverse:!0});return}if(lr.isExtendLineForward(Re)){ie.preventDefault(),He.move(P,{unit:"line",edge:"focus"});return}if(lr.isMoveBackward(Re)){ie.preventDefault(),Ie&&ke.isCollapsed(Ie)?He.move(P,{reverse:!Ne}):He.collapse(P,{edge:Ne?"end":"start"});return}if(lr.isMoveForward(Re)){ie.preventDefault(),Ie&&ke.isCollapsed(Ie)?He.move(P,{reverse:Ne}):He.collapse(P,{edge:Ne?"start":"end"});return}if(lr.isMoveWordBackward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)&&He.collapse(P,{edge:"focus"}),He.move(P,{unit:"word",reverse:!Ne});return}if(lr.isMoveWordForward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)&&He.collapse(P,{edge:"focus"}),He.move(P,{unit:"word",reverse:Ne});return}if(Ku){if((j7||Rf)&&Ie&&(lr.isDeleteBackward(Re)||lr.isDeleteForward(Re))&&ke.isCollapsed(Ie)){var Qe=Je.parent(P,Ie.anchor.path);if(dt.isElement(Qe)&&z.isVoid(P,Qe)&&(z.isInline(P,Qe)||z.isBlock(P,Qe))){ie.preventDefault(),z.deleteBackward(P,{unit:"block"});return}}}else{if(lr.isBold(Re)||lr.isItalic(Re)||lr.isTransposeCharacter(Re)){ie.preventDefault();return}if(lr.isSoftBreak(Re)){ie.preventDefault(),z.insertSoftBreak(P);return}if(lr.isSplitBlock(Re)){ie.preventDefault(),z.insertBreak(P);return}if(lr.isDeleteBackward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)?z.deleteFragment(P,{direction:"backward"}):z.deleteBackward(P);return}if(lr.isDeleteForward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)?z.deleteFragment(P,{direction:"forward"}):z.deleteForward(P);return}if(lr.isDeleteLineBackward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)?z.deleteFragment(P,{direction:"backward"}):z.deleteBackward(P,{unit:"line"});return}if(lr.isDeleteLineForward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)?z.deleteFragment(P,{direction:"forward"}):z.deleteForward(P,{unit:"line"});return}if(lr.isDeleteWordBackward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)?z.deleteFragment(P,{direction:"backward"}):z.deleteBackward(P,{unit:"word"});return}if(lr.isDeleteWordForward(Re)){ie.preventDefault(),Ie&&ke.isExpanded(Ie)?z.deleteFragment(P,{direction:"forward"}):z.deleteForward(P,{unit:"word"});return}}}},[u,P,A.onKeyDown]),onPaste:K.useCallback(ie=>{!u&&Ke.hasEditableTarget(P,ie.target)&&!Wi(ie,A.onPaste)&&(!Ku||q_(ie.nativeEvent)||Rf)&&(ie.preventDefault(),Ke.insertData(P,ie.clipboardData))},[u,P,A.onPaste])}),Bt.createElement(ZH,{decorations:j,node:P,renderElement:f,renderChunk:d,renderPlaceholder:y,renderLeaf:g,renderText:p}))))))}),JH=e=>{var{attributes:n,children:r}=e;return Bt.createElement("span",za({},n),r,Ui&&Bt.createElement("br",null))},eG=()=>[],tG=(e,n)=>{if(n.getBoundingClientRect&&(!e.selection||e.selection&&ke.isCollapsed(e.selection))){var r=n.startContainer.parentElement;r.getBoundingClientRect=n.getBoundingClientRect.bind(n),U_(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},Wi=(e,n)=>{if(!n)return!1;var r=n(e);return r??(e.isDefaultPrevented()||e.isPropagationStopped())},QT=e=>dc(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),nG=(e,n)=>{if(!n)return!1;var r=n(e);return r??e.defaultPrevented},JT=(e,n)=>{var r=e;if(n.inputType==="historyUndo"&&typeof r.undo=="function"){r.undo();return}if(n.inputType==="historyRedo"&&typeof r.redo=="function"){r.redo();return}},rG=K.createContext(!1),h8=parseInt(Bt.version.split(".")[0],10),iG=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],oG=e=>{var{editor:n,children:r,onChange:i,onSelectionChange:o,onValueChange:s,initialValue:a}=e,u=my(e,iG);Bt.useState(()=>{if(!Je.isNodeList(a))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Sr.stringify(a)));if(!z.isEditor(n))throw new Error("[Slate] editor is invalid! You passed: ".concat(Sr.stringify(n)));n.children=a,Object.assign(n,u)});var{selectorContext:f,onChange:d}=jH(),g=K.useCallback(w=>{var E;switch(i&&i(n.children),w==null||(E=w.operation)===null||E===void 0?void 0:E.type){case"set_selection":o==null||o(n.selection);break;default:s==null||s(n.children)}d()},[n,d,i,o,s]);K.useEffect(()=>(DC.set(n,g),()=>{DC.set(n,()=>{})}),[n,g]);var[p,y]=K.useState(Ke.isFocused(n));return K.useEffect(()=>{y(Ke.isFocused(n))},[n]),Jl(()=>{var w=()=>y(Ke.isFocused(n));return h8>=17?(document.addEventListener("focusin",w),document.addEventListener("focusout",w),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",w)}):(document.addEventListener("focus",w,!0),document.addEventListener("blur",w,!0),()=>{document.removeEventListener("focus",w,!0),document.removeEventListener("blur",w,!0)})},[]),Bt.createElement(r3.Provider,{value:f},Bt.createElement(n3.Provider,{value:n},Bt.createElement(rG.Provider,{value:p},r)))},sG=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",i=n;i=xN(i,r);var{onChange:o,apply:s}=i;return i.getChunkSize=()=>null,i.onChange=a=>{var u=h8<18?ZN.unstable_batchedUpdates:f=>f();u(()=>{o(a)})},i.apply=a=>{if(a.type==="move_node"){var u=Je.parent(i,a.path),f=!!i.getChunkSize(u);if(f){var d=Je.get(i,a.path),g=a8(i,u),p=Ke.findKey(i,d);g.movedNodeKeys.add(p)}}s(a)},i},aG={isHistory(e){return hi(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||jl.isOperationList(e.redos[0].operations))&&(e.undos.length===0||jl.isOperationList(e.undos[0].operations))}},fx=new WeakMap,Sf=new WeakMap,wv=new WeakMap,Wa={isHistoryEditor(e){return aG.isHistory(e.history)&&z.isEditor(e)},isMerging(e){return Sf.get(e)},isSplittingOnce(e){return wv.get(e)},setSplittingOnce(e,n){wv.set(e,n)},isSaving(e){return fx.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,n){var r=Wa.isMerging(e);Sf.set(e,!0),n(),Sf.set(e,r)},withNewBatch(e,n){var r=Wa.isMerging(e);Sf.set(e,!0),wv.set(e,!0),n(),Sf.set(e,r),wv.delete(e)},withoutMerging(e,n){var r=Wa.isMerging(e);Sf.set(e,!1),n(),Sf.set(e,r)},withoutSaving(e,n){var r=Wa.isSaving(e);fx.set(e,!1);try{n()}finally{fx.set(e,r)}}},lG=e=>{var n=e,{apply:r}=n;return n.history={undos:[],redos:[]},n.redo=()=>{var{history:i}=n,{redos:o}=i;if(o.length>0){var s=o[o.length-1];s.selectionBefore&&He.setSelection(n,s.selectionBefore),Wa.withoutSaving(n,()=>{z.withoutNormalizing(n,()=>{for(var a of s.operations)n.apply(a)})}),i.redos.pop(),n.writeHistory("undos",s)}},n.undo=()=>{var{history:i}=n,{undos:o}=i;if(o.length>0){var s=o[o.length-1];Wa.withoutSaving(n,()=>{z.withoutNormalizing(n,()=>{var a=s.operations.map(jl.inverse).reverse();for(var u of a)n.apply(u);s.selectionBefore&&He.setSelection(n,s.selectionBefore)})}),n.writeHistory("redos",s),i.undos.pop()}},n.apply=i=>{var{operations:o,history:s}=n,{undos:a}=s,u=a[a.length-1],f=u&&u.operations[u.operations.length-1],d=Wa.isSaving(n),g=Wa.isMerging(n);if(d==null&&(d=cG(i)),d){if(g==null&&(u==null?g=!1:o.includes(f)?g=!0:g=uG(i,f)),Wa.isSplittingOnce(n)&&(g=!1,Wa.setSplittingOnce(n,void 0)),u&&g)u.operations.push(i);else{var p={operations:[i],selectionBefore:n.selection};n.writeHistory("undos",p)}for(;a.length>100;)a.shift();s.redos=[]}r(i)},n.writeHistory=(i,o)=>{n.history[i].push(o)},n},uG=(e,n)=>!!(n&&e.type==="insert_text"&&n.type==="insert_text"&&e.offset===n.offset+n.text.length&&oe.equals(e.path,n.path)||n&&e.type==="remove_text"&&n.type==="remove_text"&&e.offset+e.text.length===n.offset&&oe.equals(e.path,n.path)),cG=(e,n)=>e.type!=="set_selection";const fG=e=>{const n=e,{insertData:r}=n;return n.insertBreak=()=>{e.insertText(`
`)},n.insertSoftBreak=()=>{e.insertText(`
`)},n.insertData=i=>{let o=i.getData("text/plain");if(!i.getData("application/x-slate-fragment")&&o){o.endsWith(`
`)&&(o=o.substring(0,o.length-1)),o=o.trim().replace(/\t+/g," "),n.insertText(o);return}r(i)},n},Fg="#6698FF",Bs=9,kC="plait-text-plugin-key",d8=30,bC="transparent",vy=20,bp=18,lg="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",g8="none";var eD;(function(e){e.image="image"})(eD||(eD={}));const p8=["png","jpeg","gif","bmp"];var OC;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(OC||(OC={}));var Vi;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(Vi||(Vi={}));class es{constructor(n,r){this.board=n,this.options=r}processDrawing(n,r,i){var o,s;if(this.canDraw&&this.canDraw(n,i)){const a=this.draw(n,i);if(a){this.g&&r.contains(this.g)?this.g.replaceWith(a):(this.g&&this.g.remove(),(o=this.options)!=null&&o.prepend?r.prepend(a):r.appendChild(a)),this.g=a;const u=this.board.getRectangle(n);if(!u)return;let f=_.getCenterPoint(u);if((s=this.options)!=null&&s.active){const g=ki(this.board,u);f=_.getCenterPoint(g)}let d;Xi.isGroup(n)?d=Co(Os(this.board,n,!0)):d=n.angle,d&&Rs(a,f,d)}else this.destroy();hG(this)&&this.afterDraw(n)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function hG(e){return!!e.afterDraw}const m8=(e,n)=>{const r={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},i=ih(H.getRoughSVG(e),n,Bs,r);return i.classList.add(qk),i};function dG(e,n){return ih(H.getRoughSVG(e),n,Bs,{stroke:"#FFFFFF",strokeWidth:1,fill:`${Fg}`,fillStyle:"solid"})}function tD(e,n){return ih(H.getRoughSVG(e),n,Bs,{stroke:`${Fg}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const Tf=6,nD=(e,n)=>{const r={stroke:ti,strokeWidth:1,fillStyle:"solid"},i=[n.x-vy-bp/2,n.y+n.height+vy+bp/2],o=H.getRoughSVG(e),s=$t(),a=o.path(`M ${i[0]+Tf} ${i[1]} A ${Tf} ${Tf}, 0, 1, 0, ${i[0]} ${i[1]+Tf}`,r),u=o.polygon([[i[0],i[1]+Tf-2],[i[0],i[1]+Tf+2],[i[0]+4.5,i[1]+Tf]],{...r,fill:ti});return Zt(u,"round"),s.append(a,u),s},D1=(e,n)=>new yy(e,{...n,active:!0}),lP=class lP extends es{constructor(n,r){super(n,{...r,active:!0}),this.board=n,this.options=r,this.hasResizeHandle=!1}canDraw(n,r){return!!r.selected}draw(n,r){const i=$t(),o=ki(this.board,this.options.getRectangle(n)),s=this.options.getStrokeWidth()*this.board.viewport.zoom,a=_.inflate(o,s),u=da(this.board,a,{stroke:Fg,strokeWidth:pr});return i.append(u),u.classList.add(C1),u.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,_.getCornerPoints(a).forEach(f=>{const d=m8(this.board,f);i.append(d)})):this.hasResizeHandle=!1,i}};lP.key="active-generator";let yy=lP;const wy=e=>`${e}`,xy=e=>Number(e),gG=(e,n)=>{let i=(IC(e,wy(n))?n-4:n)+2;return i>=4&&(i=i-4),IC(e,wy(n))?i+4:i},rD=e=>{switch(e){case 0:case 2:return oa.nwse;case 1:case 3:return oa.nesw;case 4:case 6:return oa.ns;case 5:case 7:return oa.ew;default:return null}},pG=(e,n)=>{const r=H2.indexOf(e);if(r>=0){const i=Math.round(n/(Math.PI/4));e=H2[(r+i)%H2.length]}return e},v8=(e,n)=>{const r=_.getCornerPoints(e),i=r.map((s,a)=>({rectangle:{x:s[0]-n/2,y:s[1]-n/2,width:n,height:n},handle:wy(a),cursorClass:rD(a)})),o=mG(r,n/2);return i.push(...o.map((s,a)=>({rectangle:s,handle:wy(a+4),cursorClass:rD(a+4)}))),i},iD=(e,n)=>n<=3?_.getCornerPoints(e)[n]:_.getEdgeCenterPoints(e)[n-4],mG=(e,n)=>{const r=[];for(let i=0;i<e.length;i++){let o=_.getRectangleByPoints([e[i],e[(i+1)%4]]);const s=new Array(2).fill(0);s[(i+1)%2]=n/2,o=_.expand(o,s[0],s[1]),r.push(o)}return r},sw=new WeakMap,$l=e=>!!sw.get(e),vG=(e,n)=>$l(e)&&n(sw.get(e)),yG=(e,n,r)=>{H.getBoardContainer(e).classList.add(`${r}-resizing`),sw.set(e,n),ou(e,!0)},wG=(e,n)=>{H.getBoardContainer(e).classList.remove(`${n}-resizing`),sw.delete(e),ou(e,!1)},IC=(e,n)=>xy(n)>=4,Vv=(e,n)=>!IC(e,n),i3=(e,n,r,i,o)=>{const s=Ir([i],r,o)[0],a=Ir([_.getCenterPoint(n)],r,o)[0],u=_.getPoints(n),f=_.getCenterPoint(e),d=Ir([a],s,-o)[0],g=Ir(u,f,o);return Ir(g,d,-o)},xG=e=>{const n=e.points;return n&&n.length>1},aw=(e,n)=>{if(H.hasBeenTextEditing(e)||vi(e))return!1;const r=tt(e);return r.length===1&&r[0]===n&&xG(n)};function Qn(e,n){const r=n[0]-e[0],i=n[1]-e[1],o=Math.sqrt(r*r+i*i);if(o===0)throw new Error("Points must not be the same for a unit vector calculation.");const s=r/o,a=i/o;return[s,a]}function tg(e,n,r){const i=Math.hypot(n[0],n[1]);return[e[0]+n[0]/i*r,e[1]+n[1]/i*r]}function oD(e,n,r,i){return i?[e[0]+r,e[1]+r/n[0]*n[1]]:[e[0]+r/n[1]*n[0],e[1]+r]}function sD(e){const n=e[0],i=e[1],o=-n;return[i,o]}function Yp(e,n){if(!n)return e;const r=e[0],i=e[1],o=r*Math.cos(n)-i*Math.sin(n),s=r*Math.sin(n)+i*Math.cos(n);return[o,s]}function y8(e,n,r){const i=bt(e[0],e[1],n[0],n[1]),o=bt(e[0],e[1],r[0],r[1]),s=bt(n[0],n[1],r[0],r[1]);return Math.abs(i+o-s)<.1}const CG=(e,n,r)=>{const i=[],o=[Math.min(n[0],r[0]),Math.max(n[0],r[0])],s=[Math.min(n[1],r[1]),Math.max(n[1],r[1])],a=Qn(n,r);if(e[0]>=o[0]&&e[0]<=o[1]){const u=oD(n,a,e[0]-n[0],!0);i.push(u)}else if(e[1]>=s[0]&&e[1]<=s[1]){const u=oD(n,a,e[1]-n[1],!1);i.push(u)}return i};function w8(e,n){const i=x8(e)*n;let o=0;for(let s=0;s<e.length-1;s++){const[a,u]=e[s],[f,d]=e[s+1],g=bt(a,u,f,d);if(o+g>=i){const y=(i-o)/g,w=a+(f-a)*y,E=u+(d-u)*y;return[w,E]}o+=g}return e[e.length-1]}function x8(e){let n=0;for(let r=0;r<e.length-1;r++){const[i,o]=e[r],[s,a]=e[r+1];n+=bt(i,o,s,a)}return n}function C8(e,n){const r=x8(e);let i=0;for(let o=0;o<e.length-1;o++){if(y8(n,e[o],e[o+1]))return i+=bt(n[0],n[1],e[o][0],e[o][1]),i/r;i+=bt(e[o][0],e[o][1],e[o+1][0],e[o+1][1])}throw new Error("Cannot get ratio by point")}const vg=e=>{const n=[];return e.forEach(r=>{n.findIndex(o=>Pt.isEquals(r,o))===-1&&n.push(r)}),n};function Gl(e){if(e.length<=2)return e;let n=[e[0]];for(let r=1;r<e.length-1;r++){const i=e[r-1],o=e[r],s=e[r+1];!(Pt.isOverHorizontal([i,o,s])||Pt.isOverVertical([i,o,s]))&&n.push(o)}return n.push(e[e.length-1]),n}const Zp=(e,n,r)=>{const i=bt(...e,...n),o=Pt.isEquals(e,n),s=o?1:(n[1]-e[1])/i,a=o?1:(n[0]-e[0])/i;return[e[0]+r*a,e[1]+r*s]},EG={[Gt.left]:{x:-1,y:0},[Gt.right]:{x:1,y:0},[Gt.top]:{x:0,y:-1},[Gt.bottom]:{x:0,y:1}};function PG(e){switch(e){case Gt.left:return Gt.right;case Gt.right:return Gt.left;case Gt.top:return Gt.bottom;case Gt.bottom:return Gt.top}}function E8(e){if(e[0]===0)return Gt.left;if(e[0]===1)return Gt.right;if(e[1]===0)return Gt.top;if(e[1]===1)return Gt.bottom}function Yd(e){const n=e[0],r=e[1];if(n===0&&r===0)return null;if(n===0)return r>0?Gt.bottom:Gt.top;if(r===0)return n>0?Gt.right:Gt.left;const i=Math.atan2(r,n);return i>-Math.PI/4&&i<=Math.PI/4?Gt.right:i>Math.PI/4&&i<=3*Math.PI/4?Gt.bottom:i>-3*Math.PI/4&&i<=-Math.PI/4?Gt.top:Gt.left}function qf(e){return EG[e]}function yg(e){return e===0?e:e/Math.abs(e)}const SG=(e,n,r,i,o)=>{const s=qf(n),a=qf(i),u=[e[0]+s.x*o,e[1]+s.y*o],f=[r[0]+a.x*o,r[1]+a.y*o],d=TG(u,n,f),g=d.x!==0?"x":"y",p=d[g];let y=[],w,E;const[S,D]=DG({sourceX:e[0],sourceY:e[1],targetX:r[0],targetY:r[1]});if(s[g]*a[g]===-1){w=S,E=D;const A=[[w,u[1]],[w,f[1]]],P=[[u[0],E],[f[0],E]];s[g]===p?y=g==="x"?A:P:y=g==="x"?P:A}else{const A=[[u[0],f[1]]],P=[[f[0],u[1]]];g==="x"?y=s.x===p?P:A:y=s.y===p?A:P;let b;if(n!==i){const R=g==="x"?1:0,L=s[g]===a[g==="x"?"y":"x"],V=u[R]>f[R],Z=u[R]<f[R];b=s[g]===1&&(!L&&V||L&&Z)||s[g]!==1&&(!L&&Z||L&&V),b&&(y=g==="x"?A:P)}}return[e,u,...y,f,r]},TG=(e,n=Gt.bottom,r)=>n===Gt.left||n===Gt.right?e[0]<r[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<r[1]?{x:0,y:1}:{x:0,y:-1};function DG({sourceX:e,sourceY:n,targetX:r,targetY:i}){const o=Math.abs(r-e)/2,s=r<e?r+o:r-o,a=Math.abs(i-n)/2,u=i<n?i+a:i-a;return[s,u,o,a]}function o3(e){const n=e.ctrlKey||e.metaKey,r=on.isKeyHotkey("alt",e),i=on.isKeyHotkey("shift",e),o=e.key.includes("CapsLock"),s=e.key.includes("Tab"),a=e.key.includes("Escape"),u=e.key.startsWith("F"),f=!!e.key.includes("Arrow");return o||n||r||f||i||s||a||u}const AG=e=>on.isKeyHotkey("mod+/",e),BG=e=>e.key==="Tab",MG=e=>e.key==="Enter",s3=e=>e.code==="Space",a3=e=>Mi.isDeleteBackward(e)||Mi.isDeleteForward(e);var Zr;(function(e){e.dnd="dnd",e.drawing="drawing"})(Zr||(Zr={}));const P8=new WeakMap,S8=e=>P8.get(e),wo=(e,n)=>{P8.set(e,n)},lw=e=>S8(e)===Zr.dnd,oh=e=>S8(e)===Zr.drawing,Lg=e=>{const n=hn.getElementRef(e);return(n==null?void 0:n.getTextManages())||[]},_g=e=>{const n=Lg(e)[0];return n||console.warn("can not find textManage"),n},sh=e=>Lg(e).map(n=>n.editor),l3=e=>{const n=sh(e)[0];return n||console.warn("can not find textManage"),n},RG=e=>{const n=tt(e);let r=null;return n.forEach(i=>{const o=sh(i);!r&&o&&o.length>0&&(r=o[0])}),r},T8=e=>e.map(n=>{try{const r=sh(n);return r.length?r.map(i=>{const o=Je.texts(i);return Array.from(o).reduce((s,a)=>s+=a[0].text,"")}).join(" "):""}catch{return""}}).filter(n=>n).join(" "),D8=(e,n)=>{const r=n||tt(e);if(r.length){const i=[];r.forEach(s=>{i.push(...Lg(s))});const o=i.find(s=>s.isEditing);return o?[o.editor]:i.map(s=>s.editor)}},ah=(e,n,r)=>{r=r||{};const i=typeof e=="string"?{children:[{text:e,...r}],type:"paragraph"}:e;return n&&(i.align=n),i},aD=e=>e===14?20:e===18?25:e*1.5,A8=async(e,n,r,i)=>{let o=0,s=0;await kG(n,r).then(d=>{o=d.width,s=d.height});let a=null;const u=URL.createObjectURL(n);H.getBoardContext(e).setUploadingFile({url:u,file:n}),a={url:u,width:o,height:s},i(a)};function kG(e,n){return new Promise((r,i)=>{const o=new Image;o.src=URL.createObjectURL(e),o.onload=function(){const s=n,a=n*o.naturalHeight/o.naturalWidth;r(o.naturalWidth>n?{width:s,height:a}:{width:o.naturalWidth,height:o.naturalHeight})}})}const u3=new WeakMap,vo=e=>u3.get(e),B8=(e,n)=>{u3.set(e,n)},bG=e=>{u3.delete(e)};class OG{constructor(){this.list=[]}enqueue(n){this.list.push(n),this.list=this.list.sort((r,i)=>r.priority-i.priority)}dequeue(){return this.list.shift()}}class IG{constructor(n){this.graph=n,this.cameFrom=new Map}heuristic(n,r){return Math.abs(n[0]-r[0])+Math.abs(n[1]-r[1])}search(n,r,i){const o=new OG,s=this.graph.get(n);this.cameFrom=new Map;const a=new Map;for(a.set(s,0),o.enqueue({node:s,priority:0});o.list.length>0;){var u=o.dequeue();if(!u)throw new Error("can't find current");const f=u.node.data;if(f[0]===r[0]&&f[1]===r[1])break;u.node.adjacentNodes.forEach(d=>{let g=a.get(u.node)+this.heuristic(d.data,u.node.data);const p=this.cameFrom.get(u.node),y=p?p.data:i,w=y[0]===(u==null?void 0:u.node.data[0])&&y[0]===d.data[0],E=y[1]===(u==null?void 0:u.node.data[1])&&y[1]===d.data[1];if(!w&&!E&&(g=g+1),!a.has(d)||a.get(d)&&g<a.get(d)){a.set(d,g);const S=g+this.heuristic(d.data,r);o.enqueue({node:d,priority:S}),this.cameFrom.set(d,u.node)}})}}getRoute(n,r){const i=[];let o=r;for(;o[0]!==n[0]||o[1]!==n[1];){const s=this.graph.get(o),a=this.cameFrom.get(s);i.unshift(a.data),o=a.data}return i}}class FG{constructor(n){this.data=n,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class LG{constructor(){this.index={}}add(n){const r=n[0],i=n[1],o=r.toString(),s=i.toString();o in this.index||(this.index[o]={}),s in this.index[o]||(this.index[o][s]=new FG(n))}connect(n,r){const i=this.get(n),o=this.get(r);if(!i||!o)throw new Error("A point was not found");i.adjacentNodes.push(o)}has(n){const r=n[0],i=n[1],o=r.toString(),s=i.toString();return o in this.index&&s in this.index[o]}get(n){const r=n[0],i=n[1],o=r.toString(),s=i.toString();return o in this.index&&s in this.index[o]?this.index[o][s]:null}}const M8=Bg("debug:plait:elbow-line-routing"),R8=(e,n)=>{const{nextSourcePoint:r,nextTargetPoint:i}=e,o=NG(e),s=HG(o),a=new IG(s);a.search(r,i,e.sourcePoint);let u=a.getRoute(r,i);u=[e.sourcePoint,...u,i,e.targetPoint];const f=_.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),d=_.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),g=f?void 0:_.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),p=d?void 0:_.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return u=_G(u,{centerX:g,centerY:p,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},n),u},_G=(e,n,r)=>{const{sourceRectangle:i,targetRectangle:o,centerX:s,centerY:a}=n;if(r&&M8.clear(),s!==void 0){const u=uD(e,s,!0),f=u.pointOfHit&&lD(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:i,targetRectangle:o},r);f&&(e=f)}if(a!==void 0){const u=uD(e,a,!1),f=u.pointOfHit&&lD(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:i,targetRectangle:o},r);f&&(e=f)}return e},lD=(e,n,r)=>{const{parallelPaths:i,pointOfHit:o,sourceRectangle:s,targetRectangle:a}=n;let u=null;return i.forEach(f=>{const d=[o,f[0],f[1]],g=_.getRectangleByPoints(d);if(!_.isHit(g,s)&&!_.isHit(g,a)){const p=_.getCornerPointsByPoints(d);r&&M8.drawRectangle(r,g);const y=[],w=[];e.forEach((R,L)=>{const V=p.findIndex(Z=>Pt.isEquals(R,Z));V!==-1&&(y.push(L),w.push(V))});const E=[...e],S=p.find((R,L)=>!w.includes(L)),D=Math.abs(y[0]-y[y.length-1])+1;E.splice(y[0]+1,D-2,S);const A=Gl([...e]).length-1;Gl([...E]).length-1<=A&&(u=E)}return null}),u},uD=(e,n,r)=>{const i=[];let o=null,s=null;const a=r?0:1;for(let u=0;u<e.length;u++){const f=e[u-1],d=e[u];o===null&&f&&f[a]===d[a]&&(o=f),o!==null&&f[a]!==d[a]&&(i.push([o,f]),o=null),d[a]===n&&(s=d)}return o&&i.push([o,e[e.length-1]]),{pointOfHit:s,parallelPaths:i}},NG=e=>{const{nextSourcePoint:n,nextTargetPoint:r,sourceOuterRectangle:i,targetOuterRectangle:o}=e,s=[],a=[];let u=[];[i,o].forEach(g=>{s.push(g.x,g.x+g.width/2,g.x+g.width),a.push(g.y,g.y+g.height/2,g.y+g.height)});const f=[i.x,i.x+i.width,o.x,o.x+o.width].sort((g,p)=>g-p);s.push((f[1]+f[2])/2,n[0],r[0]);const d=[i.y,i.y+i.height,o.y,o.y+o.height].sort((g,p)=>g-p);a.push((d[1]+d[2])/2,n[1],r[1]);for(let g=0;g<s.length;g++)for(let p=0;p<a.length;p++){const y=[s[g],a[p]],w=_.isPointInRectangle(i,y),E=_.isPointInRectangle(o,y);!w&&!E&&u.push(y)}return u=vg(u).filter(g=>{const p=_.isPointInRectangle(i,g),y=_.isPointInRectangle(o,g);return!p&&!y}),u},HG=e=>{const n=new LG,r=[],i=[];e.forEach(s=>{const a=s[0],u=s[1];r.indexOf(a)<0&&r.push(a),i.indexOf(u)<0&&i.push(u),n.add(s)}),r.sort((s,a)=>s-a),i.sort((s,a)=>s-a);const o=s=>n.has(s);for(let s=0;s<r.length;s++)for(let a=0;a<i.length;a++){const u=[r[s],i[a]];if(o(u)){if(s>0){const f=[r[s-1],i[a]];o(f)&&(n.connect(f,u),n.connect(u,f))}if(a>0){const f=[r[s],i[a-1]];o(f)&&(n.connect(f,u),n.connect(u,f))}}}return n},GG=(e,n)=>{const r=d8;let i=new Array(4).fill(r),o=new Array(4).fill(r);const s=e.x-(n.x+n.width),a=n.x-(e.x+e.width);if(s>0&&s<r*2){const d=s/2;i[3]=d,o[1]=d}if(a>0&&a<r*2){const d=a/2;o[3]=d,i[1]=d}const u=e.y-(n.y+n.height),f=n.y-(e.y+e.height);if(u>0&&u<r*2){const d=u/2;i[0]=d,o[2]=d}if(f>0&&f<r*2){const d=f/2;i[2]=d,o[0]=d}return{sourceOffset:i,targetOffset:o}},cD=(e,n,r)=>{switch(r){case Gt.top:return[e[0],n.y];case Gt.bottom:return[e[0],n.y+n.height];case Gt.right:return[n.x+n.width,e[1]];default:return[n.x,e[1]]}},jG=(e,n)=>{const{sourceOffset:r,targetOffset:i}=GG(e,n),o=_.expand(e,r[3],r[0],r[1],r[2]),s=_.expand(n,i[3],i[0],i[1],i[2]);return{sourceOuterRectangle:o,targetOuterRectangle:s}},zG=e=>{const{sourcePoint:n,nextSourcePoint:r,sourceRectangle:i,sourceOuterRectangle:o,targetPoint:s,nextTargetPoint:a,targetRectangle:u,targetOuterRectangle:f}=e;return _.isPointInRectangle(u,n)||_.isPointInRectangle(f,r)||_.isPointInRectangle(o,a)||_.isPointInRectangle(i,s)},Uv=new Map,c3=(e,n,r)=>{let i=Uv.has(e)?Uv.get(e):{};i[n]=r,Uv.set(e,i)},uw=e=>Uv.get(e),k8=new WeakMap,$G=(e,n)=>{H.getBoardContainer(e).classList.add("draw-elements-rotating"),k8.set(e,n),ou(e,!0)},WG=e=>{H.getBoardContainer(e).classList.remove("draw-elements-rotating"),k8.delete(e),ou(e,!1)},fD=(e,n)=>{const r=e.getRectangle(n);return r?r.width*r.height:0},VG=(e,n,r="asc")=>n.sort((i,o)=>{const s=fD(e,i),a=fD(e,o);return r==="asc"?s-a:a-s}),UG=e=>e&&e!==g8&&e!==bC,xc=(e,n)=>{switch(e){case Vi.dashed:return[8,8+n];case Vi.dotted:return[2,4+n];default:return}},b8=(e,n,r,i)=>n.map(o=>{const s=i&&i(o);if(s)return s;if(o.points){const a=o.points.map(u=>[u[0]-r[0],u[1]-r[1]]);return{...o,points:a}}return o}),O8=(e,n,r,i)=>{const o={};n.forEach(s=>{o[s.id]=Tn()}),n.forEach(s=>{s.id=o[s.id],i&&i(s,o),s.points&&(s.points=s.points.map(a=>[r[0]+a[0],r[1]+a[1]])),Ze.insertNode(e,s,[e.children.length])}),Ze.addSelectionWithTemporaryElements(e,n)},Jn=(e,n,r=Gt.right)=>r===Gt.left?[e[0]-n,e[1]]:r===Gt.bottom?[e[0],e[1]+n]:r===Gt.top?[e[0],e[1]-n]:[e[0]+n,e[1]],xv=(e,n,r=Gt.right)=>r===Gt.bottom?[e[0]+n,e[1]]:r===Gt.top?[e[0]+n,e[1]]:[e[0],e[1]+n],XG=e=>e===0?Gt.top:e===1?Gt.right:e===2?Gt.bottom:e===3?Gt.left:Gt.right,I8=(e,n,r)=>Math.abs(r?e[0]-n[0]:e[1]-n[1]),KG="foreign-object-image",uP=class uP extends es{constructor(n,r){super(n,r),this.board=n,this.options=r,this.isFocus=!1}canDraw(n){return!!this.options.getImageItem(n)}draw(n){this.element=n;const r=$t(),i=this.options.getRectangle(n);this.foreignObject=AE(i.x,i.y,i.width,i.height),this.foreignObject.classList.add(KG),r.append(this.foreignObject);const o={board:this.board,imageItem:this.options.getImageItem(n),element:n,getRectangle:()=>this.options.getRectangle(n)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,o),this.activeGenerator=D1(this.board,{getStrokeWidth:()=>(tt(this.board).length===1&&!vi(this.board),pr),getStrokeOpacity:()=>{const s=tt(this.board);return s.length===1&&!vi(this.board)||!s.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const s=aw(this.board,this.element);return!!vo(this.board)||s}}),r}updateImage(n,r,i){if(this.element=i,r!==i&&this.imageComponentRef){const a={imageItem:this.options.getImageItem(i),element:i,getRectangle:()=>this.options.getRectangle(i)};this.imageComponentRef.update(a)}const o=this.options.getRectangle(i);Tp(this.g,o.width,o.height,o.x,o.y),o&&i.angle!==void 0&&Rs(this.g,_.getCenterPoint(o),i.angle);const s=H.getActiveHost(this.board);this.activeGenerator.processDrawing(i,s,{selected:this.isFocus})}setFocus(n,r){this.isFocus=r;const i=H.getActiveHost(this.board);this.activeGenerator.processDrawing(n,i,{selected:r});const o={isFocus:r};this.imageComponentRef.update(o)}destroy(){var n,r;super.destroy(),(n=this.imageComponentRef)==null||n.destroy(),(r=this.activeGenerator)==null||r.destroy()}};uP.key="image-generator";let eu=uP;const A1=(e,n,r)=>{tt(e).forEach(o=>{if(r!=null&&r.match&&!(r!=null&&r.match(o)))return;const s=H.findPath(e,o),a=r!=null&&r.getMemorizeKey?r==null?void 0:r.getMemorizeKey(o):"";for(let u in n)a&&c3(a,u,n[u]);r!=null&&r.callback?r.callback(o,s):Ze.setNode(e,n,s)})},qG=(e,n,r)=>{A1(e,{strokeStyle:n},r)},YG=(e,n,r)=>{A1(e,{fill:n},r)},ZG=(e,n,r)=>{A1(e,{strokeColor:n},r)},QG=(e,n,r)=>{A1(e,{strokeWidth:n},r)},ga={setFillColor:YG,setStrokeStyle:qG,setProperty:A1,setStrokeWidth:QG,setStrokeColor:ZG},Yf=(e,n=!1)=>{let r=e[0],i=e[1];if(n){const a=Math.abs(r[0]-i[0]),u=Math.abs(r[1]-i[1]),f=Math.max(u,a);i=[r[0]+(i[0]>r[0]?f:-f),r[1]+(i[1]>r[1]?f:-f)]}const o=[Math.min(r[0],i[0]),Math.min(r[1],i[1])];let s=[Math.max(r[0],i[0]),Math.max(r[1],i[1])];return[o,s]},hD=(e,n)=>!H.isReadonly(e)&&!H.hasBeenTextEditing(e)&&H.isPointer(e,nn.selection),lh=(e,n)=>{const{pointerDown:r,pointerMove:i,globalPointerUp:o}=e;let s=null,a=null,u=null,f=null;e.pointerDown=g=>{if(!n.canResize()||!hD(e)||!Ya(g)){r(g);return}const p=It(e,Lt(e,g.x,g.y));if(s=n.hitTest(p),s){s.cursorClass&&H.getBoardContainer(e).classList.add(`${s.cursorClass}`),u=[g.x,g.y],a={path:Array.isArray(s.element)?s.element.map(w=>H.findPath(e,w)):H.findPath(e,s.element),element:s.element,handle:s.handle,handleIndex:s.handleIndex,rectangle:s.rectangle,options:s.options};return}r(g)},e.pointerMove=g=>{if(!n.canResize()||!hD(e)){d(),i(g);return}if(u&&s&&!$l(e)){const p=[g.x,g.y];bt(u[0],u[1],p[0],p[1])>vE&&(yG(e,a,n.key),Or.set(e,!0),n.beforeResize&&n.beforeResize(a))}if(!$l(e)&&!cc(e)){const p=It(e,Lt(e,g.x,g.y));ha(e,n.key+"-common-resize-hit-test",()=>{const y=n.hitTest(p);y?(f&&y.cursorClass!==f.cursorClass&&H.getBoardContainer(e).classList.remove(`${f.cursorClass}`),f=y,f.cursorClass&&H.getBoardContainer(e).classList.add(`${f.cursorClass}`)):d()})}else if(u&&$l(e)){g.preventDefault();const p=It(e,Lt(e,g.x,g.y));ha(e,"with-common-resize",()=>{u&&a&&n.onResize(a,{startPoint:It(e,Lt(e,u[0],u[1])),endPoint:p,isShift:!!g.shiftKey})});return}i(g)},e.globalPointerUp=g=>{o(g),($l(e)||s)&&(n.afterResize&&n.afterResize(a),wG(e,n.key),u=null,s=null,a=null,Or.set(e,!1))};const d=()=>{f&&(f.cursorClass&&H.getBoardContainer(e).classList.remove(`${f.cursorClass}`),f=null)};return e},cP=class cP extends es{canDraw(n){return!0}draw(n,r){const i={stroke:"",strokeWidth:pr,strokeLineDash:[5]};let o={x:0,y:0,width:0,height:0};return r&&(i.stroke="#999",o=FE(this.board,n,!0)),da(this.board,o,i)}};cP.key="GroupGenerator";let Qp=cP;class JG{constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(n,r){this.generatorMap.set(n,r)}getGenerator(n){return this.generatorMap.get(n)}initializeTextManage(n){this.textManages=[],Array.isArray(n)?this.textManages.push(...n):this.textManages.push(n)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(n=>{n.destroy()}),this.textManages=[]}}class Cc extends MI{constructor(n=new JG){super(n)}}class ej extends Cc{constructor(){super()}initializeGenerator(){this.activeGenerator=D1(this.board,{getRectangle:n=>FE(this.board,n),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!vi(this.board)}),this.groupGenerator=new Qp(this.board),this.getRef().addGenerator(Qp.key,this.groupGenerator)}initialize(){super.initialize(),this.initializeGenerator()}onContextChanged(n,r){}}function F8(e){let n,r;const{drawElement:i,pointerMove:o,globalPointerUp:s,insertFragment:a,getDeletedFragment:u,deleteFragment:f,getRelatedFragment:d,getRectangle:g,keyDown:p,onChange:y}=e;return e.drawElement=w=>Xi.isGroup(w.element)?ej:i(w),e.pointerMove=w=>{ha(e,"with-group",()=>{n==null||n.remove();const E=It(e,Lt(e,w.x,w.y));let S={anchor:E,focus:E};e.selection&&!pg.isCollapsed(e.selection)&&(S=e.selection);const D=H.getPointer(e);if(!$l(e)&&!fc(e)&&D===nn.selection){const A=FA(e,S);A.length&&(n=HO(e,A),n&&H.getElementTopHost(e).append(n))}}),o(w)},e.globalPointerUp=w=>{n==null||n.remove(),n=null,s(w)},e.getRelatedFragment=(w,E)=>{const S=_O(e,w,E);return d([...w,...S],E)},e.insertFragment=(w,E,S)=>{var P,b;let D=[];if((P=w==null?void 0:w.elements)!=null&&P.length){D=new Array((b=w==null?void 0:w.elements)==null?void 0:b.length);const R=wc(e,w==null?void 0:w.elements);_E(e,w==null?void 0:w.elements).forEach(V=>{const Z=w.elements.map(ne=>ne.id).indexOf(V.id);D.splice(Z,1,V.groupId?Cy(V,void 0):V)}),R.length&&R.forEach(V=>{const Z=w.elements.map(le=>le.id).indexOf(V.id),ne={...Cy(V,void 0),id:Tn()};D.splice(Z,1,ne),L8(V,w.elements,ne.id,D)}),w.elements=D}a(w,E,S),(D==null?void 0:D.filter(R=>Xi.isGroup(R))).forEach(R=>{Ze.insertNode(e,R,[e.children.length])})},e.getDeletedFragment=w=>(r=tj(e),r&&r.length&&w.push(...r),u(w)),e.deleteFragment=w=>{r!=null&&r.length&&rj(e,r),f(w),r=null},e.getRectangle=w=>Xi.isGroup(w)?FE(e,w,!0):g(w),e.keyDown=w=>{if(!H.isReadonly(e)){if(on.isKeyHotkey("mod+g",w)){w.preventDefault(),Ze.addGroup(e);return}if(on.isKeyHotkey("mod+shift+g",w)){w.preventDefault(),Ze.removeGroup(e);return}}p(w)},e.onChange=()=>{y(),LO(e).forEach(E=>{const S=Os(e,E,!1,!0),D=S.some(b=>yC(e,b))&&!S.every(b=>yC(e,b)),A=hn.getElementRef(E),P=hn.getElementG(E);A.getGenerator(Qp.key).processDrawing(E,P,D)})},e}const Cy=(e,n)=>({...e,groupId:n}),L8=(e,n,r,i)=>{const o=n.filter(s=>s.groupId===e.id);return o.length&&o.forEach(s=>{const a=n.map(u=>u.id).indexOf(s.id);if(Xi.isGroup(s)){const u={...Cy(s,r),id:Tn()};i.splice(a,1,u),L8(s,n,u.id,i)}else i.splice(a,1,Cy(s,r))}),i},tj=e=>{const r=[...e.getRelatedFragment([])],i=wc(e),o=NE(e),s=[...i,...o];return s.forEach(a=>{const u=yc(e,a,!0);if(u.length){const d=Os(e,u[0],!1,!0).filter(g=>![...s,...r].map(p=>p.id).includes(g.id));if((d.length===1||d.length===0)&&(r.includes(u[0])||r.push(u[0]),d.length===1&&u.length>1)){const g=nj(e,u.slice(1,u.length),[...s,...r]);let p=u.length;g&&(p=u.findIndex(y=>y.id===g.id)),[...u.slice(1,p)].forEach(y=>{r.includes(y)||r.push(y)})}}}),r},nj=(e,n,r)=>{let i=null;for(let o=0;o<n.length;o++)if(Os(e,n[o],!1,!0).filter(u=>!r.map(f=>f.id).includes(u.id)).length>0){i=n[o];break}return i},rj=(e,n)=>{const r=NE(e),i=wc(e),o=r.filter(s=>s.groupId);[...i,...o].forEach(s=>{const a=yc(e,s,!0);if(a.length){const f=Os(e,a[0],!1,!0).filter(d=>d.id!==s.id);if(f.length===1){const d=n.map(g=>g.id);if(a.some(g=>d.includes(g.id))){const g=a.find(y=>!d.includes(y.id)),p=H.findPath(e,f[0]);Ze.setNode(e,{groupId:(g==null?void 0:g.id)||void 0},p)}}}})},hx=new WeakMap,Ey=new WeakMap,ij=e=>{if(e){if(!hx.get(e)){const n=document.createElement("canvas");return hx.set(e,n),n}return hx.get(e)}return document.createElement("canvas")},dx=(e,n,r,i=1e4)=>{let o=Ey.get(n);return o||(o=B1(e,n,r,i),Ey.set(n,o),o)},oj=(e,n,r)=>{Ey.set(n,r)},sj=(e,n)=>{Ey.delete(n)};function B1(e,n,r,i=1e4){const s=ij(e).getContext("2d"),a=Je.texts(n),u=[[]];for(const g of a){const[p]=g;Je.string(p).split(`
`).forEach((E,S)=>{const D={...p,text:E};if(S===0)u[u.length-1].push(D);else{const A=[];A.push(D),u.push(A)}})}let f=0,d=0;return u.forEach((g,p)=>{let y=0,w=aD(r.fontSize);if(g.forEach((E,S)=>{const D=aj(E,{fontFamily:r.fontFamily,fontSize:r.fontSize});s.font=D,y+=s.measureText(E.text).width;const A=S===g.length-1;if(E["font-size"]&&(A||E.text!=="")){const P=aD(parseFloat(E["font-size"]));P>w&&(w=P)}}),y<=i)y>f&&(f=y),d+=w;else{f=i;const E=Math.ceil(y/i);d+=w*E}}),{width:f,height:d}}const aj=(e,n)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||n.fontSize}px ${n.fontFamily} `;class M1{constructor(n,r){this.board=n,this.options=r,this.isEditing=!1,this.getSize=(i,o)=>{const s=window.getComputedStyle(this.foreignObject.children[0]),a=s.fontFamily,u=parseFloat(s.fontSize),f=i||this.editor.children[0];return B1(this.board,f,{fontSize:u,fontFamily:a},o||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(n){const r=this.options.getRectangle();this.g=$t(),this.foreignObject=AE(r.x,r.y,r.width,r.height),this.g.append(this.foreignObject),this.g.classList.add("text");const i={board:this.board,text:n,textPlugins:this.options.textPlugins,onChange:o=>{if(o.operations.some(s=>!jl.isSelectionOperation(s))){const{width:s,height:a}=this.getSize();this.options.onChange&&this.options.onChange({...o,width:s,height:a}),Or.set(this.board,!0)}},afterInit:o=>{this.editor=o},onComposition:o=>{if(o.type==="compositionend"){sj(this.board,this.editor.children[0]);return}const s=lj(this.editor,o.data);if(s){const a=this.getSize(s.children[0]);oj(this.board,this.editor.children[0],a),this.options.onChange&&this.options.onChange({...a}),Or.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,i)}updateRectangleWidth(n){yb(this.g,n)}updateAngle(n,r=0){Rs(this.g,n,r)}updateRectangle(n){const{x:r,y:i,width:o,height:s}=n||this.options.getRectangle();Tp(this.g,o,s,r,i)}updateText(n){const r={text:n};this.textComponentRef.update(r)}edit(n,r){this.isEditing=!0,oC.set(this.board,!0);const i={readonly:!1};this.textComponentRef.update(i),He.select(this.editor,[0]);const o=u=>{const f=It(this.board,Lt(this.board,u.x,u.y)),d=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),g=_.isHit(_.getRectangleByPoints([f,f]),d),p=u.target.closest(".plait-board-attached");!g&&!p&&setTimeout(()=>{a()},0)},s=u=>{if(!u.isComposing&&(u.key==="Escape"||u.key==="Tab"||r&&r(u))){u.preventDefault(),u.stopPropagation(),a();return}},a=()=>{if(this.isEditing){this.updateRectangle(),document.removeEventListener("mousedown",o),document.removeEventListener("keydown",s),oC.set(this.board,!1),Or.set(this.board,!1),n&&n();const u={readonly:!0};this.textComponentRef.update(u),this.isEditing=!1,this.exitCallback=void 0}};return document.addEventListener("mousedown",o),document.addEventListener("keydown",s),this.exitCallback=a,a}destroy(){var n,r;(n=this.g)==null||n.remove(),(r=this.textComponentRef)==null||r.destroy(),this.exitCallback&&this.exitCallback()}}const lj=(e,n)=>{if(e.selection&&ke.isCollapsed(e.selection)){const[r,i]=z.node(e,e.selection),o=e.selection.anchor.offset,a={children:[JSON.parse(JSON.stringify(e.children[0]))]},u=r.text.slice(0,o+1)+n+r.text.slice(o+1),f=Je.get(a,i);return f.text=u,a}return null},uj=e=>{const n=e;return n.renderText=(r,i)=>{throw new Error("No implementation for renderText method.")},n};var pi;(function(e){e.left="left",e.center="center",e.right="right"})(pi||(pi={}));const cj=e=>{const n=e;return n.renderImage=(r,i)=>{throw new Error("No implementation for renderImage method.")},n},FC={isActive(e,n){const r=Je.get(e,dD);if(r){const{align:i}=r;return i===n}return!1},setAlign(e,n){const r={align:n};He.setNodes(e,r,{at:dD})}},dD=[0];var Ri;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(Ri||(Ri={}));const gD=[Ri.bold,Ri.color,Ri.italic,Ri.strike,Ri.underline,Ri.fontSize];var Py;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(Py||(Py={}));Ri.bold,Ri.italic,Ri.underline,Ri.strike;const Jp=14,Kl={getMarks(e){const n={};let r=[];e.selection?r=e.selection:e.children&&e.children.length>0&&(r={anchor:z.start(e,[0]),focus:z.end(e,[0])});const i=z.nodes(e,{match:at.isText,at:r});for(const o of i){const[s]=o,{text:a,...u}=s;Object.assign(n,u)}for(const o in n)gD.includes(o)||delete n[o];return n},getMarksByElement(e){const n={},r=Je.texts(e);for(const i of r){const[o]=i,{text:s,...a}=o;Object.assign(n,a)}for(const i in n)gD.includes(i)||delete n[i];return n},isMarkActive(e,n){var o,s;if(!(e!=null&&e.selection))return;const r=Je.get(e,(s=(o=e==null?void 0:e.selection)==null?void 0:o.anchor)==null?void 0:s.path);if(!at.isText(r))return!1;const i=Kl.getMarks(e);return!!(i&&i[n])},toggleMark(e,n){gx(e),Kl.isMarkActive(e,n)?z.removeMark(e,n):z.addMark(e,n,!0)},setFontSizeMark(e,n,r=Jp){gx(e),Number(n)===r?z.removeMark(e,Ri.fontSize):z.addMark(e,Ri.fontSize,Number(n))},setColorMark(e,n,r=ti){gx(e),n===r||n===null||n===void 0?z.removeMark(e,"color"):z.addMark(e,"color",n)}};function gx(e){e.selection||He.select(e,[0])}const Ka={wrapLink(e,n,r){Ka.isLinkActive(e)&&Ka.unwrapLink(e);const{selection:i}=e,o=i&&ke.isCollapsed(i),s={type:"link",url:r,children:[{text:n}]};if(o||Je.string(e)==="")He.insertNodes(e,s);else if(i)He.wrapNodes(e,s,{split:!0}),He.collapse(e,{edge:"end"});else{const a={anchor:z.start(e,[0]),focus:z.end(e,[0])};He.wrapNodes(e,s,{split:!0,at:a})}},unwrapLink(e,n){n||(n=e.selection,!n&&e.children&&e.children.length>0&&(n={anchor:z.start(e,[0]),focus:z.end(e,[0])})),He.unwrapNodes(e,{at:n,match:r=>dt.isElement(r)&&r.type==="link"})},isLinkActive(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:z.start(e,[0]),focus:z.end(e,[0])});const[r]=z.nodes(e,{match:i=>dt.isElement(i)&&i.type==="link",at:n});return!!r},getLinkElement(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:z.start(e,[0]),focus:z.end(e,[0])});const[r]=z.nodes(e,{match:i=>dt.isElement(i)&&i.type==="link",at:n});return r}},fj=20;function pD(e){const n=/^(?:\w+:)?\/\/(\S+)$/,r=/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/,i=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,o=/^[^\s\.]+\.\S{2,}$/;if(typeof e!="string")return!1;const s=e.match(r);if(s)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s[1]);const a=e.match(n);if(!a)return!1;const u=a[1];return u?!!(i.test(u)||o.test(u)):!1}const _8=e=>{const r=sh(e)[0];return!r||r.children.length===0?{}:Kl.getMarks(r)},hj=(e,n,r)=>{let i;if(r!=null&&r.length)i=r;else{const o=tt(e);if(o.length){const s=RG(e);if(!s)return;const a=Kl.getMarks(s),u=o.filter(f=>sh(f).some(g=>Kl.getMarks(g)[n]===a[n]));i=D8(e,u)}}i&&i.length&&i.forEach(o=>{Kl.toggleMark(o,n)})},dj=(e,n,r,i)=>{const o=f3(e,i);if(o&&o.length){const s=tt(e);o.forEach(a=>{let u;if(typeof r=="function"){const f=s.find(d=>sh(d).includes(a));u=r(f)}else u=r;Kl.setFontSizeMark(a,n,u)})}},gj=(e,n,r,i)=>{const o=f3(e,i);o&&o.length&&o.forEach(s=>{r&&He.select(s,r),n==="transparent"?z.removeMark(s,Ri.color):Kl.setColorMark(s,n)})},pj=(e,n,r)=>{const i=f3(e,r);i&&i.length&&i.forEach(o=>FC.setAlign(o,n))},f3=(e,n)=>{let r;return n!=null&&n.length?r=n:r=D8(e),r},LC={setTextAlign:pj,setTextColor:gj,setFontSize:dj,setTextMarks:hj},mD=()=>k.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),mj=({attributes:e,children:n,element:r})=>k.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":r.url,className:"plait-board-link",children:[k.jsx(mD,{}),n,k.jsx(mD,{})]}),vj=e=>{const{insertData:n,insertText:r,isInline:i}=e;return e.isInline=o=>o.type&&["link"].includes(o.type)||i(o),e.insertText=o=>{o&&pD(o)?Ka.wrapLink(e,o,o):r(o)},e.insertData=o=>{const s=o.getData("text/plain");s&&pD(s)?Ka.wrapLink(e,s,s):n(o)},e},vD=e=>{const{text:n,readonly:r,onChange:i,onComposition:o,afterInit:s}=e,a=K.useCallback(g=>k.jsx(xj,{...g}),[]),u=[n],f=K.useMemo(()=>{const g=vj(fG(lG(sG(j_()))));return s&&s(g),g},[]);K.useEffect(()=>{n!==f.children[0]&&(f.children=[n],f.onChange())},[n,f]);const d=g=>{const{selection:p}=f;if(p&&ke.isCollapsed(p)){const{nativeEvent:y}=g;if(on.isKeyHotkey("left",y)){g.preventDefault(),He.move(f,{unit:"offset",reverse:!0});return}if(on.isKeyHotkey("right",y)){g.preventDefault(),He.move(f,{unit:"offset"});return}}};return k.jsx(oG,{editor:f,initialValue:u,onChange:g=>{i&&i({newText:f.children[0],operations:f.operations})},children:k.jsx(QH,{className:"slate-editable-container plait-text-container",renderElement:g=>k.jsx(yj,{...g}),renderLeaf:a,readOnly:r===void 0?!0:r,onCompositionStart:g=>{o&&o(g)},onCompositionUpdate:g=>{o&&o(g)},onCompositionEnd:g=>{o&&o(g)},onKeyDown:d})})},yj=e=>{const{attributes:n,children:r,element:i}=e;switch(i.type){case"link":return k.jsx(mj,{...e});default:return k.jsx(wj,{...e})}},wj=({attributes:e,children:n,element:r})=>{const i={textAlign:r.align};return k.jsx("div",{style:i,...e,children:n})},xj=({children:e,leaf:n,attributes:r})=>(n.bold&&(e=k.jsx("strong",{children:e})),n.code&&(e=k.jsx("code",{children:e})),n.italic&&(e=k.jsx("em",{children:e})),n.underlined&&(e=k.jsx("u",{children:e})),k.jsx("span",{style:{color:n.color},...r,children:e})),Cj=e=>{const n=e;return n.renderText=(r,i)=>{const o=w1.createRoot(r);let s;const a=k.jsx(vD,{...i,afterInit:d=>{s=d,i.afterInit&&i.afterInit(d)}});o.render(a);let u={...i};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:d=>{if(!(d&&u&&!Object.keys(d).every(y=>d[y]===u[y])))return;const p=Ke.isReadOnly(s);u={...u,...d},o.render(k.jsx(vD,{...u})),p===!0&&u.readonly===!1?setTimeout(()=>{Ke.focus(s)},0):p===!1&&u.readonly===!0&&(Ke.blur(s),Ke.deselect(s))}}},n},Ej=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,globalPointerUp:o}=e,s=[];let a=!1;return e.pointerDown=u=>{const f=[u.clientX,u.clientY];s.length<2&&(e.viewport.zoom,s.push({pointerId:u.pointerId,lastPoint:f,currentPoint:f,hasMoved:!1})),n(u)},e.pointerMove=u=>{const f=[u.clientX,u.clientY];if(s.length>=2){const d=s.find(g=>g.pointerId===u.pointerId);if(d&&(d.currentPoint=f,d.hasMoved=!0,s.length===2&&s.every(g=>g.hasMoved))){const[g,p]=s,y=sS(...g.lastPoint,...p.lastPoint),w=sS(...g.currentPoint,...p.currentPoint),E=w[0]-y[0],S=w[1]-y[1],D=H.getBoardContainer(e).getBoundingClientRect(),A=D.width/2,P=D.height/2,b=e.viewport.zoom,R=bg(e);let L=R[0]+A/b-E/b,V=R[1]+P/b-S/b,Z=[L-D.width/2/b,V-D.height/2/b],ne=b;const le=bt(...g.lastPoint,...p.lastPoint),Pe=bt(...g.currentPoint,...p.currentPoint)/le,ue=[g.currentPoint[0]-g.lastPoint[0],g.currentPoint[1]-g.lastPoint[1]],he=[p.currentPoint[0]-p.lastPoint[0],p.currentPoint[1]-p.lastPoint[1]],ye=ue[0]*he[0]+ue[1]*he[1],W=Math.sqrt(ue[0]*ue[0]+ue[1]*ue[1]),O=Math.sqrt(he[0]*he[0]+he[1]*he[1]),N=ye/(W*O||1);if(N<-.7||N<=.8&&a&&Pe>=.01?a=!0:a=!1,a){ne=Math.min(Math.max(e.viewport.zoom*Pe,SA),TA);const j=H.getBoardContainer(e).getBoundingClientRect(),U=w[0]-j.x,I=w[1]-j.y;L=Z[0]+U/b,V=Z[1]+I/b,Z=[L-U/ne,V-I/ne]}sn.updateViewport(e,Z,ne),s.forEach(F=>{F.lastPoint=F.currentPoint,F.hasMoved=!1})}return}r(u)},e.pointerUp=u=>{const f=s.findIndex(d=>d.pointerId===u.pointerId);f!==-1&&s.splice(f,1),i(u)},e.globalPointerUp=u=>{const f=s.findIndex(d=>d.pointerId===u.pointerId);f!==-1&&s.splice(f,1),o(u)},e},N8=({value:e,children:n,options:r,plugins:i,viewport:o,theme:s,onChange:a,onSelectionChange:u,onValueChange:f,onViewportChange:d,onThemeChange:g})=>{const[p,y]=K.useState(()=>{const A=Pj(e,r,i,o,s),P=Sj(A);return{v:0,board:A,listRender:P}}),{board:w,listRender:E}=p,S=K.useCallback(()=>{if(a){const L={children:w.children,operations:w.operations,viewport:w.viewport,selection:w.selection,theme:w.theme};a(L)}const A=w.operations.some(L=>Yu.isSetSelectionOperation(L)),P=w.operations.some(L=>Yu.isSetViewportOperation(L)),b=w.operations.some(L=>Yu.isSetThemeOperation(L)),R=w.operations.length>0&&!w.operations.every(L=>Yu.isSetSelectionOperation(L)||Yu.isSetViewportOperation(L)||Yu.isSetThemeOperation(L));f&&R&&f(w.children),u&&A&&u(w.selection),d&&P&&d(w.viewport),g&&b&&g(w.theme.themeColorMode),y(L=>({v:L.v+1,board:w,listRender:E}))},[w,a,u,f]);K.useEffect(()=>(oy.set(w,()=>{if(w.operations.length&&w.operations.every(R=>R.type==="set_selection")){E.update(w.children,{board:w,parent:w,parentG:H.getElementHost(w)});return}const P=w.operations.length&&w.operations.some(R=>R.type==="set_viewport");if(P&&Yb(w)){KA(w,!1),E.update(w.children,{board:w,parent:w,parentG:H.getElementHost(w)});return}E.update(w.children,{board:w,parent:w,parentG:H.getElementHost(w)}),P?bE(w):Xb(w),cy(w),tt(w).forEach(R=>{hn.getElementRef(R).updateActiveSection()})}),sy.set(w,()=>{S()}),()=>{oy.delete(w),sy.delete(w)}),[w]);const D=K.useRef(!0);return K.useEffect(()=>{if(D.current){D.current=!1;return}e!==p.board.children&&!_v.get(w)&&(w.children=e,E.update(w.children,{board:w,parent:w,parentG:H.getElementHost(w)}),sn.fitViewport(w))},[e]),k.jsx(WE.Provider,{value:p,children:n})},Pj=(e,n,r,i,o)=>{let s=KI(LI(II(FI(qI(VI(OI(YI(XI(Cj(cj(uj(bI(e,n)))))))))))));return r.forEach(a=>{s=a(s)}),Ej(s),i&&(s.viewport=i),o&&(s.theme=o),s},Sj=e=>new C7(e);function Tj(e,n){return Math.sqrt(Dj(e,n))}function Dj(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function Wd(e,n,r){return[e[0]+(n[0]-e[0])*r,e[1]+(n[1]-e[1])*r]}function Aj(e,n){const r=e[n+0],i=e[n+1],o=e[n+2],s=e[n+3];let a=3*i[0]-2*r[0]-s[0];a*=a;let u=3*i[1]-2*r[1]-s[1];u*=u;let f=3*o[0]-2*s[0]-r[0];f*=f;let d=3*o[1]-2*s[1]-r[1];return d*=d,a<f&&(a=f),u<d&&(u=d),a+u}function _C(e,n,r,i){const o=i||[];if(Aj(e,n)<r){const s=e[n+0];o.length?Tj(o[o.length-1],s)>1&&o.push(s):o.push(s),o.push(e[n+3])}else{const a=e[n+0],u=e[n+1],f=e[n+2],d=e[n+3],g=Wd(a,u,.5),p=Wd(u,f,.5),y=Wd(f,d,.5),w=Wd(g,p,.5),E=Wd(p,y,.5),S=Wd(w,E,.5);_C([a,g,w,S],0,r,o),_C([S,E,y,d],0,r,o)}return o}function To(e,n=.15,r){const i=[],o=(e.length-1)/3;for(let s=0;s<o;s++){const a=s*3;_C(e,a,n,i)}return i}var Et;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(Et||(Et={}));var Ct;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(Ct||(Ct={}));var vt;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(vt||(vt={}));var Jo;(function(e){e.name="name",e.content="content"})(Jo||(Jo={}));var Eo;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(Eo||(Eo={}));var aa;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(aa||(aa={}));var wg;(function(e){e.table="table"})(wg||(wg={}));const e1={isTable:e=>e.type==="table",isVerticalText:e=>{var n;return((n=e.text)==null?void 0:n.direction)==="vertical"}},H8="plait-draw-plugin-key";var xg;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(xg||(xg={}));const gt={rectangleAndText:4},cw={strokeWidth:2,fill:g8},Bj={selectionStrokeWidth:pr},t1={width:100,height:100,strokeColor:ti,strokeWidth:2},yD={width:120,height:50},Mj={width:138,height:80},wD={width:100,height:80},Rj={width:120,height:100},fw={height:20,text:""},G8={defaultTextMaxWidth:34*14},px={width:44,height:44},Ga={width:120,height:60},kj={width:70,height:80},bj={width:80,height:80},Oj={width:140,height:70},Ij={width:124,height:60},j8={width:120,height:70},mx={width:160,height:100},NC={width:120,height:80},Fj={width:117,height:59},Lj={width:47,height:33},_j={width:68,height:100},Nj={width:300,height:240},Hj={width:210,height:150,texts:[{id:Jo.name,text:"",align:pi.left},{id:Jo.content,text:"",align:pi.left}]},Gj={width:18,height:80},Cv={width:120,height:60},jj={width:200,height:150},xD={width:40,height:40},zj={width:20,height:20},$j={width:70,height:56},Wj={width:120,height:56},Vj={width:70,height:34},Uj={width:400,height:280,texts:[{id:Jo.name,text:"Opt | Alt | Loop",align:pi.left},{id:Jo.content,text:"[Condition]",align:pi.left}]},Xj={width:230,height:180,texts:[{text:"Class",align:pi.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:pi.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:pi.left}]},Kj={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:pi.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:pi.left}]},z8={[Et.pentagonArrow]:yD,[Et.processArrow]:yD,[Et.cloud]:Rj,[Et.twoWayArrow]:Mj,[Et.leftArrow]:wD,[Et.rightArrow]:wD},$8={[Ct.connector]:px,[Ct.process]:Ga,[Ct.decision]:Oj,[Ct.data]:Ij,[Ct.terminal]:Ga,[Ct.manualInput]:Fj,[Ct.preparation]:Ga,[Ct.manualLoop]:Ga,[Ct.merge]:Lj,[Ct.delay]:Ga,[Ct.storedData]:Ga,[Ct.or]:px,[Ct.summingJunction]:px,[Ct.predefinedProcess]:Ga,[Ct.offPage]:Ga,[Ct.document]:j8,[Ct.multiDocument]:NC,[Ct.database]:kj,[Ct.hardDisk]:Ga,[Ct.internalStorage]:bj,[Ct.noteCurlyLeft]:mx,[Ct.noteCurlyRight]:mx,[Ct.noteSquare]:mx,[Ct.display]:Ga},W8={[vt.actor]:_j,[vt.useCase]:j8,[vt.container]:Nj,[vt.note]:Cv,[vt.package]:Hj,[vt.combinedFragment]:Uj,[vt.class]:Xj,[vt.interface]:Kj,[vt.activation]:Gj,[vt.object]:Cv,[vt.deletion]:xD,[vt.activityClass]:Cv,[vt.simpleClass]:Cv,[vt.component]:NC,[vt.template]:NC,[vt.componentBox]:jj,[vt.port]:zj,[vt.branchMerge]:xD,[vt.assembly]:Wj,[vt.providedInterface]:Vj,[vt.requiredInterface]:$j},qj={[vt.package]:Object.keys(Jo),[vt.combinedFragment]:Object.keys(Jo)},Sy=10,Yj=6,Zj=8,V8=[Ct.or,Ct.summingJunction,vt.activation,vt.deletion,vt.port,vt.branchMerge,vt.assembly,vt.providedInterface,vt.requiredInterface],Qj=[vt.package,vt.combinedFragment],Jj=[Ct.noteCurlyLeft,Ct.noteCurlyRight,Ct.noteSquare,vt.requiredInterface,vt.deletion],h3=()=>[...Object.keys(Et),...Object.keys(Ct),...Object.keys(vt)],U8=()=>Object.keys(aa),ez=()=>Object.keys(Ct),tz=()=>Object.keys(vt),nz=()=>Object.keys(Nn),rz=()=>Object.keys(My),iz=1e3,X8={[dr.default]:{strokeColor:ti,fill:"#FFFFFF"},[dr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[dr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[dr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[dr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[dr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},pp=42,oz={width:580,height:524},sz={width:524,height:580},az={width:580,height:524},lz={width:524,height:580},K8={[aa.swimlaneHorizontal]:lz,[aa.swimlaneVertical]:az,[aa.swimlaneHorizontalWithHeader]:sz,[aa.swimlaneVerticalWithHeader]:oz},Ty=5,q8={strokeWidth:2},uz=4,cz=6,fz=1,hz=1,dz=12,ng=3,gz="",n1=new WeakMap,CD=(e,n,r,i)=>{const o=n1.get(e);return n1.set(e,{...o,[w4(n,r)]:i})},Op=(e,n,r)=>n1.get(e)[w4(n,r)],ED=(e,n)=>{const r=n1.get(e);delete r[n],n1.set(e,r)};class d3{get shape(){return this.element.shape||this.element.type}constructor(n,r,i,o){this.board=n,this.texts=i,this.element=r,this.options=o}initialize(){const n=(this.board.getPluginOptions(kC)||{}).textPlugins;this.textManages=this.texts.map(i=>{const o=this.createTextManage(i,n);return CD(this.board,this.element,i,o),o}),hn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(n){const r=_.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(i=>{const o=Op(this.board,this.element,i);i.text&&o&&(o.draw(i.text),n.append(o.g),(this.element.angle||this.element.angle===0)&&o.updateAngle(r,this.element.angle))})}update(n,r,i,o){this.element=n;const s=_.getCenterPoint(this.board.getRectangle(this.element)),a=(this.board.getPluginOptions(kC)||{}).textPlugins,u=r.filter(f=>!i.find(d=>d.id===f.id));u.length&&u.forEach(f=>{const d=Op(this.board,n,f),g=this.textManages.findIndex(p=>p===d);g>-1&&f.text&&f.textHeight&&this.textManages.splice(g,1),d==null||d.destroy(),ED(this.board,f.id)}),i.forEach(f=>{if(f.text){let d=Op(this.board,this.element,f);d?(d.updateText(f.text),d.updateRectangle()):(d=this.createTextManage(f,a),CD(this.board,n,f,d),d.draw(f.text),o.append(d.g),this.textManages.push(d)),(this.element.angle||this.element.angle===0)&&d.updateAngle(s,this.element.angle)}})}createTextManage(n,r){return new M1(this.board,{getRectangle:()=>this.getRectangle(n),onChange:o=>this.options.onChange(this.element,o,n),getMaxWidth:()=>this.getMaxWidth(n),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,n):this.getRectangle(n),textPlugins:r})}getRectangle(n){const r=yi(this.shape).getTextRectangle;return r?r(this.element,n):Dr(this.element)}getMaxWidth(n){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(n).width}destroy(){hn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(r=>{ED(this.board,r.id)})}}const HC=e=>{const n=tt(e);return n&&n.length===1&&Se.isElementByTable(n[0])},pz=(e,n)=>(n!=null&&n.length?n:tt(e)).filter(i=>Se.isElementByTable(i)),g3=new WeakMap;function rg(e){return g3.get(e)}function Y8(e,n){return g3.set(e,n)}function PD(e){return g3.delete(e)}function R1(e,n){const r=e==null?void 0:e.buildTable(n);if(!r||!r.points||!r.columns||!r.rows)throw new Error("can not get table cells points");const i=_.getRectangleByPoints(r.points),o=r.columns.length,s=r.rows.length,a=SD(r.columns,i.width,o,!0),u=SD(r.rows,i.height,s,!1);return r.cells.map(d=>{const g=r.rows.findIndex(P=>P.id===d.rowId),p=r.columns.findIndex(P=>P.id===d.columnId);let y=i.x;for(let P=0;P<p;P++)y+=a[P];let w=i.y;for(let P=0;P<g;P++)w+=u[P];const E=TD(d,a,p,!0),S=y+E,D=TD(d,u,g,!1),A=w+D;return{...d,points:[[y,w],[S,A]]}})}function uh(e,n,r){try{const i=R1(e,n),o=i&&n.cells.findIndex(s=>s.id===r);return i[o]}catch{throw new Error("can not get table cell points")}}function SD(e,n,r,i){const o=[],s=i?"width":"height";let a=n;e.forEach((d,g)=>{d[s]&&(o[g]=d[s],a-=d[s])});const u=r-o.filter(d=>!!d).length,f=u>0?a/u:0;for(let d=0;d<r;d++)o[d]||(o[d]=f);return o}function TD(e,n,r,i){const o=i?e.colspan||1:e.rowspan||1;let s=0;for(let a=0;a<o;a++){const u=r+a;s+=n[u]}return s}function DD(e,n,r){const i=e.buildTable(n),o=R1(e,i),s=_.getRectangleByPoints([r,r]),a=o.find(u=>{const f=_.getRectangleByPoints(u.points);return _.isHit(s,f)});return a?i.cells.find(u=>u.id===a.id):null}function AD(e,n){const r=Z8(e,n);r&&r.edit()}function Z8(e,n){return Op(e,void 0,n)}const Q8=(e,n,r,i)=>{const o=e.columns.map(a=>a.id===n?{...a,width:r}:a),s=[e.points[0],[e.points[1][0]+i,e.points[1][1]]];return{columns:o,points:s}},J8=(e,n,r,i)=>{const o=e.rows.map(a=>a.id===n?{...a,height:r}:a),s=[e.points[0],[e.points[1][0],e.points[1][1]+i]];return{rows:o,points:s}};function mz(e,n,r,i){const o=`${i}Id`;e.forEach(s=>{s[o]===n&&(s[o]=r)})}function BD(e,n){e[`${n}s`].forEach(r=>{const i=Tn();mz(e.cells,r.id,i,n),r.id=i})}function vz(e){e.forEach(n=>{const r=Tn();n.id=r})}function e4(e){return e.text&&e.textHeight}function yz(e,n,r){const i=R1(e,n),o=r.map(s=>i.find(u=>u.id===s.id).points);return _.getRectangleByPoints(o)}const vx=(e,n,r=null)=>{const i={id:Tn(),rowId:e,columnId:n};return r!==null&&(i.textHeight=fj,i.text={children:[{text:r}],align:pi.center}),i},wz=6,yx=new WeakMap,Ng=e=>{let n="";switch(!0){case Se.isText(e):{n=Uo.text;break}case Se.isBasicShape(e):{n=Uo.basicShape;break}case Se.isFlowchart(e):{n=Uo.flowchart;break}case Se.isArrowLine(e):{n=Uo.arrowLine;break}case Se.isUML(e):n=Uo.UML}return n},t4=()=>({...uw(Uo.arrowLine)}),Ec=e=>{let n="";Se.isBasicShape({shape:e})?n=e===Et.text?Uo.text:Uo.basicShape:Se.isUML({shape:e})?n=Uo.UML:n=Uo.flowchart;const r={...uw(n)},i={...r.text};return delete r.text,{textProperties:i,geometryProperties:r}},p3=(e,n)=>{var s;const r=Ng(e);let i=((s=uw(r))==null?void 0:s.text)||{};const o=n.find(a=>a.type==="set_node");if(o){const{properties:a,newProperties:u}=o;for(const f in u){const d=u[f];d==null?delete i[f]:i[f]=d}for(const f in a)u.hasOwnProperty(f)||delete i[f];c3(r,"text",i)}},xz=(e,n)=>{const r=yx.has(e)?yx.get(e):[],i=r.indexOf(n);n===Et.text||i===0||(i!==-1?r.splice(i,1):r.length===wz&&r.pop(),r.unshift(n),yx.set(e,r))},Cz="debug:plait:line-mirror",Ev=Bg(Cz),m3=(e,n)=>{const r=[...n];return Pt.isVertical(r,e,ng)&&(r[0]=e[0]),Pt.isHorizontal(r,e,ng)&&(r[1]=e[1]),r};function Ez(e,n,r,i){const o={previous:null,next:null},s=e[i],a=e[i+1],u=Pt.isHorizontal(s,a),f=Pt.isVertical(s,a),d=e[i-1]??e[0],g=e[i-2]??n;(u&&Pt.isHorizontal(g,d)||f&&Pt.isVertical(g,d))&&(o.previous=d);const p=e[i+2]??e[e.length-1],y=e[i+3]??r;return(u&&Pt.isHorizontal(p,y)||f&&Pt.isVertical(p,y))&&(o.next=p),o}function Pz(e,n,r,i){let o=e,s=n;if(Pt.isHorizontal(e,n)){const a=Pt.getOffsetY(r.startPoint,r.endPoint);let u=e[1]+a;i.previous&&Math.abs(i.previous[1]-u)<ng?u=i.previous[1]:i.next&&Math.abs(i.next[1]-u)<ng&&(u=i.next[1]),o=[e[0],u],s=[n[0],u]}if(Pt.isVertical(e,n)){const a=Pt.getOffsetX(r.startPoint,r.endPoint);let u=e[0]+a;i.previous&&Math.abs(i.previous[0]-u)<ng?u=i.previous[0]:i.next&&Math.abs(i.next[0]-u)<ng&&(u=i.next[0]),o=[u,e[1]],s=[u,n[1]]}return[o,s]}function n4(e,n,r,i,o){let s=null,a=null;const u=i[o],f=i[o+1];if(!u||!f)return{index:s,deleteCount:a};const d=r.slice(1,-1),g=d.findIndex(y=>Pt.isEquals(y,u)),p=d.findIndex(y=>Pt.isEquals(y,f));if(Math.max(g,p)>-1){if(g>-1&&p>-1)return{index:g,deleteCount:2};if(g>-1&&p===-1)return g<d.length-1&&Pt.isAlign([d[g],d[g+1],u,f])?{index:g,deleteCount:2}:{index:g,deleteCount:1};if(g===-1&&p>-1)return p>0&&Pt.isAlign([d[p],d[p-1],u,f])?{index:p-1,deleteCount:2}:{index:p,deleteCount:1}}else for(let y=0;y<d.length-1;y++){const w=d[y],E=d[y+1];if(Pt.isAlign([w,E,u,f])){s=y,a=2;break}if(Pt.isAlign([w,E,u])){s=Math.min(y+1,d.length-1),a=1;break}if(Pt.isAlign([w,E,f])){s=Math.max(y-1,0),a=1;break}}if(s===null)if(a=0,d.length>0){const y=I1(e,n),w=F1(e,n,y),E=vg(R8(w,e)),S=Gl(E.slice(1,E.length-1)),D=[i[0],...d,i[i.length-1]],A=r4(e,D,S,w);for(let P=o-1;P>=0;P--){const b=A.slice(1,-1).findIndex(R=>Pt.isEquals(R,i[P]));if(b>-1){s=b+1;break}}s===null&&(s=0,Pt.isAlign(i)&&(a=d.length))}else s=0;return{index:s,deleteCount:a}}function r4(e,n,r,i){for(let o=1;o<n.length-2;o++)Sz(e,o,n,r,i);return n}const Sz=(e,n,r,i,o)=>{const s=r[n-1],a=r[n],u=r[n+1],f=r[n+2],d=[s,a],g=[u,f],p=Pt.isAlign(d),y=Pt.isAlign(g);let w=!1,E=!1;if(!p||!y){const S=GC(i,d[0],d[1]),D=GC(i,g[0],g[1]),A=S.length>0&&D.length>0;w=!p&&!A,E=!y&&!A}if(w||E){const S=[a,u],D=Dz(S,i),A=Az(e,S,D,o.sourceRectangle,o.targetRectangle);if(A.length===1){const P=A[0];w&&r.splice(n,1,P[0]),E&&r.splice(n+1,1,P[1])}else{const b=Pt.isHorizontal(a,u)?0:1;if(w){const R=[a[0],a[1]];R[b]=s[b],r.splice(n,1,R)}if(E){const R=[u[0],u[1]];R[b]=f[b],r.splice(n+1,1,R)}}}};function Tz(e,n,r,i,o){const{deleteCount:s}=n4(e,n,r,i,o);return s!==null&&s>1}function GC(e,n,r){let i=[],o=-1,s=-1;for(let a=0;a<e.length;a++)if(Pt.isAlign([e[a],n])&&(o=a),o>-1&&Pt.isAlign([e[a],r])){s=a;break}return o>-1&&s>-1&&(i=e.slice(o,s+1)),i}function Dz(e,n){const r=Pt.isHorizontal(e[0],e[1]),i=[];for(let o=0;o<n.length-1;o++){const s=n[o],a=n[o+1],u=Pt.isHorizontal(s,a,.1);r&&u&&i.push([s,a]),!r&&!u&&i.push([s,a])}return i}function Az(e,n,r,i,o){Ev.isDebug()&&Ev.clear();const s=[];for(let a=0;a<r.length;a++){const u=r[a],f=[n[0][0],n[0][1]],d=[n[1][0],n[1][1]],p=Pt.isHorizontal(f,d)?0:1;f[p]=u[0][p],d[p]=u[1][p];const y=_.getRectangleByPoints([f,d,...u]);!_.isHit(y,i)&&!_.isHit(y,o)&&(s.push([f,d]),Ev.isDebug()&&Ev.drawPolygon(e,_.getCornerPoints(y)))}return s}const i4=e=>e.length===1?!0:e.some((n,r)=>{const i=e[r-1],o=e[r+1],s=i&&[i,n],a=o&&[n,o],u=s&&Pt.isAlign(s),f=a&&Pt.isAlign(a);return r===0?!f:r===e.length-1?!u:!u&&!f}),MD=20,Bz=(e,n,r)=>{const i=$t();if(ei.isSourceMark(e,Kr.none)&&ei.isTargetMark(e,Kr.none))return null;const o=Qt(e),s=o*o/3;if(n.length===1&&(n=[n[0],[n[0][0]+.1,n[0][1]]]),!ei.isSourceMark(e,Kr.none)){const a=Zp(n[0],n[1],MD+s),u=RD(e,{marker:e.source.marker,source:a,target:n[0],isSource:!0},r);u&&i.appendChild(u)}if(!ei.isTargetMark(e,Kr.none)){const a=Zp(n[n.length-1],n[n.length-2],MD+s),u=RD(e,{marker:e.target.marker,source:a,target:n[n.length-1],isSource:!1},r);u&&i.appendChild(u)}return i},RD=(e,n,r)=>{const{marker:i,target:o,source:s,isSource:a}=n;let u;switch(i){case Kr.openTriangle:{u=bz(e,s,o,r);break}case Kr.solidTriangle:{u=kz(s,o,r);break}case Kr.arrow:{u=Rz(e,s,o,r);break}case Kr.sharpArrow:{u=Mz(s,o,r);break}case Kr.oneSideUp:{u=kD(s,o,a?"down":"up",r);break}case Kr.oneSideDown:{u=kD(s,o,a?"up":"down",r);break}case Kr.hollowTriangle:{u=Iz(s,o,r);break}case Kr.singleSlash:{u=Oz(s,o,a,r);break}}return u},Mz=(e,n,r)=>{const i=n,{pointLeft:o,pointRight:s}=kg(e,n,20),a=$t(),u=DE();let f=`M${s[0]},${s[1]}A25,25,20,0,1,${o[0]},${o[1]}L${i[0]},${i[1]}Z`;return u.setAttribute("d",f),u.setAttribute("stroke",`${r==null?void 0:r.stroke}`),u.setAttribute("stroke-width",`${r==null?void 0:r.strokeWidth}`),u.setAttribute("fill",`${r==null?void 0:r.stroke}`),a.appendChild(u),a},Rz=(e,n,r,i)=>{const o=Qn(n,r),s=Qt(e),a=[r[0]+s*o[0]/2,r[1]+s*o[1]/2],u=bt(...n,...a),f=[a[0]-(u*3/5+s)/2*o[0],a[1]-(u*3/5+s)/2*o[1]],{pointLeft:d,pointRight:g}=kg(n,a,30),p=ks([d,a,g,f],{...i,fill:i.stroke},!0);return p.querySelector("path").setAttribute("stroke-linejoin","round"),p},kz=(e,n,r)=>{const i=n,{pointLeft:o,pointRight:s}=kg(e,i,30);return ks([o,i,s],{...r,fill:r.stroke},!0)},bz=(e,n,r,i)=>{const o=Qn(n,r),s=Qt(e),a=[r[0]+s*o[0]/2,r[1]+s*o[1]/2],{pointLeft:u,pointRight:f}=kg(n,a,40);return ks([u,a,f],i)},kD=(e,n,r,i)=>{const{pointLeft:o,pointRight:s}=kg(e,n,40);return ks([r==="up"?s:o,n],i)},Oz=(e,n,r,i)=>{const o=bt(...e,...n),s=Zp(n,e,o/2),a=r?120:60,u=gg(...e,...s,a*Math.PI/180),f=gg(...n,...s,a*Math.PI/180);return ks([u,f],i)},Iz=(e,n,r)=>{const{pointLeft:i,pointRight:o}=kg(e,n,30);return ks([i,o,n],{...r,fill:"white"},!0)};class o4 extends es{canDraw(n){return!0}draw(n){let r;return r=Lz(this.board,n),r}}const Fz=(e,n,r,i,o,s)=>({id:Tn(),type:"arrow-line",shape:e,source:r,texts:o||[],target:i,opacity:1,points:n,...s}),Ki=(e,n)=>{switch(n.shape){case Nn.elbow:return pw(e,n);case Nn.curve:return s4(e,n);default:{const r=ei.getPoints(e,n),i=I1(e,n);return r[0]=i.source.point,r[r.length-1]=i.target.point,r}}},s4=(e,n)=>{if(n.points.length===2){const r=I1(e,n),{source:i,target:o}=r,s=r.source.boundElement,a=r.target.boundElement;let u=[i.point];const d=12+bt(...i.point,...o.point)/3;if(s&&u.push(tg(i.point,i.vector,d)),a&&u.push(tg(o.point,o.vector,d)),s&&!a||!s&&a){u.push(o.point);const p=Gz(u);return To(p)}return!s&&!a&&(u.push(tg(i.point,i.vector,d)),u.push(tg(o.point,o.vector,d))),u.push(o.point),To(u)}else{let r=ei.getPoints(e,n);r=vg(r);const i=P1(r);return To(i)}},Lz=(e,n)=>{const r=Qt(n),i=Gg(e,n),o=jg(e,n),s=xc(o,r),a={stroke:i,strokeWidth:r,strokeLineDash:s},u=$t();let f=Ki(e,n),d;n.shape===Nn.curve?d=H.getRoughSVG(e).curve(f,a):d=ks(f,a);const g=Tn();d.setAttribute("mask",`url(#${g})`),n.strokeStyle===Vi.dotted&&Zt(d,"round"),u.appendChild(d);const{mask:p,maskTargetFillRect:y}=jz(e,n,g);u.appendChild(p),d.appendChild(y);const w=Bz(n,f,{stroke:i,strokeWidth:r});return w&&u.appendChild(w),u},Cg=(e,n,r)=>{const i=P3(e,r,n),o=i.connectorPoint||i.edgePoint;return _z(o,r)},_z=(e,n)=>{let r=_.getRectangleByPoints(n.points);return[(e[0]-r.x)/r.width,(e[1]-r.y)/r.height]},Nz=(e,n)=>{const r=_.getRectangleByPoints(n.points),i=Pc(n);return yi(i).getConnectorPoints(r).find(s=>bt(...s,...e)<=Zj)},v3=(e,n,r)=>{const i=n.texts[r],o=Ki(e,n),s=w8(o,i.position);return{x:s[0]-i.width/2,y:s[1]-i.height/2,width:i.width,height:i.height}},Hz=e=>Og(e,{match:n=>Se.isArrowLine(n),recursion:n=>Se.isDrawElement(n)}),Gz=e=>{const n=[],r=e.length/3;for(let i=0;i<r;i++){const o=e[i],s=e[i+1],a=e[i+2],u=bt(...o,...s),f=bt(...a,...s),d=Zp(o,s,u*2/3),g=Zp(a,s,f*2/3);n.push(o,d,g,a)}return n},y3=(e,n,r,i,o,s,a)=>{const u=E3(e,i),f=u?Cg(e,i,u):void 0,d=o?Cg(e,r,o):void 0,g=u?u.id:void 0,p=new o4(e),y=t4();let w,E;w=y.source,E=y.target,w&&delete y.source,E&&delete y.target;const S=Fz(n,[r,i],{marker:w||Kr.none,connection:d,boundId:o==null?void 0:o.id},{marker:E||Kr.arrow,connection:f,boundId:g},[],{strokeWidth:q8.strokeWidth,...y,...a}),A=Ki(e,S)[0];return S.points[1]=m3(A,i),p.processDrawing(S,s),H.getElementTopHost(e).append(s),S};function jz(e,n,r){const i=hb();i.setAttribute("id",r);const o=Ki(e,n);let s=_.getRectangleByPoints(o);s=_.getOutlineRectangle(s,-30);const a=G2(s,{fill:"white"});i.appendChild(a),n.texts.forEach((d,g)=>{let p=v3(e,n,g);p=_.inflate(p,uz*2);const y=G2(p,{fill:"black"});i.appendChild(y)});const f=G2(s);return f.setAttribute("opacity","0"),f.setAttribute("fill","none"),{mask:i,maskTargetFillRect:f}}const w3=(e,n,r)=>{const i=n.texts;if(!i.length)return-1;const o=Ki(e,n);return i.findIndex(s=>{const a=w8(o,s.position),u={x:a[0]-s.width/2,y:a[1]-s.height/2,width:s.width,height:s.height};return _.isHit(u,_.getRectangleByPoints([r,r]))})},x3=e=>Qj.includes(e),ql=e=>Se.isGeometry(e)&&x3(e.shape),zz=e=>qj[e],$z=(e,n,r={})=>{const i=Tn(),o=Wz(e);return{id:i,type:"geometry",shape:e,angle:0,opacity:1,texts:o,points:n,...r}},Wz=e=>{var u;const r={...Ec(e).textProperties},i=r==null?void 0:r.align,o=(r==null?void 0:r.textHeight)||fw.height;r==null||delete r.align,r==null||delete r.textHeight;const s=((u=A3(e))==null?void 0:u.texts)||[];return(zz(e)||[]).map(f=>{const d=s==null?void 0:s.find(g=>(g==null?void 0:g.key)===f);return{id:f,text:ah((d==null?void 0:d.text)||"",i||(d==null?void 0:d.align)||pi.center,r),textHeight:o}})},Vz=(e,n)=>{const r=yi(e.shape),i=_.getRectangleByPoints([n,n]);let o;return r.getTextRectangle&&(o=e.texts.find(s=>{const a=r.getTextRectangle(e,{id:s.id});return _.isHit(i,a)})),o};class a4 extends es{canDraw(n){return!0}draw(n){let r;return r=Kz(this.board,n),r}}const oc=(e,n)=>{switch(n.shape){case s1.straight:return n.points;case s1.curve:{if(n.points.length===2)return To(n.points);{let r=n.points;const i=P1(r);return To(i)}}default:return null}},Uz=(e,n,r)=>({id:Tn(),type:"vector-line",shape:e,opacity:1,points:n,...r}),Xz=(e,n,r,i,o)=>{const s=new a4(e),a=t4(),u=Uz(n,[...r,i],{strokeWidth:q8.strokeWidth,...a}),f=r[r.length-1];return u.points[u.points.length-1]=m3(f,i),s.processDrawing(u,o),H.getElementTopHost(e).append(o),u},Kz=(e,n)=>{const r=Qt(n),i=Gg(e,n),o=jg(e,n),s=xc(o,r),a=dw(e,n),u={stroke:i,strokeWidth:r,strokeLineDash:s,fill:a},f=$t();let d=oc(e,n);const g=ks(d,u),p=Tn();return g.setAttribute("mask",`url(#${p})`),n.strokeStyle===Vi.dotted&&Zt(g,"round"),f.appendChild(g),f},Hg=e=>{const n=[];for(let r=0;r<e.length;r++){let i=r==e.length-1?0:r+1;n.push([(e[r][0]+e[i][0])/2,(e[r][1]+e[i][1])/2])}return n},l4=(e,n)=>{const r=[];for(let i=1;i<=e.length;i++){let o=e[i-1],s=i===e.length?e[0]:e[i];const a=CG(n,o,s);r.push(...a)}return r},ni=(e,n)=>{for(let r=1;r<=e.length;r++){let i=e[r-1],o=r===e.length?e[0]:e[r];if(y8(n,i,o))return[i,o]}return null};function jC(e){const n=e.width/7,r=e.height/3.2,i=n/8.5,o=r/20,s=[e.x+n,e.y+r],a=[{rx:i,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2,endY:e.y+r/2},{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*4.2,endY:e.y+r/2.2},{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5.8,endY:e.y+r},{rx:i,ry:o*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*6,endY:e.y+r*2.2},{rx:i,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5,endY:e.y+r*2.8},{rx:i,ry:o/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2.8,endY:e.y+r*2.8},{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+r*2.2},{rx:i,ry:o*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+r}];return{startPoint:s,arcCommands:a}}const u4={draw(e,n,r){const i=H.getRoughSVG(e),{startPoint:o,arcCommands:s}=jC(n),a=`M ${o[0]} ${o[1]} `+s.map(f=>`A ${f.rx} ${f.ry} ${f.xAxisRotation} ${f.largeArcFlag} ${f.sweepFlag} ${f.endX} ${f.endY}`).join(`
`)+" Z",u=i.path(a,{...r,fillStyle:"solid"});return fb(u,"round"),u},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:r,arcCommands:i}=jC(e);let o=1/0,s=n,a=r;for(const u of i){const f=Qy(n,a,u),d=bt(n[0],n[1],f[0],f[1]);d<o&&(o=d,s=f),a=[u.endX,u.endY]}return s},getEdgeByConnectionPoint(e,n){const r=u4.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2,s=o/1.5;return{height:i,width:s>0?s:0,x:n.x+gt.rectangleAndText+r+o/6,y:n.y+n.height/6+(n.height*4/6-i)/2}}},c4=(e,n,r)=>w3(e,n,r)!==-1,r1=(e,n)=>bA(n,e)<=yE,f4=(e,n,r)=>{const i=Ki(e,n);return c4(e,n,r)||r1(i,r)},h4=(e,n,r)=>{const i=oc(e,n);return b1(n.points)&&uc(r,i)||r1(i,r)},qz=(e,n)=>{const r=yi(e.shape);if(ql(e))return e.texts.some(o=>{const s=r.getTextRectangle(e,{id:o.id});return Dy(n,_.getCornerPoints(s),e.angle)});{const i=r.getTextRectangle?r.getTextRectangle(e):Dr(e);return Dy(n,_.getCornerPoints(i),e.angle)}},d4=(e,n)=>{const r=yi(e.shape);if(ql(e))return e.texts.some(o=>{const s=r.getTextRectangle(e,{id:o.id});return _.isPointInRectangle(s,n)});{const i=r.getTextRectangle?r.getTextRectangle(e):Dr(e);return _.isPointInRectangle(i,n)}},g4=e=>{if(!C3(e))return!0;const n=l3(e);return z.isEmpty(n,n.children[0])},Yz=(e,n,r)=>{const i=_.getRectangleByPoints([r.anchor,r.focus]);if(Se.isGeometry(n)){const o=bD(e,i,n);return o||!g4(n)&&qz(n,i)}if(Se.isImage(n))return bD(e,i,n);if(Se.isArrowLine(n)){const o=Ki(e,n);return ay(o,i)}if(Se.isVectorLine(n)){const o=oc(e,n);return ay(o,i)}return null},bD=(e,n,r)=>{const i=_.getRectangleByPoints(r.points);return Dy(n,_.getCornerPoints(i),r.angle)},Dy=(e,n,r)=>{let i=cI(n,r)||n;return ay(i,e)},p4=(e,n)=>{let r=m4(e,n),i=n.length;r&&(i=n.indexOf(r)+1);const o=n.slice(0,i),s=Qz(o);return s?s[0]:VG(e,o,"asc")[0]},m4=(e,n)=>{let r=null;for(let i=0;i<n.length;i++){const o=n[i];if(hw(e,o)||k1(o)){const s=dw(e,o);if(UG(s)){r=o;break}}}return r},Zz=(e,n)=>m4(e,[n])!==null,Qz=e=>{const n=e.filter(r=>Se.isText(r)||Se.isLine(r)||Se.isImage(r));return n.length?n:null},Jz="debug:plait:hit:shape:edge:sample-points",Vd=Bg(Jz),e$=[Et.cloud],t$=(e,n,r,i=!0)=>{const o=e.getRectangle(n);if(r=hc(e,r,n)||r,Se.isGeometry(n)&&o){if(Vd.isDebug()&&e$.includes(n.shape)){Vd.clear();const{startPoint:u,arcCommands:f}=jC(o),d=[u,...f.map(w=>[w.endX,w.endY])];Vd.drawCircles(e,d,5,!1);let g=1/0,p=r,y=u;for(const w of f){const E=Qy(r,y,w),S=bt(r[0],r[1],E[0],E[1]),{center:D}=OA(y,w);Vd.drawCircles(e,[D],8,!1,{fill:"yellow"}),S<g&&(g=S,p=E),y=[w.endX,w.endY]}Vd.drawCircles(e,[r],12,!1,{fill:"black",stroke:"black"}),Vd.drawCircles(e,[p],12,!1,{fill:"green",stroke:"green"})}if(v4(e,n,r,yE))return!0;const s=yi(Pc(n));if(Se.isText(n)){const u=Dr(n);return _.isPointInRectangle(u,r)}return i&&g4(n)&&!Zz(e,n)?!1:d4(n,r)||s.isInsidePoint(o,r)}if(Se.isImage(n)){const s=_.getRectangleByPoints(n.points);return _.isPointInRectangle(s,r)}return Se.isArrowLine(n)?f4(e,n,r):Se.isVectorLine(n)?h4(e,n,r):null},v4=(e,n,r,i)=>{const o=S4(n,r);return bt(o[0],o[1],r[0],r[1])<=i},n$=(e,n,r,i)=>{const o=_.inflate(_.getRectangleByPoints(n.points),i);return yi(Pc(n)).isInsidePoint(o,r)},r$=(e,n,r)=>{const i=e.getRectangle(n);if(r=hc(e,r,n)||r,Se.isGeometry(n)&&!Se.isGeometryByTable(n)){const o=yi(Pc(n)),s=o.isInsidePoint(i,r);if(s)return s;if(o.getTextRectangle){const a=d4(n,r);if(a)return a}}if(Se.isImage(n)){const o=_.getRectangleByPoints(n.points);return _.isPointInRectangle(o,r)}return Se.isArrowLine(n)?f4(e,n,r):Se.isVectorLine(n)?h4(e,n,r):null},Dr=e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}},Qt=e=>Se.isText(e)?0:e.strokeWidth||cw.strokeWidth,tu=(e,n)=>{xz(e,n.shape),Ze.insertNode(e,n,[e.children.length]),Mg(e),rh(e,n),sn.updatePointerType(e,nn.selection)},C3=e=>Se.isText(e)?!0:Se.isImage(e)?!1:Se.isGeometry(e)?M3(e):Se.isArrowLine(e)?sh(e).length>0:Se.isElementByTable(e)?e.cells.some(n=>e4(n)):!0,i$=e=>e.some(n=>C3(n)),k1=e=>Se.isDrawElement(e)?Se.isText(e)||Se.isArrowLine(e)||Se.isImage(e)?!1:Se.isVectorLine(e)?b1(e.points):Se.isGeometry(e)?x$(e):!0:!1,hw=(e,n)=>Se.isCustomGeometryElement(e,n)&&b1(n.points),E3=(e,n)=>{let r=y4(e,n);if(r){const i=P3(e,r,n);if(i.isHitConnector||i.isHitEdge)return r}return null},P3=(e,n,r)=>{const i=hc(e,r,n)||r,o=Nz(i,n),s=S4(n,i);return{isHitEdge:v4(e,n,i,Yj),isHitConnector:!!o,connectorPoint:o,edgePoint:s}},y4=(e,n,r=Sy)=>{let i=null;return o$(e,o=>{i===null&&n$(e,o,hc(e,n,o)||n,r*2)&&(i=o)}),i},o$=(e,n)=>{mi(e,r=>{!H.isBoard(r)&&Se.isShapeElement(r)&&n(r)},nh(e),!0)},OD=(e,n,r,i,o)=>yi(r).draw(e,n,i,o),s$=(e,n,r={hasMask:!0,hasConnector:!0})=>{const i=$t(),o=_.getRectangleByPoints(n.points),s=_.inflate(o,rC),a=Pc(n);let u;Se.isElementByTable(n)&&(u={element:n});const f=OD(e,s,a,{stroke:So,strokeWidth:rC},u);if(i.appendChild(f),r.hasMask){const d=OD(e,s,a,{stroke:So,strokeWidth:0,fill:k1(n)?BE:cw.fill,fillStyle:"solid"},u);i.appendChild(d)}return r.hasConnector&&yi(a).getConnectorPoints(o).forEach(g=>{const p=ih(H.getRoughSVG(e),g,8,{stroke:So,strokeWidth:pr,fill:"#FFF",fillStyle:"solid"});i.appendChild(p)}),i},w4=(e,n)=>e&&ql(e)?`${e.id}-${n.id}`:n.id,b1=e=>{const n=e[0],r=e[e.length-1];return n[0]===r[0]&&n[1]===r[1]},i1=e=>iw(e,xg.geometryText,fw.text),Gg=(e,n)=>{const r=m$(e.theme.themeColorMode);return n.strokeColor||r},dw=(e,n)=>{const r=Se.isFlowchart(n)&&k1(n)?v$(e.theme.themeColorMode):cw.fill;return n.fill||r},jg=(e,n)=>n.strokeStyle||Vi.solid;class x4 extends es{canDraw(n,r){return!0}draw(n,r){const i=_.getRectangleByPoints(n.points),o=n.shape;if(o===Et.text)return;const s=dw(this.board,n),a=Qt(n),u=Gg(this.board,n),f=jg(this.board,n),d=xc(f,a);return h$(this.board,_.inflate(i,-a),o,{stroke:u,strokeWidth:a,fill:s,strokeLineDash:d})}}function C4(e,n){const r=[],i=n.shape,o=10;if(i===Nn.straight){const s=Se.isArrowLine(n)?ei.getPoints(e,n):n.points;for(let a=0;a<s.length-1;a++)bt(...s[a],...s[a+1])<o||r.push([(s[a][0]+s[a+1][0])/2,(s[a][1]+s[a+1][1])/2])}if(i===Nn.curve){const s=Se.isArrowLine(n)?ei.getPoints(e,n):n.points,a=Se.isArrowLine(n)?s4(e,n):oc(e,n);if(s.length===2){const f=a.length-1,d=Math.round((0+f)/2);r.push(a[d])}else for(let u=0;u<s.length-1;u++){const f=a.findIndex(y=>y[0]===s[u][0]&&y[1]===s[u][1]),d=a.findIndex(y=>y[0]===s[u+1][0]&&y[1]===s[u+1][1]),g=Math.round((f+d)/2);bt(...s[u],...s[u+1])<o||r.push(a[g])}}if(i===Nn.elbow){const s=pw(e,n),a=F1(e,n);if(!R3(n,a)){const[u,f]=A4(e,n);for(let d=0;d<s.length-1;d++){if(d==0&&Pt.isEquals(s[d+1],u)||d===s.length-2&&Pt.isEquals(s[s.length-2],f))continue;const[g,p]=s[d],[y,w]=s[d+1],E=[(g+y)/2,(p+w)/2];r.push(E)}}}return r}var Yr;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(Yr||(Yr={}));const E4=(e,n,r)=>{let i=Se.isArrowLine(n)?ei.getPoints(e,n):n.points;const o=zC(i,r);if(o!==-1){const u=o;if(o===0)return{handle:Yr.source,handleIndex:u};if(o===i.length-1)return{handle:Yr.target,handleIndex:u};if(n.shape!==Nn.elbow)return{handleIndex:u}}const s=C4(e,n),a=zC(s,r);if(a!==-1)return{handle:Yr.addHandle,handleIndex:a}};function zC(e,n){const r=e.map(o=>({x:o[0]-Bs/2,y:o[1]-Bs/2,width:Bs,height:Bs})),i=r.find(o=>_.isHit(_.getRectangleByPoints([n,n]),o));return i?r.indexOf(i):-1}class P4 extends es{constructor(n,r={active:!0}){super(n,r),this.board=n,this.onlySelectedCurrentLine=!1}canDraw(n,r){return!!r.selected}draw(n,r){const i=$t(),o=tt(this.board);if(this.onlySelectedCurrentLine=o.length===1,this.onlySelectedCurrentLine){i.classList.add(C1);const s=Se.isArrowLine(n)?ei.getPoints(this.board,n):n.points;let a=[...s],u=[];n.shape===Nn.elbow&&(a=s.slice(0,1).concat(s.slice(-1)),u=B4(this.board,n,r.linePoints)),a.map(p=>zp(this.board,p)).forEach(p=>{const y=tD(this.board,p);i.appendChild(y)});const g=C4(this.board,n).map(p=>zp(this.board,p));if(!H.hasBeenTextEditing(this.board))for(let p=0;p<g.length;p++){const y=g[p];if(n.shape===Nn.elbow&&u.length){const E=zC(g,y);if(Tz(this.board,n,[...s],u,E)){const D=tD(this.board,y);i.appendChild(D);continue}}const w=dG(this.board,y);i.appendChild(w)}}else{const s=this.board.getRectangle(n);if(s){const a=ki(this.board,s);let u="0.5";(a.height===0||a.width===0)&&(u="0.8");const f=da(this.board,a,{stroke:Fg,strokeWidth:Bj.selectionStrokeWidth});f.style.opacity=u,i.appendChild(f)}}return i}needUpdate(){return tt(this.board).length===1!==this.onlySelectedCurrentLine}}const fP=class fP extends es{constructor(n){super(n,{active:!0}),this.board=n,this.hoverElement=null}canDraw(n,r){const i=tt(this.board);return!!(r.selected&&i.length===1&&!vi(this.board))}draw(n,r){return this.autoCompleteG=$t(),D3(this.board,n,!0).forEach((o,s)=>{const a=ih(H.getRoughSVG(this.board),o,cz,{stroke:"none",fill:jp(Fg,fz),fillStyle:"solid"});a.classList.add(`line-auto-complete-${s}`),this.autoCompleteG.appendChild(a)}),this.autoCompleteG}removeAutoCompleteG(n){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${n}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};fP.key="line-auto-complete-generator";let nu=fP;class a$ extends d3{get textManage(){return this.textManages[0]}constructor(n,r,i,o){super(n,r,[{id:r.id,text:i,textHeight:r.textHeight}],o)}update(n,r,i,o){ql(n)||super.update(n,[{text:r,id:n.id,textHeight:n.textHeight}],[{text:i,id:n.id,textHeight:n.textHeight}],o)}}class gw extends es{canDraw(n,r){return!0}draw(n,r){const i=_.getRectangleByPoints(n.points),o=Qt(n),s=Gg(this.board,n),a=jg(this.board,n),u=xc(a,o);return yi(wg.table).draw(this.board,i,{strokeWidth:o,stroke:s,strokeLineDash:u},{element:n})}}const Pc=e=>Se.isImage(e)?Et.rectangle:Se.isTable(e)?wg.table:e.shape,S3=(e,n)=>Se.isUMLClassOrInterface({shape:n})?new gw(e):new x4(e),l$=(e,n,r)=>{const i=Ec(n),o={id:Tn(),type:"geometry",angle:0,opacity:1,points:r,strokeWidth:t1.strokeWidth,...i.geometryProperties};let s,a;return n===vt.class?(s=[{id:Tn(),height:30},{id:Tn()},{id:Tn()}],a=[{id:Tn()}]):(s=[{id:Tn(),height:50},{id:Tn()}],a=[{id:Tn()}]),{...o,shape:n,rows:s,columns:a,cells:u$(e,s,a,n)}},u$=(e,n,r,i)=>{var f;const o=Ec(i),s=n.length*r.length,a=((f=A3(i))==null?void 0:f.texts)||[],u=a.map(d=>O1(e,d.text||i1(e),o.textProperties["font-size"]).height);return new Array(s).fill("").map((d,g)=>{const p=Math.floor(g/r.length),y=g%r.length;return{id:Tn(),rowId:n[p].id,columnId:r[y].id,textHeight:u[g],text:{children:[{text:a[g].text}],align:a[g].align}}})},T3=(e,n,r,i={},o={})=>V8.includes(e)?f$(e,n,i):c$(e,n,r,i,o),c$=(e,n,r,i={},o={})=>{let s={},a=pi.center,u=fw.height;return e===Et.text&&(s={autoSize:!0},a=void 0),o={...o},o!=null&&o.align&&(a=o==null?void 0:o.align),o!=null&&o.textHeight&&(u=o==null?void 0:o.textHeight),o==null||delete o.align,o==null||delete o.textHeight,{id:Tn(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:u,text:ah(r,a,o),points:n,...s,...i}},f$=(e,n,r={})=>({id:Tn(),type:"geometry",shape:e,angle:0,opacity:1,points:n,...r}),h$=(e,n,r,i)=>yi(r).draw(e,n,i),S4=(e,n)=>{const r=_.getRectangleByPoints(e.points),i=Pc(e);return yi(i).getNearestPoint(r,n)},d$=e=>$8[e],g$=e=>z8[e]||t1,p$=e=>W8[e],D3=(e,n,r=!1)=>{const i=(12+Bs/2)*2,o=_.getRectangleByPoints(n.points),s=ki(e,o),a=r?s:o;return _.getEdgeCenterPoints(_.inflate(a,i))},T4=(e,n)=>n.findIndex(r=>{const i=_.getRectangleByPoints([e]);let o=_.getRectangleByPoints([r]);return o=_.inflate(o,Bs),_.isHit(i,o)}),m$=e=>X8[e].strokeColor,v$=e=>X8[e].fill,O1=(e,n,r)=>{r=r?Number(r):Jp;const i=B1(e,ah(n),{fontSize:r,fontFamily:lg});return{width:i.width+gt.rectangleAndText*2,height:i.height}},D4=(e,n)=>{const r=A3(e);return _.getPoints(_.getRectangleByCenterPoint(n,r.width,r.height))},A3=e=>{const n=ez().includes(e),r=tz().includes(e);return n?d$(e):r?p$(e):g$(e)},B3=(e,n,r,i)=>{const o=Ec(Et.text);return i=i||_.getRectangleByPoints(n).height,T3(Et.text,n,r,o.geometryProperties,{...o.textProperties,textHeight:i})},o1=(e,n,r)=>{const i=Ec(r),o=O1(e,fw.text,i.textProperties["font-size"]).height;return Se.isUMLClassOrInterface({shape:r})?l$(e,r,n):x3(r)?$z(r,n,{strokeWidth:t1.strokeWidth,...i.geometryProperties}):T3(r,n,"",{strokeWidth:t1.strokeWidth,...i.geometryProperties},{...i.textProperties,textHeight:o})},wx=(e,n,r)=>{const i=r?Op(e,n,r):_g(n);i&&i.edit(()=>{})},M3=e=>w$(e)||ql(e),y$=e=>!V8.includes(e)&&!x3(e),w$=e=>Se.isGeometry(e)&&y$(e.shape),x$=e=>!Jj.includes(e.shape),C$=e=>e.source.boundId&&e.source.boundId===e.target.boundId,R3=(e,n)=>zG(n)&&!C$(e),pw=(e,n)=>{const r=I1(e,n),i=F1(e,n,r);if(R3(n,i))return Gl(SG(r.source.point,r.source.direction,r.target.point,r.target.direction,d8));const o=vg(R8(i,e)),s=o.slice(1,o.length-1);if(n.points.length===2)return Gl(o);{const a=Gl(s),f=vg(ei.getPoints(e,n)).slice(1,-1);if(i4(f))return Gl(o);const d=[a[0],...f,a[a.length-1]],g=r4(e,d,a,i),p=[o[0]];for(let w=0;w<g.length-1;w++){let E=g[w],S=g[w+1];if(Pt.isAlign([E,S]))p.push(E);else{const A=GC(a,E,S);A.length?(p.push(E),p.push(...A)):(p.push(E),console.log("unknown data points"))}}return p.push(o[o.length-2],o[o.length-1]),Gl(p)}},A4=(e,n)=>{const r=F1(e,n);return[r.nextSourcePoint,r.nextTargetPoint]},E$=(e,n,r)=>{let i=n.source.boundId?As(e,n.source.boundId):void 0,o=n.target.boundId?As(e,n.target.boundId):void 0;if(!i){const d=r.source;i=ID(d.point,d.vector)}if(!o){const d=r.target;o=ID(d.point,d.vector)}let s=_.getRectangleByPoints(i.points);const a=Qa(_.getCornerPoints(s),i)||_.getCornerPoints(s);s=_.getRectangleByPoints(a),s=_.inflate(s,Qt(i)*2);let u=_.getRectangleByPoints(o.points);const f=Qa(_.getCornerPoints(u),o)||_.getCornerPoints(u);return u=_.getRectangleByPoints(f),u=_.inflate(u,Qt(o)*2),{sourceRectangle:s,targetRectangle:u}},ID=(e,n)=>{const r=tg(e,n,-25),i=_.getPoints(_.getRectangleByCenterPoint(r,50,50));return T3(Et.rectangle,i,"")};function B4(e,n,r){let i=r??pw(e,n);const[o,s]=A4(e,n);return i.splice(0,1,o),i.splice(-1,1,s),vg(i)}const Ay=(e,n)=>(n!=null&&n.length?n:tt(e)).filter(i=>Se.isDrawElement(i)),k3=e=>tt(e).filter(r=>Se.isArrowLine(r)),M4=e=>tt(e).filter(r=>Se.isVectorLine(r)),P$=e=>{const n=tt(e);return n&&n.length===1&&Se.isSwimlane(n[0])},S$=e=>{const n=tt(e);return n&&n.length===1&&Se.isLine(n[0])},R4=(e,n,r)=>{const i=o1(e,n,r);return tu(e,i),i},T$=(e,n,r)=>{const i=Ec(Et.text),o=O1(e,r,i.textProperties["font-size"]),s=[n,[n[0]+o.width,n[1]+o.height]],a=B3(e,s,r);tu(e,a)},D$=(e,n,r,i)=>{const o=Yf(n),s=tn.get(e,i),a={points:o,textHeight:r};Se.isText(s)&&s.autoSize&&(a.autoSize=!1),Ze.setNode(e,a,i)},A$=(e,n)=>{const r=tt(e),i=[];r.forEach(o=>{if(Se.isGeometry(o)&&!Se.isText(o)){const s=H.findPath(e,o);Ze.setNode(e,{shape:n},s),gV(e,{...o,shape:n},i)}}),i.length&&i.forEach(o=>{qi.resizeArrowLine(e,o.property,o.path)})},k4=(e,n,r,i)=>{let o=n.points,s=n.autoSize;const a=gt.rectangleAndText;if(s){const u=r<Ty?Ty:r,f=l3(n);if(FC.isActive(f,pi.right))o=[[o[1][0]-(u+a*2),o[0][1]],[o[1][0],o[0][1]+i]];else if(FC.isActive(f,pi.center)){const d=Math.abs(o[0][0]-o[1][0]),g=(u-d)/2;o=[[o[0][0]-g-a,o[0][1]],[o[1][0]+g+a,o[0][1]+i]]}else o=[o[0],[o[0][0]+u+a*2,o[0][1]+i]];Za(n)&&(o=i3(_.getRectangleByPoints(n.points),_.getRectangleByPoints(o),_.getCenterPoint(_.getRectangleByPoints(n.points)),_.getCenterPoint(_.getRectangleByPoints(o)),n.angle))}return{points:o}},B$=(e,n,r,i,o)=>{const s={text:r,textHeight:o,...k4(e,n,i,o)},a=e.children.findIndex(u=>u===n);Ze.setNode(e,s,[a])},M$=(e,n,r,i)=>{if(n.autoSize){const o={textHeight:i,...k4(e,n,r,i)},s=Pt.isEquals(n.points[0],o.points[0])&&Pt.isEquals(n.points[1],o.points[1]),a=Math.round(i)===Math.round(n.textHeight);if(!s||!a){const u=e.children.findIndex(f=>f===n);Ze.setNode(e,o,[u])}}},R$=(e,n,r)=>{const{width:i,height:o,url:s}=n,a=H.getBoardContainer(e).clientWidth,u=H.getBoardContainer(e).clientHeight,f=It(e,Lt(e,a/2,u/2)),d=r?[r,[r[0]+i,r[1]+o]]:[[f[0]-i/2,f[1]-o/2],[f[0]+i/2,f[1]+o/2]],g={id:Tn(),type:"image",points:d,url:s};Ze.insertNode(e,g,[e.children.length]),Ze.addSelectionWithTemporaryElements(e,[g])},b4=(e,n,r)=>{Ze.setNode(e,n,r)},k$=(e,n,r)=>{const i=H.findPath(e,n);Ze.setNode(e,{texts:r},i)},b$=(e,n,r)=>{var a;const i=H.findPath(e,n),s=[...(a=n.texts)!=null&&a.length?[...n.texts]:[]];s.splice(r,1),Ze.setNode(e,{texts:s},i)},O$=(e,n,r)=>{c3(Uo.arrowLine,n,r),k3(e).forEach(o=>{const s=H.findPath(e,o);let a=n===Ms.source?o.source:o.target;a={...a,marker:r},Ze.setNode(e,{[n]:a},s)})},I$=(e,n)=>{k3(e).map(i=>{const o={...n};if(i.shape===n.shape)return;const s=H.findPath(e,i);Ze.setNode(e,o,s)})},F$=(e,n,r,i)=>{const o=ei.getPoints(e,n),s=r===Ms.source?o[0]:o[o.length-1],a=Cg(e,s,i);if(a){let u=n.source,f=n.target;r===Ms.source?u={...u,boundId:i.id,connection:a}:f={...f,boundId:i.id,connection:a};const d=H.findPath(e,n);b4(e,{source:u,target:f},d)}};function L$(e){const n={...e};return Se.isHorizontalSwimlane(e)?(n.cells=e.cells.map((r,i)=>(i===0&&e.header&&(r={...e.cells[0],rowspan:e.rows.length}),r.text&&r.textHeight&&!r.text.direction&&(r={...r,text:{...r.text,direction:"vertical"}}),r)),n):(e.header&&(n.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),n)}const O4=(e,n)=>{const r=K8[e];return _.getPoints(_.getRectangleByCenterPoint(n,r.width,r.height))},By=(e,n)=>{const r=H$(e),i=G$(e),o=n[1][0]-n[0][0],s=n[1][1]-n[0][1],a=FD(i,"row",r,s),u=FD(i,"column",r,o);return{id:Tn(),type:"swimlane",shape:i,points:n,rows:a,columns:u,header:r,cells:_$(i,a,u,r)}},FD=(e,n,r,i)=>{const o=a=>new Array(a).fill("").map(()=>({id:Tn()}));let s=o(3);if(n==="row"&&e===Eo.swimlaneVertical||n==="column"&&e===Eo.swimlaneHorizontal){s=r?s:o(2);const a=n==="row"?"height":"width";let u=pp;i<pp*s.length&&(u=Math.min(i/s.length/pp*pp,pp)),s=s.map((f,d)=>d===0||d===1&&r?{...f,[a]:u}:f)}return s},_$=(e,n,r,i)=>{let o=[],s=0;i&&(o=[vx(n[0].id,r[0].id,"New Swimlane")],s=1);const a=new Array(6).fill("").map((u,f)=>{if(f<3){const p=e===Eo.swimlaneVertical?n[s].id:n[f].id,y=e===Eo.swimlaneVertical?r[f].id:r[s].id;return vx(p,y,i?"Lane":"New Swimlane")}const d=e===Eo.swimlaneVertical?n[s+1].id:n[f-3].id,g=e===Eo.swimlaneVertical?r[f-3].id:r[s+1].id;return vx(d,g)});return[...o,...a]},N$=e=>Se.isHorizontalSwimlane(e)?e.rows.length:Se.isVerticalSwimlane(e)?e.columns.length:0,H$=e=>[aa.swimlaneHorizontalWithHeader,aa.swimlaneVerticalWithHeader].includes(e),G$=e=>[aa.swimlaneHorizontalWithHeader,aa.swimlaneHorizontal].includes(e)?Eo.swimlaneHorizontal:Eo.swimlaneVertical,I4=(e,n=e.pointer)=>U8().includes(n),j$=(e,n,r)=>{if(r>0&&Se.isSwimlane(n)){const i=N$(n);if(Se.isHorizontalSwimlane(n))if(r>i)F4(e,n,n.rows.length,r-i);else{const o=n.rows.length-(i-r);_4(e,n,o,i-r)}if(Se.isVerticalSwimlane(n))if(r>i)L4(e,n,n.columns.length,r-i);else{const o=n.columns.length-(i-r);N4(e,n,o,i-r)}}},F4=(e,n,r,i=1)=>{if(Se.isHorizontalSwimlane(n)){const o=[...n.rows],s=[];for(let g=0;g<i;g++)s.push({id:Tn()});o.splice(r,0,...s);const a=[...n.cells];s.forEach(g=>{a.push(...H4(n,g.id,"column"))});const u=uh(e,n,n.cells[n.cells.length-1].id).points,f=_.getRectangleByPoints(u).height,d=[n.points[0],[n.points[1][0],n.points[1][1]+f*i]];mw(e,n,n.columns,o,a,d)}},L4=(e,n,r,i=1)=>{if(Se.isVerticalSwimlane(n)){const o=[...n.columns],s=[];for(let g=0;g<i;g++)s.push({id:Tn()});o.splice(r,0,...s);const a=[...n.cells];s.forEach(g=>{a.push(...H4(n,g.id,"row"))});const u=uh(e,n,n.cells[n.cells.length-1].id).points,f=_.getRectangleByPoints(u).width,d=[n.points[0],[n.points[1][0]+f*i,n.points[1][1]]];mw(e,n,o,n.rows,a,d)}},_4=(e,n,r,i=1)=>{if(Se.isHorizontalSwimlane(n)){if(i>n.rows.length)return;const o=[...n.rows];if(o.splice(r,i),o.length===0){const s=H.findPath(e,n);Ze.removeNode(e,s)}else{let s=[...n.cells];const a=[];for(let d=r;d<i+r;d++){const g=n.rows[d];a.push(g),s=s.filter(p=>p.rowId!==g.id)}let u=0;a.forEach(d=>{if(d.height)u+=d.height;else{const g=n.cells.find(y=>y.rowId===d.id),p=uh(e,n,g.id).points;u+=_.getRectangleByPoints(p).height}});const f=[n.points[0],[n.points[1][0],n.points[1][1]-u]];mw(e,n,n.columns,o,s,f)}}},N4=(e,n,r,i=1)=>{if(Se.isVerticalSwimlane(n)){if(i>n.columns.length)return;const o=[...n.columns];if(o.splice(r,i),o.length===0){const s=H.findPath(e,n);Ze.removeNode(e,s)}else{let s=[...n.cells];const a=[];for(let d=r;d<i+r;d++){const g=n.columns[d];a.push(g),s=s.filter(p=>p.columnId!==g.id)}let u=0;a.forEach(d=>{if(d.width)u+=d.width;else{const g=n.cells.find(y=>y.columnId===d.id),p=uh(e,n,g.id).points;u+=_.getRectangleByPoints(p).width}});const f=[n.points[0],[n.points[1][0]-u,n.points[1][1]]];mw(e,n,o,n.rows,s,f)}}},H4=(e,n,r)=>{const i=e[`${r}s`].map(o=>({id:Tn(),rowId:r==="row"?o.id:n,columnId:r==="row"?n:o.id}));return e.header&&i.shift(),i[0]={...i[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:pi.center,direction:r==="row"?void 0:"vertical"},textHeight:20},i},mw=(e,n,r,i,o,s)=>{const a=H.findPath(e,n);Ze.setNode(e,{columns:r,rows:i,cells:o,points:s},a)},z$=(e,n,r)=>{var a;const o={texts:(a=n.texts)==null?void 0:a.map(u=>u.id===r.id?{...u,...r}:u)},s=e.children.findIndex(u=>u===n);Ze.setNode(e,o,[s])},$$=(e,n,r,i,o)=>{const s=tn.get(e,n),a=uh(e,s,r),u=s.cells.findIndex(S=>S.id===a.id);let f=[...s.rows],d=[...s.columns],g=[...s.cells],p=[...s.points];const{width:y,height:w}=_.getRectangleByPoints(a.points),E=gt.rectangleAndText;if(e1.isVerticalText(a)){const S=s.columns.findIndex(D=>D.id===a.columnId);if(o>y){const D=o+E*2,A=D-y,P=Q8(s,s.columns[S].id,D,A);p=P.points,d=P.columns}}else{const S=s.rows.findIndex(P=>P.id===a.rowId),A=s.rows[S].height??Math.max(w,a.textHeight||0);if(o>A){const P=o+E*2,b=P-A,R=J8(s,s.rows[S].id,P,b);p=R.points,f=R.rows}}g[u]={...g[u],textHeight:o,text:i},Ze.setNode(e,{rows:f,columns:d,cells:g,points:p},n)},W$=(e,n,r,i)=>{const o=rg(n);let s=n.cells;o!=null&&o.length?s=n.cells.map(a=>o.map(u=>u.id).includes(a.id)?LD(a,r):a):s=n.cells.map(a=>a.text&&a.textHeight?LD(a,r):a),Ze.setNode(e,{cells:s},i)},LD=(e,n)=>{const r={...e};return n?r.fill=n:delete r.fill,r},V$=(e,n)=>{M4(e).map(i=>{if(i.shape===n.shape)return;const o=H.findPath(e,i);Ze.setNode(e,{...n},o)})},U$=(e,n,r,i)=>{const s=U8().includes(r);let a=$8[r]||z8[r]||W8[r]||t1;s&&(a=K8[r]);const u=Yd(i);if(u){let f=0;[Gt.left,Gt.right].includes(u)?f=-a.width/2:f=-a.height/2;const d=tg(n,i,f),g=_.getPoints(_.getRectangleByCenterPoint(d,a.width,a.height));if(s){const p=By(r,g);return tu(e,p),p}return R4(e,g,r)}return null},qi={setText:B$,setDrawTexts:z$,insertGeometry:R4,resizeGeometry:D$,insertText:T$,setTextSize:M$,resizeArrowLine:b4,setArrowLineTexts:k$,removeArrowLineText:b$,setArrowLineMark:O$,setArrowLineShape:I$,setVectorLineShape:V$,insertImage:R$,connectArrowLineToDraw:F$,switchGeometryShape:A$,setTableText:$$,addSwimlaneRow:F4,addSwimlaneColumn:L4,removeSwimlaneRow:_4,removeSwimlaneColumn:N4,updateSwimlaneCount:j$,setTableFill:W$,insertDrawByVector:U$},$C=(e,n,r,i=0)=>{const o=_.getCenterPoint(n),s=v8(n,Bs);if(i){const a=Ir([r],o,-i)[0];let u=s.find(f=>_.isHit(_.getRectangleByPoints([a,a]),f.rectangle));return u&&(u.cursorClass=pG(u.cursorClass,i)),u}else return s.find(a=>_.isHit(_.getRectangleByPoints([r,r]),a.rectangle))},X$=e=>({x:e.x-vy-bp,y:e.y+e.height+vy,width:bp,height:bp}),K$="debug:plait:resize-for-rotation",Ss=Bg(K$);function q$(e){const{afterChange:n,drawSelectionRectangle:r}=e;let i,o,s=!1,a=null;const u=()=>{const d=tt(e);return d.length>=1&&d.every(g=>(Se.isDrawElement(g)||Se.isCustomGeometryElement(e,g)&&g.points.length>1)&&!S$(e)&&!P$(e))};return lh(e,{key:"draw-elements",canResize:u,hitTest:d=>{const g=tt(e),p=dn(e,g,!1),y=Co(g),w=$C(e,p,d,y);return w?{element:[...g],rectangle:p,handle:w.handle,cursorClass:w.cursorClass}:null},onResize:(d,g)=>{i==null||i.remove(),Ss.isDebug()&&Ss.clear();const p=Vv(e,d.handle),y=g.isShift||d.element.length===1&&Se.isImage(d.element[0]),w=_.getCenterPoint(d.rectangle),E=xy(d.handle),{originPoint:S,handlePoint:D}=WC(e,E,d.rectangle),A=Co(d.element);let P;if(A){P={angle:A,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[L,V]=Ir([g.startPoint,g.endPoint],w,-P.angle);g.startPoint=L,g.endPoint=V}const b=G4(e,d,g,{originPoint:S,handlePoint:D},y,p),R=vw(e,d.element,b);if(a=R.activePoints,i=R.snapG,H.getElementTopHost(e).append(i),P){const L=_.getPoints(d.rectangle),V=L.map(Pe=>Wl(Pe,S,R.xZoom,R.yZoom)),Z=_.getRectangleByPoints(V);Ss.isDebug()&&Ss.drawRectangle(e,Z,{stroke:"blue"});const ne=_.getCenterPoint(Z),le=i3(_.getRectangleByPoints(L),_.getRectangleByPoints(V),w,ne,P.angle),de=_.getCenterPoint(_.getRectangleByPoints(le));P=Object.assign(P,{offsetX:de[0]-ne[0],offsetY:de[1]-ne[1],newCenterPoint:de}),Ss.isDebug()&&Ss.drawRectangle(e,le)}d.element.forEach(L=>{const V=H.findPath(e,L);let Z;if(P){Z=xC(L.points,w,-P.angle).map(de=>Wl(de,S,R.xZoom,R.yZoom));const le=Z.map(de=>[de[0]+P.offsetX,de[1]+P.offsetY]);Z=xC(le,P.newCenterPoint,P.angle)}else Za(L)&&(s=!0),Za(L)&&fI(L.angle)?Z=Y$(e,L.points,S,R.xZoom,R.yZoom):Z=L.points.map(ne=>Wl(ne,S,R.xZoom,R.yZoom));if(Se.isGeometry(L))if(Se.isGeometry(L)&&M3(L)){const{height:ne}=_g(L).getSize();qi.resizeGeometry(e,Z,ne,V)}else Z=Yf(Z),Ze.setNode(e,{points:Z},V);else if(Se.isLine(L)||Se.isCustomGeometryElement(e,L)||Se.isVectorLine(L))Ze.setNode(e,{points:Z},V);else if(Se.isImage(L))if(y)Ze.setNode(e,{points:Z},V);else{const ne=_.getRectangleByPoints(L.points),le=_.getCenterPoint(ne),de=Wl(le,S,R.xZoom,R.yZoom),Pe=_.getRectangleByCenterPoint(de,ne.width,ne.height);Ze.setNode(e,{points:_.getPoints(Pe)},V)}})},afterResize:d=>{if(i==null||i.remove(),i=null,s){s=!1,a=null;const g=tt(e);Ze.addSelectionWithTemporaryElements(e,g)}}}),e.afterChange=()=>{n(),o&&(o.remove(),o=null);const d=tt(e);u()&&!vi(e)&&d.length>1&&(o=Z$(e,a,s),H.getActiveHost(e).append(o))},e.drawSelectionRectangle=()=>{if(s){const d=_.getRectangleByPoints(a),g=ki(e,d);return da(e,_.inflate(g,pr),{stroke:So,strokeWidth:pr})}return r()},e}const WC=(e,n,r)=>{const i=gG(e,n),o=iD(r,i),s=iD(r,n);return{originPoint:o,handlePoint:s}},b3=(e,n,r,i,o)=>{const[s,a]=e;let u=0,f=0;if(i)if(o)u=Pt.getOffsetX(s,a)/(r[0]-n[0]),f=u;else{let d=Pt.getOffsetX(s,a),g=Pt.getOffsetY(s,a);u=d/(r[0]-n[0]),f=g/(r[1]-n[1])}else{const d=Pt.isHorizontal(n,r,.1)||!1;let g=d?Pt.getOffsetX(s,a):Pt.getOffsetY(s,a),p=d?r[0]-n[0]:r[1]-n[1];const y=g/p;o?(u=y,f=y):d?u=y:f=y}return{xZoom:u,yZoom:f}},Wl=(e,n,r,i)=>{const o=(e[0]-n[0])*r,s=(e[1]-n[1])*i;return[e[0]+o,e[1]+s]},Y$=(e,n,r,i,o)=>{const s=_.getRectangleByPoints(n);Ss.isDebug()&&Ss.drawRectangle(e,s,{stroke:"black"});let a=n;a=Ir(a,_.getCenterPoint(s),1/2*Math.PI),Ss.isDebug()&&Ss.drawRectangle(e,a,{stroke:"blue"}),a=a.map(f=>Wl(f,r,i,o)),Ss.isDebug()&&Ss.drawRectangle(e,a);const u=_.getRectangleByPoints(a);return Ir(a,_.getCenterPoint(u),-.5*Math.PI)},Z$=(e,n,r)=>{const i=$t(),o=tt(e),s=r?_.getRectangleByPoints(n):dn(e,o,!1),a=ki(e,s);let u=_.getCornerPoints(a);const f=Co(o);if(f){const d=_.getCenterPoint(a);u=Ir(u,d,f)}return u.forEach(d=>{const g=m8(e,d);i.append(g)}),i},Q$="debug:plait:point-for-geometry",_D=Bg(Q$),Pv=10;function G4(e,n,r,i,o,s){const{originPoint:a,handlePoint:u}=i,f=[r.startPoint,r.endPoint],{xZoom:d,yZoom:g}=b3(f,a,u,s,o);let p,y=[];if(Array.isArray(n.element)){p=n.element;const b=dn(e,n.element,!1);y=_.getPoints(b)}else p=[n.element],y=n.element.points;const w=y.map(b=>Wl(b,a,d,g)),E=_.getRectangleByPoints(w),S=T1(E,Co(p)),D=Wl(u,a,d,g),[A,P]=Qn(a,D);return{resizePoints:f,resizeOriginPoint:y,activeRectangle:S,originPoint:a,handlePoint:u,directionFactors:[yg(A),yg(P)],isAspectRatio:o,isFromCorner:s}}function vw(e,n,r){const i=$t(),o=o7(e,n);let s=tW(o,r);s.deltaX===0&&s.deltaY===0&&(s=J$(o,r));const a=Co(n),u=eW(s,r,a),f=rW(e,u.activePoints,o,r,a),d=nW(e,u.activePoints,o,r,a);return i.append(f,d),{...u,...s,snapG:i}}function J$(e,n){let r={deltaX:0,deltaY:0};const{isAspectRatio:i,activeRectangle:o,directionFactors:s}=n,a=s[0]!==0||i,u=s[1]!==0||i;if(a){const f=Kf(o,!0),d=s[0]===-1?f[0]:f[2],g=Dp(e,d,!0);if(Math.abs(g)<Xl&&(r.deltaX=g,r.deltaX!==0&&i))return r.deltaY=r.deltaX/(o.width/o.height),r}if(u){const f=Kf(o,!1),d=s[1]===-1?f[0]:f[2],g=Dp(e,d,!1);if(Math.abs(g)<Xl&&(r.deltaY=g,r.deltaY!==0&&i))return r.deltaX=r.deltaY*(o.width/o.height),r}return r}function eW(e,n,r){const{deltaX:i,deltaY:o}=e,{resizePoints:s,isCreate:a}=n,u=[s[0],[s[1][0]+i,s[1][1]+o]];let f=u,d=0,g=0;if(!a){const{originPoint:p,handlePoint:y,isFromCorner:w,isAspectRatio:E,resizeOriginPoint:S}=n,D=b3(u,p,y,w,E);d=D.xZoom,g=D.yZoom,f=S.map(A=>Wl(A,p,d,g)),r&&(f=i3(_.getRectangleByPoints(S),_.getRectangleByPoints(f),_.getCenterPoint(_.getRectangleByPoints(S)),_.getCenterPoint(_.getRectangleByPoints(f)),r))}return{xZoom:d,yZoom:g,activePoints:f}}function tW(e,n){let r={deltaX:0,deltaY:0};const{isAspectRatio:i,activeRectangle:o}=n,s=e.find(u=>Math.abs(u.width-o.width)<Xl);if(s){const u=s.width-o.width;if(r.deltaX=u*n.directionFactors[0],i){const f=u/(o.width/o.height);return r.deltaY=f*n.directionFactors[1],r}}const a=e.find(u=>Math.abs(u.height-o.height)<Xl);if(a){const u=a.height-o.height;if(r.deltaY=u*n.directionFactors[1],i){const f=u*(o.width/o.height);return r.deltaX=f*n.directionFactors[0],r}}return r}function Sv(e,n){return n?[[e.x,e.y-Pv],[e.x+e.width,e.y-Pv]]:[[e.x-Pv,e.y],[e.x-Pv,e.y+e.height]]}function nW(e,n,r,i,o){_D.isDebug()&&_D.clear();const s=_.getRectangleByPoints(n),a=T1(s,o),{isAspectRatio:u,directionFactors:f}=i,d=f[0]!==0||u,g=f[1]!==0||u;return s7(e,a,r,d,g)}function rW(e,n,r,i,o){let s=[],a=[];const u=i.directionFactors[0]!==0||i.isAspectRatio,f=i.directionFactors[1]!==0||i.isAspectRatio,d=_.getRectangleByPoints(n),g=T1(d,o);for(let y of r)g.width===y.width&&u&&s.push(Sv(y,!0)),g.height===y.height&&f&&a.push(Sv(y,!1));s.length&&u&&s.push(Sv(g,!0)),a.length&&f&&a.push(Sv(g,!1));const p=[...s,...a];return a7(e,p)}const iW=(e,n,r)=>b8(e,n,r,i=>{if(Se.isArrowLine(i)){let o={...i.source},s={...i.target},a=[...i.points];return i.source.boundId&&(a[0]=nc(As(e,i.source.boundId),i.source.connection),As(e,i.source.boundId,n)||(delete o.boundId,delete o.connection)),i.target.boundId&&(a[a.length-1]=nc(As(e,i.target.boundId),i.target.connection),As(e,i.target.boundId,n)||(delete s.boundId,delete s.connection)),a=a.map(u=>[u[0]-r[0],u[1]-r[1]]),{...i,points:a,source:o,target:s}}}),oW=(e,n,r)=>{O8(e,n,r,(i,o)=>{Se.isArrowLine(i)&&(i.source.boundId&&n.find(a=>[i.source.boundId,o[i.source.boundId]].includes(a.id))&&(i.source.boundId=o[i.source.boundId]),i.target.boundId&&n.find(a=>[i.target.boundId,o[i.target.boundId]].includes(a.id))&&(i.target.boundId=o[i.target.boundId])),Se.isElementByTable(i)&&(BD(i,"row"),BD(i,"column"),vz(i.cells))})},Cp=3/4,sW={draw(e,n,r){const i=mp(n),s=H.getRoughSVG(e).polygon(i,{...r,fillStyle:"solid"});return Zt(s,"round"),s},isInsidePoint(e,n){const r=mp(e);return uc(n,r)},getCornerPoints(e){return mp(e)},getNearestPoint(e,n){return Hn(n,mp(e))},getEdgeByConnectionPoint(e,n){const r=mp(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height*Cp-i)/2}}},mp=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Cp],[e.x+e.width*3/5,e.y+e.height*Cp],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*Cp],[e.x,e.y+e.height*Cp]];function Lr(e){const n=e.getPolygonPoints,r={draw(i,o,s){const a=n(o),f=H.getRoughSVG(i).polygon(a,{...s,fillStyle:"solid"});return Zt(f,"round"),f},isInsidePoint(i,o){const s=n(i);return uc(o,s)},getCornerPoints(i){return n(i)},getNearestPoint(i,o){return Hn(o,n(i))},getNearestCrossingPoint(i,o){const s=n(i),a=l4(s,o);let u=a[0],f=bt(o[0],o[1],u[0],u[1]);return a.filter((d,g)=>g>0).forEach(d=>{let g=bt(o[0],o[1],d[0],d[1]);g<f&&(f=g,u=d)}),u},getEdgeByConnectionPoint(i,o){const s=n(i),a=_.getConnectionPoint(i,o);return ni(s,a)},getConnectorPoints(i){return e.getConnectorPoints?e.getConnectorPoints(i):n(i)}};return e.getTextRectangle&&(r.getTextRectangle=e.getTextRectangle),r}const aW=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],lW=Lr({getPolygonPoints:aW,getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width/2,n.x+=r/4,n}}),xx=Lr({getPolygonPoints:_.getEdgeCenterPoints,getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=Dr(e);return n.width=n.width/2,n.x+=n.width/2,n}});function O3(e){const n={draw(r,i,o){const s=[i.x+i.width/2,i.y+i.height/2],u=H.getRoughSVG(r).ellipse(s[0],s[1],i.width,i.height,{...o,fillStyle:"solid"});return Zt(u,"round"),u},isInsidePoint(r,i){const o=[r.x+r.width/2,r.y+r.height/2];return Yl(i,o,r.width/2,r.height/2)},getCornerPoints(r){return _.getEdgeCenterPoints(r)},getNearestPoint(r,i){const o=[r.x+r.width/2,r.y+r.height/2];return Oi(i,o,r.width/2,r.height/2)},getTangentVectorByConnectionPoint(r,i){const o=_.getConnectionPoint(r,i),s=[r.x+r.width/2,r.y+r.height/2],a=[o[0]-s[0],-(o[1]-s[1])],u=r.width/2,f=r.height/2,d=tl(a[0],a[1],u,f);return nl(a[0],a[1],d)},getConnectorPoints(r){return _.getEdgeCenterPoints(r)},getTextRectangle(r){const i=Dr(r),o=i.width;return i.width=i.width*3/4,i.x+=o/8,i}};return e!=null&&e.draw&&(n.draw=e.draw),e!=null&&e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const Cx=O3(),uW=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],cW=Lr({getPolygonPoints:uW,getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),fW=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],hW=Lr({getPolygonPoints:fW,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width*(1-.32),n.x+=r*.32,n}}),dW=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],gW=Lr({getPolygonPoints:dW,getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),ND=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],HD=Lr({getPolygonPoints:ND,getConnectorPoints:e=>{const n=ND(e);return Hg(n)},getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width/2,n.x+=r/4,n}}),pW=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],mW=Lr({getPolygonPoints:pW,getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2,s=o*3/5;return{height:i,width:s>0?s:0,x:n.x+gt.rectangleAndText+r+o/5,y:n.y+n.height/5+(n.height*4/5-i)/2}}}),vW=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},yW=Lr({getPolygonPoints:vW,getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Dr(e),i=n.width>n.height/2+20;return r.width=i?n.width-n.height/2:r.width,r}}),wW=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(n?e.height/2:e.width),e.y+e.height/2]]},xW=Lr({getPolygonPoints:wW,getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Dr(e),i=n.width>n.height+20;return r.width=i?n.width-n.height:r.width,r.x=i?n.x+n.height/2:r.x,r}}),CW=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],EW=Lr({getPolygonPoints:CW,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const n=Dr(e);return n.width=n.width*.68,n}}),fn={draw(e,n,r){return da(e,n,{...r,fillStyle:"solid"})},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)}},PW={draw(e,n,r){return Rg(H.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...r,fillStyle:"solid"},!1,ug(n))},isInsidePoint(e,n){return PE(n,e,ug(e))},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return j4(n,e,ug(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)}},ug=e=>Math.min(e.width*.1,e.height*.1);function j4(e,n,r){const{x:i,y:o,width:s,height:a}=n,u=_.getCornerPoints(n);let f=Hn(e,u),d=null;return e[0]>=i&&e[0]<=i+r&&e[1]>=o&&e[1]<=o+r&&(d=[i+r,o+r]),e[0]>=i&&e[0]<=i+r&&e[1]>=o+a&&e[1]<=o+a-r&&(d=[i+r,o+a-r]),e[0]>=i+s-r&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+r&&(d=[i+s-r,o+r]),e[0]>=i+s-r&&e[0]<=i+s&&e[1]>=o+a-r&&e[1]<=o+a&&(d=[i+s-r,o+a-r]),d&&(f=Oi(e,d,r,r)),f}const Ff=3/4,SW={draw(e,n,r){const i=H.getRoughSVG(e),o=n.x,s=n.y,a=n.x+n.width,u=n.y+n.height*Ff,f=ug(n),d=[o+f,s],g=[a-f,s],p=[a,s+f],y=[a,u-f],w=[a-f,u],E=[o+f,u],S=[o,u-f],D=[o,s+f],A=[o+n.width/4,u],P=[o+n.width/4,n.y+n.height],b=[o+n.width/2,u],R=i.path(`M${g[0]} ${g[1]} A ${f} ${f}, 0, 0, 1, ${p[0]} ${p[1]} L ${y[0]} ${y[1]} A ${f} ${f}, 0, 0, 1, ${w[0]} ${w[1]} L    ${b[0]} ${b[1]}  ${P[0]} ${P[1]}   ${A[0]} ${A[1]}   ${E[0]} ${E[1]} A ${f} ${f}, 0, 0, 1, ${S[0]} ${S[1]} L ${D[0]} ${D[1]} A ${f} ${f}, 0, 0, 1, ${d[0]} ${d[1]} Z`,{...r,fillStyle:"solid"});return Zt(R,"round"),R},isInsidePoint(e,n){const r=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,uc(n,r)||PE(n,e,ug(e))},getCornerPoints(e){return Ex(e)},getNearestPoint(e,n){return Hn(n,Ex(e))},getEdgeByConnectionPoint(e,n){const r=Ex(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*Ff],[e.x,e.y+e.height/2]]},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height*Ff-i)/2}}},Ex=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Ff],[e.x+e.width/2,e.y+e.height*Ff],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*Ff],[e.x,e.y+e.height*Ff]],GD=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],TW=Lr({getPolygonPoints:GD,getConnectorPoints(e){const n=GD(e);return Hg(n)},getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),jD=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],DW=Lr({getPolygonPoints:jD,getConnectorPoints(e){const n=jD(e);return[...Hg(n),...n]},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2,s=o*2/3;return{height:i,width:s>0?s:0,x:n.x+gt.rectangleAndText+r+o/6,y:n.y+n.height*3/5+(n.height*2/5-i)/2}}}),AW=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],BW=Lr({getPolygonPoints:AW,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),zD=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],MW=Lr({getPolygonPoints:zD,getConnectorPoints:e=>{const n=zD(e);return[n[1],n[3],n[5],n[7],n[9]]},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2,s=o/2;return{height:i,width:s>0?s:0,x:n.x+gt.rectangleAndText+r+o/4,y:n.y+n.height*1/6+(n.height*4/5-i)/2}}}),RW={draw(e,n,r){return Rg(H.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...r,fillStyle:"solid"},!1,Tv(n))},isInsidePoint(e,n){return PE(n,e,Tv(e))},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return kW(n,e,Tv(e))},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n),i=Tv(e),o=z4(e,i,r);if(o){const s=[r[0]-o[0],-(r[1]-o[1])],a=i,u=i,f=tl(s[0],s[1],a,u);return nl(s[0],s[1],f)}return null},getConnectorPoints(e){return _.getEdgeCenterPoints(e)}},Tv=e=>Math.min(e.width/2,e.height/2);function kW(e,n,r){let i=null,o=z4(n,r,e);if(o)i=Oi(e,o,r,r);else{const s=_.getCornerPoints(n);i=Hn(e,s)}return i}function z4(e,n,r){const{x:i,y:o,width:s,height:a}=e;let u=null;return r[0]>=i&&r[0]<=i+n&&r[1]>=o&&r[1]<=o+n&&(u=[i+n,o+n]),r[0]>=i&&r[0]<=i+n&&r[1]>=o+a-n&&r[1]<=o+a&&(u=[i+n,o+a-n]),r[0]>=i+s-n&&r[0]<=i+s&&r[1]>=o&&r[1]<=o+n&&(u=[i+s-n,o+n]),r[0]>=i+s-n&&r[0]<=i+s&&r[1]>=o+a-n&&r[1]<=o+a&&(u=[i+s-n,o+a-n]),u}const $D=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],bW=Lr({getPolygonPoints:$D,getConnectorPoints:e=>{const n=$D(e);return Hg(n)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+n.height/4+(n.height*3/4-i)/2}}}),OW=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],IW=Lr({getPolygonPoints:OW,getConnectorPoints:e=>_.getEdgeCenterPoints(e),getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width*2/3,n.x+=r/6,n}}),WD=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],FW=Lr({getPolygonPoints:WD,getConnectorPoints:e=>{const n=WD(e);return Hg(n)},getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}}),VD=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],LW=Lr({getPolygonPoints:VD,getConnectorPoints:e=>{const n=VD(e);return[...Hg(n),...n]},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2,s=o*2/3;return{height:i,width:s>0?s:0,x:n.x+gt.rectangleAndText+r+o/6,y:n.y+(n.height*2/3-i)/2}}}),_W={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y} L${n.x+n.width*3/4} ${n.y} A  ${n.width/4} ${n.height/2}, 0, 0, 1,${n.x+n.width*3/4} ${n.y+n.height} L${n.x} ${n.y+n.height} Z`,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]),i=_.isHit({...e,width:e.width*3/4},r),o=Yl(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return i||o},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const r=Hn(n,fn.getCornerPoints(e));return r[0]>e.x+e.width*3/4?Oi(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):r},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n),i=[e.x+e.width*3/4,e.y+e.height/2],o=[r[0]-i[0],-(r[1]-i[1])],s=e.width/4,a=e.height/2,u=tl(o[0],o[1],s,a);return nl(o[0],o[1],u)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)}},NW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x+n.width/10} ${n.y} L${n.x+n.width} ${n.y} A  ${n.width/10} ${n.height/2}, 0, 0, 0,${n.x+n.width} ${n.y+n.height} L${n.x+n.width/10} ${n.y+n.height}A  ${n.width/10} ${n.height/2}, 0, 0, 1,${n.x+n.width/10} ${n.y}`,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]),i=_.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},r),o=Yl(n,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),s=!Yl(n,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return i&&s||o},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const r=Hn(n,fn.getCornerPoints(e));if(r[0]<e.x+e.width/10){const i=[e.x+e.width/10,e.y+e.height/2],o=Oi(n,i,e.width/10,e.height/2);return o[0]>i[0]&&(o[0]=i[0]*2-o[0]),o}if(r[0]>e.x+e.width*9/10){const i=[e.x+e.width,e.y+e.height/2],o=Oi(n,i,e.width/10,e.height/2);return o[0]>i[0]&&(o[0]=i[0]*2-o[0]),o}return r},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);let i=[e.x+e.width/10,e.y+e.height/2],o=e.width/10,s=e.height/2;const a=r[0]>e.x+e.width*9/10&&r[1]>e.y;a&&(i=[e.x+e.width,e.y+e.height/2]);const u=[r[0]-i[0],-(r[1]-i[1])],f=tl(u[0],u[1],o,s),d=nl(u[0],u[1],f);return a?d.map(g=>-g):d},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e){const n=Dr(e),r=n.width;return n.width=n.width*3/4,n.x+=r/8,n}},HW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.06} ${n.y} L${n.x+n.width*.06} ${n.y+n.height} M${n.x+n.width-n.width*.06} ${n.y} L${n.x+n.width-n.width*.06} ${n.y+n.height}`,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2-n.width*.06*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r+n.width*.06,y:n.y+(n.height-i)/2}}},GW=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],jW=Lr({getPolygonPoints:GW,getConnectorPoints:e=>_.getEdgeCenterPoints(e),getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{width:o>0?o:0,height:i,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-n.height/2-i)/2}}}),zW=O3({draw(e,n,r){const i=H.getRoughSVG(e),o=n.width/2,s=n.height/2,a=[n.x+n.width,n.y+n.height/2],u=i.path(`M${a[0]} ${a[1]}
        A${o},${s} 0 1,1 ${a[0]} ${a[1]-.01}
        M${n.x} ${n.y+n.height/2}
        L${n.x+n.width} ${n.y+n.height/2}
        M${n.x+n.width/2} ${n.y}
        L${n.x+n.width/2} ${n.y+n.height}
        `,{...r,fillStyle:"solid"});return Zt(u,"round"),u}}),$W=O3({draw(e,n,r){const i=H.getRoughSVG(e),o=n.width/2,s=n.height/2,a=[n.x+n.width,n.y+n.height/2],u=[n.x+n.width/2,n.y+n.height/2],f=oS([n.x,n.y],[n.x+n.width,n.y+n.height],u[0],u[1],o,s),d=oS([n.x+n.width,n.y],[n.x,n.y+n.height],u[0],u[1],o,s),g=i.path(`M${a[0]} ${a[1]}
        A${o},${s} 0 1,1 ${a[0]} ${a[1]-.01}
        M${f[0][0]} ${f[0][1]}
        L${f[1][0]} ${f[1][1]}
        M${d[0][0]} ${d[0][1]}
        L${d[1][0]} ${d[1][1]}
        `,{...r,fillStyle:"solid"});return Zt(g,"round"),g}}),WW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9}
            Q${n.x+n.width-n.width/4} ${n.y+n.height-n.height/9*3}, ${n.x+n.width/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}           
            `,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){let r=Hn(n,fn.getCornerPoints(e)),i=P1([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(i=To(i),r[1]>e.y+e.height-e.height/9){if(r[0]===e.x+e.width/2)return r[1]=e.y+e.height-e.height/9,r;r=Hn(n,i,!1)}return r},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);return r[0]>e.x&&r[0]<e.x+e.width/4?Qn([e.x+e.width/4,e.y+e.height],r):r[0]>e.x+e.width/4&&r[0]<e.x+e.width/4*3?Qn([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):r[0]>e.x+e.width/4*3?Qn([e.x+e.width,e.y+e.height-e.height/9],r):Qn(r,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2-n.width*.06*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r+n.width*.06,y:n.y+(n.height-i)/2}}},UD=e=>{const n=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let r=P1([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return r=To(r),[...n,...r]},VW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y+10} H${n.x+5} V${n.y+5} H${n.x+10} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9-10-3} L${n.x+n.width-5} ${n.y+n.height-n.height/9-10-3-4} V${n.y+n.height-n.height/9-5-3}
                 L${n.x+n.width-10} ${n.y+n.height-n.height/9-5-3-4} V${n.y+n.height-n.height/9}
                
             Q${n.x+n.width-10-(n.width-10)/4} ${n.y+n.height-n.height/9*3}, ${n.x+(n.width-10)/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}
              
                M${n.x+5} ${n.y+10} H${n.x+n.width-10} V${n.y+n.height-n.height/9} 
                    
                M${n.x+10} ${n.y+5} H${n.x+n.width-5} V${n.y+n.height-n.height/9-10-3}
            `,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,UD(e),!1)},getConnectorPoints(e){let n=P1([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);n=To(n);const r=Hn([e.x+e.width/2,e.y+e.height],n);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[r[0],r[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,n){const r=l4(UD(e),n);let i=r[0],o=bt(n[0],n[1],i[0],i[1]);return r.filter((s,a)=>a>0).forEach(s=>{let a=bt(n[0],n[1],s[0],s[1]);a<o&&(o=a,i=s)}),i},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);if(r[0]>e.x&&r[0]<e.x+(e.width-10)/4)return Qn([e.x+(e.width-10)/4,e.y+e.height],r);if(r[0]>e.x+(e.width-10)/4&&r[0]<e.x+(e.width-10)/4*3)return Qn([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(r[0]>e.x+(e.width-10)/4*3&&r[0]<e.x+e.width-10)return Qn([e.x+(e.width-10),e.y+e.height-e.height/9],r);const i=E8(n)||Gt.bottom,o=qf(i);return[o.x,o.y]},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2-n.width*.06*2;return{height:i,width:o>0?o-10:0,x:n.x+gt.rectangleAndText+r+n.width*.06,y:n.y+(n.height-i)/2}}},UW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y+n.height*.15}  
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x+n.width} ${n.y+n.height*.15} 
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x} ${n.y+n.height*.15} 
            V${n.y+n.height-n.height*.15}
            A${n.width/2} ${n.height*.15}, 0, 0, 0, ${n.x+n.width} ${n.y+n.height-n.height*.15}
            V${n.y+n.height*.15}`,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]),i=_.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},r),o=Yl(n,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),s=Yl(n,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return i||o||s},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const r=Hn(n,fn.getCornerPoints(e));if(r[1]<e.y+e.height*.15){const i=[e.x+e.width/2,e.y+e.height*.15],o=Oi(n,i,e.width/2,e.height*.15);return o[1]>i[1]&&(o[1]=i[1]*2-o[1]),o}if(r[1]>e.y+e.height-e.height*.15){const i=[e.x+e.width/2,e.y+e.height-e.height*.15],o=Oi(n,i,e.width/2,e.height*.15);return o[1]<i[1]&&(o[1]=i[0]*2-o[1]),o}return r},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);let i=[e.x+e.width/2,e.y+e.height-e.height*.15],o=e.width/2,s=e.height*.15;r[1]<e.y+e.height*.15&&r[0]>e.x&&(i=[e.x+e.width/2,e.y+e.height*.15]);const u=[r[0]-i[0],-(r[1]-i[1])],f=tl(u[0],u[1],o,s);return nl(u[0],u[1],f)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+n.height*.3+(n.height-n.height*.45-i)/2}}},XW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x+n.width-n.width*.15} ${n.y}  
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y+n.height} 
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y} 
            H${n.x+n.width*.15}
            A${n.width*.15} ${n.height/2}, 0, 0, 0, ${n.x+n.width*.15} ${n.y+n.height}
            H${n.x+n.width-n.width*.15}`,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]),i=_.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},r),o=Yl(n,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),s=Yl(n,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return i||o||s},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const r=Hn(n,fn.getCornerPoints(e));if(r[0]<e.x+e.width*.15){const i=[e.x+e.width*.15,e.y+e.height/2],o=Oi(n,i,e.width*.15,e.height/2);return o[0]>i[0]&&(o[0]=i[0]*2-o[0]),o}if(r[0]>e.x+e.width-e.width*.15){const i=[e.x+e.width-e.width*.15,e.y+e.height/2],o=Oi(n,i,e.width*.15,e.height/2);return o[0]<i[0]&&(o[0]=i[0]*2-o[0]),o}return r},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);let i=[e.x+e.width*.15,e.y+e.height/2],o=e.width*.15,s=e.height/2;r[0]>e.x+e.width-e.width*.15&&r[1]>e.y&&(i=[e.x+e.width-e.width*.15,e.y+e.height/2]);const u=[r[0]-i[0],-(r[1]-i[1])],f=tl(u[0],u[1],o,s);return nl(u[0],u[1],f)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-n.width*.45-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+n.width*.15+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}},KW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y} h${n.width} v${n.height} h${-n.width} v${-n.height}
            M${n.x} ${n.y+n.height/10} h${n.width}
            M${n.x+n.width/10} ${n.y} v${n.height}
            `,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-n.width*.1-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+n.width*.1+gt.rectangleAndText+r,y:n.y+n.height*.1+(n.height-n.height*.1-i)/2}}};function XD(e){const n=e.width*.09,r=e.x+e.width,i=e.y+e.height/2;return{startPoint:[r,e.y],upperCurve:{controlPoint1:[r-n,e.y],controlPoint2:[r,i],endPoint:[r-n,i]},lowerCurve:{controlPoint1:[r,i],controlPoint2:[r-n,e.y+e.height],endPoint:[r,e.y+e.height]}}}const qW={draw(e,n,r){const i=H.getRoughSVG(e),{startPoint:o,upperCurve:s,lowerCurve:a}=XD(n),u=[`M${o[0]} ${o[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`].join(" "),f=i.path(u,{...r,fillStyle:"solid",fill:"transparent"});return Zt(f,"round"),f},getNearestPoint(e,n){const{startPoint:r,upperCurve:i,lowerCurve:o}=XD(e),s=To([r,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=To([i.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),u=[...s,...a];let f=1/0,d=n;for(const g of u){const p=bt(n[0],n[1],g[0],g[1]);p<f&&(f=p,d=[...g])}return d},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-n.width*.09-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}};function KD(e){const n=e.width*.09,r=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+n,e.y],controlPoint2:[e.x,r],endPoint:[e.x+n,r]},lowerCurve:{controlPoint1:[e.x,r],controlPoint2:[e.x+n,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const YW={draw(e,n,r){const i=H.getRoughSVG(e),{startPoint:o,upperCurve:s,lowerCurve:a}=KD(n),u=[`M${o[0]} ${o[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`].join(" "),f=i.path(u,{...r,fillStyle:"solid",fill:"transparent"});return Zt(f,"round"),f},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:r,upperCurve:i,lowerCurve:o}=KD(e),s=To([r,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=To([i.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),u=[...s,...a];let f=1/0,d=[...n];for(const g of u){const p=bt(n[0],n[1],g[0],g[1]);p<f&&(f=p,d=[...g])}return d},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-n.width*.09-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+n.width*.09+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}},ZW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x+n.width*.075} ${n.y+n.height} H${n.x} V${n.y} H${n.x+n.width*.075}
           `,{...r,fillStyle:"solid",fill:"transparent"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}},QW=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],JW={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x+n.width*.15} ${n.y} 
            H${n.x+n.width-n.width*.1} 
            A ${n.width*.1} ${n.height/2}, 0, 0, 1,${n.x+n.width-n.width*.1} ${n.y+n.height}
            H${n.x+n.width*.15}
            L${n.x} ${n.y+n.height/2}
            Z
            `,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],i=uc(n,r),o=Yl(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return i||o},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const r=Hn(n,QW(e));return r[0]>e.x+e.width-e.width*.1?Oi(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):r},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n),i=[e.x+e.width-e.width*.1,e.y+e.height/2],o=[r[0]-i[0],-(r[1]-i[1])],s=e.width*.1,a=e.height/2,u=tl(o[0],o[1],s,a);return nl(o[0],o[1],u)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-r*2-n.width*.25;return{width:o>0?o:0,height:i,x:n.x+r+n.width*.15,y:n.y+(n.height-i)/2}}},Zd={draw(e,n,r,i){const o=$t();try{const s=R1(e,{...i==null?void 0:i.element});if(s){const a=H.getRoughSVG(e),{x:u,y:f,width:d,height:g}=n,p=cv(a,[u,f],[u+d,f],r),y=cv(a,[u,f],[u,f+g],r);o.append(p,y),s.forEach(w=>{const E=_.getRectangleByPoints(w.points),{x:S,y:D,width:A,height:P}=E,b=da(e,{x:S+pr,y:D+pr,width:A-pr*2,height:P-pr*2},{fill:w.fill,fillStyle:"solid",strokeWidth:0}),R=cv(a,[S+A,D],[S+A,D+P],r),L=cv(a,[S,D+P],[S+A,D+P],r);o.append(b,R,L)}),Zt(o,"round")}}catch(s){console.error(s)}return o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return j4(n,e,ug(e))},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e,n){try{if(n&&n.id){const r=uh(n==null?void 0:n.board,e,n.id);if(r)return e1.isVerticalText(r)?eV(r):$4(r)}}catch(r){console.error(r)}return{x:0,y:0,width:0,height:0}}};function eV(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight||0,o=n.height-gt.rectangleAndText*2-r*2;return{width:o>0?o:0,height:i,x:n.x-o/2+n.width/2,y:n.y+(n.height-i)/2}}function $4(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight||0,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}function qD(e){const n=e.x+e.width/2,r={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:r.width,ry:r.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:n,endY:e.y},bodyLine:[[n,e.y+e.height/4],[n,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const tV={draw(e,n,r){const i=H.getRoughSVG(e),{headArcCommand:o,bodyLine:s,armsLine:a,leftLegLine:u,rightLegLine:f}=qD(n),d=[`M${s[0][0]} ${s[0][1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${s[0][0]} ${s[0][1]}`,`V${s[1][1]}`,`M${a[0][0]} ${a[0][1]} H${a[1][0]}`,`M${u[0][0]} ${u[0][1]} L${u[1][0]} ${u[1][1]}`,`M${f[0][0]} ${f[0][1]} L${f[1][0]} ${f[1][1]}`].join(" "),g=i.path(d,{...r,fillStyle:"solid"});return Zt(g,"round"),g},getNearestPoint(e,n){const{headArcCommand:r,bodyLine:i,armsLine:o,leftLegLine:s,rightLegLine:a}=qD(e),u=[e.x+e.width/2,e.y+e.height/4/2],f=Oi(n,u,r.rx,r.ry),d=bt(...n,...f),p=EE(n,[i,o,s,a]),y=bt(...n,...p);return d<y?f:p},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);if(r[1]>=e.y&&r[1]<=e.y+e.height/4){const i=[e.x+e.width/2,e.y+e.height/4/2],o=[r[0]-i[0],-(r[1]-i[1])],s=e.width/2,a=e.height/2,u=tl(o[0],o[1],s,a);return nl(o[0],o[1],u)}return r[1]>=e.y+e.height/4&&r[1]<e.y+e.height/4*3?r[0]<e.x+e.width/2?Yp(Qn([e.x,e.y+e.height/2],r),-(Math.PI/2)):Yp(Qn([e.x+e.width,e.y+e.height/2],r),-(Math.PI/2)):r[1]>=e.y+e.height/4*3?r[0]<e.x+e.width/2?Qn(r,[e.x+e.width/12,e.y+e.height]):Qn([e.x+e.width/12*11,e.y+e.height],r):Qn(r,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=e.textHeight,i=n.width+40;return{height:r,width:i>0?i:0,x:n.x-20,y:n.y+n.height+4}}},nV={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+40} ${n.y} L${n.x+40} ${n.y+n.height} `,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=40-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}};function YD(e){const r=e.width*.7,i=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+r,e.y],cornerPoint:[i,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[i,e.y+25]}}}const rV={draw(e,n,r){const i=H.getRoughSVG(e),{points:o}=YD(n),s=[`M${o.leftTop[0]} ${o.leftTop[1]}`,`V${o.topStart[1]}`,`H${o.topEnd[0]}`,`L${o.cornerPoint[0]} ${o.cornerPoint[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.leftBottom[0]}`,`V${o.leftMiddle[1]}`,`H${o.middlePoint[0]}`].join(" "),a=i.path(s,{...r,fillStyle:"solid"});return Zt(a,"round"),a},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const{points:r}=YD(e),i=[[r.topStart,r.leftTop],[r.leftTop,r.leftBottom],[r.leftBottom,r.rightBottom],[r.rightBottom,r.rightTop],[r.topStart,r.topEnd],[r.topEnd,r.cornerPoint],[r.cornerPoint,r.rightTop],[r.leftMiddle,r.middlePoint]];return EE(n,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);return r[0]>e.x+e.width*.7&&r[1]<e.y+25?Qn([e.x+e.width*.7,e.y],r):Qn([e.x+e.width*.8,e.y+25],r)},getTextRectangle(e,n){var s,a;const r=_.getRectangleByPoints(e.points),i=Qt(e),o=(a=(s=e.texts)==null?void 0:s.find(u=>u.id===(n==null?void 0:n.id)))==null?void 0:a.textHeight;if((n==null?void 0:n.id)===Jo.name){const u=r.width*.7-gt.rectangleAndText-i;return{height:o,width:u>0?u:0,x:r.x+gt.rectangleAndText+i,y:r.y+(25-o)/2}}if((n==null?void 0:n.id)===Jo.content){const u=r.width-gt.rectangleAndText*2-i*2;return{height:o,width:u>0?u:0,x:r.x+gt.rectangleAndText+i,y:r.y+25+(r.height-25-o)/2}}return r}},iV={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y+25} 
            V${n.y}
            H${n.x+n.width} 
            V${n.y+n.height}
            H${n.x}
            V${n.y+25}
            H${n.x+n.width/3-8}
            L${n.x+n.width/3} ${n.y+16}
            V${n.y}
            `,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e,n){var s,a;const r=_.getRectangleByPoints(e.points),i=Qt(e),o=(a=(s=e.texts)==null?void 0:s.find(u=>u.id===(n==null?void 0:n.id)))==null?void 0:a.textHeight;if((n==null?void 0:n.id)===Jo.name){const u=r.width/3-8-gt.rectangleAndText-i;return{height:o,width:u>0?u:0,x:r.x+gt.rectangleAndText+i,y:r.y+(25-o)/2}}if((n==null?void 0:n.id)===Jo.content){const u=r.width-gt.rectangleAndText*2-i*2;return{height:o,width:u>0?u:0,x:r.x+gt.rectangleAndText+i,y:r.y+25+gt.rectangleAndText+i}}return r}};function ZD(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const oV={draw(e,n,r){const i=H.getRoughSVG(e),o=ZD(n),s=i.path(o.map(([a,u])=>`M${a[0]} ${a[1]} L${u[0]} ${u[1]}`).join(" "),{...r,fillStyle:"solid",strokeWidth:4});return Zt(s,"round"),s},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const r=ZD(e);let i=1/0,o=n;return r.forEach(s=>{const a=Zy(n,s),u=bt(n[0],n[1],a[0],a[1]);u<i&&(i=u,o=a)}),o},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)}},sV={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.125} ${n.y} L${n.x+n.width*.125} ${n.y+n.height} M${n.x+n.width-n.width*.125} ${n.y} L${n.x+n.width-n.width*.125} ${n.y+n.height}`,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2-n.width*.125*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r+n.width*.125,y:n.y+(n.height-i)/2}}},aV={draw(e,n,r){const o=H.getRoughSVG(e).path(`M${n.x} ${n.y} 
            h${n.width-16}
            v16
            h16
            v${n.height-16}
            h${-n.width}
            Z
            M${n.x+n.width-16} ${n.y} 
            A16 16, 0,0,1, ${n.x+n.width} ${n.y+16}
            `,{...r,fillStyle:"solid"});return Zt(o,"round"),o},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const r=Hn(n,fn.getCornerPoints(e));return r[0]>e.x+e.width-16&&r[1]<e.y+16?Oi(n,[e.x+e.width-16,e.y+16],16,16):r},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n),i=[e.x+e.width*3/4,e.y+e.height/2],o=[r[0]-i[0],-(r[1]-i[1])],s=tl(o[0],o[1],16,16);return nl(o[0],o[1],s)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle:e=>{const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r-15;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}};function QD(e){const n=e.y+e.height/2,r=e.x+e.width*.3,i=e.width*.13,o=e.height*.285,s=r+i,a=e.width*.233;return{startPoint:[e.x,n],line1:[[e.x,n],[r,n]],circleArcCommand:{rx:i,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:r,endY:n},verticalArcCommand:{rx:a,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:s,endY:e.y+e.height},line2:[[s+a,n],[e.x+e.width,n]]}}const lV={draw(e,n,r){const i=H.getRoughSVG(e),{startPoint:o,line1:s,circleArcCommand:a,verticalArcCommand:u,line2:f}=QD(n),d=[`M${o[0]} ${o[1]}`,`H${s[1][0]}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${s[1][0]+a.rx*2} ${a.endY}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${a.endX} ${a.endY}`,`M${u.endX} ${n.y}`,`A${u.rx} ${u.ry} ${u.xAxisRotation} ${u.largeArcFlag} ${u.sweepFlag} ${u.endX} ${u.endY}`,`M${f[0][0]} ${f[0][1]} H${f[1][0]}`].join(" "),g=i.path(d,{...r,fillStyle:"solid"});return Zt(g,"round"),g},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line1:r,line2:i,circleArcCommand:o,verticalArcCommand:s}=QD(e),a=Hn(n,[...r,...i]),u=bt(...n,...a),f=[r[1][0]+o.rx,r[1][1]],d=Oi(n,f,o.rx,o.ry),g=bt(...n,...d),p=[s.endX,e.y],y=Qy(n,p,s),w=bt(...n,...y),E=Math.min(u,g,w);return E===u?a:E===g?d:y},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n);return r[0]>e.x+e.width*.43&&r[1]<e.y+e.height/2?Yp(Qn(r,[e.x,e.y+e.height/2]),-Math.PI):r[0]>e.x+e.width*.43&&r[1]>e.y+e.height/2?Qn(r,[e.x,e.y+e.height/2]):Qn(r,[e.x,e.y+e.height/2])}};function JD(e){const n=e.width*.39,r=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:n,ry:r,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const uV={draw(e,n,r){const i=H.getRoughSVG(e),{startPoint:o,leftArcCommand:s,line:a}=JD(n),u=[`M${o[0]} ${o[1]}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${s.endX} ${s.endY}`,`M${a.startX} ${a.startY} H${a.endX}`].join(" "),f=i.path(u,{...r,fillStyle:"solid",fill:"transparent"});return Zt(f,"round"),f},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:r,leftArcCommand:i,line:o}=JD(e);let s=1/0,a=n;const u=Qy(n,r,i),f=bt(n[0],n[1],u[0],u[1]);f<s&&(s=f,a=u);const d=[o.startX,o.startY],g=[o.endX,o.endY],p=Zy(n,[d,g]),y=bt(n[0],n[1],p[0],p[1]);return y<s&&(s=y,a=p),a},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)}},e5=.54;function t5(e){const n=e.y+e.height/2,r=e.width*(1-e5)/2,i=e.height/2,o=[e.x,n],s=e.x+e.width*e5;return{startPoint:o,line:{startX:o[0],startY:n,endX:s,endY:n},arcCommands:[{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:n},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:s,endY:n}]}}const cV={draw(e,n,r){const i=H.getRoughSVG(e),{startPoint:o,line:s,arcCommands:a}=t5(n),u=[`M${o[0]} ${o[1]}`,`H${s.endX}`,...a.map(d=>`A${d.rx} ${d.ry} ${d.xAxisRotation} ${d.largeArcFlag} ${d.sweepFlag} ${d.endX} ${d.endY}`)].join(" "),f=i.path(u,{...r,fillStyle:"solid"});return Zt(f,"round"),f},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line:r,arcCommands:i}=t5(e),o=[r.startX,r.startY],s=[r.endX,r.endY],a=Hn(n,[o,s]),u=bt(...n,...a),f=[e.x+3*e.width/4,r.startY],d=Oi(n,f,i[0].rx,i[0].ry),g=bt(...n,...d);return u<g?a:d},getTangentVectorByConnectionPoint(e,n){const r=_.getConnectionPoint(e,n),i=[e.x+e.width*3/4,e.y+e.height/2];if(r[0]>e.x+e.width*.54){const o=[r[0]-i[0],-(r[1]-i[1])],s=e.width*.46/2,a=e.height/2,u=tl(o[0],o[1],s,a);return nl(o[0],o[1],u)}return Qn(r,[e.x,e.y+e.height/2])}};function Dv(e){const n=e.x+12,r=e.width>70?24:e.width*.2,i=e.height-28-e.height*.35>1?14:e.height*.175,o=e.y+e.height*.175,s=e.y+e.height-e.height*.175-i;return{boxSize:{width:r,height:i},points:{mainStart:[n,e.y],topBoxStart:[n,o],topBoxEnd:[n,o+i],bottomBoxStart:[n,s],bottomBoxEnd:[n,s+i],mainEnd:[n,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const W4={draw(e,n,r){const i=H.getRoughSVG(e),{boxSize:o,points:s}=Dv(n),a=[`M${s.mainStart[0]} ${s.mainStart[1]}`,`H${s.rightTop[0]}`,`V${s.rightBottom[1]}`,`H${s.mainEnd[0]}`,`M${s.topBoxStart[0]} ${s.topBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${s.bottomBoxStart[0]} ${s.bottomBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${s.mainStart[0]} ${s.mainStart[1]}`,`V${s.topBoxStart[1]}`,`M${s.topBoxEnd[0]} ${s.topBoxEnd[1]}`,`V${s.bottomBoxStart[1]}`,`M${s.bottomBoxEnd[0]} ${s.bottomBoxEnd[1]}`,`V${s.mainEnd[1]}`].join(" "),u=i.path(a,{...r,fillStyle:"solid"});return Zt(u,"round"),u},getNearestPoint(e,n){const{boxSize:r,points:i}=Dv(e),o=[[i.mainStart,[i.rightTop[0],i.mainStart[1]]],[[i.rightTop[0],i.mainStart[1]],i.rightBottom],[i.rightBottom,[i.mainEnd[0],i.rightBottom[1]]],[[i.mainEnd[0],i.rightBottom[1]],i.mainStart],[i.topBoxStart,[i.topBoxStart[0]+r.width/2,i.topBoxStart[1]]],[[i.topBoxStart[0]+r.width/2,i.topBoxStart[1]],[i.topBoxStart[0]+r.width/2,i.topBoxEnd[1]]],[[i.topBoxStart[0]+r.width/2,i.topBoxEnd[1]],[i.topBoxStart[0]-r.width/2,i.topBoxEnd[1]]],[[i.topBoxStart[0]-r.width/2,i.topBoxEnd[1]],[i.topBoxStart[0]-r.width/2,i.topBoxStart[1]]],[[i.topBoxStart[0]-r.width/2,i.topBoxStart[1]],i.topBoxStart],[i.bottomBoxStart,[i.bottomBoxStart[0]+r.width/2,i.bottomBoxStart[1]]],[[i.bottomBoxStart[0]+r.width/2,i.bottomBoxStart[1]],[i.bottomBoxStart[0]+r.width/2,i.bottomBoxEnd[1]]],[[i.bottomBoxStart[0]+r.width/2,i.bottomBoxEnd[1]],[i.bottomBoxStart[0]-r.width/2,i.bottomBoxEnd[1]]],[[i.bottomBoxStart[0]-r.width/2,i.bottomBoxEnd[1]],[i.bottomBoxStart[0]-r.width/2,i.bottomBoxStart[1]]],[[i.bottomBoxStart[0]-r.width/2,i.bottomBoxStart[1]],i.bottomBoxStart],[i.mainStart,i.topBoxStart],[i.topBoxEnd,i.bottomBoxStart],[i.bottomBoxEnd,i.mainEnd]];return EE(n,o)},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,n){const{points:r}=Dv(e),i=_.getConnectionPoint(e,n);return Qn(r.mainStart,i)},getConnectorPoints(e){const{points:n}=Dv(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[n.mainStart[0],e.y+e.height/2]]},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-24-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+24+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}},fV={draw(e,n,r){const i=H.getRoughSVG(e),o=n.width-45*2-18>1?45:n.width*.25,s=n.height-30-8*2>1?30:n.height*.2,a={x:n.x+n.width-18-o,y:n.y+8,width:o,height:s},u=i.path(`M${n.x} ${n.y} 
            H${n.x+n.width} 
            V${n.y+n.height} 
            H${n.x} Z

            `,{...r,fillStyle:"solid"}),f=W4.draw(e,a,r);return u.append(f),Zt(u,"round"),u},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-45*2-18>1?45:n.width*.25,s=n.width-18-o-gt.rectangleAndText-r*2;return{height:i,width:s>0?s:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}},hV={draw(e,n,r){const i=H.getRoughSVG(e);return Rg(i,n.x,n.y,n.x+n.width,n.y+n.height,{...r,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,n){const r=_.getRectangleByPoints([n,n]);return _.isHit(e,r)},getCornerPoints(e){return _.getCornerPoints(e)},getNearestPoint(e,n){return Hn(n,fn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const r=fn.getCornerPoints(e),i=_.getConnectionPoint(e,n);return ni(r,i)},getConnectorPoints(e){return _.getEdgeCenterPoints(e)},getTextRectangle(e){const n=_.getRectangleByPoints(e.points),r=Qt(e),i=e.textHeight,o=n.width-gt.rectangleAndText*2-r*2;return{height:i,width:o>0?o:0,x:n.x+gt.rectangleAndText+r,y:n.y+(n.height-i)/2}}},dV={[Et.rectangle]:fn,[Et.diamond]:xx,[Et.ellipse]:Cx,[Et.parallelogram]:HD,[Et.roundRectangle]:PW,[Et.text]:fn,[Et.triangle]:DW,[Et.leftArrow]:hW,[Et.trapezoid]:TW,[Et.rightArrow]:EW,[Et.cross]:lW,[Et.star]:MW,[Et.pentagon]:mW,[Et.hexagon]:cW,[Et.octagon]:gW,[Et.pentagonArrow]:yW,[Et.processArrow]:xW,[Et.twoWayArrow]:BW,[Et.comment]:sW,[Et.roundComment]:SW,[Et.cloud]:u4,[Ct.process]:fn,[Ct.decision]:xx,[Ct.connector]:Cx,[Ct.data]:HD,[Ct.terminal]:RW,[Ct.database]:UW,[Ct.hardDisk]:XW,[Ct.internalStorage]:KW,[Ct.manualInput]:bW,[Ct.preparation]:IW,[Ct.manualLoop]:FW,[Ct.merge]:LW,[Ct.delay]:_W,[Ct.storedData]:NW,[Ct.or]:zW,[Ct.summingJunction]:$W,[Ct.predefinedProcess]:HW,[Ct.offPage]:jW,[Ct.document]:WW,[Ct.multiDocument]:VW,[Ct.noteCurlyLeft]:qW,[Ct.noteCurlyRight]:YW,[Ct.noteSquare]:ZW,[Ct.display]:JW,[Eo.swimlaneHorizontal]:Zd,[Eo.swimlaneVertical]:Zd,[wg.table]:Zd,[vt.actor]:tV,[vt.useCase]:Cx,[vt.container]:nV,[vt.note]:aV,[vt.package]:rV,[vt.combinedFragment]:iV,[vt.class]:Zd,[vt.interface]:Zd,[vt.activation]:fn,[vt.object]:fn,[vt.deletion]:oV,[vt.activityClass]:sV,[vt.simpleClass]:fn,[vt.component]:W4,[vt.componentBox]:fV,[vt.template]:hV,[vt.port]:fn,[vt.branchMerge]:xx,[vt.assembly]:lV,[vt.requiredInterface]:uV,[vt.providedInterface]:cV},yi=e=>dV[e],I1=(e,n)=>{const r=Qt(n),i=n.source.boundId?As(e,n.source.boundId):void 0,o=n.target.boundId?As(e,n.target.boundId):void 0;let s=i?nc(i,n.source.connection):n.points[0],a=o?nc(o,n.target.connection):n.points[n.points.length-1],u=Yd([a[0]-s[0],a[1]-s[1]])||Gt.right,f=PG(u);const d=qf(u),g=qf(f),p={key:Ms.source,point:s,direction:u,vector:[d.x,d.y]},y={key:Ms.target,point:a,direction:f,vector:[g.x,g.y]};if(i){const w=ei.isSourceMarkOrTargetMark(n,Kr.none,Ms.source)?0:r,E=n5(i,n.source.connection);if(p.vector=E,p.boundElement=i,Za(i)){const S=Yd(Yp(E,i.angle));u=S||u}else{const S=Yd(E);u=S||u}p.direction=u,s=nc(i,n.source.connection,u,w),p.point=Qa(s,i)||s}if(o){const w=ei.isSourceMarkOrTargetMark(n,Kr.none,Ms.target)?0:r,E=n5(o,n.target.connection);if(y.vector=E,y.boundElement=o,Za(o)){const S=Yd(Yp(E,o.angle));f=S||f}else{const S=Yd(E);f=S||f}y.direction=f,a=nc(o,n.target.connection,f,w),y.point=Qa(a,o)||a}return{source:p,target:y}},nc=(e,n,r,i)=>{const o=_.getRectangleByPoints(e.points);if(r&&i){const s=qf(r),a=_.getConnectionPoint(o,n);return[a[0]+s.x*i,a[1]+s.y*i]}else return _.getConnectionPoint(o,n)},n5=(e,n)=>{const r=_.getRectangleByPoints(e.points),i=Pc(e),o=yi(i);let s=[0,0];const a=E8(n);if(a&&e.shape!==Et.ellipse){const u=qf(a);return[u.x,u.y]}if(o.getEdgeByConnectionPoint){const u=o.getEdgeByConnectionPoint(r,n);if(u){const f=[u[1][0]-u[0][0],u[1][1]-u[0][1]];return sD(f)}}if(o.getTangentVectorByConnectionPoint){const u=o.getTangentVectorByConnectionPoint(r,n);if(u)return sD(u)}return s},F1=(e,n,r)=>{r=r??I1(e,n);const{sourceRectangle:i,targetRectangle:o}=E$(e,n,r),{sourceOuterRectangle:s,targetOuterRectangle:a}=jG(i,o),u=r.source.point,f=r.target.point,d=cD(u,s,r.source.direction),g=cD(f,a,r.target.direction);return{sourcePoint:u,nextSourcePoint:d,sourceRectangle:i,sourceOuterRectangle:s,targetPoint:f,nextTargetPoint:g,targetRectangle:o,targetOuterRectangle:a}},gV=(e,n,r)=>{const i=Og(e,{match:o=>Se.isArrowLine(o)?o.source.boundId===o.id||o.target.boundId===o.id:!1,recursion:o=>!0});i.length&&i.forEach(o=>{const s=o.source.boundId===n.id,a=s?"source":"target",u={...o[a]},f=Ki(e,o),d=s?f[0]:f[f.length-1];u.connection=Cg(e,d,n);const g=H.findPath(e,o),p=r.findIndex(y=>Dt.equals(y.path,g));p===-1?r.push({property:{[a]:u},path:g}):r[p].property={...r[p].property,[a]:u}})};var Kr;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(Kr||(Kr={}));var Nn;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(Nn||(Nn={}));var Ms;(function(e){e.source="source",e.target="target"})(Ms||(Ms={}));const ei={isSourceMarkOrTargetMark(e,n,r){return r===Ms.source?e.source.marker===n:e.target.marker===n},isSourceMark(e,n){return ei.isSourceMarkOrTargetMark(e,n,Ms.source)},isTargetMark(e,n){return ei.isSourceMarkOrTargetMark(e,n,Ms.target)},isBoundElementOfSource(e,n){return e.source.boundId===n.id},isBoundElementOfTarget(e,n){return e.target.boundId===n.id},getPoints(e,n){let r;if(n.source.boundId){const s=As(e,n.source.boundId),a=nc(s,n.source.connection);r=Qa(a,s)||a}else r=n.points[0];let i;if(n.target.boundId){const s=As(e,n.target.boundId),a=nc(s,n.target.connection);i=Qa(a,s)||a}else i=n.points[n.points.length-1];const o=n.points.length>2?n.points.slice(1,n.points.length-1):[];return[r,...o,i]}};var Uo;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(Uo||(Uo={}));var My;(function(e){e.vectorLine="vectorLine"})(My||(My={}));var s1;(function(e){e.straight="straight",e.curve="curve"})(s1||(s1={}));const Se={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>Se.isArrowLine(e)||Se.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===Et.text,isImage:e=>e.type==="image",isTable:e=>e1.isTable(e),isDrawElement:e=>!!(Se.isGeometry(e)||Se.isLine(e)||Se.isImage(e)||Se.isTable(e)||Se.isSwimlane(e)),isCustomGeometryElement:(e,n)=>{const r=e.getPluginOptions(H8);return!!((r==null?void 0:r.customGeometryTypes)||[]).includes(n.type)},isShapeElement:e=>Se.isImage(e)||Se.isGeometry(e)||Se.isTable(e)||Se.isSwimlane(e),isBasicShape:e=>Object.keys(Et).includes(e.shape),isFlowchart:e=>Object.keys(Ct).includes(e.shape),isUML:e=>Object.keys(vt).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>Se.isSwimlane(e)&&e.shape===Eo.swimlaneVertical,isHorizontalSwimlane:e=>Se.isSwimlane(e)&&e.shape===Eo.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(vt).includes(e.shape)&&[vt.class,vt.interface].includes(e.shape),isGeometryByTable:e=>Se.isUMLClassOrInterface(e),isElementByTable:e=>Se.isTable(e)||Se.isSwimlane(e)||Se.isGeometryByTable(e)};class r5 extends Cc{constructor(){super()}initializeGenerator(){this.activeGenerator=D1(this.board,{getStrokeWidth:()=>(tt(this.board).length===1&&!vi(this.board),pr),getStrokeOpacity:()=>tt(this.board).length===1&&!vi(this.board)?1:.5,getRectangle:n=>_.getRectangleByPoints(n.points),hasResizeHandle:()=>aw(this.board,this.element)}),this.lineAutoCompleteGenerator=new nu(this.board),this.shapeGenerator=new x4(this.board),M3(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(nu.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(yy.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(n,r){n.element!==r.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(r.element,n.element)):(!(n.selected===r.selected)||n.selected)&&(this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}))}updateText(n,r){ql(this.element)?this.textGenerator.update(this.element,n.texts,r.texts,this.getElementG()):this.textGenerator.update(this.element,n.text,r.text,this.getElementG())}initializeTextManage(){const n=(r,i,o)=>{i.newText?ql(r)?qi.setDrawTexts(this.board,r,{id:o.id,text:i.newText,textHeight:i.height}):qi.setText(this.board,r,i.newText,i.width,i.height):qi.setTextSize(this.board,r,i.width,i.height),i.operations&&p3(r,i.operations)};ql(this.element)?this.textGenerator=new d3(this.board,this.element,this.element.texts,{onChange:n}):this.textGenerator=new a$(this.board,this.element,this.element.text,{onChange:n,getMaxWidth:()=>{var o;let r=Dr(this.element).width;const i=yi(this.element.shape).getTextRectangle;return i&&(r=i(this.element).width),(o=this.element)!=null&&o.autoSize?G8.defaultTextMaxWidth:r}}),this.textGenerator.initialize()}destroy(){var n;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(n=this.textGenerator)==null||n.destroy()}}const pV="debug:plait:line-turning",i5=Bg(pV);class mV extends Cc{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new o4(this.board),this.activeGenerator=new P4(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=Ki(this.board,this.element);this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const r=Ki(this.board,this.element);this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:r})},i5.isDebug()&&i5.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const n={};if(this.element.source.boundId){const r=As(this.board,this.element.source.boundId);r&&(n.source=r)}if(this.element.target.boundId){const r=As(this.board,this.element.target.boundId);r&&(n.target=r)}return n}onContextChanged(n,r){const i=this.getBoundedElements(),o=i.source!==this.boundedElements.source||i.target!==this.boundedElements.target;this.boundedElements=i;const s=Ki(this.board,this.element);if(n.element!==r.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:s}),this.updateText(r.element.texts,n.element.texts),this.updateTextRectangle()):(n.selected!==r.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:s}),o){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:s}),this.updateTextRectangle();return}}initializeTextManages(){var n;if((n=this.element.texts)!=null&&n.length){const r=[];this.element.texts.forEach((i,o)=>{const s=this.createTextManage(i,o);r.push(s)}),this.getRef().initializeTextManage(r)}}drawText(){var n;(n=this.element.texts)!=null&&n.length&&this.getRef().getTextManages().forEach((r,i)=>{r.draw(this.element.texts[i].text),this.getElementG().append(r.g)})}createTextManage(n,r){return new M1(this.board,{getRectangle:()=>v3(this.board,this.element,r),onChange:i=>{const o=H.findPath(this.board,this.element),a=[...tn.get(this.board,o).texts],u=i.width<Ty?Ty:i.width;a.splice(r,1,{text:i.newText?i.newText:this.element.texts[r].text,position:this.element.texts[r].position,width:u,height:i.height}),qi.setArrowLineTexts(this.board,this.element,a),i.operations&&p3(this.element,i.operations)},getMaxWidth:()=>G8.defaultTextMaxWidth,textPlugins:[]})}updateText(n,r){if(n===r)return;const i=n.length,o=r.length,s=this.getRef().getTextManages();if(o===i)for(let a=0;a<i;a++)n[a].text!==r[a].text&&s[a].updateText(r[a].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(r=>{r.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class vV extends Cc{constructor(){super()}initializeGenerator(){this.shapeGenerator=new a4(this.board),this.activeGenerator=new P4(this.board),this.getRef().updateActiveSection=()=>{const n=oc(this.board,this.element);this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:n})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=oc(this.board,this.element);this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize()}onContextChanged(n,r){const i=oc(this.board,this.element);n.element!==r.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:i})):(n.selected!==r.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected,linePoints:i})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const yV=e=>{const{keyDown:n,dblClick:r}=e;return e.keyDown=i=>{const o=tt(e),s=o.length===1,a=o[0];if(!H.isReadonly(e)&&!o3(i)&&!a3(i)&&!s3(i)&&s&&Se.isGeometry(a)){i.preventDefault(),wx(e,a);return}n(i)},e.dblClick=i=>{if(i.preventDefault(),!H.isReadonly(e)){const o=It(e,Lt(e,i.x,i.y)),s=rl(e,o,void 0,!1);if(s&&Se.isGeometry(s)&&C3(s))if(ql(s)){const a=Vz(s,o)||s.texts.find(u=>u.id.includes(Jo.content))||s.texts[0];wx(e,s,a)}else wx(e,s)}r(i)},e},o5=e=>{const n=h3();return H.isInPointer(e,n)&&lw(e)},Px=e=>{const n=h3();return H.isInPointer(e,n)&&oh(e)},wV=e=>{const{pointerMove:n,globalPointerUp:r,pointerUp:i}=e;let o=null,s=null,a=null;return e.pointerMove=u=>{o==null||o.remove(),o=$t();const f=h3(),g=H.isInPointer(e,f)&&lw(e),p=It(e,Lt(e,u.x,u.y)),y=H.getPointer(e),w=S3(e,y);if(g){const E=Ec(y);if(y===Et.text){const S=O1(e,i1(e),E.textProperties["font-size"]),D=_.getPoints(_.getRectangleByCenterPoint(p,S.width,S.height));if(s=B3(e,D,i1(e)),a)a.textManage.updateRectangle(),a.g.append(a.textManage.g);else{const A=new M1(e,{getRectangle:()=>Dr(s)});A.draw(s.text),a={g:$t(),textManage:A},H.getHost(e).append(a.g),a.g.append(A.g)}}else{const S=D4(y,p);s=o1(e,S,y),w.processDrawing(s,o),H.getElementTopHost(e).append(o)}}n(u)},e.pointerUp=u=>{o5(e)&&s||i(u)},e.globalPointerUp=u=>{o5(e)&&s&&(tu(e,s),a==null||a.textManage.destroy(),a==null||a.g.remove(),a=null),s=null,o==null||o.remove(),o=null,r(u)},e},xV=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,keyDown:o,keyUp:s}=e;let a=null,u=null,f=null,d=!1,g;return e.keyDown=p=>{d=on.isKeyHotkey("shift",p),o(p)},e.keyUp=p=>{d=!1,s(p)},e.pointerDown=p=>{if(!H.isReadonly(e)&&Px(e)){const y=It(e,Lt(e,p.x,p.y));a=y;const w=H.getPointer(e);if(w===Et.text){const E=Ec(w),S=O1(e,i1(e),E.textProperties["font-size"]),D=_.getPoints(_.getRectangleByCenterPoint(y,S.width,S.height)),A=B3(e,D,i1(e));tu(e,A),a=null}}n(p)},e.pointerMove=p=>{u==null||u.remove(),u=$t();const y=It(e,Lt(e,p.x,p.y)),w=H.getPointer(e),E=S3(e,w);if(g==null||g.remove(),a&&Px(e)){let S=Yf([a,y],d);const D=_.getRectangleByPoints(S),[A,P]=Qn(a,y),b=vw(e,[],{resizePoints:S,activeRectangle:D,directionFactors:[yg(A),yg(P)],isAspectRatio:d,isFromCorner:!0,isCreate:!0});g=b.snapG,H.getElementTopHost(e).append(g),S=Yf(b.activePoints,d),f=o1(e,S,w),E.processDrawing(f,u),H.getElementTopHost(e).append(u)}r(p)},e.pointerUp=p=>{if(Px(e)&&a){const y=It(e,Lt(e,p.x,p.y)),{width:w,height:E}=_.getRectangleByPoints([a,y]);if(Math.hypot(w,E)<8){const S=H.getPointer(e);if(S!==Et.text){const D=D4(S,y);f=o1(e,D,S)}}f&&tu(e,f),g==null||g.remove(),u==null||u.remove(),u=null,a=null,f=null;return}i(p)},e},CV=e=>{const n=e,{getDeletedFragment:r,buildFragment:i,insertFragment:o}=n;return n.getDeletedFragment=s=>{const a=Ay(n);if(a.length){const u=a.filter(E=>Se.isGeometry(E)),f=a.filter(E=>Se.isArrowLine(E)),d=a.filter(E=>Se.isVectorLine(E)),g=a.filter(E=>Se.isImage(E)),p=a.filter(E=>Se.isTable(E)),y=a.filter(E=>Se.isSwimlane(E)),w=[...vp(n,u),...vp(n,g),...vp(n,p),...vp(n,y)].filter(E=>!f.includes(E));s.push(...u,...f,...d,...g,...p,...y,...w.filter(E=>!f.includes(E)))}return r(s)},n.buildFragment=(s,a,u,f)=>{const d=Ay(n,f);let g=[];if(d.length){if(u===la.cut){const S=d.filter(A=>Se.isGeometry(A)),D=d.filter(A=>Se.isArrowLine(A));g=vp(n,S).filter(A=>!D.includes(A))}const p=[...d,...g],y=iW(n,p,a?[a.x,a.y]:[0,0]),E={text:T8(p),type:Zl.elements,elements:y};s=rw(s,E)}return i(s,a,u,f)},n.insertFragment=(s,a,u)=>{var d,g,p;const f=tt(n);if((d=s==null?void 0:s.files)!=null&&d.length){const y=p8.map(E=>"image/"+E),w=!vo(n)&&!(f.length===1&&n.isImageBindingAllowed(f[0]));if(y.includes(s.files[0].type)&&w){const E=s.files[0];A8(n,E,iz,S=>{qi.insertImage(n,S,a)});return}}if((g=s==null?void 0:s.elements)!=null&&g.length){const y=(p=s.elements)==null?void 0:p.filter(w=>Se.isDrawElement(w));s.elements&&s.elements.length>0&&y.length>0&&oW(n,y,a)}if(s!=null&&s.text&&(!s.elements||s.elements.length===0)&&!(f.length===1&&f[0].children)){qi.insertText(n,a,s.text);return}o(s,a,u)},n},vp=(e,n)=>Hz(e).filter(i=>n.find(o=>ei.isBoundElementOfSource(i,o)||ei.isBoundElementOfTarget(i,o))),EV=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s,a=null,u=null;return e.pointerDown=f=>{const d=nz(),g=H.isInPointer(e,d);if(!H.isReadonly(e)&&g&&oh(e)){const p=It(e,Lt(e,f.x,f.y));o=p;const y=E3(e,p);y&&(s=y)}n(f)},e.pointerMove=f=>{a==null||a.remove(),a=$t();let d=It(e,Lt(e,f.x,f.y));if(o){const g=H.getPointer(e);u=y3(e,g,o,d,s,a)}r(f)},e.globalPointerUp=f=>{u&&(Ze.insertNode(e,u,[e.children.length]),Mg(e),rh(e,u),sn.updatePointerType(e,nn.selection)),a==null||a.remove(),a=null,s=null,o=null,u=null,i(f)},e},PV=e=>{let n,r,i,o,s;return lh(e,{key:"draw-line",canResize:()=>!0,hitTest:u=>{const f=k3(e);if(f.length>0){let d=null;return f.forEach(g=>{const p=E4(e,g,u);p&&(d={element:g,handle:p.handle,handleIndex:p.handleIndex})}),d}return null},beforeResize:u=>{if(u.element.shape===Nn.elbow&&u.handle!==Yr.source&&u.handle!==Yr.target){const f=F1(e,u.element);if(R3(u.element,f))return;const d=[...u.element.points],g=u.handleIndex,p=pw(e,u.element);i=p[0],o=p[p.length-1],s=B4(e,u.element,p);const y=n4(e,u.element,[...d],s,g);n=y.index,r=y.deleteCount}},onResize:(u,f)=>{let d=[...u.element.points],g={...u.element.source},p={...u.element.target},y=u.handleIndex;const w=E3(e,f.endPoint);if(u.handle===Yr.source||u.handle===Yr.target){const E=u.handle===Yr.source?g:p;d[y]=f.endPoint,w?(E.connection=Cg(e,f.endPoint,w),E.boundId=w.id):(E.connection=void 0,E.boundId=void 0)}else if(u.element.shape===Nn.elbow){if(s&&i&&o){const E=Ez(s,i,o,y),S=s[y],D=s[y+1],[A,P]=Pz(S,D,f,E);let b=[...d].slice(1,d.length-1);n!==null&&r!==null&&(i4(b)?b=[A,P]:b.splice(n,r,A,P),d=[i,...b,o])}}else u.handle===Yr.addHandle?d.splice(y+1,0,f.endPoint):d[y]=f.endPoint;if(!w){y=u.handle===Yr.addHandle?y+1:y;const E=Ki(e,u.element),S=[...d];S[0]=E[0],S[S.length-1]=E[E.length-1],(u.element.shape!==Nn.elbow||u.element.shape===Nn.elbow&&S.length===2)&&S.forEach((D,A)=>{A!==y&&d[y]&&(d[y]=m3(D,d[y]))})}qi.resizeArrowLine(e,{points:d,source:g,target:p},u.path)},afterResize:u=>{if(u.element.shape===Nn.elbow){const f=tn.get(e,u.path);let d=f&&[...f.points];if(d.length>2&&s&&i&&o){const g=s[0],p=s[s.length-1];d.splice(0,1,g),d.splice(-1,1,p),d=Gl(d),Pt.isEquals(d[0],g)&&d.splice(0,1),Pt.isEquals(d[d.length-1],p)&&d.pop(),d.length===1&&(d=[]),d=[i,...d,o],qi.resizeArrowLine(e,{points:d},u.path)}}n=null,r=null,i=null,o=null,s=null}}),e},SV=e=>{const{pointerMove:n,pointerUp:r}=e;let i=null;return e.pointerMove=o=>{if(i==null||i.remove(),H.isReadonly(e)){n(o);return}const s=Object.keys(Nn),a=H.isInPointer(e,s),u=It(e,Lt(e,o.x,o.y)),f=vG(e,d=>{const{element:g,handle:p}=d,y=p===Yr.target||p===Yr.source;return Se.isArrowLine(g)&&y});if(a||f){const d=y4(e,u);if(d){const g=P3(e,d,u),p=g.isHitEdge||g.isHitConnector;if(i=s$(e,d,{hasMask:p,hasConnector:!0}),p){const y=ih(H.getRoughSVG(e),g.connectorPoint||g.edgePoint,6,{stroke:So,strokeWidth:rC,fill:So,fillStyle:"solid"});i.appendChild(y)}Za(d)&&Rs(i,_.getCenterPointByPoints(d.points),d.angle),H.getElementTopHost(e).append(i)}}n(o)},e.pointerUp=o=>{i==null||i.remove(),i=null,r(o)},e},V4=e=>iw(e,xg.lineText,gz),TV=e=>{const{dblClick:n}=e;return e.dblClick=r=>{var i,o;if(!H.isReadonly(e)){const s=It(e,Lt(e,r.x,r.y)),a=rl(e,s);if(a&&Se.isArrowLine(a)){const u=a&&H.findPath(e,a),f=Ki(e,a),d=Hn(s,f),g=(i=a.texts)!=null&&i.length?[...a.texts]:[],p=w3(e,a,s);if(c4(e,a,s))s5(e,a,p);else{const w=V4(e),E=((o=uw("arrow-line"))==null?void 0:o.text)||{},S=ah(w,void 0,E),{width:D,height:A}=B1(e,S,{fontSize:Jp,fontFamily:lg}),P=C8(f,d);g.push({text:S,position:P,width:D,height:A}),qi.setArrowLineTexts(e,a,g),setTimeout(()=>{if(u){const b=tn.get(e,u),R=Lg(b);s5(e,b,R.length-1,!0)}})}}}n(r)},e};function s5(e,n,r,i=!1){const s=Lg(n)[r];s.edit(()=>{const a=Je.string(s.getText()),u=V4(e);(!a||i&&a===u)&&qi.removeArrowLineText(e,n,r)})}class DV extends Cc{constructor(){super()}initializeGenerator(){this.imageGenerator=new eu(this.board,{getRectangle:n=>({x:n.points[0][0],y:n.points[0][1],width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]}),getImageItem:n=>({url:n.url,width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]})}),this.lineAutoCompleteGenerator=new nu(this.board),this.getRef().addGenerator(nu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}onContextChanged(n,r){n.element!==r.element?(this.imageGenerator.updateImage(this.getElementG(),r.element,n.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})):(!(n.selected===r.selected)||n.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const AV="plait-arrow-line-auto-complete-plugin-key",ig=new WeakMap,BV=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s=null,a,u;return e.pointerDown=f=>{const d=Ay(e),g=d.length===1&&d[0],p=Xf(e,f.x,f.y);if(!H.isReadonly(e)&&g&&Se.isShapeElement(g)){const y=D3(e,g,!0),w=T4(hc(e,p,g,!0)||p,y),E=y[w];if(E){hC(e);const S=$b(e,E);o=It(e,Lt(e,S[0],S[1])),a=g,sn.updatePointerType(e,Nn.elbow)}}n(f)},e.pointerMove=f=>{s==null||s.remove(),s=$t();let d=It(e,Lt(e,f.x,f.y));if(o&&a&&bt(...hc(e,d,a)||d,...o)>vE*2){const p=_.getRectangleByPoints(a.points),y=Pc(a),w=yi(y);let E=o;w.getNearestCrossingPoint&&(E=w.getNearestCrossingPoint(p,o));const S=Qa(E,a)||E;u=y3(e,Nn.elbow,S,d,a,s),Ze.addSelectionWithTemporaryElements(e,[])}r(f)},e.globalPointerUp=f=>{var d;if(u){Ze.insertNode(e,u,[e.children.length]),Mg(e),rh(e,u);const g=(d=e.getPluginOptions(AV))==null?void 0:d.afterComplete;g&&g(u)}else{const g=ig.get(e);g&&(Ze.insertNode(e,g.temporaryArrowLineElement,[e.children.length]),tu(e,g.temporaryShapeElement),ig.delete(e))}o&&(sn.updatePointerType(e,nn.selection),o=null),s==null||s.remove(),s=null,a=null,u=null,i(f)},e},a5=100,MV=e=>{const{pointerMove:n,pointerLeave:r,globalPointerUp:i}=e;let o=null,s=null,a=null,u=null,f=null;e.pointerMove=g=>{o==null||o.remove(),H.getBoardContainer(e).classList.remove(Sp.crosshair);const p=Ay(e);u==null||u.remove(),f==null||f.remove();const y=p.length===1&&p[0],w=Xf(e,g.x,g.y);if(!H.isReadonly(e)&&!vi(e)&&y&&Se.isShapeElement(y)){const E=D3(e,y,!0),S=T4(hc(e,w,y,!0)||w,E),D=E[S];if(hn.getElementRef(y).getGenerator(nu.key).recoverAutoCompleteG(),D){if(o=ih(H.getRoughSVG(e),D,dz,{stroke:"none",fill:jp(Fg,hz),fillStyle:"solid"}),H.getActiveHost(e).append(o),H.getBoardContainer(e).classList.add(Sp.crosshair),Za(y)){const b=e.getRectangle(y),R=ki(e,b);Rs(o,_.getCenterPoint(R),y.angle)}if(Se.isGeometry(y)&&!Se.isText(y)){const b=_.getRectangleByPoints(y.points);let R=_.getEdgeCenterPoints(b)[S];const L=XG(S);let V=Jn(R,a5,L);const Z=S3(e,y.shape),ne=y.points.map(ue=>Jn(ue,a5+I8(y.points[0],y.points[1],xI(L)),L));u=$t(),f=$t(),u.style.opacity="0.6",f.style.opacity="0.6",a=o1(e,ne,y.shape),a.angle=y.angle,a.fill=y.fill,a.strokeColor=y.strokeColor,a.strokeStyle=y.strokeStyle,a.strokeWidth=y.strokeWidth,a.groupId=y.groupId;const le=Qa(R,y)||R,de=Qa(V,a)||V;s=y3(e,Nn.elbow,le,de,y,u),ig.set(e,{temporaryArrowLineElement:s,temporaryShapeElement:a});const Pe=Cg(e,de,a);s.target.boundId=a.id,s.target.connection=Pe,Z.processDrawing(a,f),H.getElementTopHost(e).append(f)}return}}ig.delete(e),n(g)},e.pointerLeave=g=>{d(),r(g)};const d=()=>{o&&(o==null||o.remove(),H.getBoardContainer(e).classList.remove(Sp.crosshair),u==null||u.remove(),f==null||f.remove()),ig.get(e)&&ig.delete(e)};return e.globalPointerUp=g=>{i(g),d()},e},RV=e=>{let n=0;const r=100;return lh(e,{key:"line-text",canResize:()=>!0,hitTest:o=>{let s=null;const a=rl(e,o,u=>Se.isArrowLine(u));if(a){const u=w3(e,a,o),d=Lg(a)[u];if(u!==-1&&!d.isEditing)return n=u,{element:a,handle:OC.e}}return s},onResize:(o,s)=>{const a=o.element;if(a){const u=s.endPoint,f=Ki(e,a);if(bA(u,f)<=r){const g=Hn(u,f,!1),p=C8(f,g),y=[...a.texts];y[n]={...y[n],position:p},qi.setArrowLineTexts(e,a,y)}}}}),e},kV=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i,afterChange:o,drawSelectionRectangle:s}=e;let a=null,u,f=!1;const d=()=>{const g=tt(e);return g.length>0&&g.every(p=>Se.isDrawElement(p)&&!Se.isArrowLine(p)||Se.isCustomGeometryElement(e,p))};return e.pointerDown=g=>{if(!d()||H.isReadonly(e)||H.hasBeenTextEditing(e)||!Ya(g)){n(g);return}const p=Xf(e,g.x,g.y),y=tt(e),w=dn(e,y,!1),E=ki(e,w),S=X$(E),D=Co(y),A=D?Ir(p,_.getCenterPoint(E),-D):p;S&&_.isHit(_.getRectangleByPoints([A,A]),S)&&(a={elements:[...y],startPoint:p}),n(g)},e.pointerMove=g=>{if(a){g.preventDefault();const p=!!g.shiftKey;$G(e,a);const y=Xf(e,g.x,g.y),w=dn(e,a.elements,!1),E=ki(e,w),S=_.getCenterPoint(E);!Co(a.elements)&&a.elements.length>1&&(f=!0),ha(e,"with-common-rotate",()=>{if(a&&a.startPoint){let D=dI(a.startPoint,y,S);const A=Co(a.elements);D=$p(A+D),p&&(D+=Math.PI/12/2,D-=D%(Math.PI/12));let P=D%(Math.PI/2);if(Math.PI/2-P<=CC(5)){const b=Math.PI/2-P;D+=b}if(P<=CC(5)){const b=-P;D+=b}a.angle=$p(D-A)||0,hI(e,a.elements,a.angle),Or.set(e,!0),H.getBoardContainer(e).classList.add("element-rotating")}});return}r(g)},e.globalPointerUp=g=>{if(i(g),f){f=!1;const p=tt(e);Ze.addSelectionWithTemporaryElements(e,p)}H.getBoardContainer(e).classList.remove("element-rotating"),WG(e),a=null,Or.set(e,!1)},e.afterChange=()=>{if(o(),u&&(u.remove(),u=null),d()&&!vi(e)){if(f&&a){const g=dn(e,a.elements,!1),p=ki(e,g);u=nD(e,p),u.classList.add(nS),a.angle&&Rs(u,_.getCenterPoint(p),a.angle)}else{const g=tt(e),p=dn(e,g,!1),y=ki(e,p);u=nD(e,y),u.classList.add(nS),Rs(u,_.getCenterPoint(y),Co(g))}H.getActiveHost(e).append(u)}},e.drawSelectionRectangle=()=>{if(f&&a){const g=dn(e,a.elements,!1),p=ki(e,g),y=da(e,_.inflate(p,pr),{stroke:So,strokeWidth:pr});return y.classList.add(C1),a.angle&&Rs(y,_.getCenterPoint(p),a.angle),y}return s()},e};class U4 extends Cc{constructor(){super()}initializeGenerator(){this.activeGenerator=D1(this.board,{getStrokeWidth:()=>pr,getStrokeOpacity:()=>1,getRectangle:n=>{const r=rg(n);return r!=null&&r.length?yz(this.board,this.element,r):_.getRectangleByPoints(n.points)},hasResizeHandle:()=>{const n=rg(this.element);return n!=null&&n.length?!1:aw(this.board,this.element)}}),this.tableGenerator=new gw(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new nu(this.board),this.getRef().addGenerator(nu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(r=>{if(e1.isVerticalText(r)){const i=Z8(this.board,r);if(i){const s=yi(wg.table).getTextRectangle(this.element,{id:r.id,board:this.board});i.g.classList.add("vertical-cell-text"),Rs(i.g,_.getCenterPoint(s),CC(-90))}}})}getDrawShapeTexts(n){return n.filter(r=>e4(r)).map(r=>({id:r.id,text:r.text,textHeight:r.textHeight,board:this.board}))}initializeTextManage(){const n=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new d3(this.board,this.element,n,{onChange:(r,i,o)=>{const s=H.findPath(this.board,r);i.newText&&qi.setTableText(this.board,s,o.id,i.newText,i.height),i.operations&&p3(r,i.operations)},getRenderRectangle:(r,i)=>{const o=uh(this.board,r,i.id);if(e1.isVerticalText(o)){const s=_.getRectangleByPoints(o.points),a=Qt(o),u=o.textHeight||0,f=s.height-gt.rectangleAndText*2-a*2;return{width:u,height:f>0?f:0,x:s.x+gt.rectangleAndText+a,y:s.y+(s.height-f)/2}}else return $4(o)}}),this.textGenerator.initialize()}onContextChanged(n,r){if(n.element!==r.element||n.hasThemeChanged){const i=rg(r.element);i!=null&&i.length&&(PD(r.element),Y8(n.element,i)),this.tableGenerator.processDrawing(n.element,this.getElementG()),this.activeGenerator.processDrawing(n.element,H.getActiveHost(this.board),{selected:this.selected});const o=this.getDrawShapeTexts(r.element.cells),s=this.getDrawShapeTexts(n.element.cells);this.textGenerator.update(n.element,o,s,this.getElementG()),this.rotateVerticalText()}else{const i=n.selected===r.selected,o=rg(n.element);(!i||o!=null&&o.length||n.selected)&&this.activeGenerator.processDrawing(n.element,H.getActiveHost(this.board),{selected:this.selected}),this.selected||PD(n.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const l5=20;function bV(e){let n;return lh(e,{key:"draw-table",canResize:()=>{const i=tt(e);return HC(e)&&!Za(i[0])},hitTest:i=>{const s=tt(e)[0];if(s&&Se.isElementByTable(s)){let a=e.getRectangle(s),u=$C(e,a,i,s.angle);if(u){const d=Nf(e,s);if(d&&HC(e)||!d&&!Vv(e,u.handle))return{element:s,handle:u.handle,cursorClass:u.cursorClass,rectangle:a}}const f=R1(e,s);for(let d=0;d<f.length;d++)if(a=_.getRectangleByPoints(f[d].points),u=$C(e,a,i,0),u&&!Vv(e,u.handle))return{element:s,handle:u.handle,cursorClass:u.cursorClass,rectangle:a,options:{cell:f[d]}}}return null},onResize:(i,o)=>{var a,u,f,d;n==null||n.remove();const s=H.findPath(e,i.element);if((a=i.options)!=null&&a.cell&&i.rectangle){const g=xy(i.handle),{originPoint:p,handlePoint:y}=WC(e,g,i.rectangle),w=[o.startPoint,o.endPoint],{xZoom:E,yZoom:S}=b3(w,p,y,!1,!1),D=(u=i.options)==null?void 0:u.cell.points,A=D.map(V=>Wl(V,p,E,S)),P=A[1][0]-D[1][0],b=A[1][1]-D[1][1],R=A[1][0]-A[0][0],L=A[1][1]-A[0][1];if(P!==0&&R>=l5){const{columns:V,points:Z}=Q8(i.element,(f=i.options)==null?void 0:f.cell.columnId,R,P);Ze.setNode(e,{columns:V,points:Z},s)}else if(b!==0&&L>=l5){const{rows:V,points:Z}=J8(i.element,(d=i.options)==null?void 0:d.cell.rowId,L,b);Ze.setNode(e,{rows:V,points:Z},s)}}else{const g=Vv(e,i.handle),p=o.isShift,y=xy(i.handle),{originPoint:w,handlePoint:E}=WC(e,y,i.rectangle),S=G4(e,i,o,{originPoint:w,handlePoint:E},p,g),D=vw(e,[i.element],S);n=D.snapG,H.getElementTopHost(e).append(n);const A=D.activePoints,P=i.element.points,b=_.getRectangleByPoints(P),R=_.getRectangleByPoints(A),L=R.width-b.width,V=R.height-b.height;let Z=[...i.element.columns],ne=[...i.element.rows];L!==0&&(Z=Z.map(le=>le.width?{...le,width:le.width+L*(le.width/b.width)}:le)),V!==0&&(ne=ne.map(le=>le.height?{...le,height:le.height+V*(le.height/b.height)}:le)),Ze.setNode(e,{points:Yf(A),columns:Z,rows:ne},s)}},afterResize:i=>{n==null||n.remove(),n=null}}),e}const OV=e=>{const n=e,{drawElement:r,getRectangle:i,isRectangleHit:o,isHit:s,isMovable:a,dblClick:u,keyDown:f,pointerUp:d}=n;return n.drawElement=g=>Se.isElementByTable(g.element)?U4:r(g),n.isHit=(g,p,y)=>{if(Se.isElementByTable(g)){const w=_.getRectangleByPoints(g.points),E=Zd.getNearestPoint(w,p);return bt(E[0],E[1],p[0],p[1])<=yE||_.isPointInRectangle(w,p)}return s(g,p,y)},n.getRectangle=g=>Se.isElementByTable(g)?_.getRectangleByPoints(g.points):i(g),n.isMovable=g=>Se.isElementByTable(g)?!0:a(g),n.isRectangleHit=(g,p)=>{if(Se.isElementByTable(g)){const y=_.getRectangleByPoints([p.anchor,p.focus]),w=_.getRectangleByPoints(g.points);return ay(_.getCornerPoints(w),y)}return o(g,p)},n.keyDown=g=>{const p=tt(e),y=p.length===1,w=p[0];if(!H.isReadonly(e)&&!H.hasBeenTextEditing(n)&&!o3(g)&&!a3(g)&&!s3(g)&&y&&(g.preventDefault(),Se.isElementByTable(w))){const E=rg(w);let S=w.cells.find(D=>D.text&&D.textHeight);if(E!=null&&E.length&&(S=E.find(D=>D.text&&D.textHeight)),S){AD(e,S);return}}f(g)},n.dblClick=g=>{if(g.preventDefault(),!H.isReadonly(e)){const p=It(e,Lt(e,g.x,g.y)),y=rl(e,p);if(y&&Se.isElementByTable(y)){const w=DD(n,y,p);if(w&&w.text&&w.textHeight){AD(e,w);return}}}u(g)},n.pointerUp=g=>{const p=H.isPointer(n,nn.selection)||H.isPointer(n,nn.hand);if(!Ya(g)||cc(n)||!p){d(g);return}if(HC(n)){const w=It(n,Lt(n,g.x,g.y)),E=pz(n)[0],S=DD(n,E,w);S&&S.text&&S.textHeight&&Y8(E,[S])}d(g)},n.buildTable=g=>g,bV(n)},Sx=e=>I4(e)&&lw(e),Tx=e=>I4(e)&&oh(e),IV=e=>{const{pointerMove:n,globalPointerUp:r,pointerUp:i}=e;let o=null,s=null;return e.pointerMove=a=>{o==null||o.remove(),o=$t();const u=new gw(e),f=H.getPointer(e),d=Sx(e),g=It(e,Lt(e,a.x,a.y));if(d){const p=O4(f,g);s=By(f,p),u.processDrawing(s,o),H.getElementTopHost(e).append(o)}n(a)},e.pointerUp=a=>{Sx(e)&&s||i(a)},e.globalPointerUp=a=>{Sx(e)&&s&&tu(e,s),s=null,o==null||o.remove(),o=null,r(a)},e},FV=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,keyDown:o,keyUp:s}=e;let a=null,u=null,f=null,d=!1,g;return e.keyDown=p=>{d=on.isKeyHotkey("shift",p),o(p)},e.keyUp=p=>{d=!1,s(p)},e.pointerDown=p=>{!H.isReadonly(e)&&Tx(e)&&(a=It(e,Lt(e,p.x,p.y))),n(p)},e.pointerMove=p=>{u==null||u.remove(),u=$t();const y=new gw(e),w=It(e,Lt(e,p.x,p.y)),E=H.getPointer(e);if(g==null||g.remove(),a&&Tx(e)){let S=Yf([a,w],d);const D=_.getRectangleByPoints(S),[A,P]=Qn(a,w),b=vw(e,[],{resizePoints:S,activeRectangle:D,directionFactors:[yg(A),yg(P)],isAspectRatio:d,isFromCorner:!0,isCreate:!0});g=b.snapG,H.getElementTopHost(e).append(g),S=Yf(b.activePoints,d),f=By(E,S),y.processDrawing(f,u),H.getElementTopHost(e).append(u)}r(p)},e.pointerUp=p=>{if(Tx(e)&&a){const y=It(e,Lt(e,p.x,p.y)),{width:w,height:E}=_.getRectangleByPoints([a,y]);if(Math.hypot(w,E)<8){const S=H.getPointer(e),D=O4(S,y);f=By(S,D)}f&&tu(e,f),g==null||g.remove(),u==null||u.remove(),u=null,a=null,f=null;return}i(p)},e},LV=e=>{const{drawElement:n,buildTable:r,pointerUp:i}=e;return e.drawElement=o=>Se.isSwimlane(o.element)?U4:n(o),e.buildTable=o=>Se.isSwimlane(o)?L$(o):r(o),FV(IV(e))},_V=e=>{const{pointerDown:n,pointerMove:r,dblClick:i,globalKeyDown:o}=e;let s=null,a=null,u=[];const f=()=>{a&&Ze.insertNode(e,a,[e.children.length]),H.getBoardContainer(e).classList.remove("vector-line-closed"),s==null||s.remove(),s=null,a=null,u=[]};return e.pointerDown=d=>{const g=rz(),p=H.isInPointer(e,g);if(!H.isReadonly(e)&&p&&oh(e)){let y=It(e,Lt(e,d.x,d.y));if(u.length>1&&bt(...y,...u[0])<=Sy){u.push(u[0]),f();return}u.push(y);return}n(d)},e.pointerMove=d=>{s==null||s.remove(),s=$t();let g=It(e,Lt(e,d.x,d.y));H.getPointer(e)===My.vectorLine&&u.length>0&&(bt(...g,...u[0])<=Sy?(g=u[0],H.getBoardContainer(e).classList.add("vector-line-closed")):H.getBoardContainer(e).classList.remove("vector-line-closed"),a=Xz(e,s1.straight,u,g,s)),r(d)},e.dblClick=d=>{if(!H.isReadonly(e)&&a){f(),sn.updatePointerType(e,nn.selection);return}i(d)},e.globalKeyDown=d=>{if(!H.isReadonly(e)){const g=on.isKeyHotkey("esc",d),p=on.isKeyHotkey("v",d);(g||p)&&a&&(f(),p&&sn.updatePointerType(e,nn.selection))}o(d)},e},NV=e=>(lh(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:r=>{const i=M4(e);if(i.length>0){let o=null;return i.forEach(s=>{const a=E4(e,s,r);a&&(o={element:s,handle:a.handle,handleIndex:a.handleIndex})}),o}return null},onResize:(r,i)=>{let o=[...r.element.points],s=r.handleIndex;if(r.handle===Yr.source||r.handle===Yr.target)if(o[s]=i.endPoint,b1(r.element.points))o[o.length-1]=i.endPoint;else{const a=r.handle===Yr.source?o[o.length-1]:o[0];bt(...i.endPoint,...a)<=Sy&&(o[s]=a)}else r.handle===Yr.addHandle?o.splice(s+1,0,i.endPoint):o[s]=i.endPoint;Ze.setNode(e,{points:o},r.path)}}),e),X4=e=>{const{drawElement:n,getRectangle:r,isRectangleHit:i,isHit:o,isInsidePoint:s,isMovable:a,isAlign:u,getRelatedFragment:f,getOneHitElement:d}=e;return e.drawElement=g=>Se.isGeometry(g.element)?(Se.isUML(g.element),r5):Se.isArrowLine(g.element)?mV:Se.isVectorLine(g.element)?vV:Se.isImage(g.element)?DV:n(g),e.getRectangle=g=>{if(Se.isGeometry(g))return _.getRectangleByPoints(g.points);if(Se.isArrowLine(g)){const p=Ki(e,g),y=g.texts.map((E,S)=>v3(e,g,S)),w=_.getRectangleByPoints(p);return _.getBoundingRectangle([w,...y])}if(Se.isVectorLine(g)){const p=oc(e,g),y=_.getRectangleByPoints(p);return _.getBoundingRectangle([y])}return Se.isImage(g)?_.getRectangleByPoints(g.points):r(g)},e.isRectangleHit=(g,p)=>{const y=Yz(e,g,p);return y!==null?y:i(g,p)},e.isHit=(g,p,y)=>{const w=t$(e,g,p,y);return w!==null?w:o(g,p,y)},e.getOneHitElement=g=>g.every(y=>Se.isDrawElement(y))?p4(e,g):d(g),e.isInsidePoint=(g,p)=>{const y=r$(e,g,p);return y!==null?y:s(g,p)},e.isMovable=g=>{if(Se.isGeometry(g)||Se.isImage(g)||Se.isVectorLine(g))return!0;if(Se.isArrowLine(g)){const p=tt(e),y=w=>!!p.find(E=>E.id===w);return!!(!g.source.boundId&&!g.target.boundId||g.source.boundId&&y(g.source.boundId)&&p.includes(g)||g.target.boundId&&y(g.target.boundId)&&p.includes(g))}return a(g)},e.isAlign=g=>Se.isGeometry(g)||Se.isImage(g)?!0:u(g),e.getRelatedFragment=(g,p)=>{const y=p!=null&&p.length?p:tt(e),E=e.children.filter(S=>Se.isArrowLine(S)).filter(S=>{const D=y.find(b=>b.id===S.source.boundId),A=y.find(b=>b.id===S.target.boundId),P=y.includes(S);return D&&A&&!P});return f([...g,...E],p)},LV(OV(q$(_V(MV(SV(NV(PV(RV(TV(kV(EV(BV(wV(xV(CV(yV(e)))))))))))))))))},Tt={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var nt;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(nt||(nt={}));var Po;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(Po||(Po={}));function VC(e){return e.origin.layout?e.origin.layout:Tt.isAbstract(e.origin)?I3(VC(e.parent)):e.parent?VC(e.parent):null}const Ja=e=>e===nt.rightBottomIndented||e===nt.rightTopIndented||e===nt.leftBottomIndented||e===nt.leftTopIndented,HV=e=>e===nt.right||e===nt.left||e===nt.downward||e===nt.upward,Do=e=>e===nt.standard,di=e=>e===nt.right||e===nt.left||e===nt.standard||Ja(e),a1=e=>e===nt.right||e===nt.left||e===nt.standard,UC=e=>e===nt.upward||e===nt.downward,rc=e=>e===nt.leftTopIndented||e===nt.rightTopIndented||e===nt.upward,GV=e=>e===nt.leftBottomIndented||e===nt.rightBottomIndented||e===nt.downward,l1=e=>e===nt.left||e===nt.leftTopIndented||e===nt.leftBottomIndented,Ry=e=>e===nt.right||e===nt.rightTopIndented||e===nt.rightBottomIndented,Dx=e=>Ja(e)?Po.indented:(Do(e)||HV(e),Po.logic),I3=e=>Ja(e)?Ry(e)?nt.right:nt.left:e;class u1{constructor(n,r,i,o){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const s=r.getHorizontalGap(n,o),a=r.getVerticalGap(n,o);this.origin=n,this.width=r.getWidth(n),this.height=r.getHeight(n),this.x=this.y=0,o&&(this.parent=o);const u=VC(this);this.layout=u&&u!==nt.standard?u:i.rootLayoutType;const f=r.getVerticalConnectingPosition(n,o);f&&(this.verticalConnectingPosition=f),this.addGap(s,a)}isRoot(){return this.depth===0}addGap(n,r){const i=this;i.hGap+=n,i.vGap+=r,i.width+=2*n,i.height+=2*r}eachNode(n){K4(this,n)}getBoundingBox(){const n={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(r=>{n.left=Math.min(n.left,r.x),n.top=Math.min(n.top,r.y),n.right=Math.max(n.right,r.x+r.width),n.bottom=Math.max(n.bottom,r.y+r.height)}),n.width=n.right-n.left,n.height=n.bottom-n.top,n}translate(n=0,r=0){this.eachNode(i=>{i.x+=n,i.y+=r})}right2left(){const n=this,r=n.getBoundingBox();n.eachNode(i=>{i.x=i.x-(i.x-r.left)*2-i.width,i.left=!0}),n.translate(r.width,0)}down2up(){const n=this,r=n.getBoundingBox();n.eachNode(i=>{i.y=i.y-(i.y-r.top)*2-i.height,i.up=!0}),n.translate(0,r.height)}}function K4(e,n){var r;(r=e.children)==null||r.forEach(i=>{K4(i,n)}),n(e)}class jV{constructor(n,r,i,o,s,a,u,f,d,g){this.left=n,this.right=r,this.top=i,this.bottom=o,this.width=s,this.height=a,this.rootX=u,this.rootY=f,this.rootWidth=d,this.rootHeight=g}}function zV(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var XC;(function(e){e.middle="middle",e.bottom="bottom"})(XC||(XC={}));class Zf{constructor(n,r,i,o,s){this.width=n,this.height=r,this.y=i,this.children=o,this.childrenCount=o.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=s}}const Sc=e=>{var n;return e.children?(n=e.children)==null?void 0:n.filter(r=>r instanceof u1?!Tt.isAbstract(r.origin):r instanceof Zf?!Tt.isAbstract(r.origin.origin):!Tt.isAbstract(r)):[]},q4=(e,n)=>{const r=e.children.indexOf(n);return e.children.find(i=>{if(i instanceof u1)return Tt.isAbstract(i.origin)&&i.origin.end===r;if(i instanceof Zf&&e instanceof Zf){if(Tt.isAbstract(i.origin.origin)){const{end:o}=sc(i.origin.origin,e.origin);return o===r}return!1}return Tt.isAbstract(i)&&i.end===r})},$V=(e,n)=>{const r=e.children.indexOf(n);return e.children.find(i=>{if(i instanceof u1)return Tt.isAbstract(i.origin)&&i.origin.start===r;if(i instanceof Zf&&e instanceof Zf){if(Tt.isAbstract(i.origin.origin)){const{start:o}=sc(i.origin.origin,e.origin);return o===r}return!1}return Tt.isAbstract(i)&&i.start===r})},sc=(e,n)=>{let r=e.start,i=e.end;if(Do(n.layout)){const o=n.origin.rightNodeCount;r>=o&&(i-=o,r-=o)}return{start:r,end:i}};function ky(e,n,r){e.children[n].modifier+=r}function WV(e){return e.childrenCount===0?null:e.children[0]}function Y4(e){let n=Sc(e);return e.childrenCount===0?null:n[n.length-1]}function VV(e,n){if(Tt.isAbstract(e.children[n].origin.origin))return;let r=e.children[n-1],i=e.children[n],o=r.modifier+r.preliminary+r.width,s=i.modifier+i.preliminary,a=0,u=e,f=e;for(;r||i;){if(r){let g=a+r.modifier+r.preliminary+r.width;g>o&&(o=g),o=Q4(u,r,o,a),u=r,a=r.modifier+a,r=Y4(r)}if(i){let g=i.modifier+i.preliminary;g<s&&(s=g),s=KV(f,i,s),f=i,i=WV(i)}}const d=o-s;d>0&&ky(e,n,d)}function UV(e){const n=e.children[0];let r=n.preliminary+n.modifier;const i=Sc(e),o=i[i.length-1];let s=o.modifier+o.preliminary+o.width;n.origin.blackNode&&n.origin.blackNode.rootX>n.origin.blackNode.left&&(r=r+(n.origin.blackNode.rootX-n.origin.blackNode.left)),o.origin.blackNode&&o.origin.blackNode.rootX+o.origin.blackNode.rootWidth<o.origin.blackNode.right&&(s=s-(o.origin.blackNode.right-(o.origin.blackNode.rootX+o.origin.blackNode.rootWidth))),n.origin.verticalConnectingPosition&&o.origin.verticalConnectingPosition&&(r=r+n.width-n.origin.vGap,s=s-o.origin.vGap);let a=e.width/2;e.origin.verticalConnectingPosition&&(a=e.width-e.origin.vGap);const u=(r+s)/2-a;u>0?e.preliminary=u:e.children.forEach((f,d)=>{ky(e,d,Math.abs(u))})}function KC(e){if(e.childrenCount!==0){KC(e.children[0]);for(let n=1;n<e.childrenCount;n++){const r=e.children.find(i=>{let o=null;if(Tt.isAbstract(i.origin.origin)){let{end:s}=sc(i.origin.origin,e.origin);o=s}return o===n-1});r&&XV(e,r),KC(e.children[n]),VV(e,n)}UV(e)}}function Z4(e,n){n+=e.modifier,e.x=e.preliminary+n;for(let r=0;r<e.childrenCount;r++)Z4(e.children[r],n)}function XV(e,n,r){const{start:i,end:o}=sc(n.origin.origin,e.origin),s=e.children.indexOf(n),a=e.children[i];let u=e.children[o];const f=a.modifier;let d=u.modifier+u.preliminary+u.width,g=u.modifier,p=e;for(e.children[s].modifier=a.modifier;u.childrenCount;){p=u;const E=Y4(u);u=E||u;let S=g+u.modifier+u.preliminary+u.width;d=Q4(p,u,d,g),g+=u.modifier,S>d&&(d=S)}const y=n.origin.blackNode?n.origin.blackNode.rootX*2+n.origin.blackNode.rootWidth:n.width,w=d-f;if(w>y){const E=(w-y)/2;ky(e,s,E)}else{const E=(y-w)/2;for(let S=i;S<o+1;S++)ky(e,S,E)}}function Q4(e,n,r,i){const o=q4(e,n);return o?Math.max(o.modifier+o.width+i,r):r}function KV(e,n,r){const i=$V(e,n);return i?Math.min(i.modifier+i.preliminary,r):r}function qV(e){KC(e),Z4(e,0)}function qC(e,n=0){e.x=n,e.children.forEach(r=>{if(Tt.isAbstract(r.origin)){let i=0;for(let o=r.origin.start;o<=r.origin.end;o++){const s=e.children[o].getBoundingBox();i=Math.max(s.width,i)}qC(r,e.x+e.width/2+i)}else qC(r,e.x+e.width/2)})}function YV(e,n){let r=e.y+e.height,i=null;o(e);function o(s){s.children.forEach((a,u)=>{const f=s.children.find(g=>Tt.isAbstract(g.origin)&&g.origin.end===u-1);if(f){const g=i!=null&&i.origin.isCollapsed?n.getExtendHeight(a.origin):0;r=ZV(s,f)+g}if(Tt.isAbstract(a.origin))return;let d=r+a.vGap;i&&!a1(i.layout)&&i.origin.children.length>0&&(i.origin.isCollapsed?d=d+n.getExtendHeight(a.origin):d=d+n.getIndentedCrossLevelGap()),a.y=d,i=a,r=a.y+a.height,o(a)})}}function ZV(e,n){const r=n.origin,i=e.children.indexOf(n),o=e.children[r.start],s=e.children[r.end];e.children[i].y=o.y;const a=o.y;let u=s.y+s.height,f=s,d=e;for(;f!=null&&f.children.length;){d=f;const w=Sc(d);f=w[w.length-1];const E=q4(d,f);u=E?Math.max(E.y+E.height,f.y+f.height):f.y+f.height}const g=u-a,p=n.blackNode?n.blackNode.height:n.height,y=n.blackNode?n.blackNode.rootY*2+n.blackNode.rootHeight:n.height;if(y>g){const w=(y-g)/2;for(let E=r.start;E<=r.end;E++)e.children[E].eachNode(S=>{S.y+=w})}else{const w=(g-y)/2;e.children[i].y+=w}return Math.max(n.y+p,o.y+g)}function J4(e,n,r){r?n.y=e.x:n.x=e.x,e.children.forEach((i,o)=>{J4(i,n.children[o],r)})}function eB(e,n,r=0){var i,o;if(n){if(Tt.isAbstract(e.origin)){const{start:s,end:a}=sc(e.origin,e.parent);for(let u=s;u<=a;u++){const f=(i=e.parent)==null?void 0:i.children[u].getBoundingBox().right;r=Math.max(f,r)}}e.x=r,r+=e.width}else{if(Tt.isAbstract(e.origin))for(let s=e.origin.start;s<=e.origin.end;s++){const a=(o=e.parent)==null?void 0:o.children[s].getBoundingBox().bottom;r=Math.max(a,r)}e.y=r,r+=e.height}e.children.forEach(s=>{eB(s,n,r)})}const tB=(e,n)=>{const r=[];return e.children.forEach(i=>{r.push(tB(i,n))}),n?(e.blackNode&&(e.blackNode=zV(e.blackNode)),new Zf(e.height,e.width,e.x,r,e)):new Zf(e.width,e.height,e.y,r,e)};class QV{constructor(){}layout(n,r,i,o,s=!1,a){const u=[],f=[],d=this.buildLayoutNode(n,i,o,u,a);switch(u.filter(p=>p.origin.children.length>0).forEach(p=>{const y=p.layout,w=o.toTop||di(o.rootLayoutType)&&rc(y),E=o.toLeft||!di(o.rootLayoutType)&&l1(y),S=di(y),D=this.layout(p.origin,Dx(y),i,{toTop:w,toLeft:E,rootLayoutType:o.rootLayoutType},S,p.parent);!o.toTop&&w&&r!==Po.indented&&D.down2up(),!o.toLeft&&E&&D.right2left();const A=D.getBoundingBox();p.width=A.width,p.height=A.height,p.blackNode=new jV(A.left,A.right,A.top,A.bottom,A.width,A.height,D.x,D.y,D.width,D.height),f.push(D)}),r){case Po.indented:qC(d),YV(d,i);break;case Po.fishBone:break;case Po.logic:default:eB(d,s);const p=tB(d,s);qV(p),J4(p,d,s);break}const g=[];return u.filter(p=>p.origin.children.length>0).forEach((p,y)=>{if(p.parent){const w=f[y];w.parent=p.parent;let E,S;di(p.parent.layout)?(E=w.x,S=0):(E=0,S=w.y),w.translate(p.x-E,p.y-S);const A=p.parent.children.indexOf(p),P=p.parent.children[A];p.parent.children[A]=Object.assign(P,w);const b=g.find(R=>R.parent===p.parent&&!Tt.isAbstract(p.origin));b?(b.offsetX<E&&(b.offsetX=E),b.offsetX<S&&(b.offsetX=S)):Tt.isAbstract(p.origin)||g.push({parent:p.parent,offsetX:E,offsetY:S})}}),g.forEach(p=>{p.parent.children.forEach(y=>y.translate(p.offsetX,p.offsetY))}),d}buildLayoutNode(n,r,i,o,s){const a=new u1(n,r,i,s);if(!a.origin.isCollapsed){const u=[a];let f;for(;f=u.pop();)if(!f.origin.isCollapsed){const d=f.origin.children,g=d?d.length:0;if(f.children=[],d&&g)for(let p=0;p<g;p++){const y=new u1(d[p],r,i,f);f.children.push(y),y.depth=f.depth+1,(f.layout!==y.layout&&(Dx(f.layout)!==Dx(y.layout)||di(f.layout)!==di(y.layout))||Tt.isAbstract(y.origin))&&!y.origin.isCollapsed?o.push(y):u.push(y)}}}return a}}class JV{static layout(n,r,i){const o=new QV;if(Do(i)){const p=n.children.length,y=[],w=[],E={...n};for(let P=0;P<p;P++){const b=n.children[P];if(Tt.isAbstract(b)&&b.end<n.rightNodeCount){y.push(b);continue}if(Tt.isAbstract(b)&&b.start>=n.rightNodeCount){w.push(b);continue}P<n.rightNodeCount?y.push(b):w.push(b)}E.children=y;const S=o.layout(E,Po.logic,r,{toLeft:!1,toTop:!1,rootLayoutType:i},!0);E.children=w;const D=o.layout(E,Po.logic,r,{toLeft:!0,toTop:!1,rootLayoutType:i},!0);D.right2left(),S.translate(D.x-S.x,D.y-S.y);const A=S.children.filter(P=>Tt.isAbstract(P.origin));return S.children=S.children.filter(P=>!Tt.isAbstract(P.origin)),D.children.forEach(P=>{S.children.push(P),P.parent=S}),S.children=S.children.concat(A),S.x=D.x,S.origin=n,S}const s=Ja(i),a=s?Po.indented:Po.logic,u=s?!0:di(i),f=rc(i),d=l1(i),g=o.layout(n,a,r,{toTop:f,toLeft:d,rootLayoutType:i},u);return f&&g.down2up(),d&&g.right2left(),g}}const c1=new WeakMap;var cn;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(cn||(cn={}));const by={[nt.right]:[cn.right],[nt.left]:[cn.left],[nt.upward]:[cn.top],[nt.downward]:[cn.bottom],[nt.rightBottomIndented]:[cn.right,cn.bottom],[nt.rightTopIndented]:[cn.right,cn.top],[nt.leftBottomIndented]:[cn.left,cn.bottom],[nt.leftTopIndented]:[cn.left,cn.top]};var Vl;(function(e){e.mind="mind"})(Vl||(Vl={}));const eU=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],tU=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],nU=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],rU=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],iU=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],oU=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],nB={...p7,branchColors:eU,rootFill:"#f5f5f5",rootTextColor:ti},sU={...m7,branchColors:tU,rootFill:ti,rootTextColor:"#FFFFFF"},aU={...v7,branchColors:nU,rootFill:"#FFFFFF",rootTextColor:ti},lU={...y7,branchColors:rU,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},uU={...w7,branchColors:iU,rootFill:"#FFFFFF",rootTextColor:ti},cU={...x7,branchColors:oU,rootFill:"#FFFFFF",rootTextColor:ti},rB=[nB,sU,aU,lU,uU,cU],fU={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},yw="plait-mind-plugin-key",qr=4,cg="#6698FF",u5="#AAAAAA",YC=2,c5=8,iB=10,Df=2,Ua=20,Ud=10,hU=jp("#000000",.2),dU="#6698FF",f5="white",gU=240;var Eg;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(Eg||(Eg={}));function ZC(e,n){const r=e.getPluginOptions(yw),i=n.data.emojis.length;return{width:oB(n)*i+i*2*r.emojiPadding+(i-1)*r.spaceBetweenEmojis,height:n.height}}function oB(e){return Ft.isMind(e)?20:16}const Qf=(e,n,r)=>n[r],Pg={branch:{color:u5,width:2},shape:{strokeColor:u5,strokeWidth:2}},ww={shape:{rectangleRadius:4,strokeWidth:2,fill:"none"}},pU=e=>{const n=e.rightNodeCount,r=e.children;let i=[],o=[];for(let s=0;s<r.length;s++){const a=r[s];if(Tt.isAbstract(a)&&a.end<n){i.push(a);continue}if(Tt.isAbstract(a)&&a.start>=n){o.push(a);continue}s<n?i.push(a):o.push(a)}return{leftChildren:o,rightChildren:i}},L1=e=>{const n=_e.findParent(e);if(!n)return;const r=n.children.indexOf(e);return n.children.find(i=>Tt.isAbstract(i)&&r>=i.start&&r<=i.end)},sB=e=>{const n=_e.findParent(e);if(!n)return[];const r=n.children.indexOf(e);return n.children.filter(i=>Tt.isAbstract(i)&&i.start>r)},aB=(e,n)=>{const r=[];return n.filter(i=>!Tt.isAbstract(i)&&!Ft.isMind(i)).forEach(i=>{const o=L1(i);if(o&&n.indexOf(o)===-1&&r.indexOf(o)===-1){const{start:s,end:a}=o;_e.getParent(i).children.slice(s,a+1).every(d=>n.indexOf(d)>-1)&&r.push(o)}}),r},lB=(e,n)=>{const r=[];return n.filter(i=>!Tt.isAbstract(i)&&!Ft.isMind(i)).forEach(i=>{const o=L1(i);if(o&&n.indexOf(o)>0){const s=r.findIndex(a=>a.abstract===o);s===-1?r.push({abstract:o,references:[i]}):r[s].references.push(i)}}),r};function uB(e,n){const r=n.indexOf(e.references[0]),i=n.indexOf(e.references[e.references.length-1]);return{start:r,end:i}}const cB=(e,n,r=1,i=!0,o=new Map)=>{const s=tn.parent(e,n),a=n[n.length-1]!==0;let u;if(!a)u=s.children.filter(p=>Tt.isAbstract(p));else{const p=tn.get(e,Dt.previous(n));u=sB(p)}if(u.length&&u.forEach(p=>{let y=o.get(p);y||(y={start:0,end:0},o.set(p,y)),y.start=y.start+r,y.end=y.end+r}),!a)return o;const f=tn.get(e,Dt.previous(n)),d=L1(f),g=!i&&d&&d.end===n[n.length-1]-1;if(d&&!g){let p=o.get(d);p||(p={start:0,end:0},o.set(d,p)),p.end=p.end+r}return o},fB=(e,n,r=new Map)=>(n.forEach(i=>{if(!Ft.isMind(i)){const o=sB(i).filter(a=>!n.includes(a));o.length&&o.forEach(a=>{let u=r.get(a);u||(u={start:0,end:0},r.set(a,u)),u.start=u.start-1,u.end=u.end-1});const s=L1(i);if(s&&!n.includes(s)){let a=r.get(s);a||(a={start:0,end:0},r.set(s,a)),a.end=a.end-1}}}),r),hB=(e,n)=>!!_e.getAncestors(e,n).find(i=>Tt.isAbstract(i)),F3=(e,n)=>Tt.isAbstract(n)||hB(e,n)?gB(e,n):Qf(e,n,"branchColor")||Qf(e,n,"strokeColor")||pB(e,n),L3=(e,n)=>Qf(e,n,"branchShape")||Jf.bight,dB=(e,n)=>Qf(e,n,"branchWidth")||Qf(e,n,"strokeWidth")||YC,mU=(e,n)=>Uf(n.branchWidth)?Pg.branch.width:n.branchWidth,gB=(e,n)=>n.branchColor||n.strokeColor?n.branchColor||n.strokeColor:Pg.branch.color,pB=(e,n)=>{const r=H.findPath(e,n);return vU(e,r[1])},vU=(e,n)=>{const r=_3(e),i=r.branchColors.length,o=n%i;return r.branchColors[o]},_3=e=>{const r=H.getThemeColors(e).find(i=>i.mode===e.theme.themeColorMode);return r&&fU.isMindThemeColor(r)?r:nB},N3=(e,n)=>{if(Ft.isMind(n)){const r=_3(e).rootFill;return n.strokeColor||r}return Tt.isAbstract(n)||hB(e,n)?n.strokeColor||Pg.shape.strokeColor:Qf(e,n,"strokeColor")||pB(e,n)},xw=(e,n)=>n.strokeStyle||Vi.solid,_1=(e,n)=>n.strokeWidth||(Tt.isAbstract(n)?Pg.shape.strokeWidth:ww.shape.strokeWidth),mB=(e,n)=>{if(n.fill)return n.fill;const r=_3(e).rootFill;return Ft.isMind(n)?r:ww.shape.fill},f1=(e,n)=>Qf(e,n,"shape")||ru.roundRectangle;function H3(e){const n=_g(e);n==null||n.edit(()=>{},r=>{const i=r;return i.key==="Enter"&&!i.shiftKey})}const Ax=(e,n)=>(n!=null&&n.length?n:tt(e)).filter(i=>_e.isMindElement(e,i)),h5=e=>{const n=[];return e.forEach(r=>{by[r].forEach(o=>{!n.includes(o)&&!n.includes(j3(o))&&n.push(o)})}),n},yU=(e,n)=>{const r=by[e],i=by[n];if(!i)throw new Error(`unexpected layout: ${n} on correct layout`);return i.find(o=>r.includes(j3(o)))},wU=(e,n)=>{const r=n===cn.left||n===cn.right;let i=nt.standard;switch(e){case nt.left:i=nt.right;break;case nt.right:i=nt.left;break;case nt.downward:i=nt.upward;break;case nt.upward:i=nt.downward;break;case nt.rightBottomIndented:i=r?nt.leftBottomIndented:nt.rightTopIndented;break;case nt.leftBottomIndented:i=r?nt.rightBottomIndented:nt.leftTopIndented;break;case nt.rightTopIndented:i=r?nt.leftTopIndented:nt.rightBottomIndented;break;case nt.leftTopIndented:i=r?nt.rightTopIndented:nt.leftBottomIndented;break}return i},G3=()=>nt.standard,d5=e=>{const n=[],r=e.map(j3);for(const i in nt){const o=nt[i],s=by[o];if(s){const a=s.some(f=>e.includes(f)),u=s.some(f=>r.includes(f));a&&!u&&n.push(o)}}return n},j3=e=>{let n=cn.right;switch(e){case cn.top:n=cn.bottom;break;case cn.bottom:n=cn.top;break;case cn.right:n=cn.left;break;case cn.left:n=cn.right;break}return n},gc=e=>e.layout||G3(),xU=e=>{function n(i,o){return Ft.isMind(i)?qr*12:(o&&o.isRoot(),qr*3)}function r(i,o){return Ft.isMind(i)?qr*12:qr*8.5}return{getHeight(i){return bn.getNodeHeight(e,i)},getWidth(i){return bn.getNodeWidth(e,i)},getHorizontalGap(i,o){const s=o&&o.layout||gc(i),a=di(s);return Ja(s)?qr*6:a?r(i):n(i,o)},getVerticalGap(i,o){const s=o&&o.layout||gc(i);return Ja(s)?qr*3.5:di(s)?n(i,o):r(i)},getVerticalConnectingPosition(i,o){if(i.shape===ru.underline&&o&&a1(o.layout))return XC.bottom},getExtendHeight(i){return 0},getIndentedCrossLevelGap(){return qr*1}}},CU="",EU="",PU=e=>iw(e,Eg.mindCentralText,CU),SU=e=>iw(e,Eg.abstractNodeText,EU),g5=(e,n)=>{const r=PU(e),i=Cw(r,{layout:nt.right});i.type="mind";const o=bn.getNodeWidth(e,i),s=bn.getNodeHeight(e,i);return i.points=[[n[0]-o/2,n[1]-s/2]],i},Cw=(e,n)=>{const r={id:Tn(),type:"mind_child",data:{topic:ah(e)},children:[]};let i;for(i in n)Uf(n[i])||(r[i]=n[i]);return r},TU=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],DU=14,AU=18,BU=34,vB=e=>e.children.reduce((r,i)=>r+vB(i),0)+e.children.length,yB=(e,n)=>{let r=_e.findParent(n);for(;r;){if(r===e)return!0;r=_e.findParent(r)}return!1},Ip=e=>{let n=[];return e.forEach(r=>{e.some(o=>yB(o,r))||n.push(r)}),n},p5=(e,n)=>e.y>n.y,wB=e=>{const n={...e};n.id=Tn(),n.children=[];for(const r of e.children)n.children.push(wB(r));return n},z3=(e,n,r)=>{const i={};Ft.isMind(n)||(TU.forEach(s=>{i[s]=n[s]}),delete i.layout);const o=Cw("",i);Ze.insertNode(e,o,r),Mg(e),rh(e,o),setTimeout(()=>{H3(o)})},MU=e=>{const n=[],r=[];for(let i=0;i<e.length;i++){const o=_e.getParent(e[i]),s=r.indexOf(o);s===-1?(r.push(o),n.push([e[i]])):n[s].push(e[i])}return{parentElements:r,abstractIncludedGroups:n}},QC=e=>{if(Ft.isMind(e))return AU;if(_e.isMindElement(null,e))return DU;throw new Error("can not find default font-size")},RU="#6698FF80",$a=3.5,Av=10,Bv=8,h1={horizontal:{nodeAndText:qr*2.5,emojiAndText:qr*1.5},vertical:{nodeAndText:qr,nodeAndImage:qr,imageAndText:qr*1.5}},$3={horizontal:{nodeAndText:qr*4,emojiAndText:qr*2},vertical:{nodeAndText:qr*2}},Bx=(e,n)=>{const i=Ft.isMind(n)?$3.horizontal.nodeAndText:h1.horizontal.nodeAndText,o=_1(e,n);return i+o},Mx=(e,n)=>{const r=Ft.isMind(n),i=_1(e,n);return(r?$3.vertical.nodeAndText:h1.vertical.nodeAndText)+i},m5=e=>Ft.isMind(e)?$3.horizontal.emojiAndText:h1.horizontal.emojiAndText,bn={getNodeWidth(e,n){const r=Bx(e,n);return _e.hasEmojis(n)?bn.getEmojiLeftSpace(e,n)+ZC(e,n).width+m5(n)+bn.getTopicDynamicWidth(e,n)+r:r+bn.getTopicDynamicWidth(e,n)+r},getNodeHeight(e,n){const r=dx(e,n.data.topic,{fontSize:Jp,fontFamily:lg},bn.getTopicMaxDynamicWidth(e,n)),i=Xv(e,n,r.width,r.height),o=Mx(e,n);return _e.hasImage(n)?bn.getTextTopSpace(e,n)+i.height+o:o+i.height+o},getTopicDynamicWidth(e,n){var a;const r=dx(e,n.data.topic,{fontSize:QC(n),fontFamily:lg},bn.getTopicMaxDynamicWidth(e,n)),i=Xv(e,n,r.width,r.width),o=n.manualWidth||i.width,s=_e.hasImage(n)?(a=n.data.image)==null?void 0:a.width:0;return Math.max(o,s)},getTopicHeight(e,n){const r=dx(e,n.data.topic,{fontSize:Jp,fontFamily:lg},bn.getTopicMaxDynamicWidth(e,n));return Xv(e,n,r.width,r.height).height},getTopicMaxDynamicWidth(e,n){var i,o;const r=QC(n);return n.manualWidth?Math.max(n.manualWidth,_e.hasImage(n)?(i=n.data.image)==null?void 0:i.width:0):Math.max(r*BU,_e.hasImage(n)?(o=n.data.image)==null?void 0:o.width:0)},getNodeResizableMinWidth(e,n){const r=bn.getNodeTopicMinWidth(e,n);return _e.hasImage(n)&&n.data.image.width>r?n.data.image.width:r},getNodeTopicMinWidth(e,n){return kU(e,n)},getTextLeftSpace(e,n){const r=Bx(e,n);return _e.hasEmojis(n)?bn.getEmojiLeftSpace(e,n)+ZC(e,n).width+m5(n):r},getTextTopSpace(e,n){const r=Mx(e,n);return _e.hasImage(n)?bn.getImageTopSpace(e,n)+n.data.image.height+h1.vertical.imageAndText:r},getImageTopSpace(e,n){return _1(e,n)+h1.vertical.nodeAndImage},getEmojiLeftSpace(e,n){const r=e.getPluginOptions(yw);return Bx(e,n)-r.emojiPadding},getEmojiTopSpace(e,n){return Mx(e,n)}},kU=(e,n)=>{const r=QC(n);return Kl.getMarksByElement(n.data.topic)[Ri.fontSize]||r},Xv=(e,n,r,i)=>{const o=bn.getNodeTopicMinWidth(e,n);return{width:r<o?o:r,height:i}};function ir(e){const n=e.x+e.hGap;let r=e.y+e.vGap;const i=e.width-e.hGap*2,o=e.height-e.vGap*2;return{x:n,y:r,width:i,height:o}}function bU(e,n){const r=bn.getNodeWidth(e,n),i=bn.getNodeHeight(e,n);return{x:n.points[0][0],y:n.points[0][1],width:r,height:i}}function xB(e,n,r){const i=c1.get(r);return!!(i&&E1(n[0],n[1],ir(i))===0)}function CB(e,n){let{x:r,y:i}=ir(_e.getNode(n));r=r+bn.getEmojiLeftSpace(e,n);const{width:o}=ZC(e,n);return{x:r,y:i,width:o,height:bn.getNodeHeight(e,n)}}function EB(e,n){let r=ir(n);return PB(e,r,n.origin)}function PB(e,n,r){const i=n.x+bn.getTextLeftSpace(e,r),o=n.y+bn.getTextTopSpace(e,r),s=bn.getTopicDynamicWidth(e,r);return{height:bn.getTopicHeight(e,r),width:s,x:i,y:o}}function Ew(e,n){let{x:r,y:i}=ir(_e.getNode(n));const o=n.manualWidth||n.width;r=o>n.data.image.width?r+bn.getTextLeftSpace(e,n)+(o-n.data.image.width)/2:r+bn.getTextLeftSpace(e,n),i=bn.getImageTopSpace(e,n)+i;const{width:s,height:a}=n.data.image;return{x:r,y:i,width:s,height:a}}const SB=(e,n,r)=>{const i=Ew(e,n),o=_.getOutlineRectangle(i,-Bs/2);return _.isPointInRectangle(o,r)},OU=(e,n,r)=>{const i=Ew(e,n);return v8(i,Bs).find(a=>_.isHit(_.getRectangleByPoints([r,r]),a.rectangle))},IU=(e,n)=>{const r={...n};return delete r.rightNodeCount,r.type="mind_child",r.layout===nt.standard&&delete r.layout,r},JC=e=>{const n={...e};return delete n.start,delete n.end,n},FU=(e,n)=>{const r={...n};return Je.string(r.data.topic)||(r.data.topic={children:[{text:""}]}),r==null||delete r.strokeColor,r==null||delete r.fill,r==null||delete r.shape,r==null||delete r.strokeWidth,r==null||delete r.isCollapsed,{...r,layout:r.layout??nt.right,type:"mind"}},LU=(e,n)=>{B8(e,n),hn.getElementRef(n).getGenerator(eu.key).setFocus(n,!0)},Kv=(e,n)=>{bG(e),hn.getElementRef(n).getGenerator(eu.key).setFocus(n,!1)},TB=e=>{hn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{TB(n)})},DB=e=>{hn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{DB(n)})},v5=(e,n)=>{ou(e,n),n?H.getBoardContainer(e).classList.add("mind-node-dragging"):H.getBoardContainer(e).classList.remove("mind-node-dragging")},_U=(e,n,r)=>{let i=Sc(e);if(Ft.isMind(e)&&Do(gc(e))){const a=AB(e,n);a&&(i=i.slice(0,e.rightNodeCount)),a||(i=i.slice(e.rightNodeCount,i.length),r=[...r,r[r.length-1]-e.rightNodeCount])}let o=r[r.length-1]!==0,s=r[r.length-1]!==((i==null?void 0:i.length)||0);return e.isCollapsed&&(s=!1,o=!1),{hasPreviousNode:o,hasNextNode:s}},AB=(e,n)=>{const r=n.target;return Ft.isMind(e)&&Do(gc(e))&&e.children.indexOf(r)!==-1&&e.children.indexOf(r)<e.rightNodeCount||Ft.isMind(r)&&Do(gc(r))&&n.detectResult==="right"},NU=(e,n,r)=>{if(!Ft.isMind(n.origin)&&!Tt.isAbstract(n.origin)){const i=Ao.getCorrectLayoutByElement(e,n==null?void 0:n.parent.origin);if(Do(i)){const s=n.parent.children.findIndex(a=>a===n)>=(n.parent.origin.rightNodeCount||0);return ja(r,[s?"right":"left"])}if(l1(i))return ja(r,["right"]);if(Ry(i))return ja(r,["left"]);if(i===nt.upward)return ja(r,["bottom"]);if(i===nt.downward)return ja(r,["top"])}else{const i=Ao.getCorrectLayoutByElement(e,n==null?void 0:n.origin);if(Do(i))return ja(r,["top","bottom"]);if(i===nt.upward)return ja(r,["left","right","bottom"]);if(i===nt.downward)return ja(r,["left","right","top"]);if(l1(i))return ja(r,["right","top","bottom"]);if(Ry(i))return ja(r,["left","top","bottom"])}return null},ja=(e,n)=>{const r=e;return n.forEach(i=>{const o=r.findIndex(s=>s===i);o!==-1&&r.splice(o,1)}),r.length?r:null},HU=(e,n,r,i)=>{let o=null;return mi(e,s=>{if(!_e.isMindElement(e,s)||o)return;const a=_e.getNode(s),u=GU(a,n);u&&(o=NU(e,a,u)),r=null;const f=i.every(d=>jU(d,a.origin));o&&f&&(r={target:a.origin,detectResult:o[0]})},nh(e)),r},GU=(e,n)=>{const{x:r,y:i,width:o,height:s}=ir(e),a=i+s/2,u=r+o/2,f=e.y,d=e.y+e.height,g=e.x,p=e.x+e.width,y=[];return n[1]>i&&n[1]<i+s?(n[0]>g&&n[0]<u&&y.push("left"),n[0]>u&&n[0]<p&&y.push("right"),(n[0]>r&&n[0]<u||n[0]>u&&n[0]<r+o)&&(n[1]<a?y.push("top"):y.push("bottom")),y.length?y:null):n[0]>r&&n[0]<r+o?(n[1]>f&&n[1]<a&&y.push("top"),n[1]>a&&n[1]<d&&y.push("bottom"),(n[1]>i&&n[1]<i+s||n[1]>a&&n[1]<i+s)&&(n[0]<u?y.push("left"):y.push("right")),y.length?y:null):null},jU=(e,n)=>e!==n&&!yB(e,n),zU=(e,n)=>{let r=H.findPath(e,n==null?void 0:n.target);const i=Ft.isMind(n==null?void 0:n.target)?gc(n==null?void 0:n.target):Ao.getCorrectLayoutByElement(e,_e.getParent(n==null?void 0:n.target)),o=Sc(n.target);return UC(i)&&((n.detectResult==="top"||n.detectResult==="bottom")&&r.push(o.length),n.detectResult==="right"&&(r=Dt.next(r))),a1(i)&&(n.detectResult==="right"&&(Ft.isMind(n==null?void 0:n.target)&&Do(i)?r.push(n==null?void 0:n.target.rightNodeCount):r.push(o.length)),n.detectResult==="left"&&r.push(o.length),n.detectResult==="bottom"&&(r=Dt.next(r))),Ja(i)&&(rc(i)&&n.detectResult==="top"&&(r=Dt.next(r)),GV(i)&&n.detectResult==="bottom"&&(r=Dt.next(r)),l1(i)&&n.detectResult==="left"&&r.push(o.length),Ry(i)&&n.detectResult==="right"&&r.push(o.length)),r};function $U(e,n){const r=ir(n);return W3(e,r,n.origin)}function W3(e,n,r){const i=mB(e,r),o=N3(e,r),s=_1(e,r),a=xw(e,r),u=xc(a,s),f=_.inflate(n,-s);return Rg(H.getRoughSVG(e),f.x,f.y,f.x+f.width,f.y+f.height,{stroke:o,strokeWidth:s,fill:i,fillStyle:"solid",strokeLineDash:u},!1,ww.shape.rectangleRadius)}var Wn;(function(e){e.left="left",e.center="center",e.right="right"})(Wn||(Wn={}));var Bn;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(Bn||(Bn={}));const xo=(e,n)=>{let r=e.x,i=e.y;return n[0]===Wn.center&&(r=e.x+e.width/2),n[0]===Wn.right&&(r=e.x+e.width),n[1]===Bn.middle&&(i=e.y+e.height/2),n[1]===Bn.bottom&&(i=e.y+e.height),[r,i]},ic=(e,n)=>n?e.left?cn.left:cn.right:e.up?cn.top:cn.bottom,Xo=(e,n)=>{if(n===cn.left&&(e[0]===Wn.right?e[0]=Wn.left:e[0]===Wn.left&&(e[0]=Wn.right)),n===cn.bottom||n===cn.top){let r=Wn.center,i=Bn.middle;e[1]===Bn.top&&(r=Wn.left),e[1]===Bn.bottom&&(r=Wn.right),e[0]===Wn.left&&(i=Bn.top),e[0]===Wn.right&&(i=Bn.bottom),e[0]=r,e[1]=i}n===cn.top&&(e[1]===Bn.bottom?e[1]=Bn.top:e[1]===Bn.top&&(e[1]=Bn.bottom))};function WU(e,n,r,i=!0,o=null,s,a){const u=L3(e,n.origin),f=s||dB(e,r.origin),d=o||F3(e,r.origin),g=xw(e,r.origin),p=f1(e,r.origin)===ru.underline;let y,w,E,S,D=n,A=r;const P=ir(D),b=ir(A);y=D.x+D.width/2,w=p5(n,r)?P.y:P.y+P.height,E=n.left?A.x+A.hGap+b.width:A.x+A.hGap,S=p?A.y+A.height-A.vGap:A.y+A.height/2;let R=p5(n,r)?n.left?[-1,-1]:[1,-1]:n.left?[-1,1]:[1,1],L=[[y,w],[y,w],[y,w],[y,S-A.hGap*3*R[1]/5],[y,S-A.hGap*R[1]/5],[y+A.hGap*R[0]/4,S],[y+A.hGap*R[0]*3/5,S],p&&i?[E+(A.width-A.hGap*2)*R[0],S]:[E,S],p&&i?[E+(A.width-A.hGap*2)*R[0],S]:[E,S],p&&i?[E+(A.width-A.hGap*2)*R[0],S]:[E,S]];const V=xc(g,f);if(u===Jf.polyline){const ne=[[y,w],[y,S],[E,S],p&&i?[E+(A.width-A.hGap*2)*R[0],S]:[E,S]];return ks(ne,{stroke:d,strokeWidth:f,strokeLineDash:V})}const Z=To(L,.001);return Ib(Z,{stroke:d,strokeWidth:f})}function VU(e,n,r,i,o=null,s,a){const u=L3(e,n.origin),f=o||F3(e,r.origin),d=s||dB(e,r.origin),g=xw(e,r.origin),p=u===Jf.polyline?!0:!Ft.isMind(n.origin),y=f1(e,n.origin),E=f1(e,r.origin)===ru.underline,S=y===ru.underline,D=ir(r),A=ir(n),P=ic(r,i),b=[Wn.right,Bn.middle],R=[Wn.left,Bn.middle];Xo(b,P),Xo(R,P),i&&S&&!Ft.isMind(n.origin)&&(b[1]=Bn.bottom),i&&E&&(R[1]=Bn.bottom);let L=xo(A,b),V=xo(D,R);const ne=p?Jn(L,8,P):L;let le=p?[L,ne,ne]:[];const de=(n.hGap+r.hGap)/3,Pe=-(n.hGap+r.hGap)/2.4;let ue=[ne,Jn(ne,de,P),Jn(V,Pe,P),V];const he=Jn(V,D.width,P),ye=E&&i?[he,he,he]:[],W=To([...le,...ue,...ye]),O=xc(g,d);let N;if(u===Jf.polyline){const j=Jn(ne,8,P),U=[...le,j,i?[j[0],V[1]]:[V[0],j[1]],V,...ye];N=ks(U,{stroke:f,strokeWidth:d,strokeLineDash:O})}else N=H.getRoughSVG(e).curve(W,{stroke:f,strokeWidth:d,strokeLineDash:O});return g===Vi.dotted&&Zt(N,"round"),N}function BB(e,n,r,i,o,s,a,u){return _e.isIndentedLayout(n.origin)?WU(e,n,r,o,s,a):VU(e,n,r,i,s,a)}const UU="foreign-object-emoji";class XU{constructor(n){this.board=n,this.emojiComponentRef=null}draw(n,r,i){this.destroy();const o={board:this.board,emojiItem:r,element:i,fontSize:oB(i)};this.emojiComponentRef=this.board.renderEmoji(n,o)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const hP=class hP{constructor(n){this.board=n,this.emojiGenerators=[]}drawEmojis(n){if(this.destroy(),_e.hasEmojis(n)){this.g=$t(),this.g.classList.add("emojis");const r=CB(this.board,n),i=AE(r.x,r.y,r.width,r.height);i.classList.add(UU),this.g.append(i);const o=document.createElement("div");return o.classList.add("node-emojis-container"),i.append(o),this.emojiGenerators=n.data.emojis.map(s=>{const a=new XU(this.board);return a.draw(o,s,n),a}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(n=>n.destroy()),this.emojiGenerators=[]}};hP.key="node-emojis-generator";let d1=hP;const KU=(e,n,r,i)=>{const o=hn.getElementRef(n),s=_e.getNode(n),a=$t();a.classList.add("dragging","fake-node","plait-board-attached");const u={...s,x:s.x+r,y:s.y+i},f=EB(e,s),d=$U(e,u),g=_g(n).g.cloneNode(!0);if(Tp(g,f.width,f.height,f.x+r,f.y+i),a==null||a.append(d),a==null||a.append(g),_e.hasEmojis(n)){const y=o.getGenerator(d1.key).g.cloneNode(!0),w=CB(e,n);Tp(y,w.width,w.height,w.x+r,w.y+i),a==null||a.append(y)}if(_e.hasImage(n)){const y=o.getGenerator(eu.key).g.cloneNode(!0),w=Ew(e,n);Tp(y,w.width,w.height,w.x+r,w.y+i),a==null||a.append(y)}return a},qU=(e,n,r)=>{const i=n.target,o=$t(),s=tn.get(e,Dt.parent(r)),a=Ao.getLayoutByElement(s),u=di(a),{hasNextNode:f,hasPreviousNode:d}=_U(s,n,r),g=30,p=12;let y,w,E,S;if(!d&&!f){const ne=_e.getNode(s),le=ir(ne);S=ic(ne,u),E=ne,Ft.isMind(i)&&Do(a)&&(n.detectResult==="left"?(S=cn.left,E.left=!0):(S=cn.right,E.left=!1));const de=[Wn.right,Bn.middle];Xo(de,S);const Pe=xo(le,de);if(Ja(a)){const ue=[Wn.center,rc(a)?Bn.top:Bn.bottom],he=xo(le,ue);w=Jn(he,p,S),w[1]=rc(a)?w[1]-p:w[1]+p}else w=Jn(Pe,g,S)}else if(!d&&f){const ne=tn.get(e,r);E=_e.getNode(ne);const le=ir(E);S=ic(E,u);const de=[Wn.left,Bn.top];Xo(de,S);let Pe=-p;_e.isIndentedLayout(s)&&(Pe=rc(a)?Pe/2+E.height-E.vGap:0),w=xo(le,de),w=xv(w,Pe,S)}else if(d&&!f){const ne=tn.get(e,Dt.previous(r));E=_e.getNode(ne);const le=ir(E);S=ic(E,u);const de=[Wn.left,Bn.bottom];Xo(de,S);let Pe=p;_e.isIndentedLayout(s)&&(Pe=rc(a)?-Pe-(E.height-E.vGap):Pe),w=xo(le,de),w=xv(w,Pe,S)}else{const ne=tn.get(e,Dt.previous(r));E=_e.getNode(ne);const le=ir(E),de=tn.get(e,r),Pe=_e.getNode(de),ue=ir(Pe),he=[Wn.left,Bn.bottom],ye=[Wn.left,Bn.top];S=ic(E,u),Xo(he,S),Xo(ye,S);const W=xo(le,he),O=xo(ue,ye);w=[(W[0]+O[0])/2,(W[1]+O[1])/2]}let D=w,A=w;const P=u?p:g,b=u?g:p;D=xv(D,-P/2,S),A=xv(A,P/2,S),A=Jn(A,b,S);const R=Math.min(D[0],A[0]),L=Math.min(D[1],A[1]);y={...E,x:R,y:L,width:g,height:p,hGap:_e.isIndentedLayout(s)?qr*4+(E.origin.strokeWidth||YC):0,vGap:_e.isIndentedLayout(s)?qr:0};const V=Rg(H.getRoughSVG(e),y.x,y.y,y.x+g,y.y+p,{stroke:cg,strokeWidth:2,fill:cg,fillStyle:"solid"}),Z=BB(e,_e.getNode(s),y,u,!1,cg,YC);return o==null||o.appendChild(Z),o==null||o.appendChild(V),o};var gi;(function(e){e.start="start",e.end="end"})(gi||(gi={}));var Fp;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(Fp||(Fp={}));function y5(e,n,r,i,o){const s=$t(),a=_e.getParent(r),u=Ao.getCorrectLayoutByElement(e,r),f=di(u),d=a.children.slice(r.start,r.end+1),g=dn(e,d,!0),p=ki(e,g);let y=_.getOutlineRectangle(p,-$a);o&&(y=Ep(y,o,i,f));const w=ZU(n,y.x,y.y,y.x+y.width,y.y+y.height,f,{stroke:cg,strokeWidth:1,fillStyle:"solid"}),E=[Wn.center,Bn.top],S=[Wn.center,Bn.bottom],D=ic(_e.getNode(r),f);Xo(E,D),Xo(S,D);let A=xo(y,E),P=xo(y,S);const b=Jn(A,-Av/2,D),R=Jn(A,Av/2,D),L=Jn(P,-Av/2,D),V=Jn(P,Av/2,D),Z=n.line(b[0],b[1],R[0],R[1],w5(i===gi.start)),ne=n.line(L[0],L[1],V[0],V[1],w5(i===gi.end));return YU(e,i,f),Zt(Z,"round"),Zt(ne,"round"),s.append(Z),s.append(ne),s.append(w),s}function w5(e){return e?{stroke:cg,strokeWidth:4,fillStyle:"solid"}:{stroke:RU,strokeWidth:3,fillStyle:"solid"}}function YU(e,n,r){n?r?H.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):H.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(H.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),H.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function ZU(e,n,r,i,o,s,a){const u=Math.abs(n-i),f=Math.abs(r-o),d=5,y=10+4*2;if(s){const w=(u-y-d*2)/2,E=f-d*2;return e.path(`M${n+d},${r}
            l${w},0
            m${y},0
            l${w},0
            a${d},${d},0,0,1,${d},${d}
            l0,${E}
            a${d},${d},0,0,1,-${d},${d}
            l-${w},0
            m-${y},0
            l-${w},0
            a${d},${d},0,0,1,-${d},-${d}
            l0,-${E}
            a${d},${d},0,0,1,${d},-${d}`,a)}else{const w=(f-y-d*2)/2,E=u-d*2;return e.path(`M${n+d},${r}
            l${E},0
            a${d},${d},0,0,1,${d},${d}
            l0,${w}
            m0,${y}
            l0,${w}
            a${d},${d},0,0,1,-${d},${d}
            l-${E},0
            a${d},${d},0,0,1,-${d},-${d}
            l0,-${w}
            m0,-${y}
            l0,-${w}
            a${d},${d},0,0,1,${d},-${d}`,a)}}const dP=class dP extends es{canDraw(n,r){return!!r.selected}draw(n,r){const i=$t(),o=_e.getNode(n),s=ir(o),a=ki(this.board,s),u=_1(this.board,n),f=pr,d=_.inflate(a,f),g=Rg(H.getRoughSVG(this.board),d.x,d.y,d.x+d.width,d.y+d.height,{stroke:cg,strokeWidth:f,fill:""},!0,ww.shape.rectangleRadius+(f+u)/2);return Tt.isAbstract(n)&&(this.abstractOutlineG=y5(this.board,H.getRoughSVG(this.board),n),i.append(this.abstractOutlineG),g.classList.add("abstract-element")),i.appendChild(g),i.classList.add(C1),i}updateAbstractOutline(n,r,i){const o=y5(this.board,H.getRoughSVG(this.board),n,r,i);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(o),this.abstractOutlineG=o)}};dP.key="mind-node-active";let pc=dP;const Ep=(e,n,r,i)=>i?r===gi.start?{...e,y:n,height:e.height+e.y-n}:{...e,height:n-e.y}:r===gi.start?{...e,x:n,width:e.width+e.x-n}:{...e,width:n-e.x},QU=(e,n,r,i,o,s)=>{const a=_e.getNode(i),{start:u,end:f}=sc(a.origin,o),d=r[u],g=r[f];if(n===gi.start){const p=r.filter(S=>Tt.isAbstract(S)&&S.end<i.start);let y;if(p.length){const S=p.map(D=>{const{end:A}=sc(D,o);return A}).sort((D,A)=>A-D)[0];y=r[S+1]}else y=r[0];const w=dn(e,[y],!0),E=dn(e,[g],!1);return s?{max:E.y-$a,min:w.y-$a}:{max:E.x-$a,min:w.x-$a}}else{const p=r.filter(S=>Tt.isAbstract(S)&&S.start>i.end);let y;if(p.length){const S=p.map(D=>{const{start:A}=sc(D,o);return A}).sort((D,A)=>D-A)[0];y=r[S-1]}else{const S=r.filter(D=>!Tt.isAbstract(D));y=r[S.length-1]}const w=dn(e,[y],!0),E=dn(e,[d],!1);return s?{max:w.y+w.height+$a,min:E.y+E.height+$a}:{max:w.x+w.width+$a,min:E.x+E.width+$a}}},MB=(e,n,r)=>{const i=Ao.getCorrectLayoutByElement(e,n),o=di(i),a=_e.getParent(n).children.slice(n.start,n.end+1);let u=dn(e,a,!0);u=_.getOutlineRectangle(u,-$a);const f=x5(u,o,gi.start),d=x5(u,o,gi.end),g=_.getRectangleByPoints([r,r]);if(_.isHit(g,f))return gi.start;if(_.isHit(g,d))return gi.end},x5=(e,n,r)=>{let i;if(r===gi.start){const o=n?e.y:e.x;i=Ep(e,o+Bv/2,gi.end,n),i=Ep(i,o-Bv/2,r,n)}else{const o=n?e.y+e.height:e.x+e.width;i=Ep(e,o-Bv/2,gi.start,n),i=Ep(i,o+Bv/2,r,n)}return i};function JU(e,n,r,i){const o=n.filter(g=>!Tt.isAbstract(g)),s=o.map(g=>dn(e,[g],!1)),a=dn(e,[o[0]],!0),u={x:a.x-a.width,y:a.y-a.height,width:a.width,height:a.height},f=dn(e,[o[o.length-1]],!0),d={x:f.x+f.width,y:f.y+f.height,width:f.width,height:f.height};s.push(d),s.unshift(u);for(let g=0;g<s.length-1;g++){const p=i?s[g].y:s[g].x,y=i?s[g].height:s[g].width;if(r>=p+y/2&&r<=s[g+1][i?"y":"x"]+s[g+1][i?"height":"width"]/2)return g-1}return 0}function eX(e,n,r){let i;const o=tt(e).filter(s=>Tt.isAbstract(s)).find(s=>(i=MB(e,s,r),i));return n===o||(n&&(hn.getElementRef(n).getGenerator(pc.key).updateAbstractOutline(n),n=void 0),o&&(n=o,hn.getElementRef(n).getGenerator(pc.key).updateAbstractOutline(n,i))),n}const RB=e=>{const n=_e.findParent(e);if(n){const r=n.children.findIndex(i=>i.id===e.id);if(Ft.isMind(n)&&gc(n)===nt.standard&&n.rightNodeCount&&r<=n.rightNodeCount-1)return!0}return!1},kB=(e,n,r,i=[])=>{let o=i.findIndex(a=>Dt.equals(a.path,n));const s=tn.get(e,n);return o===-1?i.push({path:n,rightNodeCount:s.rightNodeCount+r}):i[o].rightNodeCount+=r,i},bB=(e,n,r=[])=>(n.forEach(i=>{if(RB(i)){const o=_e.getParent(i),s=H.findPath(e,o);let a=r.findIndex(u=>Dt.equals(u.path,s));a===-1?r.push({path:s,rightNodeCount:o.rightNodeCount-1}):r[a].rightNodeCount-=1}}),r);function V3(e,n){const r=Sc(n);return H.findPath(e,n).concat(r.length)}function tX(e,n){const r=H.findPath(e,n);return oe.next(r)}const U3=(e,n)=>{const r=_e.getAncestors(e,n);r.unshift(n);const i=r[r.length-1];let o=gc(i);if(Ft.isMind(n))return o;const s=_e.getNode(n);let a=o;o===nt.standard&&(a=s.left?nt.left:nt.right);let u=null;const f=r.find(d=>d.layout||Tt.isAbstract(d));if(f)if(Tt.isAbstract(f)){const d=_e.getParent(f),g=U3(e,d);u=I3(g)}else u=f==null?void 0:f.layout;if(u===nt.standard||!u)return a;{const d=yU(a,u);return d?wU(u,d):u}},OB=(e,n)=>{const r=[];n.layout&&r.unshift(U3(e,n));let i=_e.findParent(n);for(;i;)i.layout&&r.unshift(i.layout),i=_e.findParent(i);return r},nX=(e,n)=>{const r=_e.findParent(n);if(r){const i=OB(e,r);if(i[0]===nt.standard){const d=_e.getNode(n);i[0]=d.left?nt.left:nt.right}const o=h5(i);let s=d5(o);const a=[i[i.length-1]],u=h5(a),f=d5(u);return s=s.filter(d=>f.some(g=>g===d)),s}},eE=e=>{const n=e.layout;if(n)return n;const r=!Ft.isMind(e)&&_e.getParent(e);return Tt.isAbstract(e)&&r?I3(eE(r)):r?eE(r):G3()},Ao={getAvailableSubLayoutsByElement:nX,getBranchLayouts:OB,getLayoutByElement:eE,getCorrectLayoutByElement:U3},rX="mindmap",Ft={isMind:e=>e.type==="mind"||e.type===rX},_e={hasLayout(e,n){return Ao.getLayoutByElement(e)===n},isIndentedLayout(e){const n=Ao.getLayoutByElement(e);return Ja(n)},isMindElement(e,n){return!!(n.data&&n.data.topic||n.type==="mind_child")},getParent(e){if(Ft.isMind(e))throw new Error("mind root node can not get parent");return _f.get(e)},findParent(e){return Ft.isMind(e)?void 0:_f.get(e)},getRoot(e,n){const r=H.findPath(e,n);return tn.get(e,r.slice(0,1))},getAncestors(e,n){const r=H.findPath(e,n),i=[];for(const o of Dt.ancestors(r,{reverse:!0})){const s=tn.get(e,o);s&&!H.isBoard(s)&&i.push(s)}return i},getNode(e){const n=c1.get(e);if(!n)throw new Error(`can not get node from ${JSON.stringify(e)}`);return n},findParentNode(e){if(Ft.isMind(e))return;const n=_e.getParent(e);return _e.getNode(n)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var ru;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(ru||(ru={}));var Jf;(function(e){e.bight="bight",e.polyline="polyline"})(Jf||(Jf={}));function iX(e,n,r){const o=mU(e,n.origin),s=gB(e,n.origin),a=xw(e,n.origin),u=n.parent,f=L3(e,n.origin),d=ir(n);let g=u.children.slice(n.origin.start,n.origin.end+1).map(le=>le.origin);const p=dn(e,g,!0),y=ic(n,r),w=[Wn.right,Bn.top],E=[Wn.right,Bn.bottom],S=[Wn.left,Bn.middle];Xo(w,y),Xo(E,y),Xo(S,y);let D=xo(p,w),A=xo(p,E),P=xo(d,S),b=I8(P,D,r)-15*2;D=Jn(D,15,y);let R=Jn(D,b,y);A=Jn(A,15,y);let L=Jn(A,b,y),V=Jn(P,-15,y);const Z=xc(a,o);if(f===Jf.polyline){const le=$t(),de=ks([D,R,V,L,A],{stroke:s,strokeWidth:o}),Pe=ks([P,V],{stroke:s,strokeWidth:o,strokeLineDash:Z});return le.appendChild(de),le.appendChild(Pe),le}return H.getRoughSVG(e).path(`M${D[0]},${D[1]} Q${R[0]},${R[1]} ${V[0]},${V[1]} Q${L[0]},${L[1]} ${A[0]},${A[1]} M${P[0]},${P[1]} L${V[0]},${V[1]}`,{stroke:s,strokeWidth:o,strokeLineDash:Z})}const IB=(e,n)=>{n.forEach((r,i)=>{const o=i.start+r.start,s=i.end+r.end,a=H.findPath(e,i);o>s?Ze.removeNode(e,a):Ze.setNode(e,{start:o,end:s},a)})},FB=(e,n)=>{const r=n.rightNodeCount,i=n.children.find(o=>Tt.isAbstract(o)&&o.end>=r&&o.start<r);if(i){const o=H.findPath(e,i);Ze.setNode(e,{end:r-1},o)}},oX=(e,n)=>{let r=Ip(n);const{parentElements:i,abstractIncludedGroups:o}=MU(r);o.forEach((s,a)=>{const u=i[a];sX(e,u,s)})},sX=(e,n,r)=>{const i=r.map(u=>n.children.indexOf(u)).sort((u,f)=>u-f),o=n==null?void 0:n.rightNodeCount,s=i[0],a=i[i.length-1];if(Do(Ao.getLayoutByElement(n))&&o&&s<o&&a>=o){const u=n.children.length,f=[...H.findPath(e,n),u],d=i.filter(p=>p>=o),g=i.filter(p=>p<o);Rx(e,f,g[0],g[g.length-1]),Rx(e,Dt.next(f),d[0],d[d.length-1])}else{const u=[...H.findPath(e,n),n.children.length];Rx(e,u,s,a)}},Rx=(e,n,r,i)=>{const o=SU(e),s=Cw(o,{strokeWidth:Pg.branch.width,branchWidth:Pg.branch.width});s.start=r,s.end=i,Ze.insertNode(e,s,n),Mg(e),rh(e,s)},aX=(e,n,r)=>{const i={data:{...n.data}};r&&(i.data.topic=r);const o=H.findPath(e,n);Ze.setNode(e,i,o)},lX=(e,n,r)=>{const i=H.findPath(e,n),{width:o}=Xv(e,n,r,0),s={manualWidth:o,data:{...n.data,topic:{...n.data.topic}}};Ze.setNode(e,s,i)},LB=(e,n,r)=>{const i=e.pathRef(r);n.forEach(o=>{i.current&&Ze.insertNode(e,o,i.current)}),i.unref()},uX=(e,n,r,i)=>{var u;const o=tn.get(e,oe.parent(i)),s=[...oe.parent(i),(u=o.children)==null?void 0:u.length],a=n.map(f=>{const{start:d,end:g}=uB(f,r);return{...f.abstract,start:d+i[i.length-1],end:g+i[i.length-1]}});LB(e,a,s)},_B=(e,n)=>{n.forEach(r=>{Ze.setNode(e,{rightNodeCount:r.rightNodeCount},r.path)})},cX=(e,n)=>{if(_e.isMindElement(e,n)){ew(e,n);const r=H.findPath(e,n);if(n.isCollapsed){const i={isCollapsed:!1};Ps.withoutSaving(e,()=>{Ze.setNode(e,i,r)})}z3(e,n,V3(e,n))}},fX=(e,n)=>{if(_e.isMindElement(e,n)&&!Ft.isMind(n)&&!Tt.isAbstract(n)){const r=H.findPath(e,n);if(RB(n)){const o=kB(e,r.slice(0,1),1);_B(e,o)}const i=cB(e,oe.next(r));IB(e,i),z3(e,n,tX(e,n))}},hX=(e,n)=>{Ze.insertNode(e,n,[e.children.length]),Ze.addSelectionWithTemporaryElements(e,[n])},dX=(e,n,r)=>{const o=[...n.data.emojis||[]];o.push(r);const s={data:{...n.data,emojis:o}},a=H.findPath(e,n);Ze.setNode(e,s,a)},gX=(e,n,r)=>{const i=n.data.emojis.filter(a=>a!==r),o={data:{topic:n.data.topic}};_e.hasImage(n)&&(o.data.image=n.data.image),i.length>0&&(o.data.emojis=i);const s=H.findPath(e,n);Ze.setNode(e,o,s)},pX=(e,n,r,i)=>{const o={data:{...n.data}},s=n.data.emojis.map(u=>u===r?i:u);o.data.emojis=s;const a=H.findPath(e,n);Ze.setNode(e,o,a)},mX=(e,n)=>{Kv(e,n);const r={data:{...n.data,topic:{...n.data.topic}}};delete r.data.image;const i=H.findPath(e,n);Ze.setNode(e,r,i)},vX=(e,n,r)=>{const i={data:{...n.data,image:r,topic:{...n.data.topic}}},o=H.findPath(e,n);Ze.setNode(e,i,o)},NB=(e,n,r)=>{var o;const i=tn.get(e,r);i&&n&&((o=i.children)==null||o.forEach((s,a)=>{var u;s.layout&&((a1(n)&&UC(s.layout)||UC(n)&&a1(s.layout))&&Ze.setNode(e,{layout:null},[...r,a]),(u=s.children)!=null&&u.length&&NB(e,n,[...r,a]))}))},yX=(e,n)=>{const r=(i,o)=>{if(_e.isMindElement(e,i)){NB(e,n,o);const s=tn.get(e,o);if(Ft.isMind(s)&&Do(n)){let a={rightNodeCount:s.children.length/2};Ze.setNode(e,a,o),FB(e,s)}Ze.setNode(e,{layout:n},o)}};ga.setProperty(e,{},{callback:r})},wX=(e,n)=>{ga.setProperty(e,{shape:n})},xX=(e,n)=>{ga.setProperty(e,{branchShape:n})},CX=(e,n)=>{ga.setProperty(e,{branchWidth:n})},EX=(e,n)=>{ga.setProperty(e,{branchColor:n})},Fr={setLayout:yX,setShape:wX,setBranchShape:xX,setBranchWidth:CX,setBranchColor:EX,setTopic:aX,setNodeManualWidth:lX,addEmoji:dX,removeEmoji:gX,replaceEmoji:pX,insertAbstract:oX,setAbstractsByRefs:IB,setAbstractByStandardLayout:FB,insertNodes:LB,insertAbstractNodes:uX,setRightNodeCountByRefs:_B,removeImage:mX,setImage:vX,insertChildNode:cX,insertSiblingNode:fX,insertMind:hX};class PX extends es{constructor(n){super(n,{prepend:!0})}canDraw(n,r){return f1(this.board,n)===ru.roundRectangle}draw(n,r){const i=ir(r.node);return W3(this.board,i,r.node.origin)}}const gP=class gP extends es{canDraw(n,r){return!!((r!=null&&r.isHovered||r!=null&&r.isHoveredCollapseArea||r!=null&&r.isHoveredAddArea)&&tE(this.board)||r!=null&&r.isSelected&&TX(this.board,n)&&tE(this.board)||n.isCollapsed)}draw(n,r){const i=$t(),o=F3(this.board,n),s=GB(this.board,n),a=jB(this.board,n,s),u=Jn(a[1],Ua/2,s),f=n.children.length>0,d=!n.isCollapsed&&(Nf(this.board,n)||!!(r!=null&&r.isHovered)||!!(r!=null&&r.isHoveredCollapseArea)||!!(r!=null&&r.isHoveredAddArea)),g=d&&f&&!Ft.isMind(n),p=d&&!H.isReadonly(this.board),y=d&&HB(n,u,s)||null;return this.toggleCollapseOrAdd(u,y,o,i,g,p,!!(r!=null&&r.isHoveredAddArea),!!(r!=null&&r.isShowCollapseAnimation),!!(r!=null&&r.isShowAddAnimation)),this.toggleExpandBadge(n,a,u,o,i,!!n.isCollapsed,!!(r!=null&&r.isHoveredExpandArea)),i}toggleCollapseOrAdd(n,r,i,o,s,a,u,f,d){var g;if((g=this.collapseOrAddG)==null||g.remove(),!(!s&&!a)){if(this.collapseOrAddG=$t(),s){const p=$t();this.collapseOrAddG.appendChild(p),p.classList.add("collapse-button"),f&&p.classList.add("animated");const y=H.getRoughSVG(this.board).circle(n[0],n[1],Ua,{fill:"#fff",stroke:i,strokeWidth:Df,fillStyle:"solid"}),w=Jn(n,-Ud/2),E=Jn(n,Ud/2),S=H.getRoughSVG(this.board).line(w[0],w[1],E[0],E[1],{fill:"#fff",stroke:i,strokeWidth:Df,fillStyle:"solid"});p.appendChild(y),p.appendChild(S),Zt(S,"round")}if(a&&r){const p=$t();this.collapseOrAddG.appendChild(p),p.classList.add("add-button"),d&&p.classList.add("animated");const y=H.getRoughSVG(this.board).circle(r[0],r[1],Ua+Df,{fill:u?dU:hU,stroke:bC,fillStyle:"solid"}),w=[r[0]-Ud/2,r[1]],E=[r[0]+Ud/2,r[1]],S=[r[0],r[1]-Ud/2],D=[r[0],r[1]+Ud/2],A=H.getRoughSVG(this.board).line(w[0],w[1],E[0],E[1],{stroke:f5,strokeWidth:Df});Zt(A,"round");const P=H.getRoughSVG(this.board).line(S[0],S[1],D[0],D[1],{stroke:f5,strokeWidth:Df});Zt(P,"round"),p.appendChild(y),p.appendChild(A),p.appendChild(P)}o.appendChild(this.collapseOrAddG)}}toggleExpandBadge(n,r,i,o,s,a,u){var P;if((P=this.expandG)==null||P.remove(),!a)return;this.expandG=$t(),this.expandG.classList.add("expanded-button");const f=r[1],d=H.getRoughSVG(this.board).line(r[0][0],r[0][1],f[0],f[1],{fill:o,stroke:o,fillStyle:"solid",strokeWidth:Df}),g=u?jp(o,.4):jp(o,.2),p=H.getRoughSVG(this.board).circle(i[0],i[1],Ua+Df,{fill:g,stroke:bC,fillStyle:"solid"}),y=vB(n);let w=`${y}`,E=i[1]+4.5;y>=99&&(w="...",E=i[1]+1);const{width:S,height:D}=B1(this.board,ah(w),{fontSize:Number(Py.fontSize12),fontFamily:lg}),A=db(i[0]-S/2,E,o,`${w}`);A.setAttribute("style",`font-size: ${Number(Py.fontSize12)}px;`),this.expandG.appendChild(d),this.expandG.appendChild(p),this.expandG.appendChild(A),s.appendChild(this.expandG)}};gP.key="mind-node-more";let g1=gP;const SX=(e,n)=>{const r=GB(e,n),[i,o]=jB(e,n,r),s=Jn(o,Ua/2,r),a=HB(n,s,r);return{collapseCenter:s,addCenter:a}},HB=(e,n,r)=>{var o;let i=n;return((o=e.children)==null?void 0:o.length)>0&&!Ft.isMind(e)&&(i=Jn(i,iB+Ua,r)),i},GB=(e,n)=>{const r=_e.getNode(n),i=Ao.getLayoutByElement(n),o=di(i);let s=ic(r,o);return Ja(i)&&(s=rc(i)?cn.top:cn.bottom),s},jB=(e,n,r)=>{const i=_e.getNode(n),o=f1(e,n)===ru.underline,s=ir(i);let a=[Wn.right,Bn.middle];Xo(a,r);const u=Ao.getLayoutByElement(n);di(u)&&o&&!Ft.isMind(n)&&(a[1]=Bn.bottom);let d=xo(s,a);const g=Jn(d,iB,r);return[d,g]},TX=(e,n)=>{const i=tt(e).filter(o=>_e.isMindElement(e,o)).reverse();return i[i.length-1]===n},tE=e=>!$l(e)&&!vi(e)&&!cc(e)&&!fc(e);class zB extends Cc{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(n,r)=>r.origin.id}initializeGenerator(){this.nodeShapeGenerator=new PX(this.board),this.nodeEmojisGenerator=new d1(this.board),this.activeGenerator=new pc(this.board),this.nodeMoreGenerator=new g1(this.board),this.imageGenerator=new eu(this.board,{getRectangle:i=>Ew(this.board,i),getImageItem:i=>i.data.image});const n=(this.board.getPluginOptions(kC)||{}).textPlugins,r=new M1(this.board,{getRectangle:()=>EB(this.board,this.node),onChange:i=>{Fr.setTopic(this.board,this.element,i.newText)},getMaxWidth:()=>bn.getTopicMaxDynamicWidth(this.board,this.element),textPlugins:n||[]});this.getRef().addGenerator(pc.key,this.activeGenerator),this.getRef().addGenerator(d1.key,this.nodeEmojisGenerator),this.getRef().addGenerator(eu.key,this.imageGenerator),this.getRef().addGenerator(g1.key,this.nodeMoreGenerator),this.getRef().initializeTextManage(r),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=_e.getNode(this.element),this.index=og.get(this.element)||0,this.roughSVG=H.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG()),this.drawEmojis(),this.imageGenerator.processDrawing(this.element,this.getElementG()),Ft.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(n,r){const i=_e.getNode(n.element),o=_.isEqual(this.node,i);if(this.node=i,!o||n.element!==r.element||n.hasThemeChanged)this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),!_e.hasImage(r.element)&&_e.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),_e.hasImage(r.element)&&_e.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),r.element,n.element),_e.hasImage(r.element)&&!_e.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const s=n.selected===r.selected,a=n.parent===r.parent;(!s||n.selected)&&(this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected})),a||this.drawLink()}}drawEmojis(){const n=this.nodeEmojisGenerator.drawEmojis(this.element);n&&this.getElementG().append(n)}drawLink(){if(Ft.isMind(this.element))return;const n=_e.getParent(this.element),r=_e.getNode(n);this.linkLineG&&this.linkLineG.remove();const i=Ao.getLayoutByElement(n);Tt.isAbstract(this.node.origin)?this.linkLineG=iX(this.board,this.node,di(i)):this.linkLineG=BB(this.board,r,this.node,di(i)),this.getElementG().append(this.linkLineG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),c1.get(this.element)===this.node&&c1.delete(this.element),this.getRef().destroyTextManage()}}class DX extends zB{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(n){n.element!==this.element&&this.initialized&&this.updateMindLayout(n.element)}updateMindLayout(n=this.element){const r=n.layout||G3();this.root=JV.layout(n,xU(this.board),r),this.updateMindNodeLocation(n)}updateMindNodeLocation(n){const{x:r,y:i,hGap:o,vGap:s}=this.root,a=r+o,u=i+s;mi(this.root,f=>{f.x=f.x-a+n.points[0][0],f.y=f.y-u+n.points[0][1],c1.set(f.origin,f)})}}const AX=5,BX=e=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=[],s=[],a,u,f,d=null,g;return e.pointerDown=p=>{if(H.isReadonly(e)||H.hasBeenTextEditing(e)||!H.isPointer(e,nn.selection)||!Ya(p)){n(p);return}const y=It(e,Lt(e,p.x,p.y)),w=tt(e),E=rl(e,y);if(E&&_e.isMindElement(e,E)&&!Ft.isMind(E)&&!Tt.isAbstract(E)){const S=w.filter(A=>_e.isMindElement(e,A)&&!Ft.isMind(A)&&!Tt.isAbstract(A));w.length>0&&w.includes(E)?(o=S,a=y):(o=[E],a=y)}o.length&&(s=aB(e,o)),n(p)},e.pointerMove=p=>{if(!e.options.readonly&&o.length&&a){const y=It(e,Lt(e,p.x,p.y));if(bt(a[0],a[1],y[0],y[1])<AX)return;v5(e,!0),f==null||f.remove();const E=It(e,Lt(e,p.x,p.y));d=HU(e,E,d,[...o,...s]),d!=null&&d.target&&(g=zU(e,d),f=qU(e,d,g),H.getHost(e).appendChild(f));const S=y[0]-a[0],D=y[1]-a[1];u==null||u.remove(),u=$t(),[...o,...s].forEach(A=>{TB(A)}),o.forEach(A=>{const P=KU(e,A,S,D);u==null||u.appendChild(P)}),H.getHost(e).appendChild(u);return}r(p)},e.globalPointerUp=p=>{const y=Ip(o);if(!e.options.readonly&&y.length){if(y.push(...s),cc(e)&&y.forEach(w=>{DB(w)}),d){const w=e.pathRef(g),E=Dt.hasPrevious(g)&&e.pathRef(Dt.previous(g)),S=e.pathRef(H.findPath(e,d.target));let D=lB(e,y);const A=y.filter(de=>!D.some(Pe=>Pe.abstract===de)).map(de=>Tt.isAbstract(de)?JC(de):de);if(g[g.length-1]!==0){const de=tn.get(e,Dt.previous(g)),Pe=L1(de);if(Pe&&Pe.end!==g[g.length-1]-1){const he=D.map(ye=>JC(ye.abstract));A.push(...he),D=[]}}const b=fB(e,y);cB(e,g,A.length,!1,b),Fr.setAbstractsByRefs(e,b);let R=bB(e,y);const L=tn.get(e,Dt.parent(g));AB(L,d)&&S.current&&(R=kB(e,S.current.slice(0,1),A.length,R)),Fr.setRightNodeCountByRefs(e,R),jE.removeElements(e,y);let Z=w.current;const ne=Dt.parent(w.current||g);if(!Z){const de=E&&E.unref();if(de)Z=Dt.next(de);else{const Pe=tn.get(e,ne),ue=Sc(Pe);Z=[...ne,ue.length||0]}}Fr.insertNodes(e,A,Z),D.length&&Fr.insertAbstractNodes(e,D,A,Z),S.current&&w.current&&Dt.isAncestor(S.current,w.current)&&d.target.isCollapsed&&Ze.setNode(e,{isCollapsed:!1},S.current),S.unref(),w.unref();let le=[];mi(e,de=>{o.some(ue=>ue.id===de.id)&&le.push(de)}),Ze.addSelectionWithTemporaryElements(e,le)}v5(e,!1),o=[],u==null||u.remove(),u=void 0,f==null||f.remove(),f=void 0,d=null}i(p)},e},MX=e=>{const n=e,{pointerDown:r,pointerMove:i,pointerUp:o}=e;let s,a,u,f;return e.pointerDown=d=>{if(!Ya(d)||H.isReadonly(e)){r(d);return}const g=tt(e).filter(y=>Tt.isAbstract(y)),p=It(e,Lt(e,d.x,d.y));if(s=g.find(y=>(a=MB(e,y,p),a)),s){n!=null&&n.onAbstractResize&&n.onAbstractResize(Fp.start);return}r(d)},e.pointerMove=d=>{tt(e);const g=It(e,Lt(e,d.x,d.y));if(u=eX(e,u,g),a&&s){const p=Ao.getCorrectLayoutByElement(e,s),y=di(p),w=_e.getParent(s);let E=w.children;const S=Ao.getLayoutByElement(w);if(Do(S)){const le=w.rightNodeCount,{leftChildren:de,rightChildren:Pe}=pU(w);s.end<le&&(E=Pe),s.start>=le&&(E=de)}n!=null&&n.onAbstractResize&&n.onAbstractResize(Fp.resizing);const D=y?g[1]:g[0],A=_e.getNode(w),P=QU(e,a,E,s,A,y),b=Math.min(P.max,Math.max(P.min,D));let R=JU(e,E,b,y);if(a===gi.start&&R+1===s.start||a===gi.end&&R===s.end)f=void 0;else{if(Do(A.layout)){const le=A.origin.rightNodeCount;s.start>=le&&(R+=le)}f=a===gi.start?{start:R+1}:{end:R}}const Z=hn.getElementRef(s).getGenerator(pc.key),ne=zp(e,[b,b]);Z.updateAbstractOutline(s,a,y?ne[1]:ne[0])}i(d)},e.pointerUp=d=>{if(a=void 0,s){if(n!=null&&n.onAbstractResize&&n.onAbstractResize(Fp.end),f){const g=H.findPath(e,s);Ze.setNode(e,f,g)}else hn.getElementRef(s).getGenerator(pc.key).updateAbstractOutline(s);s=void 0;return}o(d)},e},RX=e=>{const n=e;return e.setPluginOptions(yw,{spaceBetweenEmojis:4,emojiPadding:0}),n},kX="m",bX=e=>{const n=e,{keyDown:r,pointerDown:i,pointerMove:o,pointerUp:s}=e;let a=null,u=null;n.pointerDown=d=>{const g=H.isPointer(e,Vl.mind);if(!H.isReadonly(e)&&oh(e)&&g){const p=It(e,Lt(e,d.x,d.y)),y=g5(n,p);Fr.insertMind(e,y),sn.updatePointerType(e,nn.selection);return}i(d)},n.pointerMove=d=>{if(H.isReadonly(e)){o(d);return}const g=H.isPointer(e,Vl.mind);lw(e)&&g?ha(e,"with-mind-create",()=>{let p=H.getMovingPointInBoard(e);if(p){p=It(n,Lt(e,p[0],p[1])),u=g5(n,p);const y=bU(n,u),w=W3(e,y,u),E=PB(n,y,u);if(a)a.textManage.updateRectangle(E),a.nodeG.remove(),a.nodeG=w,a.g.append(w),a.g.append(a.textManage.g);else{const S=new M1(e,{getRectangle:()=>E});S.draw(u.data.topic),a={g:$t(),nodeG:w,textManage:S},a.g.classList.add("root"),a.g.setAttribute("plait-mind-temporary","true"),H.getHost(e).append(a.g),a.g.append(a.nodeG,S.g)}}}):f(),o(d)},n.pointerUp=d=>{if(u){Fr.insertMind(e,u),sn.updatePointerType(e,nn.selection),u=null,f();return}s(d)},e.keyDown=d=>{if(H.isReadonly(e)||tt(e).length>0){r(d);return}if(d.key===kX&&!H.isPointer(e,Vl.mind)){sn.updatePointerType(e,Vl.mind),wo(e,Zr.drawing),d.preventDefault();return}r(d)};function f(){a&&(a.textManage.destroy(),a.g.remove(),a=null)}return n},OX=e=>{const n=e,{keyDown:r,globalKeyDown:i}=n;return n.keyDown=o=>{const s=tt(n),a=s.length===1,u=s.length===1&&_e.isMindElement(n,s[0]),f=s[0];if(AG(o)&&u&&!Ft.isMind(f)&&f.children&&f.children.length>0){Ze.setNode(n,{isCollapsed:!f.isCollapsed},H.findPath(n,f));return}if(!H.isReadonly(n)){if(BG(o)&&u){o.preventDefault(),Fr.insertChildNode(n,f);return}if(MG(o)&&u&&!Ft.isMind(f)&&!Tt.isAbstract(f)){Fr.insertSiblingNode(n,f);return}if(!o3(o)&&!a3(o)&&!s3(o)&&a&&_e.isMindElement(n,f)){o.preventDefault(),H3(f);return}}r(o)},n.globalKeyDown=o=>{if(H.isFocus(n)&&H.hasBeenTextEditing(n)&&on.isHotkey("mod+z",o)){const{history:s}=n,{undos:a}=s,u=a.length>0?a[a.length-1][0]:void 0;u&&u.type==="insert_node"&&_e.isMindElement(n,u.node)&&_g(u.node).isEditing&&n.undo()}i(o)},n},IX=e=>{const{pointerMove:n,pointerLeave:r,pointerUp:i}=e;let o=null;e.pointerMove=a=>{tE(e)&&ha(e,"with-mind-node-hover-hit-test",()=>{o&&!hn.hasMounted(o.target)&&(o=null);const u=C5(e,a.x,a.y);o&&u&&o.target===u.target||(o&&s({target:o.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),u?(s(u),o?o.target=u.target:o=u):o=null)}),n(a)},e.pointerUp=a=>{if(o&&(o.isHoveredCollapseArea||o.isHoveredExpandArea)){const f={isCollapsed:!o.target.isCollapsed},d=H.findPath(e,o.target);Ze.setNode(e,f,d),setTimeout(()=>{const g=C5(e,a.x,a.y);g?(s(g),o=g):o=null},0);return}if(o&&o.isHoveredAddArea&&!H.isReadonly(e)){if(o){const u=V3(e,o.target);z3(e,o.target,u)}return}i(a)};const s=a=>{const u=hn.getElementRef(a.target),f=u==null?void 0:u.getGenerator(g1.key);if(f){const d=hn.getElementG(a.target);f.processDrawing(a.target,d,{isHovered:a.isHovered,isHoveredCollapseArea:a.isHoveredCollapseArea,isHoveredExpandArea:a.isHoveredExpandArea,isSelected:Nf(e,a.target),isHoveredAddArea:a.isHoveredAddArea,isShowCollapseAnimation:(a.isHovered||a.isHoveredCollapseArea)&&!Nf(e,a.target),isShowAddAnimation:(a.isHovered||a.isHoveredAddArea)&&!Nf(e,a.target)})}};return e.pointerLeave=a=>{o&&s({target:o.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),o=null,r(a)},e},C5=(e,n,r)=>{let i=null,o=!1,s=!1,a=!1,u=!1;const f=It(e,Lt(e,n,r));return mi(e,d=>{if(i||!_e.isMindElement(e,d))return;const g=Ft.isMind(d),p=xB(e,f,d);let y=!1,w=!1;const{collapseCenter:E,addCenter:S}=SX(e,d),D=!g&&_.getRectangleByCenterPoint(E,Ua,Ua);y=D&&_.isHit(_.getRectangleByPoints([f,f]),D);const A=_.getRectangleByCenterPoint(S,Ua,Ua);w=_.isHit(_.getRectangleByPoints([f,f]),A),(p||y||w)&&(o=p,d.children.length>0&&(d.isCollapsed?a=y:s=y),u=w,i=d)},nh(e),!0),i?{target:i,isHovered:o,isHoveredCollapseArea:s,isHoveredExpandArea:a,isHoveredAddArea:u}:null},FX=e=>{const{keyDown:n,pointerUp:r,globalPointerUp:i,buildFragment:o,insertFragment:s,deleteFragment:a,afterChange:u}=e;return e.pointerUp=f=>{const d=vo(e);if(d&&_e.isMindElement(e,d)&&!Jk(f)&&(H.isReadonly(e)||!Ya(f)||!H.isPointer(e,nn.selection))){Kv(e,d),r(f);return}if(H.isReadonly(e)){r(f);return}const g=It(e,Lt(e,f.x,f.y)),p=rl(e,g),y=p&&_e.isMindElement(e,p)&&_e.hasImage(p)&&SB(e,p,g);if(y&&d&&p===d){hC(e),r(f);return}d&&_e.isMindElement(e,d)&&Kv(e,d),y&&p&&(hC(e),LU(e,p)),r(f)},e.keyDown=f=>{const d=vo(e);if(!H.isReadonly(e)&&d&&(Mi.isDeleteBackward(f)||Mi.isDeleteForward(f))){rh(e,d),Fr.removeImage(e,d);return}n(f)},e.globalPointerUp=f=>{if(H.isFocus(e)){const d=f.target instanceof Node&&H.getBoardContainer(e).contains(f.target),g=vo(e);g&&_e.isMindElement(e,g)&&!d&&Kv(e,g)}i(f)},e.buildFragment=(f,d,g,p)=>{const y=vo(e);return y&&(f=gO(Zl.medias,[y.data.image],"")),o(f,d,g,p)},e.deleteFragment=f=>{const d=vo(e);d&&Fr.removeImage(e,d),a(f)},e.insertFragment=(f,d,g)=>{var E,S;const p=tt(e),y=!!vo(e),w=p.length===1&&_e.isMindElement(e,p[0]);if(y||w){if((E=f==null?void 0:f.files)!=null&&E.length){const D=p8.map(P=>"image/"+P),A=p[0]||vo(e);if(D.includes(f.files[0].type)){const P=f.files[0];A8(e,P,gU,b=>{Fr.setImage(e,A,b)});return}}if((S=f==null?void 0:f.medias)!=null&&S.length){const D=p[0]||vo(e);Fr.setImage(e,D,f.medias[0]);return}}s(f,d,g)},e.afterChange=()=>{u();const f=vo(e);f&&_e.isMindElement(e,f)&&hn.getElementRef(f).getGenerator(eu.key).setFocus(f,!0)},e},LX=e=>{let n=null;return lh(e,{key:"mind-node",canResize:()=>!0,hitTest:i=>{const o=_X(e,i);return o?{element:o,handle:null,cursorClass:oa.ew}:null},beforeResize:i=>{n={minWidth:bn.getNodeResizableMinWidth(e,i.element),currentWidth:bn.getTopicDynamicWidth(e,i.element),path:H.findPath(e,i.element),textManage:_g(i.element)}},onResize:(i,o)=>{let s=n.currentWidth+Pt.getOffsetX(o.startPoint,o.endPoint);s<=n.minWidth&&(s=n.minWidth);const a=tn.get(e,n.path);a&&bn.getNodeTopicMinWidth(e,a)!==s&&Fr.setNodeManualWidth(e,a,s)},afterResize:i=>{n=null}}),e},_X=(e,n)=>{const r=tt(e).filter(i=>_e.isMindElement(e,i));if(r.length>0){const i=r.find(o=>{const s=NX(e,o);return E1(n[0],n[1],s)<=0});return i||null}return null},NX=(e,n)=>{const r=_e.getNode(n),i=ir(r);return{x:i.x+i.width-c5,y:i.y,width:c5*2,height:i.height}},HX=e=>(lh(e,{key:"mind-node-image",canResize:()=>!0,hitTest:r=>{const i=vo(e),o=i&&_e.isMindElement(e,i)?i:void 0;if(o){const s=OU(e,o,r);if(s)return{element:o,handle:s.handle,cursorClass:s.cursorClass}}return null},onResize:(r,i)=>{const o=Pt.getOffsetX(i.startPoint,i.endPoint),s=r.element.data.image.width,a=r.element.data.image.height,u=r.path;let f=s+o;f<=100&&(f=100);const d=s/a,g=f/d,p={...r.element.data.image,width:f,height:g};Fr.setImage(e,tn.get(e,u),p),B8(e,tn.get(e,u))}}),e),GX=(e,n,r)=>{let i=[];const o=aB(e,n),s=lB(e,[...n,...o]),a=n.filter(f=>!s.find(d=>d.abstract===f));a.push(...s.map(f=>f.abstract));const u=a.map(f=>_e.getNode(f));return a.forEach((f,d)=>{const g=ir(u[d]),p=[[g.x-r[0],g.y-r[1]]],y=s.find(w=>w.abstract===f);if(Tt.isAbstract(f)&&y){const{start:w,end:E}=uB(y,a);i.push({...f,points:p,start:w,end:E})}else if(Tt.isAbstract(f)){let w={...f,points:p};delete w.start,delete w.end,i.push(w)}else i.push({...f,points:p})}),i},jX=(e,n,r,i)=>{let o,s;const a=tt(e);let u=[];const f=a.length===1,d=a[0],g=d&&H.findPath(e,d),p=d&&Sc(d).length;n.forEach((y,w)=>{if(o=wB(y),f&&i!==la.duplicate)Ft.isMind(y)&&(o=IU(e,o)),Tt.isAbstract(o)&&(o.start=o.start+p,o.end=o.end+p),s=[...g,p+w];else{const E=[r[0]+y.points[0][0],r[1]+y.points[0][1]];o.points=[E],Tt.isAbstract(y)&&(o=JC(o)),Ft.isMind(y)||(o=FU(e,o)),s=[e.children.length]}u.push(o),Ze.insertNode(e,o,s)}),Ze.addSelectionWithTemporaryElements(e,u)},zX=(e,n,r)=>{const i=Cw(r,{});Ze.insertNode(e,i,V3(e,n)),Ze.addSelectionWithTemporaryElements(e,[i])},$X=e=>{const n=e;let r;const{getDeletedFragment:i,insertFragment:o,buildFragment:s,deleteFragment:a}=n;return n.getDeletedFragment=u=>{const f=Ax(n);if(f.length){r=Ip(f).reverse();const d=fB(n,r);Fr.setAbstractsByRefs(n,d);const g=bB(n,f);Fr.setRightNodeCountByRefs(n,g);const p=Ip(f);u.push(...p)}return i(u)},n.deleteFragment=u=>{if(a(u),r){const f=WX(n,r);f&&rh(n,f),r=null}},n.buildFragment=(u,f,d,g)=>{const p=Ax(n,g),y=Ip(p);if(y.length){const w=GX(n,y,f?[f.x,f.y]:[0,0]),S={text:T8(p),type:Zl.elements,elements:w};u=rw(u,S)}return s(u,f,d,g)},n.insertFragment=(u,f,d)=>{var g,p;if((g=u==null?void 0:u.elements)!=null&&g.length){const y=(p=u.elements)==null?void 0:p.filter(w=>_e.isMindElement(n,w));y&&y.length>0&&jX(n,y,f,d)}if(u!=null&&u.text){const y=Ax(n);if(y.length===1){zX(n,y[0],ah(u.text));return}}o(u,f,d)},n},WX=(e,n)=>{let r;const i=n[0],o=H.findPath(e,i);let s=o;if(Dt.hasPrevious(o)&&(s=Dt.previous(o)),Tt.isAbstract(i)){const d=_e.getParent(i);n.includes(d.children[i.start])||(r=d.children[i.start])}try{r||(r=tn.get(e,s))}catch{}const a=n[0],u=_e.findParent(a),f=n.every(d=>_e.findParent(d)===u);return u&&f&&!r&&(r=u),r},VX=e=>{const n=e;return n.renderEmoji=(r,i)=>{throw new Error("No implementation for renderEmoji method.")},n},UX=e=>!(!e.data||!e.data.topic),XX=e=>{const n={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=n);else{const r={topic:n};e.data=r}},$B=e=>{const n=e,{drawElement:r,dblClick:i,isRectangleHit:o,isHit:s,getRectangle:a,isMovable:u,isRecursion:f,isAlign:d,isImageBindingAllowed:g,canAddToGroup:p,canSetZIndex:y,isExpanded:w,getOneHitElement:E,normalizeElement:S}=n;return n.normalizeElement=D=>{Ft.isMind(D.element)&&mi(D.element,A=>{UX(A)||XX(A)}),S(D)},n.drawElement=D=>Ft.isMind(D.element)?DX:_e.isMindElement(n,D.element)?zB:r(D),n.applyTheme=D=>{const A=D,P=!H.isBoard(D)&&((A==null?void 0:A.branchColor)||(A==null?void 0:A.fill)||(A==null?void 0:A.strokeColor));if(Ft.isMind(D)&&P){const b=H.findPath(n,D);Ze.setNode(n,{fill:null,strokeColor:null,branchColor:null},b)}},n.getRectangle=D=>_e.isMindElement(n,D)?(hn.hasMounted(D)||console.error("mind element has not been mounted"),ir(_e.getNode(D))):a(D),n.canAddToGroup=D=>_e.isMindElement(n,D)&&!Ft.isMind(D)?!1:p(D),n.canSetZIndex=D=>_e.isMindElement(n,D)&&!Ft.isMind(D)?!1:y(D),n.isRecursion=D=>_e.isMindElement(n,D)&&D.isCollapsed?!1:f(D),n.isRectangleHit=(D,A)=>{if(_e.isMindElement(n,D)){const P=ir(_e.getNode(D));return _.isHit(_.getRectangleByPoints([A.anchor,A.focus]),P)}return o(D,A)},n.isHit=(D,A,P)=>{if(_e.isMindElement(n,D)){const b=ir(_e.getNode(D));return _.isHit(_.getRectangleByPoints([A,A]),b)}return s(D,A,P)},n.getOneHitElement=D=>D.every(P=>_e.isMindElement(n,P))?D[0]:E(D),n.isMovable=D=>Ft.isMind(D)?!0:u(D),n.isImageBindingAllowed=D=>_e.isMindElement(n,D)?!0:g(D),n.isAlign=D=>Ft.isMind(D)?!0:d(D),n.isExpanded=D=>_e.isMindElement(n,D)&&!Ft.isMind(D)?!D.isCollapsed:w(D),n.dblClick=D=>{if(H.isReadonly(n)){i(D);return}const A=It(n,Lt(n,D.x,D.y));n.children.filter(P=>Ft.isMind(P)).forEach(P=>{mi(P,b=>{!H.hasBeenTextEditing(n)&&xB(n,A,b)&&H3(b)},nh(n))}),!H.hasBeenTextEditing(n)&&i(D)},VX(LX(HX(FX(IX($X(OX(RX(bX(MX(BX(n)))))))))))};var kx={exports:{}},E5;function KX(){return E5||(E5=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(n,r){n(function(){var i={};i.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},i.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var o=Object.prototype.hasOwnProperty,s;i.FALLBACK_PHONE="UnknownPhone",i.FALLBACK_TABLET="UnknownTablet",i.FALLBACK_MOBILE="UnknownMobile",s="isArray"in Array?Array.isArray:function(p){return Object.prototype.toString.call(p)==="[object Array]"};function a(p,y){return p!=null&&y!=null&&p.toLowerCase()===y.toLowerCase()}function u(p,y){var w,E,S=p.length;if(!S||!y)return!1;for(w=y.toLowerCase(),E=0;E<S;++E)if(w===p[E].toLowerCase())return!0;return!1}function f(p){for(var y in p)o.call(p,y)&&(p[y]=new RegExp(p[y],"i"))}function d(p){return(p||"").substr(0,500)}(function(){var y,w,E,S,D,A,P=i.mobileDetectRules;for(y in P.props)if(o.call(P.props,y)){for(w=P.props[y],s(w)||(w=[w]),D=w.length,S=0;S<D;++S)E=w[S],A=E.indexOf("[VER]"),A>=0&&(E=E.substring(0,A)+"([\\w._\\+]+)"+E.substring(A+5)),w[S]=new RegExp(E,"i");P.props[y]=w}f(P.oss),f(P.phones),f(P.tablets),f(P.uas),f(P.utils),P.oss0={WindowsPhoneOS:P.oss.WindowsPhoneOS,WindowsMobileOS:P.oss.WindowsMobileOS}})(),i.findMatch=function(p,y){for(var w in p)if(o.call(p,w)&&p[w].test(y))return w;return null},i.findMatches=function(p,y){var w=[];for(var E in p)o.call(p,E)&&p[E].test(y)&&w.push(E);return w},i.getVersionStr=function(p,y){var w=i.mobileDetectRules.props,E,S,D,A;if(o.call(w,p)){for(E=w[p],D=E.length,S=0;S<D;++S)if(A=E[S].exec(y),A!==null)return A[1]}return null},i.getVersion=function(p,y){var w=i.getVersionStr(p,y);return w?i.prepareVersionNo(w):NaN},i.prepareVersionNo=function(p){var y;return y=p.split(/[a-z._ \/\-]/i),y.length===1&&(p=y[0]),y.length>1&&(p=y[0]+".",y.shift(),p+=y.join("")),Number(p)},i.isMobileFallback=function(p){return i.detectMobileBrowsers.fullPattern.test(p)||i.detectMobileBrowsers.shortPattern.test(p.substr(0,4))},i.isTabletFallback=function(p){return i.detectMobileBrowsers.tabletPattern.test(p)},i.prepareDetectionCache=function(p,y,w){if(p.mobile===r){var E,S,D;if(S=i.findMatch(i.mobileDetectRules.tablets,y),S){p.mobile=p.tablet=S,p.phone=null;return}if(E=i.findMatch(i.mobileDetectRules.phones,y),E){p.mobile=p.phone=E,p.tablet=null;return}i.isMobileFallback(y)?(D=g.isPhoneSized(w),D===r?(p.mobile=i.FALLBACK_MOBILE,p.tablet=p.phone=null):D?(p.mobile=p.phone=i.FALLBACK_PHONE,p.tablet=null):(p.mobile=p.tablet=i.FALLBACK_TABLET,p.phone=null)):i.isTabletFallback(y)?(p.mobile=p.tablet=i.FALLBACK_TABLET,p.phone=null):p.mobile=p.tablet=p.phone=null}},i.mobileGrade=function(p){var y=p.mobile()!==null;return p.os("iOS")&&p.version("iPad")>=4.3||p.os("iOS")&&p.version("iPhone")>=3.1||p.os("iOS")&&p.version("iPod")>=3.1||p.version("Android")>2.1&&p.is("Webkit")||p.version("Windows Phone OS")>=7||p.is("BlackBerry")&&p.version("BlackBerry")>=6||p.match("Playbook.*Tablet")||p.version("webOS")>=1.4&&p.match("Palm|Pre|Pixi")||p.match("hp.*TouchPad")||p.is("Firefox")&&p.version("Firefox")>=12||p.is("Chrome")&&p.is("AndroidOS")&&p.version("Android")>=4||p.is("Skyfire")&&p.version("Skyfire")>=4.1&&p.is("AndroidOS")&&p.version("Android")>=2.3||p.is("Opera")&&p.version("Opera Mobi")>11&&p.is("AndroidOS")||p.is("MeeGoOS")||p.is("Tizen")||p.is("Dolfin")&&p.version("Bada")>=2||(p.is("UC Browser")||p.is("Dolfin"))&&p.version("Android")>=2.3||p.match("Kindle Fire")||p.is("Kindle")&&p.version("Kindle")>=3||p.is("AndroidOS")&&p.is("NookTablet")||p.version("Chrome")>=11&&!y||p.version("Safari")>=5&&!y||p.version("Firefox")>=4&&!y||p.version("MSIE")>=7&&!y||p.version("Opera")>=10&&!y?"A":p.os("iOS")&&p.version("iPad")<4.3||p.os("iOS")&&p.version("iPhone")<3.1||p.os("iOS")&&p.version("iPod")<3.1||p.is("Blackberry")&&p.version("BlackBerry")>=5&&p.version("BlackBerry")<6||p.version("Opera Mini")>=5&&p.version("Opera Mini")<=6.5&&(p.version("Android")>=2.3||p.is("iOS"))||p.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||p.version("Opera Mobi")>=11&&p.is("SymbianOS")?"B":(p.version("BlackBerry")<5||p.match("MSIEMobile|Windows CE.*Mobile")||p.version("Windows Mobile")<=5.2,"C")},i.detectOS=function(p){return i.findMatch(i.mobileDetectRules.oss0,p)||i.findMatch(i.mobileDetectRules.oss,p)},i.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function g(p,y){this.ua=d(p),this._cache={},this.maxPhoneWidth=y||600}return g.prototype={constructor:g,mobile:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===r&&(this._cache.userAgent=i.findMatch(i.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===r&&(this._cache.userAgents=i.findMatches(i.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===r&&(this._cache.os=i.detectOS(this.ua)),this._cache.os},version:function(p){return i.getVersion(p,this.ua)},versionStr:function(p){return i.getVersionStr(p,this.ua)},is:function(p){return u(this.userAgents(),p)||a(p,this.os())||a(p,this.phone())||a(p,this.tablet())||u(i.findMatches(i.mobileDetectRules.utils,this.ua),p)},match:function(p){return p instanceof RegExp||(p=new RegExp(p,"i")),p.test(this.ua)},isPhoneSized:function(p){return g.isPhoneSized(p||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===r&&(this._cache.grade=i.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?g.isPhoneSized=function(p){return p<0?r:i.getDeviceSmallerSide()<=p}:g.isPhoneSized=function(){},g._impl=i,g.version="1.4.5 2021-03-13",g})})(function(n){if(e.exports)return function(r){e.exports=r()};if(typeof window<"u")return function(r){window.MobileDetect=r()};throw new Error("unknown environment")}())}(kx)),kx.exports}var qX=KX();const YX=vc(qX),P5=e=>k.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),ZX=e=>{const n=e;return e.setPluginOptions(yw,{emojiPadding:0,spaceBetweenEmojis:4}),n.renderEmoji=(r,i)=>{const o=document.createElement("span");r.appendChild(o);const s=w1.createRoot(o);s.render(k.jsx(P5,{...i}));let a={...i};return{destroy:()=>{setTimeout(()=>{s.unmount()},0)},update:f=>{a={...a,...f},s.render(k.jsx(P5,{...a}))}}},n},S5=e=>{const n={src:e.imageItem.url,draggable:!1,width:"100%"};return k.jsx("div",{children:k.jsx("img",{...n,alt:"Uploaded content",className:gn("image-origin",{"image-origin--focus":e.isFocus})})})};var Sg=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(Sg||{});const X3={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},K3={json:"application/json",drawnix:"application/vnd.drawnix+json",...X3},QX={drawnix:1},q3=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),JX=q3?Promise.resolve().then(function(){return oK}):Promise.resolve().then(function(){return fK});async function eK(...e){return(await JX).default(...e)}q3?Promise.resolve().then(function(){return aK}):Promise.resolve().then(function(){return dK});const tK=q3?Promise.resolve().then(function(){return uK}):Promise.resolve().then(function(){return pK});async function nK(...e){return(await tK).default(...e)}const rK=async e=>{const n=await e.getFile();return n.handle=e,n};var iK=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((o,s)=>{n[s]={description:o.description||"Files",accept:{}},o.mimeTypes?o.mimeTypes.map(a=>{n[s].accept[a]=o.extensions||[]}):n[s].accept["*/*"]=o.extensions||[]});const r=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),i=await Promise.all(r.map(rK));return e[0].multiple?i:i[0]},oK={__proto__:null,default:iK};function qv(e){function n(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var i=r.done;return Promise.resolve(r.value).then(function(o){return{value:o,done:i}})}return qv=function(r){this.s=r,this.n=r.next},qv.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return i===void 0?Promise.resolve({value:r,done:!0}):n(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return i===void 0?Promise.reject(r):n(i.apply(this.s,arguments))}},new qv(e)}const WB=async(e,n,r=e.name,i)=>{const o=[],s=[];var a,u=!1,f=!1;try{for(var d,g=function(p){var y,w,E,S=2;for(typeof Symbol<"u"&&(w=Symbol.asyncIterator,E=Symbol.iterator);S--;){if(w&&(y=p[w])!=null)return y.call(p);if(E&&(y=p[E])!=null)return new qv(y.call(p));w="@@asyncIterator",E="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());u=!(d=await g.next()).done;u=!1){const p=d.value,y=`${r}/${p.name}`;p.kind==="file"?s.push(p.getFile().then(w=>(w.directoryHandle=e,w.handle=p,Object.defineProperty(w,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>y})))):p.kind!=="directory"||!n||i&&i(p)||o.push(WB(p,n,y,i))}}catch(p){f=!0,a=p}finally{try{u&&g.return!=null&&await g.return()}finally{if(f)throw a}}return[...(await Promise.all(o)).flat(),...await Promise.all(s)]};var sK=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:WB(n,e.recursive,void 0,e.skipDirectory)},aK={__proto__:null,default:sK},lK=async(e,n=[{}],r=null,i=!1,o=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const s=[];let a=null;if(e instanceof Blob&&e.type?a=e.type:e.headers&&e.headers.get("content-type")&&(a=e.headers.get("content-type")),n.forEach((d,g)=>{s[g]={description:d.description||"Files",accept:{}},d.mimeTypes?(g===0&&a&&d.mimeTypes.push(a),d.mimeTypes.map(p=>{s[g].accept[p]=d.extensions||[]})):a?s[g].accept[a]=d.extensions||[]:s[g].accept["*/*"]=d.extensions||[]}),r)try{await r.getFile()}catch(d){if(r=null,i)throw d}const u=r||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:s,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!r&&o&&o(u);const f=await u.createWritable();return"stream"in e?(await e.stream().pipeTo(f),u):"body"in e?(await e.body.pipeTo(f),u):(await f.write(await e),await f.close(),u)},uK={__proto__:null,default:lK},cK=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,r)=>{const i=document.createElement("input");i.type="file";const o=[...e.map(f=>f.mimeTypes||[]),...e.map(f=>f.extensions||[])].join();i.multiple=e[0].multiple||!1,i.accept=o||"",i.style.display="none",document.body.append(i);const s=f=>{typeof a=="function"&&a(),n(f)},a=e[0].legacySetup&&e[0].legacySetup(s,()=>a(r),i),u=()=>{window.removeEventListener("focus",u),i.remove()};i.addEventListener("click",()=>{window.addEventListener("focus",u)}),i.addEventListener("change",()=>{window.removeEventListener("focus",u),i.remove(),s(i.multiple?Array.from(i.files):i.files[0])}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),fK={__proto__:null,default:cK},hK=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,r)=>{const i=document.createElement("input");i.type="file",i.webkitdirectory=!0;const o=a=>{typeof s=="function"&&s(),n(a)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(r),i);i.addEventListener("change",()=>{let a=Array.from(i.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(a=a.filter(u=>u.webkitRelativePath.split("/").every(f=>!e[0].skipDirectory({name:f,kind:"directory"})))):a=a.filter(u=>u.webkitRelativePath.split("/").length===2),o(a)}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),dK={__proto__:null,default:hK},gK=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const r=document.createElement("a");let i=e;"body"in e&&(i=await async function(a,u){const f=a.getReader(),d=new ReadableStream({start:y=>async function w(){return f.read().then(({done:E,value:S})=>{if(!E)return y.enqueue(S),w();y.close()})}()}),g=new Response(d),p=await g.blob();return f.releaseLock(),new Blob([p],{type:u})}(e.body,e.headers.get("content-type"))),r.download=n.fileName||"Untitled",r.href=URL.createObjectURL(await i);const o=()=>{typeof s=="function"&&s()},s=n.legacySetup&&n.legacySetup(o,()=>s(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),o()}),r.click(),null},pK={__proto__:null,default:gK};const VB=e=>{var i,o;const n=(i=e.extensions)==null?void 0:i.reduce((s,a)=>(s.push(K3[a]),s),[]),r=(o=e.extensions)==null?void 0:o.reduce((s,a)=>a==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${a}`),[]);return eK({description:e.description,extensions:r,mimeTypes:n,multiple:e.multiple??!1})},mK=(e,n)=>nK(e,{fileName:`${n.name}.${n.extension}`,description:n.description,extensions:[`.${n.extension}`]},n.fileHandle);var Y3=(e=>(e.drawnix="drawnix",e))(Y3||{});const vK=()=>new Date().getTime().toString(),UB=async(e,n=vK())=>{const r=xK(e),i=new Blob([r],{type:K3.drawnix});return{fileHandle:await mK(i,{name:n,extension:"drawnix",description:"Drawnix file"})}},yK=async e=>{const n=await VB({description:"Drawnix files"});return CK(e,await SK(n))},wK=e=>{if(!e||typeof e!="object"||e===null)return!1;const n=e;return!!("type"in n&&n.type===Y3.drawnix&&"elements"in n&&Array.isArray(n.elements)&&"viewport"in n&&typeof n.viewport=="object")},xK=e=>{const n={type:Y3.drawnix,version:QX.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(n,null,2)},CK=async(e,n)=>{const r=await TK(n);let i;try{if(i=JSON.parse(r),wK(i))return i;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},EK=(e,n,r)=>new File([e],r||"",{type:n}),PK=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((n,r)=>{const i=new FileReader;i.onload=o=>{var s;if(!((s=o.target)!=null&&s.result))return r(new Error("Couldn't convert blob to ArrayBuffer"));n(o.target.result)},i.readAsArrayBuffer(e)}),SK=async e=>{var n;return e.type||(n=e==null?void 0:e.name)!=null&&n.endsWith(".drawnix")&&(e=EK(await PK(e),K3.drawnix,e.name)),e},TK=async e=>{let n;return"text"in Blob?n=await e.text():n=await new Promise(r=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&r(i.result)}}),n},DK=async e=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{const o=i.result;n(o)},i.onerror=o=>r(o),i.readAsDataURL(e)}),T5=e=>!!e&&Object.values(X3).includes(e),AK=e=>new Promise((n,r)=>{const i=new Image;i.onload=()=>{n(i)},i.onerror=o=>{r(o)},i.src=e}),BK=(e,n,r)=>{const i=e.width>r?r:e.width,o=i/e.width*e.height;return{url:n,width:i,height:o}},nE=async(e,n,r,i)=>{const o=tt(e)[0]||vo(e),s=o?240:400,a=await DK(n),u=await AK(a),f=BK(u,a,s),d=r&&rl(e,r);if(i&&d&&_e.isMindElement(e,d)){Fr.setImage(e,d,f);return}o&&_e.isMindElement(e,o)&&!i?Fr.setImage(e,o,f):qi.insertImage(e,f,r)};class MK{constructor(n={}){this.overlay=null,this.imageContainer=null,this.image=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.animationFrameId=null,this.pendingUpdate=!1,this.state={zoom:1,x:0,y:0,isDragging:!1,dragStartX:0,dragStartY:0,imageStartX:0,imageStartY:0},this.styleElement=null,this.options={zoomStep:n.zoomStep||.2,minZoom:n.minZoom||.1,maxZoom:n.maxZoom||5,enableKeyboard:n.enableKeyboard!==!1},this.addStyles(),this.bindEvents()}open(n,r=""){this.createOverlay(),this.createImage(n,r),this.resetState(),document.body.style.overflow="hidden"}close(){this.overlay&&(this.cleanupDragEvents(),document.removeEventListener("mousemove",this.delegationHandler),document.removeEventListener("mouseup",this.delegationHandler),document.removeEventListener("keydown",this.delegationHandler),document.removeEventListener("wheel",this.delegationHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),document.body.removeChild(this.overlay),this.overlay=null,this.image=null,this.imageContainer=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.pendingUpdate=!1),document.body.style.overflow=""}createOverlay(){this.overlay=document.createElement("div"),this.overlay.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(45, 45, 45, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: grab;
    `,this.overlay.addEventListener("click",n=>{n.target===this.overlay&&this.close()}),this.createCloseButton(),this.createControls(),document.body.appendChild(this.overlay)}createCloseButton(){this.closeButton=document.createElement("div"),this.closeButton.innerHTML="",this.closeButton.className="image-viewer-close-btn",this.closeButton.addEventListener("click",()=>this.close()),this.overlay.appendChild(this.closeButton)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.style.cssText=`
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10001;
    `,this.addStyles();const n=document.createElement("button");n.innerHTML="+",n.className="image-viewer-control-btn",n.addEventListener("click",()=>this.zoomIn());const r=document.createElement("button");r.innerHTML="-",r.className="image-viewer-control-btn",r.addEventListener("click",()=>this.zoomOut());const i=document.createElement("button");i.innerHTML="",i.className="image-viewer-control-btn",i.addEventListener("click",()=>this.resetState()),this.controlsContainer.appendChild(r),this.controlsContainer.appendChild(i),this.controlsContainer.appendChild(n),this.overlay.appendChild(this.controlsContainer)}createImage(n,r){this.imageContainer=document.createElement("div"),this.imageContainer.style.cssText=`
      position: relative;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
    `,this.image=document.createElement("img"),this.image.src=n,this.image.alt=r,this.image.style.cssText=`
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
      width: auto;
      height: auto;
      display: block;
      user-select: none;
      pointer-events: none;
      object-fit: contain;
    `,this.imageContainer.appendChild(this.image),this.overlay.appendChild(this.imageContainer),this.bindDragEvents()}bindDragEvents(){this.imageContainer&&(this.dragHandler=n=>{if(!this.state.isDragging)return;const r=n.clientX-this.state.dragStartX,i=n.clientY-this.state.dragStartY;this.state.x=this.state.imageStartX+r,this.state.y=this.state.imageStartY+i,this.pendingUpdate||(this.pendingUpdate=!0,this.animationFrameId=requestAnimationFrame(()=>{this.updateImageTransform(),this.pendingUpdate=!1}))},this.mouseUpHandler=()=>{this.state.isDragging&&(this.state.isDragging=!1,this.imageContainer&&(this.imageContainer.style.cursor="grab"),this.overlay&&(this.overlay.style.cursor="grab"),this.cleanupDragEvents())},this.imageContainer.addEventListener("mousedown",n=>{n.preventDefault(),this.state.isDragging=!0,this.state.dragStartX=n.clientX,this.state.dragStartY=n.clientY,this.state.imageStartX=this.state.x,this.state.imageStartY=this.state.y,this.imageContainer&&(this.imageContainer.style.cursor="grabbing"),this.overlay&&(this.overlay.style.cursor="grabbing"),this.dragHandler&&this.mouseUpHandler&&(document.addEventListener("mousemove",this.dragHandler,{passive:!0}),document.addEventListener("mouseup",this.mouseUpHandler,{once:!0}))}))}cleanupDragEvents(){this.dragHandler&&document.removeEventListener("mousemove",this.dragHandler),this.mouseUpHandler&&document.removeEventListener("mouseup",this.mouseUpHandler)}bindEvents(){this.delegationHandler=n=>{if(this.overlay){if(n.type==="keydown"&&this.options.enableKeyboard){const r=n;switch(r.key){case"Escape":this.close();break;case"+":case"=":r.preventDefault(),this.zoomIn();break;case"-":r.preventDefault(),this.zoomOut();break;case"0":r.preventDefault(),this.resetState();break}}else if(n.type==="wheel"){const r=n;r.preventDefault(),r.deltaY<0?this.zoomIn():this.zoomOut()}}},document.addEventListener("keydown",this.delegationHandler),document.addEventListener("wheel",this.delegationHandler,{passive:!1})}zoomIn(){this.state.zoom=Math.min(this.state.zoom+this.options.zoomStep,this.options.maxZoom),this.updateImageTransform()}zoomOut(){this.state.zoom=Math.max(this.state.zoom-this.options.zoomStep,this.options.minZoom),this.updateImageTransform()}resetState(){this.state.zoom=1,this.state.x=0,this.state.y=0,this.updateImageTransform()}updateImageTransform(){this.imageContainer&&(this.imageContainer.style.transform=`
      translate(${this.state.x}px, ${this.state.y}px) 
      scale(${this.state.zoom})
    `)}addStyles(){this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.textContent=`
        .image-viewer-control-btn {
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 14px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 18px;
          transition: background 0.2s;
          user-select: none;
        }
        
        .image-viewer-control-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
        
        .image-viewer-close-btn {
          position: absolute;
          top: 20px;
          right: 30px;
          color: white;
          font-size: 18px;
          cursor: pointer;
          z-index: 10001;
          user-select: none;
          width: 36px;
          height: 34px;
          display: flex;
          border-radius: 50%;
          justify-content: center;
          background: rgba(0, 0, 0, 0.8);
          transition: all 0.2s ease;
          line-height: 34px;
          padding-bottom:2px;
        }
        
        .image-viewer-close-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
      `,document.head.appendChild(this.styleElement))}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}destroy(){this.close(),this.removeStyles()}}const RK=e=>{const n=e,{insertFragment:r,drop:i,pointerUp:o}=n,s=new MK({zoomStep:.3,minZoom:.1,maxZoom:5,enableKeyboard:!0});return n.insertFragment=(a,u,f)=>{var d;if((d=a==null?void 0:a.files)!=null&&d.length&&T5(a.files[0].type)){const g=a.files[0];nE(e,g,u,!1);return}r(a,u,f)},n.drop=a=>{var u,f;if((f=(u=a.dataTransfer)==null?void 0:u.files)!=null&&f.length){const d=a.dataTransfer.files[0];if(T5(d.type)){const g=It(e,Lt(e,a.x,a.y));return nE(e,d,g,!0),!0}}return i(a)},n.pointerUp=a=>{const u=vo(e);if(u&&!$l(e)&&!vi(e)&&!cc(e)){const f=It(e,Lt(e,a.x,a.y)),d=rl(e,f);d&&_e.isMindElement(e,d)&&_e.hasImage(d)&&SB(e,d,f)&&u===d&&s.open(d.data.image.url)}o(a)},n},kK={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":"","toolbar.arrow.elbow":"","toolbar.arrow.curve":"","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":"","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"","zoom.100":" 100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":"","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"","general.undo":"","general.redo":"","general.menu":"","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.exportImage.svg":"SVG","menu.cleanBoard":"","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"","dialog.mermaid.sequence":"","dialog.mermaid.class":"","dialog.mermaid.otherTypes":" Drawnix ","dialog.mermaid.syntax":"Mermaid ","dialog.mermaid.placeholder":" Mermaid ","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":" Markdown ","dialog.markdown.syntax":"Markdown ","dialog.markdown.placeholder":" Markdown ","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":" Mermaid ","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":"","cleanConfirm.description":"?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":"","popupToolbar.fillColor":"","popupToolbar.fontColor":"","popupToolbar.link":"","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","draw.lineText":"","draw.geometryText":"","mind.centralText":"","mind.abstractNodeText":"","markdown.example":`# 
  
  -  bug   
    -  
      -    
  
  -    
    -  
      -    
  
  -   
    -   
      -    
      
  ##      
  
  ### Hello world    
  
  ####       `,"tutorial.title":"Drawnix","tutorial.description":"All-in-one ","tutorial.dataDescription":"","tutorial.appToolbar":"...","tutorial.creationToolbar":"","tutorial.themeDescription":""},bK={"toolbar.hand":"Hand  H","toolbar.selection":"Selection  V","toolbar.mind":"Mind  M","toolbar.text":"Text  T","toolbar.arrow":"Arrow  A","toolbar.shape":"Shape","toolbar.image":"Image  Cmd+U","toolbar.extraTools":"Extra Tools","toolbar.pen":"Pen  P","toolbar.eraser":"Eraser  E","toolbar.arrow.straight":"Straight Arrow Line","toolbar.arrow.elbow":"Elbow Arrow Line","toolbar.arrow.curve":"Curve Arrow Line","toolbar.shape.rectangle":"Rectangle  R","toolbar.shape.ellipse":"Ellipse  O","toolbar.shape.triangle":"Triangle","toolbar.shape.terminal":"Terminal","toolbar.shape.diamond":"Diamond","toolbar.shape.parallelogram":"Parallelogram","toolbar.shape.roundRectangle":"Round Rectangle","zoom.in":"Zoom In  Cmd++","zoom.out":"Zoom Out  Cmd+-","zoom.fit":"Fit to Screen","zoom.100":"Zoom to 100%","theme.default":"Default","theme.colorful":"Colorful","theme.soft":"Soft","theme.retro":"Retro","theme.dark":"Dark","theme.starry":"Starry","color.none":"Topic Color","color.unknown":"Other Color","color.default":"Basic Black","color.white":"White","color.gray":"Grey","color.deepBlue":"Deep Blue","color.red":"Red","color.green":"Green","color.yellow":"Yellow","color.purple":"Purple","color.orange":"Orange","color.pastelPink":"Paster Pink","color.cyan":"Cyan","color.brown":"Brown","color.forestGreen":"Forest Green","color.lightGray":"Light Grey","general.undo":"Undo","general.redo":"Redo","general.menu":"App Menu","general.duplicate":"Duplicate","general.delete":"Delete","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"Open","menu.saveFile":"Save File","menu.exportImage":"Export Image","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.exportImage.svg":"SVG","menu.cleanBoard":"Clear Board","menu.github":"GitHub","dialog.mermaid.title":"Mermaid to Drawnix","dialog.mermaid.description":"Currently supports","dialog.mermaid.flowchart":"flowcharts","dialog.mermaid.sequence":"sequence diagrams","dialog.mermaid.class":"class diagrams","dialog.mermaid.otherTypes":", and other diagram types (rendered as images).","dialog.mermaid.syntax":"Mermaid Syntax","dialog.mermaid.placeholder":"Write your Mermaid chart definition here","dialog.mermaid.preview":"Preview","dialog.mermaid.insert":"Insert","dialog.markdown.description":"Supports automatic conversion of Markdown syntax to mind map.","dialog.markdown.syntax":"Markdown Syntax","dialog.markdown.placeholder":"Write your Markdown text definition here...","dialog.markdown.preview":"Preview","dialog.markdown.insert":"Insert","dialog.error.loadMermaid":"Failed to load Mermaid library","extraTools.mermaidToDrawnix":"Mermaid to Drawnix","extraTools.markdownToDrawnix":"Markdown to Drawnix","cleanConfirm.title":"Clear Board","cleanConfirm.description":"This will clear the entire board. Do you want to continue?","cleanConfirm.cancel":"Cancel","cleanConfirm.ok":"OK","popupLink.delLink":"Delete Link","popupToolbar.fillColor":"Fill Color","popupToolbar.fontColor":"Font Color","popupToolbar.link":"Insert Link","popupToolbar.stroke":"Stroke","textPlaceholders.link":"Link","textPlaceholders.text":"Text","line.source":"Start","line.target":"End","line.arrow":"Arrow","line.none":"None","stroke.solid":"Solid","stroke.dashed":"Dashed","stroke.dotted":"Dotted","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"Text","draw.geometryText":"Text","mind.centralText":"Central Topic","mind.abstractNodeText":"Summary","tutorial.title":"Drawnix","tutorial.description":"All-in-one whiteboard, including mind maps, flowcharts, free drawing, and more","tutorial.dataDescription":"All data is stored locally in your browser","tutorial.appToolbar":"Export, language settings, ...","tutorial.creationToolbar":"Select a tool to start your creation","tutorial.themeDescription":"Switch between light and dark themes"},OK={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"Mind-  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":" ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"  ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":" ","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"-","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.exportImage.svg":"SVG","menu.cleanBoard":" ","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"-","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"    (  ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"    Mermaid-","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown  mind-.","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"     Markdown","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"    .   ?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":"","tutorial.title":"Drawnix","tutorial.description":"    -, -,     ","tutorial.dataDescription":"      ","tutorial.appToolbar":",  , ...","tutorial.creationToolbar":"    ","tutorial.themeDescription":"     "},IK={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"   M","toolbar.eraser":"  E","toolbar.text":"  T","toolbar.pen":"  P","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":" ","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":" ","toolbar.shape.roundRectangle":"  ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":" ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":" ","color.unknown":" ","color.default":" ","color.white":"","color.gray":"","color.deepBlue":" ","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":" ","color.cyan":"","color.brown":"","color.forestGreen":"  ()","color.lightGray":" ","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","language.switcher":"","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","menu.open":"","menu.saveFile":" ","menu.exportImage":" ","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.exportImage.svg":"SVG","menu.cleanBoard":" ","menu.github":" ","dialog.mermaid.title":" Mermaid  Drawnix","dialog.mermaid.description":" ","dialog.mermaid.flowchart":" ","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"     ( ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"   ...","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown   .","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"  Markdown ...","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":" Mermaid  Drawnix","extraTools.markdownToDrawnix":" Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"     .   ","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":" ","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  -          
    -  
      -      

  -          
    -         
      -    

  -      
    -     
      -    
    
  ##         

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":"","tutorial.title":"Drawnix","tutorial.description":"          ","tutorial.dataDescription":"      ","tutorial.appToolbar":"   ...","tutorial.creationToolbar":"   ","tutorial.themeDescription":"    "},XB={zh:kK,en:bK,ru:OK,ar:IK},KB=K.createContext(void 0),FK=({children:e,defaultLanguage:n="zh"})=>{const[r,i]=K.useState(()=>localStorage.getItem("language")||n),o=K.useCallback(u=>{localStorage.setItem("language",u),i(u)},[]),s=K.useCallback(u=>XB[r][u]||u,[r]),a=K.useMemo(()=>({language:r,setLanguage:o,t:s}),[r,o,s]);return k.jsx(KB.Provider,{value:a,children:e})},Kn=()=>{const e=K.useContext(KB);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},LK=()=>({t:n=>{const r=localStorage.getItem("language")||"zh";return XB[r][n]||n},language:localStorage.getItem("language")||"zh"}),qB=e=>{const n=e;n.renderImage=(i,o)=>{const s=w1.createRoot(i);s.render(k.jsx(S5,{...o}));let a={...o};return{destroy:()=>{setTimeout(()=>{s.unmount()},0)},update:f=>{a={...a,...f},s.render(k.jsx(S5,{...a}))}}};const{t:r}=LK();return n.getI18nValue=i=>i===xg.lineText?r("draw.lineText"):i===xg.geometryText?r("draw.geometryText"):i===Eg.mindCentralText?r("mind.centralText"):i===Eg.abstractNodeText?r("mind.abstractNodeText"):null,RK(n)},Bo=Bt.forwardRef(({children:e,padding:n,className:r,style:i,...o},s)=>k.jsx("div",{className:gn("island",r),style:{"--padding":n,...i},ref:s,...o,children:e})),_K=K.forwardRef(({children:e,gap:n,align:r,justifyContent:i,className:o,style:s},a)=>k.jsx("div",{className:gn("stack stack_horizontal",o),style:{"--gap":n,alignItems:r,justifyContent:i,...s},ref:a,children:e})),NK=K.forwardRef(({children:e,gap:n,align:r,justifyContent:i,className:o,style:s},a)=>k.jsx("div",{className:gn("stack stack_vertical",o),style:{"--gap":n,justifyItems:r,justifyContent:i,...s},ref:a,children:e})),bi={Row:_K,Col:NK};class HK extends DOMException{constructor(n="Request Aborted"){super(n,"AbortError")}}const GK=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,jK=(e,n,{checkForDefaultPrevented:r=!0}={})=>function(o){if(e==null||e(o),!r||!(o!=null&&o.defaultPrevented))return n==null?void 0:n(o)},zK=e=>{const n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]);let o=i.length;const s=new Uint8Array(o);for(;o--;)s[o]=i.charCodeAt(o);return new Blob([s],{type:r})},$K=(e,n={})=>hO(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...n});function YB(e,n){const r=document.createElement("a"),i=window.URL.createObjectURL(e);r.href=i,r.download=n,document.body.append(r),r.click(),window.URL.revokeObjectURL(i),r.remove()}const Z3=(e,n)=>{const r=[];for(let i=0;i<e.length;i+=n)r.push(e.slice(i,i+n));return r},p1=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),ly||wb?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),On=Bt.forwardRef((e,n)=>{const{id:r}={id:"drawnix"},i=Bt.useRef(null);Bt.useImperativeHandle(n,()=>i.current);const o=`tool-icon_size_${e.size||"medium"}`,[s,a]=K.useState(!1),u=K.useRef(!0),f=async g=>{var y;const p="onClick"in e&&((y=e.onClick)==null?void 0:y.call(e,g));if(GK(p))try{a(!0),await p}catch(w){if(w instanceof HK)console.warn(w);else throw w}finally{u.current&&a(!1)}};K.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const d=K.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const g=e.type==="icon"?"button":e.type;return k.jsxs("button",{className:gn("tool-icon_type_button",o,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:g,onClick:f,onPointerDown:p=>{var y;(y=e.onPointerDown)==null||y.call(e,{pointerType:p.pointerType||null,event:p})},onPointerUp:p=>{var y;(y=e.onPointerUp)==null||y.call(e,{pointerType:p.pointerType||null})},ref:i,disabled:s||!!e.disabled,children:[(e.icon||e.label)&&k.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&k.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&k.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&k.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return k.jsxs("label",{className:gn("tool-icon",e.className),title:e.title,onPointerDown:g=>{var p;d.current=g.pointerType||null,(p=e.onPointerDown)==null||p.call(e,{pointerType:g.pointerType||null,event:g})},onPointerUp:g=>{var p;(p=e.onPointerUp)==null||p.call(e,{pointerType:g.pointerType||null}),requestAnimationFrame(()=>{d.current=null})},children:[k.jsx("input",{className:`tool-icon_type_radio ${o}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${r}-${e.id}`,onChange:()=>{var g;(g=e.onChange)==null||g.call(e,{pointerType:d.current})},checked:e.checked,ref:i}),k.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&k.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});On.displayName="ToolButton";const Kt=e=>e,WK=Kt(k.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),VK=Kt(k.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),UK=Kt(k.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),XK=Kt(k.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),KK=Kt(k.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),qK=Kt(k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),k.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),k.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]})),YK=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),ZK=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:k.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),QK=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:k.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),JK=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),eq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),tq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),nq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),rq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),iq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),oq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),sq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),ZB=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:k.jsxs("g",{strokeWidth:"1.5",children:[k.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),k.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),k.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),k.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),aq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:k.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),lq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:k.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[k.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),k.jsx("path",{d:"M15 8h.01"}),k.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),k.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),k.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),k.jsx("path",{d:"M19 16v6"}),k.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),uq=Kt(k.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:k.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),cq=Kt(k.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:k.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),fq=Kt(k.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:k.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),hq=Kt(k.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:k.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),dq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:k.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[k.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),k.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),gq=Kt(k.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:k.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[k.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),k.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),pq=Kt(k.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("polyline",{points:"20 6 9 17 4 12"})})),mq=Kt(k.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:k.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[k.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),k.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),vq=Kt(k.jsx("svg",{viewBox:"0 0 24 24",children:k.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:k.jsxs("g",{id:"Group",children:[k.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),k.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),yq=Kt(k.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:k.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[k.jsx("path",{d:"M-18-19h60v40h-60z"}),k.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),wq=Kt(k.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:k.jsx("g",{fill:"currentColor",children:k.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),xq=Kt(k.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:k.jsxs("g",{fill:"currentColor",children:[k.jsx("rect",{rx:"1",height:"2",width:"2"}),k.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),k.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),k.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),k.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),k.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),Cq=({currentColor:e})=>k.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:k.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[k.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),k.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),Eq=Kt(k.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:k.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),Pq=Kt(k.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:k.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),Oy=Kt(k.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:k.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),Sq=Kt(k.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:k.jsxs("g",{strokeWidth:"1.25",children:[k.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),k.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),Q3=Kt(k.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),Tq=Kt(k.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),QB=Kt(k.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:k.jsxs("g",{strokeWidth:1.8,fill:"none",children:[k.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M12 3l-4 7h8z"}),k.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),k.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),Dq=Kt(k.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),Aq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),Bq=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:k.jsx("g",{stroke:"none",fill:"currentColor",children:k.jsx("path",{d:"M12.253 4.13h-1.2v-1a2.8 2.8 0 0 0-5.6 0v4a2.8 2.8 0 0 0 2.8 2.8v1.2a4 4 0 0 1-4-4v-4a4 4 0 0 1 8 0v1zm-8 8h1.2v1a2.8 2.8 0 0 0 5.6 0v-4a2.8 2.8 0 0 0-2.8-2.8v-1.2a4 4 0 0 1 4 4v4a4 4 0 0 1-8 0v-1z",transform:"rotate(46 8.253 8.13)"})})})),JB=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:k.jsx("g",{stroke:"none",children:k.jsx("path",{d:"M8.44521878,4.21103025 C8.58299906,3.97171622 8.8886944,3.88940684 9.12800843,4.02718711 L15.242109,7.54725833 C15.3194119,7.59176394 15.3834015,7.65613893 15.4274422,7.73370766 C15.5637831,7.97384463 15.4796398,8.27904026 15.2395028,8.41538118 L9.12748155,11.8855614 C9.0176214,11.947936 8.88822223,11.9664118 8.76529593,11.9372749 C8.4965984,11.8735862 8.33040588,11.604134 8.39409456,11.3354364 L9.018,8.69941945 L1.5,8.7 C1.22385763,8.7 1,8.47614237 1,8.2 L1,8 C1,7.72385763 1.22385763,7.5 1.5,7.5 L9.075,7.49941945 L8.39165922,4.57430951 C8.3700078,4.48168206 8.37536432,4.38547957 8.40609313,4.29679626 Z"})})})),e6=Kt(k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:k.jsx("g",{stroke:"none",children:k.jsx("rect",{x:"1",y:"7.5",width:"14",height:"1.2",rx:".5"})})})),t6={[dr.default]:{strokeColor:ti,fill:"#FFFFFF"},[dr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[dr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[dr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[dr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[dr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var Ko=(e=>(e.eraser="eraser",e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(Ko||{});const n6="freehand",Es={isFreehand:e=>typeof e=="object"&&e!==null&&"type"in e&&e.type===n6},r6=[{icon:Q3,pointer:Ko.feltTipPen,titleKey:"toolbar.pen"},{icon:qK,pointer:Ko.eraser,titleKey:"toolbar.eraser"}],Mq=Z3(r6,5),Rq=({onPointerUp:e})=>{const{t:n}=Kn(),r=Tr();return k.jsx(Bo,{padding:1,children:k.jsx(bi.Col,{gap:1,children:Mq.map((i,o)=>k.jsx(bi.Row,{gap:1,children:i.map((s,a)=>k.jsx(On,{className:gn({fillable:!1}),selected:r.pointer===s.pointer,type:"icon",size:"small",visible:!0,icon:s.icon,title:n(s.titleKey),"aria-label":n(s.titleKey),onPointerDown:()=>{wo(r,Zr.dnd),sn.updatePointerType(r,s.pointer)},onPointerUp:()=>{wo(r,Zr.drawing),e(s.pointer)}},a))},o))})})},kq=[{icon:ZK,title:"toolbar.shape.rectangle",pointer:Et.rectangle},{icon:JK,title:"toolbar.shape.ellipse",pointer:Et.ellipse},{icon:eq,title:"toolbar.shape.triangle",pointer:Et.triangle},{icon:QK,title:"toolbar.shape.terminal",pointer:Ct.terminal},{icon:tq,title:"toolbar.shape.diamond",pointer:Et.diamond},{icon:nq,title:"toolbar.shape.parallelogram",pointer:Et.parallelogram},{icon:rq,title:"toolbar.shape.roundRectangle",pointer:Et.roundRectangle}],bq=Z3(kq,5),Oq=({onPointerUp:e})=>{const n=Tr(),{t:r}=Kn();return k.jsx(Bo,{padding:1,children:k.jsx(bi.Col,{gap:1,children:bq.map((i,o)=>k.jsx(bi.Row,{gap:1,children:i.map((s,a)=>k.jsx(On,{className:gn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:H.isPointer(n,s.pointer),icon:s.icon,title:r(s.title||"toolbar.shape"),"aria-label":r(s.title||"toolbar.shape"),onPointerDown:()=>{wo(n,Zr.dnd),sn.updatePointerType(n,s.pointer)},onPointerUp:()=>{wo(n,Zr.drawing),e(s.pointer)}},a))},o))})})},Iq=[{icon:iq,title:"toolbar.arrow.straight",pointer:Nn.straight},{icon:oq,title:"toolbar.arrow.elbow",pointer:Nn.elbow},{icon:sq,title:"toolbar.arrow.curve",pointer:Nn.curve}],Fq=({onPointerUp:e})=>{const n=Tr(),{t:r}=Kn();return k.jsx(Bo,{padding:1,children:k.jsx(bi.Row,{gap:1,children:Iq.map((i,o)=>k.jsx(On,{className:gn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:H.isPointer(n,i.pointer),icon:i.icon,title:r(i.title),"aria-label":r(i.title),onPointerDown:()=>{wo(n,Zr.drawing),sn.updatePointerType(n,i.pointer)},onPointerUp:()=>{e(i.pointer)}},o))})})};function Pw(){return typeof window<"u"}function Tc(e){return i6(e)?(e.nodeName||"").toLowerCase():"#document"}function Yo(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function ol(e){var n;return(n=(i6(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function i6(e){return Pw()?e instanceof Node||e instanceof Yo(e).Node:!1}function gr(e){return Pw()?e instanceof Element||e instanceof Yo(e).Element:!1}function Qr(e){return Pw()?e instanceof HTMLElement||e instanceof Yo(e).HTMLElement:!1}function rE(e){return!Pw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yo(e).ShadowRoot}function N1(e){const{overflow:n,overflowX:r,overflowY:i,display:o}=bs(e);return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(o)}function Lq(e){return["table","td","th"].includes(Tc(e))}function Sw(e){return[":popover-open",":modal"].some(n=>{try{return e.matches(n)}catch{return!1}})}function J3(e){const n=Tw(),r=gr(e)?bs(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!n&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!n&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(r.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(r.contain||"").includes(i))}function _q(e){let n=iu(e);for(;Qr(n)&&!mc(n);){if(J3(n))return n;if(Sw(n))return null;n=iu(n)}return null}function Tw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function mc(e){return["html","body","#document"].includes(Tc(e))}function bs(e){return Yo(e).getComputedStyle(e)}function Dw(e){return gr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function iu(e){if(Tc(e)==="html")return e;const n=e.assignedSlot||e.parentNode||rE(e)&&e.host||ol(e);return rE(n)?n.host:n}function o6(e){const n=iu(e);return mc(n)?e.ownerDocument?e.ownerDocument.body:e.body:Qr(n)&&N1(n)?n:o6(n)}function ac(e,n,r){var i;n===void 0&&(n=[]),r===void 0&&(r=!0);const o=o6(e),s=o===((i=e.ownerDocument)==null?void 0:i.body),a=Yo(o);if(s){const u=iE(a);return n.concat(a,a.visualViewport||[],N1(o)?o:[],u&&r?ac(u):[])}return n.concat(o,ac(o,[],r))}function iE(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function kf(e){let n=e.activeElement;for(;((r=n)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;n=n.shadowRoot.activeElement}return n}function Vo(e,n){if(!e||!n)return!1;const r=n.getRootNode==null?void 0:n.getRootNode();if(e.contains(n))return!0;if(r&&rE(r)){let i=n;for(;i;){if(e===i)return!0;i=i.parentNode||i.host}}return!1}function s6(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function a6(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(n=>{let{brand:r,version:i}=n;return r+"/"+i}).join(" "):navigator.userAgent}function Nq(e){return e.mozInputSource===0&&e.isTrusted?!0:oE()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Hq(e){return jq()?!1:!oE()&&e.width===0&&e.height===0||oE()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Gq(){return/apple/i.test(navigator.vendor)}function oE(){const e=/android/i;return e.test(s6())||e.test(a6())}function jq(){return a6().includes("jsdom/")}function D5(e,n){return["mouse","pen"].includes(e)}function zq(e){return"nativeEvent"in e}function $q(e){return e.matches("html,body")}function ra(e){return(e==null?void 0:e.ownerDocument)||document}function bx(e,n){if(n==null)return!1;if("composedPath"in e)return e.composedPath().includes(n);const r=e;return r.target!=null&&n.contains(r.target)}function Of(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Wq="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function l6(e){return Qr(e)&&e.matches(Wq)}function Ox(e){e.preventDefault(),e.stopPropagation()}function Vq(e){return e?e.getAttribute("role")==="combobox"&&l6(e):!1}const Iy=Math.min,$f=Math.max,Fy=Math.round,Mv=Math.floor,qa=e=>({x:e,y:e}),Uq={left:"right",right:"left",bottom:"top",top:"bottom"},Xq={start:"end",end:"start"};function A5(e,n,r){return $f(e,Iy(n,r))}function Aw(e,n){return typeof e=="function"?e(n):e}function eh(e){return e.split("-")[0]}function Bw(e){return e.split("-")[1]}function u6(e){return e==="x"?"y":"x"}function c6(e){return e==="y"?"height":"width"}function Tg(e){return["top","bottom"].includes(eh(e))?"y":"x"}function f6(e){return u6(Tg(e))}function Kq(e,n,r){r===void 0&&(r=!1);const i=Bw(e),o=f6(e),s=c6(o);let a=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return n.reference[s]>n.floating[s]&&(a=Ly(a)),[a,Ly(a)]}function qq(e){const n=Ly(e);return[sE(e),n,sE(n)]}function sE(e){return e.replace(/start|end/g,n=>Xq[n])}function Yq(e,n,r){const i=["left","right"],o=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?n?o:i:n?i:o;case"left":case"right":return n?s:a;default:return[]}}function Zq(e,n,r,i){const o=Bw(e);let s=Yq(eh(e),r==="start",i);return o&&(s=s.map(a=>a+"-"+o),n&&(s=s.concat(s.map(sE)))),s}function Ly(e){return e.replace(/left|right|bottom|top/g,n=>Uq[n])}function Qq(e){return{top:0,right:0,bottom:0,left:0,...e}}function Jq(e){return typeof e!="number"?Qq(e):{top:e,right:e,bottom:e,left:e}}function _y(e){const{x:n,y:r,width:i,height:o}=e;return{width:i,height:o,top:r,left:n,right:n+i,bottom:r+o,x:n,y:r}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var eY=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ny=eY.join(","),h6=typeof Element>"u",Dg=h6?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Hy=!h6&&Element.prototype.getRootNode?function(e){var n;return e==null||(n=e.getRootNode)===null||n===void 0?void 0:n.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Gy=function e(n,r){var i;r===void 0&&(r=!0);var o=n==null||(i=n.getAttribute)===null||i===void 0?void 0:i.call(n,"inert"),s=o===""||o==="true",a=s||r&&n&&e(n.parentNode);return a},tY=function(n){var r,i=n==null||(r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"contenteditable");return i===""||i==="true"},nY=function(n,r,i){if(Gy(n))return[];var o=Array.prototype.slice.apply(n.querySelectorAll(Ny));return r&&Dg.call(n,Ny)&&o.unshift(n),o=o.filter(i),o},rY=function e(n,r,i){for(var o=[],s=Array.from(n);s.length;){var a=s.shift();if(!Gy(a,!1))if(a.tagName==="SLOT"){var u=a.assignedElements(),f=u.length?u:a.children,d=e(f,!0,i);i.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else{var g=Dg.call(a,Ny);g&&i.filter(a)&&(r||!n.includes(a))&&o.push(a);var p=a.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(a),y=!Gy(p,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(a));if(p&&y){var w=e(p===!0?a.children:p.children,!0,i);i.flatten?o.push.apply(o,w):o.push({scopeParent:a,candidates:w})}else s.unshift.apply(s,a.children)}}return o},d6=function(n){return!isNaN(parseInt(n.getAttribute("tabindex"),10))},g6=function(n){if(!n)throw new Error("No node provided");return n.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(n.tagName)||tY(n))&&!d6(n)?0:n.tabIndex},iY=function(n,r){var i=g6(n);return i<0&&r&&!d6(n)?0:i},oY=function(n,r){return n.tabIndex===r.tabIndex?n.documentOrder-r.documentOrder:n.tabIndex-r.tabIndex},p6=function(n){return n.tagName==="INPUT"},sY=function(n){return p6(n)&&n.type==="hidden"},aY=function(n){var r=n.tagName==="DETAILS"&&Array.prototype.slice.apply(n.children).some(function(i){return i.tagName==="SUMMARY"});return r},lY=function(n,r){for(var i=0;i<n.length;i++)if(n[i].checked&&n[i].form===r)return n[i]},uY=function(n){if(!n.name)return!0;var r=n.form||Hy(n),i=function(u){return r.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=i(window.CSS.escape(n.name));else try{o=i(n.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=lY(o,n.form);return!s||s===n},cY=function(n){return p6(n)&&n.type==="radio"},fY=function(n){return cY(n)&&!uY(n)},hY=function(n){var r,i=n&&Hy(n),o=(r=i)===null||r===void 0?void 0:r.host,s=!1;if(i&&i!==n){var a,u,f;for(s=!!((a=o)!==null&&a!==void 0&&(u=a.ownerDocument)!==null&&u!==void 0&&u.contains(o)||n!=null&&(f=n.ownerDocument)!==null&&f!==void 0&&f.contains(n));!s&&o;){var d,g,p;i=Hy(o),o=(d=i)===null||d===void 0?void 0:d.host,s=!!((g=o)!==null&&g!==void 0&&(p=g.ownerDocument)!==null&&p!==void 0&&p.contains(o))}}return s},B5=function(n){var r=n.getBoundingClientRect(),i=r.width,o=r.height;return i===0&&o===0},dY=function(n,r){var i=r.displayCheck,o=r.getShadowRoot;if(getComputedStyle(n).visibility==="hidden")return!0;var s=Dg.call(n,"details>summary:first-of-type"),a=s?n.parentElement:n;if(Dg.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof o=="function"){for(var u=n;n;){var f=n.parentElement,d=Hy(n);if(f&&!f.shadowRoot&&o(f)===!0)return B5(n);n.assignedSlot?n=n.assignedSlot:!f&&d!==n.ownerDocument?n=d.host:n=f}n=u}if(hY(n))return!n.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return B5(n);return!1},gY=function(n){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(n.tagName))for(var r=n.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var i=0;i<r.children.length;i++){var o=r.children.item(i);if(o.tagName==="LEGEND")return Dg.call(r,"fieldset[disabled] *")?!0:!o.contains(n)}return!0}r=r.parentElement}return!1},pY=function(n,r){return!(r.disabled||Gy(r)||sY(r)||dY(r,n)||aY(r)||gY(r))},aE=function(n,r){return!(fY(r)||g6(r)<0||!pY(n,r))},mY=function(n){var r=parseInt(n.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},vY=function e(n){var r=[],i=[];return n.forEach(function(o,s){var a=!!o.scopeParent,u=a?o.scopeParent:o,f=iY(u,a),d=a?e(o.candidates):u;f===0?a?r.push.apply(r,d):r.push(u):i.push({documentOrder:s,tabIndex:f,item:o,isScope:a,content:d})}),i.sort(oY).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(r)},Mw=function(n,r){r=r||{};var i;return r.getShadowRoot?i=rY([n],r.includeContainer,{filter:aE.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:mY}):i=nY(n,r.includeContainer,aE.bind(null,r)),vY(i)},yY=function(n,r){if(r=r||{},!n)throw new Error("No node provided");return Dg.call(n,Ny)===!1?!1:aE(r,n)};function M5(e,n,r){let{reference:i,floating:o}=e;const s=Tg(n),a=f6(n),u=c6(a),f=eh(n),d=s==="y",g=i.x+i.width/2-o.width/2,p=i.y+i.height/2-o.height/2,y=i[u]/2-o[u]/2;let w;switch(f){case"top":w={x:g,y:i.y-o.height};break;case"bottom":w={x:g,y:i.y+i.height};break;case"right":w={x:i.x+i.width,y:p};break;case"left":w={x:i.x-o.width,y:p};break;default:w={x:i.x,y:i.y}}switch(Bw(n)){case"start":w[a]-=y*(r&&d?-1:1);break;case"end":w[a]+=y*(r&&d?-1:1);break}return w}const wY=async(e,n,r)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:a}=r,u=s.filter(Boolean),f=await(a.isRTL==null?void 0:a.isRTL(n));let d=await a.getElementRects({reference:e,floating:n,strategy:o}),{x:g,y:p}=M5(d,i,f),y=i,w={},E=0;for(let S=0;S<u.length;S++){const{name:D,fn:A}=u[S],{x:P,y:b,data:R,reset:L}=await A({x:g,y:p,initialPlacement:i,placement:y,strategy:o,middlewareData:w,rects:d,platform:a,elements:{reference:e,floating:n}});g=P??g,p=b??p,w={...w,[D]:{...w[D],...R}},L&&E<=50&&(E++,typeof L=="object"&&(L.placement&&(y=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:e,floating:n,strategy:o}):L.rects),{x:g,y:p}=M5(d,y,f)),S=-1)}return{x:g,y:p,placement:y,strategy:o,middlewareData:w}};async function m6(e,n){var r;n===void 0&&(n={});const{x:i,y:o,platform:s,rects:a,elements:u,strategy:f}=e,{boundary:d="clippingAncestors",rootBoundary:g="viewport",elementContext:p="floating",altBoundary:y=!1,padding:w=0}=Aw(n,e),E=Jq(w),D=u[y?p==="floating"?"reference":"floating":p],A=_y(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(D)))==null||r?D:D.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(u.floating)),boundary:d,rootBoundary:g,strategy:f})),P=p==="floating"?{x:i,y:o,width:a.floating.width,height:a.floating.height}:a.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u.floating)),R=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},L=_y(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:P,offsetParent:b,strategy:f}):P);return{top:(A.top-L.top+E.top)/R.y,bottom:(L.bottom-A.bottom+E.bottom)/R.y,left:(A.left-L.left+E.left)/R.x,right:(L.right-A.right+E.right)/R.x}}const xY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var r,i;const{placement:o,middlewareData:s,rects:a,initialPlacement:u,platform:f,elements:d}=n,{mainAxis:g=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:S=!0,...D}=Aw(e,n);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const A=eh(o),P=Tg(u),b=eh(u)===u,R=await(f.isRTL==null?void 0:f.isRTL(d.floating)),L=y||(b||!S?[Ly(u)]:qq(u)),V=E!=="none";!y&&V&&L.push(...Zq(u,S,E,R));const Z=[u,...L],ne=await m6(n,D),le=[];let de=((i=s.flip)==null?void 0:i.overflows)||[];if(g&&le.push(ne[A]),p){const ye=Kq(o,a,R);le.push(ne[ye[0]],ne[ye[1]])}if(de=[...de,{placement:o,overflows:le}],!le.every(ye=>ye<=0)){var Pe,ue;const ye=(((Pe=s.flip)==null?void 0:Pe.index)||0)+1,W=Z[ye];if(W)return{data:{index:ye,overflows:de},reset:{placement:W}};let O=(ue=de.filter(N=>N.overflows[0]<=0).sort((N,F)=>N.overflows[1]-F.overflows[1])[0])==null?void 0:ue.placement;if(!O)switch(w){case"bestFit":{var he;const N=(he=de.filter(F=>{if(V){const j=Tg(F.placement);return j===P||j==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(j=>j>0).reduce((j,U)=>j+U,0)]).sort((F,j)=>F[1]-j[1])[0])==null?void 0:he[0];N&&(O=N);break}case"initialPlacement":O=u;break}if(o!==O)return{reset:{placement:O}}}return{}}}};async function CY(e,n){const{placement:r,platform:i,elements:o}=e,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),a=eh(r),u=Bw(r),f=Tg(r)==="y",d=["left","top"].includes(a)?-1:1,g=s&&f?-1:1,p=Aw(n,e);let{mainAxis:y,crossAxis:w,alignmentAxis:E}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof E=="number"&&(w=u==="end"?E*-1:E),f?{x:w*g,y:y*d}:{x:y*d,y:w*g}}const EY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var r,i;const{x:o,y:s,placement:a,middlewareData:u}=n,f=await CY(n,e);return a===((r=u.offset)==null?void 0:r.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:o+f.x,y:s+f.y,data:{...f,placement:a}}}}},PY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:r,y:i,placement:o}=n,{mainAxis:s=!0,crossAxis:a=!1,limiter:u={fn:D=>{let{x:A,y:P}=D;return{x:A,y:P}}},...f}=Aw(e,n),d={x:r,y:i},g=await m6(n,f),p=Tg(eh(o)),y=u6(p);let w=d[y],E=d[p];if(s){const D=y==="y"?"top":"left",A=y==="y"?"bottom":"right",P=w+g[D],b=w-g[A];w=A5(P,w,b)}if(a){const D=p==="y"?"top":"left",A=p==="y"?"bottom":"right",P=E+g[D],b=E-g[A];E=A5(P,E,b)}const S=u.fn({...n,[y]:w,[p]:E});return{...S,data:{x:S.x-r,y:S.y-i,enabled:{[y]:s,[p]:a}}}}}};function v6(e){const n=bs(e);let r=parseFloat(n.width)||0,i=parseFloat(n.height)||0;const o=Qr(e),s=o?e.offsetWidth:r,a=o?e.offsetHeight:i,u=Fy(r)!==s||Fy(i)!==a;return u&&(r=s,i=a),{width:r,height:i,$:u}}function eP(e){return gr(e)?e:e.contextElement}function fg(e){const n=eP(e);if(!Qr(n))return qa(1);const r=n.getBoundingClientRect(),{width:i,height:o,$:s}=v6(n);let a=(s?Fy(r.width):r.width)/i,u=(s?Fy(r.height):r.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!u||!Number.isFinite(u))&&(u=1),{x:a,y:u}}const SY=qa(0);function y6(e){const n=Yo(e);return!Tw()||!n.visualViewport?SY:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function TY(e,n,r){return n===void 0&&(n=!1),!r||n&&r!==Yo(e)?!1:n}function th(e,n,r,i){n===void 0&&(n=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),s=eP(e);let a=qa(1);n&&(i?gr(i)&&(a=fg(i)):a=fg(e));const u=TY(s,r,i)?y6(s):qa(0);let f=(o.left+u.x)/a.x,d=(o.top+u.y)/a.y,g=o.width/a.x,p=o.height/a.y;if(s){const y=Yo(s),w=i&&gr(i)?Yo(i):i;let E=y,S=iE(E);for(;S&&i&&w!==E;){const D=fg(S),A=S.getBoundingClientRect(),P=bs(S),b=A.left+(S.clientLeft+parseFloat(P.paddingLeft))*D.x,R=A.top+(S.clientTop+parseFloat(P.paddingTop))*D.y;f*=D.x,d*=D.y,g*=D.x,p*=D.y,f+=b,d+=R,E=Yo(S),S=iE(E)}}return _y({width:g,height:p,x:f,y:d})}function tP(e,n){const r=Dw(e).scrollLeft;return n?n.left+r:th(ol(e)).left+r}function w6(e,n,r){r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=i.left+n.scrollLeft-(r?0:tP(e,i)),s=i.top+n.scrollTop;return{x:o,y:s}}function DY(e){let{elements:n,rect:r,offsetParent:i,strategy:o}=e;const s=o==="fixed",a=ol(i),u=n?Sw(n.floating):!1;if(i===a||u&&s)return r;let f={scrollLeft:0,scrollTop:0},d=qa(1);const g=qa(0),p=Qr(i);if((p||!p&&!s)&&((Tc(i)!=="body"||N1(a))&&(f=Dw(i)),Qr(i))){const w=th(i);d=fg(i),g.x=w.x+i.clientLeft,g.y=w.y+i.clientTop}const y=a&&!p&&!s?w6(a,f,!0):qa(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-f.scrollLeft*d.x+g.x+y.x,y:r.y*d.y-f.scrollTop*d.y+g.y+y.y}}function AY(e){return Array.from(e.getClientRects())}function BY(e){const n=ol(e),r=Dw(e),i=e.ownerDocument.body,o=$f(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth),s=$f(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight);let a=-r.scrollLeft+tP(e);const u=-r.scrollTop;return bs(i).direction==="rtl"&&(a+=$f(n.clientWidth,i.clientWidth)-o),{width:o,height:s,x:a,y:u}}function MY(e,n){const r=Yo(e),i=ol(e),o=r.visualViewport;let s=i.clientWidth,a=i.clientHeight,u=0,f=0;if(o){s=o.width,a=o.height;const d=Tw();(!d||d&&n==="fixed")&&(u=o.offsetLeft,f=o.offsetTop)}return{width:s,height:a,x:u,y:f}}function RY(e,n){const r=th(e,!0,n==="fixed"),i=r.top+e.clientTop,o=r.left+e.clientLeft,s=Qr(e)?fg(e):qa(1),a=e.clientWidth*s.x,u=e.clientHeight*s.y,f=o*s.x,d=i*s.y;return{width:a,height:u,x:f,y:d}}function R5(e,n,r){let i;if(n==="viewport")i=MY(e,r);else if(n==="document")i=BY(ol(e));else if(gr(n))i=RY(n,r);else{const o=y6(e);i={x:n.x-o.x,y:n.y-o.y,width:n.width,height:n.height}}return _y(i)}function x6(e,n){const r=iu(e);return r===n||!gr(r)||mc(r)?!1:bs(r).position==="fixed"||x6(r,n)}function kY(e,n){const r=n.get(e);if(r)return r;let i=ac(e,[],!1).filter(u=>gr(u)&&Tc(u)!=="body"),o=null;const s=bs(e).position==="fixed";let a=s?iu(e):e;for(;gr(a)&&!mc(a);){const u=bs(a),f=J3(a);!f&&u.position==="fixed"&&(o=null),(s?!f&&!o:!f&&u.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||N1(a)&&!f&&x6(e,a))?i=i.filter(g=>g!==a):o=u,a=iu(a)}return n.set(e,i),i}function bY(e){let{element:n,boundary:r,rootBoundary:i,strategy:o}=e;const a=[...r==="clippingAncestors"?Sw(n)?[]:kY(n,this._c):[].concat(r),i],u=a[0],f=a.reduce((d,g)=>{const p=R5(n,g,o);return d.top=$f(p.top,d.top),d.right=Iy(p.right,d.right),d.bottom=Iy(p.bottom,d.bottom),d.left=$f(p.left,d.left),d},R5(n,u,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function OY(e){const{width:n,height:r}=v6(e);return{width:n,height:r}}function IY(e,n,r){const i=Qr(n),o=ol(n),s=r==="fixed",a=th(e,!0,s,n);let u={scrollLeft:0,scrollTop:0};const f=qa(0);if(i||!i&&!s)if((Tc(n)!=="body"||N1(o))&&(u=Dw(n)),i){const y=th(n,!0,s,n);f.x=y.x+n.clientLeft,f.y=y.y+n.clientTop}else o&&(f.x=tP(o));const d=o&&!i&&!s?w6(o,u):qa(0),g=a.left+u.scrollLeft-f.x-d.x,p=a.top+u.scrollTop-f.y-d.y;return{x:g,y:p,width:a.width,height:a.height}}function Ix(e){return bs(e).position==="static"}function k5(e,n){if(!Qr(e)||bs(e).position==="fixed")return null;if(n)return n(e);let r=e.offsetParent;return ol(e)===r&&(r=r.ownerDocument.body),r}function C6(e,n){const r=Yo(e);if(Sw(e))return r;if(!Qr(e)){let o=iu(e);for(;o&&!mc(o);){if(gr(o)&&!Ix(o))return o;o=iu(o)}return r}let i=k5(e,n);for(;i&&Lq(i)&&Ix(i);)i=k5(i,n);return i&&mc(i)&&Ix(i)&&!J3(i)?r:i||_q(e)||r}const FY=async function(e){const n=this.getOffsetParent||C6,r=this.getDimensions,i=await r(e.floating);return{reference:IY(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function LY(e){return bs(e).direction==="rtl"}const _Y={convertOffsetParentRelativeRectToViewportRelativeRect:DY,getDocumentElement:ol,getClippingRect:bY,getOffsetParent:C6,getElementRects:FY,getClientRects:AY,getDimensions:OY,getScale:fg,isElement:gr,isRTL:LY};function E6(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function NY(e,n){let r=null,i;const o=ol(e);function s(){var u;clearTimeout(i),(u=r)==null||u.disconnect(),r=null}function a(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),s();const d=e.getBoundingClientRect(),{left:g,top:p,width:y,height:w}=d;if(u||n(),!y||!w)return;const E=Mv(p),S=Mv(o.clientWidth-(g+y)),D=Mv(o.clientHeight-(p+w)),A=Mv(g),b={rootMargin:-E+"px "+-S+"px "+-D+"px "+-A+"px",threshold:$f(0,Iy(1,f))||1};let R=!0;function L(V){const Z=V[0].intersectionRatio;if(Z!==f){if(!R)return a();Z?a(!1,Z):i=setTimeout(()=>{a(!1,1e-7)},1e3)}Z===1&&!E6(d,e.getBoundingClientRect())&&a(),R=!1}try{r=new IntersectionObserver(L,{...b,root:o.ownerDocument})}catch{r=new IntersectionObserver(L,b)}r.observe(e)}return a(!0),s}function HY(e,n,r,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,d=eP(e),g=o||s?[...d?ac(d):[],...ac(n)]:[];g.forEach(A=>{o&&A.addEventListener("scroll",r,{passive:!0}),s&&A.addEventListener("resize",r)});const p=d&&u?NY(d,r):null;let y=-1,w=null;a&&(w=new ResizeObserver(A=>{let[P]=A;P&&P.target===d&&w&&(w.unobserve(n),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var b;(b=w)==null||b.observe(n)})),r()}),d&&!f&&w.observe(d),w.observe(n));let E,S=f?th(e):null;f&&D();function D(){const A=th(e);S&&!E6(S,A)&&r(),S=A,E=requestAnimationFrame(D)}return r(),()=>{var A;g.forEach(P=>{o&&P.removeEventListener("scroll",r),s&&P.removeEventListener("resize",r)}),p==null||p(),(A=w)==null||A.disconnect(),w=null,f&&cancelAnimationFrame(E)}}const GY=EY,jY=PY,zY=xY,$Y=(e,n,r)=>{const i=new Map,o={platform:_Y,...r},s={...o.platform,_c:i};return wY(e,n,{...o,platform:s})};var Yv=typeof document<"u"?K.useLayoutEffect:K.useEffect;function jy(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let r,i,o;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==n.length)return!1;for(i=r;i--!==0;)if(!jy(e[i],n[i]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){const s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!jy(e[s],n[s]))return!1}return!0}return e!==e&&n!==n}function P6(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function b5(e,n){const r=P6(e);return Math.round(n*r)/r}function Fx(e){const n=K.useRef(e);return Yv(()=>{n.current=e}),n}function WY(e){e===void 0&&(e={});const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:s,floating:a}={},transform:u=!0,whileElementsMounted:f,open:d}=e,[g,p]=K.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[y,w]=K.useState(i);jy(y,i)||w(i);const[E,S]=K.useState(null),[D,A]=K.useState(null),P=K.useCallback(F=>{F!==V.current&&(V.current=F,S(F))},[]),b=K.useCallback(F=>{F!==Z.current&&(Z.current=F,A(F))},[]),R=s||E,L=a||D,V=K.useRef(null),Z=K.useRef(null),ne=K.useRef(g),le=f!=null,de=Fx(f),Pe=Fx(o),ue=Fx(d),he=K.useCallback(()=>{if(!V.current||!Z.current)return;const F={placement:n,strategy:r,middleware:y};Pe.current&&(F.platform=Pe.current),$Y(V.current,Z.current,F).then(j=>{const U={...j,isPositioned:ue.current!==!1};ye.current&&!jy(ne.current,U)&&(ne.current=U,t3.flushSync(()=>{p(U)}))})},[y,n,r,Pe,ue]);Yv(()=>{d===!1&&ne.current.isPositioned&&(ne.current.isPositioned=!1,p(F=>({...F,isPositioned:!1})))},[d]);const ye=K.useRef(!1);Yv(()=>(ye.current=!0,()=>{ye.current=!1}),[]),Yv(()=>{if(R&&(V.current=R),L&&(Z.current=L),R&&L){if(de.current)return de.current(R,L,he);he()}},[R,L,he,de,le]);const W=K.useMemo(()=>({reference:V,floating:Z,setReference:P,setFloating:b}),[P,b]),O=K.useMemo(()=>({reference:R,floating:L}),[R,L]),N=K.useMemo(()=>{const F={position:r,left:0,top:0};if(!O.floating)return F;const j=b5(O.floating,g.x),U=b5(O.floating,g.y);return u?{...F,transform:"translate("+j+"px, "+U+"px)",...P6(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:j,top:U}},[r,u,O.floating,g.x,g.y]);return K.useMemo(()=>({...g,update:he,refs:W,elements:O,floatingStyles:N}),[g,he,W,O,N])}const nP=(e,n)=>({...GY(e),options:[e,n]}),VY=(e,n)=>({...jY(e),options:[e,n]}),rP=(e,n)=>({...zY(e),options:[e,n]});function Rw(e){return K.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})},e)}const S6={...X9},UY=S6.useInsertionEffect,XY=UY||(e=>e());function ec(e){const n=K.useRef(()=>{});return XY(()=>{n.current=e}),K.useCallback(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.current==null?void 0:n.current(...i)},[])}var qo=typeof document<"u"?K.useLayoutEffect:K.useEffect;function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},m1.apply(this,arguments)}let O5=!1,KY=0;const I5=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+KY++;function qY(){const[e,n]=K.useState(()=>O5?I5():void 0);return qo(()=>{e==null&&n(I5())},[]),K.useEffect(()=>{O5=!0},[]),e}const YY=S6.useId,H1=YY||qY;function ZY(){const e=new Map;return{emit(n,r){var i;(i=e.get(n))==null||i.forEach(o=>o(r))},on(n,r){e.set(n,[...e.get(n)||[],r])},off(n,r){var i;e.set(n,((i=e.get(n))==null?void 0:i.filter(o=>o!==r))||[])}}}const QY=K.createContext(null),JY=K.createContext(null),T6=()=>{var e;return((e=K.useContext(QY))==null?void 0:e.id)||null},iP=()=>K.useContext(JY);function v1(e){return"data-floating-ui-"+e}function Lx(e){const n=K.useRef(e);return qo(()=>{n.current=e}),n}let F5=0;function Xd(e,n){n===void 0&&(n={});const{preventScroll:r=!1,cancelPrevious:i=!0,sync:o=!1}=n;i&&cancelAnimationFrame(F5);const s=()=>e==null?void 0:e.focus({preventScroll:r});o?s():F5=requestAnimationFrame(s)}function eZ(e,n){var r;let i=[],o=(r=e.find(s=>s.id===n))==null?void 0:r.parentId;for(;o;){const s=e.find(a=>a.id===o);o=s==null?void 0:s.parentId,s&&(i=i.concat(s))}return i}function Lp(e,n){let r=e.filter(o=>{var s;return o.parentId===n&&((s=o.context)==null?void 0:s.open)}),i=r;for(;i.length;)i=e.filter(o=>{var s;return(s=i)==null?void 0:s.some(a=>{var u;return o.parentId===a.id&&((u=o.context)==null?void 0:u.open)})}),r=r.concat(i);return r}let Kd=new WeakMap,Rv=new WeakSet,kv={},_x=0;const tZ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,D6=e=>e&&(e.host||D6(e.parentNode)),nZ=(e,n)=>n.map(r=>{if(e.contains(r))return r;const i=D6(r);return e.contains(i)?i:null}).filter(r=>r!=null);function rZ(e,n,r,i){const o="data-floating-ui-inert",s=i?"inert":r?"aria-hidden":null,a=nZ(n,e),u=new Set,f=new Set(a),d=[];kv[o]||(kv[o]=new WeakMap);const g=kv[o];a.forEach(p),y(n),u.clear();function p(w){!w||u.has(w)||(u.add(w),w.parentNode&&p(w.parentNode))}function y(w){!w||f.has(w)||[].forEach.call(w.children,E=>{if(Tc(E)!=="script")if(u.has(E))y(E);else{const S=s?E.getAttribute(s):null,D=S!==null&&S!=="false",A=(Kd.get(E)||0)+1,P=(g.get(E)||0)+1;Kd.set(E,A),g.set(E,P),d.push(E),A===1&&D&&Rv.add(E),P===1&&E.setAttribute(o,""),!D&&s&&E.setAttribute(s,"true")}})}return _x++,()=>{d.forEach(w=>{const E=(Kd.get(w)||0)-1,S=(g.get(w)||0)-1;Kd.set(w,E),g.set(w,S),E||(!Rv.has(w)&&s&&w.removeAttribute(s),Rv.delete(w)),S||w.removeAttribute(o)}),_x--,_x||(Kd=new WeakMap,Kd=new WeakMap,Rv=new WeakSet,kv={})}}function L5(e,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);const i=ra(e[0]).body;return rZ(e.concat(Array.from(i.querySelectorAll("[aria-live]"))),i,n,r)}const y1=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function A6(e,n){const r=Mw(e,y1());n==="prev"&&r.reverse();const i=r.indexOf(kf(ra(e)));return r.slice(i+1)[0]}function B6(){return A6(document.body,"next")}function M6(){return A6(document.body,"prev")}function _p(e,n){const r=n||e.currentTarget,i=e.relatedTarget;return!i||!Vo(r,i)}function iZ(e){Mw(e,y1()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function _5(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{const i=r.dataset.tabindex;delete r.dataset.tabindex,i?r.setAttribute("tabindex",i):r.removeAttribute("tabindex")})}const kw={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let oZ;function N5(e){e.key==="Tab"&&(e.target,clearTimeout(oZ))}const zy=K.forwardRef(function(n,r){const[i,o]=K.useState();qo(()=>(Gq()&&o("button"),document.addEventListener("keydown",N5),()=>{document.removeEventListener("keydown",N5)}),[]);const s={ref:r,tabIndex:0,role:i,"aria-hidden":i?void 0:!0,[v1("focus-guard")]:"",style:kw};return K.createElement("span",m1({},n,s))}),R6=K.createContext(null),H5=v1("portal");function sZ(e){e===void 0&&(e={});const{id:n,root:r}=e,i=H1(),o=b6(),[s,a]=K.useState(null),u=K.useRef(null);return qo(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{u.current=null})},[s]),qo(()=>{if(!i||u.current)return;const f=n?document.getElementById(n):null;if(!f)return;const d=document.createElement("div");d.id=i,d.setAttribute(H5,""),f.appendChild(d),u.current=d,a(d)},[n,i]),qo(()=>{if(r===null||!i||u.current)return;let f=r||(o==null?void 0:o.portalNode);f&&!gr(f)&&(f=f.current),f=f||document.body;let d=null;n&&(d=document.createElement("div"),d.id=n,f.appendChild(d));const g=document.createElement("div");g.id=i,g.setAttribute(H5,""),f=d||f,f.appendChild(g),u.current=g,a(g)},[n,r,i,o]),s}function k6(e){const{children:n,id:r,root:i,preserveTabOrder:o=!0}=e,s=sZ({id:r,root:i}),[a,u]=K.useState(null),f=K.useRef(null),d=K.useRef(null),g=K.useRef(null),p=K.useRef(null),y=a==null?void 0:a.modal,w=a==null?void 0:a.open,E=!!a&&!a.modal&&a.open&&o&&!!(i||s);return K.useEffect(()=>{if(!s||!o||y)return;function S(D){s&&_p(D)&&(D.type==="focusin"?_5:iZ)(s)}return s.addEventListener("focusin",S,!0),s.addEventListener("focusout",S,!0),()=>{s.removeEventListener("focusin",S,!0),s.removeEventListener("focusout",S,!0)}},[s,o,y]),K.useEffect(()=>{s&&(w||_5(s))},[w,s]),K.createElement(R6.Provider,{value:K.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:f,afterOutsideRef:d,beforeInsideRef:g,afterInsideRef:p,portalNode:s,setFocusManagerState:u}),[o,s])},E&&s&&K.createElement(zy,{"data-type":"outside",ref:f,onFocus:S=>{if(_p(S,s)){var D;(D=g.current)==null||D.focus()}else{const A=M6()||(a==null?void 0:a.refs.domReference.current);A==null||A.focus()}}}),E&&s&&K.createElement("span",{"aria-owns":s.id,style:kw}),s&&t3.createPortal(n,s),E&&s&&K.createElement(zy,{"data-type":"outside",ref:d,onFocus:S=>{if(_p(S,s)){var D;(D=p.current)==null||D.focus()}else{const A=B6()||(a==null?void 0:a.refs.domReference.current);A==null||A.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,S.nativeEvent,"focus-out"))}}}))}const b6=()=>K.useContext(R6),lE="data-floating-ui-focusable";function aZ(e){return e?e.hasAttribute(lE)?e:e.querySelector("["+lE+"]")||e:null}const G5=20;let bf=[];function Nx(e){bf=bf.filter(r=>r.isConnected);let n=e;if(!(!n||Tc(n)==="body")){if(!yY(n,y1())){const r=Mw(n,y1())[0];r&&(n=r)}bf.push(n),bf.length>G5&&(bf=bf.slice(-G5))}}function j5(){return bf.slice().reverse().find(e=>e.isConnected)}const lZ=K.forwardRef(function(n,r){return K.createElement("button",m1({},n,{type:"button",ref:r,tabIndex:-1,style:kw}))});function O6(e){const{context:n,children:r,disabled:i=!1,order:o=["content"],guards:s=!0,initialFocus:a=0,returnFocus:u=!0,restoreFocus:f=!1,modal:d=!0,visuallyHiddenDismiss:g=!1,closeOnFocusOut:p=!0}=e,{open:y,refs:w,nodeId:E,onOpenChange:S,events:D,dataRef:A,floatingId:P,elements:{domReference:b,floating:R}}=n,L=typeof a=="number"&&a<0,V=Vq(b)&&L,Z=tZ()?s:!0,ne=Lx(o),le=Lx(a),de=Lx(u),Pe=iP(),ue=b6(),he=K.useRef(null),ye=K.useRef(null),W=K.useRef(!1),O=K.useRef(!1),N=K.useRef(-1),F=ue!=null,j=aZ(R),U=ec(function(se){return se===void 0&&(se=j),se?Mw(se,y1()):[]}),I=ec(se=>{const Ee=U(se);return ne.current.map(ve=>b&&ve==="reference"?b:j&&ve==="floating"?j:Ee).filter(Boolean).flat()});K.useEffect(()=>{if(i||!d)return;function se(ve){if(ve.key==="Tab"){Vo(j,kf(ra(j)))&&U().length===0&&!V&&Ox(ve);const be=I(),Oe=Of(ve);ne.current[0]==="reference"&&Oe===b&&(Ox(ve),ve.shiftKey?Xd(be[be.length-1]):Xd(be[1])),ne.current[1]==="floating"&&Oe===j&&ve.shiftKey&&(Ox(ve),Xd(be[0]))}}const Ee=ra(j);return Ee.addEventListener("keydown",se),()=>{Ee.removeEventListener("keydown",se)}},[i,b,j,d,ne,V,U,I]),K.useEffect(()=>{if(i||!R)return;function se(Ee){const ve=Of(Ee),Oe=U().indexOf(ve);Oe!==-1&&(N.current=Oe)}return R.addEventListener("focusin",se),()=>{R.removeEventListener("focusin",se)}},[i,R,U]),K.useEffect(()=>{if(i||!p)return;function se(){O.current=!0,setTimeout(()=>{O.current=!1})}function Ee(ve){const be=ve.relatedTarget;queueMicrotask(()=>{const Oe=!(Vo(b,be)||Vo(R,be)||Vo(be,R)||Vo(ue==null?void 0:ue.portalNode,be)||be!=null&&be.hasAttribute(v1("focus-guard"))||Pe&&(Lp(Pe.nodesRef.current,E).find(ie=>{var De,Re;return Vo((De=ie.context)==null?void 0:De.elements.floating,be)||Vo((Re=ie.context)==null?void 0:Re.elements.domReference,be)})||eZ(Pe.nodesRef.current,E).find(ie=>{var De,Re;return((De=ie.context)==null?void 0:De.elements.floating)===be||((Re=ie.context)==null?void 0:Re.elements.domReference)===be})));if(f&&Oe&&kf(ra(j))===ra(j).body){Qr(j)&&j.focus();const ie=N.current,De=U(),Re=De[ie]||De[De.length-1]||j;Qr(Re)&&Re.focus()}(V||!d)&&be&&Oe&&!O.current&&be!==j5()&&(W.current=!0,S(!1,ve,"focus-out"))})}if(R&&Qr(b))return b.addEventListener("focusout",Ee),b.addEventListener("pointerdown",se),R.addEventListener("focusout",Ee),()=>{b.removeEventListener("focusout",Ee),b.removeEventListener("pointerdown",se),R.removeEventListener("focusout",Ee)}},[i,b,R,j,d,E,Pe,ue,S,p,f,U,V]),K.useEffect(()=>{var se;if(i)return;const Ee=Array.from((ue==null||(se=ue.portalNode)==null?void 0:se.querySelectorAll("["+v1("portal")+"]"))||[]);if(R){const ve=[R,...Ee,he.current,ye.current,ne.current.includes("reference")||V?b:null].filter(Oe=>Oe!=null),be=d||V?L5(ve,Z,!Z):L5(ve);return()=>{be()}}},[i,b,R,d,ne,ue,V,Z]),qo(()=>{if(i||!Qr(j))return;const se=ra(j),Ee=kf(se);queueMicrotask(()=>{const ve=I(j),be=le.current,Oe=(typeof be=="number"?ve[be]:be.current)||j,ie=Vo(j,Ee);!L&&!ie&&y&&Xd(Oe,{preventScroll:Oe===j})})},[i,y,j,L,I,le]),qo(()=>{if(i||!j)return;let se=!1;const Ee=ra(j),ve=kf(Ee);let Oe=A.current.openEvent;Nx(ve);function ie(Ie){let{open:ct,reason:Ne,event:yt,nested:lt}=Ie;ct&&(Oe=yt),Ne==="escape-key"&&w.domReference.current&&Nx(w.domReference.current),Ne==="hover"&&yt.type==="mouseleave"&&(W.current=!0),Ne==="outside-press"&&(lt?(W.current=!1,se=!0):W.current=!(Nq(yt)||Hq(yt)))}D.on("openchange",ie);const De=Ee.createElement("span");De.setAttribute("tabindex","-1"),De.setAttribute("aria-hidden","true"),Object.assign(De.style,kw),F&&b&&b.insertAdjacentElement("afterend",De);function Re(){return typeof de.current=="boolean"?j5()||De:de.current.current||De}return()=>{D.off("openchange",ie);const Ie=kf(Ee),ct=Vo(R,Ie)||Pe&&Lp(Pe.nodesRef.current,E).some(lt=>{var Qe;return Vo((Qe=lt.context)==null?void 0:Qe.elements.floating,Ie)});(ct||Oe&&["click","mousedown"].includes(Oe.type))&&w.domReference.current&&Nx(w.domReference.current);const yt=Re();queueMicrotask(()=>{de.current&&!W.current&&Qr(yt)&&(!(yt!==Ie&&Ie!==Ee.body)||ct)&&yt.focus({preventScroll:se}),De.remove()})}},[i,R,j,de,A,w,D,Pe,E,F,b]),K.useEffect(()=>{queueMicrotask(()=>{W.current=!1})},[i]),qo(()=>{if(!i&&ue)return ue.setFocusManagerState({modal:d,closeOnFocusOut:p,open:y,onOpenChange:S,refs:w}),()=>{ue.setFocusManagerState(null)}},[i,ue,d,y,S,w,p]),qo(()=>{if(i||!j||typeof MutationObserver!="function"||L)return;const se=()=>{const ve=j.getAttribute("tabindex"),be=U(),Oe=kf(ra(R)),ie=be.indexOf(Oe);ie!==-1&&(N.current=ie),ne.current.includes("floating")||Oe!==w.domReference.current&&be.length===0?ve!=="0"&&j.setAttribute("tabindex","0"):ve!=="-1"&&j.setAttribute("tabindex","-1")};se();const Ee=new MutationObserver(se);return Ee.observe(j,{childList:!0,subtree:!0,attributes:!0}),()=>{Ee.disconnect()}},[i,R,j,w,ne,U,L]);function Q(se){return i||!g||!d?null:K.createElement(lZ,{ref:se==="start"?he:ye,onClick:Ee=>S(!1,Ee.nativeEvent)},typeof g=="string"?g:"Dismiss")}const ee=!i&&Z&&(d?!V:!0)&&(F||d);return K.createElement(K.Fragment,null,ee&&K.createElement(zy,{"data-type":"inside",ref:ue==null?void 0:ue.beforeInsideRef,onFocus:se=>{if(d){const ve=I();Xd(o[0]==="reference"?ve[0]:ve[ve.length-1])}else if(ue!=null&&ue.preserveTabOrder&&ue.portalNode)if(W.current=!1,_p(se,ue.portalNode)){const ve=B6()||b;ve==null||ve.focus()}else{var Ee;(Ee=ue.beforeOutsideRef.current)==null||Ee.focus()}}}),!V&&Q("start"),r,Q("end"),ee&&K.createElement(zy,{"data-type":"inside",ref:ue==null?void 0:ue.afterInsideRef,onFocus:se=>{if(d)Xd(I()[0]);else if(ue!=null&&ue.preserveTabOrder&&ue.portalNode)if(p&&(W.current=!0),_p(se,ue.portalNode)){const ve=M6()||b;ve==null||ve.focus()}else{var Ee;(Ee=ue.afterOutsideRef.current)==null||Ee.focus()}}}))}let bv=0;function uZ(){const e=/iP(hone|ad|od)|iOS/.test(s6()),n=document.body.style,i=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth,s=n.left?parseFloat(n.left):window.scrollX,a=n.top?parseFloat(n.top):window.scrollY;if(n.overflow="hidden",o&&(n[i]=o+"px"),e){var u,f;const d=((u=window.visualViewport)==null?void 0:u.offsetLeft)||0,g=((f=window.visualViewport)==null?void 0:f.offsetTop)||0;Object.assign(n,{position:"fixed",top:-(a-Math.floor(g))+"px",left:-(s-Math.floor(d))+"px",right:"0"})}return()=>{Object.assign(n,{overflow:"",[i]:""}),e&&(Object.assign(n,{position:"",top:"",left:"",right:""}),window.scrollTo(s,a))}}let z5=()=>{};const cZ=K.forwardRef(function(n,r){const{lockScroll:i=!1,...o}=n;return qo(()=>{if(i)return bv++,bv===1&&(z5=uZ()),()=>{bv--,bv===0&&z5()}},[i]),K.createElement("div",m1({ref:r},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))});function $5(e){return Qr(e.target)&&e.target.tagName==="BUTTON"}function W5(e){return l6(e)}function I6(e,n){n===void 0&&(n={});const{open:r,onOpenChange:i,dataRef:o,elements:{domReference:s}}=e,{enabled:a=!0,event:u="click",toggle:f=!0,ignoreMouse:d=!1,keyboardHandlers:g=!0,stickIfOpen:p=!0}=n,y=K.useRef(),w=K.useRef(!1),E=K.useMemo(()=>({onPointerDown(S){y.current=S.pointerType},onMouseDown(S){const D=y.current;S.button===0&&u!=="click"&&(D5(D)&&d||(r&&f&&(!(o.current.openEvent&&p)||o.current.openEvent.type==="mousedown")?i(!1,S.nativeEvent,"click"):(S.preventDefault(),i(!0,S.nativeEvent,"click"))))},onClick(S){const D=y.current;if(u==="mousedown"&&y.current){y.current=void 0;return}D5(D)&&d||(r&&f&&(!(o.current.openEvent&&p)||o.current.openEvent.type==="click")?i(!1,S.nativeEvent,"click"):i(!0,S.nativeEvent,"click"))},onKeyDown(S){y.current=void 0,!(S.defaultPrevented||!g||$5(S))&&(S.key===" "&&!W5(s)&&(S.preventDefault(),w.current=!0),S.key==="Enter"&&i(!(r&&f),S.nativeEvent,"click"))},onKeyUp(S){S.defaultPrevented||!g||$5(S)||W5(s)||S.key===" "&&w.current&&(w.current=!1,i(!(r&&f),S.nativeEvent,"click"))}}),[o,s,u,d,g,i,r,p,f]);return K.useMemo(()=>a?{reference:E}:{},[a,E])}const fZ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},hZ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},V5=e=>{var n,r;return{escapeKey:typeof e=="boolean"?e:(n=e==null?void 0:e.escapeKey)!=null?n:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function F6(e,n){n===void 0&&(n={});const{open:r,onOpenChange:i,elements:o,dataRef:s}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:f=!0,outsidePressEvent:d="pointerdown",referencePress:g=!1,referencePressEvent:p="pointerdown",ancestorScroll:y=!1,bubbles:w,capture:E}=n,S=iP(),D=ec(typeof f=="function"?f:()=>!1),A=typeof f=="function"?D:f,P=K.useRef(!1),b=K.useRef(!1),{escapeKey:R,outsidePress:L}=V5(w),{escapeKey:V,outsidePress:Z}=V5(E),ne=K.useRef(!1),le=ec(W=>{var O;if(!r||!a||!u||W.key!=="Escape"||ne.current)return;const N=(O=s.current.floatingContext)==null?void 0:O.nodeId,F=S?Lp(S.nodesRef.current,N):[];if(!R&&(W.stopPropagation(),F.length>0)){let j=!0;if(F.forEach(U=>{var I;if((I=U.context)!=null&&I.open&&!U.context.dataRef.current.__escapeKeyBubbles){j=!1;return}}),!j)return}i(!1,zq(W)?W.nativeEvent:W,"escape-key")}),de=ec(W=>{var O;const N=()=>{var F;le(W),(F=Of(W))==null||F.removeEventListener("keydown",N)};(O=Of(W))==null||O.addEventListener("keydown",N)}),Pe=ec(W=>{var O;const N=P.current;P.current=!1;const F=b.current;if(b.current=!1,d==="click"&&F||N||typeof A=="function"&&!A(W))return;const j=Of(W),U="["+v1("inert")+"]",I=ra(o.floating).querySelectorAll(U);let Q=gr(j)?j:null;for(;Q&&!mc(Q);){const ve=iu(Q);if(mc(ve)||!gr(ve))break;Q=ve}if(I.length&&gr(j)&&!$q(j)&&!Vo(j,o.floating)&&Array.from(I).every(ve=>!Vo(Q,ve)))return;if(Qr(j)&&ye){const ve=j.clientWidth>0&&j.scrollWidth>j.clientWidth,be=j.clientHeight>0&&j.scrollHeight>j.clientHeight;let Oe=be&&W.offsetX>j.clientWidth;if(be&&bs(j).direction==="rtl"&&(Oe=W.offsetX<=j.offsetWidth-j.clientWidth),Oe||ve&&W.offsetY>j.clientHeight)return}const ee=(O=s.current.floatingContext)==null?void 0:O.nodeId,se=S&&Lp(S.nodesRef.current,ee).some(ve=>{var be;return bx(W,(be=ve.context)==null?void 0:be.elements.floating)});if(bx(W,o.floating)||bx(W,o.domReference)||se)return;const Ee=S?Lp(S.nodesRef.current,ee):[];if(Ee.length>0){let ve=!0;if(Ee.forEach(be=>{var Oe;if((Oe=be.context)!=null&&Oe.open&&!be.context.dataRef.current.__outsidePressBubbles){ve=!1;return}}),!ve)return}i(!1,W,"outside-press")}),ue=ec(W=>{var O;const N=()=>{var F;Pe(W),(F=Of(W))==null||F.removeEventListener(d,N)};(O=Of(W))==null||O.addEventListener(d,N)});K.useEffect(()=>{if(!r||!a)return;s.current.__escapeKeyBubbles=R,s.current.__outsidePressBubbles=L;let W=-1;function O(I){i(!1,I,"ancestor-scroll")}function N(){window.clearTimeout(W),ne.current=!0}function F(){W=window.setTimeout(()=>{ne.current=!1},Tw()?5:0)}const j=ra(o.floating);u&&(j.addEventListener("keydown",V?de:le,V),j.addEventListener("compositionstart",N),j.addEventListener("compositionend",F)),A&&j.addEventListener(d,Z?ue:Pe,Z);let U=[];return y&&(gr(o.domReference)&&(U=ac(o.domReference)),gr(o.floating)&&(U=U.concat(ac(o.floating))),!gr(o.reference)&&o.reference&&o.reference.contextElement&&(U=U.concat(ac(o.reference.contextElement)))),U=U.filter(I=>{var Q;return I!==((Q=j.defaultView)==null?void 0:Q.visualViewport)}),U.forEach(I=>{I.addEventListener("scroll",O,{passive:!0})}),()=>{u&&(j.removeEventListener("keydown",V?de:le,V),j.removeEventListener("compositionstart",N),j.removeEventListener("compositionend",F)),A&&j.removeEventListener(d,Z?ue:Pe,Z),U.forEach(I=>{I.removeEventListener("scroll",O)}),window.clearTimeout(W)}},[s,o,u,A,d,r,i,y,a,R,L,le,V,de,Pe,Z,ue]),K.useEffect(()=>{P.current=!1},[A,d]);const he=K.useMemo(()=>({onKeyDown:le,[fZ[p]]:W=>{g&&i(!1,W.nativeEvent,"reference-press")}}),[le,i,g,p]),ye=K.useMemo(()=>({onKeyDown:le,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[hZ[d]]:()=>{P.current=!0}}),[le,d]);return K.useMemo(()=>a?{reference:he,floating:ye}:{},[a,he,ye])}function dZ(e){const{open:n=!1,onOpenChange:r,elements:i}=e,o=H1(),s=K.useRef({}),[a]=K.useState(()=>ZY()),u=T6()!=null,[f,d]=K.useState(i.reference),g=ec((w,E,S)=>{s.current.openEvent=w?E:void 0,a.emit("openchange",{open:w,event:E,reason:S,nested:u}),r==null||r(w,E,S)}),p=K.useMemo(()=>({setPositionReference:d}),[]),y=K.useMemo(()=>({reference:f||i.reference||null,floating:i.floating||null,domReference:i.reference}),[f,i.reference,i.floating]);return K.useMemo(()=>({dataRef:s,open:n,onOpenChange:g,elements:y,events:a,floatingId:o,refs:p}),[n,g,y,a,o,p])}function bw(e){e===void 0&&(e={});const{nodeId:n}=e,r=dZ({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||r,o=i.elements,[s,a]=K.useState(null),[u,f]=K.useState(null),g=(o==null?void 0:o.domReference)||s,p=K.useRef(null),y=iP();qo(()=>{g&&(p.current=g)},[g]);const w=WY({...e,elements:{...o,...u&&{reference:u}}}),E=K.useCallback(b=>{const R=gr(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;f(R),w.refs.setReference(R)},[w.refs]),S=K.useCallback(b=>{(gr(b)||b===null)&&(p.current=b,a(b)),(gr(w.refs.reference.current)||w.refs.reference.current===null||b!==null&&!gr(b))&&w.refs.setReference(b)},[w.refs]),D=K.useMemo(()=>({...w.refs,setReference:S,setPositionReference:E,domReference:p}),[w.refs,S,E]),A=K.useMemo(()=>({...w.elements,domReference:g}),[w.elements,g]),P=K.useMemo(()=>({...w,...i,refs:D,elements:A,nodeId:n}),[w,D,A,n,i]);return qo(()=>{i.dataRef.current.floatingContext=P;const b=y==null?void 0:y.nodesRef.current.find(R=>R.id===n);b&&(b.context=P)}),K.useMemo(()=>({...w,context:P,refs:D,elements:A}),[w,D,A,P])}const U5="active",X5="selected";function Hx(e,n,r){const i=new Map,o=r==="item";let s=e;if(o&&e){const{[U5]:a,[X5]:u,...f}=e;s=f}return{...r==="floating"&&{tabIndex:-1,[lE]:""},...s,...n.map(a=>{const u=a?a[r]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((a,u)=>(u&&Object.entries(u).forEach(f=>{let[d,g]=f;if(!(o&&[U5,X5].includes(d)))if(d.indexOf("on")===0){if(i.has(d)||i.set(d,[]),typeof g=="function"){var p;(p=i.get(d))==null||p.push(g),a[d]=function(){for(var y,w=arguments.length,E=new Array(w),S=0;S<w;S++)E[S]=arguments[S];return(y=i.get(d))==null?void 0:y.map(D=>D(...E)).find(D=>D!==void 0)}}}else a[d]=g}),a),{})}}function L6(e){e===void 0&&(e=[]);const n=e.map(u=>u==null?void 0:u.reference),r=e.map(u=>u==null?void 0:u.floating),i=e.map(u=>u==null?void 0:u.item),o=K.useCallback(u=>Hx(u,e,"reference"),n),s=K.useCallback(u=>Hx(u,e,"floating"),r),a=K.useCallback(u=>Hx(u,e,"item"),i);return K.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:a}),[o,s,a])}const gZ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function _6(e,n){var r;n===void 0&&(n={});const{open:i,floatingId:o}=e,{enabled:s=!0,role:a="dialog"}=n,u=(r=gZ.get(a))!=null?r:a,f=H1(),g=T6()!=null,p=K.useMemo(()=>u==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:i?o:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":u==="alertdialog"?"dialog":u,"aria-controls":i?o:void 0,...u==="listbox"&&{role:"combobox"},...u==="menu"&&{id:f},...u==="menu"&&g&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[u,o,g,i,f,a]),y=K.useMemo(()=>{const E={id:o,...u&&{role:u}};return u==="tooltip"||a==="label"?E:{...E,...u==="menu"&&{"aria-labelledby":f}}},[u,o,f,a]),w=K.useCallback(E=>{let{active:S,selected:D}=E;const A={role:"option",...S&&{id:o+"-option"}};switch(a){case"select":return{...A,"aria-selected":S&&D};case"combobox":return{...A,...S&&{"aria-selected":!0}}}return{}},[o,a]);return K.useMemo(()=>s?{reference:p,floating:y,item:w}:{},[s,p,y,w])}function pZ({initialOpen:e=!1,placement:n="bottom",modal:r,sideOffset:i,open:o,onOpenChange:s}={}){const[a,u]=K.useState(e),[f,d]=K.useState(),[g,p]=K.useState(),y=o??a,w=s??u,E=bw({placement:n,open:y,onOpenChange:w,whileElementsMounted:HY,middleware:[nP(i||4),rP({crossAxis:n.includes("-"),fallbackAxisSideDirection:"end",padding:5}),VY({padding:5})]}),S=E.context,D=I6(S,{enabled:o==null}),A=F6(S),P=_6(S),b=L6([D,A,P]);return K.useMemo(()=>({open:y,setOpen:w,...b,...E,modal:r,labelId:f,descriptionId:g,setLabelId:d,setDescriptionId:p}),[y,w,b,E,r,f,g])}const N6=K.createContext(null),H6=()=>{const e=K.useContext(N6);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function ua({children:e,modal:n=!1,...r}){const i=pZ({modal:n,...r});return k.jsx(N6.Provider,{value:i,children:e})}const ca=K.forwardRef(function({children:n,asChild:r=!1,...i},o){const s=H6();function a(d){return K.isValidElement(d)&&"ref"in d?d.ref??null:null}const u=a(n),f=Rw([s.refs.setReference,o,u]);return r&&K.isValidElement(n)?K.cloneElement(n,s.getReferenceProps({ref:f,...i,...n.props,"data-state":s.open?"open":"closed"})):k.jsx("button",{ref:f,type:"button","data-state":s.open?"open":"closed",...s.getReferenceProps(i),children:n})}),fa=K.forwardRef(function({container:n,style:r,...i},o){const{context:s,...a}=H6(),u=Rw([a.refs.setFloating,o]);return s.open?k.jsx(k6,{root:n,children:k.jsx(O6,{context:s,modal:a.modal,children:k.jsx("div",{ref:u,style:{...a.floatingStyles,...r},"aria-labelledby":a.labelId,"aria-describedby":a.descriptionId,...a.getFloatingProps(i),children:i.children})})}):null});var Lf=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(Lf||{});const G6=K.createContext(null),Is=()=>{const e=K.useContext(G6);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},mZ=()=>{const{appState:e,setAppState:n}=Is();return r=>{n({...e,pointer:r})}},Ow=Bt.createContext({}),uE=(e="",n=!1)=>`menu-item menu-item-base ${e} ${n?"menu-item--active":""}`.trim(),j6=(e,n)=>{const r=K.useContext(Ow);return jK(e,i=>{var s;const o=new CustomEvent(Sg.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});n==null||n(o),o.defaultPrevented||(s=r.onSelect)==null||s.call(r,o)})},zg=({children:e,className:n="",onSelect:r,style:i})=>{const o=gn(`menu ${n}`).trim();return k.jsx(Ow.Provider,{value:{onSelect:r},children:k.jsx("div",{className:o,style:i,"data-testid":"menu",children:k.jsx(Bo,{className:"menu-container",padding:2,children:e})})})};zg.displayName="Menu";const z6=({icon:e,shortcut:n,children:r})=>k.jsxs(k.Fragment,{children:[e&&k.jsx("div",{className:"menu-item__icon",children:e}),k.jsx("div",{className:"menu-item__text",children:r}),n&&k.jsx("div",{className:"menu-item__shortcut",children:n})]}),Jr=({icon:e,onSelect:n,children:r,shortcut:i,className:o,selected:s,submenu:a,...u})=>{const[f,d]=K.useState(!1),g=K.useRef(),p=j6(u.onClick,n),y=k.jsx(z6,{icon:e,shortcut:i,children:r}),w=()=>{g.current&&window.clearTimeout(g.current),d(!0)},E=()=>{g.current=window.setTimeout(()=>{d(!1)},100)};return a?k.jsxs(ua,{open:f,onOpenChange:d,placement:"right-start",children:[k.jsx(ca,{asChild:!0,children:k.jsx("button",{...u,type:"button",className:uE(o,s||f),title:u.title??u["aria-label"],onClick:p,onMouseEnter:w,onMouseLeave:E,children:y})}),k.jsx(fa,{onMouseEnter:w,onMouseLeave:E,children:a})]}):k.jsx("button",{...u,onClick:p,type:"button",className:uE(o,s),title:u.title??u["aria-label"],children:y})};Jr.displayName="MenuItem";const $6=({children:e})=>k.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});$6.displayName="MenuItemBadge";Jr.Badge=$6;const W6=()=>{const{appState:e,setAppState:n}=Is(),{t:r}=Kn();return k.jsx(Jr,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{n({...e,openDialogType:Lf.mermaidToDrawnix})},icon:Dq,"aria-label":r("extraTools.mermaidToDrawnix"),children:r("extraTools.mermaidToDrawnix")})};W6.displayName="MermaidToDrawnix";const V6=()=>{const{appState:e,setAppState:n}=Is(),{t:r}=Kn();return k.jsx(Jr,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{n({...e,openDialogType:Lf.markdownToDrawnix})},icon:Aq,"aria-label":r("extraTools.markdownToDrawnix"),children:r("extraTools.markdownToDrawnix")})};V6.displayName="MarkdownToDrawnix";const vZ=()=>{const e=Tr(),{t:n}=Kn(),r=H.getBoardContainer(e),[i,o]=K.useState(!1);return k.jsxs(ua,{sideOffset:12,open:i,onOpenChange:s=>{o(s)},placement:"bottom-start",children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{type:"icon",visible:!0,selected:i,icon:QB,title:n("toolbar.extraTools"),"aria-label":n("toolbar.extraTools"),onPointerDown:()=>{o(!i)}})}),k.jsx(fa,{container:r,children:k.jsxs(zg,{onSelect:()=>{o(!1)},children:[k.jsx(W6,{}),k.jsx(V6,{})]})})]},0)},Zv=(e,n)=>{try{const r=tt(e);$K(e,{elements:r.length>0?r:void 0,fillStyle:n?"transparent":"white"}).then(i=>{if(i){const o=n?"png":"jpg",s=zK(i),a=`drawnix-${new Date().getTime()}.${o}`;YB(s,a)}else console.error("Failed to generate image from board - no image data returned")}).catch(i=>{console.error("Error generating image:",i)})}catch(r){console.error("Error during image export process:",r)}},U6=async e=>{const n=await VB({description:"Image",extensions:Object.keys(X3)});nE(e,n)},yZ=e=>{const n=e.querySelectorAll("*");let r=1/0,i=1/0,o=-1/0,s=-1/0,a=!1;return n.forEach(u=>{if(u instanceof SVGGraphicsElement&&u.getBBox)try{const f=u.getBBox();f.width>0&&f.height>0&&(r=Math.min(r,f.x),i=Math.min(i,f.y),o=Math.max(o,f.x+f.width),s=Math.max(s,f.y+f.height),a=!0)}catch{}}),a?{x:r,y:i,width:o-r,height:s-i}:null},wZ=(e,n)=>(!n||n.length===0||console.log("Selected elements found, but filtering not yet implemented:",n.length),e),xZ=e=>{e.querySelectorAll("text").forEach(r=>{const i=r.querySelectorAll("tspan");i.length>0&&i.forEach((o,s)=>{s>0&&!o.getAttribute("dy")&&o.setAttribute("dy","1.2em");const a=r.getAttribute("x");!o.getAttribute("x")&&a&&o.setAttribute("x",a)})})},CZ=(e,n)=>{const r=e.getAttribute("data-testid");if(r)return n.querySelector(`[data-testid="${r}"]`);if(e.parentNode){const o=Array.from(e.parentNode.children).indexOf(e);if(o!==-1){const s=`${e.tagName.toLowerCase()}:nth-child(${o+1})`;return n.querySelector(s)}}return null},EZ=(e,n)=>{e.querySelectorAll("*").forEach(i=>{if(i.tagName.toLowerCase()==="text"||i.tagName.toLowerCase()==="tspan"||i.hasAttribute("class")){const o=CZ(i,n);if(o){const s=window.getComputedStyle(o),u=["font-family","font-size","font-weight","font-style","fill","stroke","opacity","visibility","text-anchor","dominant-baseline","alignment-baseline","color"].map(f=>{const d=s.getPropertyValue(f);return d?`${f}:${d}`:""}).filter(Boolean).join(";");u&&i.setAttribute("style",u)}}})},PZ=e=>{try{const n=H.getHost(e);if(!n){console.error("Could not find board SVG element - board may not be properly initialized");return}if(!(n instanceof SVGSVGElement)){console.error("Board host element is not an SVGSVGElement");return}const r=tt(e);let i=n.cloneNode(!0);r&&r.length>0&&(i=wZ(i,r)),xZ(i);const o=yZ(i);if(o){const g=o.x-1,p=o.y-1,y=Math.max(1,o.width+1*-2),w=Math.max(1,o.height+1*-2);i.setAttribute("viewBox",`${g} ${p} ${y} ${w}`),i.setAttribute("width",y.toString()),i.setAttribute("height",w.toString())}else{const d=n.getBoundingClientRect();if(d.width<.01||d.height<.01){console.error("SVG element has invalid dimensions");return}i.setAttribute("viewBox",`0 0 ${d.width} ${d.height}`),i.setAttribute("width",d.width.toString()),i.setAttribute("height",d.height.toString())}i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),EZ(i,n);const a=new XMLSerializer().serializeToString(i);if(!a||a.length===0){console.error("Failed to serialize SVG to string");return}const u=new Blob([a],{type:"image/svg+xml"}),f=`drawnix-${new Date().getTime()}.svg`;YB(u,f)}catch(n){console.error("Error exporting SVG:",n)}},Gx=e=>e===nn.hand||e===nn.selection,K5=[{icon:WK,pointer:nn.hand,titleKey:"toolbar.hand"},{icon:VK,pointer:nn.selection,titleKey:"toolbar.selection"},{icon:UK,pointer:Vl.mind,titleKey:"toolbar.mind"},{icon:KK,pointer:Et.text,titleKey:"toolbar.text"},{icon:Q3,pointer:Ko.feltTipPen,titleKey:"toolbar.pen",key:"freehand"},{icon:YK,titleKey:"toolbar.arrow",key:"arrow",pointer:Nn.straight},{icon:XK,titleKey:"toolbar.shape",key:"shape",pointer:Et.rectangle},{icon:Tq,titleKey:"toolbar.image",key:"image"},{icon:QB,titleKey:"toolbar.extraTools",key:"extra-tools"}],q5=e=>Object.keys(Nn).includes(e.pointer),Y5=e=>Object.keys(Et).includes(e.pointer)||Object.keys(Ct).includes(e.pointer),SZ=()=>{const e=Tr(),{appState:n}=Is(),{t:r}=Kn(),i=mZ(),o=H.getBoardContainer(e),[s,a]=K.useState(!1),[u,f]=K.useState(!1),[d,g]=K.useState(!1),[p,y]=K.useState(K5.find(A=>A.key==="freehand")),w=A=>{wo(e,Zr.dnd),sn.updatePointerType(e,A),i(A)},E=()=>{wo(e,Zr.drawing)},S=A=>H.isPointer(e,A.pointer)&&!u&&!d&&!s,D=A=>H.isInPointer(A,[Ko.feltTipPen,Ko.eraser]);return k.jsx(Bo,{padding:1,className:gn("draw-toolbar",el),children:k.jsx(bi.Row,{gap:1,children:K5.map((A,P)=>n.isMobile&&A.pointer===nn.hand?null:A.key==="freehand"?k.jsxs(ua,{open:s||D(e),sideOffset:12,onOpenChange:b=>{a(b)},children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{type:"icon",visible:!0,selected:s||D(e),icon:p.icon,title:p.titleKey?r(p.titleKey):"Freehand","aria-label":p.titleKey?r(p.titleKey):"Freehand",onPointerDown:()=>{a(!s),w(p.pointer)},onPointerUp:()=>{E()}})}),k.jsx(fa,{container:o,children:k.jsx(Rq,{onPointerUp:b=>{i(b),y(r6.find(R=>R.pointer===b))}})})]},P):A.key==="shape"?k.jsxs(ua,{open:d,sideOffset:12,onOpenChange:b=>{g(b)},children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{type:"icon",visible:!0,selected:d||Y5(e)&&!H.isPointer(e,Et.text),icon:A.icon,title:A.titleKey?r(A.titleKey):"Shape","aria-label":A.titleKey?r(A.titleKey):"Shape",onPointerDown:()=>{g(!d),Y5(e)?sn.updatePointerType(e,e.pointer):sn.updatePointerType(e,A.pointer)}})}),k.jsx(fa,{container:o,children:k.jsx(Oq,{onPointerUp:b=>{g(!1),i(b)}})})]},P):A.key==="arrow"?k.jsxs(ua,{open:u,sideOffset:12,onOpenChange:b=>{f(b)},children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{type:"icon",visible:!0,selected:u||q5(e),icon:A.icon,title:A.titleKey?r(A.titleKey):"","aria-label":A.titleKey?r(A.titleKey):"",onPointerDown:()=>{f(!u),q5(e)?sn.updatePointerType(e,e.pointer):sn.updatePointerType(e,A.pointer)}})}),k.jsx(fa,{container:o,children:k.jsx(Fq,{onPointerUp:b=>{f(!1),i(b)}})})]},P):A.key==="extra-tools"?k.jsx(vZ,{},P):k.jsx(On,{type:"radio",icon:A.icon,checked:S(A),title:A.titleKey?r(A.titleKey):"","aria-label":A.titleKey?r(A.titleKey):"",onPointerDown:()=>{A.pointer&&!Gx(A.pointer)&&w(A.pointer)},onPointerUp:()=>{A.pointer&&!Gx(A.pointer)?E():A.pointer&&Gx(A.pointer)&&(sn.updatePointerType(e,A.pointer),i(A.pointer)),A.key==="image"&&U6(e)}},P))})})},TZ=()=>{var s;const e=Tr(),{t:n}=Kn(),r=H.getBoardContainer(e),[i,o]=K.useState(!1);return k.jsx(Bo,{padding:1,className:gn("zoom-toolbar",el),children:k.jsxs(bi.Row,{gap:1,children:[k.jsx(On,{type:"button",icon:uq,visible:!0,title:n("zoom.out"),"aria-label":n("zoom.out"),onPointerUp:()=>{sn.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),k.jsxs(ua,{sideOffset:12,open:i,onOpenChange:a=>{o(a)},placement:"bottom-end",children:[k.jsx(ca,{asChild:!0,children:k.jsxs("div",{title:n("zoom.fit"),"aria-label":n("zoom.fit"),className:gn("zoom-menu-trigger",{active:i}),onPointerUp:()=>{o(!i)},children:[Number(((((s=e==null?void 0:e.viewport)==null?void 0:s.zoom)||1)*100).toFixed(0)),"%"]},1)}),k.jsx(fa,{container:r,children:k.jsxs(zg,{onSelect:()=>{o(!1)},children:[k.jsx(Jr,{"data-testid":"open-button",onSelect:()=>{sn.fitViewport(e)},"aria-label":n("zoom.fit"),shortcut:"Cmd+Shift+=",children:n("zoom.fit")}),k.jsx(Jr,{"data-testid":"open-button",onSelect:()=>{sn.updateZoom(e,1)},"aria-label":n("zoom.100"),shortcut:"Cmd+0",children:n("zoom.100")})]})})]}),k.jsx(On,{type:"button",icon:cq,visible:!0,title:n("zoom.in"),"aria-label":n("zoom.in"),onPointerUp:()=>{sn.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},DZ="TRANSPARENT",oP="NO_COLOR",sP="#FFFFFF",X6=[{name:"color.none",value:oP},{name:"color.default",value:ti},{name:"color.white",value:sP},{name:"color.gray",value:"#808080"},{name:"color.deepBlue",value:"#1E90FF"},{name:"color.red",value:"#FF4500"},{name:"color.green",value:"#2ECC71"},{name:"color.yellow",value:"#FFD700"},{name:"color.purple",value:"#8A2BE2"},{name:"color.orange",value:"#FFA500"},{name:"color.pastelPink",value:"#FFB3BA"},{name:"color.cyan",value:"#00CED1"},{name:"color.brown",value:"#8B4513"},{name:"color.forestGreen",value:"#228B22"},{name:"color.lightGray",value:"#D3D3D3"}];function AZ(e){return Math.round((100-e)/100*255)}function BZ(e){return Math.round((1-e/255)*100)}function $g(e,n){const i=AZ(100-n).toString(16).padStart(2,"0");return`${e}${i}`}function Wg(e){e=e.replace(/^#/,"");let n;if(e.length===8)n=parseInt(e.slice(6,8),16);else if(e.length===4)n=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-BZ(n)}function MZ(e){return e!=="none"}function ch(e){const n=e.replace(/^#/,"").toUpperCase();return n.length===8?"#"+n.slice(0,6):n.length===4?"#"+n.slice(0,3):n.length===6||n.length===3?"#"+n:e}function K6(e){return e===sP}function q6(e){return e===0}function G1(e){return e===100}function hg(e){return e===oP}function RZ(e){return!e||e===ti}var Pp={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var kZ=Pp.exports,Z5;function bZ(){return Z5||(Z5=1,function(e,n){(function(){var r,i="4.17.21",o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",p=1,y=2,w=4,E=1,S=2,D=1,A=2,P=4,b=8,R=16,L=32,V=64,Z=128,ne=256,le=512,de=30,Pe="...",ue=800,he=16,ye=1,W=2,O=3,N=1/0,F=9007199254740991,j=17976931348623157e292,U=NaN,I=4294967295,Q=I-1,ee=I>>>1,se=[["ary",Z],["bind",D],["bindKey",A],["curry",b],["curryRight",R],["flip",le],["partial",L],["partialRight",V],["rearg",ne]],Ee="[object Arguments]",ve="[object Array]",be="[object AsyncFunction]",Oe="[object Boolean]",ie="[object Date]",De="[object DOMException]",Re="[object Error]",Ie="[object Function]",ct="[object GeneratorFunction]",Ne="[object Map]",yt="[object Number]",lt="[object Null]",Qe="[object Object]",St="[object Promise]",ft="[object Proxy]",Ot="[object RegExp]",mt="[object Set]",Ut="[object String]",Gn="[object Symbol]",Ar="[object Undefined]",Fn="[object WeakMap]",wi="[object WeakSet]",mr="[object ArrayBuffer]",En="[object DataView]",In="[object Float32Array]",_r="[object Float64Array]",Ii="[object Int8Array]",Fs="[object Int16Array]",ts="[object Int32Array]",Mo="[object Uint8Array]",sl="[object Uint8ClampedArray]",Ro="[object Uint16Array]",Zi="[object Uint32Array]",su=/\b__p \+= '';/g,Dc=/\b(__p \+=) '' \+/g,Qi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ls=/&(?:amp|lt|gt|quot|#39);/g,_s=/[&<>"']/g,Ac=RegExp(Ls.source),fh=RegExp(_s.source),hh=/<%-([\s\S]+?)%>/g,dh=/<%([\s\S]+?)%>/g,Bc=/<%=([\s\S]+?)%>/g,Mc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gh=/^\w*$/,al=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ll=/[\\^$.*+?()[\]{}|]/g,ul=RegExp(ll.source),Rc=/^\s+/,pa=/\s/,au=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lu=/\{\n\/\* \[wrapped with (.+)\] \*/,kc=/,? & /,Vg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ug=/[()=,{}\[\]\/\s]/,Xg=/\\(\\)?/g,Ns=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bc=/\w*$/,ph=/^[-+]0x[0-9a-f]+$/i,Kg=/^0b[01]+$/i,mh=/^\[object .+?Constructor\]$/,vh=/^0o[0-7]+$/i,yh=/^(?:0|[1-9]\d*)$/,wh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,uu=/($^)/,xh=/['\n\r\u2028\u2029\\]/g,Pn="\\ud800-\\udfff",Ch="\\u0300-\\u036f",ns="\\ufe20-\\ufe2f",Eh="\\u20d0-\\u20ff",rs=Ch+ns+Eh,cu="\\u2700-\\u27bf",Oc="a-z\\xdf-\\xf6\\xf8-\\xff",fu="\\xac\\xb1\\xd7\\xf7",xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qg="\\u2000-\\u206f",Fi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",q="A-Z\\xc0-\\xd6\\xd8-\\xde",ae="\\ufe0e\\ufe0f",J=fu+xi+qg+Fi,me="[']",xe="["+Pn+"]",ge="["+J+"]",Fe="["+rs+"]",We="\\d+",qe="["+cu+"]",Xe="["+Oc+"]",et="[^"+Pn+J+We+cu+Oc+q+"]",ut="\\ud83c[\\udffb-\\udfff]",Wt="(?:"+Fe+"|"+ut+")",pn="[^"+Pn+"]",ln="(?:\\ud83c[\\udde6-\\uddff]){2}",Mt="[\\ud800-\\udbff][\\udc00-\\udfff]",Dn="["+q+"]",Nr="\\u200d",is="(?:"+Xe+"|"+et+")",hu="(?:"+Dn+"|"+et+")",Ic="(?:"+me+"(?:d|ll|m|re|s|t|ve))?",cl="(?:"+me+"(?:D|LL|M|RE|S|T|VE))?",Fc=Wt+"?",fl="["+ae+"]?",os="(?:"+Nr+"(?:"+[pn,ln,Mt].join("|")+")"+fl+Fc+")*",ko="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ma="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",du=fl+Fc+os,Lc="(?:"+[qe,ln,Mt].join("|")+")"+du,va="(?:"+[pn+Fe+"?",Fe,ln,Mt,xe].join("|")+")",Iw=RegExp(me,"g"),z1=RegExp(Fe,"g"),hl=RegExp(ut+"(?="+ut+")|"+va+du,"g"),Fw=RegExp([Dn+"?"+Xe+"+"+Ic+"(?="+[ge,Dn,"$"].join("|")+")",hu+"+"+cl+"(?="+[ge,Dn+is,"$"].join("|")+")",Dn+"?"+is+"+"+Ic,Dn+"+"+cl,ma,ko,We,Lc].join("|"),"g"),$1=RegExp("["+Nr+Pn+rs+ae+"]"),Ph=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,W1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lw=-1,An={};An[In]=An[_r]=An[Ii]=An[Fs]=An[ts]=An[Mo]=An[sl]=An[Ro]=An[Zi]=!0,An[Ee]=An[ve]=An[mr]=An[Oe]=An[En]=An[ie]=An[Re]=An[Ie]=An[Ne]=An[yt]=An[Qe]=An[Ot]=An[mt]=An[Ut]=An[Fn]=!1;var Sn={};Sn[Ee]=Sn[ve]=Sn[mr]=Sn[En]=Sn[Oe]=Sn[ie]=Sn[In]=Sn[_r]=Sn[Ii]=Sn[Fs]=Sn[ts]=Sn[Ne]=Sn[yt]=Sn[Qe]=Sn[Ot]=Sn[mt]=Sn[Ut]=Sn[Gn]=Sn[Mo]=Sn[sl]=Sn[Ro]=Sn[Zi]=!0,Sn[Re]=Sn[Ie]=Sn[Fn]=!1;var gu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Sh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_w={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Nw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yg=parseFloat,Th=parseInt,Dh=typeof Ds=="object"&&Ds&&Ds.Object===Object&&Ds,V1=typeof self=="object"&&self&&self.Object===Object&&self,Vn=Dh||V1||Function("return this")(),_c=n&&!n.nodeType&&n,ss=_c&&!0&&e&&!e.nodeType&&e,Zg=ss&&ss.exports===_c,pu=Zg&&Dh.process,ri=function(){try{var we=ss&&ss.require&&ss.require("util").types;return we||pu&&pu.binding&&pu.binding("util")}catch{}}(),Qg=ri&&ri.isArrayBuffer,Ci=ri&&ri.isDate,dl=ri&&ri.isMap,Ah=ri&&ri.isRegExp,mu=ri&&ri.isSet,U1=ri&&ri.isTypedArray;function ii(we,Le,Be){switch(Be.length){case 0:return we.call(Le);case 1:return we.call(Le,Be[0]);case 2:return we.call(Le,Be[0],Be[1]);case 3:return we.call(Le,Be[0],Be[1],Be[2])}return we.apply(Le,Be)}function Jg(we,Le,Be,it){for(var zt=-1,yn=we==null?0:we.length;++zt<yn;){var ur=we[zt];Le(it,ur,Be(ur),we)}return it}function Hr(we,Le){for(var Be=-1,it=we==null?0:we.length;++Be<it&&Le(we[Be],Be,we)!==!1;);return we}function Bh(we,Le){for(var Be=we==null?0:we.length;Be--&&Le(we[Be],Be,we)!==!1;);return we}function e0(we,Le){for(var Be=-1,it=we==null?0:we.length;++Be<it;)if(!Le(we[Be],Be,we))return!1;return!0}function ya(we,Le){for(var Be=-1,it=we==null?0:we.length,zt=0,yn=[];++Be<it;){var ur=we[Be];Le(ur,Be,we)&&(yn[zt++]=ur)}return yn}function Mh(we,Le){var Be=we==null?0:we.length;return!!Be&&vu(we,Le,0)>-1}function t0(we,Le,Be){for(var it=-1,zt=we==null?0:we.length;++it<zt;)if(Be(Le,we[it]))return!0;return!1}function Ln(we,Le){for(var Be=-1,it=we==null?0:we.length,zt=Array(it);++Be<it;)zt[Be]=Le(we[Be],Be,we);return zt}function wa(we,Le){for(var Be=-1,it=Le.length,zt=we.length;++Be<it;)we[zt+Be]=Le[Be];return we}function n0(we,Le,Be,it){var zt=-1,yn=we==null?0:we.length;for(it&&yn&&(Be=we[++zt]);++zt<yn;)Be=Le(Be,we[zt],zt,we);return Be}function Hw(we,Le,Be,it){var zt=we==null?0:we.length;for(it&&zt&&(Be=we[--zt]);zt--;)Be=Le(Be,we[zt],zt,we);return Be}function r0(we,Le){for(var Be=-1,it=we==null?0:we.length;++Be<it;)if(Le(we[Be],Be,we))return!0;return!1}var Gw=o0("length");function X1(we){return we.split("")}function jw(we){return we.match(Vg)||[]}function K1(we,Le,Be){var it;return Be(we,function(zt,yn,ur){if(Le(zt,yn,ur))return it=yn,!1}),it}function Rh(we,Le,Be,it){for(var zt=we.length,yn=Be+(it?1:-1);it?yn--:++yn<zt;)if(Le(we[yn],yn,we))return yn;return-1}function vu(we,Le,Be){return Le===Le?Oh(we,Le,Be):Rh(we,q1,Be)}function i0(we,Le,Be,it){for(var zt=Be-1,yn=we.length;++zt<yn;)if(it(we[zt],Le))return zt;return-1}function q1(we){return we!==we}function Y1(we,Le){var Be=we==null?0:we.length;return Be?s0(we,Le)/Be:U}function o0(we){return function(Le){return Le==null?r:Le[we]}}function kh(we){return function(Le){return we==null?r:we[Le]}}function Z1(we,Le,Be,it,zt){return zt(we,function(yn,ur,Mn){Be=it?(it=!1,yn):Le(Be,yn,ur,Mn)}),Be}function zw(we,Le){var Be=we.length;for(we.sort(Le);Be--;)we[Be]=we[Be].value;return we}function s0(we,Le){for(var Be,it=-1,zt=we.length;++it<zt;){var yn=Le(we[it]);yn!==r&&(Be=Be===r?yn:Be+yn)}return Be}function a0(we,Le){for(var Be=-1,it=Array(we);++Be<we;)it[Be]=Le(Be);return it}function $w(we,Le){return Ln(Le,function(Be){return[Be,we[Be]]})}function Q1(we){return we&&we.slice(0,Ih(we)+1).replace(Rc,"")}function Li(we){return function(Le){return we(Le)}}function Nc(we,Le){return Ln(Le,function(Be){return we[Be]})}function Hs(we,Le){return we.has(Le)}function J1(we,Le){for(var Be=-1,it=we.length;++Be<it&&vu(Le,we[Be],0)>-1;);return Be}function l0(we,Le){for(var Be=we.length;Be--&&vu(Le,we[Be],0)>-1;);return Be}function em(we,Le){for(var Be=we.length,it=0;Be--;)we[Be]===Le&&++it;return it}var tm=kh(gu),nm=kh(Sh);function rm(we){return"\\"+Nw[we]}function yu(we,Le){return we==null?r:we[Le]}function wu(we){return $1.test(we)}function Ww(we){return Ph.test(we)}function Vw(we){for(var Le,Be=[];!(Le=we.next()).done;)Be.push(Le.value);return Be}function bh(we){var Le=-1,Be=Array(we.size);return we.forEach(function(it,zt){Be[++Le]=[zt,it]}),Be}function u0(we,Le){return function(Be){return we(Le(Be))}}function Ji(we,Le){for(var Be=-1,it=we.length,zt=0,yn=[];++Be<it;){var ur=we[Be];(ur===Le||ur===g)&&(we[Be]=g,yn[zt++]=Be)}return yn}function xa(we){var Le=-1,Be=Array(we.size);return we.forEach(function(it){Be[++Le]=it}),Be}function Uw(we){var Le=-1,Be=Array(we.size);return we.forEach(function(it){Be[++Le]=[it,it]}),Be}function Oh(we,Le,Be){for(var it=Be-1,zt=we.length;++it<zt;)if(we[it]===Le)return it;return-1}function Xw(we,Le,Be){for(var it=Be+1;it--;)if(we[it]===Le)return it;return it}function gl(we){return wu(we)?om(we):Gw(we)}function _i(we){return wu(we)?sm(we):X1(we)}function Ih(we){for(var Le=we.length;Le--&&pa.test(we.charAt(Le)););return Le}var im=kh(_w);function om(we){for(var Le=hl.lastIndex=0;hl.test(we);)++Le;return Le}function sm(we){return we.match(hl)||[]}function Kw(we){return we.match(Fw)||[]}var qw=function we(Le){Le=Le==null?Vn:xu.defaults(Vn.Object(),Le,xu.pick(Vn,W1));var Be=Le.Array,it=Le.Date,zt=Le.Error,yn=Le.Function,ur=Le.Math,Mn=Le.Object,Hc=Le.RegExp,Yw=Le.String,eo=Le.TypeError,Gs=Be.prototype,c0=yn.prototype,as=Mn.prototype,Cu=Le["__core-js_shared__"],Gc=c0.toString,wn=as.hasOwnProperty,Eu=0,Fh=function(){var h=/[^.]+$/.exec(Cu&&Cu.keys&&Cu.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),jc=as.toString,Lh=Gc.call(Mn),am=Vn._,lm=Hc("^"+Gc.call(wn).replace(ll,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zc=Zg?Le.Buffer:r,js=Le.Symbol,$c=Le.Uint8Array,f0=zc?zc.allocUnsafe:r,bo=u0(Mn.getPrototypeOf,Mn),_h=Mn.create,Nh=as.propertyIsEnumerable,Hh=Gs.splice,um=js?js.isConcatSpreadable:r,zs=js?js.iterator:r,pl=js?js.toStringTag:r,Wc=function(){try{var h=ka(Mn,"defineProperty");return h({},"",{}),h}catch{}}(),cm=Le.clearTimeout!==Vn.clearTimeout&&Le.clearTimeout,jn=it&&it.now!==Vn.Date.now&&it.now,h0=Le.setTimeout!==Vn.setTimeout&&Le.setTimeout,ml=ur.ceil,Ca=ur.floor,Gh=Mn.getOwnPropertySymbols,d0=zc?zc.isBuffer:r,Pu=Le.isFinite,jh=Gs.join,Su=u0(Mn.keys,Mn),cr=ur.max,Gr=ur.min,Zw=it.now,fm=Le.parseInt,Vc=ur.random,zh=Gs.reverse,Uc=ka(Le,"DataView"),vl=ka(Le,"Map"),Xc=ka(Le,"Promise"),Ea=ka(Le,"Set"),Kc=ka(Le,"WeakMap"),Tu=ka(Mn,"create"),$h=Kc&&new Kc,Du={},g0=ba(Uc),Pa=ba(vl),hm=ba(Xc),Au=ba(Ea),ls=ba(Kc),Sa=js?js.prototype:r,Ni=Sa?Sa.valueOf:r,Wh=Sa?Sa.toString:r;function X(h){if(hr(h)&&!Yt(h)&&!(h instanceof qt)){if(h instanceof jr)return h;if(wn.call(h,"__wrapped__"))return Gm(h)}return new jr(h)}var Bu=function(){function h(){}return function(m){if(!ar(m))return{};if(_h)return _h(m);h.prototype=m;var C=new h;return h.prototype=r,C}}();function us(){}function jr(h,m){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=r}X.templateSettings={escape:hh,evaluate:dh,interpolate:Bc,variable:"",imports:{_:X}},X.prototype=us.prototype,X.prototype.constructor=X,jr.prototype=Bu(us.prototype),jr.prototype.constructor=jr;function qt(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=I,this.__views__=[]}function Vh(){var h=new qt(this.__wrapped__);return h.__actions__=si(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=si(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=si(this.__views__),h}function p0(){if(this.__filtered__){var h=new qt(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Mu(){var h=this.__wrapped__.value(),m=this.__dir__,C=Yt(h),M=m<0,G=C?h.length:0,Y=$0(0,G,this.__views__),re=Y.start,fe=Y.end,Ce=fe-re,Ge=M?fe:re-1,je=this.__iteratees__,Ve=je.length,rt=0,xt=Gr(Ce,this.__takeCount__);if(!C||!M&&G==Ce&&xt==Ce)return _u(h,this.__actions__);var Nt=[];e:for(;Ce--&&rt<xt;){Ge+=m;for(var rn=-1,Ht=h[Ge];++rn<Ve;){var un=je[rn],vn=un.iteratee,zo=un.type,$i=vn(Ht);if(zo==W)Ht=$i;else if(!$i){if(zo==ye)continue e;break e}}Nt[rt++]=Ht}return Nt}qt.prototype=Bu(us.prototype),qt.prototype.constructor=qt;function Ei(h){var m=-1,C=h==null?0:h.length;for(this.clear();++m<C;){var M=h[m];this.set(M[0],M[1])}}function zn(){this.__data__=Tu?Tu(null):{},this.size=0}function _n(h){var m=this.has(h)&&delete this.__data__[h];return this.size-=m?1:0,m}function Ta(h){var m=this.__data__;if(Tu){var C=m[h];return C===f?r:C}return wn.call(m,h)?m[h]:r}function zr(h){var m=this.__data__;return Tu?m[h]!==r:wn.call(m,h)}function Pi(h,m){var C=this.__data__;return this.size+=this.has(h)?0:1,C[h]=Tu&&m===r?f:m,this}Ei.prototype.clear=zn,Ei.prototype.delete=_n,Ei.prototype.get=Ta,Ei.prototype.has=zr,Ei.prototype.set=Pi;function oi(h){var m=-1,C=h==null?0:h.length;for(this.clear();++m<C;){var M=h[m];this.set(M[0],M[1])}}function Ru(){this.__data__=[],this.size=0}function Si(h){var m=this.__data__,C=Wr(m,h);if(C<0)return!1;var M=m.length-1;return C==M?m.pop():Hh.call(m,C,1),--this.size,!0}function Uh(h){var m=this.__data__,C=Wr(m,h);return C<0?r:m[C][1]}function dm(h){return Wr(this.__data__,h)>-1}function gm(h,m){var C=this.__data__,M=Wr(C,h);return M<0?(++this.size,C.push([h,m])):C[M][1]=m,this}oi.prototype.clear=Ru,oi.prototype.delete=Si,oi.prototype.get=Uh,oi.prototype.has=dm,oi.prototype.set=gm;function to(h){var m=-1,C=h==null?0:h.length;for(this.clear();++m<C;){var M=h[m];this.set(M[0],M[1])}}function pm(){this.size=0,this.__data__={hash:new Ei,map:new(vl||oi),string:new Ei}}function $s(h){var m=ff(this,h).delete(h);return this.size-=m?1:0,m}function Xh(h){return ff(this,h).get(h)}function m0(h){return ff(this,h).has(h)}function mm(h,m){var C=ff(this,h),M=C.size;return C.set(h,m),this.size+=C.size==M?0:1,this}to.prototype.clear=pm,to.prototype.delete=$s,to.prototype.get=Xh,to.prototype.has=m0,to.prototype.set=mm;function yl(h){var m=-1,C=h==null?0:h.length;for(this.__data__=new to;++m<C;)this.add(h[m])}function Da(h){return this.__data__.set(h,f),this}function ku(h){return this.__data__.has(h)}yl.prototype.add=yl.prototype.push=Da,yl.prototype.has=ku;function $r(h){var m=this.__data__=new oi(h);this.size=m.size}function Kh(){this.__data__=new oi,this.size=0}function qh(h){var m=this.__data__,C=m.delete(h);return this.size=m.size,C}function no(h){return this.__data__.get(h)}function ro(h){return this.__data__.has(h)}function wl(h,m){var C=this.__data__;if(C instanceof oi){var M=C.__data__;if(!vl||M.length<o-1)return M.push([h,m]),this.size=++C.size,this;C=this.__data__=new to(M)}return C.set(h,m),this.size=C.size,this}$r.prototype.clear=Kh,$r.prototype.delete=qh,$r.prototype.get=no,$r.prototype.has=ro,$r.prototype.set=wl;function cs(h,m){var C=Yt(h),M=!C&&Pf(h),G=!C&&!M&&Xu(h),Y=!C&&!M&&!G&&Nd(h),re=C||M||G||Y,fe=re?a0(h.length,Yw):[],Ce=fe.length;for(var Ge in h)(m||wn.call(h,Ge))&&!(re&&(Ge=="length"||G&&(Ge=="offset"||Ge=="parent")||Y&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||Xn(Ge,Ce)))&&fe.push(Ge);return fe}function fs(h){var m=h.length;return m?h[Fu(0,m-1)]:r}function xl(h,m){return Cd(si(h),Ws(m,0,h.length))}function vm(h){return Cd(si(h))}function qc(h,m,C){(C!==r&&!ea(h[m],C)||C===r&&!(m in h))&&hs(h,m,C)}function Cl(h,m,C){var M=h[m];(!(wn.call(h,m)&&ea(M,C))||C===r&&!(m in h))&&hs(h,m,C)}function Wr(h,m){for(var C=h.length;C--;)if(ea(h[C][0],m))return C;return-1}function Hi(h,m,C,M){return gs(h,function(G,Y,re){m(M,G,C(G),re)}),M}function $n(h,m){return h&&Io(m,Xr(m),h)}function Oo(h,m){return h&&Io(m,ho(m),h)}function hs(h,m,C){m=="__proto__"&&Wc?Wc(h,m,{configurable:!0,enumerable:!0,value:C,writable:!0}):h[m]=C}function Yh(h,m){for(var C=-1,M=m.length,G=Be(M),Y=h==null;++C<M;)G[C]=Y?r:C2(h,m[C]);return G}function Ws(h,m,C){return h===h&&(C!==r&&(h=h<=C?h:C),m!==r&&(h=h>=m?h:m)),h}function Ti(h,m,C,M,G,Y){var re,fe=m&p,Ce=m&y,Ge=m&w;if(C&&(re=G?C(h,M,G,Y):C(h)),re!==r)return re;if(!ar(h))return h;var je=Yt(h);if(je){if(re=df(h),!fe)return si(h,re)}else{var Ve=Rr(h),rt=Ve==Ie||Ve==ct;if(Xu(h))return k0(h,fe);if(Ve==Qe||Ve==Ee||rt&&!G){if(re=Ce||rt?{}:kr(h),!fe)return Ce?Jw(h,Oo(re,h)):ud(h,$n(re,h))}else{if(!Sn[Ve])return G?h:{};re=e2(h,Ve,fe)}}Y||(Y=new $r);var xt=Y.get(h);if(xt)return xt;Y.set(h,re),yP(h)?h.forEach(function(Ht){re.add(Ti(Ht,m,C,Ht,h,Y))}):mP(h)&&h.forEach(function(Ht,un){re.set(un,Ti(Ht,m,C,un,h,Y))});var Nt=Ge?Ce?cf:uf:Ce?ho:Xr,rn=je?r:Nt(h);return Hr(rn||h,function(Ht,un){rn&&(un=Ht,Ht=h[un]),Cl(re,un,Ti(Ht,m,C,un,h,Y))}),re}function ym(h){var m=Xr(h);return function(C){return Yc(C,h,m)}}function Yc(h,m,C){var M=C.length;if(h==null)return!M;for(h=Mn(h);M--;){var G=C[M],Y=m[G],re=h[G];if(re===r&&!(G in h)||!Y(re))return!1}return!0}function v0(h,m,C){if(typeof h!="function")throw new eo(a);return Wu(function(){h.apply(r,C)},m)}function ds(h,m,C,M){var G=-1,Y=Mh,re=!0,fe=h.length,Ce=[],Ge=m.length;if(!fe)return Ce;C&&(m=Ln(m,Li(C))),M?(Y=t0,re=!1):m.length>=o&&(Y=Hs,re=!1,m=new yl(m));e:for(;++G<fe;){var je=h[G],Ve=C==null?je:C(je);if(je=M||je!==0?je:0,re&&Ve===Ve){for(var rt=Ge;rt--;)if(m[rt]===Ve)continue e;Ce.push(je)}else Y(m,Ve,M)||Ce.push(je)}return Ce}var gs=lo(Gi),wm=lo(Aa,!0);function Zc(h,m){var C=!0;return gs(h,function(M,G,Y){return C=!!m(M,G,Y),C}),C}function El(h,m,C){for(var M=-1,G=h.length;++M<G;){var Y=h[M],re=m(Y);if(re!=null&&(fe===r?re===re&&!jo(re):C(re,fe)))var fe=re,Ce=Y}return Ce}function xm(h,m,C,M){var G=h.length;for(C=en(C),C<0&&(C=-C>G?0:G+C),M=M===r||M>G?G:en(M),M<0&&(M+=G),M=C>M?0:xP(M);C<M;)h[C++]=m;return h}function y0(h,m){var C=[];return gs(h,function(M,G,Y){m(M,G,Y)&&C.push(M)}),C}function er(h,m,C,M,G){var Y=-1,re=h.length;for(C||(C=yd),G||(G=[]);++Y<re;){var fe=h[Y];m>0&&C(fe)?m>1?er(fe,m-1,C,M,G):wa(G,fe):M||(G[G.length]=fe)}return G}var Zh=fd(),Qc=fd(!0);function Gi(h,m){return h&&Zh(h,m,Xr)}function Aa(h,m){return h&&Qc(h,m,Xr)}function bu(h,m){return ya(m,function(C){return Fl(h[C])})}function Vs(h,m){m=vs(m,h);for(var C=0,M=m.length;h!=null&&C<M;)h=h[No(m[C++])];return C&&C==M?h:r}function Qh(h,m,C){var M=m(h);return Yt(h)?M:wa(M,C(h))}function Br(h){return h==null?h===r?Ar:lt:pl&&pl in Mn(h)?vd(h):V0(h)}function Ba(h,m){return h>m}function io(h,m){return h!=null&&wn.call(h,m)}function Pl(h,m){return h!=null&&m in Mn(h)}function w0(h,m,C){return h>=Gr(m,C)&&h<cr(m,C)}function Jh(h,m,C){for(var M=C?t0:Mh,G=h[0].length,Y=h.length,re=Y,fe=Be(Y),Ce=1/0,Ge=[];re--;){var je=h[re];re&&m&&(je=Ln(je,Li(m))),Ce=Gr(je.length,Ce),fe[re]=!C&&(m||G>=120&&je.length>=120)?new yl(re&&je):r}je=h[0];var Ve=-1,rt=fe[0];e:for(;++Ve<G&&Ge.length<Ce;){var xt=je[Ve],Nt=m?m(xt):xt;if(xt=C||xt!==0?xt:0,!(rt?Hs(rt,Nt):M(Ge,Nt,C))){for(re=Y;--re;){var rn=fe[re];if(!(rn?Hs(rn,Nt):M(h[re],Nt,C)))continue e}rt&&rt.push(Nt),Ge.push(xt)}}return Ge}function Us(h,m,C,M){return Gi(h,function(G,Y,re){m(M,C(G),Y,re)}),M}function oo(h,m,C){m=vs(m,h),h=Cr(h,m);var M=h==null?h:h[No(ui(m))];return M==null?r:ii(M,h,C)}function ed(h){return hr(h)&&Br(h)==Ee}function Cm(h){return hr(h)&&Br(h)==mr}function Xs(h){return hr(h)&&Br(h)==ie}function so(h,m,C,M,G){return h===m?!0:h==null||m==null||!hr(h)&&!hr(m)?h!==h&&m!==m:td(h,m,C,M,so,G)}function td(h,m,C,M,G,Y){var re=Yt(h),fe=Yt(m),Ce=re?ve:Rr(h),Ge=fe?ve:Rr(m);Ce=Ce==Ee?Qe:Ce,Ge=Ge==Ee?Qe:Ge;var je=Ce==Qe,Ve=Ge==Qe,rt=Ce==Ge;if(rt&&Xu(h)){if(!Xu(m))return!1;re=!0,je=!1}if(rt&&!je)return Y||(Y=new $r),re||Nd(h)?j0(h,m,C,M,G,Y):z0(h,m,Ce,C,M,G,Y);if(!(C&E)){var xt=je&&wn.call(h,"__wrapped__"),Nt=Ve&&wn.call(m,"__wrapped__");if(xt||Nt){var rn=xt?h.value():h,Ht=Nt?m.value():m;return Y||(Y=new $r),G(rn,Ht,C,M,Y)}}return rt?(Y||(Y=new $r),bm(h,m,C,M,G,Y)):!1}function Em(h){return hr(h)&&Rr(h)==Ne}function Ou(h,m,C,M){var G=C.length,Y=G,re=!M;if(h==null)return!Y;for(h=Mn(h);G--;){var fe=C[G];if(re&&fe[2]?fe[1]!==h[fe[0]]:!(fe[0]in h))return!1}for(;++G<Y;){fe=C[G];var Ce=fe[0],Ge=h[Ce],je=fe[1];if(re&&fe[2]){if(Ge===r&&!(Ce in h))return!1}else{var Ve=new $r;if(M)var rt=M(Ge,je,Ce,h,m,Ve);if(!(rt===r?so(je,Ge,E|S,M,Ve):rt))return!1}}return!0}function x0(h){if(!ar(h)||Fm(h))return!1;var m=Fl(h)?lm:mh;return m.test(ba(h))}function Jc(h){return hr(h)&&Br(h)==Ot}function ps(h){return hr(h)&&Rr(h)==mt}function ef(h){return hr(h)&&ev(h.length)&&!!An[Br(h)]}function Iu(h){return typeof h=="function"?h:h==null?go:typeof h=="object"?Yt(h)?Un(h[0],h[1]):nd(h):kP(h)}function Ks(h){if(!Qs(h))return Su(h);var m=[];for(var C in Mn(h))wn.call(h,C)&&C!="constructor"&&m.push(C);return m}function C0(h){if(!ar(h))return Nm(h);var m=Qs(h),C=[];for(var M in h)M=="constructor"&&(m||!wn.call(h,M))||C.push(M);return C}function Ma(h,m){return h<m}function E0(h,m){var C=-1,M=fo(h)?Be(h.length):[];return gs(h,function(G,Y,re){M[++C]=m(G,Y,re)}),M}function nd(h){var m=hf(h);return m.length==1&&m[0][2]?wd(m[0][0],m[0][1]):function(C){return C===h||Ou(C,h,m)}}function Un(h,m){return st(h)&&pf(m)?wd(No(h),m):function(C){var M=C2(C,h);return M===r&&M===m?E2(C,h):so(m,M,E|S)}}function Sl(h,m,C,M,G){h!==m&&Zh(m,function(Y,re){if(G||(G=new $r),ar(Y))P0(h,m,re,C,Sl,M,G);else{var fe=M?M(xs(h,re),Y,re+"",h,m,G):r;fe===r&&(fe=Y),qc(h,re,fe)}},ho)}function P0(h,m,C,M,G,Y,re){var fe=xs(h,C),Ce=xs(m,C),Ge=re.get(Ce);if(Ge){qc(h,C,Ge);return}var je=Y?Y(fe,Ce,C+"",h,m,re):r,Ve=je===r;if(Ve){var rt=Yt(Ce),xt=!rt&&Xu(Ce),Nt=!rt&&!xt&&Nd(Ce);je=Ce,rt||xt||Nt?Yt(fe)?je=fe:wr(fe)?je=si(fe):xt?(Ve=!1,je=k0(Ce,!0)):Nt?(Ve=!1,je=Am(Ce,!0)):je=[]:up(Ce)||Pf(Ce)?(je=fe,Pf(fe)?je=CP(fe):(!ar(fe)||Fl(fe))&&(je=kr(Ce))):Ve=!1}Ve&&(re.set(Ce,je),G(je,Ce,M,Y,re),re.delete(Ce)),qc(h,C,je)}function rd(h,m){var C=h.length;if(C)return m+=m<0?C:0,Xn(m,C)?h[m]:r}function tf(h,m,C){m.length?m=Ln(m,function(Y){return Yt(Y)?function(re){return Vs(re,Y.length===1?Y[0]:Y)}:Y}):m=[go];var M=-1;m=Ln(m,Li(kt()));var G=E0(h,function(Y,re,fe){var Ce=Ln(m,function(Ge){return Ge(Y)});return{criteria:Ce,index:++M,value:Y}});return zw(G,function(Y,re){return Qw(Y,re,C)})}function S0(h,m){return Ra(h,m,function(C,M){return E2(h,M)})}function Ra(h,m,C){for(var M=-1,G=m.length,Y={};++M<G;){var re=m[M],fe=Vs(h,re);C(fe,re)&&Dl(Y,vs(re,h),fe)}return Y}function qn(h){return function(m){return Vs(m,h)}}function or(h,m,C,M){var G=M?i0:vu,Y=-1,re=m.length,fe=h;for(h===m&&(m=si(m)),C&&(fe=Ln(h,Li(C)));++Y<re;)for(var Ce=0,Ge=m[Y],je=C?C(Ge):Ge;(Ce=G(fe,je,Ce,M))>-1;)fe!==h&&Hh.call(fe,Ce,1),Hh.call(h,Ce,1);return h}function vr(h,m){for(var C=h?m.length:0,M=C-1;C--;){var G=m[C];if(C==M||G!==Y){var Y=G;Xn(G)?Hh.call(h,G,1):sd(h,G)}}return h}function Fu(h,m){return h+Ca(Vc()*(m-h+1))}function nf(h,m,C,M){for(var G=-1,Y=cr(ml((m-h)/(C||1)),0),re=Be(Y);Y--;)re[M?Y:++G]=h,h+=C;return re}function Tl(h,m){var C="";if(!h||m<1||m>F)return C;do m%2&&(C+=h),m=Ca(m/2),m&&(h+=h);while(m);return C}function Jt(h,m){return ji(xd(h,m,go),h+"")}function Vr(h){return fs(Hd(h))}function T0(h,m){var C=Hd(h);return Cd(C,Ws(m,0,C.length))}function Dl(h,m,C,M){if(!ar(h))return h;m=vs(m,h);for(var G=-1,Y=m.length,re=Y-1,fe=h;fe!=null&&++G<Y;){var Ce=No(m[G]),Ge=C;if(Ce==="__proto__"||Ce==="constructor"||Ce==="prototype")return h;if(G!=re){var je=fe[Ce];Ge=M?M(je,Ce,fe):r,Ge===r&&(Ge=ar(je)?je:Xn(m[G+1])?[]:{})}Cl(fe,Ce,Ge),fe=fe[Ce]}return h}var id=$h?function(h,m){return $h.set(h,m),h}:go,ms=Wc?function(h,m){return Wc(h,"toString",{configurable:!0,enumerable:!1,value:S2(m),writable:!0})}:go;function ao(h){return Cd(Hd(h))}function Ur(h,m,C){var M=-1,G=h.length;m<0&&(m=-m>G?0:G+m),C=C>G?G:C,C<0&&(C+=G),G=m>C?0:C-m>>>0,m>>>=0;for(var Y=Be(G);++M<G;)Y[M]=h[M+m];return Y}function D0(h,m){var C;return gs(h,function(M,G,Y){return C=m(M,G,Y),!C}),!!C}function Lu(h,m,C){var M=0,G=h==null?M:h.length;if(typeof m=="number"&&m===m&&G<=ee){for(;M<G;){var Y=M+G>>>1,re=h[Y];re!==null&&!jo(re)&&(C?re<=m:re<m)?M=Y+1:G=Y}return G}return od(h,m,go,C)}function od(h,m,C,M){var G=0,Y=h==null?0:h.length;if(Y===0)return 0;m=C(m);for(var re=m!==m,fe=m===null,Ce=jo(m),Ge=m===r;G<Y;){var je=Ca((G+Y)/2),Ve=C(h[je]),rt=Ve!==r,xt=Ve===null,Nt=Ve===Ve,rn=jo(Ve);if(re)var Ht=M||Nt;else Ge?Ht=Nt&&(M||rt):fe?Ht=Nt&&rt&&(M||!xt):Ce?Ht=Nt&&rt&&!xt&&(M||!rn):xt||rn?Ht=!1:Ht=M?Ve<=m:Ve<m;Ht?G=je+1:Y=je}return Gr(Y,Q)}function A0(h,m){for(var C=-1,M=h.length,G=0,Y=[];++C<M;){var re=h[C],fe=m?m(re):re;if(!C||!ea(fe,Ce)){var Ce=fe;Y[G++]=re===0?0:re}}return Y}function B0(h){return typeof h=="number"?h:jo(h)?U:+h}function Di(h){if(typeof h=="string")return h;if(Yt(h))return Ln(h,Di)+"";if(jo(h))return Wh?Wh.call(h):"";var m=h+"";return m=="0"&&1/h==-N?"-0":m}function qs(h,m,C){var M=-1,G=Mh,Y=h.length,re=!0,fe=[],Ce=fe;if(C)re=!1,G=t0;else if(Y>=o){var Ge=m?null:km(h);if(Ge)return xa(Ge);re=!1,G=Hs,Ce=new yl}else Ce=m?[]:fe;e:for(;++M<Y;){var je=h[M],Ve=m?m(je):je;if(je=C||je!==0?je:0,re&&Ve===Ve){for(var rt=Ce.length;rt--;)if(Ce[rt]===Ve)continue e;m&&Ce.push(Ve),fe.push(je)}else G(Ce,Ve,C)||(Ce!==fe&&Ce.push(Ve),fe.push(je))}return fe}function sd(h,m){return m=vs(m,h),h=Cr(h,m),h==null||delete h[No(ui(m))]}function M0(h,m,C,M){return Dl(h,m,C(Vs(h,m)),M)}function rf(h,m,C,M){for(var G=h.length,Y=M?G:-1;(M?Y--:++Y<G)&&m(h[Y],Y,h););return C?Ur(h,M?0:Y,M?Y+1:G):Ur(h,M?Y+1:0,M?G:Y)}function _u(h,m){var C=h;return C instanceof qt&&(C=C.value()),n0(m,function(M,G){return G.func.apply(G.thisArg,wa([M],G.args))},C)}function ad(h,m,C){var M=h.length;if(M<2)return M?qs(h[0]):[];for(var G=-1,Y=Be(M);++G<M;)for(var re=h[G],fe=-1;++fe<M;)fe!=G&&(Y[G]=ds(Y[G]||re,h[fe],m,C));return qs(er(Y,1),m,C)}function of(h,m,C){for(var M=-1,G=h.length,Y=m.length,re={};++M<G;){var fe=M<Y?m[M]:r;C(re,h[M],fe)}return re}function Nu(h){return wr(h)?h:[]}function ld(h){return typeof h=="function"?h:go}function vs(h,m){return Yt(h)?h:st(h,m)?[h]:K0(Rn(h))}var Pm=Jt;function Ys(h,m,C){var M=h.length;return C=C===r?M:C,!m&&C>=M?h:Ur(h,m,C)}var R0=cm||function(h){return Vn.clearTimeout(h)};function k0(h,m){if(m)return h.slice();var C=h.length,M=f0?f0(C):new h.constructor(C);return h.copy(M),M}function sf(h){var m=new h.constructor(h.byteLength);return new $c(m).set(new $c(h)),m}function Sm(h,m){var C=m?sf(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.byteLength)}function Tm(h){var m=new h.constructor(h.source,bc.exec(h));return m.lastIndex=h.lastIndex,m}function Dm(h){return Ni?Mn(Ni.call(h)):{}}function Am(h,m){var C=m?sf(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.length)}function b0(h,m){if(h!==m){var C=h!==r,M=h===null,G=h===h,Y=jo(h),re=m!==r,fe=m===null,Ce=m===m,Ge=jo(m);if(!fe&&!Ge&&!Y&&h>m||Y&&re&&Ce&&!fe&&!Ge||M&&re&&Ce||!C&&Ce||!G)return 1;if(!M&&!Y&&!Ge&&h<m||Ge&&C&&G&&!M&&!Y||fe&&C&&G||!re&&G||!Ce)return-1}return 0}function Qw(h,m,C){for(var M=-1,G=h.criteria,Y=m.criteria,re=G.length,fe=C.length;++M<re;){var Ce=b0(G[M],Y[M]);if(Ce){if(M>=fe)return Ce;var Ge=C[M];return Ce*(Ge=="desc"?-1:1)}}return h.index-m.index}function Bm(h,m,C,M){for(var G=-1,Y=h.length,re=C.length,fe=-1,Ce=m.length,Ge=cr(Y-re,0),je=Be(Ce+Ge),Ve=!M;++fe<Ce;)je[fe]=m[fe];for(;++G<re;)(Ve||G<Y)&&(je[C[G]]=h[G]);for(;Ge--;)je[fe++]=h[G++];return je}function O0(h,m,C,M){for(var G=-1,Y=h.length,re=-1,fe=C.length,Ce=-1,Ge=m.length,je=cr(Y-fe,0),Ve=Be(je+Ge),rt=!M;++G<je;)Ve[G]=h[G];for(var xt=G;++Ce<Ge;)Ve[xt+Ce]=m[Ce];for(;++re<fe;)(rt||G<Y)&&(Ve[xt+C[re]]=h[G++]);return Ve}function si(h,m){var C=-1,M=h.length;for(m||(m=Be(M));++C<M;)m[C]=h[C];return m}function Io(h,m,C,M){var G=!C;C||(C={});for(var Y=-1,re=m.length;++Y<re;){var fe=m[Y],Ce=M?M(C[fe],h[fe],fe,C,h):r;Ce===r&&(Ce=h[fe]),G?hs(C,fe,Ce):Cl(C,fe,Ce)}return C}function ud(h,m){return Io(h,Fo(h),m)}function Jw(h,m){return Io(h,Om(h),m)}function cd(h,m){return function(C,M){var G=Yt(C)?Jg:Hi,Y=m?m():{};return G(C,h,kt(M,2),Y)}}function Hu(h){return Jt(function(m,C){var M=-1,G=C.length,Y=G>1?C[G-1]:r,re=G>2?C[2]:r;for(Y=h.length>3&&typeof Y=="function"?(G--,Y):r,re&&li(C[0],C[1],re)&&(Y=G<3?r:Y,G=1),m=Mn(m);++M<G;){var fe=C[M];fe&&h(m,fe,M,Y)}return m})}function lo(h,m){return function(C,M){if(C==null)return C;if(!fo(C))return h(C,M);for(var G=C.length,Y=m?G:-1,re=Mn(C);(m?Y--:++Y<G)&&M(re[Y],Y,re)!==!1;);return C}}function fd(h){return function(m,C,M){for(var G=-1,Y=Mn(m),re=M(m),fe=re.length;fe--;){var Ce=re[h?fe:++G];if(C(Y[Ce],Ce,Y)===!1)break}return m}}function hd(h,m,C){var M=m&D,G=Gu(h);function Y(){var re=this&&this!==Vn&&this instanceof Y?G:h;return re.apply(M?C:this,arguments)}return Y}function I0(h){return function(m){m=Rn(m);var C=wu(m)?_i(m):r,M=C?C[0]:m.charAt(0),G=C?Ys(C,1).join(""):m.slice(1);return M[h]()+G}}function Al(h){return function(m){return n0(MP(BP(m).replace(Iw,"")),h,"")}}function Gu(h){return function(){var m=arguments;switch(m.length){case 0:return new h;case 1:return new h(m[0]);case 2:return new h(m[0],m[1]);case 3:return new h(m[0],m[1],m[2]);case 4:return new h(m[0],m[1],m[2],m[3]);case 5:return new h(m[0],m[1],m[2],m[3],m[4]);case 6:return new h(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new h(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var C=Bu(h.prototype),M=h.apply(C,m);return ar(M)?M:C}}function F0(h,m,C){var M=Gu(h);function G(){for(var Y=arguments.length,re=Be(Y),fe=Y,Ce=Zs(G);fe--;)re[fe]=arguments[fe];var Ge=Y<3&&re[0]!==Ce&&re[Y-1]!==Ce?[]:Ji(re,Ce);if(Y-=Ge.length,Y<C)return ai(h,m,ju,G.placeholder,r,re,Ge,r,r,C-Y);var je=this&&this!==Vn&&this instanceof G?M:h;return ii(je,this,re)}return G}function Bl(h){return function(m,C,M){var G=Mn(m);if(!fo(m)){var Y=kt(C,3);m=Xr(m),C=function(fe){return Y(G[fe],fe,G)}}var re=h(m,C,M);return re>-1?G[Y?m[re]:re]:r}}function dd(h){return ws(function(m){var C=m.length,M=C,G=jr.prototype.thru;for(h&&m.reverse();M--;){var Y=m[M];if(typeof Y!="function")throw new eo(a);if(G&&!re&&zu(Y)=="wrapper")var re=new jr([],!0)}for(M=re?M:C;++M<C;){Y=m[M];var fe=zu(Y),Ce=fe=="wrapper"?md(Y):r;Ce&&gf(Ce[0])&&Ce[1]==(Z|b|L|ne)&&!Ce[4].length&&Ce[9]==1?re=re[zu(Ce[0])].apply(re,Ce[3]):re=Y.length==1&&gf(Y)?re[fe]():re.thru(Y)}return function(){var Ge=arguments,je=Ge[0];if(re&&Ge.length==1&&Yt(je))return re.plant(je).value();for(var Ve=0,rt=C?m[Ve].apply(this,Ge):je;++Ve<C;)rt=m[Ve].call(this,rt);return rt}})}function ju(h,m,C,M,G,Y,re,fe,Ce,Ge){var je=m&Z,Ve=m&D,rt=m&A,xt=m&(b|R),Nt=m&le,rn=rt?r:Gu(h);function Ht(){for(var un=arguments.length,vn=Be(un),zo=un;zo--;)vn[zo]=arguments[zo];if(xt)var $i=Zs(Ht),$o=em(vn,$i);if(M&&(vn=Bm(vn,M,G,xt)),Y&&(vn=O0(vn,Y,re,xt)),un-=$o,xt&&un<Ge){var xr=Ji(vn,$i);return ai(h,m,ju,Ht.placeholder,C,vn,xr,fe,Ce,Ge-un)}var ta=Ve?C:this,_l=rt?ta[h]:h;return un=vn.length,fe?vn=Lo(vn,fe):Nt&&un>1&&vn.reverse(),je&&Ce<un&&(vn.length=Ce),this&&this!==Vn&&this instanceof Ht&&(_l=rn||Gu(_l)),_l.apply(ta,vn)}return Ht}function Mm(h,m){return function(C,M){return Us(C,h,m(M),{})}}function af(h,m){return function(C,M){var G;if(C===r&&M===r)return m;if(C!==r&&(G=C),M!==r){if(G===r)return M;typeof C=="string"||typeof M=="string"?(C=Di(C),M=Di(M)):(C=B0(C),M=B0(M)),G=h(C,M)}return G}}function gd(h){return ws(function(m){return m=Ln(m,Li(kt())),Jt(function(C){var M=this;return h(m,function(G){return ii(G,M,C)})})})}function lf(h,m){m=m===r?" ":Di(m);var C=m.length;if(C<2)return C?Tl(m,h):m;var M=Tl(m,ml(h/gl(m)));return wu(m)?Ys(_i(M),0,h).join(""):M.slice(0,h)}function Rm(h,m,C,M){var G=m&D,Y=Gu(h);function re(){for(var fe=-1,Ce=arguments.length,Ge=-1,je=M.length,Ve=Be(je+Ce),rt=this&&this!==Vn&&this instanceof re?Y:h;++Ge<je;)Ve[Ge]=M[Ge];for(;Ce--;)Ve[Ge++]=arguments[++fe];return ii(rt,G?C:this,Ve)}return re}function L0(h){return function(m,C,M){return M&&typeof M!="number"&&li(m,C,M)&&(C=M=r),m=Ll(m),C===r?(C=m,m=0):C=Ll(C),M=M===r?m<C?1:-1:Ll(M),nf(m,C,M,h)}}function pd(h){return function(m,C){return typeof m=="string"&&typeof C=="string"||(m=Cs(m),C=Cs(C)),h(m,C)}}function ai(h,m,C,M,G,Y,re,fe,Ce,Ge){var je=m&b,Ve=je?re:r,rt=je?r:re,xt=je?Y:r,Nt=je?r:Y;m|=je?L:V,m&=~(je?V:L),m&P||(m&=-4);var rn=[h,m,G,xt,Ve,Nt,rt,fe,Ce,Ge],Ht=C.apply(r,rn);return gf(h)&&U0(Ht,rn),Ht.placeholder=M,X0(Ht,h,m)}function Mr(h){var m=ur[h];return function(C,M){if(C=Cs(C),M=M==null?0:Gr(en(M),292),M&&Pu(C)){var G=(Rn(C)+"e").split("e"),Y=m(G[0]+"e"+(+G[1]+M));return G=(Rn(Y)+"e").split("e"),+(G[0]+"e"+(+G[1]-M))}return m(C)}}var km=Ea&&1/xa(new Ea([,-0]))[1]==N?function(h){return new Ea(h)}:A2;function _0(h){return function(m){var C=Rr(m);return C==Ne?bh(m):C==mt?Uw(m):$w(m,h(m))}}function ys(h,m,C,M,G,Y,re,fe){var Ce=m&A;if(!Ce&&typeof h!="function")throw new eo(a);var Ge=M?M.length:0;if(Ge||(m&=-97,M=G=r),re=re===r?re:cr(en(re),0),fe=fe===r?fe:en(fe),Ge-=G?G.length:0,m&V){var je=M,Ve=G;M=G=r}var rt=Ce?r:md(h),xt=[h,m,C,M,G,je,Ve,Y,re,fe];if(rt&&_m(xt,rt),h=xt[0],m=xt[1],C=xt[2],M=xt[3],G=xt[4],fe=xt[9]=xt[9]===r?Ce?0:h.length:cr(xt[9]-Ge,0),!fe&&m&(b|R)&&(m&=-25),!m||m==D)var Nt=hd(h,m,C);else m==b||m==R?Nt=F0(h,m,fe):(m==L||m==(D|L))&&!G.length?Nt=Rm(h,m,C,M):Nt=ju.apply(r,xt);var rn=rt?id:U0;return X0(rn(Nt,xt),h,m)}function N0(h,m,C,M){return h===r||ea(h,as[C])&&!wn.call(M,C)?m:h}function H0(h,m,C,M,G,Y){return ar(h)&&ar(m)&&(Y.set(m,h),Sl(h,m,r,H0,Y),Y.delete(m)),h}function G0(h){return up(h)?r:h}function j0(h,m,C,M,G,Y){var re=C&E,fe=h.length,Ce=m.length;if(fe!=Ce&&!(re&&Ce>fe))return!1;var Ge=Y.get(h),je=Y.get(m);if(Ge&&je)return Ge==m&&je==h;var Ve=-1,rt=!0,xt=C&S?new yl:r;for(Y.set(h,m),Y.set(m,h);++Ve<fe;){var Nt=h[Ve],rn=m[Ve];if(M)var Ht=re?M(rn,Nt,Ve,m,h,Y):M(Nt,rn,Ve,h,m,Y);if(Ht!==r){if(Ht)continue;rt=!1;break}if(xt){if(!r0(m,function(un,vn){if(!Hs(xt,vn)&&(Nt===un||G(Nt,un,C,M,Y)))return xt.push(vn)})){rt=!1;break}}else if(!(Nt===rn||G(Nt,rn,C,M,Y))){rt=!1;break}}return Y.delete(h),Y.delete(m),rt}function z0(h,m,C,M,G,Y,re){switch(C){case En:if(h.byteLength!=m.byteLength||h.byteOffset!=m.byteOffset)return!1;h=h.buffer,m=m.buffer;case mr:return!(h.byteLength!=m.byteLength||!Y(new $c(h),new $c(m)));case Oe:case ie:case yt:return ea(+h,+m);case Re:return h.name==m.name&&h.message==m.message;case Ot:case Ut:return h==m+"";case Ne:var fe=bh;case mt:var Ce=M&E;if(fe||(fe=xa),h.size!=m.size&&!Ce)return!1;var Ge=re.get(h);if(Ge)return Ge==m;M|=S,re.set(h,m);var je=j0(fe(h),fe(m),M,G,Y,re);return re.delete(h),je;case Gn:if(Ni)return Ni.call(h)==Ni.call(m)}return!1}function bm(h,m,C,M,G,Y){var re=C&E,fe=uf(h),Ce=fe.length,Ge=uf(m),je=Ge.length;if(Ce!=je&&!re)return!1;for(var Ve=Ce;Ve--;){var rt=fe[Ve];if(!(re?rt in m:wn.call(m,rt)))return!1}var xt=Y.get(h),Nt=Y.get(m);if(xt&&Nt)return xt==m&&Nt==h;var rn=!0;Y.set(h,m),Y.set(m,h);for(var Ht=re;++Ve<Ce;){rt=fe[Ve];var un=h[rt],vn=m[rt];if(M)var zo=re?M(vn,un,rt,m,h,Y):M(un,vn,rt,h,m,Y);if(!(zo===r?un===vn||G(un,vn,C,M,Y):zo)){rn=!1;break}Ht||(Ht=rt=="constructor")}if(rn&&!Ht){var $i=h.constructor,$o=m.constructor;$i!=$o&&"constructor"in h&&"constructor"in m&&!(typeof $i=="function"&&$i instanceof $i&&typeof $o=="function"&&$o instanceof $o)&&(rn=!1)}return Y.delete(h),Y.delete(m),rn}function ws(h){return ji(xd(h,r,Pd),h+"")}function uf(h){return Qh(h,Xr,Fo)}function cf(h){return Qh(h,ho,Om)}var md=$h?function(h){return $h.get(h)}:A2;function zu(h){for(var m=h.name+"",C=Du[m],M=wn.call(Du,m)?C.length:0;M--;){var G=C[M],Y=G.func;if(Y==null||Y==h)return G.name}return m}function Zs(h){var m=wn.call(X,"placeholder")?X:h;return m.placeholder}function kt(){var h=X.iteratee||T2;return h=h===T2?Iu:h,arguments.length?h(arguments[0],arguments[1]):h}function ff(h,m){var C=h.__data__;return $u(m)?C[typeof m=="string"?"string":"hash"]:C.map}function hf(h){for(var m=Xr(h),C=m.length;C--;){var M=m[C],G=h[M];m[C]=[M,G,pf(G)]}return m}function ka(h,m){var C=yu(h,m);return x0(C)?C:r}function vd(h){var m=wn.call(h,pl),C=h[pl];try{h[pl]=r;var M=!0}catch{}var G=jc.call(h);return M&&(m?h[pl]=C:delete h[pl]),G}var Fo=Gh?function(h){return h==null?[]:(h=Mn(h),ya(Gh(h),function(m){return Nh.call(h,m)}))}:B2,Om=Gh?function(h){for(var m=[];h;)wa(m,Fo(h)),h=bo(h);return m}:B2,Rr=Br;(Uc&&Rr(new Uc(new ArrayBuffer(1)))!=En||vl&&Rr(new vl)!=Ne||Xc&&Rr(Xc.resolve())!=St||Ea&&Rr(new Ea)!=mt||Kc&&Rr(new Kc)!=Fn)&&(Rr=function(h){var m=Br(h),C=m==Qe?h.constructor:r,M=C?ba(C):"";if(M)switch(M){case g0:return En;case Pa:return Ne;case hm:return St;case Au:return mt;case ls:return Fn}return m});function $0(h,m,C){for(var M=-1,G=C.length;++M<G;){var Y=C[M],re=Y.size;switch(Y.type){case"drop":h+=re;break;case"dropRight":m-=re;break;case"take":m=Gr(m,h+re);break;case"takeRight":h=cr(h,m-re);break}}return{start:h,end:m}}function Im(h){var m=h.match(lu);return m?m[1].split(kc):[]}function W0(h,m,C){m=vs(m,h);for(var M=-1,G=m.length,Y=!1;++M<G;){var re=No(m[M]);if(!(Y=h!=null&&C(h,re)))break;h=h[re]}return Y||++M!=G?Y:(G=h==null?0:h.length,!!G&&ev(G)&&Xn(re,G)&&(Yt(h)||Pf(h)))}function df(h){var m=h.length,C=new h.constructor(m);return m&&typeof h[0]=="string"&&wn.call(h,"index")&&(C.index=h.index,C.input=h.input),C}function kr(h){return typeof h.constructor=="function"&&!Qs(h)?Bu(bo(h)):{}}function e2(h,m,C){var M=h.constructor;switch(m){case mr:return sf(h);case Oe:case ie:return new M(+h);case En:return Sm(h,C);case In:case _r:case Ii:case Fs:case ts:case Mo:case sl:case Ro:case Zi:return Am(h,C);case Ne:return new M;case yt:case Ut:return new M(h);case Ot:return Tm(h);case mt:return new M;case Gn:return Dm(h)}}function t2(h,m){var C=m.length;if(!C)return h;var M=C-1;return m[M]=(C>1?"& ":"")+m[M],m=m.join(C>2?", ":" "),h.replace(au,`{
/* [wrapped with `+m+`] */
`)}function yd(h){return Yt(h)||Pf(h)||!!(um&&h&&h[um])}function Xn(h,m){var C=typeof h;return m=m??F,!!m&&(C=="number"||C!="symbol"&&yh.test(h))&&h>-1&&h%1==0&&h<m}function li(h,m,C){if(!ar(C))return!1;var M=typeof m;return(M=="number"?fo(C)&&Xn(m,C.length):M=="string"&&m in C)?ea(C[m],h):!1}function st(h,m){if(Yt(h))return!1;var C=typeof h;return C=="number"||C=="symbol"||C=="boolean"||h==null||jo(h)?!0:gh.test(h)||!Mc.test(h)||m!=null&&h in Mn(m)}function $u(h){var m=typeof h;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?h!=="__proto__":h===null}function gf(h){var m=zu(h),C=X[m];if(typeof C!="function"||!(m in qt.prototype))return!1;if(h===C)return!0;var M=md(C);return!!M&&h===M[0]}function Fm(h){return!!Fh&&Fh in h}var n2=Cu?Fl:M2;function Qs(h){var m=h&&h.constructor,C=typeof m=="function"&&m.prototype||as;return h===C}function pf(h){return h===h&&!ar(h)}function wd(h,m){return function(C){return C==null?!1:C[h]===m&&(m!==r||h in Mn(C))}}function Lm(h){var m=Ae(h,function(M){return C.size===d&&C.clear(),M}),C=m.cache;return m}function _m(h,m){var C=h[1],M=m[1],G=C|M,Y=G<(D|A|Z),re=M==Z&&C==b||M==Z&&C==ne&&h[7].length<=m[8]||M==(Z|ne)&&m[7].length<=m[8]&&C==b;if(!(Y||re))return h;M&D&&(h[2]=m[2],G|=C&D?0:P);var fe=m[3];if(fe){var Ce=h[3];h[3]=Ce?Bm(Ce,fe,m[4]):fe,h[4]=Ce?Ji(h[3],g):m[4]}return fe=m[5],fe&&(Ce=h[5],h[5]=Ce?O0(Ce,fe,m[6]):fe,h[6]=Ce?Ji(h[5],g):m[6]),fe=m[7],fe&&(h[7]=fe),M&Z&&(h[8]=h[8]==null?m[8]:Gr(h[8],m[8])),h[9]==null&&(h[9]=m[9]),h[0]=m[0],h[1]=G,h}function Nm(h){var m=[];if(h!=null)for(var C in Mn(h))m.push(C);return m}function V0(h){return jc.call(h)}function xd(h,m,C){return m=cr(m===r?h.length-1:m,0),function(){for(var M=arguments,G=-1,Y=cr(M.length-m,0),re=Be(Y);++G<Y;)re[G]=M[m+G];G=-1;for(var fe=Be(m+1);++G<m;)fe[G]=M[G];return fe[m]=C(re),ii(h,this,fe)}}function Cr(h,m){return m.length<2?h:Vs(h,Ur(m,0,-1))}function Lo(h,m){for(var C=h.length,M=Gr(m.length,C),G=si(h);M--;){var Y=m[M];h[M]=Xn(Y,C)?G[Y]:r}return h}function xs(h,m){if(!(m==="constructor"&&typeof h[m]=="function")&&m!="__proto__")return h[m]}var U0=_o(id),Wu=h0||function(h,m){return Vn.setTimeout(h,m)},ji=_o(ms);function X0(h,m,C){var M=m+"";return ji(h,t2(M,Hm(Im(M),C)))}function _o(h){var m=0,C=0;return function(){var M=Zw(),G=he-(M-C);if(C=M,G>0){if(++m>=ue)return arguments[0]}else m=0;return h.apply(r,arguments)}}function Cd(h,m){var C=-1,M=h.length,G=M-1;for(m=m===r?M:m;++C<m;){var Y=Fu(C,G),re=h[Y];h[Y]=h[C],h[C]=re}return h.length=m,h}var K0=Lm(function(h){var m=[];return h.charCodeAt(0)===46&&m.push(""),h.replace(al,function(C,M,G,Y){m.push(G?Y.replace(Xg,"$1"):M||C)}),m});function No(h){if(typeof h=="string"||jo(h))return h;var m=h+"";return m=="0"&&1/h==-N?"-0":m}function ba(h){if(h!=null){try{return Gc.call(h)}catch{}try{return h+""}catch{}}return""}function Hm(h,m){return Hr(se,function(C){var M="_."+C[0];m&C[1]&&!Mh(h,M)&&h.push(M)}),h.sort()}function Gm(h){if(h instanceof qt)return h.clone();var m=new jr(h.__wrapped__,h.__chain__);return m.__actions__=si(h.__actions__),m.__index__=h.__index__,m.__values__=h.__values__,m}function Ed(h,m,C){(C?li(h,m,C):m===r)?m=1:m=cr(en(m),0);var M=h==null?0:h.length;if(!M||m<1)return[];for(var G=0,Y=0,re=Be(ml(M/m));G<M;)re[Y++]=Ur(h,G,G+=m);return re}function q0(h){for(var m=-1,C=h==null?0:h.length,M=0,G=[];++m<C;){var Y=h[m];Y&&(G[M++]=Y)}return G}function uo(){var h=arguments.length;if(!h)return[];for(var m=Be(h-1),C=arguments[0],M=h;M--;)m[M-1]=arguments[M];return wa(Yt(C)?si(C):[C],er(m,1))}var mn=Jt(function(h,m){return wr(h)?ds(h,er(m,1,wr,!0)):[]}),Er=Jt(function(h,m){var C=ui(m);return wr(C)&&(C=r),wr(h)?ds(h,er(m,1,wr,!0),kt(C,2)):[]}),fr=Jt(function(h,m){var C=ui(m);return wr(C)&&(C=r),wr(h)?ds(h,er(m,1,wr,!0),r,C):[]});function br(h,m,C){var M=h==null?0:h.length;return M?(m=C||m===r?1:en(m),Ur(h,m<0?0:m,M)):[]}function zi(h,m,C){var M=h==null?0:h.length;return M?(m=C||m===r?1:en(m),m=M-m,Ur(h,0,m<0?0:m)):[]}function Vu(h,m){return h&&h.length?rf(h,kt(m,3),!0,!0):[]}function yr(h,m){return h&&h.length?rf(h,kt(m,3),!0):[]}function mf(h,m,C,M){var G=h==null?0:h.length;return G?(C&&typeof C!="number"&&li(h,m,C)&&(C=0,M=G),xm(h,m,C,M)):[]}function Oa(h,m,C){var M=h==null?0:h.length;if(!M)return-1;var G=C==null?0:en(C);return G<0&&(G=cr(M+G,0)),Rh(h,kt(m,3),G)}function vf(h,m,C){var M=h==null?0:h.length;if(!M)return-1;var G=M-1;return C!==r&&(G=en(C),G=C<0?cr(M+G,0):Gr(G,M-1)),Rh(h,kt(m,3),G,!0)}function Pd(h){var m=h==null?0:h.length;return m?er(h,1):[]}function yf(h){var m=h==null?0:h.length;return m?er(h,N):[]}function Ai(h,m){var C=h==null?0:h.length;return C?(m=m===r?1:en(m),er(h,m)):[]}function Y0(h){for(var m=-1,C=h==null?0:h.length,M={};++m<C;){var G=h[m];M[G[0]]=G[1]}return M}function Ml(h){return h&&h.length?h[0]:r}function Js(h,m,C){var M=h==null?0:h.length;if(!M)return-1;var G=C==null?0:en(C);return G<0&&(G=cr(M+G,0)),vu(h,m,G)}function Sd(h){var m=h==null?0:h.length;return m?Ur(h,0,-1):[]}var Z0=Jt(function(h){var m=Ln(h,Nu);return m.length&&m[0]===h[0]?Jh(m):[]}),Ia=Jt(function(h){var m=ui(h),C=Ln(h,Nu);return m===ui(C)?m=r:C.pop(),C.length&&C[0]===h[0]?Jh(C,kt(m,2)):[]}),Td=Jt(function(h){var m=ui(h),C=Ln(h,Nu);return m=typeof m=="function"?m:r,m&&C.pop(),C.length&&C[0]===h[0]?Jh(C,r,m):[]});function Fa(h,m){return h==null?"":jh.call(h,m)}function ui(h){var m=h==null?0:h.length;return m?h[m-1]:r}function wf(h,m,C){var M=h==null?0:h.length;if(!M)return-1;var G=M;return C!==r&&(G=en(C),G=G<0?cr(M+G,0):Gr(G,M-1)),m===m?Xw(h,m,G):Rh(h,q1,G,!0)}function Q0(h,m){return h&&h.length?rd(h,en(m)):r}var Dd=Jt(xf);function xf(h,m){return h&&h.length&&m&&m.length?or(h,m):h}function ci(h,m,C){return h&&h.length&&m&&m.length?or(h,m,kt(C,2)):h}function La(h,m,C){return h&&h.length&&m&&m.length?or(h,m,r,C):h}var Ho=ws(function(h,m){var C=h==null?0:h.length,M=Yh(h,m);return vr(h,Ln(m,function(G){return Xn(G,C)?+G:G}).sort(b0)),M});function Bi(h,m){var C=[];if(!(h&&h.length))return C;var M=-1,G=[],Y=h.length;for(m=kt(m,3);++M<Y;){var re=h[M];m(re,M,h)&&(C.push(re),G.push(M))}return vr(h,G),C}function Ad(h){return h==null?h:zh.call(h)}function J0(h,m,C){var M=h==null?0:h.length;return M?(C&&typeof C!="number"&&li(h,m,C)?(m=0,C=M):(m=m==null?0:en(m),C=C===r?M:en(C)),Ur(h,m,C)):[]}function ep(h,m){return Lu(h,m)}function r2(h,m,C){return od(h,m,kt(C,2))}function _a(h,m){var C=h==null?0:h.length;if(C){var M=Lu(h,m);if(M<C&&ea(h[M],m))return M}return-1}function jm(h,m){return Lu(h,m,!0)}function tp(h,m,C){return od(h,m,kt(C,2),!0)}function Rl(h,m){var C=h==null?0:h.length;if(C){var M=Lu(h,m,!0)-1;if(ea(h[M],m))return M}return-1}function np(h){return h&&h.length?A0(h):[]}function kl(h,m){return h&&h.length?A0(h,kt(m,2)):[]}function zm(h){var m=h==null?0:h.length;return m?Ur(h,1,m):[]}function $m(h,m,C){return h&&h.length?(m=C||m===r?1:en(m),Ur(h,0,m<0?0:m)):[]}function rp(h,m,C){var M=h==null?0:h.length;return M?(m=C||m===r?1:en(m),m=M-m,Ur(h,m<0?0:m,M)):[]}function Bd(h,m){return h&&h.length?rf(h,kt(m,3),!1,!0):[]}function i2(h,m){return h&&h.length?rf(h,kt(m,3)):[]}var o2=Jt(function(h){return qs(er(h,1,wr,!0))}),Wm=Jt(function(h){var m=ui(h);return wr(m)&&(m=r),qs(er(h,1,wr,!0),kt(m,2))}),Vm=Jt(function(h){var m=ui(h);return m=typeof m=="function"?m:r,qs(er(h,1,wr,!0),r,m)});function bl(h){return h&&h.length?qs(h):[]}function s2(h,m){return h&&h.length?qs(h,kt(m,2)):[]}function Uu(h,m){return m=typeof m=="function"?m:r,h&&h.length?qs(h,r,m):[]}function Md(h){if(!(h&&h.length))return[];var m=0;return h=ya(h,function(C){if(wr(C))return m=cr(C.length,m),!0}),a0(m,function(C){return Ln(h,o0(C))})}function Yn(h,m){if(!(h&&h.length))return[];var C=Md(h);return m==null?C:Ln(C,function(M){return ii(m,r,M)})}var a2=Jt(function(h,m){return wr(h)?ds(h,m):[]}),Um=Jt(function(h){return ad(ya(h,wr))}),l2=Jt(function(h){var m=ui(h);return wr(m)&&(m=r),ad(ya(h,wr),kt(m,2))}),u2=Jt(function(h){var m=ui(h);return m=typeof m=="function"?m:r,ad(ya(h,wr),r,m)}),Xm=Jt(Md);function Km(h,m){return of(h||[],m||[],Cl)}function c2(h,m){return of(h||[],m||[],Dl)}var co=Jt(function(h){var m=h.length,C=m>1?h[m-1]:r;return C=typeof C=="function"?(h.pop(),C):r,Yn(h,C)});function Rd(h){var m=X(h);return m.__chain__=!0,m}function f2(h,m){return m(h),h}function Go(h,m){return m(h)}var kd=ws(function(h){var m=h.length,C=m?h[0]:0,M=this.__wrapped__,G=function(Y){return Yh(Y,h)};return m>1||this.__actions__.length||!(M instanceof qt)||!Xn(C)?this.thru(G):(M=M.slice(C,+C+(m?1:0)),M.__actions__.push({func:Go,args:[G],thisArg:r}),new jr(M,this.__chain__).thru(function(Y){return m&&!Y.length&&Y.push(r),Y}))});function Ol(){return Rd(this)}function bd(){return new jr(this.value(),this.__chain__)}function ip(){this.__values__===r&&(this.__values__=wP(this.value()));var h=this.__index__>=this.__values__.length,m=h?r:this.__values__[this.__index__++];return{done:h,value:m}}function op(){return this}function h2(h){for(var m,C=this;C instanceof us;){var M=Gm(C);M.__index__=0,M.__values__=r,m?G.__wrapped__=M:m=M;var G=M;C=C.__wrapped__}return G.__wrapped__=h,m}function sp(){var h=this.__wrapped__;if(h instanceof qt){var m=h;return this.__actions__.length&&(m=new qt(this)),m=m.reverse(),m.__actions__.push({func:Go,args:[Ad],thisArg:r}),new jr(m,this.__chain__)}return this.thru(Ad)}function d2(){return _u(this.__wrapped__,this.__actions__)}var qm=cd(function(h,m,C){wn.call(h,C)?++h[C]:hs(h,C,1)});function Ym(h,m,C){var M=Yt(h)?e0:Zc;return C&&li(h,m,C)&&(m=r),M(h,kt(m,3))}function Od(h,m){var C=Yt(h)?ya:y0;return C(h,kt(m,3))}var Id=Bl(Oa),Zm=Bl(vf);function ap(h,m){return er(Il(h,m),1)}function g2(h,m){return er(Il(h,m),N)}function Qm(h,m,C){return C=C===r?1:en(C),er(Il(h,m),C)}function Fd(h,m){var C=Yt(h)?Hr:gs;return C(h,kt(m,3))}function Cf(h,m){var C=Yt(h)?Bh:wm;return C(h,kt(m,3))}var lp=cd(function(h,m,C){wn.call(h,C)?h[C].push(m):hs(h,C,[m])});function Ld(h,m,C,M){h=fo(h)?h:Hd(h),C=C&&!M?en(C):0;var G=h.length;return C<0&&(C=cr(G+C,0)),tv(h)?C<=G&&h.indexOf(m,C)>-1:!!G&&vu(h,m,C)>-1}var Jm=Jt(function(h,m,C){var M=-1,G=typeof m=="function",Y=fo(h)?Be(h.length):[];return gs(h,function(re){Y[++M]=G?ii(m,re,C):oo(re,m,C)}),Y}),p2=cd(function(h,m,C){hs(h,C,m)});function Il(h,m){var C=Yt(h)?Ln:E0;return C(h,kt(m,3))}function m2(h,m,C,M){return h==null?[]:(Yt(m)||(m=m==null?[]:[m]),C=M?r:C,Yt(C)||(C=C==null?[]:[C]),tf(h,m,C))}var Ef=cd(function(h,m,C){h[C?0:1].push(m)},function(){return[[],[]]});function v2(h,m,C){var M=Yt(h)?n0:Z1,G=arguments.length<3;return M(h,kt(m,4),C,G,gs)}function _d(h,m,C){var M=Yt(h)?Hw:Z1,G=arguments.length<3;return M(h,kt(m,4),C,G,wm)}function l(h,m){var C=Yt(h)?ya:y0;return C(h,Ye(kt(m,3)))}function c(h){var m=Yt(h)?fs:Vr;return m(h)}function v(h,m,C){(C?li(h,m,C):m===r)?m=1:m=en(m);var M=Yt(h)?xl:T0;return M(h,m)}function x(h){var m=Yt(h)?vm:ao;return m(h)}function T(h){if(h==null)return 0;if(fo(h))return tv(h)?gl(h):h.length;var m=Rr(h);return m==Ne||m==mt?h.size:Ks(h).length}function B(h,m,C){var M=Yt(h)?r0:D0;return C&&li(h,m,C)&&(m=r),M(h,kt(m,3))}var $=Jt(function(h,m){if(h==null)return[];var C=m.length;return C>1&&li(h,m[0],m[1])?m=[]:C>2&&li(m[0],m[1],m[2])&&(m=[m[0]]),tf(h,er(m,1),[])}),te=jn||function(){return Vn.Date.now()};function ce(h,m){if(typeof m!="function")throw new eo(a);return h=en(h),function(){if(--h<1)return m.apply(this,arguments)}}function Me(h,m,C){return m=C?r:m,m=h&&m==null?h.length:m,ys(h,Z,r,r,r,r,m)}function $e(h,m){var C;if(typeof m!="function")throw new eo(a);return h=en(h),function(){return--h>0&&(C=m.apply(this,arguments)),h<=1&&(m=r),C}}var Ue=Jt(function(h,m,C){var M=D;if(C.length){var G=Ji(C,Zs(Ue));M|=L}return ys(h,M,m,C,G)}),ze=Jt(function(h,m,C){var M=D|A;if(C.length){var G=Ji(C,Zs(ze));M|=L}return ys(m,M,h,C,G)});function ot(h,m,C){m=C?r:m;var M=ys(h,b,r,r,r,r,r,m);return M.placeholder=ot.placeholder,M}function ht(h,m,C){m=C?r:m;var M=ys(h,R,r,r,r,r,r,m);return M.placeholder=ht.placeholder,M}function pt(h,m,C){var M,G,Y,re,fe,Ce,Ge=0,je=!1,Ve=!1,rt=!0;if(typeof h!="function")throw new eo(a);m=Cs(m)||0,ar(C)&&(je=!!C.leading,Ve="maxWait"in C,Y=Ve?cr(Cs(C.maxWait)||0,m):Y,rt="trailing"in C?!!C.trailing:rt);function xt(xr){var ta=M,_l=G;return M=G=r,Ge=xr,re=h.apply(_l,ta),re}function Nt(xr){return Ge=xr,fe=Wu(un,m),je?xt(xr):re}function rn(xr){var ta=xr-Ce,_l=xr-Ge,bP=m-ta;return Ve?Gr(bP,Y-_l):bP}function Ht(xr){var ta=xr-Ce,_l=xr-Ge;return Ce===r||ta>=m||ta<0||Ve&&_l>=Y}function un(){var xr=te();if(Ht(xr))return vn(xr);fe=Wu(un,rn(xr))}function vn(xr){return fe=r,rt&&M?xt(xr):(M=G=r,re)}function zo(){fe!==r&&R0(fe),Ge=0,M=Ce=G=fe=r}function $i(){return fe===r?re:vn(te())}function $o(){var xr=te(),ta=Ht(xr);if(M=arguments,G=this,Ce=xr,ta){if(fe===r)return Nt(Ce);if(Ve)return R0(fe),fe=Wu(un,m),xt(Ce)}return fe===r&&(fe=Wu(un,m)),re}return $o.cancel=zo,$o.flush=$i,$o}var sr=Jt(function(h,m){return v0(h,1,m)}),Te=Jt(function(h,m,C){return v0(h,Cs(m)||0,C)});function pe(h){return ys(h,le)}function Ae(h,m){if(typeof h!="function"||m!=null&&typeof m!="function")throw new eo(a);var C=function(){var M=arguments,G=m?m.apply(this,M):M[0],Y=C.cache;if(Y.has(G))return Y.get(G);var re=h.apply(this,M);return C.cache=Y.set(G,re)||Y,re};return C.cache=new(Ae.Cache||to),C}Ae.Cache=to;function Ye(h){if(typeof h!="function")throw new eo(a);return function(){var m=arguments;switch(m.length){case 0:return!h.call(this);case 1:return!h.call(this,m[0]);case 2:return!h.call(this,m[0],m[1]);case 3:return!h.call(this,m[0],m[1],m[2])}return!h.apply(this,m)}}function wt(h){return $e(2,h)}var Rt=Pm(function(h,m){m=m.length==1&&Yt(m[0])?Ln(m[0],Li(kt())):Ln(er(m,1),Li(kt()));var C=m.length;return Jt(function(M){for(var G=-1,Y=Gr(M.length,C);++G<Y;)M[G]=m[G].call(this,M[G]);return ii(h,this,M)})}),At=Jt(function(h,m){var C=Ji(m,Zs(At));return ys(h,L,r,m,C)}),_t=Jt(function(h,m){var C=Ji(m,Zs(_t));return ys(h,V,r,m,C)}),Pr=ws(function(h,m){return ys(h,ne,r,r,r,m)});function xn(h,m){if(typeof h!="function")throw new eo(a);return m=m===r?m:en(m),Jt(h,m)}function Na(h,m){if(typeof h!="function")throw new eo(a);return m=m==null?0:cr(en(m),0),Jt(function(C){var M=C[m],G=Ys(C,0,m);return M&&wa(G,M),ii(h,this,G)})}function y2(h,m,C){var M=!0,G=!0;if(typeof h!="function")throw new eo(a);return ar(C)&&(M="leading"in C?!!C.leading:M,G="trailing"in C?!!C.trailing:G),pt(h,m,{leading:M,maxWait:m,trailing:G})}function xM(h){return Me(h,1)}function CM(h,m){return At(ld(m),h)}function EM(){if(!arguments.length)return[];var h=arguments[0];return Yt(h)?h:[h]}function PM(h){return Ti(h,w)}function SM(h,m){return m=typeof m=="function"?m:r,Ti(h,w,m)}function TM(h){return Ti(h,p|w)}function DM(h,m){return m=typeof m=="function"?m:r,Ti(h,p|w,m)}function AM(h,m){return m==null||Yc(h,m,Xr(m))}function ea(h,m){return h===m||h!==h&&m!==m}var BM=pd(Ba),MM=pd(function(h,m){return h>=m}),Pf=ed(function(){return arguments}())?ed:function(h){return hr(h)&&wn.call(h,"callee")&&!Nh.call(h,"callee")},Yt=Be.isArray,RM=Qg?Li(Qg):Cm;function fo(h){return h!=null&&ev(h.length)&&!Fl(h)}function wr(h){return hr(h)&&fo(h)}function kM(h){return h===!0||h===!1||hr(h)&&Br(h)==Oe}var Xu=d0||M2,bM=Ci?Li(Ci):Xs;function OM(h){return hr(h)&&h.nodeType===1&&!up(h)}function IM(h){if(h==null)return!0;if(fo(h)&&(Yt(h)||typeof h=="string"||typeof h.splice=="function"||Xu(h)||Nd(h)||Pf(h)))return!h.length;var m=Rr(h);if(m==Ne||m==mt)return!h.size;if(Qs(h))return!Ks(h).length;for(var C in h)if(wn.call(h,C))return!1;return!0}function FM(h,m){return so(h,m)}function LM(h,m,C){C=typeof C=="function"?C:r;var M=C?C(h,m):r;return M===r?so(h,m,r,C):!!M}function w2(h){if(!hr(h))return!1;var m=Br(h);return m==Re||m==De||typeof h.message=="string"&&typeof h.name=="string"&&!up(h)}function _M(h){return typeof h=="number"&&Pu(h)}function Fl(h){if(!ar(h))return!1;var m=Br(h);return m==Ie||m==ct||m==be||m==ft}function pP(h){return typeof h=="number"&&h==en(h)}function ev(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=F}function ar(h){var m=typeof h;return h!=null&&(m=="object"||m=="function")}function hr(h){return h!=null&&typeof h=="object"}var mP=dl?Li(dl):Em;function NM(h,m){return h===m||Ou(h,m,hf(m))}function HM(h,m,C){return C=typeof C=="function"?C:r,Ou(h,m,hf(m),C)}function GM(h){return vP(h)&&h!=+h}function jM(h){if(n2(h))throw new zt(s);return x0(h)}function zM(h){return h===null}function $M(h){return h==null}function vP(h){return typeof h=="number"||hr(h)&&Br(h)==yt}function up(h){if(!hr(h)||Br(h)!=Qe)return!1;var m=bo(h);if(m===null)return!0;var C=wn.call(m,"constructor")&&m.constructor;return typeof C=="function"&&C instanceof C&&Gc.call(C)==Lh}var x2=Ah?Li(Ah):Jc;function WM(h){return pP(h)&&h>=-F&&h<=F}var yP=mu?Li(mu):ps;function tv(h){return typeof h=="string"||!Yt(h)&&hr(h)&&Br(h)==Ut}function jo(h){return typeof h=="symbol"||hr(h)&&Br(h)==Gn}var Nd=U1?Li(U1):ef;function VM(h){return h===r}function UM(h){return hr(h)&&Rr(h)==Fn}function XM(h){return hr(h)&&Br(h)==wi}var KM=pd(Ma),qM=pd(function(h,m){return h<=m});function wP(h){if(!h)return[];if(fo(h))return tv(h)?_i(h):si(h);if(zs&&h[zs])return Vw(h[zs]());var m=Rr(h),C=m==Ne?bh:m==mt?xa:Hd;return C(h)}function Ll(h){if(!h)return h===0?h:0;if(h=Cs(h),h===N||h===-N){var m=h<0?-1:1;return m*j}return h===h?h:0}function en(h){var m=Ll(h),C=m%1;return m===m?C?m-C:m:0}function xP(h){return h?Ws(en(h),0,I):0}function Cs(h){if(typeof h=="number")return h;if(jo(h))return U;if(ar(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=ar(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=Q1(h);var C=Kg.test(h);return C||vh.test(h)?Th(h.slice(2),C?2:8):ph.test(h)?U:+h}function CP(h){return Io(h,ho(h))}function YM(h){return h?Ws(en(h),-F,F):h===0?h:0}function Rn(h){return h==null?"":Di(h)}var ZM=Hu(function(h,m){if(Qs(m)||fo(m)){Io(m,Xr(m),h);return}for(var C in m)wn.call(m,C)&&Cl(h,C,m[C])}),EP=Hu(function(h,m){Io(m,ho(m),h)}),nv=Hu(function(h,m,C,M){Io(m,ho(m),h,M)}),QM=Hu(function(h,m,C,M){Io(m,Xr(m),h,M)}),JM=ws(Yh);function eR(h,m){var C=Bu(h);return m==null?C:$n(C,m)}var tR=Jt(function(h,m){h=Mn(h);var C=-1,M=m.length,G=M>2?m[2]:r;for(G&&li(m[0],m[1],G)&&(M=1);++C<M;)for(var Y=m[C],re=ho(Y),fe=-1,Ce=re.length;++fe<Ce;){var Ge=re[fe],je=h[Ge];(je===r||ea(je,as[Ge])&&!wn.call(h,Ge))&&(h[Ge]=Y[Ge])}return h}),nR=Jt(function(h){return h.push(r,H0),ii(PP,r,h)});function rR(h,m){return K1(h,kt(m,3),Gi)}function iR(h,m){return K1(h,kt(m,3),Aa)}function oR(h,m){return h==null?h:Zh(h,kt(m,3),ho)}function sR(h,m){return h==null?h:Qc(h,kt(m,3),ho)}function aR(h,m){return h&&Gi(h,kt(m,3))}function lR(h,m){return h&&Aa(h,kt(m,3))}function uR(h){return h==null?[]:bu(h,Xr(h))}function cR(h){return h==null?[]:bu(h,ho(h))}function C2(h,m,C){var M=h==null?r:Vs(h,m);return M===r?C:M}function fR(h,m){return h!=null&&W0(h,m,io)}function E2(h,m){return h!=null&&W0(h,m,Pl)}var hR=Mm(function(h,m,C){m!=null&&typeof m.toString!="function"&&(m=jc.call(m)),h[m]=C},S2(go)),dR=Mm(function(h,m,C){m!=null&&typeof m.toString!="function"&&(m=jc.call(m)),wn.call(h,m)?h[m].push(C):h[m]=[C]},kt),gR=Jt(oo);function Xr(h){return fo(h)?cs(h):Ks(h)}function ho(h){return fo(h)?cs(h,!0):C0(h)}function pR(h,m){var C={};return m=kt(m,3),Gi(h,function(M,G,Y){hs(C,m(M,G,Y),M)}),C}function mR(h,m){var C={};return m=kt(m,3),Gi(h,function(M,G,Y){hs(C,G,m(M,G,Y))}),C}var vR=Hu(function(h,m,C){Sl(h,m,C)}),PP=Hu(function(h,m,C,M){Sl(h,m,C,M)}),yR=ws(function(h,m){var C={};if(h==null)return C;var M=!1;m=Ln(m,function(Y){return Y=vs(Y,h),M||(M=Y.length>1),Y}),Io(h,cf(h),C),M&&(C=Ti(C,p|y|w,G0));for(var G=m.length;G--;)sd(C,m[G]);return C});function wR(h,m){return SP(h,Ye(kt(m)))}var xR=ws(function(h,m){return h==null?{}:S0(h,m)});function SP(h,m){if(h==null)return{};var C=Ln(cf(h),function(M){return[M]});return m=kt(m),Ra(h,C,function(M,G){return m(M,G[0])})}function CR(h,m,C){m=vs(m,h);var M=-1,G=m.length;for(G||(G=1,h=r);++M<G;){var Y=h==null?r:h[No(m[M])];Y===r&&(M=G,Y=C),h=Fl(Y)?Y.call(h):Y}return h}function ER(h,m,C){return h==null?h:Dl(h,m,C)}function PR(h,m,C,M){return M=typeof M=="function"?M:r,h==null?h:Dl(h,m,C,M)}var TP=_0(Xr),DP=_0(ho);function SR(h,m,C){var M=Yt(h),G=M||Xu(h)||Nd(h);if(m=kt(m,4),C==null){var Y=h&&h.constructor;G?C=M?new Y:[]:ar(h)?C=Fl(Y)?Bu(bo(h)):{}:C={}}return(G?Hr:Gi)(h,function(re,fe,Ce){return m(C,re,fe,Ce)}),C}function TR(h,m){return h==null?!0:sd(h,m)}function DR(h,m,C){return h==null?h:M0(h,m,ld(C))}function AR(h,m,C,M){return M=typeof M=="function"?M:r,h==null?h:M0(h,m,ld(C),M)}function Hd(h){return h==null?[]:Nc(h,Xr(h))}function BR(h){return h==null?[]:Nc(h,ho(h))}function MR(h,m,C){return C===r&&(C=m,m=r),C!==r&&(C=Cs(C),C=C===C?C:0),m!==r&&(m=Cs(m),m=m===m?m:0),Ws(Cs(h),m,C)}function RR(h,m,C){return m=Ll(m),C===r?(C=m,m=0):C=Ll(C),h=Cs(h),w0(h,m,C)}function kR(h,m,C){if(C&&typeof C!="boolean"&&li(h,m,C)&&(m=C=r),C===r&&(typeof m=="boolean"?(C=m,m=r):typeof h=="boolean"&&(C=h,h=r)),h===r&&m===r?(h=0,m=1):(h=Ll(h),m===r?(m=h,h=0):m=Ll(m)),h>m){var M=h;h=m,m=M}if(C||h%1||m%1){var G=Vc();return Gr(h+G*(m-h+Yg("1e-"+((G+"").length-1))),m)}return Fu(h,m)}var bR=Al(function(h,m,C){return m=m.toLowerCase(),h+(C?AP(m):m)});function AP(h){return P2(Rn(h).toLowerCase())}function BP(h){return h=Rn(h),h&&h.replace(wh,tm).replace(z1,"")}function OR(h,m,C){h=Rn(h),m=Di(m);var M=h.length;C=C===r?M:Ws(en(C),0,M);var G=C;return C-=m.length,C>=0&&h.slice(C,G)==m}function IR(h){return h=Rn(h),h&&fh.test(h)?h.replace(_s,nm):h}function FR(h){return h=Rn(h),h&&ul.test(h)?h.replace(ll,"\\$&"):h}var LR=Al(function(h,m,C){return h+(C?"-":"")+m.toLowerCase()}),_R=Al(function(h,m,C){return h+(C?" ":"")+m.toLowerCase()}),NR=I0("toLowerCase");function HR(h,m,C){h=Rn(h),m=en(m);var M=m?gl(h):0;if(!m||M>=m)return h;var G=(m-M)/2;return lf(Ca(G),C)+h+lf(ml(G),C)}function GR(h,m,C){h=Rn(h),m=en(m);var M=m?gl(h):0;return m&&M<m?h+lf(m-M,C):h}function jR(h,m,C){h=Rn(h),m=en(m);var M=m?gl(h):0;return m&&M<m?lf(m-M,C)+h:h}function zR(h,m,C){return C||m==null?m=0:m&&(m=+m),fm(Rn(h).replace(Rc,""),m||0)}function $R(h,m,C){return(C?li(h,m,C):m===r)?m=1:m=en(m),Tl(Rn(h),m)}function WR(){var h=arguments,m=Rn(h[0]);return h.length<3?m:m.replace(h[1],h[2])}var VR=Al(function(h,m,C){return h+(C?"_":"")+m.toLowerCase()});function UR(h,m,C){return C&&typeof C!="number"&&li(h,m,C)&&(m=C=r),C=C===r?I:C>>>0,C?(h=Rn(h),h&&(typeof m=="string"||m!=null&&!x2(m))&&(m=Di(m),!m&&wu(h))?Ys(_i(h),0,C):h.split(m,C)):[]}var XR=Al(function(h,m,C){return h+(C?" ":"")+P2(m)});function KR(h,m,C){return h=Rn(h),C=C==null?0:Ws(en(C),0,h.length),m=Di(m),h.slice(C,C+m.length)==m}function qR(h,m,C){var M=X.templateSettings;C&&li(h,m,C)&&(m=r),h=Rn(h),m=nv({},m,M,N0);var G=nv({},m.imports,M.imports,N0),Y=Xr(G),re=Nc(G,Y),fe,Ce,Ge=0,je=m.interpolate||uu,Ve="__p += '",rt=Hc((m.escape||uu).source+"|"+je.source+"|"+(je===Bc?Ns:uu).source+"|"+(m.evaluate||uu).source+"|$","g"),xt="//# sourceURL="+(wn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lw+"]")+`
`;h.replace(rt,function(Ht,un,vn,zo,$i,$o){return vn||(vn=zo),Ve+=h.slice(Ge,$o).replace(xh,rm),un&&(fe=!0,Ve+=`' +
__e(`+un+`) +
'`),$i&&(Ce=!0,Ve+=`';
`+$i+`;
__p += '`),vn&&(Ve+=`' +
((__t = (`+vn+`)) == null ? '' : __t) +
'`),Ge=$o+Ht.length,Ht}),Ve+=`';
`;var Nt=wn.call(m,"variable")&&m.variable;if(!Nt)Ve=`with (obj) {
`+Ve+`
}
`;else if(Ug.test(Nt))throw new zt(u);Ve=(Ce?Ve.replace(su,""):Ve).replace(Dc,"$1").replace(Qi,"$1;"),Ve="function("+(Nt||"obj")+`) {
`+(Nt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(Ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ve+`return __p
}`;var rn=RP(function(){return yn(Y,xt+"return "+Ve).apply(r,re)});if(rn.source=Ve,w2(rn))throw rn;return rn}function YR(h){return Rn(h).toLowerCase()}function ZR(h){return Rn(h).toUpperCase()}function QR(h,m,C){if(h=Rn(h),h&&(C||m===r))return Q1(h);if(!h||!(m=Di(m)))return h;var M=_i(h),G=_i(m),Y=J1(M,G),re=l0(M,G)+1;return Ys(M,Y,re).join("")}function JR(h,m,C){if(h=Rn(h),h&&(C||m===r))return h.slice(0,Ih(h)+1);if(!h||!(m=Di(m)))return h;var M=_i(h),G=l0(M,_i(m))+1;return Ys(M,0,G).join("")}function e9(h,m,C){if(h=Rn(h),h&&(C||m===r))return h.replace(Rc,"");if(!h||!(m=Di(m)))return h;var M=_i(h),G=J1(M,_i(m));return Ys(M,G).join("")}function t9(h,m){var C=de,M=Pe;if(ar(m)){var G="separator"in m?m.separator:G;C="length"in m?en(m.length):C,M="omission"in m?Di(m.omission):M}h=Rn(h);var Y=h.length;if(wu(h)){var re=_i(h);Y=re.length}if(C>=Y)return h;var fe=C-gl(M);if(fe<1)return M;var Ce=re?Ys(re,0,fe).join(""):h.slice(0,fe);if(G===r)return Ce+M;if(re&&(fe+=Ce.length-fe),x2(G)){if(h.slice(fe).search(G)){var Ge,je=Ce;for(G.global||(G=Hc(G.source,Rn(bc.exec(G))+"g")),G.lastIndex=0;Ge=G.exec(je);)var Ve=Ge.index;Ce=Ce.slice(0,Ve===r?fe:Ve)}}else if(h.indexOf(Di(G),fe)!=fe){var rt=Ce.lastIndexOf(G);rt>-1&&(Ce=Ce.slice(0,rt))}return Ce+M}function n9(h){return h=Rn(h),h&&Ac.test(h)?h.replace(Ls,im):h}var r9=Al(function(h,m,C){return h+(C?" ":"")+m.toUpperCase()}),P2=I0("toUpperCase");function MP(h,m,C){return h=Rn(h),m=C?r:m,m===r?Ww(h)?Kw(h):jw(h):h.match(m)||[]}var RP=Jt(function(h,m){try{return ii(h,r,m)}catch(C){return w2(C)?C:new zt(C)}}),i9=ws(function(h,m){return Hr(m,function(C){C=No(C),hs(h,C,Ue(h[C],h))}),h});function o9(h){var m=h==null?0:h.length,C=kt();return h=m?Ln(h,function(M){if(typeof M[1]!="function")throw new eo(a);return[C(M[0]),M[1]]}):[],Jt(function(M){for(var G=-1;++G<m;){var Y=h[G];if(ii(Y[0],this,M))return ii(Y[1],this,M)}})}function s9(h){return ym(Ti(h,p))}function S2(h){return function(){return h}}function a9(h,m){return h==null||h!==h?m:h}var l9=dd(),u9=dd(!0);function go(h){return h}function T2(h){return Iu(typeof h=="function"?h:Ti(h,p))}function c9(h){return nd(Ti(h,p))}function f9(h,m){return Un(h,Ti(m,p))}var h9=Jt(function(h,m){return function(C){return oo(C,h,m)}}),d9=Jt(function(h,m){return function(C){return oo(h,C,m)}});function D2(h,m,C){var M=Xr(m),G=bu(m,M);C==null&&!(ar(m)&&(G.length||!M.length))&&(C=m,m=h,h=this,G=bu(m,Xr(m)));var Y=!(ar(C)&&"chain"in C)||!!C.chain,re=Fl(h);return Hr(G,function(fe){var Ce=m[fe];h[fe]=Ce,re&&(h.prototype[fe]=function(){var Ge=this.__chain__;if(Y||Ge){var je=h(this.__wrapped__),Ve=je.__actions__=si(this.__actions__);return Ve.push({func:Ce,args:arguments,thisArg:h}),je.__chain__=Ge,je}return Ce.apply(h,wa([this.value()],arguments))})}),h}function g9(){return Vn._===this&&(Vn._=am),this}function A2(){}function p9(h){return h=en(h),Jt(function(m){return rd(m,h)})}var m9=gd(Ln),v9=gd(e0),y9=gd(r0);function kP(h){return st(h)?o0(No(h)):qn(h)}function w9(h){return function(m){return h==null?r:Vs(h,m)}}var x9=L0(),C9=L0(!0);function B2(){return[]}function M2(){return!1}function E9(){return{}}function P9(){return""}function S9(){return!0}function T9(h,m){if(h=en(h),h<1||h>F)return[];var C=I,M=Gr(h,I);m=kt(m),h-=I;for(var G=a0(M,m);++C<h;)m(C);return G}function D9(h){return Yt(h)?Ln(h,No):jo(h)?[h]:si(K0(Rn(h)))}function A9(h){var m=++Eu;return Rn(h)+m}var B9=af(function(h,m){return h+m},0),M9=Mr("ceil"),R9=af(function(h,m){return h/m},1),k9=Mr("floor");function b9(h){return h&&h.length?El(h,go,Ba):r}function O9(h,m){return h&&h.length?El(h,kt(m,2),Ba):r}function I9(h){return Y1(h,go)}function F9(h,m){return Y1(h,kt(m,2))}function L9(h){return h&&h.length?El(h,go,Ma):r}function _9(h,m){return h&&h.length?El(h,kt(m,2),Ma):r}var N9=af(function(h,m){return h*m},1),H9=Mr("round"),G9=af(function(h,m){return h-m},0);function j9(h){return h&&h.length?s0(h,go):0}function z9(h,m){return h&&h.length?s0(h,kt(m,2)):0}return X.after=ce,X.ary=Me,X.assign=ZM,X.assignIn=EP,X.assignInWith=nv,X.assignWith=QM,X.at=JM,X.before=$e,X.bind=Ue,X.bindAll=i9,X.bindKey=ze,X.castArray=EM,X.chain=Rd,X.chunk=Ed,X.compact=q0,X.concat=uo,X.cond=o9,X.conforms=s9,X.constant=S2,X.countBy=qm,X.create=eR,X.curry=ot,X.curryRight=ht,X.debounce=pt,X.defaults=tR,X.defaultsDeep=nR,X.defer=sr,X.delay=Te,X.difference=mn,X.differenceBy=Er,X.differenceWith=fr,X.drop=br,X.dropRight=zi,X.dropRightWhile=Vu,X.dropWhile=yr,X.fill=mf,X.filter=Od,X.flatMap=ap,X.flatMapDeep=g2,X.flatMapDepth=Qm,X.flatten=Pd,X.flattenDeep=yf,X.flattenDepth=Ai,X.flip=pe,X.flow=l9,X.flowRight=u9,X.fromPairs=Y0,X.functions=uR,X.functionsIn=cR,X.groupBy=lp,X.initial=Sd,X.intersection=Z0,X.intersectionBy=Ia,X.intersectionWith=Td,X.invert=hR,X.invertBy=dR,X.invokeMap=Jm,X.iteratee=T2,X.keyBy=p2,X.keys=Xr,X.keysIn=ho,X.map=Il,X.mapKeys=pR,X.mapValues=mR,X.matches=c9,X.matchesProperty=f9,X.memoize=Ae,X.merge=vR,X.mergeWith=PP,X.method=h9,X.methodOf=d9,X.mixin=D2,X.negate=Ye,X.nthArg=p9,X.omit=yR,X.omitBy=wR,X.once=wt,X.orderBy=m2,X.over=m9,X.overArgs=Rt,X.overEvery=v9,X.overSome=y9,X.partial=At,X.partialRight=_t,X.partition=Ef,X.pick=xR,X.pickBy=SP,X.property=kP,X.propertyOf=w9,X.pull=Dd,X.pullAll=xf,X.pullAllBy=ci,X.pullAllWith=La,X.pullAt=Ho,X.range=x9,X.rangeRight=C9,X.rearg=Pr,X.reject=l,X.remove=Bi,X.rest=xn,X.reverse=Ad,X.sampleSize=v,X.set=ER,X.setWith=PR,X.shuffle=x,X.slice=J0,X.sortBy=$,X.sortedUniq=np,X.sortedUniqBy=kl,X.split=UR,X.spread=Na,X.tail=zm,X.take=$m,X.takeRight=rp,X.takeRightWhile=Bd,X.takeWhile=i2,X.tap=f2,X.throttle=y2,X.thru=Go,X.toArray=wP,X.toPairs=TP,X.toPairsIn=DP,X.toPath=D9,X.toPlainObject=CP,X.transform=SR,X.unary=xM,X.union=o2,X.unionBy=Wm,X.unionWith=Vm,X.uniq=bl,X.uniqBy=s2,X.uniqWith=Uu,X.unset=TR,X.unzip=Md,X.unzipWith=Yn,X.update=DR,X.updateWith=AR,X.values=Hd,X.valuesIn=BR,X.without=a2,X.words=MP,X.wrap=CM,X.xor=Um,X.xorBy=l2,X.xorWith=u2,X.zip=Xm,X.zipObject=Km,X.zipObjectDeep=c2,X.zipWith=co,X.entries=TP,X.entriesIn=DP,X.extend=EP,X.extendWith=nv,D2(X,X),X.add=B9,X.attempt=RP,X.camelCase=bR,X.capitalize=AP,X.ceil=M9,X.clamp=MR,X.clone=PM,X.cloneDeep=TM,X.cloneDeepWith=DM,X.cloneWith=SM,X.conformsTo=AM,X.deburr=BP,X.defaultTo=a9,X.divide=R9,X.endsWith=OR,X.eq=ea,X.escape=IR,X.escapeRegExp=FR,X.every=Ym,X.find=Id,X.findIndex=Oa,X.findKey=rR,X.findLast=Zm,X.findLastIndex=vf,X.findLastKey=iR,X.floor=k9,X.forEach=Fd,X.forEachRight=Cf,X.forIn=oR,X.forInRight=sR,X.forOwn=aR,X.forOwnRight=lR,X.get=C2,X.gt=BM,X.gte=MM,X.has=fR,X.hasIn=E2,X.head=Ml,X.identity=go,X.includes=Ld,X.indexOf=Js,X.inRange=RR,X.invoke=gR,X.isArguments=Pf,X.isArray=Yt,X.isArrayBuffer=RM,X.isArrayLike=fo,X.isArrayLikeObject=wr,X.isBoolean=kM,X.isBuffer=Xu,X.isDate=bM,X.isElement=OM,X.isEmpty=IM,X.isEqual=FM,X.isEqualWith=LM,X.isError=w2,X.isFinite=_M,X.isFunction=Fl,X.isInteger=pP,X.isLength=ev,X.isMap=mP,X.isMatch=NM,X.isMatchWith=HM,X.isNaN=GM,X.isNative=jM,X.isNil=$M,X.isNull=zM,X.isNumber=vP,X.isObject=ar,X.isObjectLike=hr,X.isPlainObject=up,X.isRegExp=x2,X.isSafeInteger=WM,X.isSet=yP,X.isString=tv,X.isSymbol=jo,X.isTypedArray=Nd,X.isUndefined=VM,X.isWeakMap=UM,X.isWeakSet=XM,X.join=Fa,X.kebabCase=LR,X.last=ui,X.lastIndexOf=wf,X.lowerCase=_R,X.lowerFirst=NR,X.lt=KM,X.lte=qM,X.max=b9,X.maxBy=O9,X.mean=I9,X.meanBy=F9,X.min=L9,X.minBy=_9,X.stubArray=B2,X.stubFalse=M2,X.stubObject=E9,X.stubString=P9,X.stubTrue=S9,X.multiply=N9,X.nth=Q0,X.noConflict=g9,X.noop=A2,X.now=te,X.pad=HR,X.padEnd=GR,X.padStart=jR,X.parseInt=zR,X.random=kR,X.reduce=v2,X.reduceRight=_d,X.repeat=$R,X.replace=WR,X.result=CR,X.round=H9,X.runInContext=we,X.sample=c,X.size=T,X.snakeCase=VR,X.some=B,X.sortedIndex=ep,X.sortedIndexBy=r2,X.sortedIndexOf=_a,X.sortedLastIndex=jm,X.sortedLastIndexBy=tp,X.sortedLastIndexOf=Rl,X.startCase=XR,X.startsWith=KR,X.subtract=G9,X.sum=j9,X.sumBy=z9,X.template=qR,X.times=T9,X.toFinite=Ll,X.toInteger=en,X.toLength=xP,X.toLower=YR,X.toNumber=Cs,X.toSafeInteger=YM,X.toString=Rn,X.toUpper=ZR,X.trim=QR,X.trimEnd=JR,X.trimStart=e9,X.truncate=t9,X.unescape=n9,X.uniqueId=A9,X.upperCase=r9,X.upperFirst=P2,X.each=Fd,X.eachRight=Cf,X.first=Ml,D2(X,function(){var h={};return Gi(X,function(m,C){wn.call(X.prototype,C)||(h[C]=m)}),h}(),{chain:!1}),X.VERSION=i,Hr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){X[h].placeholder=X}),Hr(["drop","take"],function(h,m){qt.prototype[h]=function(C){C=C===r?1:cr(en(C),0);var M=this.__filtered__&&!m?new qt(this):this.clone();return M.__filtered__?M.__takeCount__=Gr(C,M.__takeCount__):M.__views__.push({size:Gr(C,I),type:h+(M.__dir__<0?"Right":"")}),M},qt.prototype[h+"Right"]=function(C){return this.reverse()[h](C).reverse()}}),Hr(["filter","map","takeWhile"],function(h,m){var C=m+1,M=C==ye||C==O;qt.prototype[h]=function(G){var Y=this.clone();return Y.__iteratees__.push({iteratee:kt(G,3),type:C}),Y.__filtered__=Y.__filtered__||M,Y}}),Hr(["head","last"],function(h,m){var C="take"+(m?"Right":"");qt.prototype[h]=function(){return this[C](1).value()[0]}}),Hr(["initial","tail"],function(h,m){var C="drop"+(m?"":"Right");qt.prototype[h]=function(){return this.__filtered__?new qt(this):this[C](1)}}),qt.prototype.compact=function(){return this.filter(go)},qt.prototype.find=function(h){return this.filter(h).head()},qt.prototype.findLast=function(h){return this.reverse().find(h)},qt.prototype.invokeMap=Jt(function(h,m){return typeof h=="function"?new qt(this):this.map(function(C){return oo(C,h,m)})}),qt.prototype.reject=function(h){return this.filter(Ye(kt(h)))},qt.prototype.slice=function(h,m){h=en(h);var C=this;return C.__filtered__&&(h>0||m<0)?new qt(C):(h<0?C=C.takeRight(-h):h&&(C=C.drop(h)),m!==r&&(m=en(m),C=m<0?C.dropRight(-m):C.take(m-h)),C)},qt.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},qt.prototype.toArray=function(){return this.take(I)},Gi(qt.prototype,function(h,m){var C=/^(?:filter|find|map|reject)|While$/.test(m),M=/^(?:head|last)$/.test(m),G=X[M?"take"+(m=="last"?"Right":""):m],Y=M||/^find/.test(m);G&&(X.prototype[m]=function(){var re=this.__wrapped__,fe=M?[1]:arguments,Ce=re instanceof qt,Ge=fe[0],je=Ce||Yt(re),Ve=function(un){var vn=G.apply(X,wa([un],fe));return M&&rt?vn[0]:vn};je&&C&&typeof Ge=="function"&&Ge.length!=1&&(Ce=je=!1);var rt=this.__chain__,xt=!!this.__actions__.length,Nt=Y&&!rt,rn=Ce&&!xt;if(!Y&&je){re=rn?re:new qt(this);var Ht=h.apply(re,fe);return Ht.__actions__.push({func:Go,args:[Ve],thisArg:r}),new jr(Ht,rt)}return Nt&&rn?h.apply(this,fe):(Ht=this.thru(Ve),Nt?M?Ht.value()[0]:Ht.value():Ht)})}),Hr(["pop","push","shift","sort","splice","unshift"],function(h){var m=Gs[h],C=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",M=/^(?:pop|shift)$/.test(h);X.prototype[h]=function(){var G=arguments;if(M&&!this.__chain__){var Y=this.value();return m.apply(Yt(Y)?Y:[],G)}return this[C](function(re){return m.apply(Yt(re)?re:[],G)})}}),Gi(qt.prototype,function(h,m){var C=X[m];if(C){var M=C.name+"";wn.call(Du,M)||(Du[M]=[]),Du[M].push({name:m,func:C})}}),Du[ju(r,A).name]=[{name:"wrapper",func:r}],qt.prototype.clone=Vh,qt.prototype.reverse=p0,qt.prototype.value=Mu,X.prototype.at=kd,X.prototype.chain=Ol,X.prototype.commit=bd,X.prototype.next=ip,X.prototype.plant=h2,X.prototype.reverse=sp,X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=d2,X.prototype.first=X.prototype.head,zs&&(X.prototype[zs]=op),X},xu=qw();ss?((ss.exports=xu)._=xu,_c._=xu):Vn._=xu}).call(kZ)}(Pp,Pp.exports)),Pp.exports}var OZ=bZ();const IZ=({min:e=0,max:n=100,step:r=1,defaultValue:i=100,disabled:o=!1,onChange:s,beforeStart:a,afterEnd:u})=>{const[f,d]=K.useState(!1),[g,p]=K.useState(i),y=K.useRef(0),w=K.useRef(null),E=K.useRef(null);K.useEffect(()=>{if(w.current&&E.current){const b=w.current.getBoundingClientRect(),R=E.current.getBoundingClientRect();y.current=lb(R.width/2/b.width*100)}},[E,w]),K.useEffect(()=>{p(i)},[i]);const S=K.useCallback(b=>{if(w.current&&E.current){const R=w.current.getBoundingClientRect(),L=b.clientX-R.left;let V=Math.min(Math.max(L/R.width,0),1);V>=(100-y.current)/100?V=1:V<=y.current/100&&(V=0);const Z=Math.round(V*(n-e)/r)*r+e;p(Z),s&&s(Z)}},[e,n,r,s,p]),D=K.useMemo(()=>OZ.throttle(S,50,{leading:!0,trailing:!0}),[S]),A=K.useCallback(()=>{const b=L=>{d(!0),D(L)},R=()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",R),u&&u(),setTimeout(()=>{d(!1)},0)};document.addEventListener("pointermove",b),document.addEventListener("pointerup",R)},[D,u]);let P=(g-e)/(n-e)*100;return P>=100-y.current&&(P=100-y.current),P<=y.current&&(P=y.current),k.jsx("div",{className:gn("slider-container",{disabled:o}),children:k.jsxs("div",{ref:w,className:"slider-track",onClick:b=>{o||f||D(b)},onPointerDown:b=>{b.preventDefault(),!o&&(a&&a(),A())},children:[k.jsx("div",{className:"slider-range",style:{width:`${P}%`}}),k.jsx("div",{ref:E,className:"slider-thumb",style:{left:`${P}%`}})]})})},Q5=Z3(X6,4),aP=Bt.forwardRef((e,n)=>{const r=Tr(),{t:i}=Kn(),{currentColor:o,onColorChange:s,onOpacityChange:a}=e,[u,f]=K.useState(o&&ch(o)||Q5[0][0].value),[d,g]=K.useState(()=>{const p=o&&Wg(o);return Uf(p)?100:p});return k.jsxs(bi.Col,{gap:3,children:[k.jsx(IZ,{step:5,defaultValue:d,onChange:p=>{g(p),a(p)},beforeStart:()=>{Or.set(r,!0),Ps.setSplittingOnce(r,!0)},afterEnd:()=>{Or.set(r,!1)},disabled:u===X6[0].value}),k.jsx(bi.Col,{gap:2,children:Q5.map((p,y)=>k.jsx(bi.Row,{gap:2,children:p.map(w=>k.jsxs("button",{className:`color-select-item ${u===w.value?"active":""} ${hg(w.value)?"no-color":""}`,style:{backgroundColor:hg(w.value)?DZ:w.value,color:RZ(w.value)?sP:ti},onClick:()=>{f(w.value),w.value===oP&&g(100),s(w.value)},title:i(w.name||"color.unknown"),"aria-label":i(w.name||"color.unknown"),children:[hg(w.value)&&gq,u===w.value&&pq]},w.value))},y))})]})}),Y6=(e,n)=>_e.isMindElement(e,n)||Se.isDrawElement(n)&&k1(n)||hw(e,n),Z6=(e,n)=>{let r=n.fill;return r||(_e.isMindElement(e,n)&&(r=mB(e,n)),(Se.isDrawElement(n)||Se.isCustomGeometryElement(e,n))&&(r=dw(e,n))),r},Q6=(e,n)=>{let r=n.strokeColor;return r||(_e.isMindElement(e,n)&&(r=N3(e,n)),(Se.isDrawElement(n)||Se.isCustomGeometryElement(e,n))&&(r=Gg(e,n))),r},FZ=(e,n)=>{ga.setFillColor(e,null,{getMemorizeKey:Ng,callback:(r,i)=>{if(!Y6(e,r))return;const o=Z6(e,r);if(!MZ(o))return;const s=ch(o),a=G1(n)?s:$g(s,n);Ze.setNode(e,{fill:a},i)}})},LZ=(e,n)=>{ga.setFillColor(e,null,{getMemorizeKey:Ng,callback:(r,i)=>{if(!Y6(e,r))return;const o=Z6(e,r),s=Wg(o);hg(n)?Ze.setNode(e,{fill:null},i):Uf(s)||G1(s)?Ze.setNode(e,{fill:n},i):Ze.setNode(e,{fill:$g(n,s)},i)}})},_Z=(e,n)=>{ga.setStrokeColor(e,null,{getMemorizeKey:Ng,callback:(r,i)=>{const o=Q6(e,r),s=ch(o),a=G1(n)?s:$g(s,n);Ze.setNode(e,{strokeColor:a},i)}})},NZ=(e,n)=>{ga.setStrokeColor(e,null,{getMemorizeKey:Ng,callback:(r,i)=>{const o=Q6(e,r),s=Wg(o);hg(n)?Ze.setNode(e,{strokeColor:null},i):Uf(s)||G1(s)?Ze.setNode(e,{strokeColor:n},i):Ze.setNode(e,{strokeColor:$g(n,s)},i)}})},HZ=(e,n,r)=>{const i=Wg(n);hg(r)?LC.setTextColor(e,null):LC.setTextColor(e,$g(r,i))},GZ=(e,n,r)=>{const i=ch(n),o=G1(r)?i:$g(i,r);LC.setTextColor(e,o)},jZ=({board:e,currentColor:n,fontColorIcon:r,title:i})=>{const[o,s]=K.useState(!1),a=H.getBoardContainer(e);return k.jsxs(ua,{sideOffset:12,open:o,onOpenChange:u=>{s(u)},placement:"top",children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{className:gn("property-button"),selected:o,visible:!0,icon:r,type:"button",title:i,"aria-label":i,onPointerUp:()=>{s(!o)}})}),k.jsx(fa,{container:a,children:k.jsx(Bo,{padding:4,className:gn(`${el}`),children:k.jsx(aP,{onColorChange:u=>{HZ(e,n||u,u)},onOpacityChange:u=>{n&&GZ(e,n,u)},currentColor:n})})})]})},zZ=({board:e,currentColor:n,currentStyle:r,title:i,hasStrokeStyle:o,children:s})=>{const[a,u]=K.useState(!1),f=n&&ch(n),d=n?Wg(n):100,g=H.getBoardContainer(e),{t:p}=Kn(),y=q6(d)?mq:K6(f)?vq:void 0,w=E=>{ga.setStrokeStyle(e,E,{getMemorizeKey:Ng})};return k.jsxs(ua,{sideOffset:12,open:a,onOpenChange:E=>{u(E)},placement:"top",children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{className:gn("property-button"),visible:!0,icon:y,type:"button",title:i,"aria-label":i,onPointerUp:()=>{u(!a)},children:!y&&s})}),k.jsx(fa,{container:g,children:k.jsx(Bo,{padding:4,className:gn(`${el}`,"stroke-setting",{"has-stroke-style":o}),children:k.jsxs(bi.Col,{children:[o&&k.jsxs(bi.Row,{className:gn("stroke-style-picker"),children:[k.jsx(On,{visible:!0,selected:!r||r===Vi.solid,icon:yq,type:"button",title:`${i}  ${p("stroke.solid")}`,"aria-label":`${i}  ${p("stroke.solid")}`,onPointerUp:()=>{w(Vi.solid)}}),k.jsx(On,{visible:!0,selected:r===Vi.dashed,icon:wq,type:"button",title:`${i}  ${p("stroke.dashed")}`,"aria-label":`${i}  ${p("stroke.dashed")}`,onPointerUp:()=>{w(Vi.dashed)}}),k.jsx(On,{visible:!0,selected:r===Vi.dotted,icon:xq,type:"button",title:`${i}  ${p("stroke.dotted")}`,"aria-label":`${i}  ${p("stroke.dotted")}`,onPointerUp:()=>{w(Vi.dotted)}})]}),k.jsx(aP,{onColorChange:E=>{NZ(e,E)},onOpacityChange:E=>{_Z(e,E)},currentColor:n})]})})})]})},$Z=({board:e,currentColor:n,title:r,children:i})=>{const[o,s]=K.useState(!1),a=n&&ch(n),u=n?Wg(n):100,f=H.getBoardContainer(e),d=!a||q6(u)?dq:void 0;return k.jsxs(ua,{sideOffset:12,open:o,onOpenChange:g=>{s(g)},placement:"top",children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{className:gn("property-button"),visible:!0,icon:d,type:"button",title:r,"aria-label":r,onPointerUp:()=>{s(!o)},children:!d&&i})}),k.jsx(fa,{container:f,children:k.jsx(Bo,{padding:4,className:gn(`${el}`),children:k.jsx(aP,{onColorChange:g=>{LZ(e,g)},onOpacityChange:g=>{FZ(e,g)},currentColor:n})})})]})},WZ=({board:e,title:n})=>{const{t:r}=Kn(),{appState:i,setAppState:o}=Is();return k.jsx(On,{className:gn("property-button"),visible:!0,icon:Bq,type:"button",title:n,"aria-label":n,onPointerUp:()=>{const s=tt(e)[0],a=l3(s);Ka.getLinkElement(a)||Ka.wrapLink(a,r("textPlaceholders.link"),""),setTimeout(()=>{const d=Ka.getLinkElement(a)[0],g=Ke.toDOMNode(a,d);o({...i,linkState:{editor:a,targetDom:g,targetElement:d,isEditing:!0,isHovering:!1,isHoveringOrigin:!1}})},0)}})},VZ=({end:e,property:n})=>{const r=Tr(),{marker:i}=n,{t:o}=Kn(),s=a=>{ga.setProperty(r,{[e]:{...n,marker:a}})};return k.jsx(Bo,{padding:2,className:gn(`${el} ${e==="source"?"source-arrow-island":""} `),children:k.jsxs(bi.Row,{gap:1,children:[k.jsx(On,{className:gn("property-button"),visible:!0,icon:e6,type:"button",title:o("line.none"),"aria-label":o("line.none"),selected:i==="none",onPointerUp:()=>{s("none")}}),k.jsx(On,{className:gn("property-button"),visible:!0,icon:JB,type:"button",title:o("line.arrow"),"aria-label":o("line.arrow"),selected:i==="arrow",onPointerUp:()=>{s("arrow")}})]})})},J5=({board:e,end:n,endProperty:r})=>{const[i,o]=K.useState(!1),s=r==null?void 0:r.marker,a=H.getBoardContainer(e),{t:u}=Kn(),f=`${u(`line.${n}`)}  ${u(`line.${s}`)}`;return k.jsxs(ua,{sideOffset:12,open:i,onOpenChange:d=>{o(d)},placement:"top",children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{className:gn(`property-button  ${n==="source"?"source-arrow-button":""}`),visible:!0,icon:s==="none"?e6:JB,type:"button",title:f,"aria-label":f,selected:i,onPointerUp:()=>{o(!i)}})}),k.jsx(fa,{container:a,children:k.jsx(VZ,{end:n,property:r})})]})},UZ=()=>{var w,E;const e=Tr(),{t:n}=Kn(),r=tt(e),[i,o]=K.useState(!1),s=K.useRef(i),a=r.length>0&&!vi(e)&&!r.some(Se.isImage),{viewport:u,selection:f,children:d}=e,{refs:g,floatingStyles:p}=bw({placement:"right-start",middleware:[nP(32),rP()]});let y={fill:"red"};if(a&&!i){const S=r.some(R=>YZ(e,R))&&!H.hasBeenTextEditing(e),D=r.some(R=>QZ(e,R)),A=r.some(R=>J6(e,R))&&!H.hasBeenTextEditing(e),P=r.some(R=>ZZ(e,R))&&!H.hasBeenTextEditing(e),b=r.every(R=>Se.isArrowLine(R));y={...qZ(e),hasFill:S,hasFontColor:D,hasStroke:A,hasStrokeStyle:P,hasText:D,isLine:b}}return K.useEffect(()=>{if(a){const S=r.length>0;if(!i&&S){const D=tt(e),A=dn(e,D,!1),[P,b]=_.getPoints(A),R=dC(e,uy(e,P)),L=dC(e,uy(e,b)),V=L[0]-R[0],Z=L[1]-R[1];g.setPositionReference({getBoundingClientRect(){return{width:V,height:Z,x:R[0],y:R[1],top:R[1],left:R[0],right:R[0]+V,bottom:R[1]+Z}}})}}},[u,f,d,i]),K.useEffect(()=>{s.current=i},[i]),K.useEffect(()=>{const{pointerUp:S,pointerMove:D}=e;return e.pointerMove=A=>{(fc(e)||cc(e))&&!s.current&&o(!0),D(A)},e.pointerUp=A=>{s.current&&(fc(e)||cc(e))&&o(!1),S(A)},()=>{e.pointerUp=S,e.pointerMove=D}},[e]),a&&!i?k.jsx(Bo,{padding:1,className:gn("popup-toolbar",el),ref:g.setFloating,style:p,children:k.jsxs(bi.Row,{gap:1,children:[y.hasFontColor&&k.jsx(jZ,{board:e,currentColor:(w=y.marks)==null?void 0:w.color,title:n("popupToolbar.fontColor"),fontColorIcon:k.jsx(Cq,{currentColor:(E=y.marks)==null?void 0:E.color})},0),y.hasStroke&&k.jsx(zZ,{board:e,currentColor:y.strokeColor,currentStyle:y.strokeStyle,title:n("popupToolbar.stroke"),hasStrokeStyle:y.hasStrokeStyle||!1,children:k.jsx("label",{className:gn("stroke-label","color-label"),style:{borderColor:y.strokeColor}})},1),y.hasFill&&k.jsx($Z,{board:e,currentColor:y.fill,title:n("popupToolbar.fillColor"),children:k.jsx("label",{className:gn("fill-label","color-label",{"color-white":y.fill&&K6(ch(y.fill))}),style:{backgroundColor:y.fill}})},2),y.hasText&&k.jsx(WZ,{board:e,title:n("popupToolbar.link")},3),y.isLine&&k.jsxs(k.Fragment,{children:[k.jsx(J5,{board:e,end:"source",endProperty:y.source},4),k.jsx(J5,{board:e,end:"target",endProperty:y.target},5)]})]})}):null},XZ=(e,n)=>{const r=_8(n);return{fill:n.fill,strokeColor:N3(e,n),strokeStyle:jg(e,n),marks:r}},KZ=(e,n)=>{const r=_8(n);return{fill:n.fill,strokeColor:Gg(e,n),strokeStyle:jg(e,n),marks:r,source:(n==null?void 0:n.source)||{},target:(n==null?void 0:n.target)||{}}},qZ=e=>{const n=tt(e)[0];return _e.isMindElement(e,n)?XZ(e,n):KZ(e,n)},YZ=(e,n)=>_e.isMindElement(e,n)||hw(e,n)?!0:Se.isDrawElement(n)?Se.isShapeElement(n)&&!Se.isImage(n)&&!Se.isText(n)&&k1(n):!1,J6=(e,n)=>_e.isMindElement(e,n)||Es.isFreehand(n)?!0:Se.isDrawElement(n)?Se.isShapeElement(n)&&!Se.isImage(n)&&!Se.isText(n)||Se.isArrowLine(n)||Se.isVectorLine(n)||Se.isTable(n):!1,ZZ=(e,n)=>J6(e,n),QZ=(e,n)=>_e.isMindElement(e,n)?!0:Se.isDrawElement(n)?i$([n]):!1,eM=({icon:e,shortcut:n,href:r,children:i,onSelect:o,className:s="",selected:a,...u})=>{const f=j6(u.onClick,o);return k.jsx("a",{...u,href:r,target:"_blank",rel:"noreferrer",className:uE(s,a),title:u.title??u["aria-label"],onClick:f,children:k.jsx(z6,{icon:e,shortcut:n,children:i})})};eM.displayName="MenuItemLink";const tM=()=>{const e=Tr(),{t:n}=Kn();return k.jsx(Jr,{"data-testid":"save-button",onSelect:()=>{UB(e)},icon:fq,"aria-label":n("menu.saveFile"),shortcut:p1("CtrlOrCmd+S"),children:n("menu.saveFile")})};tM.displayName="SaveToFile";const nM=()=>{const e=Tr(),n=R7(),{t:r}=Kn(),i=(o,s,a)=>{e.children=o,e.viewport=s||{zoom:1},e.theme={themeColorMode:dr.default},n.update(e.children,{board:e,parent:e,parentG:H.getElementHost(e)}),sn.fitViewport(e)};return k.jsx(Jr,{"data-testid":"open-button",onSelect:()=>{yK(e).then(o=>{i(o.elements,o.viewport)})},icon:hq,"aria-label":r("menu.open"),children:r("menu.open")})};nM.displayName="OpenFile";const rM=()=>{const e=Tr(),n=K.useContext(Ow),{t:r}=Kn();return k.jsx(Jr,{icon:lq,"data-testid":"image-export-button",onSelect:()=>{Zv(e,!0)},submenu:k.jsxs(zg,{onSelect:()=>{var o;const i=new CustomEvent(Sg.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(o=n.onSelect)==null||o.call(n,i)},children:[k.jsx(Jr,{onSelect:()=>{Zv(e,!0)},"aria-label":r("menu.exportImage.png"),children:r("menu.exportImage.png")}),k.jsx(Jr,{onSelect:()=>{Zv(e,!1)},"aria-label":r("menu.exportImage.jpg"),children:r("menu.exportImage.jpg")}),k.jsx(Jr,{onSelect:()=>{PZ(e)},"aria-label":r("menu.exportImage.svg"),children:r("menu.exportImage.svg")})]}),shortcut:p1("CtrlOrCmd+Shift+E"),"aria-label":r("menu.exportImage"),children:r("menu.exportImage")})};rM.displayName="SaveAsImage";const iM=()=>{const{appState:e,setAppState:n}=Is(),{t:r}=Kn();return k.jsx(Jr,{icon:Oy,"data-testid":"reset-button",onSelect:()=>{n({...e,openCleanConfirm:!0})},shortcut:p1("CtrlOrCmd+Backspace"),"aria-label":r("menu.cleanBoard"),children:r("menu.cleanBoard")})};iM.displayName="CleanBoard";const oM=()=>k.jsx(eM,{icon:aq,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});oM.displayName="Socials";const sM=()=>{const{language:e,setLanguage:n,t:r}=Kn(),i=K.useContext(Ow);return k.jsx(Jr,{icon:ZB,"data-testid":"language-switcher-button",onSelect:()=>{},submenu:k.jsxs(zg,{onSelect:()=>{var s;const o=new CustomEvent(Sg.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(s=i.onSelect)==null||s.call(i,o)},children:[k.jsx(Jr,{onSelect:()=>{n("zh")},"aria-label":r("language.chinese"),selected:e==="zh",children:r("language.chinese")}),k.jsx(Jr,{onSelect:()=>{n("en")},"aria-label":r("language.english"),selected:e==="en",children:r("language.english")}),k.jsx(Jr,{onSelect:()=>{n("ru")},"aria-label":r("language.russian"),selected:e==="ru",children:r("language.russian")}),k.jsx(Jr,{onSelect:()=>{n("ar")},"aria-label":r("language.arabic"),selected:e==="ar",children:r("language.arabic")})]}),"aria-label":r("language.switcher"),children:r("language.switcher")})};sM.displayName="LanguageSwitcherMenu";const aM=()=>k.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});aM.displayName="MenuSeparator";const JZ=()=>{const e=Tr(),{t:n}=Kn(),r=H.getBoardContainer(e),i=tt(e),[o,s]=K.useState(!1),a=e.history.undos.length<=0,u=e.history.redos.length<=0;return k.jsx(Bo,{padding:1,className:gn("app-toolbar",el),children:k.jsxs(bi.Row,{gap:1,children:[k.jsxs(ua,{sideOffset:12,open:o,onOpenChange:f=>{s(f)},placement:"bottom-start",children:[k.jsx(ca,{asChild:!0,children:k.jsx(On,{type:"icon",visible:!0,selected:o,icon:ZB,title:n("general.menu"),"aria-label":n("general.menu"),onPointerDown:()=>{s(!o)}})}),k.jsx(fa,{container:r,children:k.jsxs(zg,{onSelect:()=>{s(!1)},children:[k.jsx(nM,{}),k.jsx(tM,{}),k.jsx(rM,{}),k.jsx(iM,{}),k.jsx(aM,{}),k.jsx(sM,{}),k.jsx(oM,{})]})})]},0),k.jsx(On,{type:"icon",icon:Eq,visible:!0,title:n("general.undo"),"aria-label":n("general.undo"),onPointerUp:()=>{e.undo()},disabled:a},1),k.jsx(On,{type:"icon",icon:Pq,visible:!0,title:n("general.redo"),"aria-label":n("general.redo"),onPointerUp:()=>{e.redo()},disabled:u},2),i.length>0&&k.jsx(On,{className:"duplicate",type:"icon",icon:Sq,visible:!0,title:n("general.duplicate"),"aria-label":n("general.duplicate"),onPointerUp:()=>{GE(e)}},3),i.length>0&&k.jsx(On,{className:"trash",type:"icon",icon:Oy,visible:!0,title:n("general.delete"),"aria-label":n("general.delete"),onPointerUp:()=>{HE(e)}},4)]})})},eQ=e=>r=>{const{globalKeyDown:i,keyDown:o}=r;return r.globalKeyDown=s=>{if(!(s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement)&&(H.getMovingPointInBoard(r)||H.isMovingPointInBoard(r))&&!H.hasBeenTextEditing(r)){if(on.isHotkey(["mod+shift+e"],{byKey:!0})(s)){Zv(r,!0),s.preventDefault();return}if(on.isHotkey(["mod+s"],{byKey:!0})(s)){UB(r),s.preventDefault();return}if(on.isHotkey(["mod+backspace"])(s)||on.isHotkey(["mod+delete"])(s)){e({openCleanConfirm:!0}),s.preventDefault();return}if(on.isHotkey(["mod+u"])(s)&&U6(r),!s.altKey&&!s.metaKey&&!s.ctrlKey){if(s.key==="h"){sn.updatePointerType(r,nn.hand),e({pointer:nn.hand}),s.preventDefault();return}if(s.key==="v"){sn.updatePointerType(r,nn.selection),e({pointer:nn.selection}),s.preventDefault();return}if(s.key==="m"){wo(r,Zr.dnd),sn.updatePointerType(r,Vl.mind),e({pointer:Vl.mind}),s.preventDefault();return}if(s.key==="e"){wo(r,Zr.drawing),sn.updatePointerType(r,Ko.eraser),e({pointer:Ko.eraser}),s.preventDefault();return}if(s.key==="p"){wo(r,Zr.drawing),sn.updatePointerType(r,Ko.feltTipPen),e({pointer:Ko.feltTipPen}),s.preventDefault();return}if(s.key==="a"&&!on.isHotkey(["mod+a"])(s)&&tt(r).length===0){wo(r,Zr.drawing),sn.updatePointerType(r,Nn.straight),e({pointer:Nn.straight}),s.preventDefault();return}if(s.key==="r"||s.key==="o"||s.key==="t"){const u={r:Et.rectangle,o:Et.ellipse,t:Et.text};u[s.key]===Et.text?wo(r,Zr.dnd):wo(r,Zr.drawing),sn.updatePointerType(r,u[s.key]),e({pointer:u[s.key]}),s.preventDefault();return}}}i(s)},r.keyDown=s=>{if(on.isHotkey(["mod+z"],{byKey:!0})(s)){r.undo(),s.preventDefault();return}if(on.isHotkey(["mod+shift+z"],{byKey:!0})(s)){r.redo(),s.preventDefault();return}o(s)},r};function tQ(){return[Ko.feltTipPen,Ko.eraser]}const eA=(e,n)=>({id:Tn(),type:"freehand",shape:e,points:n}),lM=(e,n,r)=>{const i=hc(e,r,n)||r,o=n.points;return b1(n.points)&&uc(i,o)||r1(o,i)},nQ=(e,n,r)=>{const i=_.getRectangleByPoints([r.anchor,r.focus]);return Dy(i,n.points,n.angle)},tA=e=>tt(e).filter(n=>Es.isFreehand(n)),rQ=e=>t6[e].strokeColor,iQ=e=>t6[e].fill,oQ=(e,n)=>{const r=rQ(e.theme.themeColorMode);return n.strokeColor||r},sQ=(e,n)=>{const r=Es.isFreehand(n)&&hw(e,n)?iQ(e.theme.themeColorMode):cw.fill;return n.fill||r};function aQ(e,n){return Math.exp(-(e*e)/(2*n*n))}function lQ(e,n,r){if(e.length<2)return e;const i=Math.floor(r/2),o=[];function s(u){if(u<0){const f=-u-1;if(f<e.length)return[2*e[0][0]-e[f][0],2*e[0][1]-e[f][1]]}else if(u>=e.length){const f=2*e.length-u-1;if(f>=0)return[2*e[e.length-1][0]-e[f][0],2*e[e.length-1][1]-e[f][1]]}return e[u]}function a(u){const f=Math.min(u,e.length-1-u);return Math.min(i,f+Math.floor(i/2))}for(let u=0;u<e.length;u++){let f=0,d=0,g=0;const p=a(u);for(let y=-p;y<=p;y++){const w=u+y,E=s(w);let S=aQ(y,n);if(u<i||u>=e.length-i){const D=1+.5*(1-Math.abs(y)/p);S*=y===0?D:1}f+=E[0]*S,d+=E[1]*S,g+=S}u===0||u===e.length-1?o.push([e[u][0],e[u][1]]):o.push([f/g,d/g])}return o}class uM extends es{draw(n){const r=Qt(n),i=oQ(this.board,n),o=sQ(this.board,n),s={strokeWidth:r,stroke:i,fill:o,fillStyle:"solid"},a=H.getRoughSVG(this.board).curve(lQ(n.points,1,3),s);return Zt(a,"round"),a}canDraw(n){return!0}}class uQ extends Cc{initializeGenerator(){this.activeGenerator=D1(this.board,{getRectangle:n=>_.getRectangleByPoints(n.points),getStrokeWidth:()=>pr,getStrokeOpacity:()=>1,hasResizeHandle:()=>aw(this.board,this.element)}),this.generator=new uM(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(n,r){n.element!==r.element||n.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})):(n.selected!==r.selected||n.selected)&&this.activeGenerator.processDrawing(this.element,H.getActiveHost(this.board),{selected:this.selected})}destroy(){var n;super.destroy(),(n=this.activeGenerator)==null||n.destroy()}}class cQ{constructor(n={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...n}}process(n,r={}){const i=r.timestamp??Date.now();if(this.points.length===0){const f={point:n,timestamp:i,...r};return this.points.push(f),this.lastProcessedTime=i,n}if(i-this.lastProcessedTime<this.options.samplingRate&&i-this.lastProcessedTime<2)return null;const o={point:n,timestamp:i,...r};if(!this.checkDistance(n)&&this.points.length>1&&i-this.lastProcessedTime<32)return null;this.updatePoints(o);const a=this.calculateDynamicParameters(o),u=this.smooth(n,a);return this.lastProcessedTime=i,u}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(n){this.points.push(n),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(n){if(this.points.length===0)return!0;const r=this.points[this.points.length-1].point,i=this.getDistance(r,n);let o=this.options.minDistance;if(this.movingAverageVelocity.length>0){const s=this.getAverageVelocity();o*=Math.max(.5,Math.min(1.5,s/200))}return i>=o}calculateDynamicParameters(n){const r=this.calculateVelocity(n);this.updateMovingAverage(r);const i=this.getAverageVelocity(),o={...this.options};if(n.pressure!==void 0){const a=Math.pow(n.pressure,1.2);o.smoothing*=1-a*o.pressureSensitivity*.8}const s=Math.min(i/o.velocityThreshold,1);if(o.velocityWeight=.2+s*.3,o.smoothing*=1+s*.2,n.tiltX!==void 0&&n.tiltY!==void 0){const a=Math.sqrt(n.tiltX**2+n.tiltY**2)/90;o.smoothing*=1+a*o.tiltSensitivity*.7}return o}smooth(n,r){if(this.points.length<2)return n;const i=this.calculateWeights(r),o=i.reduce((a,u)=>a+u,0);if(o===0)return n;const s=[0,0];for(let a=0;a<this.points.length;a++){const u=i[a]/o;s[0]+=this.points[a].point[0]*u,s[1]+=this.points[a].point[1]*u}return s}calculateWeights(n){const r=[],i=this.points.length-1;for(let o=0;o<this.points.length;o++){let s=Math.pow(n.smoothing,(i-o)*.8);if(o<i){const a=this.getPointVelocity(o);s*=1+a*n.velocityWeight*.8}if(o>0&&o<i){const a=this.getPointCurvature(o);s*=1+a*n.curvatureWeight*.7}r.push(s)}return r}getDistance(n,r){return bt(n[0],n[1],r[0],r[1])}calculateVelocity(n){if(this.points.length<2)return 0;const r=this.points[this.points.length-1],i=this.getDistance(r.point,n.point),o=n.timestamp-r.timestamp;return o>0?i/o:0}updateMovingAverage(n){this.movingAverageVelocity.push(n),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((n,r)=>n+r)/this.movingAverageVelocity.length}getPointVelocity(n){if(n>=this.points.length-1)return 0;const r=this.points[n],i=this.points[n+1],o=this.getDistance(r.point,i.point),s=i.timestamp-r.timestamp;return s>0?o/s:0}getPointCurvature(n){if(n<=0||n>=this.points.length-1)return 0;const r=this.points[n-1].point,i=this.points[n].point,o=this.points[n+1].point,s=this.getDistance(r,i),a=this.getDistance(i,o),u=this.getDistance(r,o),f=(s+a+u)/2;return 4*Math.sqrt(Math.max(0,f*(f-s)*(f-a)*(f-u)))/(s*a*u+1e-4)}}const fQ=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,globalPointerUp:o}=e;let s=!1,a=!1,u=[],f=null;const d=new uM(e),g=new cQ({smoothing:.7,pressureSensitivity:.6});let p=null;const y=w=>{if(s){const E=H.getPointer(e);a&&u.push(u[0]),p=eA(E,u)}p&&!w&&Ze.insertNode(e,p,[e.children.length]),d==null||d.destroy(),p=null,s=!1,u=[],g.reset()};return e.pointerDown=w=>{const E=tQ();if(H.isInPointer(e,E)&&oh(e)){s=!0,f=[w.x,w.y];const D=g.process(f),A=It(e,Lt(e,D[0],D[1]));u.push(A)}n(w)},e.pointerMove=w=>{if(s){const E=[w.x,w.y];f&&bt(f[0],f[1],E[0],E[1])<8?a=!0:a=!1;const S=g.process(E);if(S){d==null||d.destroy();const D=It(e,Lt(e,S[0],S[1]));u.push(D);const A=H.getPointer(e);p=eA(A,u),d.processDrawing(p,H.getElementTopHost(e))}return}r(w)},e.pointerUp=w=>{y(),i(w)},e.globalPointerUp=w=>{y(!0),o(w)},e},hQ=e=>{const n=e,{getDeletedFragment:r,buildFragment:i,insertFragment:o}=n;return n.getDeletedFragment=s=>{const a=tA(n);return a.length&&s.push(...a),r(s)},n.buildFragment=(s,a,u,f)=>{const d=tA(n);if(d.length){const g=b8(n,d,a?[a.x,a.y]:[0,0]);s=rw(s,{text:"",type:Zl.elements,elements:g})}return i(s,a,u,f)},n.insertFragment=(s,a,u)=>{var d;const f=(d=s==null?void 0:s.elements)==null?void 0:d.filter(g=>Es.isFreehand(g));f&&f.length>0&&O8(n,f,a),o(s,a,u)},n};var Qv={exports:{}},dQ=Qv.exports,nA;function gQ(){return nA||(nA=1,function(e,n){(function(r,i){e.exports=i()})(dQ,function(){return(()=>{var r={607:(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.drawLaserPen=s.drawRoundCap=s.drawDrawingBezierData=s.calDrawingData=s.transformPointToBezier=s.calControlPoints=s.drainPoints=s.setRoundCap=s.setColor=s.setOpacity=s.setTension=s.setMinWidth=s.setMaxWidth=s.setDelay=void 0;var u=a(405),f=10,d=0,g=300,p=.3,y=0,w=255,E=0,S=0,D=!1;function A(P,b){return Math.sqrt(P*P+b*b)}s.setDelay=function(P){g=P},s.setMaxWidth=function(P){f=P},s.setMinWidth=function(P){d=P},s.setTension=function(P){p=P},s.setOpacity=function(P){y=P},s.setColor=function(P,b,R){w=P,E=b,S=R},s.setRoundCap=function(P){D=P},s.drainPoints=function(P){for(var b,R=Date.now()-g,L=0;L<P.length;L++)if(P[L].time>=R){b=L;break}var V=b===0?P:b===void 0?[]:P.slice(b);for(L=V.length-1;L>0;L--)(Z=V[L]).x===V[L-1].x&&Z.y===V[L-1].y&&V.splice(L,1);for(L=V.length-1;L>1;L--){var Z;(Z=V[L]).x===V[L-2].x&&Z.y===V[L-2].y&&(V.splice(L-1,2),L--)}return V},s.calControlPoints=function(P){if(P.length<3)throw new Error("to calculate control points, the point counts should be larger than 3");for(var b=Array(P.length),R=P.length,L=R-2;L>0;L--){var V=P[L],Z=P[L+1],ne=P[L-1],le=ne.x-Z.x,de=ne.y-Z.y,Pe=A(le,de),ue=le/Pe,he=de/Pe,ye=A(V.x-Z.x,V.y-Z.y),W=A(V.x-ne.x,V.y-ne.y),O=V.x-ue*ye*p,N=V.y-he*ye*p,F=V.x+ue*W*p,j=V.y+he*W*p;b[L]={cn:{x:O,y:N},cp:{x:F,y:j}},(isNaN(O)||isNaN(N)||isNaN(F)||isNaN(j))&&console.log("a")}return b[R-1]={cn:{x:P[R-1].x,y:P[R-1].y},cp:{x:(P[R-1].x+P[R-2].x)/2,y:(P[R-1].y+P[R-2].y)/2}},b[0]={cn:{x:(P[0].x+P[L+1].x)/2,y:(P[0].y+P[L+1].y)/2},cp:{x:P[0].x,y:P[0].y}},b},s.transformPointToBezier=function(P,b){for(var R=[],L=1;L<P.length;L++){var V=P[L-1],Z=P[L],ne=b[L-1].cn,le=b[L].cp,de=new u.Bezier(V.x,V.y,ne.x,ne.y,le.x,le.y,Z.x,Z.y);R.push(de)}return R},s.calDrawingData=function(P,b){for(var R=[],L=1-y,V=f-d,Z=0,ne=0;ne<P.length;ne++){var le=P[ne],de=le.length(),Pe=y+(Z+=de)/b*L,ue=d+Z/b*V;R.push({bezier:le,opacity:Pe,width:ue})}return R},s.drawDrawingBezierData=function(P,b){P.save(),P.lineCap="butt";for(var R=0;R<b.length;R++){P.beginPath();var L=b[R],V=L.bezier,Z=L.width,ne=L.opacity;P.lineWidth=Z,P.strokeStyle="rgba(".concat(w,",").concat(E,",").concat(S,",").concat(ne,")");var le=V.points[0].x,de=V.points[0].y;if(V.points[0].x!==V.points[1].x){var Pe=V.points[0].x,ue=V.points[0].y,he=(ue-V.points[1].y)/(Pe-V.points[1].x),ye=ue-he*Pe,W=Math.sqrt(.005/(1+he*he));de=he*(le=(V.points[1].x>Pe?-W:W)+Pe)+ye}else de+=V.points[0].y>V.points[1].y?.005:-.005;var O=V.points[3].x,N=V.points[3].y;if(V.points[2].x!==V.points[3].x){var F=V.points[3].x,j=V.points[3].y,U=(j-V.points[2].y)/(F-V.points[2].x),I=j-U*F;W=Math.sqrt(.005/(1+U*U)),N=U*(O=(V.points[2].x>F?-W:W)+F)+I}else N+=V.points[2].y>V.points[3].y?-.005:.005;P.moveTo(le,de),P.bezierCurveTo(V.points[1].x,V.points[1].y,V.points[2].x,V.points[2].y,O,N),P.stroke(),P.closePath()}P.restore()},s.drawRoundCap=function(P,b){var R=b.bezier.points[3];P.save(),P.beginPath(),P.fillStyle="rgba(".concat(w,",").concat(E,",").concat(S,",").concat(b.opacity,")"),P.arc(R.x,R.y,b.width/2,0,2*Math.PI,!1),P.closePath(),P.fill(),P.restore()},s.drawLaserPen=function(P,b){if(b.length<3)throw new Error("too less points");var R=(0,s.calControlPoints)(b),L=(0,s.transformPointToBezier)(b,R),V=L.reduce(function(ue,he){return ue+he.length()},0),Z=V/50,ne=[];L.forEach(function(ue,he){var ye=ue.length(),W=Math.ceil(ye/Z)+2,O=ue.getLUT(W);he<L.length-1&&O.pop(),ne.push.apply(ne,O)});var le=(0,s.calControlPoints)(ne),de=(0,s.transformPointToBezier)(ne,le),Pe=(0,s.calDrawingData)(de,V);(0,s.drawDrawingBezierData)(P,Pe),D&&(0,s.drawRoundCap)(P,Pe[Pe.length-1])}},405:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Bezier=void 0;const{abs:a,cos:u,sin:f,acos:d,atan2:g,sqrt:p,pow:y}=Math;function w(W){return W<0?-y(-W,.3333333333333333):y(W,.3333333333333333)}const E=Math.PI,S=2*E,D=E/2,A=Number.MAX_SAFE_INTEGER||9007199254740991,P=Number.MIN_SAFE_INTEGER||-9007199254740991,b={x:0,y:0,z:0},R={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(W,O){const N=O(W);let F=N.x*N.x+N.y*N.y;return N.z!==void 0&&(F+=N.z*N.z),p(F)},compute:function(W,O,N){if(W===0)return O[0].t=0,O[0];const F=O.length-1;if(W===1)return O[F].t=1,O[F];const j=1-W;let U=O;if(F===0)return O[0].t=W,O[0];if(F===1){const Q={x:j*U[0].x+W*U[1].x,y:j*U[0].y+W*U[1].y,t:W};return N&&(Q.z=j*U[0].z+W*U[1].z),Q}if(F<4){let Q,ee,se,Ee=j*j,ve=W*W,be=0;F===2?(U=[U[0],U[1],U[2],b],Q=Ee,ee=j*W*2,se=ve):F===3&&(Q=Ee*j,ee=Ee*W*3,se=j*ve*3,be=W*ve);const Oe={x:Q*U[0].x+ee*U[1].x+se*U[2].x+be*U[3].x,y:Q*U[0].y+ee*U[1].y+se*U[2].y+be*U[3].y,t:W};return N&&(Oe.z=Q*U[0].z+ee*U[1].z+se*U[2].z+be*U[3].z),Oe}const I=JSON.parse(JSON.stringify(O));for(;I.length>1;){for(let Q=0;Q<I.length-1;Q++)I[Q]={x:I[Q].x+(I[Q+1].x-I[Q].x)*W,y:I[Q].y+(I[Q+1].y-I[Q].y)*W},I[Q].z!==void 0&&(I[Q]=I[Q].z+(I[Q+1].z-I[Q].z)*W);I.splice(I.length-1,1)}return I[0].t=W,I[0]},computeWithRatios:function(W,O,N,F){const j=1-W,U=N,I=O;let Q,ee=U[0],se=U[1],Ee=U[2],ve=U[3];return ee*=j,se*=W,I.length===2?(Q=ee+se,{x:(ee*I[0].x+se*I[1].x)/Q,y:(ee*I[0].y+se*I[1].y)/Q,z:!!F&&(ee*I[0].z+se*I[1].z)/Q,t:W}):(ee*=j,se*=2*j,Ee*=W*W,I.length===3?(Q=ee+se+Ee,{x:(ee*I[0].x+se*I[1].x+Ee*I[2].x)/Q,y:(ee*I[0].y+se*I[1].y+Ee*I[2].y)/Q,z:!!F&&(ee*I[0].z+se*I[1].z+Ee*I[2].z)/Q,t:W}):(ee*=j,se*=1.5*j,Ee*=3*j,ve*=W*W*W,I.length===4?(Q=ee+se+Ee+ve,{x:(ee*I[0].x+se*I[1].x+Ee*I[2].x+ve*I[3].x)/Q,y:(ee*I[0].y+se*I[1].y+Ee*I[2].y+ve*I[3].y)/Q,z:!!F&&(ee*I[0].z+se*I[1].z+Ee*I[2].z+ve*I[3].z)/Q,t:W}):void 0))},derive:function(W,O){const N=[];for(let F=W,j=F.length,U=j-1;j>1;j--,U--){const I=[];for(let Q,ee=0;ee<U;ee++)Q={x:U*(F[ee+1].x-F[ee].x),y:U*(F[ee+1].y-F[ee].y)},O&&(Q.z=U*(F[ee+1].z-F[ee].z)),I.push(Q);N.push(I),F=I}return N},between:function(W,O,N){return O<=W&&W<=N||R.approximately(W,O)||R.approximately(W,N)},approximately:function(W,O,N){return a(W-O)<=(N||1e-6)},length:function(W){const O=R.Tvalues.length;let N=0;for(let F,j=0;j<O;j++)F=.5*R.Tvalues[j]+.5,N+=R.Cvalues[j]*R.arcfn(F,W);return .5*N},map:function(W,O,N,F,j){return F+(W-O)/(N-O)*(j-F)},lerp:function(W,O,N){const F={x:O.x+W*(N.x-O.x),y:O.y+W*(N.y-O.y)};return O.z!==void 0&&N.z!==void 0&&(F.z=O.z+W*(N.z-O.z)),F},pointToString:function(W){let O=W.x+"/"+W.y;return W.z!==void 0&&(O+="/"+W.z),O},pointsToString:function(W){return"["+W.map(R.pointToString).join(", ")+"]"},copy:function(W){return JSON.parse(JSON.stringify(W))},angle:function(W,O,N){const F=O.x-W.x,j=O.y-W.y,U=N.x-W.x,I=N.y-W.y;return g(F*I-j*U,F*U+j*I)},round:function(W,O){const N=""+W,F=N.indexOf(".");return parseFloat(N.substring(0,F+1+O))},dist:function(W,O){const N=W.x-O.x,F=W.y-O.y;return p(N*N+F*F)},closest:function(W,O){let N,F,j=y(2,63);return W.forEach(function(U,I){F=R.dist(O,U),F<j&&(j=F,N=I)}),{mdist:j,mpos:N}},abcratio:function(W,O){if(O!==2&&O!==3)return!1;if(W===void 0)W=.5;else if(W===0||W===1)return W;const N=y(W,O)+y(1-W,O);return a((N-1)/N)},projectionratio:function(W,O){if(O!==2&&O!==3)return!1;if(W===void 0)W=.5;else if(W===0||W===1)return W;const N=y(1-W,O);return N/(y(W,O)+N)},lli8:function(W,O,N,F,j,U,I,Q){const ee=(W-N)*(U-Q)-(O-F)*(j-I);return ee!=0&&{x:((W*F-O*N)*(j-I)-(W-N)*(j*Q-U*I))/ee,y:((W*F-O*N)*(U-Q)-(O-F)*(j*Q-U*I))/ee}},lli4:function(W,O,N,F){const j=W.x,U=W.y,I=O.x,Q=O.y,ee=N.x,se=N.y,Ee=F.x,ve=F.y;return R.lli8(j,U,I,Q,ee,se,Ee,ve)},lli:function(W,O){return R.lli4(W,W.c,O,O.c)},makeline:function(W,O){return new ye(W.x,W.y,(W.x+O.x)/2,(W.y+O.y)/2,O.x,O.y)},findbbox:function(W){let O=A,N=A,F=P,j=P;return W.forEach(function(U){const I=U.bbox();O>I.x.min&&(O=I.x.min),N>I.y.min&&(N=I.y.min),F<I.x.max&&(F=I.x.max),j<I.y.max&&(j=I.y.max)}),{x:{min:O,mid:(O+F)/2,max:F,size:F-O},y:{min:N,mid:(N+j)/2,max:j,size:j-N}}},shapeintersections:function(W,O,N,F,j){if(!R.bboxoverlap(O,F))return[];const U=[],I=[W.startcap,W.forward,W.back,W.endcap],Q=[N.startcap,N.forward,N.back,N.endcap];return I.forEach(function(ee){ee.virtual||Q.forEach(function(se){if(se.virtual)return;const Ee=ee.intersects(se,j);Ee.length>0&&(Ee.c1=ee,Ee.c2=se,Ee.s1=W,Ee.s2=N,U.push(Ee))})}),U},makeshape:function(W,O,N){const F=O.points.length,j=W.points.length,U=R.makeline(O.points[F-1],W.points[0]),I=R.makeline(W.points[j-1],O.points[0]),Q={startcap:U,forward:W,back:O,endcap:I,bbox:R.findbbox([U,W,O,I]),intersections:function(ee){return R.shapeintersections(Q,Q.bbox,ee,ee.bbox,N)}};return Q},getminmax:function(W,O,N){if(!N)return{min:0,max:0};let F,j,U=A,I=P;N.indexOf(0)===-1&&(N=[0].concat(N)),N.indexOf(1)===-1&&N.push(1);for(let Q=0,ee=N.length;Q<ee;Q++)F=N[Q],j=W.get(F),j[O]<U&&(U=j[O]),j[O]>I&&(I=j[O]);return{min:U,mid:(U+I)/2,max:I,size:I-U}},align:function(W,O){const N=O.p1.x,F=O.p1.y,j=-g(O.p2.y-F,O.p2.x-N);return W.map(function(U){return{x:(U.x-N)*u(j)-(U.y-F)*f(j),y:(U.x-N)*f(j)+(U.y-F)*u(j)}})},roots:function(W,O){O=O||{p1:{x:0,y:0},p2:{x:1,y:0}};const N=W.length-1,F=R.align(W,O),j=function(Qe){return 0<=Qe&&Qe<=1};if(N===2){const Qe=F[0].y,St=F[1].y,ft=F[2].y,Ot=Qe-2*St+ft;if(Ot!==0){const mt=-p(St*St-Qe*ft),Ut=-Qe+St;return[-(mt+Ut)/Ot,-(-mt+Ut)/Ot].filter(j)}return St!==ft&&Ot===0?[(2*St-ft)/(2*St-2*ft)].filter(j):[]}const U=F[0].y,I=F[1].y,Q=F[2].y;let ee=3*I-U-3*Q+F[3].y,se=3*U-6*I+3*Q,Ee=-3*U+3*I,ve=U;if(R.approximately(ee,0)){if(R.approximately(se,0))return R.approximately(Ee,0)?[]:[-ve/Ee].filter(j);const Qe=p(Ee*Ee-4*se*ve),St=2*se;return[(Qe-Ee)/St,(-Ee-Qe)/St].filter(j)}se/=ee,Ee/=ee,ve/=ee;const be=(3*Ee-se*se)/3,Oe=be/3,ie=(2*se*se*se-9*se*Ee+27*ve)/27,De=ie/2,Re=De*De+Oe*Oe*Oe;let Ie,ct,Ne,yt,lt;if(Re<0){const Qe=-be/3,St=p(Qe*Qe*Qe),ft=-ie/(2*St),Ot=d(ft<-1?-1:ft>1?1:ft),mt=2*w(St);return Ne=mt*u(Ot/3)-se/3,yt=mt*u((Ot+S)/3)-se/3,lt=mt*u((Ot+2*S)/3)-se/3,[Ne,yt,lt].filter(j)}if(Re===0)return Ie=De<0?w(-De):-w(De),Ne=2*Ie-se/3,yt=-Ie-se/3,[Ne,yt].filter(j);{const Qe=p(Re);return Ie=w(-De+Qe),ct=w(De+Qe),[Ie-ct-se/3].filter(j)}},droots:function(W){if(W.length===3){const O=W[0],N=W[1],F=W[2],j=O-2*N+F;if(j!==0){const U=-p(N*N-O*F),I=-O+N;return[-(U+I)/j,-(-U+I)/j]}return N!==F&&j===0?[(2*N-F)/(2*(N-F))]:[]}if(W.length===2){const O=W[0],N=W[1];return O!==N?[O/(O-N)]:[]}return[]},curvature:function(W,O,N,F,j){let U,I,Q,ee,se=0,Ee=0;const ve=R.compute(W,O),be=R.compute(W,N),Oe=ve.x*ve.x+ve.y*ve.y;if(F?(U=p(y(ve.y*be.z-be.y*ve.z,2)+y(ve.z*be.x-be.z*ve.x,2)+y(ve.x*be.y-be.x*ve.y,2)),I=y(Oe+ve.z*ve.z,1.5)):(U=ve.x*be.y-ve.y*be.x,I=y(Oe,1.5)),U===0||I===0)return{k:0,r:0};if(se=U/I,Ee=I/U,!j){const ie=R.curvature(W-.001,O,N,F,!0).k,De=R.curvature(W+.001,O,N,F,!0).k;ee=(De-se+(se-ie))/2,Q=(a(De-se)+a(se-ie))/2}return{k:se,r:Ee,dk:ee,adk:Q}},inflections:function(W){if(W.length<4)return[];const O=R.align(W,{p1:W[0],p2:W.slice(-1)[0]}),N=O[2].x*O[1].y,F=O[3].x*O[1].y,j=O[1].x*O[2].y,U=18*(-3*N+2*F+3*j-O[3].x*O[2].y),I=18*(3*N-F-3*j),Q=18*(j-N);if(R.approximately(U,0)){if(!R.approximately(I,0)){let ve=-Q/I;if(0<=ve&&ve<=1)return[ve]}return[]}const ee=I*I-4*U*Q,se=Math.sqrt(ee),Ee=2*U;return R.approximately(Ee,0)?[]:[(se-I)/Ee,-(I+se)/Ee].filter(function(ve){return 0<=ve&&ve<=1})},bboxoverlap:function(W,O){const N=["x","y"],F=N.length;for(let j,U,I,Q,ee=0;ee<F;ee++)if(j=N[ee],U=W[j].mid,I=O[j].mid,Q=(W[j].size+O[j].size)/2,a(U-I)>=Q)return!1;return!0},expandbox:function(W,O){O.x.min<W.x.min&&(W.x.min=O.x.min),O.y.min<W.y.min&&(W.y.min=O.y.min),O.z&&O.z.min<W.z.min&&(W.z.min=O.z.min),O.x.max>W.x.max&&(W.x.max=O.x.max),O.y.max>W.y.max&&(W.y.max=O.y.max),O.z&&O.z.max>W.z.max&&(W.z.max=O.z.max),W.x.mid=(W.x.min+W.x.max)/2,W.y.mid=(W.y.min+W.y.max)/2,W.z&&(W.z.mid=(W.z.min+W.z.max)/2),W.x.size=W.x.max-W.x.min,W.y.size=W.y.max-W.y.min,W.z&&(W.z.size=W.z.max-W.z.min)},pairiteration:function(W,O,N){const F=W.bbox(),j=O.bbox(),U=1e5,I=N||.5;if(F.x.size+F.y.size<I&&j.x.size+j.y.size<I)return[(U*(W._t1+W._t2)/2|0)/U+"/"+(U*(O._t1+O._t2)/2|0)/U];let Q=W.split(.5),ee=O.split(.5),se=[{left:Q.left,right:ee.left},{left:Q.left,right:ee.right},{left:Q.right,right:ee.right},{left:Q.right,right:ee.left}];se=se.filter(function(ve){return R.bboxoverlap(ve.left.bbox(),ve.right.bbox())});let Ee=[];return se.length===0||(se.forEach(function(ve){Ee=Ee.concat(R.pairiteration(ve.left,ve.right,I))}),Ee=Ee.filter(function(ve,be){return Ee.indexOf(ve)===be})),Ee},getccenter:function(W,O,N){const F=O.x-W.x,j=O.y-W.y,U=N.x-O.x,I=N.y-O.y,Q=F*u(D)-j*f(D),ee=F*f(D)+j*u(D),se=U*u(D)-I*f(D),Ee=U*f(D)+I*u(D),ve=(W.x+O.x)/2,be=(W.y+O.y)/2,Oe=(O.x+N.x)/2,ie=(O.y+N.y)/2,De=ve+Q,Re=be+ee,Ie=Oe+se,ct=ie+Ee,Ne=R.lli8(ve,be,De,Re,Oe,ie,Ie,ct),yt=R.dist(Ne,W);let lt,Qe=g(W.y-Ne.y,W.x-Ne.x),St=g(O.y-Ne.y,O.x-Ne.x),ft=g(N.y-Ne.y,N.x-Ne.x);return Qe<ft?((Qe>St||St>ft)&&(Qe+=S),Qe>ft&&(lt=ft,ft=Qe,Qe=lt)):ft<St&&St<Qe?(lt=ft,ft=Qe,Qe=lt):ft+=S,Ne.s=Qe,Ne.e=ft,Ne.r=yt,Ne},numberSort:function(W,O){return W-O}};class L{constructor(O){this.curves=[],this._3d=!1,O&&(this.curves=O,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(O){return R.pointsToString(O.points)}).join(", ")+"]"}addCurve(O){this.curves.push(O),this._3d=this._3d||O._3d}length(){return this.curves.map(function(O){return O.length()}).reduce(function(O,N){return O+N})}curve(O){return this.curves[O]}bbox(){const O=this.curves;for(var N=O[0].bbox(),F=1;F<O.length;F++)R.expandbox(N,O[F].bbox());return N}offset(O){const N=[];return this.curves.forEach(function(F){N.push(...F.offset(O))}),new L(N)}}const{abs:V,min:Z,max:ne,cos:le,sin:de,acos:Pe,sqrt:ue}=Math,he=Math.PI;class ye{constructor(O){let N=O&&O.forEach?O:Array.from(arguments).slice(),F=!1;if(typeof N[0]=="object"){F=N.length;const Oe=[];N.forEach(function(ie){["x","y","z"].forEach(function(De){ie[De]!==void 0&&Oe.push(ie[De])})}),N=Oe}let j=!1;const U=N.length;if(F){if(F>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");j=!0}}else if(U!==6&&U!==8&&U!==9&&U!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const I=this._3d=!j&&(U===9||U===12)||O&&O[0]&&O[0].z!==void 0,Q=this.points=[];for(let Oe=0,ie=I?3:2;Oe<U;Oe+=ie){var ee={x:N[Oe],y:N[Oe+1]};I&&(ee.z=N[Oe+2]),Q.push(ee)}const se=this.order=Q.length-1,Ee=this.dims=["x","y"];I&&Ee.push("z"),this.dimlen=Ee.length;const ve=R.align(Q,{p1:Q[0],p2:Q[se]}),be=R.dist(Q[0],Q[se]);this._linear=ve.reduce((Oe,ie)=>Oe+V(ie.y),0)<be/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(O,N,F,j){if(j===void 0&&(j=.5),j===0)return new ye(N,N,F);if(j===1)return new ye(O,N,N);const U=ye.getABC(2,O,N,F,j);return new ye(O,U.A,F)}static cubicFromPoints(O,N,F,j,U){j===void 0&&(j=.5);const I=ye.getABC(3,O,N,F,j);U===void 0&&(U=R.dist(N,I.C));const Q=U*(1-j)/j,ee=R.dist(O,F),se=(F.x-O.x)/ee,Ee=(F.y-O.y)/ee,ve=U*se,be=U*Ee,Oe=Q*se,ie=Q*Ee,De=N.x-ve,Re=N.y-be,Ie=N.x+Oe,ct=N.y+ie,Ne=I.A,yt=Ne.x+(De-Ne.x)/(1-j),lt=Ne.y+(Re-Ne.y)/(1-j),Qe=Ne.x+(Ie-Ne.x)/j,St=Ne.y+(ct-Ne.y)/j,ft={x:O.x+(yt-O.x)/j,y:O.y+(lt-O.y)/j},Ot={x:F.x+(Qe-F.x)/(1-j),y:F.y+(St-F.y)/(1-j)};return new ye(O,ft,Ot,F)}static getUtils(){return R}getUtils(){return ye.getUtils()}static get PolyBezier(){return L}valueOf(){return this.toString()}toString(){return R.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const O=this.points,N=["M",O[0].x,O[0].y,this.order===2?"Q":"C"];for(let F=1,j=O.length;F<j;F++)N.push(O[F].x),N.push(O[F].y);return N.join(" ")}setRatios(O){if(O.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=O,this._lut=[]}verify(){const O=this.coordDigest();O!==this._print&&(this._print=O,this.update())}coordDigest(){return this.points.map(function(O,N){return""+N+O.x+O.y+(O.z?O.z:0)}).join("")}update(){this._lut=[],this.dpoints=R.derive(this.points,this._3d),this.computedirection()}computedirection(){const O=this.points,N=R.angle(O[0],O[this.order],O[1]);this.clockwise=N>0}length(){return R.length(this.derivative.bind(this))}static getABC(O=2,N,F,j,U=.5){const I=R.projectionratio(U,O),Q=1-I,ee={x:I*N.x+Q*j.x,y:I*N.y+Q*j.y},se=R.abcratio(U,O);return{A:{x:F.x+(F.x-ee.x)/se,y:F.y+(F.y-ee.y)/se},B:F,C:ee,S:N,E:j}}getABC(O,N){N=N||this.get(O);let F=this.points[0],j=this.points[this.order];return ye.getABC(this.order,F,N,j,O)}getLUT(O){if(this.verify(),O=O||100,this._lut.length===O)return this._lut;this._lut=[],O++,this._lut=[];for(let N,F,j=0;j<O;j++)F=j/(O-1),N=this.compute(F),N.t=F,this._lut.push(N);return this._lut}on(O,N){N=N||5;const F=this.getLUT(),j=[];for(let U,I=0,Q=0;I<F.length;I++)U=F[I],R.dist(U,O)<N&&(j.push(U),Q+=I/F.length);return!!j.length&&(t/=j.length)}project(O){const N=this.getLUT(),F=N.length-1,j=R.closest(N,O),U=j.mpos,I=(U-1)/F,Q=(U+1)/F,ee=.1/F;let se,Ee,ve=j.mdist,be=I,Oe=be;for(ve+=1;be<Q+ee;be+=ee)se=this.compute(be),Ee=R.dist(O,se),Ee<ve&&(ve=Ee,Oe=be);return Oe=Oe<0?0:Oe>1?1:Oe,se=this.compute(Oe),se.t=Oe,se.d=ve,se}get(O){return this.compute(O)}point(O){return this.points[O]}compute(O){return this.ratios?R.computeWithRatios(O,this.points,this.ratios,this._3d):R.compute(O,this.points,this._3d,this.ratios)}raise(){const O=this.points,N=[O[0]],F=O.length;for(let j,U,I=1;I<F;I++)j=O[I],U=O[I-1],N[I]={x:(F-I)/F*j.x+I/F*U.x,y:(F-I)/F*j.y+I/F*U.y};return N[F]=O[F-1],new ye(N)}derivative(O){return R.compute(O,this.dpoints[0],this._3d)}dderivative(O){return R.compute(O,this.dpoints[1],this._3d)}align(){let O=this.points;return new ye(R.align(O,{p1:O[0],p2:O[O.length-1]}))}curvature(O){return R.curvature(O,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return R.inflections(this.points)}normal(O){return this._3d?this.__normal3(O):this.__normal2(O)}__normal2(O){const N=this.derivative(O),F=ue(N.x*N.x+N.y*N.y);return{x:-N.y/F,y:N.x/F}}__normal3(O){const N=this.derivative(O),F=this.derivative(O+.01),j=ue(N.x*N.x+N.y*N.y+N.z*N.z),U=ue(F.x*F.x+F.y*F.y+F.z*F.z);N.x/=j,N.y/=j,N.z/=j,F.x/=U,F.y/=U,F.z/=U;const I={x:F.y*N.z-F.z*N.y,y:F.z*N.x-F.x*N.z,z:F.x*N.y-F.y*N.x},Q=ue(I.x*I.x+I.y*I.y+I.z*I.z);I.x/=Q,I.y/=Q,I.z/=Q;const ee=[I.x*I.x,I.x*I.y-I.z,I.x*I.z+I.y,I.x*I.y+I.z,I.y*I.y,I.y*I.z-I.x,I.x*I.z-I.y,I.y*I.z+I.x,I.z*I.z];return{x:ee[0]*N.x+ee[1]*N.y+ee[2]*N.z,y:ee[3]*N.x+ee[4]*N.y+ee[5]*N.z,z:ee[6]*N.x+ee[7]*N.y+ee[8]*N.z}}hull(O){let N=this.points,F=[],j=[],U=0;for(j[U++]=N[0],j[U++]=N[1],j[U++]=N[2],this.order===3&&(j[U++]=N[3]);N.length>1;){F=[];for(let I,Q=0,ee=N.length-1;Q<ee;Q++)I=R.lerp(O,N[Q],N[Q+1]),j[U++]=I,F.push(I);N=F}return j}split(O,N){if(O===0&&N)return this.split(N).left;if(N===1)return this.split(O).right;const F=this.hull(O),j={left:this.order===2?new ye([F[0],F[3],F[5]]):new ye([F[0],F[4],F[7],F[9]]),right:this.order===2?new ye([F[5],F[4],F[2]]):new ye([F[9],F[8],F[6],F[3]]),span:F};return j.left._t1=R.map(0,0,1,this._t1,this._t2),j.left._t2=R.map(O,0,1,this._t1,this._t2),j.right._t1=R.map(O,0,1,this._t1,this._t2),j.right._t2=R.map(1,0,1,this._t1,this._t2),N?(N=R.map(N,O,1,0,1),j.right.split(N).left):j}extrema(){const O={};let N=[];return this.dims.forEach((function(F){let j=function(I){return I[F]},U=this.dpoints[0].map(j);O[F]=R.droots(U),this.order===3&&(U=this.dpoints[1].map(j),O[F]=O[F].concat(R.droots(U))),O[F]=O[F].filter(function(I){return I>=0&&I<=1}),N=N.concat(O[F].sort(R.numberSort))}).bind(this)),O.values=N.sort(R.numberSort).filter(function(F,j){return N.indexOf(F)===j}),O}bbox(){const O=this.extrema(),N={};return this.dims.forEach((function(F){N[F]=R.getminmax(this,F,O[F])}).bind(this)),N}overlaps(O){const N=this.bbox(),F=O.bbox();return R.bboxoverlap(N,F)}offset(O,N){if(N!==void 0){const F=this.get(O),j=this.normal(O),U={c:F,n:j,x:F.x+j.x*N,y:F.y+j.y*N};return this._3d&&(U.z=F.z+j.z*N),U}if(this._linear){const F=this.normal(0),j=this.points.map(function(U){const I={x:U.x+O*F.x,y:U.y+O*F.y};return U.z&&F.z&&(I.z=U.z+O*F.z),I});return[new ye(j)]}return this.reduce().map(function(F){return F._linear?F.offset(O)[0]:F.scale(O)})}simple(){if(this.order===3){const j=R.angle(this.points[0],this.points[3],this.points[1]),U=R.angle(this.points[0],this.points[3],this.points[2]);if(j>0&&U<0||j<0&&U>0)return!1}const O=this.normal(0),N=this.normal(1);let F=O.x*N.x+O.y*N.y;return this._3d&&(F+=O.z*N.z),V(Pe(F))<he/3}reduce(){let O,N,F=0,j=0,U=.01,I=[],Q=[],ee=this.extrema().values;for(ee.indexOf(0)===-1&&(ee=[0].concat(ee)),ee.indexOf(1)===-1&&ee.push(1),F=ee[0],O=1;O<ee.length;O++)j=ee[O],N=this.split(F,j),N._t1=F,N._t2=j,I.push(N),F=j;return I.forEach(function(se){for(F=0,j=0;j<=1;)for(j=F+U;j<=1.01;j+=U)if(N=se.split(F,j),!N.simple()){if(j-=U,V(F-j)<U)return[];N=se.split(F,j),N._t1=R.map(F,0,1,se._t1,se._t2),N._t2=R.map(j,0,1,se._t1,se._t2),Q.push(N),F=j;break}F<1&&(N=se.split(F,1),N._t1=R.map(F,0,1,se._t1,se._t2),N._t2=se._t2,Q.push(N))}),Q}translate(O,N,F){F=typeof F=="number"?F:N;const j=this.order;let U=this.points.map((I,Q)=>(1-Q/j)*N+Q/j*F);return new ye(this.points.map((I,Q)=>({x:I.x+O.x*U[Q],y:I.y+O.y*U[Q]})))}scale(O){const N=this.order;let F=!1;if(typeof O=="function"&&(F=O),F&&N===2)return this.raise().scale(F);const j=this.clockwise,U=this.points;if(this._linear)return this.translate(this.normal(0),F?F(0):O,F?F(1):O);const I=F?F(0):O,Q=F?F(1):O,ee=[this.offset(0,10),this.offset(1,10)],se=[],Ee=R.lli4(ee[0],ee[0].c,ee[1],ee[1].c);if(!Ee)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(ve){const be=se[ve*N]=R.copy(U[ve*N]);be.x+=(ve?Q:I)*ee[ve].n.x,be.y+=(ve?Q:I)*ee[ve].n.y}),F?([0,1].forEach(function(ve){if(N!==2||!ve){var be=U[ve+1],Oe={x:be.x-Ee.x,y:be.y-Ee.y},ie=F?F((ve+1)/N):O;F&&!j&&(ie=-ie);var De=ue(Oe.x*Oe.x+Oe.y*Oe.y);Oe.x/=De,Oe.y/=De,se[ve+1]={x:be.x+ie*Oe.x,y:be.y+ie*Oe.y}}}),new ye(se)):([0,1].forEach(ve=>{if(N===2&&ve)return;const be=se[ve*N],Oe=this.derivative(ve),ie={x:be.x+Oe.x,y:be.y+Oe.y};se[ve+1]=R.lli4(be,ie,Ee,U[ve+1])}),new ye(se))}outline(O,N,F,j){if(N=N===void 0?O:N,this._linear){const lt=this.normal(0),Qe=this.points[0],St=this.points[this.points.length-1];let ft,Ot,mt;F===void 0&&(F=O,j=N),ft={x:Qe.x+lt.x*O,y:Qe.y+lt.y*O},mt={x:St.x+lt.x*F,y:St.y+lt.y*F},Ot={x:(ft.x+mt.x)/2,y:(ft.y+mt.y)/2};const Ut=[ft,Ot,mt];ft={x:Qe.x-lt.x*N,y:Qe.y-lt.y*N},mt={x:St.x-lt.x*j,y:St.y-lt.y*j},Ot={x:(ft.x+mt.x)/2,y:(ft.y+mt.y)/2};const Gn=[mt,Ot,ft],Ar=R.makeline(Gn[2],Ut[0]),Fn=R.makeline(Ut[2],Gn[0]),wi=[Ar,new ye(Ut),Fn,new ye(Gn)];return new L(wi)}const U=this.reduce(),I=U.length,Q=[];let ee,se=[],Ee=0,ve=this.length();const be=F!==void 0&&j!==void 0;function Oe(lt,Qe,St,ft,Ot){return function(mt){const Ut=ft/St,Gn=(ft+Ot)/St,Ar=Qe-lt;return R.map(mt,0,1,lt+Ut*Ar,lt+Gn*Ar)}}U.forEach(function(lt){const Qe=lt.length();be?(Q.push(lt.scale(Oe(O,F,ve,Ee,Qe))),se.push(lt.scale(Oe(-N,-j,ve,Ee,Qe)))):(Q.push(lt.scale(O)),se.push(lt.scale(-N))),Ee+=Qe}),se=se.map(function(lt){return ee=lt.points,ee[3]?lt.points=[ee[3],ee[2],ee[1],ee[0]]:lt.points=[ee[2],ee[1],ee[0]],lt}).reverse();const ie=Q[0].points[0],De=Q[I-1].points[Q[I-1].points.length-1],Re=se[I-1].points[se[I-1].points.length-1],Ie=se[0].points[0],ct=R.makeline(Re,ie),Ne=R.makeline(De,Ie),yt=[ct].concat(Q).concat([Ne]).concat(se);return new L(yt)}outlineshapes(O,N,F){N=N||O;const j=this.outline(O,N).curves,U=[];for(let I=1,Q=j.length;I<Q/2;I++){const ee=R.makeshape(j[I],j[Q-I],F);ee.startcap.virtual=I>1,ee.endcap.virtual=I<Q/2-1,U.push(ee)}return U}intersects(O,N){return O?O.p1&&O.p2?this.lineIntersects(O):(O instanceof ye&&(O=O.reduce()),this.curveintersects(this.reduce(),O,N)):this.selfintersects(N)}lineIntersects(O){const N=Z(O.p1.x,O.p2.x),F=Z(O.p1.y,O.p2.y),j=ne(O.p1.x,O.p2.x),U=ne(O.p1.y,O.p2.y);return R.roots(this.points,O).filter(I=>{var Q=this.get(I);return R.between(Q.x,N,j)&&R.between(Q.y,F,U)})}selfintersects(O){const N=this.reduce(),F=N.length-2,j=[];for(let U,I,Q,ee=0;ee<F;ee++)I=N.slice(ee,ee+1),Q=N.slice(ee+2),U=this.curveintersects(I,Q,O),j.push(...U);return j}curveintersects(O,N,F){const j=[];O.forEach(function(I){N.forEach(function(Q){I.overlaps(Q)&&j.push({left:I,right:Q})})});let U=[];return j.forEach(function(I){const Q=R.pairiteration(I.left,I.right,F);Q.length>0&&(U=U.concat(Q))}),U}arcs(O){return O=O||.5,this._iterate(O,[])}_error(O,N,F,j){const U=(j-F)/4,I=this.get(F+U),Q=this.get(j-U),ee=R.dist(O,N),se=R.dist(O,I),Ee=R.dist(O,Q);return V(se-ee)+V(Ee-ee)}_iterate(O,N){let F,j=0,U=1;do{F=0,U=1;let I,Q,ee,se,Ee,ve=this.get(j),be=!1,Oe=!1,ie=U,De=1;do if(Oe=be,se=ee,ie=(j+U)/2,I=this.get(ie),Q=this.get(U),ee=R.getccenter(ve,I,Q),ee.interval={start:j,end:U},be=this._error(ee,ve,j,U)<=O,Ee=Oe&&!be,Ee||(De=U),be){if(U>=1){if(ee.interval.end=De=1,se=ee,U>1){let Re={x:ee.x+ee.r*le(ee.e),y:ee.y+ee.r*de(ee.e)};ee.e+=R.angle({x:ee.x,y:ee.y},Re,this.get(1))}break}U+=(U-j)/2}else U=ie;while(!Ee&&F++<100);if(F>=100)break;se=se||ee,N.push(se),j=De}while(U<1);return N}}s.Bezier=ye}},i={};return function o(s){var a=i[s];if(a!==void 0)return a.exports;var u=i[s]={exports:{}};return r[s](u,u.exports,o),u.exports}(607)})()})}(Qv)),Qv.exports}var qu=gQ();const cM="laser-pointer",pQ=e=>{const n=e,r=n.backingStorePixelRatio||n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/r};class mQ{constructor(){this.mouseTrack=[],this.mouseMoveHandler=null,this.resizeHandler=null,this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1,this.container=null}init(n){this.container=H.getBoardContainer(n).closest(".drawnix"),this.cvsDom=this.container.querySelector(`.${cM}`),this.ctx=this.cvsDom.getContext("2d"),this.canvasPos=this.cvsDom.getBoundingClientRect(),this.mouseMoveHandler=r=>{if(!this.canvasPos)return;const i=r.clientX-this.canvasPos.x,o=r.clientY-this.canvasPos.y;this.mouseTrack.push({x:i,y:o,time:Date.now()}),this.ctx&&this.startDraw()},this.resizeHandler=()=>this.setCanvasSize(),this.container.addEventListener("pointermove",this.mouseMoveHandler),window.addEventListener("resize",this.resizeHandler),this.setCanvasSize()}destroy(){this.mouseMoveHandler&&this.container&&(this.container.removeEventListener("pointermove",this.mouseMoveHandler),this.mouseMoveHandler=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.ctx&&this.cvsDom&&this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height),this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1}startDraw(){this.drawing||(this.drawing=!0,this.draw())}draw(){if(!this.ctx||!this.cvsDom)return;this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height);let n=!1;if(this.mouseTrack=qu.drainPoints(this.mouseTrack),this.mouseTrack.length>=3)qu.setColor(211,211,211),qu.setDelay(180),qu.setRoundCap(!0),qu.setMaxWidth(10),qu.setMinWidth(0),qu.setOpacity(.6),qu.drawLaserPen(this.ctx,this.mouseTrack),n=!0;else{const r=this.mouseTrack[this.mouseTrack.length-1];if(!r)return;this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle="rgba(211, 211, 211)",this.ctx.arc(r.x,r.y,5,0,Math.PI*2,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}n?requestAnimationFrame(()=>this.draw()):this.drawing=!1}setCanvasSize(){if(!this.cvsDom||!this.ctx)return;const n=this.cvsDom.getBoundingClientRect(),r=pQ(this.ctx);this.cvsDom.setAttribute("width",`${n.width*r}px`),this.cvsDom.setAttribute("height",`${n.height*r}px`),this.ctx.scale(r,r),this.canvasPos=this.cvsDom.getBoundingClientRect()}}const vQ=e=>{const{pointerDown:n,pointerMove:r,pointerUp:i,globalPointerUp:o}=e,s=new mQ;let a=!1;const u=new Set,f=p=>{const y=It(e,Lt(e,p[0],p[1]));e.children.filter(E=>Es.isFreehand(E)).forEach(E=>{!u.has(E.id)&&lM(e,E,y)&&(hn.getElementG(E).style.opacity="0.2",u.add(E.id))})},d=()=>{if(u.size>0){const p=e.children.filter(y=>u.has(y.id));p.length>0&&jE.removeElements(e,p)}},g=()=>{a&&(d(),a=!1,u.clear(),s.destroy())};return e.pointerDown=p=>{if(H.isInPointer(e,[Ko.eraser])&&oh(e)){a=!0,u.clear();const w=[p.x,p.y];f(w),s.init(e);return}n(p)},e.pointerMove=p=>{if(a){ha(e,"with-freehand-erase",()=>{const y=[p.x,p.y];f(y)});return}r(p)},e.pointerUp=p=>{if(a){g();return}i(p)},e.globalPointerUp=p=>{if(a){g();return}o(p)},e},yQ=e=>{const{getRectangle:n,drawElement:r,isHit:i,isRectangleHit:o,getOneHitElement:s,isMovable:a,isAlign:u}=e;return e.drawElement=f=>Es.isFreehand(f.element)?uQ:r(f),e.getRectangle=f=>Es.isFreehand(f)?_.getRectangleByPoints(f.points):n(f),e.isRectangleHit=(f,d)=>Es.isFreehand(f)?nQ(e,f,d):o(f,d),e.isHit=(f,d,g)=>Es.isFreehand(f)?lM(e,f,d):i(f,d,g),e.getOneHitElement=f=>f.every(g=>Es.isFreehand(g))?p4(e,f):s(f),e.isMovable=f=>Es.isFreehand(f)?!0:a(f),e.isAlign=f=>Es.isFreehand(f)?!0:u(f),e.setPluginOptions(H8,{customGeometryTypes:[n6]}),vQ(hQ(fQ(e)))},wQ=()=>{const e=Tr(),{t:n}=Kn(),r=e.theme;return k.jsx(Bo,{padding:1,className:gn("theme-toolbar",el),children:k.jsxs("select",{onChange:i=>{const o=i.target.value;sn.updateThemeColor(e,o)},value:r.themeColorMode,children:[k.jsx("option",{value:"default",children:n("theme.default")}),k.jsx("option",{value:"colorful",children:n("theme.colorful")}),k.jsx("option",{value:"soft",children:n("theme.soft")}),k.jsx("option",{value:"retro",children:n("theme.retro")}),k.jsx("option",{value:"dark",children:n("theme.dark")}),k.jsx("option",{value:"starry",children:n("theme.starry")})]})})},fM=new WeakMap,rA=e=>!!fM.get(e),hM=(e,n)=>{fM.set(e,n)},xQ=e=>r=>{const{pointerDown:i}=r;return r.pointerDown=o=>{wC(o)&&!rA(r)&&(hM(r,!0),e({isPencilMode:!0})),!(rA(r)&&!wC(o))&&i(o)},r},CQ=()=>{const e=Tr(),{appState:n,setAppState:r}=Is();return n.isPencilMode?k.jsx("div",{className:"pencil-mode-toolbar",children:k.jsx(On,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{r({...n,isPencilMode:!1}),hM(e,!1)}})}):null};function EQ({initialOpen:e=!1,open:n,onOpenChange:r}={}){const[i,o]=K.useState(e),[s,a]=K.useState(),[u,f]=K.useState(),d=n??i,g=r??o,p=bw({open:d,onOpenChange:g}),y=p.context,w=I6(y,{enabled:n==null}),E=F6(y,{outsidePressEvent:"mousedown"}),S=_6(y),D=L6([w,E,S]);return K.useMemo(()=>({open:d,setOpen:g,...D,...p,labelId:s,descriptionId:u,setLabelId:a,setDescriptionId:f}),[d,g,D,p,s,u])}const dM=K.createContext(null),j1=()=>{const e=K.useContext(dM);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function cE({children:e,...n}){const r=EQ(n);return k.jsx(dM.Provider,{value:r,children:e})}K.forwardRef(function({children:n,asChild:r=!1,...i},o){const s=j1(),a=K.isValidElement(n)?n.ref:null,u=Rw([s.refs.setReference,o,a]);return r&&K.isValidElement(n)?K.cloneElement(n,s.getReferenceProps({ref:u,...i,...n.props,"data-state":s.open?"open":"closed"})):k.jsx("button",{ref:u,"data-state":s.open?"open":"closed",...s.getReferenceProps(i),children:n})});const fE=K.forwardRef(function(n,r){const{context:i,...o}=j1(),s=Rw([o.refs.setFloating,r]);return i.open?k.jsx(k6,{root:n.container,children:k.jsx(cZ,{className:"Dialog-overlay",lockScroll:!0,children:k.jsx(O6,{context:i,children:k.jsx("div",{ref:s,"aria-labelledby":o.labelId,"aria-describedby":o.descriptionId,...o.getFloatingProps(n),children:n.children})})})}):null});K.forwardRef(function({children:n,...r},i){const{setLabelId:o}=j1(),s=H1();return K.useLayoutEffect(()=>(o(s),()=>o(void 0)),[s,o]),k.jsx("h2",{...r,ref:i,id:s,children:n})});K.forwardRef(function({children:n,...r},i){const{setDescriptionId:o}=j1(),s=H1();return K.useLayoutEffect(()=>(o(s),()=>o(void 0)),[s,o]),k.jsx("p",{...r,ref:i,id:s,children:n})});K.forwardRef(function(n,r){const{setOpen:i}=j1();return k.jsx("button",{type:"button",...n,ref:r,onClick:()=>i(!1)})});const PQ="modulepreload",SQ=function(e){return"/"+e},iA={},gM=function(n,r,i){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(r.map(f=>{if(f=SQ(f),f in iA)return;iA[f]=!0;const d=f.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":PQ,d||(p.as="script"),p.crossOrigin="",p.href=f,u&&p.setAttribute("nonce",u),document.head.appendChild(p),d)return new Promise((y,w)=>{p.addEventListener("load",y),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return o.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return n().catch(s)})},pM=({children:e})=>k.jsx("div",{className:"ttd-dialog-panels",children:e}),$y=({label:e,children:n,panelAction:r,panelActionDisabled:i=!1,onTextSubmitInProgress:o,renderTopRight:s,renderSubmitShortcut:a,renderBottomRight:u})=>k.jsxs("div",{className:"ttd-dialog-panel",children:[k.jsxs("div",{className:"ttd-dialog-panel__header",children:[k.jsx("label",{children:e}),s==null?void 0:s()]}),n,k.jsxs("div",{className:gn("ttd-dialog-panel-button-container",{invisible:!r}),style:{display:"flex",alignItems:"center"},children:[k.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:r&&r.action,disabled:i||o,children:k.jsxs("div",{className:gn({invisible:o}),children:[r==null?void 0:r.label,(r==null?void 0:r.icon)&&k.jsx("span",{children:r.icon})]})}),!i&&!o&&(a==null?void 0:a()),u==null?void 0:u()]})]}),oA={CTRL_OR_CMD:xb||ly?"metaKey":"ctrlKey",ENTER:"Enter"},mM=({input:e,placeholder:n,onChange:r,onKeyboardSubmit:i})=>{const o=K.useRef(null),s=K.useRef(i);return s.current=i,K.useEffect(()=>{if(!s.current)return;const a=o.current;if(a){const u=f=>{var d;f[oA.CTRL_OR_CMD]&&f.key===oA.ENTER&&(f.preventDefault(),(d=s.current)==null||d.call(s))};return a.addEventListener(Sg.KEYDOWN,u),()=>{a.removeEventListener(Sg.KEYDOWN,u)}}},[]),k.jsx("textarea",{className:"ttd-dialog-input",onChange:r,value:e,placeholder:n,autoFocus:!0,ref:o})},TQ=({error:e})=>k.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",k.jsx("p",{children:e})]}),vM=({error:e,value:n,loaded:r})=>{const i=[X4,$B,F8,qB],o={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:rB};return k.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&k.jsx(TQ,{error:e.message}),k.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:k.jsx(N8,{value:n,options:o,plugins:i,children:k.jsx(k7,{})})})]})},yM=()=>k.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[k.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:p1("CtrlOrCmd")}),k.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:p1("Enter")})]}),DQ=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,AQ=()=>{const{appState:e,setAppState:n}=Is(),{t:r,language:i}=Kn(),[o,s]=K.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});K.useEffect(()=>{(async()=>{try{const D=await gM(()=>import("./index2.js").then(A=>A.b6),[]);s({loaded:!0,api:Promise.resolve(D)})}catch(D){console.error("Failed to load mermaid library:",D),y(new Error(r("dialog.error.loadMermaid")))}})()},[r]);const[a,u]=K.useState(()=>DQ),[f,d]=K.useState(()=>[]),g=K.useDeferredValue(a.trim()),[p,y]=K.useState(null),w=Tr();K.useEffect(()=>{(async()=>{try{const D=await o.api;let A;try{A=await D.parseMermaidToDrawnix(g)}catch{A=await D.parseMermaidToDrawnix(g.replace(/"/g,"'"))}const{elements:P}=A;d(P),y(null)}catch(D){y(D instanceof Error?D:new Error(String(D)))}})()},[g,o]);const E=()=>{if(!f.length)return;const S=H.getBoardContainer(w).getBoundingClientRect(),D=[S.width/2,S.height/2],A=w.viewport.zoom,P=bg(w),b=P[0]+D[0]/A,R=P[1]+D[1]/A,L=f,V=_.getBoundingRectangle(L.filter(ne=>!Xi.isGroup(ne)).map(ne=>_.getRectangleByPoints(ne.points))),Z=[b-V.width/2,R-V.height/2];w.insertFragment({elements:JSON.parse(JSON.stringify(L))},Z,la.paste),n({...e,openDialogType:null})};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"ttd-dialog-desc",children:i==="zh"?k.jsxs(k.Fragment,{children:[r("dialog.mermaid.description")," ",k.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.flowchart")}),"",k.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.sequence")})," ",""," ",k.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.class")}),r("dialog.mermaid.otherTypes")]}):k.jsxs(k.Fragment,{children:[r("dialog.mermaid.description")," ",k.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.flowchart")}),","," ",k.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.sequence")}),","," ",k.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:r("dialog.mermaid.class")}),r("dialog.mermaid.otherTypes")]})}),k.jsxs(pM,{children:[k.jsx($y,{label:r("dialog.mermaid.syntax"),children:k.jsx(mM,{input:a,placeholder:r("dialog.mermaid.placeholder"),onChange:S=>u(S.target.value),onKeyboardSubmit:()=>{E()}})}),k.jsx($y,{label:r("dialog.mermaid.preview"),panelAction:{action:()=>{E()},label:r("dialog.mermaid.insert")},renderSubmitShortcut:()=>k.jsx(yM,{}),children:k.jsx(vM,{value:f,loaded:o.loaded,error:p})})]})]})},BQ=()=>{const{appState:e,setAppState:n}=Is(),{t:r,language:i}=Kn(),[o,s]=K.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(S,D)=>null})});K.useEffect(()=>{(async()=>{try{const D=await gM(()=>import("./index3.js"),__vite__mapDeps([0,1]));s({loaded:!0,api:Promise.resolve(D)})}catch(D){console.error("Failed to load mermaid library:",D),y(new Error(r("dialog.error.loadMermaid")))}})()},[r]);const[a,u]=K.useState(()=>r("markdown.example")),[f,d]=K.useState(()=>[]),g=K.useDeferredValue(a.trim()),[p,y]=K.useState(null),w=Tr();K.useEffect(()=>{u(r("markdown.example"))},[i,r]),K.useEffect(()=>{(async()=>{try{const D=await o.api;let A;try{A=await D.parseMarkdownToDrawnix(g)}catch{A=await D.parseMarkdownToDrawnix(g.replace(/"/g,"'"))}const P=A;P.points=[[0,0]],P&&(d([P]),y(null))}catch(D){y(D instanceof Error?D:new Error(String(D)))}})()},[g,o]);const E=()=>{if(!f.length)return;const S=H.getBoardContainer(w).getBoundingClientRect(),D=[S.width/4,S.height/2-20],A=w.viewport.zoom,P=bg(w),b=P[0]+D[0]/A,R=P[1]+D[1]/A,L=f;w.insertFragment({elements:JSON.parse(JSON.stringify(L))},[b,R],la.paste),n({...e,openDialogType:null})};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"ttd-dialog-desc",children:r("dialog.markdown.description")}),k.jsxs(pM,{children:[k.jsx($y,{label:r("dialog.markdown.syntax"),children:k.jsx(mM,{input:a,placeholder:r("dialog.markdown.placeholder"),onChange:S=>u(S.target.value),onKeyboardSubmit:()=>{E()}})}),k.jsx($y,{label:r("dialog.markdown.preview"),panelAction:{action:()=>{E()},label:r("dialog.markdown.insert")},renderSubmitShortcut:()=>k.jsx(yM,{}),children:k.jsx(vM,{value:f,loaded:o.loaded,error:p})})]})]})},MQ=({container:e})=>{const{appState:n,setAppState:r}=Is();return k.jsxs(k.Fragment,{children:[k.jsx(cE,{open:n.openDialogType===Lf.mermaidToDrawnix,onOpenChange:i=>{r({...n,openDialogType:i?Lf.mermaidToDrawnix:null})},children:k.jsx(fE,{className:"Dialog ttd-dialog",container:e,children:k.jsx(AQ,{})})}),k.jsx(cE,{open:n.openDialogType===Lf.markdownToDrawnix,onOpenChange:i=>{r({...n,openDialogType:i?Lf.markdownToDrawnix:null})},children:k.jsx(fE,{className:"Dialog ttd-dialog",container:e,children:k.jsx(BQ,{})})})]})},RQ=({container:e})=>{const{appState:n,setAppState:r}=Is(),{t:i}=Kn(),o=Tr();return k.jsx(cE,{open:n.openCleanConfirm,onOpenChange:s=>{r({...n,openCleanConfirm:s})},children:k.jsxs(fE,{className:"clean-confirm",container:e,children:[k.jsx("h2",{className:"clean-confirm__title",children:i("cleanConfirm.title")}),k.jsx("p",{className:"clean-confirm__description",children:i("cleanConfirm.description")}),k.jsxs("div",{className:"clean-confirm__actions",children:[k.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{r({...n,openCleanConfirm:!1})},children:i("cleanConfirm.cancel")}),k.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{o.deleteFragment(o.children),r({...n,openCleanConfirm:!1})},children:i("cleanConfirm.ok")})]})]})})},sA=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isHovering},aA=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isEditing},kQ=e=>r=>{const{pointerMove:i}=r;let o=null,s=null;return r.pointerMove=a=>{(H.isPointer(r,nn.selection)||H.isPointer(r,nn.hand))&&!fc(r)&&!$l(r)&&!sA(r)&&!aA(r)&&ha(r,"with-text-link",()=>{const u=a.target.closest(".plait-board-link");if(u&&u!==o){const f=u.closest(".plait-text-container"),d=Ke.toSlateNode(void 0,f),g=Ke.toSlateNode(void 0,u);o=u,e({linkState:{targetDom:u,targetElement:g,editor:d,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(s)}else!u&&o&&(s=setTimeout(()=>{!sA(r)&&!aA(r)&&e({linkState:null})},300),o=null)}),i(a)},r},bQ=()=>{var D,A,P,b;const{t:e}=Kn(),[n,r]=K.useState(""),{appState:i,setAppState:o}=Is(),s=Tr(),{refs:a,floatingStyles:u}=bw({placement:"top",middleware:[nP(20),rP()]}),f=i.linkState,d=((D=i.linkState)==null?void 0:D.targetDom)||null,g=((A=i.linkState)==null?void 0:A.isEditing)||!1,p=((P=i.linkState)==null?void 0:P.isHoveringOrigin)||!1,y=((b=i.linkState)==null?void 0:b.isHovering)||!1,w=g||p||y,E=K.useRef(i.linkState);K.useEffect(()=>{E.current=i.linkState,i.linkState?r(i.linkState.targetElement.url):r("")},[i.linkState]),K.useEffect(()=>{if(d){const R=d.getBoundingClientRect();a.setPositionReference({getBoundingClientRect(){return{x:R.x,y:R.y,width:R.width,height:R.height,top:R.y,left:R.x,right:R.x+R.width,bottom:R.y+R.height}}})}},[s.viewport,d]),K.useEffect(()=>{const R=L=>{if(a.floating.current&&!a.floating.current.contains(L.target)){if(E.current){const V=Ka.getLinkElement(E.current.editor);V&&!V[0].url.trim()&&Ka.unwrapLink(E.current.editor)}o({...i,linkState:null})}};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]);const S=()=>{if(n!==f.targetElement.url){const L=f.editor,V=f.targetElement,Z=Ke.findPath(L,V);He.setNodes(L,{url:n},{at:Z})}const R=Ka.getLinkElement(f.editor);o({...i,linkState:{...i.linkState,targetElement:R[0],isEditing:!1,isHoveringOrigin:!0}})};return w&&k.jsx(Bo,{ref:a.setFloating,style:u,padding:1,className:gn("link-popup"),onPointerEnter:()=>{y||o({...i,linkState:{...i.linkState,isHovering:!0}})},onPointerLeave:()=>{g||o({...i,linkState:{...i.linkState,isHovering:!1}})},children:k.jsx(bi.Row,{gap:1,align:"center",children:g?k.jsxs(k.Fragment,{children:[k.jsx("input",{type:"text",value:n,onChange:R=>{r(R.target.value)},onKeyDown:R=>{R.key==="Enter"&&S()},className:"link-popup__input",autoFocus:!0}),k.jsx(On,{type:"icon",visible:!0,icon:Oy,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const R=f.editor,L=f.targetElement,V=Ke.findPath(R,L);He.unwrapNodes(R,{at:V}),o({...i,linkState:null})}})]}):k.jsxs(k.Fragment,{children:[k.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"link-popup__link",children:n}),k.jsx(On,{className:"link-popup__edit",type:"icon",visible:!0,icon:Q3,title:"Edit link","aria-label":"Edit link",onPointerDown:({event:R})=>{R.preventDefault(),o({...i,linkState:{...i.linkState,isEditing:!0}})}}),k.jsx(On,{type:"icon",visible:!0,icon:Oy,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const R=f.editor,L=f.targetElement,V=Ke.findPath(R,L);He.unwrapNodes(R,{at:V}),o({...i,linkState:null})}})]})})})},OQ=()=>{const{t:e}=Kn();return k.jsx("div",{className:"drawnix-tutorial",children:k.jsx("div",{className:"tutorial-overlay",children:k.jsxs("div",{className:"tutorial-content",children:[k.jsx("h1",{className:"brand-title",children:e("tutorial.title")}),k.jsx("p",{className:"brand-description",children:e("tutorial.description")}),k.jsx("p",{className:"brand-tooltip",children:e("tutorial.dataDescription")}),k.jsxs("div",{className:"feature-pointer top-left",children:[k.jsxs("svg",{className:"pointer-arrow-svg",width:"130",height:"100",viewBox:"0 0 130 100",children:[k.jsx("defs",{children:k.jsx("marker",{id:"arrow-left",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:k.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),k.jsx("path",{d:"M 80,70 Q 35,60 15,15",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-left)"})]}),k.jsx("div",{className:"pointer-content",children:k.jsx("p",{children:e("tutorial.appToolbar")})})]}),k.jsxs("div",{className:"feature-pointer top-center",children:[k.jsxs("svg",{className:"pointer-arrow-svg",width:"100",height:"130",viewBox:"0 0 100 130",children:[k.jsx("defs",{children:k.jsx("marker",{id:"arrow-top",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:k.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),k.jsx("path",{d:"M 45,90 Q 20,50 45,10",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-top)"})]}),k.jsx("div",{className:"pointer-content",children:k.jsx("p",{children:e("tutorial.creationToolbar")})})]}),k.jsxs("div",{className:"feature-pointer bottom-right",children:[k.jsxs("svg",{className:"pointer-arrow-svg",width:"180",height:"100",viewBox:"0 0 180 100",children:[k.jsx("defs",{children:k.jsx("marker",{id:"arrow-right",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:k.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),k.jsx("path",{d:"M 20,25 Q 75,20 105,70",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-right)"})]}),k.jsx("div",{className:"pointer-content",children:k.jsx("p",{children:e("tutorial.themeDescription")})})]})]})})})},IQ=({value:e,viewport:n,theme:r,onChange:i,onSelectionChange:o,onViewportChange:s,onThemeChange:a,onValueChange:u,afterInit:f,tutorial:d=!1})=>{const g={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:rB},[p,y]=K.useState(()=>{const P=new YX(window.navigator.userAgent);return{pointer:nn.hand,isMobile:P.mobile()!==null,isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[w,E]=K.useState(null);w&&(w.appState=p);const S=P=>{y(b=>({...b,...P}))},D=[X4,F8,$B,ZX,qB,eQ(S),yQ,xQ(S),kQ(S)],A=K.useRef(null);return k.jsx(FK,{children:k.jsx(G6.Provider,{value:{appState:p,setAppState:y},children:k.jsxs("div",{className:gn("drawnix",{"drawnix--mobile":p.isMobile}),ref:A,children:[k.jsxs(N8,{value:e,viewport:n,theme:r,options:g,plugins:D,onChange:P=>{i&&i(P)},onSelectionChange:o,onViewportChange:s,onThemeChange:a,onValueChange:u,children:[k.jsx(k7,{afterInit:P=>{E(P),f&&f(P)},children:d&&w&&H.isPointer(w,nn.selection)&&k.jsx(OQ,{})}),k.jsx(JZ,{}),k.jsx(SZ,{}),k.jsx(TZ,{}),k.jsx(wQ,{}),k.jsx(UZ,{}),k.jsx(bQ,{}),k.jsx(CQ,{}),k.jsx(MQ,{container:A.current}),k.jsx(RQ,{container:A.current})]}),k.jsx("canvas",{className:`${cM} mouse-course-hidden`})]})})})};function Ov(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jx={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var lA;function FQ(){return lA||(lA=1,function(e,n){(function(r){e.exports=r()})(function(){return function r(i,o,s){function a(d,g){if(!o[d]){if(!i[d]){var p=typeof Ov=="function"&&Ov;if(!g&&p)return p(d,!0);if(u)return u(d,!0);var y=new Error("Cannot find module '"+d+"'");throw y.code="MODULE_NOT_FOUND",y}var w=o[d]={exports:{}};i[d][0].call(w.exports,function(E){var S=i[d][1][E];return a(S||E)},w,w.exports,r,i,o,s)}return o[d].exports}for(var u=typeof Ov=="function"&&Ov,f=0;f<s.length;f++)a(s[f]);return a}({1:[function(r,i,o){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,u;if(a){var f=0,d=new a(E),g=s.document.createTextNode("");d.observe(g,{characterData:!0}),u=function(){g.data=f=++f%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var p=new s.MessageChannel;p.port1.onmessage=E,u=function(){p.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?u=function(){var D=s.document.createElement("script");D.onreadystatechange=function(){E(),D.onreadystatechange=null,D.parentNode.removeChild(D),D=null},s.document.documentElement.appendChild(D)}:u=function(){setTimeout(E,0)};var y,w=[];function E(){y=!0;for(var D,A,P=w.length;P;){for(A=w,w=[],D=-1;++D<P;)A[D]();P=w.length}y=!1}i.exports=S;function S(D){w.push(D)===1&&!y&&u()}}).call(this,typeof Ds<"u"?Ds:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,i,o){var s=r(1);function a(){}var u={},f=["REJECTED"],d=["FULFILLED"],g=["PENDING"];i.exports=p;function p(L){if(typeof L!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,L!==a&&S(this,L)}p.prototype.catch=function(L){return this.then(null,L)},p.prototype.then=function(L,V){if(typeof L!="function"&&this.state===d||typeof V!="function"&&this.state===f)return this;var Z=new this.constructor(a);if(this.state!==g){var ne=this.state===d?L:V;w(Z,ne,this.outcome)}else this.queue.push(new y(Z,L,V));return Z};function y(L,V,Z){this.promise=L,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof Z=="function"&&(this.onRejected=Z,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(L){u.resolve(this.promise,L)},y.prototype.otherCallFulfilled=function(L){w(this.promise,this.onFulfilled,L)},y.prototype.callRejected=function(L){u.reject(this.promise,L)},y.prototype.otherCallRejected=function(L){w(this.promise,this.onRejected,L)};function w(L,V,Z){s(function(){var ne;try{ne=V(Z)}catch(le){return u.reject(L,le)}ne===L?u.reject(L,new TypeError("Cannot resolve promise with itself")):u.resolve(L,ne)})}u.resolve=function(L,V){var Z=D(E,V);if(Z.status==="error")return u.reject(L,Z.value);var ne=Z.value;if(ne)S(L,ne);else{L.state=d,L.outcome=V;for(var le=-1,de=L.queue.length;++le<de;)L.queue[le].callFulfilled(V)}return L},u.reject=function(L,V){L.state=f,L.outcome=V;for(var Z=-1,ne=L.queue.length;++Z<ne;)L.queue[Z].callRejected(V);return L};function E(L){var V=L&&L.then;if(L&&(typeof L=="object"||typeof L=="function")&&typeof V=="function")return function(){V.apply(L,arguments)}}function S(L,V){var Z=!1;function ne(ue){Z||(Z=!0,u.reject(L,ue))}function le(ue){Z||(Z=!0,u.resolve(L,ue))}function de(){V(le,ne)}var Pe=D(de);Pe.status==="error"&&ne(Pe.value)}function D(L,V){var Z={};try{Z.value=L(V),Z.status="success"}catch(ne){Z.status="error",Z.value=ne}return Z}p.resolve=A;function A(L){return L instanceof this?L:u.resolve(new this(a),L)}p.reject=P;function P(L){var V=new this(a);return u.reject(V,L)}p.all=b;function b(L){var V=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=L.length,ne=!1;if(!Z)return this.resolve([]);for(var le=new Array(Z),de=0,Pe=-1,ue=new this(a);++Pe<Z;)he(L[Pe],Pe);return ue;function he(ye,W){V.resolve(ye).then(O,function(N){ne||(ne=!0,u.reject(ue,N))});function O(N){le[W]=N,++de===Z&&!ne&&(ne=!0,u.resolve(ue,le))}}}p.race=R;function R(L){var V=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Z=L.length,ne=!1;if(!Z)return this.resolve([]);for(var le=-1,de=new this(a);++le<Z;)Pe(L[le]);return de;function Pe(ue){V.resolve(ue).then(function(he){ne||(ne=!0,u.resolve(de,he))},function(he){ne||(ne=!0,u.reject(de,he))})}}},{1:1}],3:[function(r,i,o){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof Ds<"u"?Ds:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,i,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};function a(q,ae){if(!(q instanceof ae))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var f=u();function d(){try{if(!f||!f.open)return!1;var q=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ae=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!q||ae)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(q,ae){q=q||[],ae=ae||{};try{return new Blob(q,ae)}catch(ge){if(ge.name!=="TypeError")throw ge;for(var J=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,me=new J,xe=0;xe<q.length;xe+=1)me.append(q[xe]);return me.getBlob(ae.type)}}typeof Promise>"u"&&r(3);var p=Promise;function y(q,ae){ae&&q.then(function(J){ae(null,J)},function(J){ae(J)})}function w(q,ae,J){typeof ae=="function"&&q.then(ae),typeof J=="function"&&q.catch(J)}function E(q){return typeof q!="string"&&(console.warn(q+" used as a key, but it is not a string."),q=String(q)),q}function S(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var D="local-forage-detect-blob-support",A=void 0,P={},b=Object.prototype.toString,R="readonly",L="readwrite";function V(q){for(var ae=q.length,J=new ArrayBuffer(ae),me=new Uint8Array(J),xe=0;xe<ae;xe++)me[xe]=q.charCodeAt(xe);return J}function Z(q){return new p(function(ae){var J=q.transaction(D,L),me=g([""]);J.objectStore(D).put(me,"key"),J.onabort=function(xe){xe.preventDefault(),xe.stopPropagation(),ae(!1)},J.oncomplete=function(){var xe=navigator.userAgent.match(/Chrome\/(\d+)/),ge=navigator.userAgent.match(/Edge\//);ae(ge||!xe||parseInt(xe[1],10)>=43)}}).catch(function(){return!1})}function ne(q){return typeof A=="boolean"?p.resolve(A):Z(q).then(function(ae){return A=ae,A})}function le(q){var ae=P[q.name],J={};J.promise=new p(function(me,xe){J.resolve=me,J.reject=xe}),ae.deferredOperations.push(J),ae.dbReady?ae.dbReady=ae.dbReady.then(function(){return J.promise}):ae.dbReady=J.promise}function de(q){var ae=P[q.name],J=ae.deferredOperations.pop();if(J)return J.resolve(),J.promise}function Pe(q,ae){var J=P[q.name],me=J.deferredOperations.pop();if(me)return me.reject(ae),me.promise}function ue(q,ae){return new p(function(J,me){if(P[q.name]=P[q.name]||Q(),q.db)if(ae)le(q),q.db.close();else return J(q.db);var xe=[q.name];ae&&xe.push(q.version);var ge=f.open.apply(f,xe);ae&&(ge.onupgradeneeded=function(Fe){var We=ge.result;try{We.createObjectStore(q.storeName),Fe.oldVersion<=1&&We.createObjectStore(D)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+q.name+'" has been upgraded from version '+Fe.oldVersion+" to version "+Fe.newVersion+', but the storage "'+q.storeName+'" already exists.');else throw qe}}),ge.onerror=function(Fe){Fe.preventDefault(),me(ge.error)},ge.onsuccess=function(){var Fe=ge.result;Fe.onversionchange=function(We){We.target.close()},J(Fe),de(q)}})}function he(q){return ue(q,!1)}function ye(q){return ue(q,!0)}function W(q,ae){if(!q.db)return!0;var J=!q.db.objectStoreNames.contains(q.storeName),me=q.version<q.db.version,xe=q.version>q.db.version;if(me&&(q.version!==ae&&console.warn('The database "'+q.name+`" can't be downgraded from version `+q.db.version+" to version "+q.version+"."),q.version=q.db.version),xe||J){if(J){var ge=q.db.version+1;ge>q.version&&(q.version=ge)}return!0}return!1}function O(q){return new p(function(ae,J){var me=new FileReader;me.onerror=J,me.onloadend=function(xe){var ge=btoa(xe.target.result||"");ae({__local_forage_encoded_blob:!0,data:ge,type:q.type})},me.readAsBinaryString(q)})}function N(q){var ae=V(atob(q.data));return g([ae],{type:q.type})}function F(q){return q&&q.__local_forage_encoded_blob}function j(q){var ae=this,J=ae._initReady().then(function(){var me=P[ae._dbInfo.name];if(me&&me.dbReady)return me.dbReady});return w(J,q,q),J}function U(q){le(q);for(var ae=P[q.name],J=ae.forages,me=0;me<J.length;me++){var xe=J[me];xe._dbInfo.db&&(xe._dbInfo.db.close(),xe._dbInfo.db=null)}return q.db=null,he(q).then(function(ge){return q.db=ge,W(q)?ye(q):ge}).then(function(ge){q.db=ae.db=ge;for(var Fe=0;Fe<J.length;Fe++)J[Fe]._dbInfo.db=ge}).catch(function(ge){throw Pe(q,ge),ge})}function I(q,ae,J,me){me===void 0&&(me=1);try{var xe=q.db.transaction(q.storeName,ae);J(null,xe)}catch(ge){if(me>0&&(!q.db||ge.name==="InvalidStateError"||ge.name==="NotFoundError"))return p.resolve().then(function(){if(!q.db||ge.name==="NotFoundError"&&!q.db.objectStoreNames.contains(q.storeName)&&q.version<=q.db.version)return q.db&&(q.version=q.db.version+1),ye(q)}).then(function(){return U(q).then(function(){I(q,ae,J,me-1)})}).catch(J);J(ge)}}function Q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ee(q){var ae=this,J={db:null};if(q)for(var me in q)J[me]=q[me];var xe=P[J.name];xe||(xe=Q(),P[J.name]=xe),xe.forages.push(ae),ae._initReady||(ae._initReady=ae.ready,ae.ready=j);var ge=[];function Fe(){return p.resolve()}for(var We=0;We<xe.forages.length;We++){var qe=xe.forages[We];qe!==ae&&ge.push(qe._initReady().catch(Fe))}var Xe=xe.forages.slice(0);return p.all(ge).then(function(){return J.db=xe.db,he(J)}).then(function(et){return J.db=et,W(J,ae._defaultConfig.version)?ye(J):et}).then(function(et){J.db=xe.db=et,ae._dbInfo=J;for(var ut=0;ut<Xe.length;ut++){var Wt=Xe[ut];Wt!==ae&&(Wt._dbInfo.db=J.db,Wt._dbInfo.version=J.version)}})}function se(q,ae){var J=this;q=E(q);var me=new p(function(xe,ge){J.ready().then(function(){I(J._dbInfo,R,function(Fe,We){if(Fe)return ge(Fe);try{var qe=We.objectStore(J._dbInfo.storeName),Xe=qe.get(q);Xe.onsuccess=function(){var et=Xe.result;et===void 0&&(et=null),F(et)&&(et=N(et)),xe(et)},Xe.onerror=function(){ge(Xe.error)}}catch(et){ge(et)}})}).catch(ge)});return y(me,ae),me}function Ee(q,ae){var J=this,me=new p(function(xe,ge){J.ready().then(function(){I(J._dbInfo,R,function(Fe,We){if(Fe)return ge(Fe);try{var qe=We.objectStore(J._dbInfo.storeName),Xe=qe.openCursor(),et=1;Xe.onsuccess=function(){var ut=Xe.result;if(ut){var Wt=ut.value;F(Wt)&&(Wt=N(Wt));var pn=q(Wt,ut.key,et++);pn!==void 0?xe(pn):ut.continue()}else xe()},Xe.onerror=function(){ge(Xe.error)}}catch(ut){ge(ut)}})}).catch(ge)});return y(me,ae),me}function ve(q,ae,J){var me=this;q=E(q);var xe=new p(function(ge,Fe){var We;me.ready().then(function(){return We=me._dbInfo,b.call(ae)==="[object Blob]"?ne(We.db).then(function(qe){return qe?ae:O(ae)}):ae}).then(function(qe){I(me._dbInfo,L,function(Xe,et){if(Xe)return Fe(Xe);try{var ut=et.objectStore(me._dbInfo.storeName);qe===null&&(qe=void 0);var Wt=ut.put(qe,q);et.oncomplete=function(){qe===void 0&&(qe=null),ge(qe)},et.onabort=et.onerror=function(){var pn=Wt.error?Wt.error:Wt.transaction.error;Fe(pn)}}catch(pn){Fe(pn)}})}).catch(Fe)});return y(xe,J),xe}function be(q,ae){var J=this;q=E(q);var me=new p(function(xe,ge){J.ready().then(function(){I(J._dbInfo,L,function(Fe,We){if(Fe)return ge(Fe);try{var qe=We.objectStore(J._dbInfo.storeName),Xe=qe.delete(q);We.oncomplete=function(){xe()},We.onerror=function(){ge(Xe.error)},We.onabort=function(){var et=Xe.error?Xe.error:Xe.transaction.error;ge(et)}}catch(et){ge(et)}})}).catch(ge)});return y(me,ae),me}function Oe(q){var ae=this,J=new p(function(me,xe){ae.ready().then(function(){I(ae._dbInfo,L,function(ge,Fe){if(ge)return xe(ge);try{var We=Fe.objectStore(ae._dbInfo.storeName),qe=We.clear();Fe.oncomplete=function(){me()},Fe.onabort=Fe.onerror=function(){var Xe=qe.error?qe.error:qe.transaction.error;xe(Xe)}}catch(Xe){xe(Xe)}})}).catch(xe)});return y(J,q),J}function ie(q){var ae=this,J=new p(function(me,xe){ae.ready().then(function(){I(ae._dbInfo,R,function(ge,Fe){if(ge)return xe(ge);try{var We=Fe.objectStore(ae._dbInfo.storeName),qe=We.count();qe.onsuccess=function(){me(qe.result)},qe.onerror=function(){xe(qe.error)}}catch(Xe){xe(Xe)}})}).catch(xe)});return y(J,q),J}function De(q,ae){var J=this,me=new p(function(xe,ge){if(q<0){xe(null);return}J.ready().then(function(){I(J._dbInfo,R,function(Fe,We){if(Fe)return ge(Fe);try{var qe=We.objectStore(J._dbInfo.storeName),Xe=!1,et=qe.openKeyCursor();et.onsuccess=function(){var ut=et.result;if(!ut){xe(null);return}q===0||Xe?xe(ut.key):(Xe=!0,ut.advance(q))},et.onerror=function(){ge(et.error)}}catch(ut){ge(ut)}})}).catch(ge)});return y(me,ae),me}function Re(q){var ae=this,J=new p(function(me,xe){ae.ready().then(function(){I(ae._dbInfo,R,function(ge,Fe){if(ge)return xe(ge);try{var We=Fe.objectStore(ae._dbInfo.storeName),qe=We.openKeyCursor(),Xe=[];qe.onsuccess=function(){var et=qe.result;if(!et){me(Xe);return}Xe.push(et.key),et.continue()},qe.onerror=function(){xe(qe.error)}}catch(et){xe(et)}})}).catch(xe)});return y(J,q),J}function Ie(q,ae){ae=S.apply(this,arguments);var J=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||J.name,q.storeName=q.storeName||J.storeName);var me=this,xe;if(!q.name)xe=p.reject("Invalid arguments");else{var ge=q.name===J.name&&me._dbInfo.db,Fe=ge?p.resolve(me._dbInfo.db):he(q).then(function(We){var qe=P[q.name],Xe=qe.forages;qe.db=We;for(var et=0;et<Xe.length;et++)Xe[et]._dbInfo.db=We;return We});q.storeName?xe=Fe.then(function(We){if(We.objectStoreNames.contains(q.storeName)){var qe=We.version+1;le(q);var Xe=P[q.name],et=Xe.forages;We.close();for(var ut=0;ut<et.length;ut++){var Wt=et[ut];Wt._dbInfo.db=null,Wt._dbInfo.version=qe}var pn=new p(function(ln,Mt){var Dn=f.open(q.name,qe);Dn.onerror=function(Nr){var is=Dn.result;is.close(),Mt(Nr)},Dn.onupgradeneeded=function(){var Nr=Dn.result;Nr.deleteObjectStore(q.storeName)},Dn.onsuccess=function(){var Nr=Dn.result;Nr.close(),ln(Nr)}});return pn.then(function(ln){Xe.db=ln;for(var Mt=0;Mt<et.length;Mt++){var Dn=et[Mt];Dn._dbInfo.db=ln,de(Dn._dbInfo)}}).catch(function(ln){throw(Pe(q,ln)||p.resolve()).catch(function(){}),ln})}}):xe=Fe.then(function(We){le(q);var qe=P[q.name],Xe=qe.forages;We.close();for(var et=0;et<Xe.length;et++){var ut=Xe[et];ut._dbInfo.db=null}var Wt=new p(function(pn,ln){var Mt=f.deleteDatabase(q.name);Mt.onerror=function(){var Dn=Mt.result;Dn&&Dn.close(),ln(Mt.error)},Mt.onblocked=function(){console.warn('dropInstance blocked for database "'+q.name+'" until all open connections are closed')},Mt.onsuccess=function(){var Dn=Mt.result;Dn&&Dn.close(),pn(Dn)}});return Wt.then(function(pn){qe.db=pn;for(var ln=0;ln<Xe.length;ln++){var Mt=Xe[ln];de(Mt._dbInfo)}}).catch(function(pn){throw(Pe(q,pn)||p.resolve()).catch(function(){}),pn})})}return y(xe,ae),xe}var ct={_driver:"asyncStorage",_initStorage:ee,_support:d(),iterate:Ee,getItem:se,setItem:ve,removeItem:be,clear:Oe,length:ie,key:De,keys:Re,dropInstance:Ie};function Ne(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt="~~local_forage_type~",Qe=/^~~local_forage_type~([^~]+)~/,St="__lfsc__:",ft=St.length,Ot="arbf",mt="blob",Ut="si08",Gn="ui08",Ar="uic8",Fn="si16",wi="si32",mr="ur16",En="ui32",In="fl32",_r="fl64",Ii=ft+Ot.length,Fs=Object.prototype.toString;function ts(q){var ae=q.length*.75,J=q.length,me,xe=0,ge,Fe,We,qe;q[q.length-1]==="="&&(ae--,q[q.length-2]==="="&&ae--);var Xe=new ArrayBuffer(ae),et=new Uint8Array(Xe);for(me=0;me<J;me+=4)ge=yt.indexOf(q[me]),Fe=yt.indexOf(q[me+1]),We=yt.indexOf(q[me+2]),qe=yt.indexOf(q[me+3]),et[xe++]=ge<<2|Fe>>4,et[xe++]=(Fe&15)<<4|We>>2,et[xe++]=(We&3)<<6|qe&63;return Xe}function Mo(q){var ae=new Uint8Array(q),J="",me;for(me=0;me<ae.length;me+=3)J+=yt[ae[me]>>2],J+=yt[(ae[me]&3)<<4|ae[me+1]>>4],J+=yt[(ae[me+1]&15)<<2|ae[me+2]>>6],J+=yt[ae[me+2]&63];return ae.length%3===2?J=J.substring(0,J.length-1)+"=":ae.length%3===1&&(J=J.substring(0,J.length-2)+"=="),J}function sl(q,ae){var J="";if(q&&(J=Fs.call(q)),q&&(J==="[object ArrayBuffer]"||q.buffer&&Fs.call(q.buffer)==="[object ArrayBuffer]")){var me,xe=St;q instanceof ArrayBuffer?(me=q,xe+=Ot):(me=q.buffer,J==="[object Int8Array]"?xe+=Ut:J==="[object Uint8Array]"?xe+=Gn:J==="[object Uint8ClampedArray]"?xe+=Ar:J==="[object Int16Array]"?xe+=Fn:J==="[object Uint16Array]"?xe+=mr:J==="[object Int32Array]"?xe+=wi:J==="[object Uint32Array]"?xe+=En:J==="[object Float32Array]"?xe+=In:J==="[object Float64Array]"?xe+=_r:ae(new Error("Failed to get type for BinaryArray"))),ae(xe+Mo(me))}else if(J==="[object Blob]"){var ge=new FileReader;ge.onload=function(){var Fe=lt+q.type+"~"+Mo(this.result);ae(St+mt+Fe)},ge.readAsArrayBuffer(q)}else try{ae(JSON.stringify(q))}catch(Fe){console.error("Couldn't convert value into a JSON string: ",q),ae(null,Fe)}}function Ro(q){if(q.substring(0,ft)!==St)return JSON.parse(q);var ae=q.substring(Ii),J=q.substring(ft,Ii),me;if(J===mt&&Qe.test(ae)){var xe=ae.match(Qe);me=xe[1],ae=ae.substring(xe[0].length)}var ge=ts(ae);switch(J){case Ot:return ge;case mt:return g([ge],{type:me});case Ut:return new Int8Array(ge);case Gn:return new Uint8Array(ge);case Ar:return new Uint8ClampedArray(ge);case Fn:return new Int16Array(ge);case mr:return new Uint16Array(ge);case wi:return new Int32Array(ge);case En:return new Uint32Array(ge);case In:return new Float32Array(ge);case _r:return new Float64Array(ge);default:throw new Error("Unkown type: "+J)}}var Zi={serialize:sl,deserialize:Ro,stringToBuffer:ts,bufferToString:Mo};function su(q,ae,J,me){q.executeSql("CREATE TABLE IF NOT EXISTS "+ae.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],J,me)}function Dc(q){var ae=this,J={db:null};if(q)for(var me in q)J[me]=typeof q[me]!="string"?q[me].toString():q[me];var xe=new p(function(ge,Fe){try{J.db=openDatabase(J.name,String(J.version),J.description,J.size)}catch(We){return Fe(We)}J.db.transaction(function(We){su(We,J,function(){ae._dbInfo=J,ge()},function(qe,Xe){Fe(Xe)})},Fe)});return J.serializer=Zi,xe}function Qi(q,ae,J,me,xe,ge){q.executeSql(J,me,xe,function(Fe,We){We.code===We.SYNTAX_ERR?Fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ae.storeName],function(qe,Xe){Xe.rows.length?ge(qe,We):su(qe,ae,function(){qe.executeSql(J,me,xe,ge)},ge)},ge):ge(Fe,We)},ge)}function Ls(q,ae){var J=this;q=E(q);var me=new p(function(xe,ge){J.ready().then(function(){var Fe=J._dbInfo;Fe.db.transaction(function(We){Qi(We,Fe,"SELECT * FROM "+Fe.storeName+" WHERE key = ? LIMIT 1",[q],function(qe,Xe){var et=Xe.rows.length?Xe.rows.item(0).value:null;et&&(et=Fe.serializer.deserialize(et)),xe(et)},function(qe,Xe){ge(Xe)})})}).catch(ge)});return y(me,ae),me}function _s(q,ae){var J=this,me=new p(function(xe,ge){J.ready().then(function(){var Fe=J._dbInfo;Fe.db.transaction(function(We){Qi(We,Fe,"SELECT * FROM "+Fe.storeName,[],function(qe,Xe){for(var et=Xe.rows,ut=et.length,Wt=0;Wt<ut;Wt++){var pn=et.item(Wt),ln=pn.value;if(ln&&(ln=Fe.serializer.deserialize(ln)),ln=q(ln,pn.key,Wt+1),ln!==void 0){xe(ln);return}}xe()},function(qe,Xe){ge(Xe)})})}).catch(ge)});return y(me,ae),me}function Ac(q,ae,J,me){var xe=this;q=E(q);var ge=new p(function(Fe,We){xe.ready().then(function(){ae===void 0&&(ae=null);var qe=ae,Xe=xe._dbInfo;Xe.serializer.serialize(ae,function(et,ut){ut?We(ut):Xe.db.transaction(function(Wt){Qi(Wt,Xe,"INSERT OR REPLACE INTO "+Xe.storeName+" (key, value) VALUES (?, ?)",[q,et],function(){Fe(qe)},function(pn,ln){We(ln)})},function(Wt){if(Wt.code===Wt.QUOTA_ERR){if(me>0){Fe(Ac.apply(xe,[q,qe,J,me-1]));return}We(Wt)}})})}).catch(We)});return y(ge,J),ge}function fh(q,ae,J){return Ac.apply(this,[q,ae,J,1])}function hh(q,ae){var J=this;q=E(q);var me=new p(function(xe,ge){J.ready().then(function(){var Fe=J._dbInfo;Fe.db.transaction(function(We){Qi(We,Fe,"DELETE FROM "+Fe.storeName+" WHERE key = ?",[q],function(){xe()},function(qe,Xe){ge(Xe)})})}).catch(ge)});return y(me,ae),me}function dh(q){var ae=this,J=new p(function(me,xe){ae.ready().then(function(){var ge=ae._dbInfo;ge.db.transaction(function(Fe){Qi(Fe,ge,"DELETE FROM "+ge.storeName,[],function(){me()},function(We,qe){xe(qe)})})}).catch(xe)});return y(J,q),J}function Bc(q){var ae=this,J=new p(function(me,xe){ae.ready().then(function(){var ge=ae._dbInfo;ge.db.transaction(function(Fe){Qi(Fe,ge,"SELECT COUNT(key) as c FROM "+ge.storeName,[],function(We,qe){var Xe=qe.rows.item(0).c;me(Xe)},function(We,qe){xe(qe)})})}).catch(xe)});return y(J,q),J}function Mc(q,ae){var J=this,me=new p(function(xe,ge){J.ready().then(function(){var Fe=J._dbInfo;Fe.db.transaction(function(We){Qi(We,Fe,"SELECT key FROM "+Fe.storeName+" WHERE id = ? LIMIT 1",[q+1],function(qe,Xe){var et=Xe.rows.length?Xe.rows.item(0).key:null;xe(et)},function(qe,Xe){ge(Xe)})})}).catch(ge)});return y(me,ae),me}function gh(q){var ae=this,J=new p(function(me,xe){ae.ready().then(function(){var ge=ae._dbInfo;ge.db.transaction(function(Fe){Qi(Fe,ge,"SELECT key FROM "+ge.storeName,[],function(We,qe){for(var Xe=[],et=0;et<qe.rows.length;et++)Xe.push(qe.rows.item(et).key);me(Xe)},function(We,qe){xe(qe)})})}).catch(xe)});return y(J,q),J}function al(q){return new p(function(ae,J){q.transaction(function(me){me.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(xe,ge){for(var Fe=[],We=0;We<ge.rows.length;We++)Fe.push(ge.rows.item(We).name);ae({db:q,storeNames:Fe})},function(xe,ge){J(ge)})},function(me){J(me)})})}function ll(q,ae){ae=S.apply(this,arguments);var J=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||J.name,q.storeName=q.storeName||J.storeName);var me=this,xe;return q.name?xe=new p(function(ge){var Fe;q.name===J.name?Fe=me._dbInfo.db:Fe=openDatabase(q.name,"","",0),q.storeName?ge({db:Fe,storeNames:[q.storeName]}):ge(al(Fe))}).then(function(ge){return new p(function(Fe,We){ge.db.transaction(function(qe){function Xe(pn){return new p(function(ln,Mt){qe.executeSql("DROP TABLE IF EXISTS "+pn,[],function(){ln()},function(Dn,Nr){Mt(Nr)})})}for(var et=[],ut=0,Wt=ge.storeNames.length;ut<Wt;ut++)et.push(Xe(ge.storeNames[ut]));p.all(et).then(function(){Fe()}).catch(function(pn){We(pn)})},function(qe){We(qe)})})}):xe=p.reject("Invalid arguments"),y(xe,ae),xe}var ul={_driver:"webSQLStorage",_initStorage:Dc,_support:Ne(),iterate:_s,getItem:Ls,setItem:fh,removeItem:hh,clear:dh,length:Bc,key:Mc,keys:gh,dropInstance:ll};function Rc(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function pa(q,ae){var J=q.name+"/";return q.storeName!==ae.storeName&&(J+=q.storeName+"/"),J}function au(){var q="_localforage_support_test";try{return localStorage.setItem(q,!0),localStorage.removeItem(q),!1}catch{return!0}}function lu(){return!au()||localStorage.length>0}function kc(q){var ae=this,J={};if(q)for(var me in q)J[me]=q[me];return J.keyPrefix=pa(q,ae._defaultConfig),lu()?(ae._dbInfo=J,J.serializer=Zi,p.resolve()):p.reject()}function Vg(q){var ae=this,J=ae.ready().then(function(){for(var me=ae._dbInfo.keyPrefix,xe=localStorage.length-1;xe>=0;xe--){var ge=localStorage.key(xe);ge.indexOf(me)===0&&localStorage.removeItem(ge)}});return y(J,q),J}function Ug(q,ae){var J=this;q=E(q);var me=J.ready().then(function(){var xe=J._dbInfo,ge=localStorage.getItem(xe.keyPrefix+q);return ge&&(ge=xe.serializer.deserialize(ge)),ge});return y(me,ae),me}function Xg(q,ae){var J=this,me=J.ready().then(function(){for(var xe=J._dbInfo,ge=xe.keyPrefix,Fe=ge.length,We=localStorage.length,qe=1,Xe=0;Xe<We;Xe++){var et=localStorage.key(Xe);if(et.indexOf(ge)===0){var ut=localStorage.getItem(et);if(ut&&(ut=xe.serializer.deserialize(ut)),ut=q(ut,et.substring(Fe),qe++),ut!==void 0)return ut}}});return y(me,ae),me}function Ns(q,ae){var J=this,me=J.ready().then(function(){var xe=J._dbInfo,ge;try{ge=localStorage.key(q)}catch{ge=null}return ge&&(ge=ge.substring(xe.keyPrefix.length)),ge});return y(me,ae),me}function bc(q){var ae=this,J=ae.ready().then(function(){for(var me=ae._dbInfo,xe=localStorage.length,ge=[],Fe=0;Fe<xe;Fe++){var We=localStorage.key(Fe);We.indexOf(me.keyPrefix)===0&&ge.push(We.substring(me.keyPrefix.length))}return ge});return y(J,q),J}function ph(q){var ae=this,J=ae.keys().then(function(me){return me.length});return y(J,q),J}function Kg(q,ae){var J=this;q=E(q);var me=J.ready().then(function(){var xe=J._dbInfo;localStorage.removeItem(xe.keyPrefix+q)});return y(me,ae),me}function mh(q,ae,J){var me=this;q=E(q);var xe=me.ready().then(function(){ae===void 0&&(ae=null);var ge=ae;return new p(function(Fe,We){var qe=me._dbInfo;qe.serializer.serialize(ae,function(Xe,et){if(et)We(et);else try{localStorage.setItem(qe.keyPrefix+q,Xe),Fe(ge)}catch(ut){(ut.name==="QuotaExceededError"||ut.name==="NS_ERROR_DOM_QUOTA_REACHED")&&We(ut),We(ut)}})})});return y(xe,J),xe}function vh(q,ae){if(ae=S.apply(this,arguments),q=typeof q!="function"&&q||{},!q.name){var J=this.config();q.name=q.name||J.name,q.storeName=q.storeName||J.storeName}var me=this,xe;return q.name?xe=new p(function(ge){q.storeName?ge(pa(q,me._defaultConfig)):ge(q.name+"/")}).then(function(ge){for(var Fe=localStorage.length-1;Fe>=0;Fe--){var We=localStorage.key(Fe);We.indexOf(ge)===0&&localStorage.removeItem(We)}}):xe=p.reject("Invalid arguments"),y(xe,ae),xe}var yh={_driver:"localStorageWrapper",_initStorage:kc,_support:Rc(),iterate:Xg,getItem:Ug,setItem:mh,removeItem:Kg,clear:Vg,length:ph,key:Ns,keys:bc,dropInstance:vh},wh=function(ae,J){return ae===J||typeof ae=="number"&&typeof J=="number"&&isNaN(ae)&&isNaN(J)},uu=function(ae,J){for(var me=ae.length,xe=0;xe<me;){if(wh(ae[xe],J))return!0;xe++}return!1},xh=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"},Pn={},Ch={},ns={INDEXEDDB:ct,WEBSQL:ul,LOCALSTORAGE:yh},Eh=[ns.INDEXEDDB._driver,ns.WEBSQL._driver,ns.LOCALSTORAGE._driver],rs=["dropInstance"],cu=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(rs),Oc={description:"",driver:Eh.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function fu(q,ae){q[ae]=function(){var J=arguments;return q.ready().then(function(){return q[ae].apply(q,J)})}}function xi(){for(var q=1;q<arguments.length;q++){var ae=arguments[q];if(ae)for(var J in ae)ae.hasOwnProperty(J)&&(xh(ae[J])?arguments[0][J]=ae[J].slice():arguments[0][J]=ae[J])}return arguments[0]}var qg=function(){function q(ae){a(this,q);for(var J in ns)if(ns.hasOwnProperty(J)){var me=ns[J],xe=me._driver;this[J]=xe,Pn[xe]||this.defineDriver(me)}this._defaultConfig=xi({},Oc),this._config=xi({},this._defaultConfig,ae),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return q.prototype.config=function(J){if((typeof J>"u"?"undefined":s(J))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var me in J){if(me==="storeName"&&(J[me]=J[me].replace(/\W/g,"_")),me==="version"&&typeof J[me]!="number")return new Error("Database version must be a number.");this._config[me]=J[me]}return"driver"in J&&J.driver?this.setDriver(this._config.driver):!0}else return typeof J=="string"?this._config[J]:this._config},q.prototype.defineDriver=function(J,me,xe){var ge=new p(function(Fe,We){try{var qe=J._driver,Xe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!J._driver){We(Xe);return}for(var et=cu.concat("_initStorage"),ut=0,Wt=et.length;ut<Wt;ut++){var pn=et[ut],ln=!uu(rs,pn);if((ln||J[pn])&&typeof J[pn]!="function"){We(Xe);return}}var Mt=function(){for(var is=function(fl){return function(){var os=new Error("Method "+fl+" is not implemented by the current driver"),ko=p.reject(os);return y(ko,arguments[arguments.length-1]),ko}},hu=0,Ic=rs.length;hu<Ic;hu++){var cl=rs[hu];J[cl]||(J[cl]=is(cl))}};Mt();var Dn=function(is){Pn[qe]&&console.info("Redefining LocalForage driver: "+qe),Pn[qe]=J,Ch[qe]=is,Fe()};"_support"in J?J._support&&typeof J._support=="function"?J._support().then(Dn,We):Dn(!!J._support):Dn(!0)}catch(Nr){We(Nr)}});return w(ge,me,xe),ge},q.prototype.driver=function(){return this._driver||null},q.prototype.getDriver=function(J,me,xe){var ge=Pn[J]?p.resolve(Pn[J]):p.reject(new Error("Driver not found."));return w(ge,me,xe),ge},q.prototype.getSerializer=function(J){var me=p.resolve(Zi);return w(me,J),me},q.prototype.ready=function(J){var me=this,xe=me._driverSet.then(function(){return me._ready===null&&(me._ready=me._initDriver()),me._ready});return w(xe,J,J),xe},q.prototype.setDriver=function(J,me,xe){var ge=this;xh(J)||(J=[J]);var Fe=this._getSupportedDrivers(J);function We(){ge._config.driver=ge.driver()}function qe(ut){return ge._extend(ut),We(),ge._ready=ge._initStorage(ge._config),ge._ready}function Xe(ut){return function(){var Wt=0;function pn(){for(;Wt<ut.length;){var ln=ut[Wt];return Wt++,ge._dbInfo=null,ge._ready=null,ge.getDriver(ln).then(qe).catch(pn)}We();var Mt=new Error("No available storage method found.");return ge._driverSet=p.reject(Mt),ge._driverSet}return pn()}}var et=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=et.then(function(){var ut=Fe[0];return ge._dbInfo=null,ge._ready=null,ge.getDriver(ut).then(function(Wt){ge._driver=Wt._driver,We(),ge._wrapLibraryMethodsWithReady(),ge._initDriver=Xe(Fe)})}).catch(function(){We();var ut=new Error("No available storage method found.");return ge._driverSet=p.reject(ut),ge._driverSet}),w(this._driverSet,me,xe),this._driverSet},q.prototype.supports=function(J){return!!Ch[J]},q.prototype._extend=function(J){xi(this,J)},q.prototype._getSupportedDrivers=function(J){for(var me=[],xe=0,ge=J.length;xe<ge;xe++){var Fe=J[xe];this.supports(Fe)&&me.push(Fe)}return me},q.prototype._wrapLibraryMethodsWithReady=function(){for(var J=0,me=cu.length;J<me;J++)fu(this,cu[J])},q.prototype.createInstance=function(J){return new q(J)},q}(),Fi=new qg;i.exports=Fi},{3:3}]},{},[4])(4)})}(jx)),jx.exports}var LQ=FQ();const Np=vc(LQ),uA="main_board_content";Np.config({name:"Drawnix",storeName:"drawnix_store",driver:[Np.INDEXEDDB,Np.LOCALSTORAGE]});function wM({initialValue:e,onChange:n}){const[r,i]=K.useState({children:[]}),[o,s]=K.useState(!1);return K.useEffect(()=>{if(e){i(e),e.children&&e.children.length===0&&s(!0);return}(async()=>{const u=await Np.getItem(uA);if(u){i(u),u.children&&u.children.length===0&&s(!0);return}s(!0)})()},[e]),k.jsx(IQ,{value:r.children,viewport:r.viewport,theme:r.theme,onChange:a=>{const u=a;i(u),n?n(u):Np.setItem(uA,u),u.children&&u.children.length>0&&s(!1)},tutorial:o,afterInit:a=>{console.log("board initialized")}})}window.initDrawnix=(e,n,r)=>{const i=w1.createRoot(e);return i.render(k.jsx(K.StrictMode,{children:k.jsx(wM,{initialValue:n,onChange:r})})),i};const zx=document.getElementById("root");zx&&!zx.hasAttribute("data-no-auto-init")&&w1.createRoot(zx).render(k.jsx(K.StrictMode,{children:k.jsx(wM,{})}));export{Kr as A,Et as B,Jp as D,Ct as F,nt as M,Je as N,Xi as P,_ as R,Vi as S,gM as _,O1 as a,ah as b,GO as c,T3 as d,lg as e,Fz as f,vc as g,q8 as h,Nn as i,gt as j,Tn as k,Cw as l,B1 as m,Ds as n,Ov as o};
